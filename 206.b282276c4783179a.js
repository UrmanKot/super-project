"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[206],{8206:(X,q,l)=>{l.r(q),l.d(q,{SalesModule:()=>En});var c=l(6895),C=l(4269),e=l(4650),F=l(9293);let w=(()=>{class n{constructor(){this.routes=[{label:"Sales Chains",commands:["sales-procurement-chains"]},{label:"Prices",commands:["nomenclature-price"]}],this.settingsRoutes=[{label:"Statuses",commands:["statuses"]},{label:"Countries & Regions",commands:["regions"]}]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-sales-layout"]],decls:2,vars:3,consts:[[3,"module","routes","settingsRoutes"]],template:function(t,i){1&t&&e._UZ(0,"pek-header",0)(1,"router-outlet"),2&t&&e.Q6J("module","Sales")("routes",i.routes)("settingsRoutes",i.settingsRoutes)},dependencies:[C.lC,F.G]}),n})();var _=l(3068),b=l(7579),U=l(4968),g=l(2722),m=l(8505),p=l(4004),f=l(8372),r=l(4006),Z=l(3178),h=l(5593),x=l(1740),P=l(805),E=l(3608),ee=l(1989),v=l(5390),T=l(3237),Y=l(1997),te=l(2746);const ne=["paginator"],ie=["searchBoxName"],ae=["searchBoxCode"];function se(n,a){1&n&&e.GkF(0)}function oe(n,a){1&n&&e.GkF(0)}function le(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",32),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",33),e._uU(4,"Code"),e.qZA(),e.TgZ(5,"th",33),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th",34),e._uU(8,"Price"),e.qZA()())}function re(n,a){if(1&n&&(e.TgZ(0,"tr",35)(1,"td",32),e._uU(2),e.qZA(),e.TgZ(3,"td",33),e._uU(4),e.qZA(),e.TgZ(5,"td",33),e._uU(6),e.qZA(),e.TgZ(7,"td",34),e._uU(8),e.ALo(9,"number"),e.qZA()()),2&n){const t=a.$implicit,i=a.rowIndex,s=e.oxw();e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(10*(s.searchForm.get("page").value-1)+i+1),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(9,5,t.price,"1.2-2"))}}function ce(n,a){1&n&&e._UZ(0,"i",39)}function pe(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function ue(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",36),e.YNc(2,ce,1,0,"i",37),e.YNc(3,pe,2,0,"span",38),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",4),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function de(n,a){1&n&&(e.TgZ(0,"div",40),e._UZ(1,"i",39),e.qZA())}function ge(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",41)(1,"p-paginator",42,43),e.NdJ("onPageChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.paginate(s))}),e.qZA(),e.TgZ(3,"p-button",44),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onShowAll())}),e._uU(4," All "),e.qZA()()}if(2&n){const t=e.oxw();e.ekj("paginator-wrapper_hide",0===t.nomenclatures.length),e.xp6(1),e.Q6J("rows",10)("totalRecords",t.count)}}function me(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",45)(1,"p-button",46),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onShowPartial())}),e._uU(2," Return pagination "),e.qZA()()}}function he(n,a){if(1&n&&e._UZ(0,"button",47),2&n){const t=e.oxw();e.Q6J("disabled",!t.selectedNomenclature)}}const _e=function(n,a){return[n,a]};let fe=(()=>{class n{constructor(t,i){this.fb=t,this.nomenclatureService=i,this.nomenclatureType=_.BN,this.nomenclatures=[],this.tableScrollHeight="24.125rem",this.isHideFilters=!1,this.isStartOnePage=!1,this.isShowAll=!1,this.isLoading=!0,this.count=0,this.searchForm=this.fb.group({name:[null],code:[null],page:[1],type_numbers:[null],has_price:[null]}),this.queryKey="name:null/code:null/type_numbers:null/has_price:null",this.query=[{name:"page",value:this.searchForm.get("page").value},{name:"type_numbers",value:`${_.BN.MANUFACTURED},${_.BN.ASSEMBLY}`},{name:"paginated",value:!0},{name:"order_by_price",value:!0}],this.destroy$=new b.x}ngAfterViewInit(){(0,U.R)(this.searchBoxName.nativeElement,"keyup").pipe((0,m.b)(()=>this.selectedNomenclature=null),(0,p.U)(()=>this.searchBoxName.nativeElement.value),(0,f.b)(350)).subscribe(()=>{this.searchNomenclatures()}),(0,U.R)(this.searchBoxCode.nativeElement,"keyup").pipe((0,m.b)(()=>this.selectedNomenclature=null),(0,p.U)(()=>this.searchBoxCode.nativeElement.value),(0,f.b)(350)).subscribe(()=>{this.searchNomenclatures()})}ngOnInit(){this.getNomenclaturesForPagination()}getNomenclaturesForPagination(){this.nomenclatureService.getForPagination(this.query).pipe((0,g.R)(this.destroy$)).subscribe(t=>{this.nomenclatures=t.results,this.count=t.count,this.isStartOnePage&&this.paginator.changePage(0),this.isStartOnePage=!1,this.isLoading=!1})}getNomenclatures(){this.nomenclatureService.get(this.query).pipe((0,g.R)(this.destroy$)).subscribe(t=>{this.nomenclatures=t,this.count=t.length,this.isStartOnePage&&this.paginator?.changePage(0),this.isStartOnePage=!1,this.isLoading=!1})}searchNomenclatures(){this.isLoading=!0,this.destroy$.next(!0),this.selectedNomenclature=null;const t=`name:${this.searchForm.get("name").value}/code:${this.searchForm.get("code").value}/type_numbers:${this.searchForm.get("type_numbers").value}/has_price:${this.searchForm.get("has_price").value}`;t!==this.queryKey&&(this.queryKey=t,this.searchForm.get("page").patchValue(1),this.isStartOnePage=!0),this.query=[{name:"order_by_price",value:!0}],this.isShowAll||(this.query.push({name:"paginated",value:"true"}),this.query.push({name:"page",value:this.searchForm.get("page").value})),this.searchForm.get("name").value&&this.query.push({name:"name",value:this.searchForm.get("name").value}),this.searchForm.get("code").value&&this.query.push({name:"code",value:this.searchForm.get("code").value}),null!==this.searchForm.get("has_price").value&&this.query.push({name:"has_price",value:this.searchForm.get("has_price").value}),null!==this.searchForm.get("type_numbers").value?this.query.push({name:"type_numbers",value:this.searchForm.get("type_numbers").value}):this.query.push({name:"type_numbers",value:`${_.BN.MANUFACTURED},${_.BN.ASSEMBLY}`}),this.isShowAll?(this.searchForm.get("page").patchValue(1),this.getNomenclatures()):this.getNomenclaturesForPagination()}toggleFilterVisibility(){this.isHideFilters=!this.isHideFilters,this.setTableScrollHeight()}setTableScrollHeight(){!this.isHideFilters||this.isShowAll?this.isHideFilters&&this.isShowAll?this.tableScrollHeight="18.75rem":this.isHideFilters||!this.isShowAll?this.isHideFilters||this.isShowAll||(this.tableScrollHeight="24.125rem"):this.tableScrollHeight="21.875rem":this.tableScrollHeight="20.875rem"}onShowAll(){this.isShowAll=!0,this.setTableScrollHeight(),this.searchNomenclatures()}onShowPartial(){this.isShowAll=!1,this.setTableScrollHeight(),this.searchNomenclatures()}paginate(t){this.isStartOnePage||(this.searchForm.get("page").patchValue(t.page+1),this.searchNomenclatures())}onChoiceNomenclatureType(t){this.searchForm.get("type_numbers").patchValue(t),this.searchNomenclatures()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(Z.g))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-nomenclature-price"]],viewQuery:function(t,i){if(1&t&&(e.Gf(ne,5),e.Gf(ie,5),e.Gf(ae,5)),2&t){let s;e.iGM(s=e.CRH())&&(i.paginator=s.first),e.iGM(s=e.CRH())&&(i.searchBoxName=s.first),e.iGM(s=e.CRH())&&(i.searchBoxCode=s.first)}},decls:48,vars:25,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[1,"page__content"],[1,"page__card"],[1,"filters-visibility"],[1,"filters-visibility__header"],[4,"ngTemplateOutlet"],["tooltipPosition","left",1,"icon","pi",3,"pTooltip","click"],[1,"form","mb-3",3,"formGroup"],[1,"row"],[1,"col-3"],[1,"form-group"],["formControlName","code","pInputText","",1,"form-control"],["searchBoxCode",""],["formControlName","name","pInputText","",1,"form-control"],["searchBoxName",""],[3,"filteredNomenclatureTypes","choiceNomenclatureType"],[1,"actions"],[1,"checkbox","mr-auto"],["label","Has Price?","formControlName","has_price",3,"binary","ngModelChange"],[1,"table-pagination-preloader"],["selectionMode","single","rowExpandMode","single","dataKey","id",3,"scrollHeight","scrollable","rows","selection","value","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","pagination-preloader pagination-preloader_bord",4,"ngIf"],["class","paginator-wrapper",3,"paginator-wrapper_hide",4,"ngIf"],["class","paginator-return-pagination",4,"ngIf"],["actionButtons",""],[1,"text-center",2,"width","5%"],[2,"width","20%"],[1,"text-center",2,"width","15%"],[3,"pSelectableRow"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"],[1,"pagination-preloader","pagination-preloader_bord"],[1,"paginator-wrapper"],[3,"rows","totalRecords","onPageChange"],["paginator",""],["type","button","styleClass","p-button-text",1,"paginator-all",3,"click"],[1,"paginator-return-pagination"],["type","button","styleClass","p-button-text",3,"click"],["pButton","","type","button","icon","pi pi-pencil","label","Edit Price",1,"p-button-icon","ml-auto",3,"disabled"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Nomenclature Price"),e.qZA()()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"div",6)(9,"div",7),e.YNc(10,se,1,0,"ng-container",8),e.qZA(),e.TgZ(11,"button",9),e.NdJ("click",function(){return i.toggleFilterVisibility()}),e.qZA(),e.TgZ(12,"form",10)(13,"div",11)(14,"div",12)(15,"div",13)(16,"label"),e._uU(17,"Code"),e.qZA(),e._UZ(18,"input",14,15),e.qZA()(),e.TgZ(20,"div",12)(21,"div",13)(22,"label"),e._uU(23,"Name"),e.qZA(),e._UZ(24,"input",16,17),e.qZA()(),e.TgZ(26,"div",12)(27,"div",13)(28,"label"),e._uU(29,"Type"),e.qZA(),e.TgZ(30,"pek-nomenclature-type-picker",18),e.NdJ("choiceNomenclatureType",function(o){return i.onChoiceNomenclatureType(o)}),e.qZA()()(),e.TgZ(31,"div",12)(32,"div",13)(33,"div",19)(34,"div",20)(35,"p-checkbox",21),e.NdJ("ngModelChange",function(){return i.searchNomenclatures()}),e.qZA()(),e.YNc(36,oe,1,0,"ng-container",8),e.qZA()()()()()(),e.TgZ(37,"div",22)(38,"p-table",23,24),e.NdJ("selectionChange",function(o){return i.selectedNomenclature=o}),e.YNc(40,le,9,0,"ng-template",25),e.YNc(41,re,10,8,"ng-template",26),e.YNc(42,ue,4,3,"ng-template",27),e.qZA(),e.YNc(43,de,2,0,"div",28),e.qZA(),e.YNc(44,ge,5,4,"div",29),e.YNc(45,me,3,0,"div",30),e.qZA()(),e.YNc(46,he,1,1,"ng-template",null,31,e.W1O)),2&t){const s=e.MAs(47);e.xp6(3),e.Q6J("module","sales")("isActive",!0),e.xp6(5),e.ekj("filters-visibility_hide",i.isHideFilters),e.xp6(2),e.Q6J("ngTemplateOutlet",s),e.xp6(1),e.ekj("pi-angle-double-up",!i.isHideFilters)("pi-angle-double-down",i.isHideFilters),e.Q6J("pTooltip",i.isHideFilters?"Expand Filters":"Collapse Filters"),e.xp6(1),e.Q6J("formGroup",i.searchForm),e.xp6(18),e.Q6J("filteredNomenclatureTypes",e.WLB(22,_e,i.nomenclatureType.MANUFACTURED,i.nomenclatureType.ASSEMBLY)),e.xp6(5),e.Q6J("binary",!0),e.xp6(1),e.Q6J("ngTemplateOutlet",s),e.xp6(2),e.Q6J("scrollHeight","calc(100vh - "+i.tableScrollHeight+")")("scrollable",!0)("rows",10)("selection",i.selectedNomenclature)("value",i.nomenclatures),e.xp6(5),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isShowAll),e.xp6(1),e.Q6J("ngIf",i.isShowAll)}},dependencies:[c.O5,c.tP,h.Hq,h.zx,x.o,P.jx,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,E.u,ee.XZ,v.iA,v.Ei,T.D,Y.D,te.p,c.JJ],styles:[".form[_ngcontent-%COMP%]{margin-top:-.25rem}.checkbox[_ngcontent-%COMP%]{margin-top:.3125rem}.actions[_ngcontent-%COMP%]{display:flex;margin-top:2.2665rem}"]}),n})();var A=l(1206),L=l(1745),R=l(7427),M=l(615);function Ce(n,a){1&n&&(e.TgZ(0,"p",17),e._uU(1,"Choose the Sales Status to edit"),e.qZA())}function ve(n,a){1&n&&e._UZ(0,"div",25)}function be(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",21),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw(2);return e.KtG(d.toggleLine(o))}),e.YNc(1,ve,1,0,"div",22),e.TgZ(2,"div",23)(3,"div",13),e._uU(4),e.qZA(),e.TgZ(5,"div",24),e._uU(6),e.qZA()()()}if(2&n){const t=a.$implicit,i=a.index,s=e.oxw(2);e.ekj("active",s.selectedSalesStatus&&s.selectedSalesStatus.id===t.id),e.xp6(4),e.Oqu(i+1),e.xp6(2),e.hij(" ",t.name," ")}}function Se(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",18)(1,"div",19),e.NdJ("cdkDropListDropped",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.drop(s))}),e.YNc(2,be,7,4,"div",20),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("cdkDropListData",t.statuses),e.xp6(1),e.Q6J("ngForOf",t.statuses)}}function ye(n,a){1&n&&(e.TgZ(0,"div",26),e._UZ(1,"i",27),e.qZA())}let Ze=(()=>{class n{constructor(t,i){this.salesStatusService=t,this.modalService=i,this.menuItems=[{label:"Selected Sales Status",items:[{label:"Edit",icon:"pi pi-pencil",command:()=>this.onEditSalesStatus()},{label:"Remove",icon:"pi pi-trash",command:()=>this.onRemoveSalesStatus()}]}],this.isLoading=!0,this.statuses=[]}ngOnInit(){this.salesStatusService.get().subscribe(t=>{this.statuses=t,this.isLoading=!1})}drop(t){if(t.previousContainer===t.container?(0,A.bA)(t.container.data,t.previousIndex,t.currentIndex):(0,A.EA)(t.previousContainer.data,t.container.data,t.previousIndex,t.currentIndex),t.previousIndex!==t.currentIndex){const i=this.statuses[t.currentIndex],s=this.statuses.findIndex(o=>o.id===i.id);this.salesStatusService.changeOrder(i,s).subscribe()}}onAddSalesStatus(){this.salesStatusService.createEditSalesStatusModal("create").subscribe(t=>{t&&this.statuses.push(t)})}toggleLine(t){this.selectedSalesStatus=this.selectedSalesStatus===t?null:t}onEditSalesStatus(){this.salesStatusService.createEditSalesStatusModal("edit",this.selectedSalesStatus).subscribe(t=>{if(t){const i=this.statuses.findIndex(s=>s.id===this.selectedSalesStatus.id);this.statuses[i]=t,this.selectedSalesStatus=this.statuses[i]}})}onRemoveSalesStatus(){this.modalService.confirm("danger").subscribe(t=>{t&&this.salesStatusService.delete(this.selectedSalesStatus).subscribe(()=>{const i=this.statuses.findIndex(s=>s.id===this.selectedSalesStatus.id);this.statuses.splice(i,1),this.selectedSalesStatus=null})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(L.N),e.Y36(R.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-sales-statuses"]],decls:21,vars:8,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[1,"page__tools"],["pButton","","type","button","icon","pi pi-plus","label","New Status Type",3,"click"],[1,"page__content"],[1,"page__card"],[1,"d-flex","actions"],["class","subtitle",4,"ngIf"],[1,"ml-auto",3,"model"],[1,"order-statuses"],[1,"order-statuses-header"],[1,"table-col","text-center",2,"width","5%"],[1,"table-col",2,"width","95%"],["class","order-statuses-body",4,"ngIf"],["class","p-4 order-statuses-loading",4,"ngIf"],[1,"subtitle"],[1,"order-statuses-body"],["cdkDropList","",1,"order-statuses-list","order-statuses_dragging",3,"cdkDropListData","cdkDropListDropped"],["class","order-statuses-line order-statuses-line_dragging","cdkDrag","","cdkDragBoundary",".workloads_dragging",3,"active","click",4,"ngFor","ngForOf"],["cdkDrag","","cdkDragBoundary",".workloads_dragging",1,"order-statuses-line","order-statuses-line_dragging",3,"click"],["class","example-custom-placeholder",4,"cdkDragPlaceholder"],[1,"order-statuses-item"],[1,"table-col",2,"width","80%"],[1,"example-custom-placeholder"],[1,"p-4","order-statuses-loading"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Statuses Types"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return i.onAddSalesStatus()}),e.qZA()()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8),e.YNc(11,Ce,2,0,"p",9),e._UZ(12,"p-menubar",10),e.qZA(),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13),e._uU(16,"#"),e.qZA(),e.TgZ(17,"div",14),e._uU(18,"Name"),e.qZA()(),e.YNc(19,Se,3,2,"div",15),e.YNc(20,ye,2,0,"div",16),e.qZA()()()),2&t&&(e.xp6(3),e.Q6J("module","sales")("isActive",!0),e.xp6(8),e.Q6J("ngIf",!i.selectedSalesStatus),e.xp6(1),e.ekj("disabled",!i.selectedSalesStatus),e.Q6J("model",i.menuItems),e.xp6(7),e.Q6J("ngIf",!i.isLoading),e.xp6(1),e.Q6J("ngIf",i.isLoading))},dependencies:[c.sg,c.O5,h.Hq,M.nm,T.D,A.Wj,A.Zt,A.Hk],styles:[".order-statuses[_ngcontent-%COMP%]{font-size:16px!important;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol}.order-statuses[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px}.order-statuses-body[_ngcontent-%COMP%]{border-bottom-left-radius:.5rem;border-bottom-right-radius:.5rem}.order-statuses-header[_ngcontent-%COMP%]{width:100%;display:flex;align-items:center;background:#f8f9fa;border-bottom:solid 1px #e9ecef;border-top-left-radius:.5rem;border-top-right-radius:.5rem;min-height:35px}.order-statuses-header[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-weight:600;color:#495057}.order-statuses-item[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}.actions[_ngcontent-%COMP%]{margin-bottom:.75rem}.table-col[_ngcontent-%COMP%]{padding:.375rem .75rem;font-size:1rem}.order-statuses-body[_ngcontent-%COMP%]{font:inherit;overflow:auto;max-height:calc(100vh - 19rem)}.order-statuses-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{border-radius:.625rem;background-color:#d1d2d8}.order-statuses-body[_ngcontent-%COMP%]::-webkit-scrollbar{cursor:auto;width:.5rem;background-color:#f8f9fa}.order-statuses_dragging[_ngcontent-%COMP%]{display:block}.order-statuses-line[_ngcontent-%COMP%]{transition:background .1s,color .1s}.order-statuses-line.active[_ngcontent-%COMP%]{background:#EFF6FF!important;color:var(--theme-color-primary)}.order-statuses-line[_ngcontent-%COMP%]:hover{background:#e9ecef}.order-statuses-line_dragging[_ngcontent-%COMP%]{border-bottom:solid 1px #e9ecef;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;font-size:16px;background:#fff}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.order-statuses_dragging.cdk-drop-list-dragging[_ngcontent-%COMP%]   .order-statuses-line_dragging[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}.example-custom-placeholder[_ngcontent-%COMP%]{background:#ccc;border:dotted 3px #999;min-height:35px;transition:transform .25s cubic-bezier(0,0,.2,1);border-radius:4px}.order-statuses-loading[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-bottom:1px solid #dee2e6}"]}),n})();var xe=l(4128),Q=l(5698),H=l(8957),D=l(2334),B=l(8424),u=l(6319),N=l(8746);let Te=(()=>{class n{constructor(t,i,s,o){this.fb=t,this.dialogRef=i,this.countryService=s,this.data=o,this.form=this.fb.group({id:[null],name:["",[r.kI.required]],alpha2_code:["",[r.kI.required]]}),this.isSaving=!1}ngOnInit(){this.data.country&&this.form.patchValue(this.data.country)}onSave(){this.isSaving=!0,this.form.value.id?this.countryService.update(this.form.value).pipe((0,N.x)(()=>this.isSaving=!1)).subscribe(()=>{this.dialogRef.close(!0)}):this.countryService.create(this.form.value).pipe((0,N.x)(()=>this.isSaving=!1)).subscribe(()=>{this.dialogRef.close(!0)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(u.so),e.Y36(D.T),e.Y36(u.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-create-edit-country"]],decls:16,vars:6,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","pInputText","","formControlName","name"],["for","alpha2_code"],["type","text","id","alpha2_code","pInputText","","formControlName","alpha2_code","maxlength","2"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","loading","disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"label",4),e._uU(7,"Name*"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",3)(10,"label",6),e._uU(11,"Code*"),e.qZA(),e._UZ(12,"input",7),e.qZA()()(),e.TgZ(13,"mat-dialog-actions",8),e._UZ(14,"button",9),e.TgZ(15,"button",10),e.NdJ("click",function(){return i.onSave()}),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",i.form.get("id").value?"Edit":"Create"," Country "),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(10),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label",i.form.get("id").value?"Edit":"Create")("loading",i.isSaving)("disabled",i.form.invalid))},dependencies:[h.Hq,x.o,r._Y,r.Fj,r.JJ,r.JL,r.nD,r.sg,r.u,u.ZT,u.xY,u.H8]}),n})();var Ae=l(7198);let Ne=(()=>{class n{constructor(t,i,s,o){this.fb=t,this.dialogRef=i,this.regionService=s,this.data=o,this.form=this.fb.group({id:[null],name:["",[r.kI.required]],country:[null]}),this.isSaving=!1,this.data.region&&(this.form.get("id").setValue(this.data.region.id),this.form.get("name").setValue(this.data.region.name),this.data.region.country&&this.form.get("country").setValue(this.data.region.country.id)),this.data.selectedCountry&&this.form.get("country").setValue(this.data.selectedCountry)}ngOnInit(){}onSave(){this.isSaving=!0,this.form.value.id?this.regionService.update(this.form.value).pipe((0,N.x)(()=>this.isSaving=!1)).subscribe(()=>{this.dialogRef.close(!0)}):this.regionService.create(this.form.value).pipe((0,N.x)(()=>this.isSaving=!1)).subscribe(()=>{this.dialogRef.close(!0)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(u.so),e.Y36(H.o),e.Y36(u.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-create-edit-region"]],decls:16,vars:7,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","pInputText","","formControlName","name"],[3,"country","valueChange"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","loading","disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"label",4),e._uU(7,"Name*"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",3)(10,"label"),e._uU(11,"Country*"),e.qZA(),e.TgZ(12,"pek-crm-company-picker",6),e.NdJ("valueChange",function(o){return i.form.get("country").setValue(o.id)}),e.qZA()()()(),e.TgZ(13,"mat-dialog-actions",7),e._UZ(14,"button",8),e.TgZ(15,"button",9),e.NdJ("click",function(){return i.onSave()}),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",i.form.get("id").value?"Edit":"Create"," Region "),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(8),e.Q6J("country",i.form.get("country").value),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label",i.form.get("id").value?"Edit":"Create")("loading",i.isSaving)("disabled",i.form.invalid))},dependencies:[h.Hq,x.o,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.ZT,u.xY,u.H8,Ae.p]}),n})();var Pe=l(966);let qe=(()=>{class n{constructor(t,i,s,o){this.fb=t,this.subRegionService=i,this.dialogRef=s,this.data=o,this.form=this.fb.group({id:[null],name:["",[r.kI.required]],subRegion:[null],region:[null],country:[null]})}ngOnInit(){this.data.subRegion&&(this.form.get("id").setValue(this.data.subRegion.id),this.form.get("name").setValue(this.data.subRegion.name),this.data.selectedRegion&&this.form.get("region").setValue(this.data.selectedRegion)),this.data.selectedRegion&&this.form.get("region").setValue(this.data.selectedRegion),this.data.countrySelected&&this.form.get("country").setValue(this.data.countrySelected)}onSave(){this.form.value.id?this.subRegionService.update(this.form.value).subscribe(()=>{this.dialogRef.close(!0)}):this.subRegionService.create(this.form.value).subscribe(()=>{this.dialogRef.close(!0)})}regionSelected(t){this.form.get("region").patchValue(t,{emitEvent:!1})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(B.q),e.Y36(u.so),e.Y36(u.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-create-edit-sub-region"]],decls:16,vars:8,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","pInputText","","formControlName","name"],[3,"countrySelected","selectedRegionId","selectRegion"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","loading","disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"label",4),e._uU(7,"Name*"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",3)(10,"label"),e._uU(11,"Region*"),e.qZA(),e.TgZ(12,"pek-region-picker",6),e.NdJ("selectRegion",function(o){return i.regionSelected(o)}),e.qZA()()()(),e.TgZ(13,"mat-dialog-actions",7),e._UZ(14,"button",8),e.TgZ(15,"button",9),e.NdJ("click",function(){return i.onSave()}),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",i.form.get("id").value?"Edit":"Create"," Region "),e.xp6(2),e.Q6J("formGroup",i.form),e.xp6(8),e.Q6J("countrySelected",i.form.get("country").value)("selectedRegionId",i.form.get("region").value),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label",i.form.get("id").value?"Edit":"Create")("loading",i.isSaving)("disabled",i.form.invalid))},dependencies:[h.Hq,x.o,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.ZT,u.xY,u.H8,Pe.m]}),n})(),we=(()=>{class n{constructor(t){this.dialog=t}createEditCountryModal(t){return this.dialog.open(Te,{width:"35rem",height:"auto",data:{country:t},autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}createEditRegionModal(t,i){return this.dialog.open(Ne,{width:"35rem",height:"auto",data:{region:t,selectedCountry:i},panelClass:"modal-overflow-visible",autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}createEditSubRegionModal(t=null,i,s){return this.dialog.open(qe,{width:"35rem",height:"auto",data:{countrySelected:t,subRegion:i,selectedRegion:s},panelClass:"modal-overflow-visible",autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(u.uw))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var I=l(6237);function Ue(n,a){if(1&n&&e._UZ(0,"p-menubar",16),2&n){const t=e.oxw(2);e.ekj("disabled",!t.selected),e.Q6J("model",t.menuItemsRegion)}}function Re(n,a){if(1&n&&e._UZ(0,"p-menubar",16),2&n){const t=e.oxw(2);e.ekj("disabled",!t.selected),e.Q6J("model",t.menuItemsCountry)}}function Me(n,a){if(1&n&&e._UZ(0,"p-menubar",16),2&n){const t=e.oxw(2);e.ekj("disabled",!t.selected),e.Q6J("model",t.menuItemsSubRegion)}}function Ie(n,a){if(1&n&&(e.TgZ(0,"div",14),e.YNc(1,Ue,1,3,"p-menubar",15),e.YNc(2,Re,1,3,"p-menubar",15),e.YNc(3,Me,1,3,"p-menubar",15),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.selected&&t.selected.data.region),e.xp6(1),e.Q6J("ngIf",t.selected&&t.selected.data.country),e.xp6(1),e.Q6J("ngIf",t.selected&&t.selected.data.subRegion)}}function Je(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",17),e._uU(2,"Name"),e.qZA(),e.TgZ(3,"th",18),e._uU(4,"Code"),e.qZA()())}function Oe(n,a){if(1&n&&(e.TgZ(0,"tr",19)(1,"td",20),e._UZ(2,"p-treeTableToggler",21),e._uU(3),e.qZA(),e.TgZ(4,"td",18),e.ynx(5),e._uU(6),e.BQk(),e.qZA()()),2&n){const t=a.$implicit,i=a.rowData;e.Q6J("ttRow",t)("ttSelectableRow",t),e.xp6(2),e.Q6J("rowNode",t),e.xp6(1),e.lnq(" ",null==i.region?null:i.region.name," ",null==i.country?null:i.country.name," ",null==i.subRegion?null:i.subRegion.name," "),e.xp6(3),e.hij(" ",null==i.country?null:i.country.alpha2_code," ")}}function ke(n,a){1&n&&e._UZ(0,"i",25)}function Fe(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function Ee(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",22),e.YNc(2,ke,1,0,"i",23),e.YNc(3,Fe,2,0,"span",24),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",6),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}let Ye=(()=>{class n{constructor(t,i,s,o,d){this.regionService=t,this.countryService=i,this.subRegionService=s,this.countryRegionService=o,this.modalService=d,this.tree=[],this.regions=[],this.countries=[],this.subRegions=[],this.expanseMapCountry={},this.expanseMapRegion={},this.expanseMapSubRegion={},this.isLoading=!0,this.destroy$=new b.x,this.menuItemsCountry=[{label:"Selected Country",items:[{label:"Edit Country",icon:"pi pi-pencil",command:()=>this.editCountry()},{label:"Add Region",icon:"pi pi-plus",command:()=>this.addRegion()},{label:"Remove Country",icon:"pi pi-trash",command:()=>this.deleteCountry()}]}],this.menuItemsRegion=[{label:"Selected Region",items:[{label:"Edit Region",icon:"pi pi-pencil",command:()=>this.editRegion()},{label:"Add Sub Region",icon:"pi pi-plus",command:()=>this.addSubRegion()},{label:"Remove Region",icon:"pi pi-trash",command:()=>this.deleteRegion()}]}],this.menuItemsSubRegion=[{label:"Selected Region",items:[{label:"Edit Sub Region",icon:"pi pi-pencil",command:()=>this.editSubRegion()},{label:"Remove Sub Region",icon:"pi pi-trash",command:()=>this.deleteSubRegion()}]}]}ngOnInit(){this.loadInfo()}loadInfo(){this.isLoading=!0,this.selected=null,this.tree=[],(0,xe.D)({regions:this.regionService.get(),countries:this.countryService.get(),subRegion:this.subRegionService.get()}).pipe((0,g.R)(this.destroy$)).subscribe(({regions:t,countries:i,subRegion:s})=>{this.regions=t,this.countries=i,this.subRegions=s,this.createTree(),this.isLoading=!1})}createTree(){this.tree&&this.mapExpansion();const t=[];let i=!1;this.expanseMapCountry&&(i=this.expanseMapCountry[9e6]),t.push({data:{country:{name:"Not Country",id:9e6}},expanded:i,children:this.regions.filter(s=>!s.country).map(s=>{let o=!1;return this.expanseMapRegion&&(o=this.expanseMapRegion[s.id]),{data:{region:s},expanded:o,children:[]}})}),this.countries.forEach(s=>{let o=!1;this.expanseMapCountry&&(o=this.expanseMapCountry[s.id]),t.push({data:{country:s},expanded:o,children:this.regions.filter(d=>d.country).filter(d=>d.country.id===s.id).map(d=>{let S=!1;return this.expanseMapRegion&&(S=this.expanseMapRegion[d.id]),{data:{region:d},expanded:S,children:[]}})})}),t.forEach(s=>{s.children.forEach(o=>{const d=this.subRegions.filter(S=>S.region===o.data.region.id);d.length>0&&o.children.push(...d.map(S=>{let k=!1;return this.expanseMapCountry&&(k=this.expanseMapSubRegion[S.id]),{data:{subRegion:S,countryRegionId:o.data.region.country.id},children:[],expanded:k,parent:o}}))})}),this.tree=t.map(s=>s)}mapExpansion(){this.tree.forEach(t=>{this.createExpanseMap(t)})}createExpanseMap(t){t.expanded?t.data.country?this.expanseMapCountry[t.data.country.id]=t.expanded:t.data.region?this.expanseMapRegion[t.data.region.id]=t.expanded:t.data.subRegion&&(this.expanseMapSubRegion[t.data.subRegion.id]=t.expanded):t.data.country?this.expanseMapCountry[t.data.country.id]=!1:t.data.region?this.expanseMapRegion[t.data.region.id]=!1:t.data.subRegion&&(this.expanseMapSubRegion[t.data.subRegion.id]=!1),t.children&&t.children.forEach(i=>{this.createExpanseMap(i)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}createCountry(){this.countryRegionService.createEditCountryModal().subscribe(t=>{t&&this.loadInfo()})}editCountry(){this.countryRegionService.createEditCountryModal(this.selected.data.country).subscribe(t=>{t&&this.loadInfo()})}deleteCountry(){this.modalService.confirm("danger","Confirm").pipe((0,Q.q)(1),(0,g.R)(this.destroy$)).subscribe(t=>{t&&this.countryService.delete(this.selected.data.country).subscribe(i=>{this.loadInfo()})})}editRegion(){this.countryRegionService.createEditRegionModal(this.selected.data.region).subscribe(t=>{t&&this.loadInfo()})}deleteRegion(){this.modalService.confirm("danger","Confirm").pipe((0,Q.q)(1),(0,g.R)(this.destroy$)).subscribe(t=>{t&&this.regionService.delete(this.selected.data.region).subscribe(i=>{this.loadInfo()})})}addRegion(){this.countryRegionService.createEditRegionModal(null,this.selected.data.country.id).subscribe(t=>{t&&this.loadInfo()})}addSubRegion(){this.countryRegionService.createEditSubRegionModal(this.selected.data.region.country?.id,null,this.selected.data.region.id).subscribe(t=>{t&&this.loadInfo()})}editSubRegion(){this.countryRegionService.createEditSubRegionModal(this.selected.data.countryRegionId,this.selected.data.subRegion,this.selected.data.subRegion.region).subscribe(t=>{t&&this.loadInfo()})}deleteSubRegion(){this.modalService.confirm("danger","Confirm").pipe((0,Q.q)(1),(0,g.R)(this.destroy$)).subscribe(t=>{t&&this.subRegionService.delete(this.selected.data.subRegion).subscribe(i=>{this.loadInfo()})})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(H.o),e.Y36(D.T),e.Y36(B.q),e.Y36(we),e.Y36(R.Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-regions"]],decls:16,vars:5,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[1,"page__tools"],["pButton","","type","button","icon","pi pi-plus","label","Create Country",3,"click"],[1,"page__content"],[1,"page__card"],[1,"page__table"],["selectionMode","single","scrollHeight","calc(100vh - 19.2rem)",3,"value","selection","scrollable","selectionChange"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"action-buttons"],["class","ml-auto",3,"model","disabled",4,"ngIf"],[1,"ml-auto",3,"model"],[2,"padding-left","52px","width","60%"],[2,"width","40%"],[3,"ttRow","ttSelectableRow"],[2,"width","60%"],[3,"rowNode"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Countries & Regions"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return i.createCountry()}),e.qZA()()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"p-treeTable",9),e.NdJ("selectionChange",function(o){return i.selected=o}),e.YNc(12,Ie,4,3,"ng-template",10),e.YNc(13,Je,5,0,"ng-template",11),e.YNc(14,Oe,7,7,"ng-template",12),e.YNc(15,Ee,4,3,"ng-template",13),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("module","sales")("isActive",!0),e.xp6(8),e.Q6J("value",i.tree)("selection",i.selected)("scrollable",!0))},dependencies:[c.O5,h.Hq,I.iw,P.jx,I.gc,I.V4,I.e2,M.nm,T.D]}),n})();var J=l(2340),$=l(6835),j=l(9558),G=l(5722);function Qe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"p-multiSelect",3),e.NdJ("ngModelChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.selectedCompanies=s)})("ngModelChange",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onSelectCompanies())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("options",t.companies)("ngModel",t.selectedCompanies)("disabled",t.isDisabled)("showClear",!0)}}function Le(n,a){1&n&&(e.TgZ(0,"div",4),e._UZ(1,"i",5),e.qZA())}let He=(()=>{class n{constructor(t){this.companyService=t,this.isDisabled=!1,this.currentCompaniesIds=[],this.selectCompanies=new e.vpe,this.isLoading=!0,this.companies=[],this.selectedCompanies=[],this.destroy$=new b.x}ngOnInit(){this.companyService.getShorts().pipe((0,g.R)(this.destroy$)).subscribe(t=>{this.companies=t,this.findCompanies(),this.isLoading=!1})}ngOnChanges(t){"currentCompaniesIds"in t&&(this.selectedCompanies=[],this.findCompanies())}findCompanies(){this.currentCompaniesIds.length>0&&this.currentCompaniesIds.forEach(t=>{const i=this.companies.find(s=>s.id===t);i&&this.selectedCompanies.push(i)})}onSelectCompanies(){this.selectCompanies.emit(null===this.selectedCompanies||0===this.selectedCompanies?.length?null:this.selectedCompanies.map(t=>t.id).join(","))}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.J))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-multi-company-picker"]],inputs:{isDisabled:"isDisabled",currentCompaniesIds:"currentCompaniesIds"},outputs:{selectCompanies:"selectCompanies"},features:[e.TTD],decls:4,vars:2,consts:[[1,"multi-company-picker"],["optionLabel","name","placeholder","Select Companies",3,"options","ngModel","disabled","showClear","ngModelChange",4,"ngIf","ngIfElse"],["spinner",""],["optionLabel","name","placeholder","Select Companies",3,"options","ngModel","disabled","showClear","ngModelChange"],[1,"spinner-input"],[1,"pi","pi-spin","pi-spinner",2,"font-size","1.25rem"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,Qe,1,4,"p-multiSelect",1),e.YNc(2,Le,2,0,"ng-template",null,2,e.W1O),e.qZA()),2&t){const s=e.MAs(3);e.xp6(1),e.Q6J("ngIf",!i.isLoading)("ngIfElse",s)}},dependencies:[G.NU,c.O5,r.JJ,r.On]}),n})();var De=l(180),Be=l(7385),$e=l(2083);const je=["paginator"];function Ge(n,a){1&n&&e.GkF(0)}function Ke(n,a){1&n&&e.GkF(0)}function ze(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",31),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",32),e._uU(4,"Company Name"),e.qZA(),e.TgZ(5,"th",33),e._uU(6,"Created Date"),e.qZA(),e.TgZ(7,"th",34),e._uU(8,"Status"),e.qZA(),e.TgZ(9,"th",35),e._uU(10,"Status Date"),e.qZA(),e.TgZ(11,"th",36),e._uU(12,"Comment"),e.qZA()())}function Ve(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.chain_status.status.name)}}function We(n,a){1&n&&(e.ynx(0),e.TgZ(1,"span",40),e._uU(2,"New"),e.qZA(),e.BQk())}function Xe(n,a){if(1&n&&(e.TgZ(0,"tr",37)(1,"td",31),e._uU(2),e.qZA(),e.TgZ(3,"td",32)(4,"a",38),e._uU(5),e.qZA()(),e.TgZ(6,"td",33),e._uU(7),e.ALo(8,"date"),e.qZA(),e.TgZ(9,"td",34),e.YNc(10,Ve,2,1,"ng-container",39),e.YNc(11,We,3,0,"ng-container",39),e.qZA(),e.TgZ(12,"td",35),e._uU(13),e.ALo(14,"date"),e.qZA(),e.TgZ(15,"td",36),e._uU(16),e.qZA()()),2&n){const t=a.$implicit,i=a.rowIndex;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(i+1),e.xp6(2),e.Q6J("href","/crm/business-partners/company-page/"+t.company_id,e.LSH),e.xp6(1),e.Oqu(t.company),e.xp6(2),e.hij(" ",e.xi3(8,9,t.created_at,"dd/MM/y")," "),e.xp6(3),e.Q6J("ngIf",t.chain_status),e.xp6(1),e.Q6J("ngIf",!t.chain_status),e.xp6(2),e.hij(" ",e.xi3(14,12,null==t.chain_status?null:t.chain_status.date,"dd/MM/y")," "),e.xp6(3),e.hij(" ",t.comment," ")}}function et(n,a){1&n&&e._UZ(0,"i",43)}function tt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function nt(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",41),e.YNc(2,et,1,0,"i",42),e.YNc(3,tt,2,0,"span",39),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",6),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function it(n,a){1&n&&(e.TgZ(0,"div",44),e._UZ(1,"i",43),e.qZA())}function at(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",45)(1,"p-paginator",46,47),e.NdJ("onPageChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.paginate(s))}),e.qZA(),e.TgZ(3,"p-button",48),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onShowAll())}),e._uU(4," All "),e.qZA()()}if(2&n){const t=e.oxw();e.ekj("paginator-wrapper_hide",0===t.salesChain.length),e.xp6(1),e.Q6J("rows",10)("totalRecords",t.countChains)}}function st(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",49)(1,"p-button",50),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onShowPartial())}),e._uU(2," Return pagination "),e.qZA()()}}function ot(n,a){if(1&n&&(e.TgZ(0,"div",51),e._UZ(1,"p-menubar",52),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.ekj("disabled",!t.selectedSalesChain),e.Q6J("model",t.menuItems)}}let lt=(()=>{class n{constructor(t,i,s,o,d){this.fb=t,this.salesChainService=i,this.modalService=s,this.router=o,this.route=d,this.link=J.N.link_url+"dash/",this.menuItems=[{label:"Selected Sales Chain",items:[{label:"Chain Page",icon:"pi pi-folder",command:()=>this.onGoToChainPage(this.selectedSalesChain)},{label:"Remove",icon:"pi pi-trash",command:()=>this.onRemoveChain()}]}],this.tableScrollHeight="24.125rem",this.isHideFilters=!1,this.isStartOnePage=!1,this.isShowAll=!1,this.isLoading=!0,this.salesChain=[],this.searchForm=this.fb.group({status_ids:[null],company_ids:[null],country_ids:[null],regions_ids:[null],order_by_name:[null],order_by_date:[null],order_by_status:[null],company__categories__in:[null],page:[1]}),this.countChains=0,this.queryKey="company_ids:null/company__categories__in:null/status_ids:null",this.query=[{name:"paginated",value:"true"},{name:"page",value:this.searchForm.get("page").value}],this.destroy$=new b.x}ngOnInit(){this.getSalesChainsForPagination()}createSaleChain(){this.salesChainService.createEditSalesChainModal().subscribe(t=>{t&&this.searchChains()})}getSalesChainsForPagination(){this.salesChainService.getForPagination(this.query).pipe((0,g.R)(this.destroy$)).subscribe(t=>{this.salesChain=t.results,this.countChains=t.count,this.isStartOnePage&&this.paginator.changePage(0),this.isStartOnePage=!1,this.isLoading=!1})}getSalesChains(){this.salesChainService.get(this.query).pipe((0,g.R)(this.destroy$)).subscribe(t=>{this.salesChain=t,this.countChains=t.length,this.isStartOnePage&&this.paginator?.changePage(0),this.isStartOnePage=!1,this.isLoading=!1})}searchChains(){this.isLoading=!0,this.destroy$.next(!0),this.selectedSalesChain=null;const t=`'company_ids:${this.searchForm.get("company_ids").value}/company__categories__in:${this.searchForm.get("company__categories__in").value}/status_ids:${this.searchForm.get("status_ids").value}'`;t!==this.queryKey&&(this.queryKey=t,this.searchForm.get("page").patchValue(1),this.isStartOnePage=!0),this.query=[],this.isShowAll||(this.query=[{name:"paginated",value:"true"},{name:"page",value:this.searchForm.get("page").value}]),this.searchForm.get("company_ids").value&&this.query.push({name:"company_ids",value:this.searchForm.get("company_ids").value}),null!==this.searchForm.get("company__categories__in").value&&this.query.push({name:"company__categories__in",value:this.searchForm.get("company__categories__in").value}),this.searchForm.get("status_ids").value&&this.query.push({name:"status_ids",value:this.searchForm.get("status_ids").value}),this.searchForm.get("country_ids").value&&this.query.push({name:"country_ids",value:this.searchForm.get("country_ids").value}),this.isShowAll?(this.searchForm.get("page").patchValue(1),this.getSalesChains()):this.getSalesChainsForPagination()}toggleFilterVisibility(){this.isHideFilters=!this.isHideFilters,this.setTableScrollHeight()}setTableScrollHeight(){!this.isHideFilters||this.isShowAll?this.isHideFilters&&this.isShowAll?this.tableScrollHeight="18.75rem":this.isHideFilters||!this.isShowAll?this.isHideFilters||this.isShowAll||(this.tableScrollHeight="24.125rem"):this.tableScrollHeight="21.875rem":this.tableScrollHeight="20.875rem"}onShowAll(){this.isShowAll=!0,this.setTableScrollHeight(),this.searchChains()}onShowPartial(){this.isShowAll=!1,this.setTableScrollHeight(),this.searchChains()}paginate(t){this.isStartOnePage||(this.searchForm.get("page").patchValue(t.page+1),this.searchChains())}onSelectCompanies(t){this.searchForm.get("company_ids").patchValue(t),this.searchChains()}onSelectStatuses(t){this.searchForm.get("status_ids").patchValue(t),this.searchChains()}onSelectCompanyCategories(t){this.searchForm.get("company__categories__in").patchValue(t),this.searchChains()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}onRemoveChain(){this.modalService.confirm("danger").subscribe(t=>{t&&this.salesChainService.delete(this.selectedSalesChain).subscribe(()=>{this.selectedSalesChain=null,this.searchChains()})})}onGoToChainPage(t){window.open(`/sales/sales-procurement-chains/chain-page/${t.id}`,"_blank")}onSelectCountries(t){this.searchForm.get("country_ids").patchValue(t?.map(i=>i.id).join(",")??null),this.searchChains()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36($.p),e.Y36(R.Z),e.Y36(C.F0),e.Y36(C.gz))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-sales-procurement-chains"]],viewQuery:function(t,i){if(1&t&&e.Gf(je,5),2&t){let s;e.iGM(s=e.CRH())&&(i.paginator=s.first)}},decls:52,vars:20,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[1,"page__tools"],["pButton","","type","button","icon","pi pi-plus","label","Create Sales Chain",3,"click"],[1,"page__content"],[1,"page__card"],[1,"filters-visibility"],[1,"filters-visibility__header"],[4,"ngTemplateOutlet"],["tooltipPosition","left",1,"icon","pi",3,"pTooltip","click"],[1,"form","mb-3",3,"formGroup"],[1,"row"],[1,"col-3"],[1,"form-group"],[3,"selectCompanies"],[3,"selectStatuses"],[3,"selectCompanyCategories"],[1,"col-3","mb-2"],[3,"selectCountries"],[1,"table-pagination-preloader"],["selectionMode","single","rowExpandMode","single","dataKey","id",3,"scrollHeight","scrollable","rows","selection","value","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","pagination-preloader pagination-preloader_bord",4,"ngIf"],["class","paginator-wrapper",3,"paginator-wrapper_hide",4,"ngIf"],["class","paginator-return-pagination",4,"ngIf"],["actionButtons",""],[1,"text-center",2,"width","5%"],[2,"width","30%"],[1,"text-center",2,"width","15%"],[1,"text-center",2,"width","20%"],[1,"text-center",2,"width","10%"],[2,"width","20%"],[1,"table-row",3,"pSelectableRow"],[3,"href"],[4,"ngIf"],[1,"text-warning"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"],[1,"pagination-preloader","pagination-preloader_bord"],[1,"paginator-wrapper"],[3,"rows","totalRecords","onPageChange"],["paginator",""],["type","button","styleClass","p-button-text",1,"paginator-all",3,"click"],[1,"paginator-return-pagination"],["type","button","styleClass","p-button-text",3,"click"],[1,"action-buttons"],[1,"ml-auto",3,"model"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Sales Chains"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return i.createSaleChain()}),e.qZA()()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e.YNc(12,Ge,1,0,"ng-container",10),e.qZA(),e.TgZ(13,"button",11),e.NdJ("click",function(){return i.toggleFilterVisibility()}),e.qZA(),e.TgZ(14,"form",12)(15,"div",13)(16,"div",14)(17,"div",15)(18,"label"),e._uU(19,"Companies"),e.qZA(),e.TgZ(20,"pek-multi-company-picker",16),e.NdJ("selectCompanies",function(o){return i.onSelectCompanies(o)}),e.qZA()()(),e.TgZ(21,"div",14)(22,"div",15)(23,"label"),e._uU(24,"Status"),e.qZA(),e.TgZ(25,"pek-multi-sales-status-picker",17),e.NdJ("selectStatuses",function(o){return i.onSelectStatuses(o)}),e.qZA()()(),e.TgZ(26,"div",14)(27,"div",15)(28,"label"),e._uU(29,"Company Categories"),e.qZA(),e.TgZ(30,"pek-multi-company-category-picker",18),e.NdJ("selectCompanyCategories",function(o){return i.onSelectCompanyCategories(o)}),e.qZA()()(),e.TgZ(31,"div",19)(32,"div",15)(33,"label"),e._uU(34,"Countries"),e.qZA(),e.TgZ(35,"pek-multi-countries-picker",20),e.NdJ("selectCountries",function(o){return i.onSelectCountries(o)}),e.qZA()()(),e._UZ(36,"div",14)(37,"div",14)(38,"div",14),e.TgZ(39,"div",14),e.YNc(40,Ke,1,0,"ng-container",10),e.qZA()()()(),e.TgZ(41,"div",21)(42,"p-table",22,23),e.NdJ("selectionChange",function(o){return i.selectedSalesChain=o}),e.YNc(44,ze,13,0,"ng-template",24),e.YNc(45,Xe,17,15,"ng-template",25),e.YNc(46,nt,4,3,"ng-template",26),e.qZA(),e.YNc(47,it,2,0,"div",27),e.qZA(),e.YNc(48,at,5,4,"div",28),e.YNc(49,st,3,0,"div",29),e.qZA()(),e.YNc(50,ot,2,3,"ng-template",null,30,e.W1O)),2&t){const s=e.MAs(51);e.xp6(3),e.Q6J("module","sales")("isActive",!0),e.xp6(7),e.ekj("filters-visibility_hide",i.isHideFilters),e.xp6(2),e.Q6J("ngTemplateOutlet",s),e.xp6(1),e.ekj("pi-angle-double-up",!i.isHideFilters)("pi-angle-double-down",i.isHideFilters),e.Q6J("pTooltip",i.isHideFilters?"Expand Filters":"Collapse Filters"),e.xp6(1),e.Q6J("formGroup",i.searchForm),e.xp6(26),e.Q6J("ngTemplateOutlet",s),e.xp6(2),e.Q6J("scrollHeight","calc(100vh - "+i.tableScrollHeight+")")("scrollable",!0)("rows",10)("selection",i.selectedSalesChain)("value",i.salesChain),e.xp6(5),e.Q6J("ngIf",i.isLoading),e.xp6(1),e.Q6J("ngIf",!i.isShowAll),e.xp6(1),e.Q6J("ngIf",i.isShowAll)}},dependencies:[c.O5,c.tP,h.Hq,h.zx,P.jx,r._Y,r.JL,r.sg,M.nm,E.u,v.iA,v.Ei,T.D,Y.D,He,De.s,Be.P,$e.D,c.uU],styles:[".form[_ngcontent-%COMP%]{margin-top:-.25rem}.page__card[_ngcontent-%COMP%]{position:relative}"]}),n})();var rt=l(5757);let ct=(()=>{class n{constructor(t,i,s,o){this.fb=t,this.eventSalesChainService=i,this.dialogRef=s,this.data=o,this.isSaving=!1,this.form=this.fb.group({comment:["",r.kI.required]})}ngOnInit(){this.form.get("comment").patchValue(this.data.eventCompany.comment)}onSave(){if(this.form.valid){this.isSaving=!0;const t={comment:this.form.get("comment").value};this.eventSalesChainService.updateComment(this.data.eventCompany.id,t).subscribe(i=>this.dialogRef.close())}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(r.qu),e.Y36(K),e.Y36(u.so),e.Y36(u.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-edit-event-modal"]],decls:12,vars:4,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","pInputText","","formControlName","comment"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button","label","Edit",1,"p-button-success",3,"loading","disabled","click"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2," Edit Event "),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"label",4),e._uU(7,"Comment*"),e.qZA(),e._UZ(8,"input",5),e.qZA()()(),e.TgZ(9,"mat-dialog-actions",6),e._UZ(10,"button",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return i.onSave()}),e.qZA()()),2&t&&(e.xp6(4),e.Q6J("formGroup",i.form),e.xp6(6),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("loading",i.isSaving)("disabled",i.form.invalid))},dependencies:[h.Hq,x.o,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,u.ZT,u.xY,u.H8]}),n})();var pt=l(529);let K=(()=>{class n{constructor(t,i){this.httpClient=t,this.dialog=i,this.API_URL=J.N.base_url+J.N.business_partners_url,this.url="event_companies/"}updateEvent(t,i){return this.httpClient.patch(this.API_URL+this.url+t+"/",i).pipe((0,p.U)(s=>s.data))}deleteEvent(t){return this.httpClient.delete(this.API_URL+this.url+`${t.id}/`)}updateComment(t,i){return this.httpClient.patch(this.API_URL+this.url+`${t}/`,i)}editCompanyToEvent(t){return this.dialog.open(ct,{width:"800px",data:{type:"edit",eventCompany:t},disableClose:!0}).afterClosed().pipe()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(pt.eN),e.LFG(u.uw))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var z=l(6767),ut=l(7495),dt=l(3887);function gt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.saleChain.company||null==t.saleChain.company.country?null:t.saleChain.company.country.name)}}function mt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Oqu(null==t.saleChain.company||null==t.saleChain.company.region?null:t.saleChain.company.region.name)}}function ht(n,a){if(1&n&&(e.TgZ(0,"div",34)(1,"div",35)(2,"div",36)(3,"h4"),e._uU(4,"Company Name: "),e.TgZ(5,"span"),e._uU(6),e.qZA()(),e.TgZ(7,"h4"),e._uU(8,"Address: "),e.TgZ(9,"span"),e._uU(10),e.qZA()(),e.TgZ(11,"h4"),e._uU(12,"Email: "),e.TgZ(13,"span"),e._uU(14),e.qZA()(),e.TgZ(15,"h4"),e._uU(16,"Phone Number: "),e.TgZ(17,"span"),e._uU(18),e.qZA()(),e.TgZ(19,"h4"),e._uU(20,"Website: "),e.TgZ(21,"span")(22,"a",37),e._uU(23),e.qZA()()(),e.TgZ(24,"h4"),e._uU(25,"Tax Number: "),e.TgZ(26,"span"),e._uU(27),e.qZA()(),e.TgZ(28,"h4"),e._uU(29,"Register Number: "),e.TgZ(30,"span"),e._uU(31),e.qZA()()(),e.TgZ(32,"div",38)(33,"h4"),e._uU(34,"Nomenclature: "),e.TgZ(35,"span"),e._uU(36),e.qZA()(),e.TgZ(37,"h4"),e._uU(38,"Description "),e.TgZ(39,"span"),e._uU(40),e.qZA()(),e.TgZ(41,"h4"),e._uU(42," Country: "),e.YNc(43,gt,2,1,"span",39),e.qZA(),e.TgZ(44,"h4"),e._uU(45," Region: "),e.YNc(46,mt,2,1,"span",39),e.qZA(),e.TgZ(47,"h4"),e._uU(48," Status: "),e.TgZ(49,"span"),e._uU(50),e.ALo(51,"date"),e.qZA()(),e.TgZ(52,"h4"),e._uU(53,"Comment: "),e.TgZ(54,"span"),e._uU(55),e.qZA()()()()()),2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.saleChain.company.name),e.xp6(4),e.Oqu(t.saleChain.company.address),e.xp6(4),e.Oqu(t.saleChain.company.email),e.xp6(4),e.Oqu(t.saleChain.company.phone_number),e.xp6(4),e.Q6J("href",t.saleChain.company.website,e.LSH),e.xp6(1),e.Oqu(t.saleChain.company.website),e.xp6(4),e.Oqu(t.saleChain.company.tax_number),e.xp6(4),e.Oqu(t.saleChain.company.registration_number),e.xp6(5),e.Oqu(t.saleChain.company.supplier_nomenclature),e.xp6(4),e.Oqu(t.saleChain.company.comment),e.xp6(3),e.Q6J("ngIf",null==t.saleChain.company?null:t.saleChain.company.country),e.xp6(3),e.Q6J("ngIf",null==t.saleChain.company?null:t.saleChain.company.region),e.xp6(4),e.AsE("",null==t.saleChain.chain_status?null:t.saleChain.chain_status.status.name," : ",e.xi3(51,15,null==t.saleChain.chain_status?null:t.saleChain.chain_status.date,"dd/MM/yyyy")," "),e.xp6(5),e.Oqu(t.saleChain.company.comment)}}function _t(n,a){1&n&&(e.TgZ(0,"p",43),e._uU(1,"Choose the Event to edit"),e.qZA())}function ft(n,a){if(1&n&&(e.TgZ(0,"div",40),e.YNc(1,_t,2,0,"p",41),e._UZ(2,"p-menubar",42),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.selectedEvent),e.xp6(1),e.ekj("disabled",!t.selectedEvent),e.Q6J("model",t.salesChainEvents)}}function Ct(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",44),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",45),e._uU(4,"Event Name"),e.qZA(),e.TgZ(5,"th",46),e._uU(6," Event Start "),e._UZ(7,"p-sortIcon",47),e.qZA(),e.TgZ(8,"th",48),e._uU(9," Event End "),e._UZ(10,"p-sortIcon",49),e.qZA(),e.TgZ(11,"th",50),e._uU(12,"Event Description"),e.qZA(),e.TgZ(13,"th",51),e._uU(14,"Employee"),e.qZA(),e.TgZ(15,"th",45),e._uU(16,"Event Comment"),e.qZA(),e.TgZ(17,"th",52),e._uU(18,"Is Done"),e.qZA()())}function vt(n,a){1&n&&(e.ynx(0),e._uU(1,"Not Related "),e.BQk())}function bt(n,a){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e._UZ(2,"br"),e.qZA()),2&n){const t=a.$implicit;e.xp6(1),e.hij(" ",t.first_name+" "+t.last_name," ")}}function St(n,a){if(1&n&&(e.ynx(0),e.YNc(1,bt,3,1,"span",59),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",t.event.employee)}}function yt(n,a){1&n&&e._UZ(0,"i",60)}const Zt=function(n){return["/crm/events/",n]};function xt(n,a){if(1&n&&(e.TgZ(0,"tr",53)(1,"td",54),e._uU(2),e.qZA(),e.TgZ(3,"td",45),e._uU(4),e.qZA(),e.TgZ(5,"td",55)(6,"a",56),e._uU(7),e.ALo(8,"date"),e.qZA()(),e.TgZ(9,"td",55),e._uU(10),e.ALo(11,"date"),e.qZA(),e.TgZ(12,"td",50),e._uU(13),e.qZA(),e.TgZ(14,"td",51),e.YNc(15,vt,2,0,"ng-container",39),e.YNc(16,St,2,1,"ng-container",39),e.qZA(),e.TgZ(17,"td",45),e._uU(18),e.qZA(),e.TgZ(19,"td",52)(20,"div",57),e.YNc(21,yt,1,0,"i",58),e.qZA()()()),2&n){const t=a.$implicit,i=a.rowIndex;e.oxw();const s=e.MAs(66);e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(i+1),e.xp6(2),e.hij(" ",t.event.event_type.name," "),e.xp6(2),e.Q6J("routerLink",e.VKq(18,Zt,t.event.id)),e.xp6(1),e.hij(" ",e.xi3(8,12,t.event.start,"dd/MM/yyyy, HH:mm")," "),e.xp6(3),e.hij(" ",e.xi3(11,15,t.event.end,"dd/MM/yyyy, HH:mm")," "),e.xp6(3),e.hij(" ",t.event.description," "),e.xp6(2),e.Q6J("ngIf",0===t.event.employee.length),e.xp6(1),e.Q6J("ngIf",t.event.employee.length>0),e.xp6(2),e.hij(" ",t.comment," "),e.xp6(3),e.Q6J("ngIf",t.is_done)("ngIfElse",s)}}function Tt(n,a){1&n&&e._UZ(0,"i",63)}function At(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function Nt(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",61),e.YNc(2,Tt,1,0,"i",62),e.YNc(3,At,2,0,"span",39),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",8),e.xp6(1),e.Q6J("ngIf",t.isLoadingActivities),e.xp6(1),e.Q6J("ngIf",!t.isLoadingActivities)}}function Pt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"p-button",64),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(21);return s.paginator=!1,e.KtG(s.scrollable=!0)}),e._uU(1,"All "),e.qZA()}}function qt(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",65)(1,"p-button",66),e.NdJ("click",function(){e.CHM(t),e.oxw();const s=e.MAs(21);return e.KtG(s.paginator=!0)}),e._uU(2," Return pagination "),e.qZA()()}}function wt(n,a){1&n&&(e.TgZ(0,"p",43),e._uU(1,"Choose the Product to edit"),e.qZA())}function Ut(n,a){if(1&n&&(e.TgZ(0,"div",40),e.YNc(1,wt,2,0,"p",41),e._UZ(2,"p-menubar",42),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.selectedSalesReservation),e.xp6(1),e.ekj("disabled",!t.selectedSalesReservation),e.Q6J("model",t.products)}}function Rt(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",54),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",52),e._uU(4,"Created"),e.qZA(),e.TgZ(5,"th",50),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th",45),e._uU(8,"Code"),e.qZA(),e.TgZ(9,"th",45),e._uU(10,"Serial number"),e.qZA(),e.TgZ(11,"th",52),e._uU(12,"Delivery Date"),e.qZA(),e.TgZ(13,"th",52),e._uU(14,"Status"),e.qZA(),e.TgZ(15,"th",52),e._uU(16,"Price"),e.qZA()())}function Mt(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.nomenclature.name," ")}}function It(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.warehouse_product.nomenclature.name," ")}}function Jt(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.list_product.nomenclature.name," ")}}function Ot(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.nomenclature.code," ")}}function kt(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.warehouse_product.nomenclature.code," ")}}function Ft(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.list_product.nomenclature.code," ")}}function Et(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",null!=t.warehouse_product.serial_number&&t.warehouse_product.serial_number.type_with_number?null==t.warehouse_product.serial_number?null:t.warehouse_product.serial_number.type_with_number:null==t.warehouse_product.serial_number?null:t.warehouse_product.serial_number.id," ")}}function Yt(n,a){1&n&&e._UZ(0,"div")}function Qt(n,a){1&n&&e._uU(0," Available now ")}function Lt(n,a){if(1&n&&(e._uU(0),e.ALo(1,"date")),2&n){const t=e.oxw().$implicit;e.hij(" ",e.xi3(1,1,null==t.list_product?null:t.list_product.delivery_date,"dd/MM/yyyy")," ")}}function Ht(n,a){1&n&&(e.ynx(0),e._uU(1," Ready "),e.BQk())}function Dt(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.BQk()),2&n){const t=e.oxw().$implicit,i=e.oxw();e.xp6(1),e.hij(" ",i.statuses[t.list_product.status]," ")}}function Bt(n,a){1&n&&(e.ynx(0),e._uU(1," N/A "),e.BQk())}function $t(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"number"),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.nomenclature.price,"1.2-2")," ")}}function jt(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"number"),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.warehouse_product.nomenclature.price,"1.2-2")," ")}}function Gt(n,a){if(1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"number"),e.BQk()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,t.list_product.nomenclature.price,"1.2-2")," ")}}function Kt(n,a){if(1&n&&(e.TgZ(0,"tr",53)(1,"td",54),e._uU(2),e.qZA(),e.TgZ(3,"td",52),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td",50),e.YNc(7,Mt,2,1,"ng-container",39),e.YNc(8,It,2,1,"ng-container",39),e.YNc(9,Jt,2,1,"ng-container",39),e.qZA(),e.TgZ(10,"td",45),e.YNc(11,Ot,2,1,"ng-container",39),e.YNc(12,kt,2,1,"ng-container",39),e.YNc(13,Ft,2,1,"ng-container",39),e.qZA(),e.TgZ(14,"td",67)(15,"h4",68),e._uU(16,"Serial Number"),e.qZA(),e.YNc(17,Et,2,1,"ng-container",39),e.qZA(),e.TgZ(18,"td",52)(19,"h4",68),e._uU(20,"Delivery date"),e.qZA(),e.YNc(21,Yt,1,0,"div",69),e.YNc(22,Qt,1,0,"ng-template",null,70,e.W1O),e.YNc(24,Lt,2,4,"ng-template",null,71,e.W1O),e.qZA(),e.TgZ(26,"td",52)(27,"h4",68),e._uU(28,"Status"),e.qZA(),e.YNc(29,Ht,2,0,"ng-container",39),e.YNc(30,Dt,2,1,"ng-container",39),e.YNc(31,Bt,2,0,"ng-container",39),e.qZA(),e.TgZ(32,"td",52)(33,"h4",68),e._uU(34,"Price"),e.qZA(),e.YNc(35,$t,3,4,"ng-container",39),e.YNc(36,jt,3,4,"ng-container",39),e.YNc(37,Gt,3,4,"ng-container",39),e.qZA()()),2&n){const t=a.$implicit,i=a.rowIndex,s=e.MAs(23),o=e.MAs(25);e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(i+1),e.xp6(2),e.hij(" ",e.xi3(5,19,t.created_at,"dd/MM/yyyy")," "),e.xp6(3),e.Q6J("ngIf",t.nomenclature),e.xp6(1),e.Q6J("ngIf",t.warehouse_product),e.xp6(1),e.Q6J("ngIf",t.list_product),e.xp6(2),e.Q6J("ngIf",t.nomenclature),e.xp6(1),e.Q6J("ngIf",t.warehouse_product),e.xp6(1),e.Q6J("ngIf",t.list_product),e.xp6(4),e.Q6J("ngIf",t.warehouse_product),e.xp6(4),e.Q6J("ngIf",t.warehouse_product)("ngIfThen",s)("ngIfElse",o),e.xp6(8),e.Q6J("ngIf",t.warehouse_product),e.xp6(1),e.Q6J("ngIf",t.list_product),e.xp6(1),e.Q6J("ngIf",!t.list_product&&!t.warehouse_product),e.xp6(4),e.Q6J("ngIf",t.nomenclature),e.xp6(1),e.Q6J("ngIf",t.warehouse_product),e.xp6(1),e.Q6J("ngIf",t.list_product)}}function zt(n,a){1&n&&e._UZ(0,"i",63)}function Vt(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function Wt(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",61),e.YNc(2,zt,1,0,"i",62),e.YNc(3,Vt,2,0,"span",39),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",8),e.xp6(1),e.Q6J("ngIf",t.isLoadingReservation),e.xp6(1),e.Q6J("ngIf",!t.isLoadingReservation)}}function Xt(n,a){1&n&&(e.TgZ(0,"p",43),e._uU(1,"Choose the Offer to edit"),e.qZA())}function en(n,a){if(1&n&&(e.TgZ(0,"div",40),e.YNc(1,Xt,2,0,"p",41),e._UZ(2,"p-menubar",42),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.selectedOffer),e.xp6(1),e.ekj("disabled",!t.selectedOffer),e.Q6J("model",t.offersMenu)}}function tn(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",54),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",72),e._uU(4,"Date"),e.qZA(),e.TgZ(5,"th",73),e._uU(6,"Offer ID"),e.qZA(),e.TgZ(7,"th",73),e._uU(8,"Confirmed"),e.qZA(),e.TgZ(9,"th",73),e._uU(10,"Total"),e.qZA()())}function nn(n,a){1&n&&e._UZ(0,"i",76)}function an(n,a){1&n&&e._UZ(0,"i",77)}function sn(n,a){if(1&n&&(e.TgZ(0,"tr",53)(1,"td",54),e._uU(2),e.qZA(),e.TgZ(3,"td",72),e._uU(4),e.ALo(5,"date"),e.qZA(),e.TgZ(6,"td",73),e._uU(7),e.qZA(),e.TgZ(8,"td",73),e.YNc(9,nn,1,0,"i",74),e.YNc(10,an,1,0,"i",75),e.qZA(),e.TgZ(11,"td",73),e._uU(12),e.ALo(13,"number"),e.qZA()()),2&n){const t=a.$implicit,i=a.rowIndex;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(i+1),e.xp6(2),e.hij(" ",e.xi3(5,7,t.created_at,"dd/MM/yyyy")," "),e.xp6(3),e.hij(" ",t.id," "),e.xp6(2),e.Q6J("ngIf",t.is_confirmed),e.xp6(1),e.Q6J("ngIf",!t.is_confirmed),e.xp6(2),e.hij(" ",e.xi3(13,10,t.total,"1.2-2")," \u20ac ")}}function on(n,a){1&n&&e._UZ(0,"i",63)}function ln(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function rn(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",61),e.YNc(2,on,1,0,"i",62),e.YNc(3,ln,2,0,"span",39),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",8),e.xp6(1),e.Q6J("ngIf",t.isLoadingOffers),e.xp6(1),e.Q6J("ngIf",!t.isLoadingOffers)}}function cn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",40)(1,"button",78),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onAddFile())}),e.qZA()()}}function pn(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",54),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",79),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",52),e._uU(6,"Actions"),e.qZA()())}function un(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr",53)(1,"td",80),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td",52)(6,"div",81)(7,"button",82),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onDownloadFile(o))}),e.qZA(),e.TgZ(8,"button",83),e.NdJ("click",function(){const o=e.CHM(t).$implicit,d=e.oxw();return e.KtG(d.onRemoveFile(o.id))}),e.qZA()()()()}if(2&n){const t=a.$implicit,i=a.rowIndex,s=e.oxw();e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(i+1),e.xp6(2),e.hij(" ",s.getName(t.file)," "),e.xp6(3),e.Q6J("loading",s.addition.has(t.id)),e.xp6(1),e.Q6J("loading",s.deletion.has(t.id))}}function dn(n,a){1&n&&e._UZ(0,"i",63)}function gn(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function mn(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",61),e.YNc(2,dn,1,0,"i",62),e.YNc(3,gn,2,0,"span",39),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",3),e.xp6(1),e.Q6J("ngIf",t.isLoadingFiles),e.xp6(1),e.Q6J("ngIf",!t.isLoadingFiles)}}function hn(n,a){1&n&&(e.TgZ(0,"div",84),e._UZ(1,"i",63),e.qZA())}function _n(n,a){1&n&&e._UZ(0,"i",85)}const fn=function(n){return["/crm/business-partners/company-page",n]};let Cn=(()=>{class n{constructor(t,i,s,o,d,S,k,Yn,Qn,Ln,Hn){this.companyService=t,this.route=i,this.router=s,this.invoiceService=o,this.salesChainService=d,this.salesStatus=S,this.modalService=k,this.eventSalesChainService=Yn,this.adapterService=Qn,this.salesFileService=Ln,this.deliveryService=Hn,this.isLoading=!0,this.statuses={0:"Not Processed",1:"Completed",2:"Deficit",3:"Reserved"},this.isLoadingReservation=!0,this.isCreatingOffer=!1,this.isCreateingDelivery=!1,this.isLoadingActivities=!0,this.isActivities=!0,this.isLoadingFiles=!1,this.deletion=new Set,this.addition=new Set,this.invoices=[],this.offers=[],this.selectedOffer=null,this.isLoadingOffers=!0,this.destroy$=new b.x,this.salesReservation=[],this.salesActivities=[],this.environment=J.N,this.files=[],this.salesChainEvents=[{label:"Selected Event",items:[{label:"Confirm",icon:"pi pi-check",command:()=>this.onConfirmEvent(),disabled:!0},{label:"Edit",icon:"pi pi-pencil",command:()=>this.onEditEvent()},{label:"Delete",icon:"pi pi-trash",command:()=>this.onDeleteEvent()}]}],this.products=[{label:"Selected Product",items:[{label:"Delete",icon:"pi pi-trash",command:()=>this.onDeleteProduct()}]}],this.offersMenu=[{label:"Selected Offer",items:[{label:"Generate PDF (BACKEND)",icon:"pi pi-file-pdf",command:()=>this.generatePdf()},{label:"Confirm Offer",icon:"pi pi-check",command:()=>this.confirmOffer()},{label:"Edit Prices",icon:"pi pi-pencil",command:()=>this.editOfferPrices()},{label:"Download (BACKEND)",icon:"pi pi-download"},{label:"Delete",icon:"pi pi-trash",command:()=>this.onDeleteOffer()}]}]}ngOnInit(){this.route.paramMap.pipe((0,p.U)(t=>t.get("id")),(0,m.b)(t=>this.saleChainId=+t)).subscribe(),this.getAll()}getChain(){this.isActivities&&(this.isLoadingActivities=!0,this.selectedEvent=null,this.salesActivities=[],this.isActivities=!1),this.salesChainService.getById(this.saleChainId).subscribe(t=>{this.saleChain=t,this.salesActivities=t.activities,this.salesActivities.sort((i,s)=>{const o=new Date(i.event.start);return new Date(s.event.start)-o}),this.isLoading=!1,this.isLoadingActivities=!1})}getAll(){this.getChain(),this.getReservation(),this.getOffers(),this.getAllFile()}getName(t){let i=t.split("/");return i[i.length-1]}getReservation(){this.isLoadingReservation=!0,this.selectedSalesReservation=null,this.salesReservation=[],this.salesChainService.getReservation(this.saleChainId).subscribe(t=>{this.salesReservation=t,this.isLoadingReservation=!1})}getOffers(){this.isLoadingOffers=!0,this.offers=[],this.selectedOffer=null,this.salesChainService.getOffers(this.saleChainId).subscribe(t=>{this.offers=t,this.isLoadingOffers=!1})}onEditEvent(){this.eventSalesChainService.editCompanyToEvent(this.selectedEvent).subscribe(()=>{this.isActivities=!0,this.getChain()})}editChainStatus(){this.salesChainService.editSalesChainStatus(this.saleChain).subscribe(t=>{t&&this.getChain()})}onConfirmEvent(){this.modalService.confirm("success").subscribe(t=>{t&&this.eventSalesChainService.updateEvent(this.selectedEvent.id,{is_done:!0}).subscribe(()=>{this.isActivities=!0,this.getChain()})})}onDeleteEvent(){this.modalService.confirm("danger").subscribe(t=>{t&&this.eventSalesChainService.deleteEvent(this.selectedEvent).subscribe(()=>{this.salesActivities=this.salesActivities.filter(i=>i.id!==this.selectedEvent.id),this.selectedEvent=null})})}onSelectedEvent(){this.selectedEvent&&(this.salesChainEvents[0].items[0].disabled=!1!==this.selectedEvent.is_done)}onDeleteProduct(){this.modalService.confirm("danger").subscribe(t=>{t&&this.salesChainService.deleteProduct(this.selectedSalesReservation.id).subscribe(()=>{this.getReservation()})})}onAddProduct(){this.salesChainService.createChoiceProduct(this.selectedSalesReservation).subscribe()}getAllFile(){this.isLoadingFiles=!0,this.files=[],this.salesChainService.getFile().subscribe(t=>{this.files=t,this.isLoadingFiles=!1})}getFileName(t){let i=t.split("/");return i[i.length-1]}onAddFile(){this.salesChainService.createSalesFileModal(this.saleChainId).subscribe(t=>{t&&this.getAllFile()})}onDownloadFile(t){this.addition.add(t.id),this.salesChainService.downloadFile(t).subscribe(i=>{console.log(i);const s=this.getFileName(t.file);this.adapterService.downloadFile(s,i),this.addition.clear()})}onRemoveFile(t){this.modalService.confirm("danger").subscribe(i=>{i&&(this.deletion.add(t),this.salesFileService.remove(t).subscribe(()=>{this.files=this.files.filter(s=>s.id!=t),this.deletion.clear()}))})}hasConfirmedOffer(){return this.offers.some(t=>t.is_confirmed)}onDeleteOffer(){this.modalService.confirm("danger").subscribe(t=>{t&&this.salesChainService.deleteOffer(this.saleChainId,this.selectedOffer.id).subscribe(()=>{this.getOffers()})})}onGenerateOffer(){this.salesChainService.getGenerateOffer(this.saleChainId).subscribe(t=>{console.log(t)})}generateOffer(){this.isCreatingOffer=!0,this.salesChainService.generateOffer(this.saleChainId).pipe((0,N.x)(()=>this.isCreatingOffer=!1)).subscribe(t=>{this.getOffers()})}onSelectOffer(){this.offersMenu[0].items[0].disabled=this.selectedOffer&&!this.selectedOffer.is_confirmed,this.offersMenu[0].items[1].disabled=this.selectedOffer&&this.selectedOffer.is_confirmed}generatePdf(){}confirmOffer(){this.salesChainService.confirmOffer(this.selectedOffer.id).subscribe(t=>{this.getOffers()})}createDeliveryChain(){this.modalService.confirm("success").subscribe(t=>{if(t){this.isCreateingDelivery=!0;const i={sales_chain_id:Number(this.saleChainId),status:{id:1,name:"new"}};this.deliveryService.create(i).pipe((0,N.x)(()=>this.isCreateingDelivery=!1)).subscribe(s=>{this.getChain()})}})}editOfferPrices(){this.salesChainService.editOfferPriceDialog(this.selectedOffer,this.saleChainId).subscribe(t=>{t&&this.getOffers()})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(j.J),e.Y36(C.gz),e.Y36(C.F0),e.Y36(rt.q),e.Y36($.p),e.Y36(L.N),e.Y36(R.Z),e.Y36(K),e.Y36(z.v),e.Y36(ut.Q),e.Y36(dt.a))},n.\u0275cmp=e.Xpm({type:n,selectors:[["pek-sales-chain-page"]],decls:67,vars:35,consts:[[1,"company-page"],[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[1,"page__tools"],["pButton","","type","button","icon","pi pi-angle-double-right","label","Company Card","target","_blank",1,"mr-2",3,"routerLink"],["pButton","","type","button","icon","pi pi-pencil","label","Edit Status",1,"p-button-icon","mr-2",3,"disabled","click"],["pButton","","type","button","icon","pi pi-plus","label"," Create Delivery Chain",1,"p-button-icon",3,"disabled","loading","click"],[1,"page__content"],[1,"mb-4"],[1,"page__card","company-information-card","mb-4"],["class","company-information",4,"ngIf","ngIfElse"],[1,"page__card","mb-4"],[1,"page__table"],["scrollHeight","calc(100vh - 18.8rem)","selectionMode","single",3,"scrollable","paginator","rows","value","selection","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","paginatorright"],["class","paginator-return-pagination",4,"ngIf"],[1,"header","d-flex","align-items-center","justify-content-between","mb-4"],["pButton","","type","button","icon","pi pi-plus","label","Create Offer",1,"mr-2","p-button-icon",3,"disabled","loading","click"],["pButton","","type","button","icon","pi pi-plus","label","Add Product",1,"p-button-icon",3,"disabled","click"],["selectionMode","single",3,"scrollable","value","selection","rows","paginator","selectionChange"],["st",""],["selectionMode","single",1,"adaptive-table",3,"value","selection","rows","paginator","selectionChange"],[1,"page__card"],["selectionMode","single","scrollHeight","calc(100vh - 18.8rem)",3,"scrollable","paginator","rows","value","selection","selectionChange"],["mt",""],["infoLoading",""],["notGrouped",""],[1,"company-information"],[1,"row"],[1,"col-md-5"],["target","_blank",3,"href"],[1,"col-md-7"],[4,"ngIf"],[1,"d-flex"],["class","subtitle",4,"ngIf"],[1,"ml-auto",3,"model"],[1,"subtitle"],[1,"index-header","text-center",2,"width","5%"],[2,"width","15%"],["pSortableColumn","event.start",2,"width","12%"],["field","event.start"],["pSortableColumn","event.end",2,"width","12%"],["field","event.end"],[2,"width","20%"],[2,"width","11%"],[1,"text-center",2,"width","10%"],[3,"pSelectableRow"],[1,"text-center",2,"width","5%"],[2,"width","12%"],[3,"routerLink"],[1,"icons"],["class","pi pi-check text-success",4,"ngIf","ngIfElse"],[4,"ngFor","ngForOf"],[1,"pi","pi-check","text-success"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"],["type","button","pTooltip","Remove Pagination","styleClass","p-button-text",3,"click"],[1,"paginator-return-pagination"],["type","button","styleClass","p-button-text",3,"click"],[1,"",2,"width","15%"],[1,"title-hidden"],[4,"ngIf","ngIfThen","ngIfElse"],["availableNow",""],["availableLater",""],[1,"text-center",2,"width","35%"],[1,"text-center",2,"width","20%"],["class","pi pi-check","style","color: green;",4,"ngIf"],["class","pi pi-times","style","color: red",4,"ngIf"],[1,"pi","pi-check",2,"color","green"],[1,"pi","pi-times",2,"color","red"],["pButton","","type","button","icon","pi pi-plus","label","Add File",1,"ml-auto",3,"click"],[2,"width","85%"],[1,"text-center"],[1,"d-flex","justify-content-center"],["pButton","","type","button","icon","pi pi-download",1,"p-button-primary","p-button-rounded","p-button-outlined","p-button-rounded_small","mr-2",3,"loading","click"],["pButton","","type","button","icon","pi pi-trash",1,"p-button-danger","p-button-rounded","p-button-outlined","p-button-rounded_small",3,"loading","click"],[1,"info-loading"],[1,"pi","pi-times","text-danger"]],template:function(t,i){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e._UZ(4,"pek-module-icon",4),e.TgZ(5,"h1"),e._uU(6,"Chain Card"),e.qZA()(),e.TgZ(7,"div",5),e._UZ(8,"a",6),e.TgZ(9,"button",7),e.NdJ("click",function(){return i.editChainStatus()}),e.qZA(),e.TgZ(10,"button",8),e.NdJ("click",function(){return i.createDeliveryChain()}),e.qZA()()()(),e.TgZ(11,"div",9)(12,"h2",10),e._uU(13,"Chain Information"),e.qZA(),e.TgZ(14,"div",11),e.YNc(15,ht,56,18,"div",12),e.qZA(),e.TgZ(16,"h2",10),e._uU(17,"Events"),e.qZA(),e.TgZ(18,"div",13)(19,"div",14)(20,"p-table",15,16),e.NdJ("selectionChange",function(o){return i.selectedEvent=o})("selectionChange",function(){return i.onSelectedEvent()}),e.YNc(22,ft,3,4,"ng-template",17),e.YNc(23,Ct,19,0,"ng-template",18),e.YNc(24,xt,22,20,"ng-template",19),e.YNc(25,Nt,4,3,"ng-template",20),e.YNc(26,Pt,2,0,"ng-template",21),e.qZA()(),e.YNc(27,qt,3,0,"div",22),e.qZA(),e.TgZ(28,"div",23)(29,"h2"),e._uU(30,"Products"),e.qZA(),e.TgZ(31,"div",5)(32,"button",24),e.NdJ("click",function(){return i.generateOffer()}),e.qZA(),e.TgZ(33,"button",25),e.NdJ("click",function(){return i.onAddProduct()}),e.qZA()()(),e.TgZ(34,"div",13)(35,"div",14)(36,"p-table",26,27),e.NdJ("selectionChange",function(o){return i.selectedSalesReservation=o}),e.YNc(38,Ut,3,4,"ng-template",17),e.YNc(39,Rt,17,0,"ng-template",18),e.YNc(40,Kt,38,22,"ng-template",19),e.YNc(41,Wt,4,3,"ng-template",20),e.qZA()()(),e.TgZ(42,"div",23)(43,"h2"),e._uU(44,"Offers"),e.qZA(),e._UZ(45,"div",5),e.qZA(),e.TgZ(46,"div",13)(47,"div",14)(48,"p-table",28),e.NdJ("selectionChange",function(o){return i.selectedOffer=o})("selectionChange",function(){return i.onSelectOffer()}),e.YNc(49,en,3,4,"ng-template",17),e.YNc(50,tn,11,0,"ng-template",18),e.YNc(51,sn,14,13,"ng-template",19),e.YNc(52,rn,4,3,"ng-template",20),e.qZA()()(),e.TgZ(53,"h2",10),e._uU(54,"Files"),e.qZA(),e.TgZ(55,"div",29)(56,"div",14)(57,"p-table",30,31),e.NdJ("selectionChange",function(o){return i.selectedFile=o}),e.YNc(59,cn,2,0,"ng-template",17),e.YNc(60,pn,7,0,"ng-template",18),e.YNc(61,un,9,5,"ng-template",19),e.YNc(62,mn,4,3,"ng-template",20),e.qZA()()()()(),e.YNc(63,hn,2,0,"ng-template",null,32,e.W1O),e.YNc(65,_n,1,0,"ng-template",null,33,e.W1O)),2&t){const s=e.MAs(21),o=e.MAs(64);e.xp6(4),e.Q6J("module","sales")("isActive",!0),e.xp6(4),e.ekj("disabled",!(null!=i.saleChain&&null!=i.saleChain.company&&i.saleChain.company.id)),e.Q6J("routerLink",e.VKq(33,fn,null==i.saleChain||null==i.saleChain.company?null:i.saleChain.company.id)),e.xp6(1),e.Q6J("disabled",i.isLoading),e.xp6(1),e.Q6J("disabled",i.isLoading||(null==i.saleChain||null==i.saleChain.delivery_chain?null:i.saleChain.delivery_chain.id))("loading",i.isCreateingDelivery),e.xp6(5),e.Q6J("ngIf",!i.isLoading)("ngIfElse",o),e.xp6(5),e.Q6J("scrollable",!0)("paginator",i.salesActivities.length>0)("rows",10)("value",i.salesActivities)("selection",i.selectedEvent),e.xp6(7),e.Q6J("ngIf",!s.paginator&&!i.isLoadingActivities&&i.salesActivities.length>0),e.xp6(5),e.Q6J("disabled",i.isLoadingReservation||0===(null==i.salesReservation?null:i.salesReservation.length))("loading",i.isCreatingOffer),e.xp6(1),e.Q6J("disabled",i.hasConfirmedOffer()||i.isLoadingReservation||i.isLoadingOffers),e.xp6(3),e.Q6J("scrollable",!0)("value",i.salesReservation)("selection",i.selectedSalesReservation)("rows",10)("paginator",!i.isLoadingReservation&&i.salesReservation.length>0),e.xp6(12),e.Q6J("value",i.offers)("selection",i.selectedOffer)("rows",10)("paginator",!i.isLoadingOffers&&i.offers.length>0),e.xp6(9),e.Q6J("scrollable",!0)("paginator",i.files.length>0)("rows",10)("value",i.files)("selection",i.selectedFile)}},dependencies:[c.sg,c.O5,C.yS,h.Hq,h.zx,P.jx,M.nm,E.u,v.iA,v.lQ,v.Ei,v.fz,T.D,c.JJ,c.uU],styles:[".company-page[_ngcontent-%COMP%]{overflow:hidden}h2[_ngcontent-%COMP%]{font-size:1.1875rem;font-weight:600}.company-information-card[_ngcontent-%COMP%]{padding:1rem 1.75rem 1.125rem}.company-information[_ngcontent-%COMP%]{line-height:1.4}.company-information[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:.625rem;font-weight:500;font-size:1.0625rem}.company-information[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]:last-child{margin-bottom:0}.company-information[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:400}.info-loading[_ngcontent-%COMP%]{width:100%;height:16.267rem;display:flex;align-items:center;justify-content:center}.title-hidden[_ngcontent-%COMP%]{display:none}.icons[_ngcontent-%COMP%]{position:relative;top:1px}.company-page[_ngcontent-%COMP%]  .p-menubar .p-submenu-list{width:13.5rem!important}"]}),n})();var vn=l(655),bn=l(1135),Sn=l(3900),yn=l(8382),V=l(1884),Zn=l(9300),O=l(9933),xn=l(666),W=l(630);const Tn=["paginator"],An=["dt"];function Nn(n,a){1&n&&(e.TgZ(0,"tr")(1,"th",28),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",29),e._uU(4,"Code"),e.qZA(),e.TgZ(5,"th",29),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th",30),e._uU(8,"Price"),e.qZA()())}function Pn(n,a){if(1&n&&(e.TgZ(0,"tr",31)(1,"td",28),e._uU(2),e.qZA(),e.TgZ(3,"td",29),e._uU(4),e.qZA(),e.TgZ(5,"td",29),e._uU(6),e.qZA(),e.TgZ(7,"td",30),e._uU(8),e.ALo(9,"number"),e.qZA()()),2&n){const t=a.$implicit,i=a.rowIndex,s=e.oxw();e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(10*(s.currentPage-1)+i+1),e.xp6(2),e.Oqu(t.code),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(e.xi3(9,5,t.price,"1.2-2"))}}function qn(n,a){1&n&&e._UZ(0,"i",35)}function wn(n,a){1&n&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function Un(n,a){if(1&n&&(e.TgZ(0,"tr")(1,"td",32),e.YNc(2,qn,1,0,"i",33),e.YNc(3,wn,2,0,"span",34),e.qZA()()),2&n){const t=e.oxw();e.xp6(1),e.uIk("colspan",6),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function Rn(n,a){1&n&&(e.TgZ(0,"div",36),e._UZ(1,"i",35),e.qZA())}function Mn(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",37)(1,"p-paginator",38,39),e.NdJ("onPageChange",function(s){e.CHM(t);const o=e.oxw();return e.KtG(o.paginate(s))}),e.qZA(),e.TgZ(3,"p-button",40),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onShowAll(!0))}),e._uU(4," All "),e.qZA()()}if(2&n){const t=e.oxw();e.ekj("paginator-wrapper_hide",0===t.count),e.xp6(1),e.Q6J("rows",10)("totalRecords",t.count)}}function In(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",41)(1,"p-button",42),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.onShowAll(!1))}),e._uU(2," Return pagination "),e.qZA()()}}let y=class{constructor(a,t,i){this.fb=a,this.adapterService=t,this.nomenclatureService=i,this.isLoading=!0,this.isShowAll=!1,this.count=0,this.currentPage=1,this.isStartFirstPage=!1,this.searchForm=this.fb.group({name:[""],code:[""],has_price:[null],type:[null]}),this.nomenclatureTypes=[{label:"Assembly",value:_.BN.ASSEMBLY},{label:"Manufactured",value:_.BN.MANUFACTURED}],this.query=[{name:"paginated",value:!0},{name:"page",value:this.currentPage},{name:"order_by_price",value:!0}],this.name$=new b.x,this.code$=new b.x,this.queryKey=this.adapterService.generateQueryKey(this.searchForm),this.search$=new bn.X(null),this.nomenclatures$=this.search$.pipe((0,m.b)(()=>this.prepareForSearch()),(0,Sn.w)(()=>(0,yn.s)(()=>!this.isShowAll,this.nomenclatureService.getForPagination(this.query).pipe((0,m.b)(s=>this.count=s.count),(0,p.U)(s=>s.results)),this.nomenclatureService.get(this.query).pipe((0,m.b)(s=>this.count=s.length)))),(0,m.b)(()=>this.paginateToFistPage()),(0,m.b)(()=>this.isLoading=!1),(0,O.t)(this))}ngOnInit(){this.name$.pipe((0,f.b)(150),(0,m.b)(()=>this.search$.next()),(0,V.x)(),(0,O.t)(this)).subscribe(),this.code$.pipe((0,f.b)(150),(0,m.b)(()=>this.search$.next()),(0,V.x)(),(0,O.t)(this)).subscribe()}paginateToFistPage(){this.isStartFirstPage&&this.paginator?.changePage(0),this.isStartFirstPage=!1}prepareForSearch(){this.isLoading=!0,this.selectedNomenclature=null;const a=this.adapterService.generateQueryKey(this.searchForm);a!==this.queryKey&&(this.currentPage=1,this.queryKey=a,this.isStartFirstPage=!0),this.query=[{name:"page",value:this.currentPage},{name:"order_by_price",value:!0}],this.searchForm.get("type").value?this.query.push({name:"type",value:this.searchForm.get("type").value}):this.query.push({name:"type_numbers",value:`${_.BN.MANUFACTURED},${_.BN.ASSEMBLY}`}),this.isShowAll||this.query.push({name:"paginated",value:!0});for(const t in this.searchForm.controls)this.searchForm.controls[t].value&&"type"!==t&&this.query.push({name:t,value:this.searchForm.controls[t].value})}paginate(a){this.isStartFirstPage||(this.currentPage=a.page+1,this.search$.next())}onShowAll(a){this.isShowAll=a,this.isShowAll||(this.currentPage=1),this.search$.next()}onEditNomenclaturePrice(){this.nomenclatureService.editNomenclaturePriceDialog(this.selectedNomenclature).pipe((0,Zn.h)(Boolean)).subscribe(()=>this.search$.next())}};y.\u0275fac=function(a){return new(a||y)(e.Y36(r.qu),e.Y36(z.v),e.Y36(Z.g))},y.\u0275cmp=e.Xpm({type:y,selectors:[["pek-sales-prices"]],viewQuery:function(a,t){if(1&a&&(e.Gf(Tn,5),e.Gf(An,5)),2&a){let i;e.iGM(i=e.CRH())&&(t.paginator=i.first),e.iGM(i=e.CRH())&&(t.dt=i.first)}},decls:42,vars:15,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[1,"page__content"],[1,"page__card"],[1,"form","mb-3",3,"formGroup"],[1,"row"],[1,"col-3"],[1,"form-group"],["for","code"],["id","code","type","text","pInputText","","formControlName","code",1,"form-control",3,"ngModelChange"],["for","name"],["id","name","type","text","pInputText","","formControlName","name",1,"form-control",3,"ngModelChange"],["optionValue","value","optionLabel","label","placeholder","Choice Type","formControlName","type",3,"options","showClear","ngModelChange"],["for","has_price"],["formControlName","has_price","inputId","has_price",3,"ngModelChange"],[1,"col-3","edit-price"],["pButton","","type","button","icon","pi pi-pencil","label","Edit Price",3,"disabled","click"],[1,"table-pagination-preloader"],["selectionMode","single","scrollHeight","calc(100vh - 19rem)",3,"value","rows","scrollable","selection","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","pagination-preloader pagination-preloader_bord",4,"ngIf"],["class","paginator-wrapper",3,"paginator-wrapper_hide",4,"ngIf"],["class","paginator-return-pagination",4,"ngIf"],[1,"text-center",2,"width","5%"],[2,"width","20%"],[1,"text-center",2,"width","15%"],[3,"pSelectableRow"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"],[1,"pagination-preloader","pagination-preloader_bord"],[1,"paginator-wrapper"],[3,"rows","totalRecords","onPageChange"],["paginator",""],["type","button","styleClass","p-button-text",1,"paginator-all",3,"click"],[1,"paginator-return-pagination"],["type","button","styleClass","p-button-text",3,"click"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Nomenclature Price"),e.qZA()()()(),e.TgZ(6,"div",4)(7,"div",5)(8,"form",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"label",10),e._uU(13,"Code"),e.qZA(),e.TgZ(14,"input",11),e.NdJ("ngModelChange",function(){return t.code$.next()}),e.qZA()()(),e.TgZ(15,"div",8)(16,"div",9)(17,"label",12),e._uU(18,"Name"),e.qZA(),e.TgZ(19,"input",13),e.NdJ("ngModelChange",function(){return t.name$.next()}),e.qZA()()(),e.TgZ(20,"div",8)(21,"div",9)(22,"label"),e._uU(23,"Type"),e.qZA(),e.TgZ(24,"p-dropdown",14),e.NdJ("ngModelChange",function(){return t.search$.next()}),e.qZA()()(),e.TgZ(25,"div",8)(26,"div",9)(27,"label",15),e._uU(28,"Has Price?"),e.qZA(),e.TgZ(29,"p-triStateCheckbox",16),e.NdJ("ngModelChange",function(){return t.search$.next()}),e.qZA()()(),e.TgZ(30,"div",17)(31,"button",18),e.NdJ("click",function(){return t.onEditNomenclaturePrice()}),e.qZA()()()(),e.TgZ(32,"div",19)(33,"p-table",20,21),e.NdJ("selectionChange",function(s){return t.selectedNomenclature=s}),e.ALo(35,"async"),e.YNc(36,Nn,9,0,"ng-template",22),e.YNc(37,Pn,10,8,"ng-template",23),e.YNc(38,Un,4,3,"ng-template",24),e.qZA(),e.YNc(39,Rn,2,0,"div",25),e.qZA(),e.YNc(40,Mn,5,4,"div",26),e.YNc(41,In,3,0,"div",27),e.qZA()()),2&a&&(e.xp6(3),e.Q6J("module","sales")("isActive",!0),e.xp6(5),e.Q6J("formGroup",t.searchForm),e.xp6(16),e.Q6J("options",t.nomenclatureTypes)("showClear",!0),e.xp6(7),e.Q6J("disabled",!t.selectedNomenclature),e.xp6(2),e.Q6J("value",e.lcZ(35,13,t.nomenclatures$))("rows",10)("scrollable",!0)("selection",t.selectedNomenclature),e.xp6(6),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isShowAll),e.xp6(1),e.Q6J("ngIf",t.isShowAll))},dependencies:[c.O5,h.Hq,h.zx,x.o,P.jx,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,xn.Lt,v.iA,v.Ei,T.D,Y.D,W.Iq,c.Ov,c.JJ],styles:["form[_ngcontent-%COMP%]{margin-top:-.25rem}form[_ngcontent-%COMP%]   .col-3[_ngcontent-%COMP%]{width:20%}.edit-price[_ngcontent-%COMP%]{display:flex}.edit-price[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;margin-top:auto;margin-bottom:.5rem}"]}),y=(0,vn.gn)([(0,O.c)()],y);const Jn=[{path:"",component:w,children:[{path:"",redirectTo:"sales-procurement-chains",pathMatch:"full"},{path:"sales-procurement-chains",children:[{path:"",title:"Sales Chains",component:lt},{path:"chain-page/:id",title:"Sales Chain",component:Cn}]},{path:"statuses",title:"Statuses Type",component:Ze},{path:"regions",title:"Countries & Regions",component:Ye},{path:"nomenclature-price",title:"Prices",component:y},{path:"configs",children:[{path:"",redirectTo:"nomenclature-price",pathMatch:"full"},{path:"nomenclature-price",title:"Nomenclature Price",component:fe}]}]}];let On=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[C.Bz.forChild(Jn),C.Bz]}),n})();var kn=l(7175),Fn=l(6984);let En=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,On,Fn.m,kn.x,A._t,G.q4,W.GY]}),n})()},2083:(X,q,l)=>{l.d(q,{D:()=>U});var c=l(4650),C=l(2334),e=l(5722),F=l(6895),w=l(4006);function _(g,m){if(1&g){const p=c.EpF();c.TgZ(0,"p-multiSelect",3),c.NdJ("ngModelChange",function(r){c.CHM(p);const Z=c.oxw();return c.KtG(Z.selectedCountries=r)})("ngModelChange",function(r){c.CHM(p);const Z=c.oxw();return c.KtG(Z.onSelectCountries(r))}),c.qZA()}if(2&g){const p=c.oxw();c.Q6J("showClear",p.showClear)("options",p.countries)("ngModel",p.selectedCountries)}}function b(g,m){1&g&&(c.TgZ(0,"div",4),c._UZ(1,"i",5),c.qZA())}let U=(()=>{class g{constructor(p){this.countryService=p,this.currentCountriesIds=[],this.currentCountries=[],this.showClear=!0,this.selectCountries=new c.vpe,this.isLoading=!0,this.countries=[],this.selectedCountries=[]}ngOnInit(){this.countryService.get().pipe().subscribe(p=>{this.countries=p,this.findCountries(),this.isLoading=!1})}ngOnChanges(p){("currentTechnologiesIds"in p||"currentCountries"in p)&&(this.selectedCountries=[],this.findCountries())}onSelectCountries(p){this.selectCountries.emit(p||null)}findCountries(){this.currentCountriesIds?.length>0&&this.currentCountriesIds.forEach(p=>{const f=this.countries.find(r=>r.id===p);f&&this.selectedCountries.push(f)}),this.currentCountries?.length>0&&this.selectedCountries.push(...this.currentCountries)}panelShow(p){console.log("panelShow",p)}}return g.\u0275fac=function(p){return new(p||g)(c.Y36(C.T))},g.\u0275cmp=c.Xpm({type:g,selectors:[["pek-multi-countries-picker"]],inputs:{currentCountriesIds:"currentCountriesIds",currentCountries:"currentCountries",showClear:"showClear"},outputs:{selectCountries:"selectCountries"},features:[c.TTD],decls:4,vars:2,consts:[[1,"multi-countries-picker"],["optionLabel","name","placeholder","Select Countries",3,"showClear","options","ngModel","ngModelChange",4,"ngIf","ngIfElse"],["spinner",""],["optionLabel","name","placeholder","Select Countries",3,"showClear","options","ngModel","ngModelChange"],[1,"spinner-input"],[1,"pi","pi-spin","pi-spinner",2,"font-size","1.25rem"]],template:function(p,f){if(1&p&&(c.TgZ(0,"div",0),c.YNc(1,_,1,3,"p-multiSelect",1),c.YNc(2,b,2,0,"ng-template",null,2,c.W1O),c.qZA()),2&p){const r=c.MAs(3);c.xp6(1),c.Q6J("ngIf",!f.isLoading)("ngIfElse",r)}},dependencies:[e.NU,F.O5,w.JJ,w.On]}),g})()}}]);