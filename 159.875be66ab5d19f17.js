"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[159],{3515:(oo,R,l)=>{l.r(R),l.d(R,{InstrumentsModule:()=>to});var d=l(6895),f=l(4269),e=l(4650),E=l(9293);let H=(()=>{class o{constructor(){this.routes=[{label:"Instruments And Tools",commands:["instruments-and-tools"]},{label:"Areas",commands:["areas"]},{label:"Tool Request",commands:["tool-request"]}],this.settingsRoutes=[]}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-instruments-layout"]],decls:2,vars:3,consts:[[3,"module","routes","settingsRoutes"]],template:function(t,n){1&t&&e._UZ(0,"pek-header",0)(1,"router-outlet"),2&t&&e.Q6J("module","Instruments")("routes",n.routes)("settingsRoutes",n.settingsRoutes)},dependencies:[f.lC,E.G]}),o})();var g=l(7579),U=l(4968),u=l(2722),x=l(2340),C=l(8505),v=l(4004),k=l(8372),i=l(4006),q=l(6382),c=l(6319),p=l(5698),$=l(529);let w=(()=>{class o{constructor(t){this.httpClient=t,this.count=-1,this.API_URL=x.N.base_url+x.N.production_url,this.url="areas/"}get(){return this.httpClient.get(this.API_URL+this.url).pipe((0,v.U)(t=>t.data))}get_paginated(t){let n="";return t&&t.forEach((r,s)=>{n+=s>0?"&"+r.name+"="+r.value:"?"+r.name+"="+r.value}),this.httpClient.get(this.API_URL+this.url+n).pipe((0,v.U)(r=>r.data))}getLocators(){return this.httpClient.get(this.API_URL+"area_locators/").pipe((0,v.U)(t=>t.data))}getById(t){return this.httpClient.get(this.API_URL+this.url+t+"/").pipe((0,v.U)(n=>n.data))}create(t){return this.httpClient.post(this.API_URL+this.url,t).pipe((0,v.U)(n=>n.data))}update(t){return this.httpClient.put(this.API_URL+this.url+t.id+"/",t)}delete(t){return this.httpClient.delete(this.API_URL+this.url+t.id+"/")}}return o.\u0275fac=function(t){return new(t||o)(e.LFG($.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var _=l(5593),b=l(1740);let W=(()=>{class o{constructor(t,n,r,s){this.dialogRef=t,this.fb=n,this.areasService=r,this.data=s,this.form=this.fb.group({name:["",i.kI.required],description:["",i.kI.required]}),this.destroy$=new g.x,"edit"===this.data.type&&(this.form.addControl("id",new i.NI(this.data.area.id)),this.form.patchValue(this.data.area))}ngOnInit(){}onSave(){this.form.get("id")?this.change():this.create()}create(){this.form.valid&&this.areasService.create(this.form.value).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.dialogRef.close(t)})}change(){this.form.valid&&this.areasService.update(this.form.value).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.dialogRef.close(t)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.so),e.Y36(i.qu),e.Y36(w),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-create-edit-area"]],decls:16,vars:6,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],["for","name"],["pInputText","","formControlName","name","type","text","id","name",1,"form-control"],["for","description"],["pInputText","","formControlName","description","type","text","id","description",1,"form-control"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","loading","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"label",4),e._uU(7,"Name*"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",3)(10,"label",6),e._uU(11,"Description*"),e.qZA(),e._UZ(12,"input",7),e.qZA()()(),e.TgZ(13,"mat-dialog-actions",8),e._UZ(14,"button",9),e.TgZ(15,"button",10),e.NdJ("click",function(){return n.onSave()}),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",n.data.type," Area "),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(10),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label",n.data.type)("loading",n.isSaving)("disabled",n.form.invalid))},dependencies:[_.Hq,b.o,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,c.ZT,c.xY,c.H8]}),o})();var F=l(2368),G=l(666);let O=(()=>{class o{constructor(t){this.areasService=t,this.valueChange=new e.vpe,this.showClear=!1,this.isLoading=!1,this.destroy$=new g.x}ngOnInit(){this.areasService.get().pipe((0,p.q)(1),(0,C.b)(t=>this.areas=t),(0,u.R)(this.destroy$)).subscribe()}onChange(t){this.setValue(t)}setValue(t){this.area=t,this.valueChange.emit(this.area)}registerOnChange(t){this.valueChange.subscribe(t)}registerOnTouched(t){}writeValue(t){this.area=t}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-area-picker"]],inputs:{area:"area",isDisabled:"isDisabled",showClear:"showClear"},outputs:{valueChange:"valueChange"},features:[e._Bn([{provide:i.JU,useExisting:(0,e.Gpc)(()=>o),multi:!1}])],decls:1,vars:6,consts:[["optionValue","id","optionLabel","name",3,"filter","showClear","ngModel","options","disabled","placeholder","ngModelChange"]],template:function(t,n){1&t&&(e.TgZ(0,"p-dropdown",0),e.NdJ("ngModelChange",function(s){return n.area=s})("ngModelChange",function(s){return n.onChange(s)}),e.qZA()),2&t&&e.Q6J("filter",!0)("showClear",n.showClear)("ngModel",n.area)("options",n.areas)("disabled",n.isDisabled)("placeholder","Select Area")},dependencies:[i.JJ,G.Lt,i.On]}),o})(),B=(()=>{class o{constructor(t,n,r,s){this.dialogRef=t,this.fb=n,this.areaLocatorsService=r,this.data=s,this.destroy$=new g.x,this.form=this.fb.group({name:["",i.kI.required],area:[Number(s.locator),[i.kI.required]],description:["",i.kI.required]}),"edit"===this.data.type?(this.form.addControl("id",new i.NI(this.data.locator.id)),this.form.patchValue(this.data.locator),this.form.get("area").patchValue(this.data.locator.area)):this.form.get("area").patchValue(this.data.areaId)}ngOnInit(){}onSave(){this.form.get("id")?this.change():this.create()}create(){this.form.valid&&this.areaLocatorsService.create(this.form.value).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.dialogRef.close(t)})}change(){this.form.valid&&this.areaLocatorsService.update(this.form.value).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.dialogRef.close(t)})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}valuesChanged(t){}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.so),e.Y36(i.qu),e.Y36(F.H),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-create-edit-area-locator"]],decls:20,vars:8,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],["for","name"],[3,"isDisabled","area","valueChange"],["pInputText","","formControlName","name","type","text","id","name",1,"form-control"],["for","description"],["pInputText","","formControlName","description","type","text","id","description",1,"form-control"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","loading","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"label",4),e._uU(7,"Area"),e.qZA(),e.TgZ(8,"pek-area-picker",5),e.NdJ("valueChange",function(s){return n.form.get("area").setValue(s)}),e.qZA()(),e.TgZ(9,"div",3)(10,"label",4),e._uU(11,"Name*"),e.qZA(),e._UZ(12,"input",6),e.qZA(),e.TgZ(13,"div",3)(14,"label",7),e._uU(15,"Description*"),e.qZA(),e._UZ(16,"input",8),e.qZA()()(),e.TgZ(17,"mat-dialog-actions",9),e._UZ(18,"button",10),e.TgZ(19,"button",11),e.NdJ("click",function(){return n.onSave()}),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",n.data.type," Area "),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("isDisabled",!0)("area",n.form.get("area").value),e.xp6(10),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label",n.data.type)("loading",n.isSaving)("disabled",n.form.invalid))},dependencies:[_.Hq,b.o,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,c.ZT,c.xY,c.H8,O]}),o})();var L=l(5573),J=l(5483);let j=(()=>{class o{constructor(t,n,r,s,h){this.dialogRef=t,this.toolOrderService=n,this.areaLocatorService=r,this.data=h,this.isSaving=!1,this.form=s.group({area_locator:["",[i.kI.required]]}),"edit"===this.data.type&&(this.form.addControl("id",new i.NI(this.data.toolOrder.id)),this.form.get("area_locator").patchValue(this.data.toolOrder.area_locator.id))}ngOnInit(){}create(){this.form.valid&&this.toolOrderService.create(this.form.value).pipe((0,p.q)(1)).subscribe(t=>{this.dialogRef.close(t)})}change(){this.form.valid&&this.toolOrderService.update(this.form.value).pipe((0,p.q)(1)).subscribe(t=>{this.dialogRef.close(t)})}onSave(){this.form.get("id")?this.change():this.create()}test(){console.log("this.form",this.form)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(c.so),e.Y36(L.z),e.Y36(F.H),e.Y36(i.qu),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-create-edit-tool-request"]],decls:12,vars:7,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],[3,"locator","valueChange"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","loading","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"label"),e._uU(7,"Locator"),e.qZA(),e.TgZ(8,"pek-area-locator-picker",4),e.NdJ("valueChange",function(s){return n.form.get("area_locator").setValue(s)}),e.qZA()()()(),e.TgZ(9,"mat-dialog-actions",5),e._UZ(10,"button",6),e.TgZ(11,"button",7),e.NdJ("click",function(){return n.onSave()}),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",n.data.type," Area "),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("locator",n.form.get("area_locator").value),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label",n.data.type)("loading",n.isSaving)("disabled",n.form.invalid))},dependencies:[_.Hq,i._Y,i.JL,i.sg,c.ZT,c.xY,c.H8,J.A]}),o})();var P=l(3068),T=l(805),m=l(5390),I=l(1997),V=l(9832),D=l(9642),z=l(2746),Q=l(621);const K=["paginator"];function X(o,a){1&o&&(e.TgZ(0,"tr")(1,"th",31),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",32),e._uU(4,"Code"),e.qZA(),e.TgZ(5,"th",32),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th",33),e._uU(8,"Quantity"),e.qZA(),e.TgZ(9,"th",34),e._uU(10,"UOM"),e.qZA(),e.TgZ(11,"th",35),e._uU(12,"Category"),e.qZA(),e.TgZ(13,"th",36),e._uU(14,"Warehouse"),e.qZA(),e.TgZ(15,"th",37),e._uU(16,"Locator"),e.qZA()())}function ee(o,a){1&o&&(e.TgZ(0,"b"),e._uU(1,"(S)"),e.qZA())}function te(o,a){1&o&&(e.TgZ(0,"b"),e._uU(1,"(T)"),e.qZA())}function oe(o,a){1&o&&(e.TgZ(0,"b"),e._uU(1,"(R)"),e.qZA())}function ne(o,a){if(1&o&&(e.TgZ(0,"a",49),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("href",n.link+"production/orders/order/"+t.order_id,e.LSH),e.xp6(1),e.hij("",t.order_id," ")}}function re(o,a){if(1&o&&(e.TgZ(0,"a",49),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("href",n.link+"outsource/outsource-chain/products/"+t.order_id,e.LSH),e.xp6(1),e.hij("",t.order_id," ")}}function ae(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,ne,2,2,"a",48),e.YNc(2,re,2,2,"a",48),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",3===t.accounting_type),e.xp6(1),e.Q6J("ngIf",2===t.accounting_type)}}function ie(o,a){if(1&o&&(e.TgZ(0,"span",45)(1,"b"),e._uU(2,"In Use"),e.qZA(),e.TgZ(3,"div",46)(4,"p"),e._uU(5,"In use by orders:"),e.qZA(),e.YNc(6,ae,3,2,"div",47),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(6),e.Q6J("ngForOf",t.used_by_order)}}function se(o,a){1&o&&(e.TgZ(0,"b",45),e._uU(1,"(Declined)"),e.qZA())}function le(o,a){1&o&&(e.TgZ(0,"b",50),e._uU(1,"(Not Confirmed)"),e.qZA())}function ce(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null!=t.nomenclature.category&&null!=t.nomenclature.category.unit_of_measure&&t.nomenclature.category.unit_of_measure.symbol?null==t.nomenclature.category||null==t.nomenclature.category.unit_of_measure?null:t.nomenclature.category.unit_of_measure.symbol:"Pcs"," ")}}function ue(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null!=t.nomenclature.root_category&&null!=t.nomenclature.root_category.unit_of_measure&&t.nomenclature.root_category.unit_of_measure.symbol?null==t.nomenclature.root_category||null==t.nomenclature.root_category.unit_of_measure?null:t.nomenclature.root_category.unit_of_measure.symbol:"Pcs"," ")}}function pe(o,a){if(1&o&&(e.ynx(0),e.YNc(1,ce,2,1,"ng-container",41),e.YNc(2,ue,2,1,"ng-container",41),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.nomenclature.category),e.xp6(1),e.Q6J("ngIf",t.nomenclature.root_category)}}function de(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Pcs "),e.qZA())}function _e(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.locator.warehouse.name," ")}}function me(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.hij(" ",t.locator.name," ")}}function he(o,a){if(1&o&&(e.TgZ(0,"span",51),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.HOy(" R: ",t.locator.row," Col: ",t.locator.column," Sh: ",t.locator.shelf," Pl: ",t.locator.place," ")}}function ge(o,a){if(1&o&&(e.TgZ(0,"tr",38)(1,"td",39),e._uU(2),e.qZA(),e.TgZ(3,"td",32),e._uU(4),e.qZA(),e.TgZ(5,"td",40),e.YNc(6,ee,2,0,"b",41),e.YNc(7,te,2,0,"b",41),e.YNc(8,oe,2,0,"b",41),e._uU(9),e.YNc(10,ie,7,1,"span",42),e.YNc(11,se,2,0,"b",42),e.YNc(12,le,2,0,"b",43),e.qZA(),e.TgZ(13,"td",33),e._uU(14),e.qZA(),e.TgZ(15,"td",34),e.YNc(16,pe,3,2,"ng-container",41),e.YNc(17,de,2,0,"span",41),e.qZA(),e.TgZ(18,"td",35),e._uU(19),e.qZA(),e.TgZ(20,"td",36),e.YNc(21,_e,2,1,"ng-container",41),e.qZA(),e.TgZ(22,"td",37),e.YNc(23,me,2,1,"ng-container",41),e.YNc(24,he,2,4,"span",44),e.qZA()()),2&o){const t=a.$implicit,n=a.rowIndex,r=e.oxw();e.Q6J("pSelectableRow",t)("pRowToggler",t)("pSelectableRowDisabled",r.showIsReserved(t.extra_info)||t.type===r.ENomenclatureType.PURCHASED&&(t.approved&&t.approved===r.ENomenclatureApproval.DECLINED||(null==t.nomenclature?null:t.nomenclature.approved)===r.ENomenclatureApproval.DECLINED)||t.approved&&t.approved===r.ENomenclatureApproval.NEW||(null==t.nomenclature?null:t.nomenclature.approved)===r.ENomenclatureApproval.NEW),e.xp6(2),e.hij(" ",10*(r.searchForm.get("page").value-1)+n+1," "),e.xp6(2),e.hij(" ",t.nomenclature.code," "),e.xp6(2),e.Q6J("ngIf","1"===t.nomenclature.bulk_or_serial),e.xp6(1),e.Q6J("ngIf",t.nomenclature.has_technical_equipment),e.xp6(1),e.Q6J("ngIf",r.showIsReserved(t.extra_info)),e.xp6(1),e.hij(" ",t.nomenclature.name," "),e.xp6(1),e.Q6J("ngIf",t.used_by_order&&t.used_by_order.length>0),e.xp6(1),e.Q6J("ngIf",t.type===r.ENomenclatureType.PURCHASED&&(t.approved&&t.approved===r.ENomenclatureApproval.DECLINED||(null==t.nomenclature?null:t.nomenclature.approved)===r.ENomenclatureApproval.DECLINED)),e.xp6(1),e.Q6J("ngIf",t.type===r.ENomenclatureType.PURCHASED&&(t.approved&&t.approved===r.ENomenclatureApproval.NEW||(null==t.nomenclature?null:t.nomenclature.approved)===r.ENomenclatureApproval.NEW)),e.xp6(2),e.hij(" ",t.total_locator_quantity," "),e.xp6(2),e.Q6J("ngIf",t.nomenclature.category||t.nomenclature.root_category),e.xp6(1),e.Q6J("ngIf",!t.nomenclature.category&&!t.nomenclature.root_category),e.xp6(2),e.AsE(" ",null==t.nomenclature.category?null:t.nomenclature.category.name," ",null==t.nomenclature.root_category?null:t.nomenclature.root_category.name," "),e.xp6(2),e.Q6J("ngIf",t.locator),e.xp6(2),e.Q6J("ngIf",t.locator),e.xp6(1),e.Q6J("ngIf",t.locator)}}function fe(o,a){1&o&&e._UZ(0,"i",54)}function ve(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function be(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td",52),e.YNc(2,fe,1,0,"i",53),e.YNc(3,ve,2,0,"span",41),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.uIk("colspan",9),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function Te(o,a){1&o&&(e.TgZ(0,"div",55),e._UZ(1,"i",54),e.qZA())}function ye(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",56)(1,"p-paginator",57,58),e.NdJ("onPageChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.paginate(r))}),e.qZA(),e.TgZ(3,"p-button",59),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowAll())}),e._uU(4," All "),e.qZA()()}if(2&o){const t=e.oxw();e.ekj("paginator-wrapper_hide",0===t.searchResult.length),e.xp6(1),e.Q6J("rows",10)("totalRecords",t.countProducts)}}function Ce(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",60)(1,"p-button",61),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowPartial())}),e._uU(2," Return pagination "),e.qZA()()}}let Ae=(()=>{class o{constructor(t,n,r){this.fb=t,this.dialogRef=n,this.productService=r,this.searchResult=[],this.tableScrollHeight="29.75rem",this.link=x.N.link_url+"dash/",this.isLoading=!1,this.isShowAll=!1,this.isStartOnePage=!1,this.formChanged=new g.x,this.searchForm=this.fb.group({name:[null],code:[null],warehouse:[null],category:[null],locator:[null],type:[null],page:[1]}),this.query=[{name:"page",value:this.searchForm.get("page").value},{name:"paginated",value:!0},{name:"at_area",value:!1}],this.destroy$=new g.x,this.ENomenclatureApproval=P.CT,this.ENomenclatureType=P.BN}ngOnInit(){this.formChanged.pipe((0,k.b)(500),(0,u.R)(this.destroy$)).subscribe(()=>{this.searchProducts()})}onSelectCategory(t){t?this.searchForm.get("category").patchValue(t.id):this.searchForm.get("category").patchValue(null)}searchProducts(){this.isLoading=!0,this.selectedNode=null,this.query=[],this.isShowAll||(this.query=[{name:"paginated",value:"true"},{name:"page",value:this.searchForm.get("page").value}]),this.query.push({name:"at_area",value:!1}),this.searchForm.get("name").value&&this.query.push({name:"name",value:this.searchForm.get("name").value.replace(/\+/g,"%2b")}),this.searchForm.get("code").value&&this.query.push({name:"code",value:this.searchForm.get("code").value}),this.searchForm.get("type").value&&this.query.push({name:"type",value:this.searchForm.get("type").value}),this.searchForm.get("warehouse").value&&this.query.push({name:"warehouse",value:this.searchForm.get("warehouse").value}),this.searchForm.get("locator").value&&this.query.push({name:"locator",value:this.searchForm.get("locator").value}),console.log("this.searchForm.get('locator').value",this.searchForm.get("locator").value),this.searchForm.get("category").value&&this.query.push({name:"category",value:this.searchForm.get("category").value}),this.isShowAll?(this.searchForm.get("page").patchValue(1),this.getProducts()):this.getProductForPagination()}paginate(t){this.isStartOnePage||(this.searchForm.get("page").patchValue(t.page+1),this.searchProducts())}getProductForPagination(){this.productService.getGroupedPagination(this.query).subscribe(t=>{t.results.forEach((n,r)=>{n.nomenclature||(n.nomenclature={id:n.nomenclature_id,code:n.code,name:n.name,type:n.type,category:n.category,description:n.description}),n.checkedForGeneration=!1,n.uid=r}),this.searchResult=t.results,this.countProducts=t.count,this.isStartOnePage&&this.paginator?.changePage(0),this.isStartOnePage=!1,this.isLoading=!1})}onShowAll(){this.isShowAll=!0,this.searchProducts()}onShowPartial(){this.isShowAll=!1,this.searchProducts()}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}getProducts(){this.productService.getGrouped(this.query).pipe((0,u.R)(this.destroy$)).subscribe(t=>{t.forEach((n,r)=>{n.nomenclature||(n.nomenclature={id:n.nomenclature_id,code:n.code,name:n.name,type:n.type,category:n.category,description:n.description}),n.checkedForGeneration=!1,n.uid=r}),this.searchResult=t,this.countProducts=t.length,this.isStartOnePage&&this.paginator?.changePage(0),this.isStartOnePage=!1,this.isLoading=!1})}locatorSelected(t){this.searchForm.get("warehouse").setValue(t)}select(){this.dialogRef.close(this.selectedNode)}showIsReserved(t){if(t)return t.some(n=>n.reserved_by_opened_production_lists_quantity>0||n.reserved_by_tool_requests_quantity>0)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(c.so),e.Y36(q.t))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-warehouse-search"]],viewQuery:function(t,n){if(1&t&&e.Gf(K,5),2&t){let r;e.iGM(r=e.CRH())&&(n.paginator=r.first)}},decls:57,vars:16,consts:[[1,"page__content"],[1,"page__card"],[1,"warehouse-items"],[1,"pi","pi-times","close-icon",3,"mat-dialog-close"],[1,"warehouse-items__left"],[1,"form-group"],[3,"categorySelected"],[1,"warehouse-items__right"],[1,"page__table"],[1,"filters-visibility"],[1,"filters-visibility__header"],[1,"warehouse-items__form","mb-3",3,"formGroup"],[1,"row"],[1,"col-4"],["formControlName","code","pInputText","",1,"form-control",3,"ngModelChange"],["formControlName","name","pInputText","",1,"form-control",3,"ngModelChange"],[1,"col-6"],[3,"selectWarehouse"],[3,"warehouseId","isAllLocators","isDisabled","selectLocator"],[3,"currentNomenclatureType","choiceNomenclatureType"],[1,"col-2"],["pButton","","type","button",1,"p-button-success",3,"label","disabled","click"],[1,"table-pagination-preloader"],["selectionMode","single","dataKey","uid",3,"scrollHeight","scrollable","rows","selection","value","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","pagination-preloader pagination-preloader_bord",4,"ngIf"],["class","paginator-wrapper",3,"paginator-wrapper_hide",4,"ngIf"],["class","paginator-return-pagination",4,"ngIf"],[1,"index-header","text-center",2,"width","5%"],[2,"width","15%"],[1,"text-center",2,"width","10%"],[1,"text-center",2,"width","6%"],[1,"text-center",2,"width","13%"],[1,"text-center",2,"width","12%"],[1,"text-center",2,"width","14%"],[3,"pSelectableRow","pRowToggler","pSelectableRowDisabled"],[1,"text-center",2,"width","5%"],[1,"in-use",2,"width","15%"],[4,"ngIf"],["class","text-danger",4,"ngIf"],["class","text-warning",4,"ngIf"],["class","d-block",4,"ngIf"],[1,"text-danger"],[1,"in-use-info"],[4,"ngFor","ngForOf"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],[1,"text-warning"],[1,"d-block"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"],[1,"pagination-preloader","pagination-preloader_bord"],[1,"paginator-wrapper"],[3,"rows","totalRecords","onPageChange"],["paginator",""],["type","button","styleClass","p-button-text",1,"paginator-all",3,"click"],[1,"paginator-return-pagination"],["type","button","styleClass","p-button-text",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"mat-dialog-content")(1,"div",0)(2,"div",1)(3,"div",2),e._UZ(4,"i",3),e.TgZ(5,"div",4)(6,"div",5)(7,"pek-categories-tree-picker",6),e.NdJ("categorySelected",function(s){return n.onSelectCategory(s),n.formChanged.next()}),e.qZA()()(),e.TgZ(8,"div",7)(9,"div",8)(10,"div",9),e._UZ(11,"div",10),e.TgZ(12,"form",11)(13,"div",12)(14,"div",13)(15,"div",5)(16,"label"),e._uU(17,"Code"),e.qZA(),e.TgZ(18,"input",14),e.NdJ("ngModelChange",function(){return n.formChanged.next()}),e.qZA()()(),e.TgZ(19,"div",13)(20,"div",5)(21,"label"),e._uU(22,"Name"),e.qZA(),e.TgZ(23,"input",15),e.NdJ("ngModelChange",function(){return n.formChanged.next()}),e.qZA()()(),e.TgZ(24,"div",13)(25,"div",12)(26,"div",16)(27,"div",5)(28,"label"),e._uU(29,"Warehouses"),e.qZA(),e.TgZ(30,"pek-warehouse-picker",17),e.NdJ("selectWarehouse",function(s){return n.searchForm.get("warehouse").setValue(s),n.formChanged.next()}),e.qZA()()(),e.TgZ(31,"div",16)(32,"div",5)(33,"label"),e._uU(34,"Locator"),e.qZA(),e.TgZ(35,"pek-locator-picker",18),e.NdJ("selectLocator",function(s){return n.locatorSelected(s),n.formChanged.next()}),e.qZA()()()()(),e.TgZ(36,"div",13)(37,"div",5)(38,"label"),e._uU(39,"Type"),e.qZA(),e.TgZ(40,"pek-nomenclature-type-picker",19),e.NdJ("choiceNomenclatureType",function(s){return n.searchForm.get("type").setValue(s),n.formChanged.next()}),e.qZA()()(),e.TgZ(41,"div",16),e._UZ(42,"div",5),e.qZA(),e.TgZ(43,"div",20)(44,"div",5)(45,"label"),e._uU(46,"\xa0"),e.qZA(),e.TgZ(47,"button",21),e.NdJ("click",function(){return n.select()}),e.qZA()()()()()(),e.TgZ(48,"div",22)(49,"p-table",23,24),e.NdJ("selectionChange",function(s){return n.selectedNode=s}),e.YNc(51,X,17,0,"ng-template",25),e.YNc(52,ge,25,20,"ng-template",26),e.YNc(53,be,4,3,"ng-template",27),e.qZA(),e.YNc(54,Te,2,0,"div",28),e.qZA(),e.YNc(55,ye,5,4,"div",29),e.YNc(56,Ce,3,0,"div",30),e.qZA()()()()()()),2&t&&(e.xp6(4),e.Q6J("mat-dialog-close",!1),e.xp6(8),e.Q6J("formGroup",n.searchForm),e.xp6(23),e.Q6J("warehouseId",n.searchForm.get("warehouse").value)("isAllLocators",!1)("isDisabled",!0),e.xp6(5),e.Q6J("currentNomenclatureType",n.searchForm.get("type").value),e.xp6(7),e.Q6J("label","Select")("disabled",!n.selectedNode),e.xp6(2),e.Q6J("scrollHeight","calc(100vh - "+n.tableScrollHeight+")")("scrollable",!0)("rows",10)("selection",n.selectedNode)("value",n.searchResult),e.xp6(5),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isShowAll),e.xp6(1),e.Q6J("ngIf",n.isShowAll))},dependencies:[T.jx,d.sg,d.O5,_.Hq,_.zx,b.o,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,c.ZT,c.xY,m.iA,m.Ei,m.jB,I.D,V.$,D.D,z.p,Q.E],styles:[".page__card{box-shadow:none}.close-icon[_ngcontent-%COMP%]{position:absolute;right:0;top:-2.75rem;font-size:2.1875rem;color:#002e7294;cursor:pointer}.page__card[_ngcontent-%COMP%]{padding-top:1.25rem}.warehouse-items[_ngcontent-%COMP%]{position:relative;display:flex}.warehouse-items__spinner[_ngcontent-%COMP%]{border:.0625rem solid #dee2e6;border-radius:.625rem;height:calc(100vh - 15.125rem);display:flex;align-items:center;justify-content:center}.warehouse-items__tree[_ngcontent-%COMP%]{bottom:0;top:0;z-index:2;width:100%;height:calc(100vh - 15.125rem)}.warehouse-items__tree-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.warehouse-items__left[_ngcontent-%COMP%]{width:24rem;flex:0 0 24rem}.warehouse-items__left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%;height:100%;padding:0}.warehouse-items__left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;top:-.125rem}.warehouse-items__left[_ngcontent-%COMP%]  .p-tree{overflow:auto;height:100%;top:0;bottom:0;width:100%;border-radius:.625rem!important}.warehouse-items__left[_ngcontent-%COMP%]  .p-tree::-webkit-scrollbar-thumb{border-radius:.625rem;background-color:#d1d2d8}.warehouse-items__left[_ngcontent-%COMP%]  .p-tree::-webkit-scrollbar{cursor:auto;width:.5rem;background-color:#f8f9fa}.warehouse-items__right[_ngcontent-%COMP%]{width:100%;margin-left:1.75rem}.warehouse-items__right[_ngcontent-%COMP%]  .p-datatable-header{padding:0 0 1rem!important}.warehouse-items__form[_ngcontent-%COMP%]{margin-top:-.625rem}.filters-visibility_hide[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:.625rem!important}.filters-visibility__header[_ngcontent-%COMP%]{min-height:1.375rem}.page__card[_ngcontent-%COMP%], .in-use[_ngcontent-%COMP%]{position:relative}.in-use[_ngcontent-%COMP%]:hover   .in-use-info[_ngcontent-%COMP%]{opacity:1;pointer-events:initial}.in-use-info[_ngcontent-%COMP%]{position:absolute;transition:.25s ease;opacity:0;background:#fff;z-index:3;width:9rem;right:-3rem;top:-1.5rem;padding:.75rem 1rem;box-shadow:0 0 .4375rem .0625rem #00000026;border-radius:.5rem;pointer-events:none}"]}),o})();var M=l(3187);function Ze(o,a){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.AsE(" ",t.selectedProduct.nomenclature.name," Quantity: ",t.selectedProduct.quantity," ")}}let xe=(()=>{class o{constructor(t,n,r,s,h){this.dialogRef=n,this.instrumentAndToolsService=r,this.toolRequestService=s,this.data=h,this.isSaving=!1,this.form=t.group({tool_order:[Number(h.toolOrderId),[i.kI.required]],nomenclature:["",[i.kI.required]],initial_quantity:[0,[i.kI.required]]}),"edit"===this.data.type&&(this.selectedProduct=h.toolRequest,this.form.addControl("id",new i.NI(this.data.toolRequest.id)),this.form.patchValue(this.data.toolRequest),this.form.get("nomenclature").patchValue(this.data.toolRequest.nomenclature.id),this.form.get("tool_order").patchValue(this.data.toolRequest.tool_order))}ngOnInit(){}onSave(){this.form.get("id")?this.change():this.create()}openWarehouseSearch(){this.instrumentAndToolsService.searchInWarehouseNomenclatureModal().subscribe(t=>{t&&(this.selectedProduct=t,this.form.get("nomenclature").patchValue(t.nomenclature.id))})}create(){this.form.valid&&this.toolRequestService.create(this.form.value).pipe((0,p.q)(1)).subscribe(t=>{this.dialogRef.close(t)})}change(){this.form.valid&&this.toolRequestService.update(this.form.value).pipe((0,p.q)(1)).subscribe(t=>{this.dialogRef.close(t)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(c.so),e.Y36(y),e.Y36(M.C),e.Y36(c.WI))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-create-update-tool-order-request"]],decls:19,vars:7,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"row"],[1,"col-4"],[1,"form-group"],["pButton","","type","button","label","SEARCH IN WAREHOUSE",1,"p-button-secondary",3,"click"],[1,"col-8","d-flex","align-items-center"],[4,"ngIf"],["for","name"],["pInputText","","formControlName","initial_quantity","type","text","id","name",1,"form-control"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","loading","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"button",6),e.NdJ("click",function(){return n.openWarehouseSearch()}),e.qZA()()(),e.TgZ(9,"div",7)(10,"div",5),e.YNc(11,Ze,2,2,"span",8),e.qZA()()(),e.TgZ(12,"div",5)(13,"label",9),e._uU(14,"Quantity*"),e.qZA(),e._UZ(15,"input",10),e.qZA()()(),e.TgZ(16,"mat-dialog-actions",11),e._UZ(17,"button",12),e.TgZ(18,"button",13),e.NdJ("click",function(){return n.onSave()}),e.qZA()()),2&t&&(e.xp6(2),e.hij(" ",n.data.type," Request "),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(7),e.Q6J("ngIf",n.selectedProduct),e.xp6(6),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label",n.data.type)("loading",n.isSaving)("disabled",n.form.invalid))},dependencies:[d.O5,_.Hq,b.o,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,c.ZT,c.xY,c.H8]}),o})(),qe=(()=>{class o{constructor(t,n,r,s){this.fb=t,this.product=n,this.dialogRef=r,this.warehouseProductService=s,this.form=this.fb.group({quantity:[0,[i.kI.max(this.product.total_area_locator_quantity),i.kI.min(1)]],nomenclature:[Number(this.product.nomenclature.id),i.kI.required],to_area_locator:[null,i.kI.required],from_area_locator:[Number(this.product.area_locator.id),i.kI.required]})}ngOnInit(){console.log("this.form",this.form.value)}onChangeQuantity(t){const n=this.product.total_area_locator_quantity;t>n&&this.form.get("quantity").patchValue(n)}onMove(){this.form.valid&&this.warehouseProductService.moveBulk(this.form.value).subscribe(t=>{this.dialogRef.close(!0)})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(c.WI),e.Y36(c.so),e.Y36(q.t))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-product-move-to-area-locator"]],decls:16,vars:7,consts:[[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],[3,"current_locator_id","valueChange"],["for","quantity"],["pInputText","","formControlName","quantity","type","number","id","quantity",1,"form-control",3,"ngModelChange"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","disabled","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e._uU(2),e.qZA()(),e.TgZ(3,"mat-dialog-content")(4,"form",2)(5,"div",3)(6,"label"),e._uU(7,"Locator"),e.qZA(),e.TgZ(8,"pek-area-locator-picker",4),e.NdJ("valueChange",function(s){return n.form.get("to_area_locator").setValue(s)}),e.qZA()(),e.TgZ(9,"div",3)(10,"label",5),e._uU(11),e.qZA(),e.TgZ(12,"input",6),e.NdJ("ngModelChange",function(s){return n.onChangeQuantity(s)}),e.qZA()()()(),e.TgZ(13,"mat-dialog-actions",7),e._UZ(14,"button",8),e.TgZ(15,"button",9),e.NdJ("click",function(){return n.onMove()}),e.qZA()()),2&t&&(e.xp6(2),e.hij(" Move Items (",n.product.nomenclature.name,") "),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(4),e.Q6J("current_locator_id",n.form.get("from_area_locator").value),e.xp6(3),e.hij("Quantity (Max: ",n.product.total_area_locator_quantity,")"),e.xp6(3),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label","Move")("disabled",n.form.invalid))},dependencies:[_.Hq,b.o,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,c.ZT,c.xY,c.H8,J.A]}),o})();function we(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Write Off"),e.qZA())}function Ie(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"Return To Warehouse"),e.qZA())}function Se(o,a){if(1&o&&(e.ynx(0),e.TgZ(1,"div",9)(2,"label"),e._uU(3),e.TgZ(4,"b"),e._uU(5),e.qZA()(),e._UZ(6,"input",10),e.qZA(),e.BQk()),2&o){const t=a.index,n=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.AsE("",n.data.product[t].nomenclature.code," / ",n.data.product[t].nomenclature.name," Quantity: "),e.xp6(2),e.Oqu(n.data.product[t].quantity)}}function Ne(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.writeOff())}),e.qZA()}2&o&&e.Q6J("label","Write Off")}function ke(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.returnToWarehouse())}),e.qZA()}2&o&&e.Q6J("label","Return To Warehouse")}let Fe=(()=>{class o{constructor(t,n,r,s){this.fb=t,this.data=n,this.dialogRef=r,this.warehouseProductService=s,this.form=this.fb.group({products:this.fb.array([])})}ngOnInit(){const t=this.data.product.map(n=>this.fb.group({id:n.id,quantity:[n.quantity,[i.kI.max(n.quantity),i.kI.min(0)]]}));this.form=this.fb.group({products:this.fb.array(t)})}get products(){return this.form.get("products")}returnToWarehouse(){this.form.valid&&this.warehouseProductService.return_to_qc(this.form.get("products").value).pipe((0,p.q)(1)).subscribe(t=>{this.dialogRef.close()})}writeOff(){this.form.valid&&this.warehouseProductService.write_off_confirmation(this.form.get("products").value).pipe((0,p.q)(1)).subscribe(t=>{this.dialogRef.close()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(c.WI),e.Y36(c.so),e.Y36(q.t))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-instruments-and-tools-write-off-return"]],decls:12,vars:7,consts:[[1,"modal-header"],[1,"modal-header__title"],[4,"ngIf"],[3,"formGroup"],["formArrayName","products"],[4,"ngFor","ngForOf"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button","class","p-button-success",3,"label","click",4,"ngIf"],[1,"form-group",3,"formGroupName"],["pInputText","","formControlName","quantity","type","number","id","name",1,"form-control"],["pButton","","type","button",1,"p-button-success",3,"label","click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"h2",1),e.YNc(2,we,2,0,"span",2),e.YNc(3,Ie,2,0,"span",2),e.qZA()(),e.TgZ(4,"mat-dialog-content")(5,"form",3),e.ynx(6,4),e.YNc(7,Se,7,4,"ng-container",5),e.BQk(),e.qZA()(),e.TgZ(8,"mat-dialog-actions",6),e._UZ(9,"button",7),e.YNc(10,Ne,1,1,"button",8),e.YNc(11,ke,1,1,"button",8),e.qZA()),2&t&&(e.xp6(2),e.Q6J("ngIf","writeOff"==n.data.type),e.xp6(1),e.Q6J("ngIf","warehouseReturn"==n.data.type),e.xp6(2),e.Q6J("formGroup",n.form),e.xp6(2),e.Q6J("ngForOf",n.products.controls),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("ngIf","writeOff"==n.data.type),e.xp6(1),e.Q6J("ngIf","warehouseReturn"==n.data.type))},dependencies:[d.sg,d.O5,_.Hq,b.o,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,c.ZT,c.xY,c.H8]}),o})(),y=(()=>{class o{constructor(t){this.dialog=t}createEditAreaModal(t,n){return this.dialog.open(W,{width:"50rem",height:"auto",panelClass:"modal-overflow-visible",data:{type:t,area:n},autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}createEditAreaLocatorModal(t,n,r){return this.dialog.open(B,{width:"50rem",height:"auto",panelClass:"modal-overflow-visible",data:{type:t,locator:n,areaId:r},autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}createEditToolRequestModal(t,n){return this.dialog.open(j,{width:"50rem",height:"auto",panelClass:"modal-overflow-visible",data:{type:t,toolOrder:n},autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}createEditToolRequestNomenclatureModal(t,n,r){return this.dialog.open(xe,{width:"50rem",height:"auto",panelClass:"modal-overflow-visible",data:{type:t,toolRequest:r,toolOrderId:n},autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}searchInWarehouseNomenclatureModal(){return this.dialog.open(Ae,{width:"100vw",maxWidth:"100vw",height:"100vh",maxHeight:"100vh",panelClass:"warehouse-search",data:{},disableClose:!0,autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}productMoveToAreaLocatorModal(t){return this.dialog.open(qe,{width:"50rem",height:"auto",panelClass:"modal-overflow-visible",data:t,disableClose:!0,autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}productWriteOfReturnModal(t,n){return this.dialog.open(Fe,{width:"50rem",height:"auto",panelClass:"modal-overflow-visible",data:{product:t,type:n},disableClose:!0,autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(c.uw))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Le=l(3608),Je=l(1989),Re=l(7506),A=l(3237),Y=l(9258);const Ue=["paginator"],Oe=["searchBoxName"],Pe=["searchBoxCode"];function Qe(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",38)(1,"div",38)(2,"button",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onMoveProduct())}),e.qZA(),e.TgZ(3,"button",40),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.returnToQc())}),e.qZA(),e.TgZ(4,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.writeOff())}),e.qZA()()()}if(2&o){const t=e.oxw();e.xp6(2),e.Q6J("disabled",t.selectedProduct.length>1)}}function Me(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",42),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",43),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_code").value,"order_by_code"))}),e._uU(4," Code "),e._UZ(5,"pek-sort-icon",44),e.qZA(),e.TgZ(6,"th",45),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_name").value,"order_by_name"))}),e._uU(7," Name "),e._UZ(8,"pek-sort-icon",44),e.qZA(),e.TgZ(9,"th",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_quantity").value,"order_by_quantity"))}),e._uU(10," Quantity "),e._UZ(11,"pek-sort-icon",44),e.qZA(),e.TgZ(12,"th",47),e._uU(13,"UOM"),e.qZA(),e.TgZ(14,"th",48),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_category").value,"order_by_category"))}),e._uU(15," Category "),e._UZ(16,"pek-sort-icon",44),e.qZA(),e.TgZ(17,"th",49),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_area").value,"order_by_area"))}),e._uU(18," Area "),e._UZ(19,"pek-sort-icon",44),e.qZA(),e.TgZ(20,"th",50),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_locator").value,"order_by_locator"))}),e._uU(21," Locator "),e._UZ(22,"pek-sort-icon",44),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("value",t.searchForm.get("order_by_code").value),e.xp6(3),e.Q6J("value",t.searchForm.get("order_by_name").value),e.xp6(3),e.Q6J("value",t.searchForm.get("order_by_quantity").value),e.xp6(5),e.Q6J("value",t.searchForm.get("order_by_category").value),e.xp6(3),e.Q6J("value",t.searchForm.get("order_by_area").value),e.xp6(3),e.Q6J("value",t.searchForm.get("order_by_locator").value)}}function Ye(o,a){1&o&&(e.TgZ(0,"b"),e._uU(1,"(S)"),e.qZA())}function Ee(o,a){1&o&&(e.TgZ(0,"b"),e._uU(1,"(T)"),e.qZA())}function He(o,a){if(1&o&&(e.TgZ(0,"a",64),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("href",n.link+"production/orders/order/"+t.order_id,e.LSH),e.xp6(1),e.hij("",t.order_id," ")}}function $e(o,a){if(1&o&&(e.TgZ(0,"a",64),e._uU(1),e.qZA()),2&o){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("href",n.link+"outsource/outsource-chain/products/"+t.order_id,e.LSH),e.xp6(1),e.hij("",t.order_id," ")}}function We(o,a){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,He,2,2,"a",63),e.YNc(2,$e,2,2,"a",63),e.qZA()),2&o){const t=a.$implicit;e.xp6(1),e.Q6J("ngIf",3===t.accounting_type),e.xp6(1),e.Q6J("ngIf",2===t.accounting_type)}}function Ge(o,a){if(1&o&&(e.TgZ(0,"span",60)(1,"b"),e._uU(2,"In Use"),e.qZA(),e.TgZ(3,"div",61)(4,"p"),e._uU(5,"In use by orders:"),e.qZA(),e.YNc(6,We,3,2,"div",62),e.qZA()()),2&o){const t=e.oxw().$implicit;e.xp6(6),e.Q6J("ngForOf",t.used_by_order)}}function Be(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null!=t.nomenclature.category&&null!=t.nomenclature.category.unit_of_measure&&t.nomenclature.category.unit_of_measure.symbol?null==t.nomenclature.category||null==t.nomenclature.category.unit_of_measure?null:t.nomenclature.category.unit_of_measure.symbol:"Pcs"," ")}}function je(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null!=t.nomenclature.root_category&&null!=t.nomenclature.root_category.unit_of_measure&&t.nomenclature.root_category.unit_of_measure.symbol?null==t.nomenclature.root_category||null==t.nomenclature.root_category.unit_of_measure?null:t.nomenclature.root_category.unit_of_measure.symbol:"Pcs"," ")}}function Ve(o,a){if(1&o&&(e.ynx(0),e.YNc(1,Be,2,1,"ng-container",55),e.YNc(2,je,2,1,"ng-container",55),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Q6J("ngIf",t.nomenclature.category),e.xp6(1),e.Q6J("ngIf",t.nomenclature.root_category)}}function De(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1," Pcs "),e.qZA())}function ze(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.area_locator.area.name)}}function Ke(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.area_locator.name)}}function Xe(o,a){if(1&o&&(e.TgZ(0,"tr",51)(1,"td",52),e._uU(2),e.qZA(),e.TgZ(3,"td",53),e._uU(4),e.qZA(),e.TgZ(5,"td",54),e.YNc(6,Ye,2,0,"b",55),e.YNc(7,Ee,2,0,"b",55),e._uU(8),e.YNc(9,Ge,7,1,"span",56),e.qZA(),e.TgZ(10,"td",57),e._uU(11),e.qZA(),e.TgZ(12,"td",47),e.YNc(13,Ve,3,2,"ng-container",55),e.YNc(14,De,2,0,"span",55),e.qZA(),e.TgZ(15,"td",58),e._uU(16),e.qZA(),e.TgZ(17,"td"),e.YNc(18,ze,2,1,"ng-container",55),e.qZA(),e.TgZ(19,"td",59),e.YNc(20,Ke,2,1,"ng-container",55),e.qZA()()),2&o){const t=a.$implicit,n=a.rowIndex,r=e.oxw();e.Q6J("pSelectableRow",t)("pRowToggler",t),e.xp6(2),e.hij(" ",10*(r.searchForm.get("page").value-1)+n+1," "),e.xp6(2),e.hij(" ",t.nomenclature.code," "),e.xp6(2),e.Q6J("ngIf","1"===t.nomenclature.bulk_or_serial),e.xp6(1),e.Q6J("ngIf",t.nomenclature.has_technical_equipment),e.xp6(1),e.hij(" ",t.nomenclature.name," "),e.xp6(1),e.Q6J("ngIf",t.used_by_order&&t.used_by_order.length>0),e.xp6(2),e.hij(" ",t.total_area_locator_quantity," "),e.xp6(2),e.Q6J("ngIf",t.nomenclature.category||t.nomenclature.root_category),e.xp6(1),e.Q6J("ngIf",!t.nomenclature.category&&!t.nomenclature.root_category),e.xp6(2),e.AsE(" ",null==t.nomenclature.category?null:t.nomenclature.category.name," ",null==t.nomenclature.root_category?null:t.nomenclature.root_category.name," "),e.xp6(2),e.Q6J("ngIf",t.area_locator),e.xp6(2),e.Q6J("ngIf",t.area_locator)}}function et(o,a){1&o&&e._UZ(0,"i",67)}function tt(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function ot(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td",65),e.YNc(2,et,1,0,"i",66),e.YNc(3,tt,2,0,"span",55),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.uIk("colspan",9),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function nt(o,a){1&o&&(e.TgZ(0,"div",68),e._UZ(1,"i",67),e.qZA())}function rt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",69)(1,"p-paginator",70,71),e.NdJ("onPageChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.paginate(r))}),e.qZA(),e.TgZ(3,"p-button",72),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowAll())}),e._uU(4," All "),e.qZA()()}if(2&o){const t=e.oxw();e.ekj("paginator-wrapper_hide",0===t.products.length),e.xp6(1),e.Q6J("rows",10)("totalRecords",t.countProducts)}}function at(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",73)(1,"p-button",74),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowPartial())}),e._uU(2," Return pagination "),e.qZA()()}}let it=(()=>{class o{constructor(t,n,r){this.fb=t,this.warehouseProductService=n,this.instrumentAndToolsService=r,this.link=x.N.link_url+"dash/",this.searchForm=this.fb.group({name:[null],code:[null],description:[null],area:[null],category:[null],root_categories:[null],order_by_code:[null],order_by_name:[null],order_by_quantity:[null],order_by_category:[null],order_by_area:[null],order_by_locator:[null],exclude_zero:[null],area_locator:{value:null,disabled:!0},type:[null],acceptedByInvoices:[null],page:[1]}),this.query=[{name:"page",value:this.searchForm.get("page").value},{name:"paginated",value:!0},{name:"at_area",value:!1}],this.tableScrollHeight="29.75rem",this.isHideFilters=!1,this.isShowAll=!1,this.isLoading=!1,this.isStartOnePage=!1,this.selectedProduct=[],this.queryKey="name:null/code:null/description:null/type:null/acceptedByInvoices:null/area:null/area_locator:null/category:null",this.products=[],this.countProducts=0,this.destroy$=new g.x}ngOnInit(){}ngAfterViewInit(){(0,U.R)(this.searchBoxName.nativeElement,"keyup").pipe((0,C.b)(()=>this.selectedProduct=null),(0,v.U)(()=>this.searchBoxName.nativeElement.value),(0,k.b)(350)).subscribe(()=>{this.searchProducts()}),(0,U.R)(this.searchBoxCode.nativeElement,"keyup").pipe((0,C.b)(()=>this.selectedProduct=null),(0,v.U)(()=>this.searchBoxCode.nativeElement.value),(0,k.b)(350)).subscribe(()=>{this.searchProducts()})}onSelectCategory(t){t?this.searchForm.get("category").patchValue(t.id):this.searchForm.get("category").patchValue(null),this.searchProducts()}searchProducts(){this.isLoading=!0,this.destroy$.next(!0),this.selectedProduct=[];const t=`name:${this.searchForm.get("name").value}/code:${this.searchForm.get("code").value}/description:${this.searchForm.get("description").value}/type:${this.searchForm.get("type").value}/acceptedByInvoices:${this.searchForm.get("acceptedByInvoices").value}/area:${this.searchForm.get("area").value}/area_locator:${this.searchForm.get("area_locator").value}/category:${this.searchForm.get("category").value}`;t!==this.queryKey&&(this.queryKey=t,this.searchForm.get("page").patchValue(1),this.isStartOnePage=!0),this.query=[],this.isShowAll||(this.query=[{name:"paginated",value:"true"},{name:"page",value:this.searchForm.get("page").value}]),this.query.push({name:"at_area",value:!0}),this.searchForm.get("name").value&&this.query.push({name:"name",value:this.searchForm.get("name").value.replace(/\+/g,"%2b")}),this.searchForm.get("code").value&&this.query.push({name:"code",value:this.searchForm.get("code").value}),this.searchForm.get("description").value&&this.query.push({name:"description",value:this.searchForm.get("description").value}),this.searchForm.get("type").value&&this.query.push({name:"type",value:this.searchForm.get("type").value}),this.searchForm.get("area").value&&this.query.push({name:"area",value:this.searchForm.get("area").value}),this.searchForm.get("area_locator").value&&this.query.push({name:"area_locator",value:this.searchForm.get("area_locator").value}),this.searchForm.get("category").value&&this.query.push({name:"category",value:this.searchForm.get("category").value}),this.searchForm.get("root_categories").value&&this.query.push({name:"root_categories",value:this.searchForm.get("root_categories").value}),null!==this.searchForm.get("acceptedByInvoices").value&&this.query.push({name:"accepted_by_invoices",value:this.searchForm.get("acceptedByInvoices").value}),null!==this.searchForm.get("exclude_zero").value&&this.query.push({name:"exclude_zero",value:this.searchForm.get("exclude_zero").value});const n=this.prepareSortingField();n&&this.query.push({name:"ordering",value:n}),this.isShowAll?(this.searchForm.get("page").patchValue(1),this.getProducts()):this.getProductsForPagination()}getProductsForPagination(){this.warehouseProductService.getGroupedPagination(this.query).pipe((0,u.R)(this.destroy$)).subscribe(t=>{t.results.forEach((n,r)=>{n.nomenclature||(n.nomenclature={id:n.nomenclature_id,code:n.code,name:n.name,type:n.type,category:n.category,description:n.description}),n.checkedForGeneration=!1,n.uid=r}),this.products=t.results,this.countProducts=t.count,this.isStartOnePage&&this.paginator?.changePage(0),this.isStartOnePage=!1,this.isLoading=!1})}prepareSortingField(){let t="";return null!==this.searchForm.get("order_by_code").value&&(this.searchForm.get("order_by_code").value?t+="-nomenclature__code,":t+="nomenclature__code,"),null!==this.searchForm.get("order_by_name").value&&(this.searchForm.get("order_by_name").value?t+="-nomenclature__name,":t+="nomenclature__name,"),null!==this.searchForm.get("order_by_category").value&&(this.searchForm.get("order_by_category").value?t+="-nomenclature__category__name,":t+="nomenclature__category__name,"),null!==this.searchForm.get("order_by_area").value&&(this.searchForm.get("order_by_area").value?t+="-area_locator__area__name,":t+="area_locator__area__name,"),null!==this.searchForm.get("order_by_locator").value&&(this.searchForm.get("order_by_locator").value?t+="-area_locator__name,":t+="area_locator__name,"),null!==this.searchForm.get("order_by_quantity").value&&(this.searchForm.get("order_by_quantity").value?t+="-total_area_locator_quantity,":t+="total_area_locator_quantity,"),t}toggleFilterVisibility(){this.isHideFilters=!this.isHideFilters,this.setTableScrollHeight()}setTableScrollHeight(){!this.isHideFilters||this.isShowAll?this.isHideFilters&&this.isShowAll?this.tableScrollHeight="18.25rem":this.isHideFilters||!this.isShowAll?this.isHideFilters||this.isShowAll||(this.tableScrollHeight="29.75rem"):this.tableScrollHeight="27.5rem":this.tableScrollHeight="20.875rem"}onSelectProductStructureCategory(t){t?this.searchForm.get("root_categories").patchValue(t.join(",")):this.searchForm.get("root_categories").patchValue(""),this.searchProducts()}selectWarehouse(t){let n=null;t&&(n=t),this.searchForm.get("area").patchValue(n),this.searchProducts()}onSelectLocator(t){this.searchForm.get("area_locator").patchValue(t),this.searchProducts()}getProducts(){this.warehouseProductService.getGrouped(this.query).pipe((0,u.R)(this.destroy$)).subscribe(t=>{t.forEach((n,r)=>{n.nomenclature||(n.nomenclature={id:n.nomenclature_id,code:n.code,name:n.name,type:n.type,category:n.category,description:n.description}),n.checkedForGeneration=!1,n.uid=r}),this.products=t,this.countProducts=t.length,this.isStartOnePage&&this.paginator?.changePage(0),this.isStartOnePage=!1,this.isLoading=!1})}onShowAll(){this.isShowAll=!0,this.setTableScrollHeight(),this.searchProducts()}onShowPartial(){this.isShowAll=!1,this.setTableScrollHeight(),this.searchProducts()}paginate(t){this.isStartOnePage||(this.searchForm.get("page").patchValue(t.page+1),this.searchProducts())}returnToQc(){this.instrumentAndToolsService.productWriteOfReturnModal(this.selectedProduct,"warehouseReturn").subscribe(()=>{this.selectedProduct=null,this.searchProducts()})}writeOff(){this.instrumentAndToolsService.productWriteOfReturnModal(this.selectedProduct,"writeOff").subscribe(()=>{this.selectedProduct=null,this.searchProducts()})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}onMoveProduct(){this.instrumentAndToolsService.productMoveToAreaLocatorModal(this.selectedProduct[0]).subscribe(t=>{t&&this.searchProducts()})}sorting(t,n){this.resetAllSorting(),null===t?this.searchForm.get(n).patchValue(!1):!1===t?this.searchForm.get(n).patchValue(!0):!0===t&&this.searchForm.get(n).patchValue(null),this.searchProducts()}resetAllSorting(){this.searchForm.get("order_by_code").setValue(null),this.searchForm.get("order_by_name").setValue(null),this.searchForm.get("order_by_quantity").setValue(null),this.searchForm.get("order_by_category").setValue(null),this.searchForm.get("order_by_area").setValue(null),this.searchForm.get("order_by_locator").setValue(null)}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(i.qu),e.Y36(q.t),e.Y36(y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-instruments-and-tools-list"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ue,5),e.Gf(Oe,5),e.Gf(Pe,5)),2&t){let r;e.iGM(r=e.CRH())&&(n.paginator=r.first),e.iGM(r=e.CRH())&&(n.searchBoxName=r.first),e.iGM(r=e.CRH())&&(n.searchBoxCode=r.first)}},decls:63,vars:24,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],["class","page__tools",4,"ngIf"],[1,"page__content"],[1,"page__card"],[1,"warehouse-items"],[1,"warehouse-items__left"],[1,"form-group"],[3,"categorySelected"],[1,"warehouse-items__right"],[1,"page__table"],[1,"filters-visibility"],[1,"filters-visibility__header"],["tooltipPosition","left",1,"icon","pi",3,"pTooltip","click"],[1,"warehouse-items__form","mb-3",3,"formGroup"],[1,"row"],[1,"col-4"],["formControlName","code","pInputText","",1,"form-control"],["searchBoxCode",""],["formControlName","name","pInputText","",1,"form-control"],["searchBoxName",""],[1,"col-6"],[3,"showClear","valueChange"],[3,"isDisabled","areaId","valueChange"],[3,"isAllIds","choiceCategoryFolAllIds"],[1,"col-1"],["formControlName","exclude_zero",1,"mt-1",3,"binary","ngModelChange"],[1,"table-pagination-preloader"],["selectionMode","multiple","dataKey","uid",3,"scrollHeight","scrollable","rows","selection","value","selectionChange"],["dt",""],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","pagination-preloader pagination-preloader_bord",4,"ngIf"],["class","paginator-wrapper",3,"paginator-wrapper_hide",4,"ngIf"],["class","paginator-return-pagination",4,"ngIf"],[1,"page__tools"],["pButton","","type","button","label","Move",1,"mr-2",3,"disabled","click"],["pButton","","type","button","label","Return To Warehouse",1,"mr-2",3,"click"],["pButton","","type","button","label","Write Off",1,"mr-2",3,"click"],[1,"index-header","text-center",2,"width","5%"],["pSortableColumn","nomenclature.code",1,"sort-label",2,"width","15%",3,"click"],[3,"value"],["pSortableColumn","nomenclature.name",1,"sort-label",2,"width","15%",3,"click"],["pSortableColumn","nomenclature.total_area_locator_quantity",1,"text-center","sort-label",2,"width","10%",3,"click"],[1,"text-center",2,"width","6%"],["pSortableColumn","nomenclature.category.name",1,"text-center","sort-label",2,"width","13%",3,"click"],["pSortableColumn","area_locator.area.name",1,"text-center","sort-label",2,"width","12%",3,"click"],["pSortableColumn","area_locator.name",1,"text-center","sort-label",2,"width","14%",3,"click"],[3,"pSelectableRow","pRowToggler"],[1,"text-center",2,"width","5%"],[2,"width","15%"],[1,"in-use",2,"width","15%"],[4,"ngIf"],["class","text-danger",4,"ngIf"],[1,"text-center",2,"width","10%"],[1,"text-center",2,"width","13%"],[1,"text-center",2,"width","14%"],[1,"text-danger"],[1,"in-use-info"],[4,"ngFor","ngForOf"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"],[1,"pagination-preloader","pagination-preloader_bord"],[1,"paginator-wrapper"],[3,"rows","totalRecords","onPageChange"],["paginator",""],["type","button","styleClass","p-button-text",1,"paginator-all",3,"click"],[1,"paginator-return-pagination"],["type","button","styleClass","p-button-text",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Instruments And Tools"),e.qZA()(),e.YNc(6,Qe,5,1,"div",4),e.qZA()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"pek-categories-tree-picker",10),e.NdJ("categorySelected",function(s){return n.onSelectCategory(s)}),e.qZA()()(),e.TgZ(13,"div",11)(14,"div",12)(15,"div",13),e._UZ(16,"div",14),e.TgZ(17,"button",15),e.NdJ("click",function(){return n.toggleFilterVisibility()}),e.qZA(),e.TgZ(18,"form",16)(19,"div",17)(20,"div",18)(21,"div",9)(22,"label"),e._uU(23,"Code"),e.qZA(),e._UZ(24,"input",19,20),e.qZA()(),e.TgZ(26,"div",18)(27,"div",9)(28,"label"),e._uU(29,"Name"),e.qZA(),e._UZ(30,"input",21,22),e.qZA()(),e.TgZ(32,"div",18)(33,"div",17)(34,"div",23)(35,"div",9)(36,"label"),e._uU(37,"Area"),e.qZA(),e.TgZ(38,"pek-area-picker",24),e.NdJ("valueChange",function(s){return n.selectWarehouse(s)}),e.qZA()()(),e.TgZ(39,"div",23)(40,"div",9)(41,"label"),e._uU(42,"Area Locator"),e.qZA(),e.TgZ(43,"pek-area-locator-picker",25),e.NdJ("valueChange",function(s){return n.onSelectLocator(s)}),e.qZA()()()()(),e.TgZ(44,"div",18)(45,"div",9)(46,"label"),e._uU(47,"Product Structure Category"),e.qZA(),e.TgZ(48,"pek-product-structure-category-picker",26),e.NdJ("choiceCategoryFolAllIds",function(s){return n.onSelectProductStructureCategory(s)}),e.qZA()()(),e.TgZ(49,"div",27)(50,"div",9)(51,"label"),e._uU(52,"Exclude Zero's"),e.qZA(),e.TgZ(53,"p-checkbox",28),e.NdJ("ngModelChange",function(){return n.searchProducts()}),e.qZA()()()()()(),e.TgZ(54,"div",29)(55,"p-table",30,31),e.NdJ("selectionChange",function(s){return n.selectedProduct=s}),e.YNc(57,Me,23,6,"ng-template",32),e.YNc(58,Xe,21,15,"ng-template",33),e.YNc(59,ot,4,3,"ng-template",34),e.qZA(),e.YNc(60,nt,2,0,"div",35),e.qZA(),e.YNc(61,rt,5,4,"div",36),e.YNc(62,at,3,0,"div",37),e.qZA()()()()()),2&t&&(e.xp6(3),e.Q6J("module","instruments")("isActive",!0),e.xp6(3),e.Q6J("ngIf",n.selectedProduct&&n.selectedProduct.length),e.xp6(9),e.ekj("filters-visibility_hide",n.isHideFilters),e.xp6(2),e.ekj("pi-angle-double-up",!n.isHideFilters)("pi-angle-double-down",n.isHideFilters),e.Q6J("pTooltip",n.isHideFilters?"Expand Filters":"Collapse Filters"),e.xp6(1),e.Q6J("formGroup",n.searchForm),e.xp6(20),e.Q6J("showClear",!0),e.xp6(5),e.Q6J("isDisabled",!n.searchForm.get("area").value)("areaId",n.searchForm.get("area").value),e.xp6(5),e.Q6J("isAllIds",!0),e.xp6(5),e.Q6J("binary",!0),e.xp6(2),e.Q6J("scrollHeight","calc(100vh - "+n.tableScrollHeight+")")("scrollable",!0)("rows",10)("selection",n.selectedProduct)("value",n.products),e.xp6(5),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",!n.isShowAll),e.xp6(1),e.Q6J("ngIf",n.isShowAll))},dependencies:[d.sg,d.O5,_.Hq,_.zx,b.o,T.jx,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,Le.u,Je.XZ,Re.r,m.iA,m.lQ,m.Ei,m.jB,A.D,I.D,Y.o,Q.E,O,J.A],styles:[".page__card[_ngcontent-%COMP%]{padding-top:1.25rem}.warehouse-items[_ngcontent-%COMP%]{display:flex}.warehouse-items__spinner[_ngcontent-%COMP%]{border:1px solid #dee2e6;border-radius:.625rem;height:calc(100vh - 242px);display:flex;align-items:center;justify-content:center}.warehouse-items__tree[_ngcontent-%COMP%]{bottom:0;top:0;z-index:2;width:100%;height:calc(100vh - 242px)}.warehouse-items__tree-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%}.warehouse-items__left[_ngcontent-%COMP%]{width:24rem;flex:0 0 24rem}.warehouse-items__left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{width:100%;height:100%;padding:0}.warehouse-items__left[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{position:relative;top:-.125rem}.warehouse-items__left[_ngcontent-%COMP%]  .p-tree{overflow:auto;height:100%;top:0;bottom:0;width:100%;border-radius:.625rem!important}.warehouse-items__left[_ngcontent-%COMP%]  .p-tree::-webkit-scrollbar-thumb{border-radius:.625rem;background-color:#d1d2d8}.warehouse-items__left[_ngcontent-%COMP%]  .p-tree::-webkit-scrollbar{cursor:auto;width:.5rem;background-color:#f8f9fa}.warehouse-items__right[_ngcontent-%COMP%]{width:100%;margin-left:1.75rem}.warehouse-items__right[_ngcontent-%COMP%]  .p-datatable-header{padding:0 0 1rem!important}.warehouse-items__form[_ngcontent-%COMP%]{margin-top:-.625rem}.filters-visibility_hide[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{top:.625rem!important}.filters-visibility__header[_ngcontent-%COMP%]{min-height:1.375rem}.page__card[_ngcontent-%COMP%], .in-use[_ngcontent-%COMP%]{position:relative}.in-use[_ngcontent-%COMP%]:hover   .in-use-info[_ngcontent-%COMP%]{opacity:1;pointer-events:initial}.in-use-info[_ngcontent-%COMP%]{position:absolute;transition:.25s ease;opacity:0;background:#fff;z-index:3;width:9rem;right:-3rem;top:-1.5rem;padding:.75rem 1rem;box-shadow:0 0 7px 1px #00000026;border-radius:.5rem;pointer-events:none}"]}),o})();var S=l(7427),N=l(615);const st=["paginator"];function lt(o,a){1&o&&e.GkF(0)}function ct(o,a){1&o&&e.GkF(0)}function ut(o,a){1&o&&(e.TgZ(0,"colgroup"),e._UZ(1,"col",26),e.qZA())}function pt(o,a){1&o&&(e.TgZ(0,"tr")(1,"th",27),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",28),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",29),e._uU(6,"Description"),e.qZA()())}function dt(o,a){if(1&o&&(e.TgZ(0,"tr",30)(1,"td",31),e._uU(2),e.qZA(),e.TgZ(3,"td",28),e._uU(4),e.qZA(),e.TgZ(5,"td",29),e._uU(6),e.qZA()()),2&o){const t=a.$implicit,n=a.rowIndex;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description)}}function _t(o,a){1&o&&e._UZ(0,"i",35)}function mt(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function ht(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td",32),e.YNc(2,_t,1,0,"i",33),e.YNc(3,mt,2,0,"span",34),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.uIk("colspan",9),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function gt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",36)(1,"p-paginator",37,38),e.NdJ("onPageChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.paginate(r))}),e.qZA(),e.TgZ(3,"p-button",39),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowAll())}),e._uU(4," All "),e.qZA()()}if(2&o){const t=e.oxw();e.ekj("paginator-wrap",t.isLoading),e.xp6(1),e.Q6J("rows",10)("totalRecords",t.count)}}function ft(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",40)(1,"p-button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowPartial())}),e._uU(2," Return pagination "),e.qZA()()}}function vt(o,a){if(1&o&&(e.TgZ(0,"div",42),e._UZ(1,"p-menubar",43),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.ekj("disabled",!t.selectedNode),e.Q6J("model",t.menuItems)}}let bt=(()=>{class o{constructor(t,n,r,s,h,Z){this.areasService=t,this.instrumentAndToolsService=n,this.fb=r,this.modalService=s,this.router=h,this.activatedRoute=Z,this.isLoading=!0,this.destroy$=new g.x,this.isStartOnePage=!1,this.searchForm=this.fb.group({page:[1]}),this.menuItems=[{label:"Selected Locator",items:[{label:"Locators",icon:"pi pi-bars",command:()=>this.editLocators()},{label:"Edit",icon:"pi pi-pencil",command:()=>this.editArea()},{label:"Remove",icon:"pi pi-trash",command:()=>this.deleteArea()}]}],this.query=[{name:"paginated",value:!0},{name:"page",value:this.searchForm.get("page").value}]}ngOnInit(){this.search()}getAreas(){this.selectedNode=null,this.areasService.get().pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.areas=t,this.isLoading=!1})}prepareQuery(){this.query=[],this.query=[{name:"page",value:this.searchForm.get("page").value},{name:"paginated",value:!0}]}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}search(){this.prepareQuery(),this.isShowAll?(this.searchForm.get("page").patchValue(1),this.getAll()):this.getPaginated()}getAll(){this.selectedNode=null,this.areasService.get().pipe((0,p.q)(1)).pipe((0,u.R)(this.destroy$)).subscribe(t=>{this.areas=t,this.selectedNode=null,this.isStartOnePage&&(this.paginator?.changePage(0),this.isLoading=!1)})}getPaginated(){this.areasService.get_paginated(this.query).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.count=t.count,this.areas=t.results,this.selectedNode=null})}paginate(t){this.isStartOnePage||(this.searchForm.get("page").patchValue(t.page+1),this.search())}onShowAll(){this.isShowAll=!0,this.search()}onShowPartial(){this.isShowAll=!1,this.search()}editArea(){this.instrumentAndToolsService.createEditAreaModal("edit",this.selectedNode).pipe((0,u.R)(this.destroy$)).subscribe(t=>{this.search()})}deleteArea(){this.modalService.confirm("danger","Confirm").pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{t&&this.areasService.delete(this.selectedNode).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(n=>{this.search()})})}createArea(){this.instrumentAndToolsService.createEditAreaModal("create").pipe((0,u.R)(this.destroy$)).subscribe(t=>{this.search()})}editLocators(){this.router.navigate(["locators",this.selectedNode.id],{relativeTo:this.activatedRoute})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(w),e.Y36(y),e.Y36(i.qu),e.Y36(S.Z),e.Y36(f.F0),e.Y36(f.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-area-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(st,5),2&t){let r;e.iGM(r=e.CRH())&&(n.paginator=r.first)}},decls:34,vars:11,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[1,"page__tools"],["pButton","","type","button","icon","pi pi-plus","label","Create Area",3,"click"],[1,"page__content"],[1,"page__card"],[1,"filters-visibility"],[1,"filters-visibility__header"],[4,"ngTemplateOutlet"],[1,"form","mb-3",3,"formGroup"],[1,"row"],[1,"col-3"],[1,"col-2"],[1,"col-10"],[1,"page__table"],["selectionMode","single","scrollHeight","calc(100vh - 335px)",3,"scrollable","rows","selection","value","selectionChange"],["dt",""],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","paginator-wrapper",3,"paginator-wrap",4,"ngIf"],["class","paginator-return-pagination",4,"ngIf"],["actionButtons",""],[1,"index-header"],[1,"index-header",2,"width","5%"],[2,"width","45%"],[2,"width","50%"],[3,"pSelectableRow"],[2,"width","5%"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"],[1,"paginator-wrapper"],[3,"rows","totalRecords","onPageChange"],["paginator",""],["type","button","styleClass","p-button-text",1,"paginator-all",3,"click"],[1,"paginator-return-pagination"],["type","button","styleClass","p-button-text",3,"click"],[1,"action-buttons"],[1,"ml-auto",3,"model"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Areas"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return n.createArea()}),e.qZA()()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e.YNc(12,lt,1,0,"ng-container",10),e.qZA(),e.TgZ(13,"form",11)(14,"div",12),e._UZ(15,"div",13)(16,"div",13)(17,"div",14)(18,"div",14)(19,"div",14)(20,"div",15),e.TgZ(21,"div",14),e.YNc(22,ct,1,0,"ng-container",10),e.qZA()()()(),e.TgZ(23,"div",16)(24,"p-table",17,18),e.NdJ("selectionChange",function(s){return n.selectedNode=s}),e.YNc(26,ut,2,0,"ng-template",19),e.YNc(27,pt,7,0,"ng-template",20),e.YNc(28,dt,7,4,"ng-template",21),e.YNc(29,ht,4,3,"ng-template",22),e.qZA()(),e.YNc(30,gt,5,4,"div",23),e.YNc(31,ft,3,0,"div",24),e.qZA()(),e.YNc(32,vt,2,3,"ng-template",null,25,e.W1O)),2&t){const r=e.MAs(33);e.xp6(3),e.Q6J("module","instruments")("isActive",!0),e.xp6(9),e.Q6J("ngTemplateOutlet",r),e.xp6(1),e.Q6J("formGroup",n.searchForm),e.xp6(9),e.Q6J("ngTemplateOutlet",r),e.xp6(2),e.Q6J("scrollable",!0)("rows",10)("selection",n.selectedNode)("value",n.areas),e.xp6(6),e.Q6J("ngIf",!n.isShowAll),e.xp6(1),e.Q6J("ngIf",n.isShowAll)}},dependencies:[d.O5,d.tP,_.Hq,_.zx,T.jx,i._Y,i.JL,i.sg,N.nm,m.iA,m.Ei,A.D,I.D]}),o})();const Tt=["paginator"];function yt(o,a){1&o&&e.GkF(0)}function Ct(o,a){1&o&&e.GkF(0)}function At(o,a){1&o&&(e.TgZ(0,"colgroup"),e._UZ(1,"col",26),e.qZA())}function Zt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",27),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",28),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_id").value,"order_by_id"))}),e._uU(4,"ID "),e._UZ(5,"pek-sort-icon",29),e.qZA(),e.TgZ(6,"th",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_area").value,"order_by_area"))}),e._uU(7,"Area "),e._UZ(8,"pek-sort-icon",29),e.qZA(),e.TgZ(9,"th",30),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_locator").value,"order_by_locator"))}),e._uU(10,"Locator "),e._UZ(11,"pek-sort-icon",29),e.qZA(),e.TgZ(12,"th",31),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_created").value,"order_by_created"))}),e._uU(13,"Creation Date "),e._UZ(14,"pek-sort-icon",29),e.qZA(),e.TgZ(15,"th",31),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.sorting(r.searchForm.get("order_by_completed").value,"order_by_completed"))}),e._uU(16,"Completion Date "),e._UZ(17,"pek-sort-icon",29),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("value",t.searchForm.get("order_by_id").value),e.xp6(3),e.Q6J("value",t.searchForm.get("order_by_area").value),e.xp6(3),e.Q6J("value",t.searchForm.get("order_by_locator").value),e.xp6(3),e.Q6J("value",t.searchForm.get("order_by_created").value),e.xp6(3),e.Q6J("value",t.searchForm.get("order_by_completed").value)}}function xt(o,a){1&o&&(e.TgZ(0,"span",36),e._uU(1,"Delivered"),e.qZA())}function qt(o,a){if(1&o&&(e.TgZ(0,"tr",32)(1,"td",27),e._uU(2),e.qZA(),e.TgZ(3,"td",27),e._uU(4),e.qZA(),e.TgZ(5,"td",33),e._uU(6),e.qZA(),e.TgZ(7,"td",33),e._uU(8),e.qZA(),e.TgZ(9,"td",34),e._uU(10),e.ALo(11,"date"),e.YNc(12,xt,2,0,"span",35),e.qZA(),e.TgZ(13,"td",34),e._uU(14),e.ALo(15,"date"),e.qZA()()),2&o){const t=a.$implicit,n=a.rowIndex,r=e.oxw();e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(10*(r.searchForm.get("page").value-1)+n+1),e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.area_locator.area.name),e.xp6(2),e.Oqu(t.area_locator.name),e.xp6(2),e.hij(" ",e.xi3(11,8,t.created,"dd/MM/yyyy HH:mm:ss")," "),e.xp6(2),e.Q6J("ngIf",t.has_reserved_items),e.xp6(2),e.Oqu(e.xi3(15,11,t.completed,"dd/MM/yyyy HH:mm:ss"))}}function wt(o,a){1&o&&e._UZ(0,"i",40)}function It(o,a){1&o&&(e.TgZ(0,"span"),e._uU(1,"No Records Found"),e.qZA())}function St(o,a){if(1&o&&(e.TgZ(0,"tr")(1,"td",37),e.YNc(2,wt,1,0,"i",38),e.YNc(3,It,2,0,"span",39),e.qZA()()),2&o){const t=e.oxw();e.xp6(1),e.uIk("colspan",9),e.xp6(1),e.Q6J("ngIf",t.isLoading),e.xp6(1),e.Q6J("ngIf",!t.isLoading)}}function Nt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",41)(1,"p-paginator",42,43),e.NdJ("onPageChange",function(r){e.CHM(t);const s=e.oxw();return e.KtG(s.paginate(r))}),e.qZA(),e.TgZ(3,"p-button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowAll())}),e._uU(4," All "),e.qZA()()}if(2&o){const t=e.oxw();e.ekj("paginator-wrap",t.isLoading),e.xp6(1),e.Q6J("rows",10)("totalRecords",t.count)}}function kt(o,a){if(1&o){const t=e.EpF();e.TgZ(0,"div",45)(1,"p-button",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onShowPartial())}),e._uU(2," Return pagination "),e.qZA()()}}function Ft(o,a){if(1&o&&(e.TgZ(0,"div",47),e._UZ(1,"p-menubar",48),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.ekj("disabled",!t.selectedNode),e.Q6J("model",t.menuItems)}}let Lt=(()=>{class o{constructor(t,n,r,s,h,Z){this.toolOrderService=t,this.instrumentAndToolsService=n,this.fb=r,this.modalService=s,this.router=h,this.activatedRoute=Z,this.isLoading=!0,this.destroy$=new g.x,this.isStartOnePage=!1,this.searchForm=this.fb.group({page:[1],order_by_area:[null],order_by_locator:[null],order_by_id:[null],order_by_created:[null],order_by_completed:[null]}),this.menuItems=[{label:"Selected Tool Request",items:[{label:"Nomenclatures",icon:"pi pi-bars",command:()=>this.editNomenclatures()},{label:"Edit",icon:"pi pi-pencil",command:()=>this.edit()},{label:"Remove",icon:"pi pi-trash",command:()=>this.deleteRequest()}]}],this.query=[{name:"paginated",value:!0},{name:"is_completed",value:!1},{name:"page",value:this.searchForm.get("page").value}]}ngOnInit(){this.search()}prepareQuery(){this.query=[],this.query=[{name:"is_completed",value:!1},{name:"page",value:this.searchForm.get("page").value},{name:"paginated",value:!0}];const t=this.prepareSortingField();t&&this.query.push({name:"ordering",value:t})}prepareSortingField(){let t="";return null!==this.searchForm.get("order_by_id").value&&(this.searchForm.get("order_by_id").value?t+="-id":t+="id"),null!==this.searchForm.get("order_by_area").value&&(this.searchForm.get("order_by_area").value?t+="-area_locator__area__name":t+="area_locator__area__name"),null!==this.searchForm.get("order_by_locator").value&&(this.searchForm.get("order_by_locator").value?t+="-area_locator__name":t+="area_locator__name"),null!==this.searchForm.get("order_by_created").value&&(this.searchForm.get("order_by_created").value?t+="-created":t+="created"),null!==this.searchForm.get("order_by_completed").value&&(this.searchForm.get("order_by_completed").value?t+="-completed":t+="completed"),t}sorting(t,n){this.resetAllSorting(),null===t?this.searchForm.get(n).patchValue(!1):!1===t?this.searchForm.get(n).patchValue(!0):!0===t&&this.searchForm.get(n).patchValue(null),this.search()}resetAllSorting(){this.searchForm.get("order_by_area").setValue(null),this.searchForm.get("order_by_locator").setValue(null),this.searchForm.get("order_by_id").setValue(null),this.searchForm.get("order_by_created").setValue(null),this.searchForm.get("order_by_completed").setValue(null)}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}search(){this.prepareQuery(),this.isShowAll?(this.searchForm.get("page").patchValue(1),this.getAll()):this.getPaginated()}getAll(){this.selectedNode=null,this.toolOrderService.get([{name:"is_completed",value:!1}]).pipe((0,p.q)(1)).pipe((0,u.R)(this.destroy$)).subscribe(t=>{this.requests=t,this.selectedNode=null,this.isStartOnePage&&(this.paginator?.changePage(0),this.isLoading=!1)})}getPaginated(){this.toolOrderService.get_paginated(this.query).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.count=t.count,this.requests=t.results,this.selectedNode=null})}paginate(t){this.isStartOnePage||(this.searchForm.get("page").patchValue(t.page+1),this.search())}onShowAll(){this.isShowAll=!0,this.search()}onShowPartial(){this.isShowAll=!1,this.search()}edit(){this.instrumentAndToolsService.createEditToolRequestModal("edit",this.selectedNode).pipe((0,u.R)(this.destroy$)).subscribe(t=>{this.search()})}deleteRequest(){this.modalService.confirm("danger","Confirm").pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{t&&this.toolOrderService.delete(this.selectedNode).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(n=>{this.search()})})}createArea(){this.instrumentAndToolsService.createEditToolRequestModal("create").pipe((0,u.R)(this.destroy$)).subscribe(t=>{this.router.navigate(["requests",t.id],{relativeTo:this.activatedRoute})})}editNomenclatures(){this.router.navigate(["requests",this.selectedNode.id],{relativeTo:this.activatedRoute})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(L.z),e.Y36(y),e.Y36(i.qu),e.Y36(S.Z),e.Y36(f.F0),e.Y36(f.gz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-tool-requests-list"]],viewQuery:function(t,n){if(1&t&&e.Gf(Tt,5),2&t){let r;e.iGM(r=e.CRH())&&(n.paginator=r.first)}},decls:34,vars:11,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[1,"page__tools"],["pButton","","type","button","icon","pi pi-plus","label","New Request",3,"click"],[1,"page__content"],[1,"page__card"],[1,"filters-visibility"],[1,"filters-visibility__header"],[4,"ngTemplateOutlet"],[1,"form","mb-3",3,"formGroup"],[1,"row"],[1,"col-3"],[1,"col-2"],[1,"col-10"],[1,"page__table"],["selectionMode","single","scrollHeight","calc(100vh - 335px)",3,"scrollable","rows","selection","value","selectionChange"],["dt",""],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["class","paginator-wrapper",3,"paginator-wrap",4,"ngIf"],["class","paginator-return-pagination",4,"ngIf"],["actionButtons",""],[1,"index-header"],[1,"text-center",2,"width","5%"],["pSortableColumn","",1,"sort-label","text-center",2,"width","5%",3,"click"],[3,"value"],["pSortableColumn","",1,"sort-label","text-center",2,"width","25%",3,"click"],["pSortableColumn","",1,"sort-label","text-center",2,"width","20%",3,"click"],[3,"pSelectableRow"],[1,"text-center",2,"width","25%"],[1,"text-center",2,"width","20%"],["class","text-success",4,"ngIf"],[1,"text-success"],[1,"text-center","p-4"],["class","pi pi-spin pi-spinner","style","font-size: 2.25rem",4,"ngIf"],[4,"ngIf"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2.25rem"],[1,"paginator-wrapper"],[3,"rows","totalRecords","onPageChange"],["paginator",""],["type","button","styleClass","p-button-text",1,"paginator-all",3,"click"],[1,"paginator-return-pagination"],["type","button","styleClass","p-button-text",3,"click"],[1,"action-buttons"],[1,"ml-auto",3,"model"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Tool Request"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",5),e.NdJ("click",function(){return n.createArea()}),e.qZA()()()(),e.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),e.YNc(12,yt,1,0,"ng-container",10),e.qZA(),e.TgZ(13,"form",11)(14,"div",12),e._UZ(15,"div",13)(16,"div",13)(17,"div",14)(18,"div",14)(19,"div",14)(20,"div",15),e.TgZ(21,"div",14),e.YNc(22,Ct,1,0,"ng-container",10),e.qZA()()()(),e.TgZ(23,"div",16)(24,"p-table",17,18),e.NdJ("selectionChange",function(s){return n.selectedNode=s}),e.YNc(26,At,2,0,"ng-template",19),e.YNc(27,Zt,18,5,"ng-template",20),e.YNc(28,qt,16,14,"ng-template",21),e.YNc(29,St,4,3,"ng-template",22),e.qZA()(),e.YNc(30,Nt,5,4,"div",23),e.YNc(31,kt,3,0,"div",24),e.qZA()(),e.YNc(32,Ft,2,3,"ng-template",null,25,e.W1O)),2&t){const r=e.MAs(33);e.xp6(3),e.Q6J("module","instruments")("isActive",!0),e.xp6(9),e.Q6J("ngTemplateOutlet",r),e.xp6(1),e.Q6J("formGroup",n.searchForm),e.xp6(9),e.Q6J("ngTemplateOutlet",r),e.xp6(2),e.Q6J("scrollable",!0)("rows",10)("selection",n.selectedNode)("value",n.requests),e.xp6(6),e.Q6J("ngIf",!n.isShowAll),e.xp6(1),e.Q6J("ngIf",n.isShowAll)}},dependencies:[d.O5,d.tP,_.Hq,_.zx,T.jx,i._Y,i.JL,i.sg,N.nm,m.iA,m.lQ,m.Ei,A.D,I.D,Y.o,d.uU]}),o})();function Jt(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.lnq("Order ID: ",t.activeOrder.id," Area: ",t.activeOrder.area_locator.area.name," Locator: ",t.activeOrder.area_locator.name,"")}}function Rt(o,a){1&o&&e.GkF(0)}function Ut(o,a){1&o&&e.GkF(0)}function Ot(o,a){1&o&&(e.TgZ(0,"colgroup"),e._UZ(1,"col",25),e.qZA())}function Pt(o,a){1&o&&(e.TgZ(0,"tr")(1,"th",26),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",27),e._uU(4,"Code"),e.qZA(),e.TgZ(5,"th",28),e._uU(6,"Name"),e.qZA(),e.TgZ(7,"th",29),e._uU(8,"Requested Quantity"),e.qZA(),e.TgZ(9,"th",29),e._uU(10,"Available Quantity"),e.qZA()())}function Qt(o,a){if(1&o&&(e.TgZ(0,"tr",30)(1,"td",31),e._uU(2),e.qZA(),e.TgZ(3,"td",27),e._uU(4),e.qZA(),e.TgZ(5,"td",28),e._uU(6),e.qZA(),e.TgZ(7,"td",29),e._uU(8),e.qZA(),e.TgZ(9,"td",29),e._uU(10),e.qZA()()),2&o){const t=a.$implicit,n=a.rowIndex;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.nomenclature.code),e.xp6(2),e.Oqu(t.nomenclature.name),e.xp6(2),e.Oqu(t.required_quantity),e.xp6(2),e.Oqu(t.nomenclature.free_quantity)}}function Mt(o,a){1&o&&(e.TgZ(0,"tr")(1,"td",32)(2,"span"),e._uU(3,"No Records Found"),e.qZA()()()),2&o&&(e.xp6(1),e.uIk("colspan",6))}function Yt(o,a){if(1&o&&(e.TgZ(0,"div",33),e._UZ(1,"p-menubar",34),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.ekj("disabled",!t.selectedNode),e.Q6J("model",t.menuItems)}}let Et=(()=>{class o{constructor(t,n,r,s,h){this.route=t,this.toolRequestService=n,this.toolOrderService=r,this.instrumentAndToolsService=s,this.modalService=h,this.orderId=this.route.snapshot.paramMap.get("orderId"),this.destroy$=new g.x,this.menuItems=[{label:"Selected",items:[{label:"Edit",icon:"pi pi-pencil",command:()=>this.edit()},{label:"Remove",icon:"pi pi-trash",command:()=>this.delete()}]}]}ngOnInit(){this.getAll(),this.getCurrentOrder()}getCurrentOrder(){this.toolOrderService.getById(+this.orderId).pipe((0,p.q)(1),(0,C.b)(t=>this.activeOrder=t),(0,u.R)(this.destroy$)).subscribe()}add(){this.instrumentAndToolsService.createEditToolRequestNomenclatureModal("create",this.activeOrder.id).subscribe(()=>{this.getAll()})}getAll(){this.selectedNode=null,this.toolRequestService.get([{name:"tool_order",value:this.orderId},{name:"is_completed",value:!1}]).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.requests=t})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}edit(){this.instrumentAndToolsService.createEditToolRequestNomenclatureModal("edit",this.activeOrder.id,this.selectedNode).subscribe(()=>{this.getAll()})}delete(){this.modalService.confirm("danger","Confirm").pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{t&&this.toolRequestService.delete(this.selectedNode).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(n=>{this.getAll()})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.gz),e.Y36(M.C),e.Y36(L.z),e.Y36(y),e.Y36(S.Z))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-request-orders-list"]],decls:33,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[4,"ngIf"],[1,"page__tools"],["pButton","","type","button","icon","pi pi-plus","label","Add Item",3,"click"],[1,"page__content"],[1,"page__card"],[1,"filters-visibility"],[1,"filters-visibility__header"],[4,"ngTemplateOutlet"],[1,"form","mb-3"],[1,"row"],[1,"col-3"],[1,"col-2"],[1,"col-10"],[1,"page__table"],["selectionMode","single","scrollHeight","calc(100vh - 335px)",3,"scrollable","rows","paginator","selection","value","selectionChange"],["dt",""],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["actionButtons",""],[1,"index-header"],[1,"index-header",2,"width","5%"],[2,"width","35%"],[2,"width","30%"],[2,"width","15%"],[3,"pSelectableRow"],[2,"width","5%"],[1,"text-center","p-5"],[1,"action-buttons"],[1,"ml-auto",3,"model"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Requests "),e.YNc(6,Jt,2,3,"ng-container",4),e.qZA()(),e.TgZ(7,"div",5)(8,"button",6),e.NdJ("click",function(){return n.add()}),e.qZA()()()(),e.TgZ(9,"div",7)(10,"div",8)(11,"div",9)(12,"div",10),e.YNc(13,Rt,1,0,"ng-container",11),e.qZA(),e.TgZ(14,"div",12)(15,"div",13),e._UZ(16,"div",14)(17,"div",14)(18,"div",15)(19,"div",15)(20,"div",15)(21,"div",16),e.TgZ(22,"div",15),e.YNc(23,Ut,1,0,"ng-container",11),e.qZA()()()(),e.TgZ(24,"div",17)(25,"p-table",18,19),e.NdJ("selectionChange",function(s){return n.selectedNode=s}),e.YNc(27,Ot,2,0,"ng-template",20),e.YNc(28,Pt,11,0,"ng-template",21),e.YNc(29,Qt,11,6,"ng-template",22),e.YNc(30,Mt,4,1,"ng-template",23),e.qZA()()()(),e.YNc(31,Yt,2,3,"ng-template",null,24,e.W1O)),2&t){const r=e.MAs(32);e.xp6(3),e.Q6J("module","instruments")("isActive",!0),e.xp6(3),e.Q6J("ngIf",n.activeOrder),e.xp6(7),e.Q6J("ngTemplateOutlet",r),e.xp6(10),e.Q6J("ngTemplateOutlet",r),e.xp6(2),e.Q6J("scrollable",!0)("rows",10)("paginator",!0)("selection",n.selectedNode)("value",n.requests)}},dependencies:[d.O5,d.tP,_.Hq,T.jx,N.nm,m.iA,m.Ei,A.D]}),o})();function Ht(o,a){if(1&o&&(e.ynx(0),e._uU(1),e.BQk()),2&o){const t=e.oxw();e.xp6(1),e.Oqu(t.activeArea.name)}}function $t(o,a){1&o&&e.GkF(0)}function Wt(o,a){1&o&&e.GkF(0)}function Gt(o,a){1&o&&(e.TgZ(0,"colgroup"),e._UZ(1,"col",25),e.qZA())}function Bt(o,a){1&o&&(e.TgZ(0,"tr")(1,"th",26),e._uU(2,"#"),e.qZA(),e.TgZ(3,"th",27),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"th",28),e._uU(6,"Description"),e.qZA()())}function jt(o,a){if(1&o&&(e.TgZ(0,"tr",29)(1,"td",30),e._uU(2),e.qZA(),e.TgZ(3,"td",27),e._uU(4),e.qZA(),e.TgZ(5,"td",28),e._uU(6),e.qZA()()),2&o){const t=a.$implicit,n=a.rowIndex;e.Q6J("pSelectableRow",t),e.xp6(2),e.Oqu(n+1),e.xp6(2),e.Oqu(t.name),e.xp6(2),e.Oqu(t.description)}}function Vt(o,a){1&o&&(e.TgZ(0,"tr")(1,"td",31)(2,"span"),e._uU(3,"No Records Found"),e.qZA()()()),2&o&&(e.xp6(1),e.uIk("colspan",6))}function Dt(o,a){if(1&o&&(e.TgZ(0,"div",32),e._UZ(1,"p-menubar",33),e.qZA()),2&o){const t=e.oxw();e.xp6(1),e.ekj("disabled",!t.selectedNode),e.Q6J("model",t.menuItems)}}const zt=[{path:"",title:"Instruments",component:H,children:[{path:"instruments-and-tools",title:"Instruments And Tools",component:it},{path:"areas",title:"Areas",component:bt},{path:"areas/locators/:areaId",title:"Areas",component:(()=>{class o{constructor(t,n,r,s,h){this.route=t,this.locatorService=n,this.areasService=r,this.modalService=s,this.instrumentAndToolsService=h,this.area_id=this.route.snapshot.paramMap.get("areaId"),this.destroy$=new g.x,this.menuItems=[{label:"Selected Area Locator",items:[{label:"Edit",icon:"pi pi-pencil",command:()=>this.edit()},{label:"Remove",icon:"pi pi-trash",command:()=>this.delete()}]}],this.getAll(),this.areasService.getById(this.area_id).pipe((0,p.q)(1),(0,C.b)(Z=>this.activeArea=Z),(0,u.R)(this.destroy$)).subscribe()}ngOnInit(){}getAll(){this.selectedNode=null,this.locatorService.get([{name:"area",value:this.area_id}]).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{this.locators=t})}delete(){this.modalService.confirm("danger","Confirm").pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(t=>{t&&this.locatorService.delete(this.selectedNode).pipe((0,p.q)(1),(0,u.R)(this.destroy$)).subscribe(n=>{this.getAll()})})}edit(){this.instrumentAndToolsService.createEditAreaLocatorModal("edit",this.selectedNode).pipe((0,u.R)(this.destroy$)).subscribe(()=>{this.getAll()})}ngOnDestroy(){this.destroy$.next(!0),this.destroy$.complete()}createAreaLocator(){this.instrumentAndToolsService.createEditAreaLocatorModal("create",null,this.activeArea.id).pipe((0,u.R)(this.destroy$)).subscribe(()=>{this.getAll()})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.gz),e.Y36(F.H),e.Y36(w),e.Y36(S.Z),e.Y36(y))},o.\u0275cmp=e.Xpm({type:o,selectors:[["pek-locators-list"]],decls:34,vars:10,consts:[[1,"page"],[1,"page__header"],[1,"page__title"],[3,"module","isActive"],[4,"ngIf"],[1,"page__tools"],["pButton","","type","button","icon","pi pi-plus","label","New Locator",3,"click"],[1,"page__content"],[1,"page__card"],[1,"filters-visibility"],[1,"filters-visibility__header"],[4,"ngTemplateOutlet"],[1,"form","mb-3"],[1,"row"],[1,"col-3"],[1,"col-2"],[1,"col-10"],[1,"page__table"],["selectionMode","single","scrollHeight","calc(100vh - 335px)",3,"scrollable","rows","paginator","selection","value","selectionChange"],["dt",""],["pTemplate","colgroup"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["actionButtons",""],[1,"index-header"],[1,"index-header",2,"width","5%"],[2,"width","45%"],[2,"width","50%"],[3,"pSelectableRow"],[2,"width","5%"],[1,"text-center","p-5"],[1,"action-buttons"],[1,"ml-auto",3,"model"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"pek-module-icon",3),e.TgZ(4,"h1"),e._uU(5,"Locators (Area: "),e.YNc(6,Ht,2,1,"ng-container",4),e._uU(7,")"),e.qZA()(),e.TgZ(8,"div",5)(9,"button",6),e.NdJ("click",function(){return n.createAreaLocator()}),e.qZA()()()(),e.TgZ(10,"div",7)(11,"div",8)(12,"div",9)(13,"div",10),e.YNc(14,$t,1,0,"ng-container",11),e.qZA(),e.TgZ(15,"div",12)(16,"div",13),e._UZ(17,"div",14)(18,"div",14)(19,"div",15)(20,"div",15)(21,"div",15)(22,"div",16),e.TgZ(23,"div",15),e.YNc(24,Wt,1,0,"ng-container",11),e.qZA()()()(),e.TgZ(25,"div",17)(26,"p-table",18,19),e.NdJ("selectionChange",function(s){return n.selectedNode=s}),e.YNc(28,Gt,2,0,"ng-template",20),e.YNc(29,Bt,7,0,"ng-template",21),e.YNc(30,jt,7,4,"ng-template",22),e.YNc(31,Vt,4,1,"ng-template",23),e.qZA()()()(),e.YNc(32,Dt,2,3,"ng-template",null,24,e.W1O)),2&t){const r=e.MAs(33);e.xp6(3),e.Q6J("module","instruments")("isActive",!0),e.xp6(3),e.Q6J("ngIf",n.activeArea),e.xp6(8),e.Q6J("ngTemplateOutlet",r),e.xp6(10),e.Q6J("ngTemplateOutlet",r),e.xp6(2),e.Q6J("scrollable",!0)("rows",10)("paginator",!0)("selection",n.selectedNode)("value",n.locators)}},dependencies:[d.O5,d.tP,_.Hq,T.jx,N.nm,m.iA,m.Ei,A.D]}),o})()},{path:"tool-request",component:Lt},{path:"tool-request/requests/:orderId",component:Et}]}];let Kt=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[f.Bz.forChild(zt),f.Bz]}),o})();var Xt=l(7175),eo=l(6984);let to=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,Kt,Xt.x,eo.m]}),o})()}}]);