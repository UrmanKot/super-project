{"version":3,"file":"main.js","mappings":"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","sources":["./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/app/app.routing.ts","./src/app/auth/auth-state.enum.ts","./src/app/auth/auth.component.ts","./src/app/auth/auth.component.html","./src/app/auth/auth.guard.ts","./src/app/auth/auth.interceptor.ts","./src/app/auth/auth.module.ts","./src/app/auth/auth.routing.ts","./src/app/auth/auth.service.ts","./src/app/business-trips/enums/business-trip-expenses-type.ts","./src/app/business-trips/enums/business-trip-location-status.enum.ts","./src/app/business-trips/enums/business-trip-vehicle-type.ts","./src/app/business-trips/modals/create-business-trip/create-business-trip.component.ts","./src/app/business-trips/modals/create-business-trip/create-business-trip.component.html","./src/app/business-trips/modals/create-update-vehicle/create-update-vehicle.component.ts","./src/app/business-trips/modals/create-update-vehicle/create-update-vehicle.component.html","./src/app/business-trips/modals/take-photo-modal/take-photo-modal.component.ts","./src/app/business-trips/modals/take-photo-modal/take-photo-modal.component.html","./src/app/business-trips/modals/uploaded-data-viewer/uploaded-data-viewer.component.ts","./src/app/business-trips/modals/uploaded-data-viewer/uploaded-data-viewer.component.html","./src/app/business-trips/services/business-trip.service.ts","./src/app/business-trips/services/vehicle.service.ts","./src/app/confirmation/components/confirmation-layout/confirmation-layout.component.ts","./src/app/confirmation/components/confirmation-layout/confirmation-layout.component.html","./src/app/confirmation/components/nomenclature-confirmation/nomenclature-confirmation.component.ts","./src/app/confirmation/components/nomenclature-confirmation/nomenclature-confirmation.component.html","./src/app/confirmation/components/payment-confirmation/payment-confirmation.component.ts","./src/app/confirmation/components/payment-confirmation/payment-confirmation.component.html","./src/app/confirmation/components/planning-list-confirmation/components/confirmations-list/confirmations-list.component.ts","./src/app/confirmation/components/planning-list-confirmation/components/confirmations-list/confirmations-list.component.html","./src/app/confirmation/components/planning-list-confirmation/components/corrections-list/corrections-list.component.ts","./src/app/confirmation/components/planning-list-confirmation/components/corrections-list/corrections-list.component.html","./src/app/confirmation/components/planning-list-confirmation/planning-list-confirmation.component.ts","./src/app/confirmation/components/planning-list-confirmation/planning-list-confirmation.component.html","./src/app/confirmation/components/production-list-confirmation/production-list-confirmation.component.ts","./src/app/confirmation/components/production-list-confirmation/production-list-confirmation.component.html","./src/app/confirmation/components/reservation-confirmation/reservation-confirmation.component.ts","./src/app/confirmation/components/reservation-confirmation/reservation-confirmation.component.html","./src/app/confirmation/components/supplier-confirmation/components/tender-suppliers-list/tender-suppliers-list.component.ts","./src/app/confirmation/components/supplier-confirmation/components/tender-suppliers-list/tender-suppliers-list.component.html","./src/app/confirmation/components/supplier-confirmation/supplier-confirmation.component.ts","./src/app/confirmation/components/supplier-confirmation/supplier-confirmation.component.html","./src/app/confirmation/components/write-off-confirmation/write-off-confirmation.component.ts","./src/app/confirmation/components/write-off-confirmation/write-off-confirmation.component.html","./src/app/confirmation/confirmation.module.ts","./src/app/confirmation/confirmation.routing.ts","./src/app/confirmation/modals/payment-confirmation-limit/payment-confirmation-limit.component.ts","./src/app/confirmation/modals/payment-confirmation-limit/payment-confirmation-limit.component.html","./src/app/confirmation/models/order-supplier.ts","./src/app/confirmation/services/order-supplier.service.ts","./src/app/crm/modals/add-company-to-event/add-company-to-event.component.ts","./src/app/crm/modals/add-company-to-event/add-company-to-event.component.html","./src/app/crm/modals/add-contact-person-to-event/add-contact-person-to-event.component.ts","./src/app/crm/modals/add-contact-person-to-event/add-contact-person-to-event.component.html","./src/app/crm/modals/add-event-to-company/add-event-to-company.component.ts","./src/app/crm/modals/add-event-to-company/add-event-to-company.component.html","./src/app/crm/modals/add-event-to-contact-person/add-event-to-contact-person.component.ts","./src/app/crm/modals/add-event-to-contact-person/add-event-to-contact-person.component.html","./src/app/crm/modals/create-edit-company-category/create-edit-company-category.component.ts","./src/app/crm/modals/create-edit-company-category/create-edit-company-category.component.html","./src/app/crm/modals/create-edit-company/create-edit-company.component.ts","./src/app/crm/modals/create-edit-company/create-edit-company.component.html","./src/app/crm/modals/create-edit-contact-person/create-edit-contact-person.component.ts","./src/app/crm/modals/create-edit-contact-person/create-edit-contact-person.component.html","./src/app/crm/modals/create-edit-crm-employee/create-edit-crm-employee.component.ts","./src/app/crm/modals/create-edit-crm-employee/create-edit-crm-employee.component.html","./src/app/crm/modals/create-edit-event-type/create-edit-event-type.component.ts","./src/app/crm/modals/create-edit-event-type/create-edit-event-type.component.html","./src/app/crm/modals/create-edit-event/create-edit-event.component.ts","./src/app/crm/modals/create-edit-event/create-edit-event.component.html","./src/app/crm/modals/create-edit-external-event-type/create-edit-external-event-type.component.ts","./src/app/crm/modals/create-edit-external-event-type/create-edit-external-event-type.component.html","./src/app/crm/modals/create-edit-linked-company/create-edit-linked-company.component.ts","./src/app/crm/modals/create-edit-linked-company/create-edit-linked-company.component.html","./src/app/crm/modals/create-edit-linked-contact/create-edit-linked-contact.component.ts","./src/app/crm/modals/create-edit-linked-contact/create-edit-linked-contact.component.html","./src/app/crm/modals/create-edit-user-profile/create-edit-user-profile.component.ts","./src/app/crm/modals/create-edit-user-profile/create-edit-user-profile.component.html","./src/app/crm/modals/create-update-crm-positions/create-update-crm-positions.component.ts","./src/app/crm/modals/create-update-crm-positions/create-update-crm-positions.component.html","./src/app/crm/modals/crm-edit-company-activity-event/crm-edit-company-activity.component.ts","./src/app/crm/modals/crm-edit-company-activity-event/crm-edit-company-activity.component.html","./src/app/crm/modals/edit-crm-event-company/edit-crm-event-company.component.ts","./src/app/crm/modals/edit-crm-event-company/edit-crm-event-company.component.html","./src/app/crm/modals/edit-employee-event-date/edit-employee-event-date.component.ts","./src/app/crm/modals/edit-employee-event-date/edit-employee-event-date.component.html","./src/app/crm/modals/event-company-set-state/event-company-set-state.component.ts","./src/app/crm/modals/event-company-set-state/event-company-set-state.component.html","./src/app/crm/models/company-activity.ts","./src/app/crm/models/event-company.ts","./src/app/crm/pickers/crm-employee-picker/crm-employee-picker.component.ts","./src/app/crm/pickers/crm-employee-picker/crm-employee-picker.component.html","./src/app/crm/pickers/crm-event-type-picker/crm-event-type-picker.component.ts","./src/app/crm/pickers/crm-event-type-picker/crm-event-type-picker.component.html","./src/app/crm/services/company-category.service.ts","./src/app/crm/services/company.service.ts","./src/app/crm/services/contact-person.service.ts","./src/app/crm/services/crm-employee.service.ts","./src/app/crm/services/crm-positions.service.ts","./src/app/crm/services/event-company.service.ts","./src/app/crm/services/event-types.service.ts","./src/app/crm/services/events-list.service.ts","./src/app/crm/services/user-profile.service.ts","./src/app/delivery-chains/components/not-found/not-found.component.ts","./src/app/delivery-chains/components/not-found/not-found.component.html","./src/app/delivery-chains/delivery-chains.module.ts","./src/app/delivery-chains/delivery-chains.routing.ts","./src/app/guide/guide-button/guide-button.component.ts","./src/app/guide/guide-button/guide-button.component.html","./src/app/guide/guide-glossary/guide-glossary.component.ts","./src/app/guide/guide-glossary/guide-glossary.component.html","./src/app/guide/guide-instructions/confirmation-instruction/confirmation-instruction.component.ts","./src/app/guide/guide-instructions/confirmation-instruction/confirmation-instruction.component.html","./src/app/guide/guide-instructions/main-instruction/main-instruction.component.ts","./src/app/guide/guide-instructions/main-instruction/main-instruction.component.html","./src/app/guide/guide-instructions/product-structure-instruction/product-structure-instruction.component.ts","./src/app/guide/guide-instructions/product-structure-instruction/product-structure-instruction.component.html","./src/app/guide/guide-instructions/sales-instruction/sales-instruction.component.ts","./src/app/guide/guide-instructions/sales-instruction/sales-instruction.component.html","./src/app/guide/guide-instructions/warehouse-instruction/warehouse-instruction.component.ts","./src/app/guide/guide-instructions/warehouse-instruction/warehouse-instruction.component.html","./src/app/guide/guide-outsourcing/guide-outsourcing.component.ts","./src/app/guide/guide-outsourcing/guide-outsourcing.component.html","./src/app/guide/guide-procurement/guide-procurement.component.ts","./src/app/guide/guide-procurement/guide-procurement.component.html","./src/app/guide/guide-production/guide-production.component.ts","./src/app/guide/guide-production/guide-production.component.html","./src/app/guide/guide-sales/guide-sales.component.ts","./src/app/guide/guide-sales/guide-sales.component.html","./src/app/guide/guide-schemes/guide-confirmation/guide-confirmation.component.ts","./src/app/guide/guide-schemes/guide-confirmation/guide-confirmation.component.html","./src/app/guide/guide-schemes/guide-warehouse/guide-warehouse.component.ts","./src/app/guide/guide-schemes/guide-warehouse/guide-warehouse.component.html","./src/app/guide/guide.module.ts","./src/app/guide/guide.routing.ts","./src/app/guide/guide/guide.component.ts","./src/app/guide/guide/guide.component.html","./src/app/layout/components/header/header.component.ts","./src/app/layout/components/header/header.component.html","./src/app/layout/components/layout/layout.component.ts","./src/app/layout/components/layout/layout.component.html","./src/app/layout/components/logo/logo.component.ts","./src/app/layout/components/logo/logo.component.html","./src/app/layout/layout.module.ts","./src/app/manufacturing/enums/planning-status.enum.ts","./src/app/manufacturing/enums/shift-types.enum.ts","./src/app/manufacturing/modals/create-edit-employee/create-edit-employee.component.ts","./src/app/manufacturing/modals/create-edit-employee/create-edit-employee.component.html","./src/app/manufacturing/modals/create-edit-machine/create-edit-machine.component.ts","./src/app/manufacturing/modals/create-edit-machine/create-edit-machine.component.html","./src/app/manufacturing/modals/create-edit-position/create-edit-position.component.ts","./src/app/manufacturing/modals/create-edit-position/create-edit-position.component.html","./src/app/manufacturing/modals/manufacturing-add-items/manufacturing-add-items.component.ts","./src/app/manufacturing/modals/manufacturing-add-items/manufacturing-add-items.component.html","./src/app/manufacturing/modals/manufacturing-add-technology/manufacturing-add-technology.component.ts","./src/app/manufacturing/modals/manufacturing-add-technology/manufacturing-add-technology.component.html","./src/app/manufacturing/modals/manufacturing-create-order/manufacturing-create-order.component.ts","./src/app/manufacturing/modals/manufacturing-create-order/manufacturing-create-order.component.html","./src/app/manufacturing/modals/manufacturing-picker-product/manufacturing-picker-product.component.ts","./src/app/manufacturing/modals/manufacturing-picker-product/manufacturing-picker-product.component.html","./src/app/manufacturing/modals/manufacturing-split-plan/manufacturing-split-plan.component.ts","./src/app/manufacturing/modals/manufacturing-split-plan/manufacturing-split-plan.component.html","./src/app/manufacturing/modals/manufacturing-task-edit/manufacturing-task-edit.component.ts","./src/app/manufacturing/modals/manufacturing-task-edit/manufacturing-task-edit.component.html","./src/app/manufacturing/modals/manufacturing-tasks-edit/manufacturing-tasks-edit.component.ts","./src/app/manufacturing/modals/manufacturing-tasks-edit/manufacturing-tasks-edit.component.html","./src/app/manufacturing/pickers/shift-by-types/shift-by-types.component.ts","./src/app/manufacturing/pickers/shift-by-types/shift-by-types.component.html","./src/app/manufacturing/services/machine.service.ts","./src/app/outsourcing/components/outsourcing-chain-creation-list/outsourcing-chain-creation-list.component.ts","./src/app/outsourcing/components/outsourcing-chain-creation-list/outsourcing-chain-creation-list.component.html","./src/app/outsourcing/components/outsourcing-chains/outsourcing-chains.component.ts","./src/app/outsourcing/components/outsourcing-chains/outsourcing-chains.component.html","./src/app/outsourcing/components/outsourcing-layout/outsourcing-layout.component.ts","./src/app/outsourcing/components/outsourcing-layout/outsourcing-layout.component.html","./src/app/outsourcing/components/outsourcing-order-page/outsourcing-order-page.component.ts","./src/app/outsourcing/components/outsourcing-order-page/outsourcing-order-page.component.html","./src/app/outsourcing/components/outsourcing-order-statuses/outsourcing-order-statuses.component.ts","./src/app/outsourcing/components/outsourcing-order-statuses/outsourcing-order-statuses.component.html","./src/app/outsourcing/components/outsourcing-requests/outsourcing-requests.component.ts","./src/app/outsourcing/components/outsourcing-requests/outsourcing-requests.component.html","./src/app/outsourcing/modals/add-material-to-order/add-material-to-order.component.ts","./src/app/outsourcing/modals/add-material-to-order/add-material-to-order.component.html","./src/app/outsourcing/modals/add-supplier-to-order/add-supplier-to-order.component.ts","./src/app/outsourcing/modals/add-supplier-to-order/add-supplier-to-order.component.html","./src/app/outsourcing/modals/create-outsourcing-request/create-outsourcing-request.component.ts","./src/app/outsourcing/modals/create-outsourcing-request/create-outsourcing-request.component.html","./src/app/outsourcing/modals/edit-order-supplier/edit-order-supplier.component.ts","./src/app/outsourcing/modals/edit-order-supplier/edit-order-supplier.component.html","./src/app/outsourcing/modals/search-product-in-warehouse/search-product-in-warehouse.component.ts","./src/app/outsourcing/modals/search-product-in-warehouse/search-product-in-warehouse.component.html","./src/app/outsourcing/outsourcing.module.ts","./src/app/outsourcing/outsourcing.routing.ts","./src/app/payments/components/delivery-payment-list/delivery-payment-list.component.ts","./src/app/payments/components/delivery-payment-list/delivery-payment-list.component.html","./src/app/payments/components/payment-layout/payment-layout.component.ts","./src/app/payments/components/payment-layout/payment-layout.component.html","./src/app/payments/components/payment-lists/payment-lists.component.ts","./src/app/payments/components/payment-lists/payment-lists.component.html","./src/app/payments/modals/create-edit-payment-form/create-edit-payment-form.component.ts","./src/app/payments/modals/create-edit-payment-form/create-edit-payment-form.component.html","./src/app/payments/modals/create-edit-service-payment-form/create-edit-service-payment-form.component.ts","./src/app/payments/modals/create-edit-service-payment-form/create-edit-service-payment-form.component.html","./src/app/payments/modals/payment-file-form/payment-file-form.component.ts","./src/app/payments/modals/payment-file-form/payment-file-form.component.html","./src/app/payments/modals/service-payment-file-form/service-payment-file-form.component.ts","./src/app/payments/modals/service-payment-file-form/service-payment-file-form.component.html","./src/app/payments/payments.module.ts","./src/app/payments/payments.routing.ts","./src/app/payments/services/payment.service.ts","./src/app/payments/services/service-invoice-payment.service.ts","./src/app/procurement/components/auxiliary-invoices-types-list/auxiliary-invoices-types-list.component.ts","./src/app/procurement/components/auxiliary-invoices-types-list/auxiliary-invoices-types-list.component.html","./src/app/procurement/components/procurement-chain-creation-list/procurement-chain-creation-list.component.ts","./src/app/procurement/components/procurement-chain-creation-list/procurement-chain-creation-list.component.html","./src/app/procurement/components/procurement-chains/procurement-chains.component.ts","./src/app/procurement/components/procurement-chains/procurement-chains.component.html","./src/app/procurement/components/procurement-layout/procurement-layout.component.ts","./src/app/procurement/components/procurement-layout/procurement-layout.component.html","./src/app/procurement/components/procurement-order-page/procurement-order-page.component.ts","./src/app/procurement/components/procurement-order-page/procurement-order-page.component.html","./src/app/procurement/components/procurement-order-statuses/procurement-order-statuses.component.ts","./src/app/procurement/components/procurement-order-statuses/procurement-order-statuses.component.html","./src/app/procurement/modals/add-order-product-to-order/add-order-product-to-order.component.ts","./src/app/procurement/modals/add-order-product-to-order/add-order-product-to-order.component.html","./src/app/procurement/modals/create-edit-auxiliary-invoice-type/create-edit-auxiliary-invoice-type.component.ts","./src/app/procurement/modals/create-edit-auxiliary-invoice-type/create-edit-auxiliary-invoice-type.component.html","./src/app/procurement/modals/edit-order-product-delivery-date/edit-order-product-delivery-date.component.ts","./src/app/procurement/modals/edit-order-product-delivery-date/edit-order-product-delivery-date.component.html","./src/app/procurement/modals/edit-order-product-quantity/edit-order-product-quantity.component.ts","./src/app/procurement/modals/edit-order-product-quantity/edit-order-product-quantity.component.html","./src/app/procurement/modals/invoice-files/invoice-files.component.ts","./src/app/procurement/modals/invoice-files/invoice-files.component.html","./src/app/procurement/modals/service-invoice-files/service-invoice-files.component.ts","./src/app/procurement/modals/service-invoice-files/service-invoice-files.component.html","./src/app/procurement/models/invoice.ts","./src/app/procurement/models/order-product.ts","./src/app/procurement/models/order.ts","./src/app/procurement/procurement.module.ts","./src/app/procurement/procurement.routing.ts","./src/app/procurement/services/base-services.service.ts","./src/app/procurement/services/invoice-product.service.ts","./src/app/procurement/services/invoice.service.ts","./src/app/procurement/services/order-product.service.ts","./src/app/procurement/services/order.service.ts","./src/app/procurement/services/status.service.ts","./src/app/product-structure/components/create-edit-product-form/components/nomenclature-files/nomenclature-files.component.ts","./src/app/product-structure/components/create-edit-product-form/components/nomenclature-files/nomenclature-files.component.html","./src/app/product-structure/components/create-edit-product-form/components/technical-equipments-table/edit-technical-equipment/edit-technical-equipment.component.ts","./src/app/product-structure/components/create-edit-product-form/components/technical-equipments-table/edit-technical-equipment/edit-technical-equipment.component.html","./src/app/product-structure/components/create-edit-product-form/components/technical-equipments-table/technical-equipments-table.component.ts","./src/app/product-structure/components/create-edit-product-form/components/technical-equipments-table/technical-equipments-table.component.html","./src/app/product-structure/components/create-edit-product-form/create-edit-product-form.component.ts","./src/app/product-structure/components/create-edit-product-form/create-edit-product-form.component.html","./src/app/product-structure/components/prefixes/prefixes.component.ts","./src/app/product-structure/components/prefixes/prefixes.component.html","./src/app/product-structure/components/product-structure-categories/product-structure-categories.component.ts","./src/app/product-structure/components/product-structure-categories/product-structure-categories.component.html","./src/app/product-structure/components/product-structure-layout/product-structure-layout.component.ts","./src/app/product-structure/components/product-structure-layout/product-structure-layout.component.html","./src/app/product-structure/components/product-structure-product/product-structure-product.component.ts","./src/app/product-structure/components/product-structure-product/product-structure-product.component.html","./src/app/product-structure/components/product-structure-products-list/product-structure-products-list.component.ts","./src/app/product-structure/components/product-structure-products-list/product-structure-products-list.component.html","./src/app/product-structure/components/technologies/technologies.component.ts","./src/app/product-structure/components/technologies/technologies.component.html","./src/app/product-structure/components/warehouse-serial-types/warehouse-serial-types.component.ts","./src/app/product-structure/components/warehouse-serial-types/warehouse-serial-types.component.html","./src/app/product-structure/modals/add-product/add-product.component.ts","./src/app/product-structure/modals/add-product/add-product.component.html","./src/app/product-structure/modals/add-technical-equipment/add-technical-equipment.component.ts","./src/app/product-structure/modals/add-technical-equipment/add-technical-equipment.component.html","./src/app/product-structure/modals/compare-structure/compare-structure.component.ts","./src/app/product-structure/modals/compare-structure/compare-structure.component.html","./src/app/product-structure/modals/create-edit-prefix/create-edit-prefix.component.ts","./src/app/product-structure/modals/create-edit-prefix/create-edit-prefix.component.html","./src/app/product-structure/modals/create-edit-product-structure-category/create-edit-product-structure-category.component.ts","./src/app/product-structure/modals/create-edit-product-structure-category/create-edit-product-structure-category.component.html","./src/app/product-structure/modals/create-edit-root-product/create-edit-root-product.component.ts","./src/app/product-structure/modals/create-edit-root-product/create-edit-root-product.component.html","./src/app/product-structure/modals/create-edit-serial-type/create-edit-serial-type.component.ts","./src/app/product-structure/modals/create-edit-serial-type/create-edit-serial-type.component.html","./src/app/product-structure/modals/create-edit-technology/create-edit-technology.component.ts","./src/app/product-structure/modals/create-edit-technology/create-edit-technology.component.html","./src/app/product-structure/modals/edit-product/edit-product.component.ts","./src/app/product-structure/modals/edit-product/edit-product.component.html","./src/app/product-structure/modals/make-production-list/make-production-list.component.ts","./src/app/product-structure/modals/make-production-list/make-production-list.component.html","./src/app/product-structure/modals/make-root-product/make-root-product.component.ts","./src/app/product-structure/modals/make-root-product/make-root-product.component.html","./src/app/product-structure/modals/product-files/product-files.component.ts","./src/app/product-structure/modals/product-files/product-files.component.html","./src/app/product-structure/modals/serial-confirmation/serial-confirmation.component.ts","./src/app/product-structure/modals/serial-confirmation/serial-confirmation.component.html","./src/app/product-structure/modals/upload-product-structure/upload-product-structure.component.ts","./src/app/product-structure/modals/upload-product-structure/upload-product-structure.component.html","./src/app/product-structure/models/product.ts","./src/app/product-structure/product-structure.module.ts","./src/app/product-structure/product-structure.routing.ts","./src/app/product-structure/services/categories.service.ts","./src/app/product-structure/services/prefix.service.ts","./src/app/product-structure/services/product-structure-category.service.ts","./src/app/product-structure/services/product.service.ts","./src/app/product-structure/services/serial-type.service.ts","./src/app/product-structure/services/technical-equipment.service.ts","./src/app/product-structure/services/technology.service.ts","./src/app/purchasing/components/purchasing-categories/purchasing-categories.component.ts","./src/app/purchasing/components/purchasing-categories/purchasing-categories.component.html","./src/app/purchasing/components/purchasing-chain-creation-list/purchasing-chain-creation-list.component.ts","./src/app/purchasing/components/purchasing-chain-creation-list/purchasing-chain-creation-list.component.html","./src/app/purchasing/components/purchasing-chains/purchasing-chains.component.ts","./src/app/purchasing/components/purchasing-chains/purchasing-chains.component.html","./src/app/purchasing/components/purchasing-layout/purchasing-layout.component.ts","./src/app/purchasing/components/purchasing-layout/purchasing-layout.component.html","./src/app/purchasing/components/purchasing-order-page/purchasing-order-page.component.ts","./src/app/purchasing/components/purchasing-order-page/purchasing-order-page.component.html","./src/app/purchasing/components/purchasing-order-statuses/purchasing-order-statuses.component.ts","./src/app/purchasing/components/purchasing-order-statuses/purchasing-order-statuses.component.html","./src/app/purchasing/components/purchasing-requests/purchasing-requests.component.ts","./src/app/purchasing/components/purchasing-requests/purchasing-requests.component.html","./src/app/purchasing/modals/create-edit-purchasing-category/create-edit-purchasing-category.component.ts","./src/app/purchasing/modals/create-edit-purchasing-category/create-edit-purchasing-category.component.html","./src/app/purchasing/modals/create-empty-purchase-chain/create-empty-purchase-chain.component.ts","./src/app/purchasing/modals/create-empty-purchase-chain/create-empty-purchase-chain.component.html","./src/app/purchasing/purchasing.module.ts","./src/app/purchasing/purchasing.routing.ts","./src/app/purchasing/services/purchasing-category.service.ts","./src/app/qr-code/components/print-qr-codes/print-qr-codes.component.ts","./src/app/qr-code/components/print-qr-codes/print-qr-codes.component.html","./src/app/qr-code/components/qr-code-item/qr-code-item.component.ts","./src/app/qr-code/components/qr-code-item/qr-code-item.component.html","./src/app/qr-code/components/qr-code-modal/qr-code-modal.component.ts","./src/app/qr-code/components/qr-code-modal/qr-code-modal.component.html","./src/app/qr-code/components/qr-code-scanner/qr-code-scanner.component.ts","./src/app/qr-code/components/qr-code-scanner/qr-code-scanner.component.html","./src/app/qr-code/qr-code.module.ts","./src/app/qr-code/qr-code.service.ts","./src/app/sales/modals/create-edit-sales-status/create-edit-sales-status.component.ts","./src/app/sales/modals/create-edit-sales-status/create-edit-sales-status.component.html","./src/app/sales/services/sales-status.service.ts","./src/app/shared/components/categories-tree-picker/categories-tree-picker.component.ts","./src/app/shared/components/categories-tree-picker/categories-tree-picker.component.html","./src/app/shared/components/hover-detailed-info-component/hover-detailed-info-component.component.ts","./src/app/shared/components/hover-detailed-info-component/hover-detailed-info-component.component.html","./src/app/shared/components/images-slider/images-slider.component.ts","./src/app/shared/components/images-slider/images-slider.component.html","./src/app/shared/components/nomenclature-picker/nomenclature-picker.component.ts","./src/app/shared/components/nomenclature-picker/nomenclature-picker.component.html","./src/app/shared/components/order-page/order-page.component.ts","./src/app/shared/components/order-page/order-page.component.html","./src/app/shared/components/order-page/order-tender-supplier/order-tender-supplier.component.ts","./src/app/shared/components/order-page/order-tender-supplier/order-tender-supplier.component.html","./src/app/shared/components/order-statuses-chart/order-statuses-chart.component.ts","./src/app/shared/components/order-statuses-chart/order-statuses-chart.component.html","./src/app/shared/components/order-statuses-table/order-statuses-table.component.ts","./src/app/shared/components/order-statuses-table/order-statuses-table.component.html","./src/app/shared/components/order-statuses/order-statuses.component.ts","./src/app/shared/components/order-statuses/order-statuses.component.html","./src/app/shared/components/upload-file-picker/upload-file-picker.component.ts","./src/app/shared/components/upload-file-picker/upload-file-picker.component.html","./src/app/shared/components/upload-file/upload-file.component.ts","./src/app/shared/components/upload-file/upload-file.component.html","./src/app/shared/directives/middle-mouse-click.directive.ts","./src/app/shared/directives/paste-screen-image.directive.ts","./src/app/shared/directives/tippy.directive.ts","./src/app/shared/guards/external-uri.guard.ts","./src/app/shared/icons/in-icon/in-icon.component.ts","./src/app/shared/icons/in-icon/in-icon.component.html","./src/app/shared/icons/module-icon/module-icon.component.ts","./src/app/shared/icons/module-icon/module-icon.component.html","./src/app/shared/icons/sort-icon/sort-icon.component.ts","./src/app/shared/icons/sort-icon/sort-icon.component.html","./src/app/shared/interceptors/error-interceptor.ts","./src/app/shared/modals/add-file-to-order/add-file-to-order.component.ts","./src/app/shared/modals/add-file-to-order/add-file-to-order.component.html","./src/app/shared/modals/add-products-to-chain/add-products-to-chain.component.ts","./src/app/shared/modals/add-products-to-chain/add-products-to-chain.component.html","./src/app/shared/modals/album/album.component.ts","./src/app/shared/modals/album/album.component.html","./src/app/shared/modals/choice-date/choice-date.component.ts","./src/app/shared/modals/choice-date/choice-date.component.html","./src/app/shared/modals/choice-period-date/choice-period-date.component.ts","./src/app/shared/modals/choice-period-date/choice-period-date.component.html","./src/app/shared/modals/confirm/confirm.component.ts","./src/app/shared/modals/confirm/confirm.component.html","./src/app/shared/modals/create-chain/create-chain.component.ts","./src/app/shared/modals/create-chain/create-chain.component.html","./src/app/shared/modals/create-edit-status/create-edit-status.component.ts","./src/app/shared/modals/create-edit-status/create-edit-status.component.html","./src/app/shared/modals/edit-order/edit-order.component.ts","./src/app/shared/modals/edit-order/edit-order.component.html","./src/app/shared/modals/image-gallery/image-gallery.component.ts","./src/app/shared/modals/image-gallery/image-gallery.component.html","./src/app/shared/modals/nomenclature-picker-modal/nomenclature-picker-modal.component.ts","./src/app/shared/modals/nomenclature-picker-modal/nomenclature-picker-modal.component.html","./src/app/shared/modals/paste-image/paste-image.component.ts","./src/app/shared/modals/paste-image/paste-image.component.html","./src/app/shared/modals/refactoring/complete-list/complete-list.component.ts","./src/app/shared/modals/refactoring/complete-list/complete-list.component.html","./src/app/shared/modals/refactoring/list-products/list-products.component.ts","./src/app/shared/modals/refactoring/list-products/list-products.component.html","./src/app/shared/modals/warehouse-search/warehouse-search.component.ts","./src/app/shared/modals/warehouse-search/warehouse-search.component.html","./src/app/shared/models/nomenclature.ts","./src/app/shared/models/task.ts","./src/app/shared/pickers/accepted-type-picker/accepted-type-picker.component.ts","./src/app/shared/pickers/accepted-type-picker/accepted-type-picker.component.html","./src/app/shared/pickers/accounting-type-picker/accounting-type-picker.component.ts","./src/app/shared/pickers/accounting-type-picker/accounting-type-picker.component.html","./src/app/shared/pickers/area-locator-picker/area-locator-picker.component.ts","./src/app/shared/pickers/area-locator-picker/area-locator-picker.component.html","./src/app/shared/pickers/area-picker/area-picker.component.ts","./src/app/shared/pickers/area-picker/area-picker.component.html","./src/app/shared/pickers/company-categorized-multi-picker/company-categorized-multi-picker.component.ts","./src/app/shared/pickers/company-categorized-multi-picker/company-categorized-multi-picker.component.html","./src/app/shared/pickers/company-category-module-picker/company-category-module-picker.component.ts","./src/app/shared/pickers/company-category-module-picker/company-category-module-picker.component.html","./src/app/shared/pickers/company-category-picker/company-category-picker.component.ts","./src/app/shared/pickers/company-category-picker/company-category-picker.component.html","./src/app/shared/pickers/company-picker/company-picker.component.ts","./src/app/shared/pickers/company-picker/company-picker.component.html","./src/app/shared/pickers/crm-company-picker/crm-company-picker.component.ts","./src/app/shared/pickers/crm-company-picker/crm-company-picker.component.html","./src/app/shared/pickers/crm-employee-picker/crm-single-employee-picker.component.ts","./src/app/shared/pickers/crm-employee-picker/crm-single-employee-picker.component.html","./src/app/shared/pickers/crm-multi-region-picker/crm-multi-region-picker.component.ts","./src/app/shared/pickers/crm-multi-region-picker/crm-multi-region-picker.component.html","./src/app/shared/pickers/crm-multi-region-tree-picker/crm-multi-region-tree-picker.component.ts","./src/app/shared/pickers/crm-multi-region-tree-picker/crm-multi-region-tree-picker.component.html","./src/app/shared/pickers/crm-position-picker/crm-position-picker.component.ts","./src/app/shared/pickers/crm-position-picker/crm-position-picker.component.html","./src/app/shared/pickers/crm-tree-company-picker/crm-tree-company-picker.component.ts","./src/app/shared/pickers/crm-tree-company-picker/crm-tree-company-picker.component.html","./src/app/shared/pickers/currency-picker/currency-picker.component.ts","./src/app/shared/pickers/currency-picker/currency-picker.component.html","./src/app/shared/pickers/date-time-picker/date-time-picker.component.ts","./src/app/shared/pickers/date-time-picker/date-time-picker.component.html","./src/app/shared/pickers/employee-picker/employee-picker.component.ts","./src/app/shared/pickers/employee-picker/employee-picker.component.html","./src/app/shared/pickers/employee-position-picker/employee-position-picker.component.ts","./src/app/shared/pickers/employee-position-picker/employee-position-picker.component.html","./src/app/shared/pickers/group-locator-picker/group-locator-picker.component.ts","./src/app/shared/pickers/group-locator-picker/group-locator-picker.component.html","./src/app/shared/pickers/locator-picker/locator-picker.component.ts","./src/app/shared/pickers/locator-picker/locator-picker.component.html","./src/app/shared/pickers/multi-categories-picker/multi-categories-picker.component.ts","./src/app/shared/pickers/multi-categories-picker/multi-categories-picker.component.html","./src/app/shared/pickers/multi-company-category-picker/multi-company-category-picker.component.ts","./src/app/shared/pickers/multi-company-category-picker/multi-company-category-picker.component.html","./src/app/shared/pickers/multi-company-picker/multi-company-picker.component.ts","./src/app/shared/pickers/multi-company-picker/multi-company-picker.component.html","./src/app/shared/pickers/multi-contacts-picker/multi-contacts-picker.component.ts","./src/app/shared/pickers/multi-contacts-picker/multi-contacts-picker.component.html","./src/app/shared/pickers/multi-countries-picker/multi-countries-picker.component.ts","./src/app/shared/pickers/multi-countries-picker/multi-countries-picker.component.html","./src/app/shared/pickers/multi-locator-picker/multi-locator-picker.component.ts","./src/app/shared/pickers/multi-locator-picker/multi-locator-picker.component.html","./src/app/shared/pickers/multi-product-categories-picker/multi-product-categories-picker.component.ts","./src/app/shared/pickers/multi-product-categories-picker/multi-product-categories-picker.component.html","./src/app/shared/pickers/multi-product-structure-categories-picker/multi-product-structure-categories-picker.component.ts","./src/app/shared/pickers/multi-product-structure-categories-picker/multi-product-structure-categories-picker.component.html","./src/app/shared/pickers/multi-purchase-category-picker/multi-purchase-category-picker.component.ts","./src/app/shared/pickers/multi-purchase-category-picker/multi-purchase-category-picker.component.html","./src/app/shared/pickers/multi-sales-status-picker/multi-sales-status-picker.component.ts","./src/app/shared/pickers/multi-sales-status-picker/multi-sales-status-picker.component.html","./src/app/shared/pickers/multi-statuses-picker/multi-statuses-picker.component.ts","./src/app/shared/pickers/multi-statuses-picker/multi-statuses-picker.component.html","./src/app/shared/pickers/multi-technology-picker/multi-technology-picker.component.ts","./src/app/shared/pickers/multi-technology-picker/multi-technology-picker.component.html","./src/app/shared/pickers/multi-vehicle-picker/multi-vehicle-picker.component.ts","./src/app/shared/pickers/multi-vehicle-picker/multi-vehicle-picker.component.html","./src/app/shared/pickers/multi-warehouse-picker/multi-warehouse-picker.component.ts","./src/app/shared/pickers/multi-warehouse-picker/multi-warehouse-picker.component.html","./src/app/shared/pickers/nomenclature-type-picker/nomenclature-type-picker.component.ts","./src/app/shared/pickers/nomenclature-type-picker/nomenclature-type-picker.component.html","./src/app/shared/pickers/product-category-picker/product-category-picker.component.ts","./src/app/shared/pickers/product-category-picker/product-category-picker.component.html","./src/app/shared/pickers/product-lists-nomenclature-picker/product-lists-nomenclature-picker.component.ts","./src/app/shared/pickers/product-lists-nomenclature-picker/product-lists-nomenclature-picker.component.html","./src/app/shared/pickers/product-structure-category-picker/product-structure-category-picker.component.ts","./src/app/shared/pickers/product-structure-category-picker/product-structure-category-picker.component.html","./src/app/shared/pickers/region-picker/region-picker.component.ts","./src/app/shared/pickers/region-picker/region-picker.component.html","./src/app/shared/pickers/root-list-picker-by-order-type/root-list-picker-by-order-type.component.ts","./src/app/shared/pickers/root-list-picker-by-order-type/root-list-picker-by-order-type.component.html","./src/app/shared/pickers/root-list-picker/root-list-picker.component.ts","./src/app/shared/pickers/root-list-picker/root-list-picker.component.html","./src/app/shared/pickers/statuses-picker/statuses-picker.component.ts","./src/app/shared/pickers/statuses-picker/statuses-picker.component.html","./src/app/shared/pickers/sub-region-picker/sub-region-picker.component.ts","./src/app/shared/pickers/sub-region-picker/sub-region-picker.component.html","./src/app/shared/pickers/technology-picker/technology-picker.component.ts","./src/app/shared/pickers/technology-picker/technology-picker.component.html","./src/app/shared/pickers/unit-measure-picker/unit-measure-picker.component.ts","./src/app/shared/pickers/unit-measure-picker/unit-measure-picker.component.html","./src/app/shared/pickers/user-profile-picker/user-profile-picker.component.ts","./src/app/shared/pickers/user-profile-picker/user-profile-picker.component.html","./src/app/shared/pickers/warehouse-picker/warehouse-picker.component.ts","./src/app/shared/pickers/warehouse-picker/warehouse-picker.component.html","./src/app/shared/pipes/money-format.pipe.ts","./src/app/shared/pipes/search.pipe.ts","./src/app/shared/services/adapter.service.ts","./src/app/shared/services/album.service.ts","./src/app/shared/services/area-locators.service.ts","./src/app/shared/services/areas.service.ts","./src/app/shared/services/country.service.ts","./src/app/shared/services/currencies.service.ts","./src/app/shared/services/employee-position.service.ts","./src/app/shared/services/employee.service.ts","./src/app/shared/services/modal.service.ts","./src/app/shared/services/nomenclature.service.ts","./src/app/shared/services/nomenclatures-file.service.ts","./src/app/shared/services/region.service.ts","./src/app/shared/services/service-invoice.service.ts","./src/app/shared/services/sub-region.service.ts","./src/app/shared/services/task.service.ts","./src/app/shared/services/tree.service.ts","./src/app/shared/shared.module.ts","./src/app/warehouse/components/physical-inventory/physical-inventory-products/physical-inventory-products.component.ts","./src/app/warehouse/components/physical-inventory/physical-inventory-products/physical-inventory-products.component.html","./src/app/warehouse/components/physical-inventory/physical-inventory.component.ts","./src/app/warehouse/components/physical-inventory/physical-inventory.component.html","./src/app/warehouse/components/production-lists/list-product-print-item/list-product-print-item.component.ts","./src/app/warehouse/components/production-lists/list-product-print-item/list-product-print-item.component.html","./src/app/warehouse/components/production-lists/production-list/production-list.component.ts","./src/app/warehouse/components/production-lists/production-list/production-list.component.html","./src/app/warehouse/components/production-lists/production-lists.component.ts","./src/app/warehouse/components/production-lists/production-lists.component.html","./src/app/warehouse/components/warehouse-categories/warehouse-categories.component.ts","./src/app/warehouse/components/warehouse-categories/warehouse-categories.component.html","./src/app/warehouse/components/warehouse-isolator/components/warehouse-isolator-invoices/warehouse-isolator-invoices.component.ts","./src/app/warehouse/components/warehouse-isolator/components/warehouse-isolator-invoices/warehouse-isolator-invoices.component.html","./src/app/warehouse/components/warehouse-isolator/components/warehouse-isolator-orders/warehouse-isolator-orders.component.ts","./src/app/warehouse/components/warehouse-isolator/components/warehouse-isolator-orders/warehouse-isolator-orders.component.html","./src/app/warehouse/components/warehouse-isolator/warehouse-isolator.component.ts","./src/app/warehouse/components/warehouse-isolator/warehouse-isolator.component.html","./src/app/warehouse/components/warehouse-items/warehouse-items.component.ts","./src/app/warehouse/components/warehouse-items/warehouse-items.component.html","./src/app/warehouse/components/warehouse-layout/warehouse-layout.component.ts","./src/app/warehouse/components/warehouse-layout/warehouse-layout.component.html","./src/app/warehouse/components/warehouse-locators/warehouse-locators.component.ts","./src/app/warehouse/components/warehouse-locators/warehouse-locators.component.html","./src/app/warehouse/components/warehouse-production-request-print-page/warehouse-production-request-print-page.component.ts","./src/app/warehouse/components/warehouse-production-request-print-page/warehouse-production-request-print-page.component.html","./src/app/warehouse/components/warehouse-production-request/warehouse-production-request.component.ts","./src/app/warehouse/components/warehouse-production-request/warehouse-production-request.component.html","./src/app/warehouse/components/warehouse-production-requests/warehouse-production-requests.component.ts","./src/app/warehouse/components/warehouse-production-requests/warehouse-production-requests.component.html","./src/app/warehouse/components/warehouse-qc/warehouse-qc-invoice/warehouse-qc-invoice.component.ts","./src/app/warehouse/components/warehouse-qc/warehouse-qc-invoice/warehouse-qc-invoice.component.html","./src/app/warehouse/components/warehouse-qc/warehouse-qc-order/warehouse-qc-order.component.ts","./src/app/warehouse/components/warehouse-qc/warehouse-qc-order/warehouse-qc-order.component.html","./src/app/warehouse/components/warehouse-qc/warehouse-qc.component.ts","./src/app/warehouse/components/warehouse-qc/warehouse-qc.component.html","./src/app/warehouse/components/warehouse-shipping-requests/warehouse-shipping-request-print/warehouse-shipping-request-print.component.ts","./src/app/warehouse/components/warehouse-shipping-requests/warehouse-shipping-request-print/warehouse-shipping-request-print.component.html","./src/app/warehouse/components/warehouse-shipping-requests/warehouse-shipping-request/warehouse-shipping-request.component.ts","./src/app/warehouse/components/warehouse-shipping-requests/warehouse-shipping-request/warehouse-shipping-request.component.html","./src/app/warehouse/components/warehouse-shipping-requests/warehouse-shipping-requests.component.ts","./src/app/warehouse/components/warehouse-shipping-requests/warehouse-shipping-requests.component.html","./src/app/warehouse/components/warehouse-tool-request-print-page/warehouse-tool-request-print-page.component.ts","./src/app/warehouse/components/warehouse-tool-request-print-page/warehouse-tool-request-print-page.component.html","./src/app/warehouse/components/warehouse-tool-request/warehouse-tool-request.component.ts","./src/app/warehouse/components/warehouse-tool-request/warehouse-tool-request.component.html","./src/app/warehouse/components/warehouse-tool-requests/warehouse-tool-requests.component.ts","./src/app/warehouse/components/warehouse-tool-requests/warehouse-tool-requests.component.html","./src/app/warehouse/components/warehouse-units-measure/warehouse-units-measure.component.ts","./src/app/warehouse/components/warehouse-units-measure/warehouse-units-measure.component.html","./src/app/warehouse/components/warehouse-warehouses/warehouse-warehouses.component.ts","./src/app/warehouse/components/warehouse-warehouses/warehouse-warehouses.component.html","./src/app/warehouse/components/warehouse-where-used/warehouse-where-used.component.ts","./src/app/warehouse/components/warehouse-where-used/warehouse-where-used.component.html","./src/app/warehouse/modals/add-product-to-physical-inventory/add-product-to-physical-inventory.component.ts","./src/app/warehouse/modals/add-product-to-physical-inventory/add-product-to-physical-inventory.component.html","./src/app/warehouse/modals/create-edit-locator/create-edit-locator.component.ts","./src/app/warehouse/modals/create-edit-locator/create-edit-locator.component.html","./src/app/warehouse/modals/create-edit-unit-measure/create-edit-unit-measure.component.ts","./src/app/warehouse/modals/create-edit-unit-measure/create-edit-unit-measure.component.html","./src/app/warehouse/modals/create-edit-warehouse-category/create-edit-warehouse-category.component.ts","./src/app/warehouse/modals/create-edit-warehouse-category/create-edit-warehouse-category.component.html","./src/app/warehouse/modals/create-edit-warehouse-item/create-edit-warehouse-product.component.ts","./src/app/warehouse/modals/create-edit-warehouse-item/create-edit-warehouse-product.component.html","./src/app/warehouse/modals/create-edit-warehouse/create-edit-warehouse.component.ts","./src/app/warehouse/modals/create-edit-warehouse/create-edit-warehouse.component.html","./src/app/warehouse/modals/create-physical-inventory/create-physical-inventory.component.ts","./src/app/warehouse/modals/create-physical-inventory/create-physical-inventory.component.html","./src/app/warehouse/modals/move-physical-inventory-product/move-physical-inventory-product.component.ts","./src/app/warehouse/modals/move-physical-inventory-product/move-physical-inventory-product.component.html","./src/app/warehouse/modals/move-warehouse-product/move-warehouse-product.component.ts","./src/app/warehouse/modals/move-warehouse-product/move-warehouse-product.component.html","./src/app/warehouse/modals/nomenclature-serial-info/nomenclature-serial-info.component.ts","./src/app/warehouse/modals/nomenclature-serial-info/nomenclature-serial-info.component.html","./src/app/warehouse/modals/physical-inventory-products-changes/physical-inventory-products-changes.component.ts","./src/app/warehouse/modals/physical-inventory-products-changes/physical-inventory-products-changes.component.html","./src/app/warehouse/modals/production-list-chains-statistics/production-list-chains-statistics.component.ts","./src/app/warehouse/modals/production-list-chains-statistics/production-list-chains-statistics.component.html","./src/app/warehouse/modals/production-list-set-actual-quantity-dialog/production-list-set-actual-quantity-dialog.component.ts","./src/app/warehouse/modals/production-list-set-actual-quantity-dialog/production-list-set-actual-quantity-dialog.component.html","./src/app/warehouse/modals/qc-accept-technical-equipment/qc-accept-technical-equipment.component.ts","./src/app/warehouse/modals/qc-accept-technical-equipment/qc-accept-technical-equipment.component.html","./src/app/warehouse/modals/qc-accept-to-warehouse/qc-accept-to-warehouse.component.ts","./src/app/warehouse/modals/qc-accept-to-warehouse/qc-accept-to-warehouse.component.html","./src/app/warehouse/modals/set-production-list-locator/set-production-list-locator.component.ts","./src/app/warehouse/modals/set-production-list-locator/set-production-list-locator.component.html","./src/app/warehouse/models/warehouse-product.ts","./src/app/warehouse/services/delivery-chain.service.ts","./src/app/warehouse/services/list-product.service.ts","./src/app/warehouse/services/list.service.ts","./src/app/warehouse/services/locator.service.ts","./src/app/warehouse/services/order-technical-equipments.service.ts","./src/app/warehouse/services/physical-inventory.service.ts","./src/app/warehouse/services/qc-list-modal.service.ts","./src/app/warehouse/services/request.service.ts","./src/app/warehouse/services/technical-equipments-in-use.service.ts","./src/app/warehouse/services/tool-order.service.ts","./src/app/warehouse/services/tool-request.service.ts","./src/app/warehouse/services/unit-measure.service.ts","./src/app/warehouse/services/warehouse-product.service.ts","./src/app/warehouse/services/warehouse.service.ts","./src/app/warehouse/warehouse.module.ts","./src/app/warehouse/warehouse.routing.ts","./src/environments/environment.prod.ts","./src/environments/environment.ts","./src/main.ts","ignored|D:\\work\\pekauto\\New_Frontend\\node_modules\\pdfjs-dist\\build|canvas","ignored|D:\\work\\pekauto\\New_Frontend\\node_modules\\pdfjs-dist\\build|fs","ignored|D:\\work\\pekauto\\New_Frontend\\node_modules\\pdfjs-dist\\build|http","ignored|D:\\work\\pekauto\\New_Frontend\\node_modules\\pdfjs-dist\\build|https","ignored|D:\\work\\pekauto\\New_Frontend\\node_modules\\pdfjs-dist\\build|url","ignored|D:\\work\\pekauto\\New_Frontend\\node_modules\\pdfjs-dist\\build|zlib"],"sourcesContent":["import { Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-root',\r\n  templateUrl: './app.component.html',\r\n  styleUrls: ['./app.component.scss']\r\n})\r\nexport class AppComponent {\r\n  title = 'slopehelper-erp-frontend';\r\n}\r\n","<router-outlet></router-outlet>\r\n\r\n<p-toast position=\"bottom-right\"></p-toast>\r\n","import {NgModule, Provider} from '@angular/core';\r\nimport {BrowserModule} from '@angular/platform-browser';\r\n\r\nimport {AppRouting} from './app.routing';\r\nimport {AppComponent} from './app.component';\r\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\r\nimport {LayoutModule} from './layout/layout.module';\r\nimport {HTTP_INTERCEPTORS, HttpClientModule} from '@angular/common/http';\r\nimport {AuthModule} from './auth/auth.module';\r\nimport {AuthGuard} from './auth/auth.guard';\r\nimport {AuthInterceptor} from './auth/auth.interceptor';\r\nimport {ConfirmationModule} from './confirmation/confirmation.module';\r\nimport {DeliveryChainsModule} from './delivery-chains/delivery-chains.module';\r\nimport {GuideModule} from './guide/guide.module';\r\nimport {ErrorInterceptor} from '@shared/interceptors/error-interceptor';\r\nimport { MessageService } from 'primeng/api';\r\nimport {ToastModule} from 'primeng/toast';\r\nimport {ProductStructureModule} from './product-structure/product-structure.module';\r\nimport {NgxMaskModule} from 'ngx-mask';\r\nimport {PdfViewerModule} from 'ng2-pdf-viewer';\r\nimport {PaymentsModule} from \"./payments/payments.module\";\r\nimport {QrCodeModule} from './qr-code/qr-code.module';\r\nimport {PurchasingModule} from './purchasing/purchasing.module';\r\nimport {OutsourcingModule} from './outsourcing/outsourcing.module';\r\nimport {ProcurementModule} from './procurement/procurement.module';\r\n\r\nconst INTERCEPTOR_PROVIDER: Provider = {\r\n  provide: HTTP_INTERCEPTORS,\r\n  useClass: AuthInterceptor,\r\n  multi: true,\r\n};\r\n\r\nconst INTERCEPTORS_ERROR: Provider = {\r\n  provide: HTTP_INTERCEPTORS,\r\n  useClass: ErrorInterceptor,\r\n  multi: true,\r\n};\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AppComponent\r\n  ],\r\n  imports: [\r\n    BrowserModule,\r\n    BrowserAnimationsModule,\r\n    AppRouting,\r\n    HttpClientModule,\r\n    AuthModule,\r\n    LayoutModule,\r\n    ConfirmationModule,\r\n    ProductStructureModule,\r\n    DeliveryChainsModule,\r\n    QrCodeModule,\r\n    GuideModule,\r\n    ToastModule,\r\n    PdfViewerModule,\r\n    PaymentsModule,\r\n    PurchasingModule,\r\n    OutsourcingModule,\r\n    ProcurementModule,\r\n  ],\r\n  providers: [\r\n    MessageService,\r\n    INTERCEPTOR_PROVIDER,\r\n    INTERCEPTORS_ERROR,\r\n    AuthGuard,\r\n  ],\r\n  bootstrap: [AppComponent]\r\n})\r\nexport class AppModule {\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {LayoutComponent} from './layout/components/layout/layout.component';\r\nimport {AuthGuard} from './auth/auth.guard';\r\nimport {ExternalUriGuard} from '@shared/guards/external-uri.guard';\r\nimport {OrderStatusesChartComponent} from '@shared/components/order-statuses-chart/order-statuses-chart.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: LayoutComponent,\r\n    canActivate: [AuthGuard],\r\n    children: [\r\n      {\r\n        path: 'dashboard',\r\n        loadChildren: () => import('./dashboard/dashboard.module').then(m => m.DashboardModule)\r\n      },\r\n      {\r\n        path: 'product-structure',\r\n        title: 'Product structure',\r\n        loadChildren: () => import('./product-structure/product-structure.module').then(m => m.ProductStructureModule)\r\n      },\r\n      {\r\n        path: 'procurement',\r\n        title: 'Procurement',\r\n        loadChildren: () => import('./procurement/procurement.module').then(m => m.ProcurementModule)\r\n      },\r\n      {\r\n        path: 'outsourcing',\r\n        title: 'Outsourcing',\r\n        loadChildren: () => import('./outsourcing/outsourcing.module').then(m => m.OutsourcingModule)\r\n      },\r\n      {\r\n        path: 'purchasing',\r\n        title: 'Purchasing',\r\n        loadChildren: () => import('./purchasing/purchasing.module').then(m => m.PurchasingModule)\r\n      },\r\n      {\r\n        path: 'confirmation',\r\n        title: 'Confirmation',\r\n        loadChildren: () => import('./confirmation/confirmation.module').then(m => m.ConfirmationModule)\r\n      },\r\n      {\r\n        path: 'warehouse',\r\n        title: 'Warehouse',\r\n        loadChildren: () => import('./warehouse/warehouse.module').then(m => m.WarehouseModule)\r\n      },\r\n      {\r\n        path: 'sales',\r\n        title: 'Sales',\r\n        loadChildren: () => import('./sales/sales.module').then(m => m.SalesModule)\r\n      },\r\n      {\r\n        path: 'manufacturing',\r\n        title: 'Manufacturing',\r\n        loadChildren: () => import('./manufacturing/manufacturing.module').then(m => m.ManufacturingModule)\r\n      },\r\n      {\r\n        path: 'delivery-procurement-chains',\r\n        title: 'Delivery Chains',\r\n        loadChildren: () => import('./delivery-chains/delivery-chains.module').then(m => m.DeliveryChainsModule)\r\n      },\r\n      {\r\n        path: 'statistics',\r\n        title: 'ERP Statistics',\r\n        loadChildren: () => import('./delivery-chains/delivery-chains.module').then(m => m.DeliveryChainsModule)\r\n      },\r\n      {\r\n        path: 'payments',\r\n        title: 'Payments',\r\n        loadChildren: () => import('./payments/payments.module').then(m => m.PaymentsModule)\r\n      },\r\n      {\r\n        path: 'crm',\r\n        title: 'CRM',\r\n        loadChildren: () => import('./crm/crm.module').then(m => m.CrmModule)\r\n      },\r\n      {\r\n        path: 'business-trips',\r\n        title: 'Business Trips',\r\n        loadChildren: () => import('./business-trips/business-trips.module').then(m => m.BusinessTripsModule)\r\n      },\r\n      {path: 'order-statuses-chart', component: OrderStatusesChartComponent},\r\n      {\r\n        path: 'correspondents',\r\n        title: 'Correspondents',\r\n        loadChildren: () => import('./correspondent/correspondent.module').then(m => m.CorrespondentModule)\r\n      },\r\n      {\r\n        path: 'instruments',\r\n        title: 'Instruments',\r\n        loadChildren: () => import('./instruments/instruments.module').then(m => m.InstrumentsModule)\r\n      },\r\n      {\r\n        path: 'quality-control',\r\n        title: 'Quality Control',\r\n        loadChildren: () => import('./qc/qc.module').then(m => m.QcModule)\r\n      },\r\n      {path: '', redirectTo: 'dashboard', pathMatch: 'full'},\r\n    ]\r\n  },\r\n  {path: 'login', loadChildren: () => import('./auth/auth.module').then(m => m.AuthModule)},\r\n\r\n  //  \r\n  {path: 'external/:uri', canActivate: [ExternalUriGuard], children: []},\r\n  {path: '**', redirectTo: 'dashboard', pathMatch: 'full'},\r\n  {path: '', redirectTo: 'dashboard', pathMatch: 'full'},\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forRoot(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AppRouting {\r\n}\r\n","export enum AuthState {\r\n  PENDING = 'pending',\r\n  LOGGED_IN = 'logged-in',\r\n  LOGGED_OUT = 'logged-out',\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {Router} from '@angular/router';\r\nimport {AuthService} from './auth.service';\r\nimport {Subscription, throwError} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-auth',\r\n  templateUrl: './auth.component.html',\r\n  styleUrls: ['./auth.component.scss']\r\n})\r\nexport class AuthComponent implements OnInit {\r\n\r\n  loginForm: FormGroup = this.fb.group({\r\n    username: [null, Validators.required],\r\n    password: [null, Validators.required]\r\n  });\r\n\r\n  private errorSub: Subscription;\r\n  public errorMessage: string;\r\n\r\n  constructor(\r\n    public auth: AuthService,\r\n    private fb: FormBuilder,\r\n    private router: Router,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.errorSub = this.auth.error$.subscribe(error => this.errorMessage = error);\r\n  }\r\n\r\n  login() {\r\n    const user = this.loginForm.value;\r\n    this.auth.login(user).subscribe(\r\n      () => {\r\n        this.router.navigateByUrl('/').then();\r\n      },\r\n      (error => throwError(error))\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.errorSub.unsubscribe();\r\n  }\r\n\r\n}\r\n","<div class=\"auth\">\r\n  <div class=\"auth__box\">\r\n    <div class=\"auth-header\">\r\n      <h1 class=\"logo\">Slopehelper ERP</h1>\r\n    </div>\r\n    <form [formGroup]=\"loginForm\" (ngSubmit)=\"login()\">\r\n\r\n      <div class=\"form-group\">\r\n        <input type=\"text\" pInputText formControlName=\"username\" placeholder=\"Username\">\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <input type=\"password\" pInputText formControlName=\"password\" placeholder=\"Password\">\r\n      </div>\r\n\r\n      <button pButton type=\"submit\" [disabled]=\"loginForm.invalid\">Log In</button>\r\n    </form>\r\n\r\n    <div class=\"alert alert-danger mt-3\" *ngIf=\"errorMessage\">\r\n      {{ errorMessage }}\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Injectable} from '@angular/core';\r\nimport {ActivatedRouteSnapshot, CanActivate, Router, RouterStateSnapshot, UrlTree} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\nimport {AuthService} from './auth.service';\r\nimport {map} from 'rxjs/operators';\r\nimport {AuthState} from './auth-state.enum';\r\n\r\n@Injectable()\r\nexport class AuthGuard implements CanActivate {\r\n\r\n  public loginPageUri = ['/login'];\r\n\r\n  constructor(\r\n    private auth: AuthService,\r\n    private router: Router\r\n  ) {\r\n  }\r\n\r\n  canActivate(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    return this.auth.getActualState().pipe(\r\n      map(state => {\r\n        return state === AuthState.LOGGED_IN ? true : this.router.createUrlTree(this.loginPageUri);\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest} from '@angular/common/http';\r\nimport {Observable, throwError} from 'rxjs';\r\nimport {Router} from '@angular/router';\r\nimport {catchError} from 'rxjs/operators';\r\nimport {AuthService} from './auth.service';\r\n\r\n@Injectable()\r\nexport class AuthInterceptor implements HttpInterceptor {\r\n  constructor(\r\n    private authService: AuthService,\r\n    private router: Router\r\n  ) {\r\n  }\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    if (this.authService.isAuthentificated()) {\r\n      req = req.clone({\r\n        headers: req.headers.set('Authorization', `Bearer ${this.authService.token}`)\r\n      });\r\n    }\r\n    return next.handle(req)\r\n      .pipe(\r\n        catchError((error: HttpErrorResponse) => {\r\n          if (error.status === 401) {\r\n            this.authService.logout();\r\n            this.router.navigate(['/login'], {\r\n              queryParams: {\r\n                authFailed: true\r\n              }\r\n            }).then();\r\n          }\r\n          return throwError(error);\r\n        })\r\n      );\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { AuthRouting } from './auth.routing';\r\nimport { AuthComponent } from './auth.component';\r\nimport {SharedModule} from '@shared/shared.module';\r\n\r\n\r\n@NgModule({\r\n    declarations: [\r\n        AuthComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        AuthRouting,\r\n        SharedModule,\r\n    ]\r\n})\r\nexport class AuthModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {AuthComponent} from './auth.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: AuthComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class AuthRouting { }\r\n","import {Injectable} from '@angular/core';\r\nimport {BehaviorSubject, Observable, Subject, throwError} from 'rxjs';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {catchError, debounceTime, distinctUntilChanged, filter, map, switchMap, take, tap} from 'rxjs/operators';\r\nimport {environment} from '@env/environment';\r\nimport {AuthState} from './auth-state.enum';\r\nimport {User, UserPermissions} from '@shared/models/user';\r\n\r\nexport class AuthResponse {\r\n  access: string;\r\n  refresh: string;\r\n}\r\n\r\nexport class AuthStateObject {\r\n  state: AuthState;\r\n  user: User;\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class AuthService {\r\n\r\n  readonly #onAuth$ = new BehaviorSubject<AuthStateObject>({\r\n    state: AuthState.PENDING,\r\n    user: undefined,\r\n  });\r\n\r\n  public onAuth$ = this.#onAuth$.pipe(\r\n    debounceTime(0),\r\n    distinctUntilChanged(),\r\n  );\r\n\r\n  public user: User = null;\r\n  public userPermissions: UserPermissions = null;\r\n\r\n  public error$: Subject<string> = new Subject<string>();\r\n  API_URL = environment.base_url;\r\n  readonly url = environment.users_url;\r\n\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n    setTimeout(() => {\r\n      this.getMe().subscribe();\r\n    });\r\n  }\r\n\r\n  get token(): string | null {\r\n    return localStorage.getItem('access');\r\n  }\r\n\r\n  login(user: User): Observable<User> {\r\n    return this.httpClient.post<{ data: AuthResponse }>(this.API_URL + 'token/', user).pipe(\r\n      map(response => response.data),\r\n      tap(this.setToken),\r\n      switchMap(() => this.getMe()),\r\n      catchError(this.handleError.bind(this))\r\n    );\r\n  }\r\n\r\n  private handleError(error: any): any {\r\n    const message = error.error.data.detail;\r\n    this.error$.next(message);\r\n    return throwError(error);\r\n  }\r\n\r\n  logout(): void {\r\n    this.setToken(null);\r\n  }\r\n\r\n  isAuthentificated(): boolean {\r\n    return !!this.token;\r\n  }\r\n\r\n  private setToken(response: AuthResponse | null): void {\r\n    if (response) {\r\n      localStorage.setItem('access', response.access);\r\n      localStorage.setItem('refresh', response.refresh);\r\n    } else {\r\n      localStorage.removeItem('access');\r\n      localStorage.removeItem('refresh');\r\n    }\r\n  }\r\n\r\n  public getActualState(): Observable<AuthState> {\r\n    return this.onAuth$.pipe(\r\n      filter(({state}) => state !== AuthState.PENDING),\r\n      take(1),\r\n      map(({state}) => state),\r\n    );\r\n  }\r\n\r\n  getMe(): Observable<User> {\r\n    return this.httpClient.get<{ data: User }>(this.API_URL + this.url + 'get_me/')\r\n      .pipe(\r\n        map(response => response.data),\r\n        tap(user => this.setState(user)),\r\n      );\r\n  }\r\n\r\n  setState(user: User) {\r\n    this.user = user;\r\n    if (this.user) {\r\n      this.getUserPermissions();\r\n    }\r\n\r\n    this.#onAuth$.next({\r\n      state: this.user ? AuthState.LOGGED_IN : AuthState.LOGGED_OUT,\r\n      user: this.user,\r\n    });\r\n  }\r\n\r\n  getUserPermissions() {\r\n    this.userPermissions = {\r\n      can_edit_product_structure: this.user.can_edit_product_structure,\r\n      can_edit_confirmation: this.user.can_edit_confirmation,\r\n      can_edit_warehouse: this.user.can_edit_warehouse,\r\n      can_edit_manufacturing_procurement: this.user.can_edit_manufacturing_procurement,\r\n      can_edit_quality_control: this.user.can_edit_quality_control,\r\n      can_edit_manufacturing: this.user.can_edit_manufacturing,\r\n      can_edit_contacts_and_events: this.user.can_edit_contacts_and_events,\r\n      can_edit_outsourcing: this.user.can_edit_outsourcing,\r\n      can_edit_purchase: this.user.can_edit_purchase,\r\n      can_edit_sales: this.user.can_edit_sales,\r\n      can_edit_reports: this.user.can_edit_reports,\r\n      can_edit_administration: this.user.can_edit_administration,\r\n    };\r\n  }\r\n}\r\n","export enum BusinessTripExpensesType {\r\n  CORPORATE = '0',\r\n  OWN = '1'\r\n}\r\n","export enum BusinessTripLocationTypes {\r\n  FIRST = '0',\r\n  INTERMEDIATE = '1',\r\n  LAST = '2',\r\n}\r\n","export enum BusinessTripVehicleType {\r\n  WITHOUT= '0',\r\n  PRIVATE = '1',\r\n  RENT = '2',\r\n  COMPANY_CAR = '3',\r\n}\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {DataToSend} from '../../components/edit-business-trip/edit-business-trip.component';\r\nimport {BusinessTripService} from '../../services/business-trip.service';\r\nimport {take} from 'rxjs/operators';\r\nimport {MatDialogRef} from '@angular/material/dialog';\r\nimport {Router} from '@angular/router';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-create-business-trip',\r\n  templateUrl: './create-business-trip.component.html',\r\n  styleUrls: ['./create-business-trip.component.scss']\r\n})\r\nexport class CreateBusinessTripComponent implements OnInit, OnDestroy {\r\n  form: FormGroup;\r\n  employeeFilter: [QuerySearch] = [{name: 'by_user_trip_permissions', value: true}];\r\n  private formData: FormData;\r\n  private destroy$ = new Subject();\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private businessService: BusinessTripService,\r\n    private dialogRef: MatDialogRef<CreateBusinessTripComponent>,\r\n    private router: Router\r\n    ) {\r\n    this.form = this.fb.group({\r\n      isOtherEmployee: [false],\r\n      employee: this.fb.group({\r\n        id: [null],\r\n        first_name: [null],\r\n        last_name: [null],\r\n        position: [null]\r\n      }),\r\n      employee_first_name: [''],\r\n      employee_last_name: [''],\r\n      employee_position: [null],\r\n      employee_id: [null],\r\n    });\r\n  }\r\n\r\n  tripId: number;\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  employeeChanged() {\r\n    this.form.get('employee').reset();\r\n    this.form.get('employee_first_name').reset();\r\n    this.form.get('employee_last_name').reset();\r\n    this.form.get('employee_position').reset();\r\n  }\r\n\r\n  get _employee(): FormGroup {\r\n    return (this.form.get('employee') as FormGroup) as FormGroup;\r\n  }\r\n\r\n  addBusinessTrip() {\r\n    const employee = this.form.value.employee.id ? this.form.value.employee.id : null;\r\n    this.businessService\r\n      .create({id: null, employee})\r\n      .pipe(take(1), takeUntil(this.destroy$))\r\n      .subscribe((res) => {\r\n        this.tripId = res.id;\r\n        this.employeeUpdate();\r\n      });\r\n  }\r\n\r\n  employeeUpdate() {\r\n    const employeeUpdate: DataToSend = {};\r\n    if (this.form.value.employee.id) {\r\n      employeeUpdate.employee = this.form.value.employee.id;\r\n      employeeUpdate.custom_employee = null;\r\n    } else {\r\n      const position = this.form.value.employee_position;\r\n      const firstName = this.form.value.employee_first_name;\r\n      const lastNameName = this.form.value.employee_last_name;\r\n      if (!firstName || !lastNameName) {\r\n        return;\r\n      }\r\n      employeeUpdate.custom_employee = {\r\n        id: this.form.value.employee_id,\r\n        first_name: this.form.value.employee_first_name,\r\n        last_name: this.form.value.employee_last_name,\r\n        position: position ? position : null,\r\n      };\r\n      employeeUpdate.employee = null;\r\n    }\r\n\r\n    this.businessService\r\n      .updateBusinessTripEmployee(this.tripId, employeeUpdate)\r\n      .pipe(take(1), takeUntil(this.destroy$))\r\n      .subscribe(() => {\r\n        this.router.navigate(['/business-trips/trip/edit/', this.tripId]);\r\n        this.dialogRef.close(true);\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    <span>Create Business Trip</span>\r\n  </h2>\r\n</div>\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"form-group\">\r\n          <label for=\"other\">Not Listed Employee</label>\r\n          <p-checkbox\r\n            id=\"other\"\r\n            formControlName=\"isOtherEmployee\"\r\n            [binary]=\"true\"\r\n            (onChange)=\"employeeChanged()\"\r\n          ></p-checkbox>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"form.get('isOtherEmployee').value else predefinedEmployee\">\r\n      <div class=\"row\">\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>First Name</label>\r\n            <input pInputText\r\n                   formControlName=\"employee_first_name\"\r\n                   class=\"form-control\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Last Name</label>\r\n            <input pInputText\r\n                   formControlName=\"employee_last_name\"\r\n                   class=\"form-control\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Position</label>\r\n            <app-crm-position-picker\r\n              [position]=\"this.form.get('employee_position').value\"\r\n              (valueChange)=\"form.get('employee_position').setValue($event)\"\r\n            ></app-crm-position-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <ng-template #predefinedEmployee>\r\n      <div formGroupName=\"employee\">\r\n        <div class=\"row\">\r\n          <div class=\"col-4\">\r\n            <div class=\"form-group\">\r\n              <label>First Name</label>\r\n              <pek-crm-single-employee-picker\r\n                [filters]=\"employeeFilter\"\r\n                [showProfession]=\"true\"\r\n                [employee]=\"_employee.get('id').value\"\r\n                (valueChange)=\"_employee.setValue($event)\"\r\n              ></pek-crm-single-employee-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"form-group\">\r\n              <label>Last Name</label>\r\n              <input pInputText\r\n                     [disabled]=\"true\"\r\n                     formControlName=\"last_name\"\r\n                     class=\"form-control\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"form-group\">\r\n              <label>Position</label>\r\n              <input\r\n                pInputText\r\n                disabled\r\n                [ngModel]=\"_employee.get('position').value ? _employee.get('position').value.title : null\"\r\n                [ngModelOptions]=\"{standalone: true}\"\r\n                class=\"form-control\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-template>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton label=\"Cancel\" type=\"button\" class=\"p-button-danger\" [mat-dialog-close]=\"false\"></button>\r\n  <button\r\n    pButton\r\n    [label]=\"'Add'\"\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    (click)=\"addBusinessTrip()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {take} from 'rxjs/operators';\r\nimport {VehicleService} from '../../services/vehicle.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-update-vehicle',\r\n  templateUrl: './create-update-vehicle.component.html',\r\n  styleUrls: ['./create-update-vehicle.component.scss']\r\n})\r\nexport class CreateUpdateVehicleComponent implements OnInit {\r\n  form: FormGroup;\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateUpdateVehicleComponent>,\r\n    fb: FormBuilder,\r\n    private vehiclesService: VehicleService,\r\n    @Inject(MAT_DIALOG_DATA) public data: {type: 'edit' | 'add', entity}\r\n  ) {\r\n    this.form = fb.group({\r\n      model: [null , [Validators.required]],\r\n      number: [null , [Validators.required]]\r\n    });\r\n\r\n    if (this.data.type === 'edit') {\r\n      this.form.patchValue(this.data.entity);\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n\r\n  addVehicle() {\r\n    if (this.form.valid) {\r\n      this.vehiclesService\r\n        .create(this.form.value)\r\n        .pipe(take(1))\r\n        .subscribe((res) => {\r\n          this.dialogRef.close(res);\r\n        });\r\n    }\r\n  }\r\n\r\n  editVehicle() {\r\n    if (this.form.valid) {\r\n      this.form.value.id = this.data.entity.id;\r\n      this.vehiclesService\r\n        .update( this.form.value.id, this.form.value)\r\n        .pipe(take(1))\r\n        .subscribe((res) => {\r\n          this.dialogRef.close(res);\r\n        });\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    <span *ngIf=\"data.type === 'add'\">Add Vehicle</span>\r\n    <span *ngIf=\"data.type === 'edit'\">Edit Vehicle</span>\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"model\"> Model </label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"model\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"model\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"number\">Vehicle Registration Plate </label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"number\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"number\"\r\n      />\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton label=\"Cancel\" type=\"button\" class=\"p-button-danger\" [mat-dialog-close]=\"false\"></button>\r\n  <button\r\n    pButton\r\n    [label]=\"'Add'\"\r\n    *ngIf=\"data.type === 'add'\"\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    (click)=\"addVehicle()\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    [label]=\"'Edit'\"\r\n    *ngIf=\"data.type === 'edit'\"\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    (click)=\"editVehicle()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {AfterViewInit, Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {MatDialogRef} from '@angular/material/dialog';\r\nimport {WebcamImage} from 'ngx-webcam';\r\nimport {Observable, Subject} from 'rxjs';\r\nimport {debounceTime, tap} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-take-photo-modal',\r\n  templateUrl: './take-photo-modal.component.html',\r\n  styleUrls: ['./take-photo-modal.component.scss']\r\n})\r\nexport class TakePhotoModalComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  private trigger: Subject<any> = new Subject();\r\n  public webcamImage!: WebcamImage;\r\n  private photoTaken: Subject<File> = new Subject<File>();\r\n  sysImage = '';\r\n  isPhotoTaken = false;\r\n  constructor(\r\n    private dialogRef: MatDialogRef<TakePhotoModalComponent>,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.photoTaken.pipe(tap(() => this.isPhotoTaken = true), debounceTime(200)).subscribe(file => {\r\n      this.dialogRef.close(file);\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n  }\r\n\r\n  public getSnapshot(): void {\r\n    this.trigger.next(void 0);\r\n  }\r\n  public captureImg(webcamImage: WebcamImage): void {\r\n    this.webcamImage = webcamImage;\r\n    this.sysImage = webcamImage!.imageAsDataUrl;\r\n    const file = this.makeDataUrlAsFile(this.sysImage, 'snapshot.png');\r\n    this.photoTaken.next(file);\r\n  }\r\n  public get invokeObservable(): Observable<any> {\r\n    return this.trigger.asObservable();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n  }\r\n\r\n  makeDataUrlAsFile(dataUrl, filename) {\r\n    const arr = dataUrl.split(','),\r\n      mime = arr[0].match(/:(.*?);/)[1],\r\n      bstr = atob(arr[1]);\r\n\r\n    let n = bstr.length;\r\n    const u8arr = new Uint8Array(n);\r\n    while(n--){\r\n      u8arr[n] = bstr.charCodeAt(n);\r\n    }\r\n    return new File([u8arr], filename, {type:mime});\r\n  }\r\n\r\n  fileAdded(file: File) {\r\n    this.photoTaken.next(file);\r\n  }\r\n\r\n  closeCamera() {\r\n    this.dialogRef.close(null);\r\n  }\r\n\r\n  loaded() {\r\n  }\r\n}\r\n","  <webcam\r\n    pekPasteScreenImage [trackMousePosition]=\"false\" (imageAdded)=\"fileAdded($event)\"\r\n    [class.taken]=\"isPhotoTaken\"\r\n    (load)=\"loaded()\"\r\n    [trigger]=\"invokeObservable\"\r\n    [imageType]=\"'png'\"\r\n    (imageCapture)=\"captureImg($event)\"\r\n  ></webcam>\r\n  <div class=\"background\"></div>\r\n  <button\r\n    (click)=\"getSnapshot()\"\r\n    class=\"take-photo\">TAKE PHOTO</button>\r\n  <div class=\"cancel-photo\" (click)=\"closeCamera()\">\r\n    <i class=\"pi pi-times\"></i>\r\n  </div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {environment} from '@env/environment';\r\nimport {saveAs} from 'file-saver';\r\n\r\nexport class ViewerFile {\r\n  file: any;\r\n  type?: 'loaded' | 'uploaded';\r\n  extension?: 'image' | 'pdf' | 'noSupported';\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-uploaded-data-viewer',\r\n  templateUrl: './uploaded-data-viewer.component.html',\r\n  styleUrls: ['./uploaded-data-viewer.component.scss']\r\n})\r\nexport class UploadedDataViewerComponent implements OnInit {\r\n  dataToDisplay: ViewerFile[] = [];\r\n  url = environment.image_path;\r\n\r\n  offsetSlider = 0;\r\n  activeSlideIndex = 0;\r\n  isLoading = false;\r\n\r\n  galleryWidth = 1300;\r\n  constructor(\r\n    private dialogRef: MatDialogRef<UploadedDataViewerComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { links: any[], files: any[] },\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.activeSlideIndex = 1;\r\n    this.prepareFiles();\r\n  }\r\n\r\n\r\n  prepareFiles() {\r\n    if (this.data.links) {\r\n      this.data.links.forEach(link => {\r\n        const imageExtensions = ['png', 'jpg', 'jpeg'];\r\n        const pdfExtension = ['pdf'];\r\n        const splited = link.file.split('.');\r\n        const ext = splited[splited.length - 1];\r\n\r\n        let extension: 'image' | 'pdf' | 'noSupported' = 'noSupported';\r\n        if (imageExtensions.includes(ext)) {\r\n          extension = 'image';\r\n        }\r\n        if (pdfExtension.includes(ext)) {\r\n          extension = 'pdf';\r\n        }\r\n\r\n        this.dataToDisplay.push({file: link, type: 'uploaded', extension});\r\n      });\r\n    }\r\n\r\n    if (this.data.files) {\r\n      this.data.files.forEach(file => {\r\n        let extension: 'image' | 'pdf' | 'noSupported' = 'noSupported';\r\n        if (file.file.includes('image/png') || file.file.includes('image/jpeg')) {\r\n          extension = 'image';\r\n        }\r\n        if (file.file.includes('application/pdf')) {\r\n          extension = 'pdf';\r\n        }\r\n        this.dataToDisplay.push({file, type: 'loaded', extension});\r\n      });\r\n    }\r\n  }\r\n\r\n  onSlideNext() {\r\n    if (this.activeSlideIndex === this.dataToDisplay.length) {\r\n      this.offsetSlider = 0;\r\n      this.activeSlideIndex = 1;\r\n    } else {\r\n      this.offsetSlider = this.galleryWidth * this.activeSlideIndex;\r\n      this.activeSlideIndex++;\r\n    }\r\n  }\r\n\r\n  onSlidePrev() {\r\n    if (this.activeSlideIndex === 1) {\r\n      this.offsetSlider = this.galleryWidth * (this.dataToDisplay.length - 1);\r\n      this.activeSlideIndex = this.dataToDisplay.length;\r\n    } else {\r\n      this.offsetSlider = (this.activeSlideIndex - 2) * this.galleryWidth;\r\n      this.activeSlideIndex--;\r\n    }\r\n  }\r\n\r\n  downloadMyFile() {\r\n    const currentFile = this.dataToDisplay[this.activeSlideIndex - 1];\r\n    const url = currentFile.type === 'uploaded' ? this.url : '';\r\n    const link = url + currentFile.file.file;\r\n    saveAs(link);\r\n  }\r\n\r\n  getUrl(filePath: string): string {\r\n    return filePath.startsWith('http') ? filePath : this.url + filePath;\r\n  }\r\n}\r\n","<div class=\"gallery-slider\" *ngIf=\"dataToDisplay.length > 0\">\r\n  <div class=\"gallery-slider__wrapper\">\r\n    <div\r\n      class=\"gallery-slider__inner\"\r\n      [style.width]=\"galleryWidth * dataToDisplay.length + 'px'\"\r\n      [style.transform]=\"'translateX(-' + offsetSlider + 'px)'\"\r\n    >\r\n      <div class=\"gallery-slider__slide\" *ngFor=\"let file of dataToDisplay; let idx = index\">\r\n        <img [alt]=\"' ' + idx + 1\"\r\n             *ngIf=\"file.extension === 'image'\"\r\n             alt=\"file\"\r\n             [src]=\"file.type === 'uploaded' ? getUrl(file.file.file) : file.file.file\">\r\n        <pdf-viewer *ngIf=\"file.extension === 'pdf'\"\r\n                    [src]=\"file.type === 'uploaded' ? getUrl(file.file.file) : file.file.file\"\r\n                    [render-text]=\"true\"\r\n                    [original-size]=\"false\"\r\n                    style=\"width: 1300px; height: 830px\"\r\n        ></pdf-viewer>\r\n        <div class=\"no-supported-file\" *ngIf=\"file.extension === 'noSupported'\">File Not Supported For Preview</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <button class=\"btn btn-primary\" placement=\"bottom\"\r\n          ngbTooltip=\"Download\" (click)=\"downloadMyFile()\">\r\n    <i class=\"pi pi-arrow-circle-down\"></i>\r\n  </button>\r\n  <i class=\"arrows pi pi-chevron-left btn btn-prev\" (click)=\"onSlidePrev()\" *ngIf=\"dataToDisplay.length > 1\"></i>\r\n  <i class=\"arrows pi pi-chevron-right btn btn-next\" (click)=\"onSlideNext()\" *ngIf=\"dataToDisplay.length > 1\"></i>\r\n</div>\r\n<div class=\"slider-none\" *ngIf=\"dataToDisplay.length === 0\">\r\n  No Files\r\n</div>\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Observable} from 'rxjs';\r\nimport {BusinessTrip, BusinessTripPaginated} from '../models/business-trip';\r\nimport {BusinessTripLocationTypes} from '../enums/business-trip-location-status.enum';\r\nimport {ExpensesSum} from '../models/expenses-sum';\r\nimport {map} from 'rxjs/operators';\r\nimport {UploadedDataViewerComponent} from '../modals/uploaded-data-viewer/uploaded-data-viewer.component';\r\nimport {CreateBusinessTripComponent} from '../modals/create-business-trip/create-business-trip.component';\r\nimport {TakePhotoModalComponent} from '../modals/take-photo-modal/take-photo-modal.component';\r\nimport {DataToSend} from '../components/edit-business-trip/edit-business-trip.component';\r\nimport * as Excel from 'exceljs/dist/exceljs.min.js';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {DatePipe, formatDate} from '@angular/common';\r\nimport {BusinessTripLocation} from '../models/business-trip-location';\r\nimport {BusinessTripHotel} from '../models/business-trip-hotel';\r\nimport {BusinessTripExpensesType} from '../enums/business-trip-expenses-type';\r\nimport {Currency} from '@shared/models/currency';\r\nimport {BusinessTripVehicleType} from '../enums/business-trip-vehicle-type';\r\nimport {BusinessTripCountry} from '../models/business-trip-country';\r\n\r\nconst SPACE_BETWEEN = 4;\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BusinessTripService {\r\n  API_URL = environment.base_url + environment.business_trips_url;\r\n  readonly url = 'business-trips/';\r\n  totalIndex = 1;\r\n  totalDisplayedRows = 1;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient, public dialog: MatDialog,\r\n    private adapterService: AdapterService\r\n    ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<BusinessTripPaginated> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .get<{ data: BusinessTripPaginated }>(this.API_URL + this.url + qString)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getAll(query?: QuerySearch[]): Observable<BusinessTrip[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .get<{ data: BusinessTrip[] }>(this.API_URL + this.url + qString)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getDetailed(id: number): Observable<BusinessTrip> {\r\n    return this.httpClient\r\n      .get<{ data: BusinessTrip }>(this.API_URL + this.url + id + '/detailed_business_trip/')\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getBtForExport(query?: QuerySearch[]): Observable<BusinessTrip[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .get<{ data: BusinessTrip[] }>(this.API_URL + this.url + 'for_export_business_trips/' + qString)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  updateHotelInfo(id: number, hotelData: BusinessTripHotel): Observable<BusinessTrip> {\r\n    return this.httpClient\r\n      .post<{ data: BusinessTrip }>(this.API_URL + this.url + id + '/edit_business_trip_hotel/', hotelData)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  updateBusinessTripEmployee(id: number, hotelData: DataToSend): Observable<BusinessTrip> {\r\n    return this.httpClient\r\n      .post<{ data: BusinessTrip }>(this.API_URL + this.url + id + '/update_business_trip_employee/', hotelData)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  updateBusinessTripVehicle(id: number, hotelData: DataToSend): Observable<BusinessTrip> {\r\n    return this.httpClient\r\n      .post<{ data: BusinessTrip }>(this.API_URL + this.url + id + '/update_business_trip_vehicle/', hotelData)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  create(entity) {\r\n    return this.httpClient\r\n      .post<{ data: BusinessTrip }>(this.API_URL + this.url, entity)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  update(id, entity) {\r\n    return this.httpClient.patch<{ data: BusinessTrip }>(this.API_URL + this.url + id + '/', entity);\r\n  }\r\n\r\n  delete(entity: BusinessTrip) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n\r\n  download_hotel_file(id: number) {\r\n    return this.httpClient.get(this.API_URL + 'hotel_file_download/' + id, {responseType: 'blob'})\r\n      .pipe(map(response => {\r\n        return response;\r\n      }));\r\n  }\r\n\r\n  download_expense_file(id: number) {\r\n    return this.httpClient.get(this.API_URL + 'expense_file_download/' + id, {responseType: 'blob'})\r\n      .pipe(map(response => {\r\n        return response;\r\n      }));\r\n  }\r\n\r\n  async exportToExcel(businessTripData) {\r\n    //   Excel\r\n    const workbook = new Excel.Workbook();\r\n    let worksheet: any;\r\n    let firstName = '';\r\n    let lastName = '';\r\n    let startDate = businessTripData.trip_start ? formatDate(businessTripData.trip_start, 'dd/MM/yyyy HH:mm', 'en') : null;\r\n\r\n    //   Excel\r\n    worksheet = workbook.addWorksheet('Business Trip');\r\n    this.totalIndex = 1;\r\n    this.totalDisplayedRows = 1;\r\n\r\n    worksheet.columns = [\r\n      {header: '#', key: 'index', width: 10},\r\n      {header: 'Field', key: 'firstCol', width: 40},\r\n      {header: 'Value', key: 'secondCol', width: 40},\r\n      {header: '', key: 'thirdCol', width: 40},\r\n      {header: '', key: 'fourthCol', width: 40},\r\n      {header: '', key: 'fifthCol', width: 40},\r\n      {header: '', key: 'sixthCol', width: 40},\r\n    ];\r\n\r\n    const cols = 7;\r\n    //  \r\n    let idx = 1;\r\n    while (idx <= cols) {\r\n      worksheet.getColumn(idx).alignment = {vertical: 'middle', horizontal: 'center'};\r\n      worksheet.getColumn(idx).font = {\r\n        name: 'Calibri',\r\n        size: 12,\r\n      };\r\n      idx++;\r\n    }\r\n    worksheet = this.makeHeader(worksheet);\r\n    if (businessTripData.employee) {\r\n      firstName = businessTripData.employee.first_name;\r\n      lastName = businessTripData.employee.last_name;\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Employee',\r\n        secondCol: businessTripData.employee.first_name +\r\n          ' ' + businessTripData.employee.last_name +\r\n          (businessTripData.employee.position ? ' (' + businessTripData.employee.position.title + ')' : '')\r\n      });\r\n    }\r\n\r\n    if (businessTripData.custom_employee) {\r\n      firstName = businessTripData.custom_employee.first_name;\r\n      lastName = businessTripData.custom_employee.last_name;\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Employee',\r\n        secondCol: businessTripData.custom_employee.first_name +\r\n          ' ' + businessTripData.custom_employee.last_name +\r\n          (businessTripData.custom_employee.position ? ' (' + businessTripData.custom_employee.position.title + ')' : '')\r\n      });\r\n    }\r\n\r\n    this.totalIndex++;\r\n    this.totalDisplayedRows++;\r\n    worksheet = this.makeGap(worksheet, 1);\r\n\r\n    if (businessTripData.trip_start || businessTripData.trip_end) {\r\n      // Trip Dates\r\n      const test = formatDate(businessTripData.trip_start, 'dd/mm/yyyy', 'en');\r\n      const start = businessTripData.trip_start ?\r\n        formatDate(businessTripData.trip_start, 'dd/MM/yyyy HH:mm', 'en')\r\n        : '-';\r\n      const end = businessTripData.trip_end ?\r\n        formatDate(businessTripData.trip_end, 'dd/MM/yyyy HH:mm', 'en')\r\n         : '-';\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Trip Start - End',\r\n        secondCol: start + '  -  ' + end\r\n      });\r\n      this.totalIndex++;\r\n      this.totalDisplayedRows++;\r\n    }\r\n\r\n    worksheet = this.makeGap(worksheet, 1);\r\n    // Locations\r\n    const startLocation = businessTripData.locations.find(location => location.type === BusinessTripLocationTypes.FIRST);\r\n    const lastLocation = businessTripData.locations.find(location => location.type === BusinessTripLocationTypes.LAST);\r\n    const intermediateLocations = businessTripData.locations.filter(location => location.type === BusinessTripLocationTypes.INTERMEDIATE);\r\n    if (startLocation) {\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Starting point',\r\n        secondCol: startLocation.country.name + ', ' + startLocation.address\r\n      });\r\n      this.totalIndex++;\r\n      this.totalDisplayedRows++;\r\n    }\r\n\r\n    if (lastLocation) {\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Arrival point',\r\n        secondCol: lastLocation.country.name + ', ' + lastLocation.address\r\n      });\r\n      this.totalIndex++;\r\n      this.totalDisplayedRows++;\r\n      lastLocation.location_meetings.forEach((meeting, meetingIndex) => {\r\n        worksheet.addRow({\r\n          index: this.totalDisplayedRows,\r\n          firstCol: 'Meeting Company ' + (meetingIndex + 1),\r\n          secondCol: meeting.company.name\r\n        });\r\n        meeting.contacts.forEach((person, personIndex) => {\r\n          worksheet.addRow({\r\n            index: this.totalDisplayedRows,\r\n            firstCol: 'Company Contact Person ' + (personIndex + 1),\r\n            secondCol: person.first_name + ' ' + person.last_name\r\n          });\r\n          this.totalIndex++;\r\n          this.totalDisplayedRows++;\r\n        });\r\n\r\n        this.totalIndex++;\r\n        this.totalDisplayedRows++;\r\n        worksheet = this.makeGap(worksheet, 1);\r\n      });\r\n    }\r\n\r\n    worksheet = this.makeGap(worksheet, 2);\r\n    intermediateLocations.forEach((location, index) => {\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Intermediate point ' + (index + 1),\r\n        secondCol: location.country.name + ', ' + location.address\r\n      });\r\n      this.totalIndex++;\r\n      this.totalDisplayedRows++;\r\n      location.location_meetings.forEach((meeting, meetingIndex) => {\r\n        worksheet.addRow({\r\n          index: this.totalDisplayedRows,\r\n          firstCol: 'Meeting Company ' + (meetingIndex + 1),\r\n          secondCol: meeting.company.name\r\n        });\r\n        meeting.contacts.forEach((person, personIndex) => {\r\n          worksheet.addRow({\r\n            index: this.totalDisplayedRows,\r\n            firstCol: 'Company Contact Person ' + (personIndex + 1),\r\n            secondCol: person.first_name + ' ' + person.last_name\r\n          });\r\n          this.totalIndex++;\r\n          this.totalDisplayedRows++;\r\n        });\r\n\r\n        this.totalIndex++;\r\n        this.totalDisplayedRows++;\r\n        worksheet = this.makeGap(worksheet, 1);\r\n      });\r\n      worksheet = this.makeGap(worksheet, 2);\r\n    });\r\n\r\n    if (businessTripData.purpose_short) {\r\n      worksheet = this.makeGap(worksheet, 1);\r\n      // Purpose fields\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Purpose short',\r\n        secondCol: businessTripData.purpose_short\r\n      });\r\n      this.totalIndex++;\r\n      this.totalDisplayedRows++;\r\n    }\r\n\r\n    if (businessTripData.purpose_full) {\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Purpose Description',\r\n        secondCol: businessTripData.purpose_full\r\n      });\r\n      this.totalIndex++;\r\n      this.totalDisplayedRows++;\r\n    }\r\n\r\n    if (businessTripData.hotels.length > 0) {\r\n      businessTripData.hotels.forEach(hotel => {\r\n        worksheet = this.makeGap(worksheet, 1);\r\n        // Hotel\r\n        // if (businessTripData.hotel) {\r\n          worksheet.addRow({\r\n            index: this.totalDisplayedRows,\r\n            firstCol: 'Hotel Name',\r\n            secondCol: hotel.name\r\n          });\r\n          this.totalIndex++;\r\n          this.totalDisplayedRows++;\r\n\r\n          if (hotel.country) {\r\n            worksheet.addRow({\r\n              index: this.totalDisplayedRows,\r\n              firstCol: 'Hotel Address',\r\n              secondCol: (hotel.country as BusinessTripCountry)?.name + ', ' + hotel.address\r\n            });\r\n            this.totalIndex++;\r\n            this.totalDisplayedRows++;\r\n          }\r\n\r\n          const start = hotel.residence_start ?\r\n            formatDate(hotel.residence_start, 'dd/MM/yyyy', 'en') : '-';\r\n          const end = hotel.residence_end ?\r\n            formatDate(hotel.residence_end, 'dd/MM/yyyy', 'en') : '-';\r\n          worksheet.addRow({\r\n            index: this.totalDisplayedRows,\r\n            firstCol: 'Hotel Residence start/end',\r\n            secondCol: start + '  -  ' + end\r\n          });\r\n          this.totalIndex++;\r\n          this.totalDisplayedRows++;\r\n          worksheet = this.makeGap(worksheet, 1);\r\n        // }\r\n      });\r\n    }\r\n\r\n    // Vehicle\r\n    if (businessTripData.vehicle && businessTripData.vehicle.vehicle_type && businessTripData.vehicle.vehicle_type !== BusinessTripVehicleType.WITHOUT) {\r\n      const vehicle = businessTripData.vehicle.vehicle ? businessTripData.vehicle.vehicle : businessTripData.vehicle.custom_vehicle;\r\n      if (vehicle) {\r\n        worksheet.addRow({\r\n          index: this.totalDisplayedRows,\r\n          firstCol: 'Vehicle Details',\r\n          secondCol: ''\r\n        });\r\n        this.totalIndex++;\r\n        this.totalDisplayedRows++;\r\n        let type = '';\r\n        if (businessTripData.vehicle.vehicle_type === BusinessTripVehicleType.PRIVATE) {\r\n          type = 'Private';\r\n        }\r\n        if (businessTripData.vehicle.vehicle_type === BusinessTripVehicleType.RENT) {\r\n          type = 'Rent';\r\n        }\r\n        if (businessTripData.vehicle.vehicle_type === BusinessTripVehicleType.COMPANY_CAR) {\r\n          type = 'Company Car';\r\n        }\r\n        worksheet.addRow({\r\n          index: this.totalDisplayedRows,\r\n          firstCol: 'Type',\r\n          secondCol: type\r\n        });\r\n        this.totalIndex++;\r\n        this.totalDisplayedRows++;\r\n        worksheet.addRow({\r\n          index: this.totalDisplayedRows,\r\n          firstCol: 'Model (number)',\r\n          secondCol: vehicle.model + ' (' + vehicle.number + ')'\r\n        });\r\n        this.totalIndex++;\r\n        this.totalDisplayedRows++;\r\n\r\n        worksheet.addRow({\r\n          index: this.totalDisplayedRows,\r\n          firstCol: 'Mileage start - end',\r\n          secondCol: businessTripData.vehicle.start_mileage + '  -  ' + businessTripData.vehicle.end_mileage\r\n        });\r\n        this.totalIndex++;\r\n        this.totalDisplayedRows++;\r\n      }\r\n    }\r\n\r\n    // INITIATOR\r\n    if (businessTripData.initiator) {\r\n      worksheet = this.makeGap(worksheet, 1);\r\n      // Initiator\r\n      worksheet.addRow({\r\n        index: this.totalDisplayedRows,\r\n        firstCol: 'Initiator',\r\n        secondCol: businessTripData.initiator?.first_name + ' ' + businessTripData.initiator?.last_name\r\n      });\r\n      this.totalIndex++;\r\n      this.totalDisplayedRows++;\r\n    }\r\n\r\n    // Gap\r\n    worksheet = this.makeGap(worksheet);\r\n\r\n    const ownEvidences = businessTripData.expenses\r\n      .filter(expense => expense.type === BusinessTripExpensesType.OWN &&\r\n              expense.is_verified === true);\r\n\r\n    if (ownEvidences.length > 0) {\r\n      // Expenses\r\n      worksheet.addRow({\r\n        index: '',\r\n        firstCol: 'OWN EVIDENCES',\r\n        secondCol: '',\r\n        thirdCol: '',\r\n        fourthCol: '',\r\n        fifthCol: '',\r\n      });\r\n      this.totalIndex++;\r\n      worksheet = this.makeHeader(worksheet);\r\n      worksheet.addRow({\r\n        index: '#',\r\n        firstCol: 'Evidence Name',\r\n        secondCol: 'Evidence Description',\r\n        thirdCol: 'Evidence Sum',\r\n        fourthCol: 'Evidence Currency',\r\n        fifthCol: 'Evidence Status',\r\n        sixthCol: 'Evidence Type',\r\n      });\r\n      this.totalIndex++;\r\n      worksheet = this.makeHeader(worksheet);\r\n\r\n      ownEvidences.forEach((expense, index) => {\r\n        const resExpense = expense.expense ? expense.expense : expense.custom_expense;\r\n        worksheet.addRow({\r\n          index: (index + 1),\r\n          firstCol: resExpense.name,\r\n          secondCol: resExpense.description,\r\n          thirdCol: expense.sum,\r\n          fourthCol: expense.currency.code,\r\n          fifthCol: expense.is_verified ? 'Verified' : 'Need Verification',\r\n          sixthCol: 'Own Evidence',\r\n        });\r\n        this.totalIndex++;\r\n      });\r\n      this.makeGap(worksheet, 1);\r\n      const ownSum: {currency: string | Currency, amount: number }[] = [];\r\n      ownEvidences.forEach(expense => {\r\n        const sumForCurrency = ownSum.find(evidence => evidence.currency === (expense.currency as Currency).code);\r\n        if (sumForCurrency) {\r\n          sumForCurrency.amount += +expense.sum;\r\n        } else {\r\n          ownSum.push({\r\n            currency: expense.currency.code,\r\n            amount: +expense.sum\r\n          });\r\n        }\r\n      });\r\n\r\n      if (ownSum.length > 0) {\r\n        // Expenses Sum\r\n        worksheet.addRow({\r\n          index: '',\r\n          firstCol: '',\r\n          secondCol: '',\r\n          thirdCol: 'Total Sum (Verified)',\r\n          fourthCol: 'Total Currency (Verified)',\r\n          fifthCol: '',\r\n        });\r\n        this.totalIndex++;\r\n        worksheet = this.makeHeader(worksheet);\r\n\r\n        ownSum.forEach(expenseSum => {\r\n          worksheet.addRow({\r\n            index: '',\r\n            firstCol: '',\r\n            secondCol: '',\r\n            thirdCol: expenseSum.amount,\r\n            fourthCol: expenseSum.currency,\r\n            fifthCol: '',\r\n          });\r\n          this.totalIndex++;\r\n        });\r\n        this.makeGap(worksheet, 3);\r\n      }\r\n    }\r\n\r\n    const corporateEvidences = businessTripData.expenses\r\n      .filter(expense => expense.type === BusinessTripExpensesType.CORPORATE &&\r\n        expense.is_verified === true);\r\n\r\n    if (corporateEvidences.length > 0) {\r\n      // Expenses\r\n      worksheet.addRow({\r\n        index: '',\r\n        firstCol: 'CORPORATE EVIDENCES',\r\n        secondCol: '',\r\n        thirdCol: '',\r\n        fourthCol: '',\r\n        fifthCol: '',\r\n        sixthCol: '',\r\n      });\r\n      this.totalIndex++;\r\n      worksheet = this.makeHeader(worksheet);\r\n      worksheet.addRow({\r\n        index: '#',\r\n        firstCol: 'Evidence Name',\r\n        secondCol: 'Evidence Description',\r\n        thirdCol: 'Evidence Sum',\r\n        fourthCol: 'Evidence Currency',\r\n        fifthCol: 'Evidence Status',\r\n        sixthCol: 'Evidence Type',\r\n      });\r\n      this.totalIndex++;\r\n      worksheet = this.makeHeader(worksheet);\r\n\r\n      corporateEvidences.forEach((expense, index) => {\r\n        const resExpense = expense.expense ? expense.expense : expense.custom_expense;\r\n        worksheet.addRow({\r\n          index: (index + 1),\r\n          firstCol: resExpense.name,\r\n          secondCol: resExpense.description,\r\n          thirdCol: expense.sum,\r\n          fourthCol: expense.currency.code,\r\n          fifthCol: expense.is_verified ? 'Verified' : 'Need Verification',\r\n          sixthCol: 'Corporate Evidence',\r\n        });\r\n        this.totalIndex++;\r\n      });\r\n      this.makeGap(worksheet, 1);\r\n\r\n      const corporateSum: {currency: string | Currency, amount: number }[] = [];\r\n      corporateEvidences.forEach(expense => {\r\n        const sumForCurrency = corporateSum.find(evidence => evidence.currency === (expense.currency as Currency).code);\r\n        if (sumForCurrency) {\r\n          sumForCurrency.amount += +expense.sum;\r\n        } else {\r\n          corporateSum.push({\r\n            currency: expense.currency.code,\r\n            amount: +expense.sum\r\n          });\r\n        }\r\n      });\r\n\r\n      if (corporateSum.length > 0) {\r\n        // Expenses Sum\r\n        worksheet.addRow({\r\n          index: '',\r\n          firstCol: '',\r\n          secondCol: '',\r\n          thirdCol: 'Total Sum (Verified)',\r\n          fourthCol: 'Total Currency (Verified)',\r\n          fifthCol: '',\r\n        });\r\n        this.totalIndex++;\r\n        worksheet = this.makeHeader(worksheet);\r\n\r\n        corporateSum.forEach(expenseSum => {\r\n          worksheet.addRow({\r\n            index: '',\r\n            firstCol: '',\r\n            secondCol: '',\r\n            thirdCol: expenseSum.amount,\r\n            fourthCol: expenseSum.currency,\r\n            fifthCol: '',\r\n          });\r\n          this.totalIndex++;\r\n        });\r\n        this.makeGap(worksheet, 3);\r\n      }\r\n    }\r\n\r\n    const canceledEvidences = businessTripData.expenses\r\n      .filter(expense => expense.is_verified === false);\r\n\r\n    if (canceledEvidences.length > 0) {\r\n      // Expenses\r\n      worksheet.addRow({\r\n        index: '',\r\n        firstCol: 'CANCELED EVIDENCES',\r\n        secondCol: '',\r\n        thirdCol: '',\r\n        fourthCol: '',\r\n        fifthCol: '',\r\n      });\r\n      this.totalIndex++;\r\n      worksheet = this.makeHeader(worksheet);\r\n      worksheet.addRow({\r\n        index: '#',\r\n        firstCol: 'Evidence Name',\r\n        secondCol: 'Evidence Description',\r\n        thirdCol: 'Evidence Sum',\r\n        fourthCol: 'Evidence Currency',\r\n        fifthCol: 'Evidence Status',\r\n        sixthCol: 'Evidence Type',\r\n      });\r\n      this.totalIndex++;\r\n      worksheet = this.makeHeader(worksheet);\r\n\r\n      canceledEvidences.forEach((expense, index) => {\r\n        const resExpense = expense.expense ? expense.expense : expense.custom_expense;\r\n        worksheet.addRow({\r\n          index: (index + 1),\r\n          firstCol: resExpense.name,\r\n          secondCol: resExpense.description,\r\n          thirdCol: expense.sum,\r\n          fourthCol: expense.currency.code,\r\n          fifthCol: 'Canceled',\r\n          sixthCol: expense.type === BusinessTripExpensesType.OWN ? 'Own Evidence' : 'Corporate Evidence',\r\n        });\r\n        this.totalIndex++;\r\n      });\r\n      this.makeGap(worksheet, 1);\r\n\r\n      const canceledSum: {currency: string | Currency, amount: number }[] = [];\r\n      canceledEvidences.forEach(expense => {\r\n        const sumForCurrency = canceledSum.find(evidence => evidence.currency === (expense.currency as Currency).code);\r\n        if (sumForCurrency) {\r\n          sumForCurrency.amount += +expense.sum;\r\n        } else {\r\n          canceledSum.push({\r\n            currency: expense.currency.code,\r\n            amount: +expense.sum\r\n          });\r\n        }\r\n      });\r\n\r\n      if (canceledSum.length > 0) {\r\n        // Expenses Sum\r\n        worksheet.addRow({\r\n          index: '',\r\n          firstCol: '',\r\n          secondCol: '',\r\n          thirdCol: 'Total Sum (Verified)',\r\n          fourthCol: 'Total Currency (Verified)',\r\n          fifthCol: '',\r\n        });\r\n        this.totalIndex++;\r\n        worksheet = this.makeHeader(worksheet);\r\n\r\n        canceledSum.forEach(expenseSum => {\r\n          worksheet.addRow({\r\n            index: '',\r\n            firstCol: '',\r\n            secondCol: '',\r\n            thirdCol: expenseSum.amount,\r\n            fourthCol: expenseSum.currency,\r\n            fifthCol: '',\r\n          });\r\n          this.totalIndex++;\r\n        });\r\n      }\r\n    }\r\n\r\n    //    \r\n    workbook.xlsx.writeBuffer().then((data: any) => {\r\n      const blob = new Blob([data], {\r\n        type:\r\n          'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\r\n      });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      document.body.appendChild(a);\r\n      a.setAttribute('style', 'display: none');\r\n      a.href = url;\r\n      a.download = `Business Trip - ${firstName} ${lastName} - ${startDate ? startDate : '' }.xlsx`;\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      a.remove();\r\n    });\r\n  }\r\n\r\n  addSection(worksheet) {\r\n    return worksheet;\r\n  }\r\n\r\n  makeGap(worksheet, spaceAmount = null) {\r\n    const spaceToPass = spaceAmount ? spaceAmount : SPACE_BETWEEN;\r\n    for (let i = 0; i < spaceToPass; i++) {\r\n      this.totalIndex++;\r\n      worksheet.addRow({\r\n        index: '',\r\n        firstCol: '',\r\n        secondCol: ''\r\n      });\r\n    }\r\n    return worksheet;\r\n  }\r\n\r\n  makeHeader(worksheet) {\r\n    worksheet.getRow(this.totalIndex).font = {\r\n      name: 'Calibri',\r\n      size: 13,\r\n      bold: true\r\n    };\r\n    return worksheet;\r\n  }\r\n\r\n  viewBusinessTripFiles(files) {\r\n    return this.dialog\r\n      .open<UploadedDataViewerComponent>(UploadedDataViewerComponent, {\r\n        width: 'auto',\r\n        height: 'auto',\r\n        data: files,\r\n        panelClass: 'gallery-modal',\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  createChangeBusinessTrip(entity: BusinessTrip = null) {\r\n    return this.dialog\r\n      .open<CreateBusinessTripComponent>(CreateBusinessTripComponent, {\r\n        width: '800px',\r\n        data: {type: entity ? 'edit' : 'add', entity},\r\n        disableClose: true,\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  takePhotoModal(entity = null, canVerify = false) {\r\n    return this.dialog\r\n      .open<TakePhotoModalComponent>(TakePhotoModalComponent, {\r\n        width: '800px',\r\n        data: {type: entity ? 'edit' : 'add', entity, canVerify},\r\n        disableClose: false,\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {Vehicle, VehiclePaginated} from '../models/vehicle';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {CreateUpdateVehicleComponent} from '../modals/create-update-vehicle/create-update-vehicle.component';\r\nimport {BusinessTripPaginated} from '../models/business-trip';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class VehicleService {\r\n  API_URL = environment.base_url + environment.business_trips_url;\r\n  readonly url = 'vehicles/';\r\n\r\n  constructor(private httpClient: HttpClient, public dialog: MatDialog) {}\r\n\r\n  get(query?: QuerySearch[]): Observable<Vehicle[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .get<{ data: Vehicle[] }>(this.API_URL + this.url + qString)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getPaginated(query?: QuerySearch[]): Observable<VehiclePaginated> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .get<{ data: VehiclePaginated }>(this.API_URL + this.url + qString)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getById(id): Observable<Vehicle> {\r\n    return this.httpClient.get<{ data: Vehicle }>(this.API_URL + this.url + id + '/').pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  create(entity) {\r\n    return this.httpClient\r\n      .post<{ data: Vehicle }>(this.API_URL + this.url, entity)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  update(id, entity: Vehicle) {\r\n    return this.httpClient.patch(this.API_URL + this.url + id + '/', entity);\r\n  }\r\n\r\n  delete(entity: Vehicle) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n\r\n  createChangeVehicle(entity: Vehicle = null) {\r\n    return this.dialog\r\n      .open<CreateUpdateVehicleComponent>(CreateUpdateVehicleComponent, {\r\n        width: '800px',\r\n        data: {type: entity ? 'edit' : 'add', entity},\r\n        disableClose: false,\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {NavigationLink} from '../../../layout/navigation-route';\r\n\r\n@Component({\r\n  selector: 'pek-confirmation-layout',\r\n  templateUrl: './confirmation-layout.component.html',\r\n  styleUrls: ['./confirmation-layout.component.scss'],\r\n})\r\nexport class ConfirmationLayoutComponent implements OnInit {\r\n\r\n  routes: NavigationLink[] = [\r\n    {label: 'Nomenclature Confirmation', commands: ['nomenclature']},\r\n    {label: 'Payments Confirmation', commands: ['payments']},\r\n    {label: 'Write Off Confirmation', commands: ['write-off']},\r\n    {label: 'Production Lists Confirmation', commands: ['production-lists']},\r\n    {label: 'Suppliers Confirmation', commands: ['suppliers']},\r\n    {label: 'Reservations Confirmation', commands: ['reservations']},\r\n    {label: 'Planning Confirmation', commands: ['planning']},\r\n  ]\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'Confirmation'\"\r\n  [routes]=\"routes\"\r\n></pek-header>\r\n\r\n<router-outlet></router-outlet>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {ENomenclatureApproval, NewNomenclature} from '@shared/models/nomenclature';\r\nimport {finalize, Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-nomenclature-confirmation',\r\n  templateUrl: './nomenclature-confirmation.component.html',\r\n  styleUrls: ['./nomenclature-confirmation.component.scss']\r\n})\r\nexport class NomenclatureConfirmationComponent implements OnInit, OnDestroy {\r\n  nomenclatures: NewNomenclature[] = [];\r\n  selectedNomenclatures: NewNomenclature[] = [];\r\n  isLoading: boolean = true;\r\n\r\n  isPendingConfirm: boolean = false;\r\n  isPendingDecline: boolean = false;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly modalService: ModalService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  getNomenclatures() {\r\n    this.nomenclatureService.getNewNomenclatures().pipe(\r\n      takeUntil(this.destroy$),\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatures = nomenclatures;\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  onConfirm() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingConfirm= true;\r\n        const confirmNomenclatures = [];\r\n\r\n        this.selectedNomenclatures.forEach(nomenclature => {\r\n          confirmNomenclatures.push({\r\n            id: nomenclature.id,\r\n            approved: ENomenclatureApproval.APPROVED\r\n          });\r\n        });\r\n\r\n        this.nomenclatureService.updateSeveralPartly(confirmNomenclatures).pipe(\r\n          finalize(() => this.isPendingConfirm = false)\r\n        ).subscribe(() => {\r\n          confirmNomenclatures.forEach(nomenclature => {\r\n            this.nomenclatures = [...this.nomenclatures.filter(product => product.id !== nomenclature.id)];\r\n          });\r\n\r\n          this.selectedNomenclatures = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onDecline() {\r\n    this.modalService.confirm('danger', 'Decline').subscribe(decline => {\r\n      if (decline) {\r\n        this.isPendingDecline = true;\r\n        const declineNomenclatures = [];\r\n\r\n        this.selectedNomenclatures.forEach(product => {\r\n          declineNomenclatures.push({\r\n            id: product.id,\r\n            approved: ENomenclatureApproval.DECLINED\r\n          });\r\n        });\r\n\r\n        this.nomenclatureService.updateSeveralPartly(declineNomenclatures).pipe(\r\n          finalize(() => this.isPendingDecline = false)\r\n        ).subscribe(() => {\r\n          declineNomenclatures.forEach(nomenclature => {\r\n            this.nomenclatures = [...this.nomenclatures.filter(product => product.id !== nomenclature.id)];\r\n          });\r\n\r\n          this.selectedNomenclatures = [];\r\n          this.isPendingDecline = false;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'confirmation'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Nomenclature Confirmation</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.65rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"nomenclatures.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedNomenclatures\"\r\n        [value]=\"nomenclatures\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-times\"\r\n              label=\"Decline\"\r\n              class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n              [loading]=\"isPendingDecline\"\r\n              (click)=\"onDecline()\"\r\n              [disabled]=\"selectedNomenclatures?.length === 0\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-check\"\r\n              label=\"Confirm\"\r\n              class=\"p-button-success p-button-icon\"\r\n              [loading]=\"isPendingConfirm\"\r\n              (click)=\"onConfirm()\"\r\n              [disabled]=\"selectedNomenclatures?.length === 0\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\">\r\n              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 45%\">Name</th>\r\n            <th style=\"width: 47%\">Root Items</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\">\r\n              <p-tableCheckbox [value]=\"nomenclature\"></p-tableCheckbox>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 45%\">{{nomenclature.name}}</td>\r\n            <td style=\"width: 47%\">\r\n              <ng-container *ngFor=\"let parent of nomenclature.parents; let idx = index\">\r\n                {{parent.name}}<span *ngIf=\"idx !== nomenclature.parents.length - 1\">, </span>\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && nomenclatures.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ServiceInvoicePaymentService} from '../../../payments/services/service-invoice-payment.service';\r\nimport {ServiceInvoicePayment} from '../../../payments/models/service-invoice-payment';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {finalize, forkJoin, Subject, takeUntil} from 'rxjs';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  PaymentConfirmationLimitComponent\r\n} from '../../modals/payment-confirmation-limit/payment-confirmation-limit.component';\r\nimport {environment} from '@env/environment';\r\nimport {Payment} from '../../../payments/models/payment';\r\nimport {PaymentService} from '../../../payments/services/payment.service';\r\n\r\n@Component({\r\n  selector: 'pek-payment-confirmation',\r\n  templateUrl: './payment-confirmation.component.html',\r\n  styleUrls: ['./payment-confirmation.component.scss']\r\n})\r\nexport class PaymentConfirmationComponent implements OnInit, OnDestroy {\r\n  link = environment.link_url + 'dash/';\r\n\r\n  selectedPaymentsTotals = {\r\n    totalPricePayments: 0,\r\n    totalPriceServiceInvoicePayments: 0,\r\n    totalAmountPayments: 0,\r\n    totalAmountServiceInvoicePayments: 0\r\n  };\r\n\r\n  paymentTotals = {\r\n    totalPricePayments: 0,\r\n    totalPriceServiceInvoicePayments: 0,\r\n    totalAmountPayments: 0,\r\n    totalAmountServiceInvoicePayments: 0\r\n  };\r\n\r\n  isPendingPaymentsDecline = false;\r\n  isPendingPaymentsConfirm = false;\r\n\r\n  isPendingServiceInvoicePaymentsDecline = false;\r\n  isPendingServiceInvoicePaymentsConfirm = false;\r\n\r\n  isLoadingPayments = true;\r\n  payments: Payment[] = [];\r\n  paymentTree: TreeNode<Payment | { name: string, id: number }>[] = [];\r\n  selectedPayments: TreeNode<Payment>[] = [];\r\n\r\n  isLoadingServiceInvoicePayments = true;\r\n  serviceInvoicePayments: ServiceInvoicePayment[] = [];\r\n  serviceInvoicePaymentsTree: TreeNode<ServiceInvoicePayment | { name: string, id: number }>[] = [];\r\n  selectedServiceInvoicePayments: TreeNode<ServiceInvoicePayment>[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly paymentService: PaymentService,\r\n    private readonly serviceInvoicePaymentService: ServiceInvoicePaymentService,\r\n    private readonly modalService: ModalService,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // this.getPayments();\r\n    this.getAllPayments();\r\n  }\r\n\r\n  getAllPayments() {\r\n    forkJoin({\r\n      payments: this.paymentService.getConfirmationPayments(),\r\n      serviceInvoicePayments: this.serviceInvoicePaymentService.getConfirmationPayments()\r\n    }).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(({payments, serviceInvoicePayments}) => {\r\n      this.payments = payments.filter(payment => payment.invoice.order).filter(payment => !payment.invoice.order.purchase_category);\r\n      // @ts-ignore\r\n      this.serviceInvoicePayments.push(...payments.filter(payment => payment.invoice.order).filter(payment => payment.invoice.order.purchase_category));\r\n      this.serviceInvoicePayments.push(...serviceInvoicePayments);\r\n\r\n      this.countPaymentsTotals();\r\n      this.createPaymentsTree();\r\n\r\n      this.countServiceInvoicePaymentsTotals();\r\n      this.createServiceInvoicePaymentsTree();\r\n\r\n      this.isLoadingPayments = false;\r\n      this.isLoadingServiceInvoicePayments = false;\r\n\r\n    });\r\n  }\r\n\r\n  createPaymentsTree() {\r\n    this.paymentTree = [];\r\n\r\n    const tree: TreeNode<Payment | { name: string, id: number }>[] = [];\r\n    const categories: { name: string, id: number }[] = [];\r\n\r\n    this.payments.forEach(payment => {\r\n      if (payment.invoice.order.accounting_type === 1) {\r\n        const isAdded = categories.findIndex(el => el.id === 1);\r\n        if (isAdded < 0) {\r\n          categories.push({name: 'Manufacturing Procurement', id: 1});\r\n        }\r\n      }\r\n      if (payment.invoice.order.accounting_type === 2) {\r\n        const isAdded = categories.findIndex(el => el.id === 2);\r\n        if (isAdded < 0) {\r\n          categories.push({name: 'Outsourcing', id: 2});\r\n        }\r\n      }\r\n    });\r\n\r\n    categories.forEach(category => {\r\n      tree.push({\r\n        data: category,\r\n        expanded: true,\r\n        parent: null,\r\n        children: []\r\n      });\r\n    });\r\n\r\n    tree.forEach(node => {\r\n      this.payments.forEach(payment => {\r\n        if (payment.invoice.order.accounting_type === node.data.id) {\r\n          node.children.push({\r\n            data: payment,\r\n            expanded: false,\r\n            children: []\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    this.paymentTree = [...tree];\r\n  }\r\n\r\n  createServiceInvoicePaymentsTree() {\r\n    this.serviceInvoicePaymentsTree = [];\r\n\r\n    const tree: TreeNode<ServiceInvoicePayment | { name: string, id: number }>[] = [];\r\n    const categories: { name: string, id: number }[] = [];\r\n    this.serviceInvoicePayments.forEach(payment => {\r\n      let purchaseCategory = null;\r\n\r\n      if (payment.serviceinvoice) {\r\n        purchaseCategory = payment.serviceinvoice.order?.purchase_category;\r\n      }\r\n\r\n      // @ts-ignore\r\n      if (payment.invoice) {\r\n        // @ts-ignore\r\n        purchaseCategory = payment.invoice.order?.purchase_category;\r\n      }\r\n\r\n      if (purchaseCategory) {\r\n        const isAdded = categories.findIndex(el => el.id === purchaseCategory.id);\r\n        if (isAdded < 0) {\r\n          categories.push({name: purchaseCategory.name, id: purchaseCategory.id});\r\n        }\r\n      } else {\r\n        const isAdded = categories.findIndex(el => el.id === -2);\r\n        if (isAdded < 0) {\r\n          categories.push({name: 'Manufacturing Procurement And Outsourcing Auxiliary Invoices', id: -2});\r\n        }\r\n      }\r\n    });\r\n\r\n    categories.forEach(category => {\r\n      tree.push({\r\n        data: category,\r\n        expanded: true,\r\n        children: [],\r\n        parent: null\r\n      });\r\n    });\r\n\r\n    tree.forEach(node => {\r\n      this.serviceInvoicePayments.forEach(product => {\r\n        if (product.serviceinvoice) {\r\n          const purchaseCategory = product.serviceinvoice.order?.purchase_category;\r\n          if (purchaseCategory) {\r\n            if (purchaseCategory.id === node.data.id) {\r\n              node.children.push({\r\n                data: product,\r\n                expanded: false,\r\n                children: []\r\n              });\r\n            }\r\n          } else {\r\n            if (node.data.id === -2) {\r\n              node.children.push({\r\n                data: product,\r\n                expanded: false,\r\n                children: []\r\n              });\r\n            }\r\n          }\r\n        }\r\n\r\n        // @ts-ignore\r\n        if (product.invoice) {\r\n          // @ts-ignore\r\n          const purchaseCategory = product.invoice.order.purchase_category;\r\n\r\n          if (purchaseCategory) {\r\n            if (purchaseCategory.id === node.data.id) {\r\n              node.children.push({\r\n                data: product,\r\n                expanded: false,\r\n                children: []\r\n              });\r\n            }\r\n          }\r\n        }\r\n      });\r\n    });\r\n\r\n    this.serviceInvoicePaymentsTree = [...tree];\r\n  }\r\n\r\n  countPaymentsTotals() {\r\n    this.paymentTotals.totalPricePayments = 0;\r\n    this.paymentTotals.totalAmountPayments = 0;\r\n\r\n    this.payments.forEach(payment => {\r\n      this.paymentTotals.totalPricePayments += payment.invoice_total_price;\r\n      this.paymentTotals.totalAmountPayments += parseFloat(payment.payment_amount);\r\n    });\r\n  }\r\n\r\n  countServiceInvoicePaymentsTotals() {\r\n    this.paymentTotals.totalPriceServiceInvoicePayments = 0;\r\n    this.paymentTotals.totalAmountServiceInvoicePayments = 0;\r\n\r\n    this.serviceInvoicePayments.forEach(payment => {\r\n      this.paymentTotals.totalPriceServiceInvoicePayments += payment.service_invoice_total_price ? payment.service_invoice_total_price : payment.invoice_total_price;\r\n      this.paymentTotals.totalAmountServiceInvoicePayments += payment.service_invoice_payment_amount ? parseFloat(payment.service_invoice_payment_amount) : parseFloat(payment.payment_amount);\r\n    });\r\n  }\r\n\r\n  onConfirmPayments() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingPaymentsConfirm = true;\r\n        const ids = this.selectedPayments.filter(payment => payment.data.invoice).map(payment => payment.data.id);\r\n        this.paymentService.severalConfirm(ids).pipe(\r\n          finalize(() => this.isPendingPaymentsConfirm = false)\r\n        ).subscribe(() => {\r\n          ids.forEach(id => this.payments = [...this.payments.filter(p => p.id !== id)]);\r\n          this.countPaymentsTotals();\r\n          this.createPaymentsTree();\r\n          this.selectedPayments = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onDeclinePayments() {\r\n    this.modalService.confirm('danger', 'Decline').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingPaymentsDecline = true;\r\n        const ids = this.selectedPayments.filter(payment => payment.data.invoice).map(payment => payment.data.id);\r\n        this.paymentService.severalDecline(ids).pipe(\r\n          finalize(() => this.isPendingPaymentsDecline = false)\r\n        ).subscribe(() => {\r\n          ids.forEach(id => this.payments = [...this.payments.filter(p => p.id !== id)]);\r\n          this.countPaymentsTotals();\r\n          this.createPaymentsTree();\r\n          this.selectedPayments = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onConfirmServiceInvoicePayments() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingServiceInvoicePaymentsConfirm = true;\r\n\r\n\r\n        const serviceInvoicePaymentIds = this.selectedServiceInvoicePayments.filter(payment => payment.data.serviceinvoice).map(payment => payment.data.id);\r\n        // @ts-ignore\r\n        const paymentIds = this.selectedServiceInvoicePayments.filter(payment => payment.data.invoice).map(payment => payment.data.id);\r\n\r\n        if (paymentIds.length > 0 && serviceInvoicePaymentIds.length > 0) {\r\n          forkJoin({\r\n            serviceInvoicePaymentIds: this.serviceInvoicePaymentService.severalConfirm(serviceInvoicePaymentIds),\r\n            paymentsIds: this.paymentService.severalConfirm(paymentIds)\r\n          }).pipe(\r\n            finalize(() => this.isPendingServiceInvoicePaymentsConfirm = false)\r\n          ).subscribe(() => {\r\n            serviceInvoicePaymentIds.forEach(id => this.serviceInvoicePayments = [...this.serviceInvoicePayments.filter(p => p.id !== id)]);\r\n            paymentIds.forEach(id => this.serviceInvoicePayments = [...this.serviceInvoicePayments.filter(p => p.id !== id)]);\r\n            this.countServiceInvoicePaymentsTotals();\r\n            this.createServiceInvoicePaymentsTree();\r\n            this.selectedServiceInvoicePayments = [];\r\n          });\r\n        } else if (serviceInvoicePaymentIds.length > 0 && paymentIds.length === 0) {\r\n          this.serviceInvoicePaymentService.severalConfirm(serviceInvoicePaymentIds).pipe(\r\n            finalize(() => this.isPendingServiceInvoicePaymentsConfirm = false)\r\n          ).subscribe(() => {\r\n            serviceInvoicePaymentIds.forEach(id => this.serviceInvoicePayments = [...this.serviceInvoicePayments.filter(p => p.id !== id)]);\r\n            this.countServiceInvoicePaymentsTotals();\r\n            this.createServiceInvoicePaymentsTree();\r\n            this.selectedServiceInvoicePayments = [];\r\n          });\r\n        } else if (paymentIds.length > 0 && serviceInvoicePaymentIds.length === 0) {\r\n          this.paymentService.severalConfirm(paymentIds).pipe(\r\n            finalize(() => this.isPendingServiceInvoicePaymentsConfirm = false)\r\n          ).subscribe(() => {\r\n            paymentIds.forEach(id => this.serviceInvoicePayments = [...this.serviceInvoicePayments.filter(p => p.id !== id)]);\r\n            this.countServiceInvoicePaymentsTotals();\r\n            this.createServiceInvoicePaymentsTree();\r\n            this.selectedServiceInvoicePayments = [];\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onDeclineServiceInvoicePayments() {\r\n    this.modalService.confirm('danger', 'Decline').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingServiceInvoicePaymentsDecline = true;\r\n\r\n        const serviceInvoicePaymentIds = this.selectedServiceInvoicePayments.filter(payment => payment.data.serviceinvoice).map(payment => payment.data.id);\r\n        // @ts-ignore\r\n        const paymentIds = this.selectedServiceInvoicePayments.filter(payment => payment.data.invoice).map(payment => payment.data.id);\r\n\r\n        if (serviceInvoicePaymentIds.length > 0 && paymentIds.length > 0) {\r\n          forkJoin({\r\n            serviceInvoicePaymentIds: this.serviceInvoicePaymentService.severalDecline(serviceInvoicePaymentIds),\r\n            paymentsIds: this.serviceInvoicePaymentService.severalDecline(paymentIds)\r\n          }).pipe(\r\n            finalize(() => this.isPendingServiceInvoicePaymentsDecline = false)\r\n          ).subscribe(() => {\r\n            serviceInvoicePaymentIds.forEach(id => this.serviceInvoicePayments = [...this.serviceInvoicePayments.filter(p => p.id !== id)]);\r\n            paymentIds.forEach(id => this.serviceInvoicePayments = [...this.serviceInvoicePayments.filter(p => p.id !== id)]);\r\n            this.countServiceInvoicePaymentsTotals();\r\n            this.createServiceInvoicePaymentsTree();\r\n            this.selectedServiceInvoicePayments = [];\r\n          });\r\n        } else if (serviceInvoicePaymentIds.length > 0 && paymentIds.length === 0) {\r\n          this.serviceInvoicePaymentService.severalDecline(serviceInvoicePaymentIds).pipe(\r\n            finalize(() => this.isPendingServiceInvoicePaymentsDecline = false)\r\n          ).subscribe(() => {\r\n            serviceInvoicePaymentIds.forEach(id => this.serviceInvoicePayments = [...this.serviceInvoicePayments.filter(p => p.id !== id)]);\r\n            this.countServiceInvoicePaymentsTotals();\r\n            this.createServiceInvoicePaymentsTree();\r\n            this.selectedServiceInvoicePayments = [];\r\n          });\r\n        } else if (paymentIds.length > 0 && serviceInvoicePaymentIds.length === 0) {\r\n          this.paymentService.severalDecline(paymentIds).pipe(\r\n            finalize(() => this.isPendingServiceInvoicePaymentsDecline = false)\r\n          ).subscribe(() => {\r\n            paymentIds.forEach(id => this.serviceInvoicePayments = [...this.serviceInvoicePayments.filter(p => p.id !== id)]);\r\n            this.countServiceInvoicePaymentsTotals();\r\n            this.createServiceInvoicePaymentsTree();\r\n            this.selectedServiceInvoicePayments = [];\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditConfirmationLimit() {\r\n    return this.dialog\r\n      .open<PaymentConfirmationLimitComponent>(PaymentConfirmationLimitComponent, {\r\n        width: '30rem',\r\n        height: 'auto',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  // TODO \r\n\r\n  onGoToPaymentInvoice(payment: Payment) {\r\n    window.open(`${this.link}accounting/invoices/products/` + payment.invoice.id);\r\n  }\r\n\r\n  onGoToPaymentServiceInvoice(payment: Payment) {\r\n    window.open(`${this.link}accounting/invoices/service-invoice/` + payment.invoice.id);\r\n  }\r\n\r\n  onGoToServicePaymentInvoice(servicePayment: ServiceInvoicePayment) {\r\n    window.open(`${this.link}accounting/invoices/service-invoice/` + servicePayment.serviceinvoice.id);\r\n  }\r\n\r\n  onGoToPaymentOrder(payment: Payment) {\r\n    let link = '';\r\n\r\n    if (payment.invoice.order.accounting_type === 1) {\r\n      link = `/purchasing/chains/order/` + payment.invoice.order.id;\r\n    } else if (payment.invoice.order.accounting_type === 2) {\r\n      link = `/outsourcing/chains/order/` + payment.invoice.order.id;\r\n    }\r\n\r\n    window.open(link);\r\n  }\r\n\r\n  onGoToServiceOrder(servicePayment: ServiceInvoicePayment) {\r\n    let link = '';\r\n\r\n    if (servicePayment.serviceinvoice.order.accounting_type === 1) {\r\n      link = `/purchasing/chains/order/` + servicePayment.serviceinvoice.order.id;\r\n    } else if (servicePayment.serviceinvoice.order.accounting_type === 2) {\r\n      link = `/outsourcing/chains/order/` + servicePayment.serviceinvoice.order.id;\r\n    }\r\n\r\n    window.open(link);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  onCountSelectedPaymentsTotal() {\r\n    this.selectedPaymentsTotals.totalPricePayments = 0;\r\n    this.selectedPaymentsTotals.totalAmountPayments = 0;\r\n\r\n    this.selectedPayments.forEach(node => {\r\n      this.selectedPaymentsTotals.totalPricePayments += node.data.invoice_total_price;\r\n      this.selectedPaymentsTotals.totalAmountPayments += parseFloat(node.data.payment_amount);\r\n    });\r\n  }\r\n\r\n  countSelectedServiceInvoicePaymentsTotal() {\r\n    this.selectedPaymentsTotals.totalPriceServiceInvoicePayments = 0;\r\n    this.selectedPaymentsTotals.totalAmountServiceInvoicePayments = 0;\r\n\r\n    this.selectedServiceInvoicePayments.forEach(node => {\r\n      this.selectedPaymentsTotals.totalPriceServiceInvoicePayments += node.data.service_invoice_total_price ? node.data.service_invoice_total_price : node.data.invoice_total_price;\r\n      this.selectedPaymentsTotals.totalAmountServiceInvoicePayments += node.data.service_invoice_payment_amount ? parseFloat(node.data.service_invoice_payment_amount) : parseFloat(node.data.payment_amount);\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'confirmation'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Payments Confirmation</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-pencil\"\r\n        label=\"Payment Confirmation Limit\"\r\n        (click)=\"onEditConfirmationLimit()\">\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__tabs\">\r\n    <p-tabView class=\"custom-tabs\">\r\n      <p-tabPanel\r\n        [header]=\"'Production Lists Procurement and Outsourcing Payments (' + (isLoadingPayments ? '...' : payments.length) + ')'\"\r\n        [selected]=\"true\"\r\n      >\r\n        <div class=\"page__table\">\r\n          <p-treeTable\r\n            selectionMode=\"checkbox\"\r\n            [value]=\"paymentTree\"\r\n            [(selection)]=\"selectedPayments\"\r\n            scrollHeight=\"calc(100vh - 21.8rem)\"\r\n            [scrollable]=\"true\"\r\n            (selectionChange)=\"onCountSelectedPaymentsTotal()\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex align-items-center\">\r\n                <div class=\"payment-price\">\r\n                  <ng-container *ngIf=\"!isLoadingPayments; else paymentsEmpty\">\r\n                    Total Price: {{paymentTotals.totalPricePayments | moneyFormat}} ,\r\n                    Total Amount: {{paymentTotals.totalAmountPayments | moneyFormat}} \r\n                    <div class=\"selected-payments-price\">\r\n                      Selected Payments Total Price: {{selectedPaymentsTotals.totalPricePayments | moneyFormat}} ,\r\n                      Selected Payments Total Amount: {{selectedPaymentsTotals.totalAmountPayments | moneyFormat}} \r\n                    </div>\r\n                  </ng-container>\r\n                </div>\r\n                <button\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi-times\"\r\n                  label=\"Decline\"\r\n                  class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n                  [disabled]=\"selectedPayments?.length === 0\"\r\n                  [loading]=\"isPendingPaymentsDecline\"\r\n                  (click)=\"onDeclinePayments()\"\r\n                ></button>\r\n                <button\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi-check\"\r\n                  label=\"Confirm\"\r\n                  class=\"p-button-success p-button-icon\"\r\n                  [disabled]=\"selectedPayments?.length === 0\"\r\n                  [loading]=\"isPendingPaymentsConfirm\"\r\n                  (click)=\"onConfirmPayments()\"\r\n                ></button>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 22%\">\r\n                  <div class=\"payment-header\">\r\n                    <div class=\"payment-header-checkbox\">\r\n                      <p-treeTableHeaderCheckbox></p-treeTableHeaderCheckbox>\r\n                    </div>\r\n                    Date\r\n                  </div>\r\n                </th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Invoice</th>\r\n                <th style=\"width: 18%\">Supplier</th>\r\n                <th style=\"width: 20%\">Root list</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Invoice Total Price</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Amount</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-paymentNode let-payment=\"rowData\" let-i=\"rowIndex\">\r\n              <tr>\r\n                <td style=\"width: 22%\">\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <div class=\"table-toggler\" *ngIf=\"!payment.invoice\">\r\n                      <p-treeTableToggler [rowNode]=\"paymentNode\"></p-treeTableToggler>\r\n                    </div>\r\n\r\n                    <div class=\"table-checkbox\" *ngIf=\"payment.invoice\">\r\n                      <p-treeTableCheckbox [value]=\"paymentNode\"></p-treeTableCheckbox>\r\n                    </div>\r\n\r\n                    <div class=\"table-content\">\r\n                      <ng-container *ngIf=\"!payment.invoice; else paymentDate\">\r\n                        {{payment.name}}\r\n                      </ng-container>\r\n                    </div>\r\n\r\n                    <ng-template #paymentDate>\r\n                      {{payment.invoice.system_creation_date | date:'dd/MM/yyyy'}}\r\n                    </ng-template>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    <!--                    <a-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'accounting/invoices/products/' + payment.invoice.id]\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.invoice.self_serial_number}}-->\r\n                    <!--                    </a>-->\r\n\r\n                    <a\r\n                      appMiddleMouseClick\r\n                      (middleclick)=\"onGoToPaymentInvoice(payment)\"\r\n                      (click)=\"onGoToPaymentInvoice(payment)\"\r\n                    >\r\n                      {{payment.invoice.self_serial_number}}\r\n                    </a>\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 18%\">\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    {{payment.invoice.supplier.name}}\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 20%\">\r\n                  <ng-container>\r\n                    <div *ngIf=\"payment.invoice\">\r\n                      <ng-container *ngFor=\"let rootList of payment.invoice.root_production_plans; let idx = index\">\r\n                        {{rootList.list_product.nomenclature.name}}<span\r\n                        *ngIf=\"idx !== payment.invoice.root_production_plans.length - 1\">,</span>\r\n                      </ng-container>\r\n                    </div>\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    {{payment.invoice_total_price | moneyFormat}} \r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    {{payment.payment_amount| moneyFormat}} \r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    <!--                    <a-->\r\n                    <!--                      *ngIf=\"payment.invoice.order.accounting_type == 1\"-->\r\n                    <!--                      rel=\"noopener noreferrer\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'procurement/orders/products/' + payment.invoice.order.id]\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.invoice.order.id}}-->\r\n                    <!--                    </a>-->\r\n                    <!--                    <a-->\r\n                    <!--                      *ngIf=\"payment.invoice.order.accounting_type == 2\"-->\r\n                    <!--                      rel=\"noopener noreferrer\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'outsource/outsource-chain/products/' + payment.invoice.order.id]\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.invoice.order.id}}-->\r\n                    <!--                    </a>-->\r\n\r\n                    <a\r\n                      appMiddleMouseClick\r\n                      (middleclick)=\"onGoToPaymentOrder(payment)\"\r\n                      (click)=\"onGoToPaymentOrder(payment)\"\r\n                    >\r\n                      {{payment.invoice.order.id}}\r\n                    </a>\r\n                  </ng-container>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n                  <i *ngIf=\"isLoadingPayments\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingPayments\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </p-treeTable>\r\n        </div>\r\n      </p-tabPanel>\r\n      <p-tabPanel\r\n        [header]=\"'General Procurement Payments (' + (isLoadingServiceInvoicePayments ? '...' : serviceInvoicePayments.length) + ')'\"\r\n      >\r\n        <div class=\"page__table\">\r\n          <p-treeTable\r\n            selectionMode=\"checkbox\"\r\n            [value]=\"serviceInvoicePaymentsTree\"\r\n            [(selection)]=\"selectedServiceInvoicePayments\"\r\n            scrollHeight=\"calc(100vh - 21.8rem)\"\r\n            [scrollable]=\"true\"\r\n            (selectionChange)=\"countSelectedServiceInvoicePaymentsTotal()\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex align-items-center\">\r\n                <div class=\"payment-price\">\r\n                  <ng-container *ngIf=\"!isLoadingServiceInvoicePayments; else paymentsEmpty\">\r\n                    Total Price: {{paymentTotals.totalPriceServiceInvoicePayments | moneyFormat}} ,\r\n                    Total Amount: {{paymentTotals.totalAmountServiceInvoicePayments | moneyFormat}} \r\n\r\n                    <div class=\"selected-payments-price\">\r\n                      Selected Payments Total Price: {{selectedPaymentsTotals.totalPriceServiceInvoicePayments | moneyFormat}} ,\r\n                      Selected Payments Total Amount: {{selectedPaymentsTotals.totalAmountServiceInvoicePayments | moneyFormat}} \r\n                    </div>\r\n                  </ng-container>\r\n                </div>\r\n                <button\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi-times\"\r\n                  label=\"Decline\"\r\n                  class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n                  [disabled]=\"selectedServiceInvoicePayments?.length === 0\"\r\n                  [loading]=\"isPendingServiceInvoicePaymentsDecline\"\r\n                  (click)=\"onDeclineServiceInvoicePayments()\"\r\n                ></button>\r\n                <button\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi-check\"\r\n                  label=\"Confirm\"\r\n                  class=\"p-button-success p-button-icon\"\r\n                  [disabled]=\"selectedServiceInvoicePayments?.length === 0\"\r\n                  [loading]=\"isPendingServiceInvoicePaymentsConfirm\"\r\n                  (click)=\"onConfirmServiceInvoicePayments()\"\r\n                ></button>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 22%\">\r\n                  <div class=\"payment-header\">\r\n                    <div class=\"payment-header-checkbox\">\r\n                      <p-treeTableHeaderCheckbox></p-treeTableHeaderCheckbox>\r\n                    </div>\r\n                    Date\r\n                  </div>\r\n                </th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Invoice</th>\r\n                <th style=\"width: 18%\">Supplier</th>\r\n                <th style=\"width: 20%\">Root list</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Invoice Total Price</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Amount</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-paymentNode let-payment=\"rowData\" let-i=\"rowIndex\">\r\n              <tr>\r\n                <td style=\"width: 22%\">\r\n                  <div class=\"d-flex align-items-center\">\r\n                    <div class=\"table-toggler\" *ngIf=\"!payment.serviceinvoice && !payment.invoice\">\r\n                      <p-treeTableToggler [rowNode]=\"paymentNode\"></p-treeTableToggler>\r\n                    </div>\r\n\r\n                    <div class=\"table-checkbox\" *ngIf=\"payment.serviceinvoice || payment.invoice\">\r\n                      <p-treeTableCheckbox [value]=\"paymentNode\"></p-treeTableCheckbox>\r\n                    </div>\r\n\r\n                    <div class=\"table-content\">\r\n                      <ng-container *ngIf=\"!payment.serviceinvoice || !payment.invoice\">\r\n                        {{payment.name}}\r\n                        {{payment.id}}\r\n                      </ng-container>\r\n\r\n                      <ng-container *ngIf=\"payment.invoice\">\r\n                        {{payment.invoice.system_creation_date | date:'dd/MM/yyyy'}}\r\n                      </ng-container>\r\n\r\n                      <ng-container *ngIf=\"payment.serviceinvoice\">\r\n                        {{payment.serviceinvoice.system_creation_date | date:'dd/MM/yyyy'}}\r\n                      </ng-container>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"payment.serviceinvoice || payment.invoice\">\r\n                    <!--                    <a-->\r\n                    <!--                      *ngIf=\"payment.serviceinvoice\"-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'accounting/invoices/service-invoice/' + payment.serviceinvoice.id]\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.serviceinvoice.self_serial_number}}-->\r\n                    <!--                    </a>-->\r\n\r\n                    <!--                    <a-->\r\n                    <!--                      *ngIf=\"payment.invoice\"-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'accounting/invoices/service-invoice/' + payment.invoice.id]\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.invoice.self_serial_number}}-->\r\n                    <!--                    </a>-->\r\n                    <a\r\n                      *ngIf=\"payment.serviceinvoice\"\r\n                      appMiddleMouseClick\r\n                      (middleclick)=\"onGoToServicePaymentInvoice(payment)\"\r\n                      (click)=\"onGoToServicePaymentInvoice(payment)\"\r\n                    >\r\n                      {{payment.serviceinvoice.self_serial_number}}\r\n                    </a>\r\n\r\n                    <a\r\n                      *ngIf=\"payment.invoice\"\r\n                      appMiddleMouseClick\r\n                      (middleclick)=\"onGoToPaymentInvoice(payment)\"\r\n                      (click)=\"onGoToPaymentInvoice(payment)\"\r\n                    >\r\n                      {{payment.invoice.self_serial_number}}\r\n                    </a>\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 18%\">\r\n                  <ng-container *ngIf=\"payment.serviceinvoice\">\r\n                    {{payment.serviceinvoice.supplier.name}}\r\n                  </ng-container>\r\n\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    {{payment.invoice.supplier.name}}\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 20%\">\r\n                  <ng-container *ngIf=\"payment.serviceinvoice\">\r\n                    <div *ngFor=\"let rootList of payment.serviceinvoice.root_production_plans; let idx = index\">\r\n                      {{rootList.list_product.nomenclature.name}}\r\n                      <span *ngIf=\"idx !== payment.serviceinvoice.root_production_plans.length - 1\">,</span>\r\n                    </div>\r\n                  </ng-container>\r\n\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    <ng-container *ngFor=\"let rootList of payment.invoice.root_production_plans; let idx = index\">\r\n                      {{rootList.list_product.nomenclature.name}}<span\r\n                      *ngIf=\"idx !== payment.invoice.root_production_plans.length - 1\">,</span>\r\n                    </ng-container>\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"payment.serviceinvoice\">\r\n                    {{payment.service_invoice_total_price | moneyFormat}} \r\n                  </ng-container>\r\n\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    {{payment.invoice_total_price | moneyFormat}} \r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"payment.serviceinvoice\">\r\n                    {{payment.service_invoice_payment_amount | moneyFormat}} \r\n                  </ng-container>\r\n\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    {{payment.payment_amount | moneyFormat}} \r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"payment.serviceinvoice\">\r\n                    <!--                    <a-->\r\n                    <!--                      *ngIf=\"payment.serviceinvoice.order.accounting_type == 1\"-->\r\n                    <!--                      rel=\"noopener noreferrer\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'procurement/orders/products/' + payment.serviceinvoice.order.id]\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.serviceinvoice.order.id}}-->\r\n                    <!--                    </a>-->\r\n                    <!--                    <a-->\r\n                    <!--                      *ngIf=\"payment.serviceinvoice.order.accounting_type == 2\"-->\r\n                    <!--                      rel=\"noopener noreferrer\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'outsource/outsource-chain/products/' + payment.serviceinvoice.order.id]\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.serviceinvoice.order.id}}-->\r\n                    <!--                    </a>-->\r\n\r\n                    <a\r\n                      appMiddleMouseClick\r\n                      (middleclick)=\"onGoToServiceOrder(payment)\"\r\n                      (click)=\"onGoToServiceOrder(payment)\"\r\n                    >\r\n                      {{payment.serviceinvoice.order?.id}}\r\n                    </a>\r\n                  </ng-container>\r\n\r\n                  <ng-container *ngIf=\"payment.invoice\">\r\n                    <!--                    <a-->\r\n                    <!--                      *ngIf=\"payment.invoice.order.accounting_type == 1\"-->\r\n                    <!--                      rel=\"noopener noreferrer\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'procurement/orders/products/' + payment.invoice.order.id]\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.invoice.order.id}}-->\r\n                    <!--                    </a>-->\r\n                    <!--                    <a-->\r\n                    <!--                      *ngIf=\"payment.invoice.order.accounting_type == 2\"-->\r\n                    <!--                      rel=\"noopener noreferrer\"-->\r\n                    <!--                      target=\"_blank\"-->\r\n                    <!--                      [routerLink]=\"['/external', link + 'outsource/outsource-chain/products/' +  payment.invoice.order.id]\"-->\r\n                    <!--                    >-->\r\n                    <!--                      {{payment.invoice.order.id}}-->\r\n                    <!--                    </a>-->\r\n\r\n                    <a\r\n                      appMiddleMouseClick\r\n                      (middleclick)=\"onGoToPaymentOrder(payment)\"\r\n                      (click)=\"onGoToPaymentOrder(payment)\"\r\n                    >\r\n                      {{payment.invoice.order.id}}\r\n                    </a>\r\n                  </ng-container>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n                  <i\r\n                    *ngIf=\"isLoadingServiceInvoicePayments\"\r\n                    class=\"pi pi-spin pi-spinner\"\r\n                    style=\"font-size: 2.25rem\"\r\n                  >\r\n                  </i>\r\n                  <span *ngIf=\"!isLoadingServiceInvoicePayments\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </p-treeTable>\r\n        </div>\r\n      </p-tabPanel>\r\n    </p-tabView>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #paymentsEmpty>\r\n  <ng-container>\r\n    Total Price: ... , Total Amount: ... \r\n\r\n    <div class=\"selected-payments-price\">\r\n      Selected Payments Total Price: {{0 | moneyFormat}} ,\r\n      Selected Payments Total Amount: {{0 | moneyFormat}} \r\n    </div>\r\n  </ng-container>\r\n</ng-template>\r\n","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {TaskService} from '@shared/services/task.service';\r\nimport {Task} from '@shared/models/task';\r\nimport {tap} from 'rxjs/operators';\r\nimport {environment} from '@env/environment';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {PlanningStatus} from '../../../../../manufacturing/enums/planning-status.enum';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-confirmations-list',\r\n  templateUrl: './confirmations-list.component.html',\r\n  styleUrls: ['./confirmations-list.component.scss']\r\n})\r\nexport class ConfirmationsListComponent implements OnInit {\r\n  @Output() tasksCount: EventEmitter<string> = new EventEmitter<string>();\r\n  tasks: Task[] = [];\r\n  selectedTasks: Task[] = [];\r\n  isPendingDecline: boolean;\r\n  isPendingConfirm: boolean;\r\n  isLoading: boolean = true;\r\n  link = environment.link_url + 'dash/';\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    this.taskService.getTaskConfirmationList().pipe(untilDestroyed(this)).subscribe(data => {\r\n      data.forEach(task => {\r\n        const existing = this.tasks.find(el => el.family_id === task.family_id);\r\n        if (existing) {\r\n          existing.serial_numbers.push(...task.serial_numbers);\r\n        } else {\r\n          this.tasks.push(task);\r\n        }\r\n      });\r\n      this.tasks = [...this.tasks];\r\n      this.isLoading = false;\r\n      this.tasksCount.emit(this.tasks.length.toString());\r\n    });\r\n  }\r\n\r\n  onConfirm() {\r\n    this.selectedTasks.forEach(task => {\r\n      this.taskService.approvePlan({\r\n        planning_status: PlanningStatus.PLANNED,\r\n        family_id: task.family_id\r\n      }).pipe(tap(() => {\r\n        this.isPendingConfirm = true;\r\n      })).subscribe(() => {\r\n        this.tasks = [...this.tasks.filter(product => product.id !== task.id)];\r\n        this.tasksCount.emit(this.tasks.length.toString());\r\n        this.selectedTasks = [];\r\n        this.isPendingConfirm = false;\r\n      });\r\n    });\r\n  }\r\n\r\n  onDecline() {\r\n    this.selectedTasks.forEach(task => {\r\n      this.taskService.approvePlan({\r\n        planning_status: PlanningStatus.REQUIRES_PLANNING,\r\n        family_id: task.family_id\r\n      }).pipe(tap(() => {\r\n        this.isPendingDecline = true;\r\n      })).subscribe(() => {\r\n        this.tasks = [...this.tasks.filter(product => product.id !== task.id)];\r\n        this.tasksCount.emit(this.tasks.length.toString());\r\n        this.selectedTasks = [];\r\n        this.isPendingDecline = false;\r\n      });\r\n    });\r\n  }\r\n}\r\n","<div class=\"page__table\">\r\n  <p-table\r\n    #dt\r\n    selectionMode=\"single\"\r\n    scrollHeight=\"calc(100vh - 18.65rem)\"\r\n    [scrollable]=\"true\"\r\n    [paginator]=\"tasks.length > 0\"\r\n    [rows]=\"10\"\r\n    [(selection)]=\"selectedTasks\"\r\n    [value]=\"tasks\"\r\n  >\r\n    <ng-template pTemplate=\"caption\">\r\n      <div class=\"d-flex align-items-center\">\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-times\"\r\n          label=\"Decline\"\r\n          class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n          [loading]=\"isPendingDecline\"\r\n          (click)=\"onDecline()\"\r\n          [disabled]=\"selectedTasks.length === 0\"\r\n        ></button>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-check\"\r\n          label=\"Confirm\"\r\n          class=\"p-button-success p-button-icon\"\r\n          [loading]=\"isPendingConfirm\"\r\n          (click)=\"onConfirm()\"\r\n          [disabled]=\"selectedTasks.length === 0\"\r\n        ></button>\r\n      </div>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th [style.width.%]=\"5\">\r\n          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n        </th>\r\n        <th class=\"index-header text-center\" [style.width.%]=\"5\">#</th>\r\n        <th class=\"text-center\" [style.width.%]=\"15\">Serial Numbers</th>\r\n        <th [style.width.%]=\"10\" pSortableColumn=\"production_list_id\">\r\n          List ID\r\n          <p-sortIcon field=\"production_list_id\">\r\n          </p-sortIcon>\r\n        </th>\r\n        <th [style.width.%]=\"22.5\" pSortableColumn=\"code\">\r\n          Code\r\n          <p-sortIcon field=\"code\">\r\n          </p-sortIcon>\r\n        </th>\r\n        <th [style.width.%]=\"22.5\"  pSortableColumn=\"name\">Name\r\n                  <p-sortIcon field=\"name\">\r\n          </p-sortIcon></th>\r\n        <th [style.width.%]=\"10\"  pSortableColumn=\"created\">Created\r\n                  <p-sortIcon field=\"created\">\r\n          </p-sortIcon></th>\r\n        <th [style.width.%]=\"10\"  pSortableColumn=\"end_date\">End Date\r\n                  <p-sortIcon field=\"end_date\">\r\n          </p-sortIcon></th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-task let-i=\"rowIndex\">\r\n      <tr>\r\n        <td [style.width.%]=\"5\">\r\n          <p-tableCheckbox [value]=\"task\"></p-tableCheckbox>\r\n        </td>\r\n        <td class=\"text-center\"  [style.width.%]=\"5\">\r\n          {{i + 1}}\r\n        </td>\r\n        <td  [style.width.%]=\"15\" class=\"hovered-info\">\r\n          <ul>\r\n            <li *ngIf=\"task.serial_numbers.length > 1\">\r\n              <div class=\"text-center\">\r\n                {{1}}\r\n                . {{task.serial_numbers[0].type_with_number ? task.serial_numbers[0].type_with_number : task.serial_numbers[0].id}}\r\n              </div>\r\n              <div class=\"text-center\">...</div>\r\n            </li>\r\n            <li class=\"text-center\" *ngIf=\"task.serial_numbers.length === 1\">\r\n              {{1}}\r\n              . {{task.serial_numbers[0].type_with_number ? task.serial_numbers[0].type_with_number : task.serial_numbers[0].id}}\r\n            </li>\r\n          </ul>\r\n\r\n          <pek-hover-detailed-info-component\r\n            [moveLeft]=\"20\"\r\n            *ngIf=\"task.serial_numbers.length > 1\"\r\n          >\r\n            <ul class=\"hidden-ul\">\r\n              <li *ngFor=\"let serial of task.serial_numbers; let idx = index\">\r\n                {{idx + 1}}. {{serial.type_with_number ? serial.type_with_number : serial.id}}\r\n              </li>\r\n            </ul>\r\n          </pek-hover-detailed-info-component>\r\n        </td>\r\n        <td  [style.width.%]=\"10\">\r\n          <a  target=\"_blank\" [href]=\"link + 'production/plan/tasks/' + task.id\">{{task.production_list_id}}</a>\r\n        </td>\r\n        <td  [style.width.%]=\"22.5\">\r\n          {{task.code}}\r\n        </td>\r\n        <td  [style.width.%]=\"22.5\">\r\n          {{task.name}}\r\n        </td>\r\n        <td  [style.width.%]=\"10\">\r\n          {{task.created | date: 'dd/MM/yyyy'}}\r\n        </td>\r\n        <td  [style.width.%]=\"10\">\r\n          {{task.end_date | date: 'dd/MM/yyyy'}}\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n      <tr>\r\n        <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n          <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n          <span *ngIf=\"!isLoading\">No Records Found</span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"paginatorright\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=false\"\r\n        styleClass=\"p-button-text\"\r\n      >All\r\n      </p-button>\r\n    </ng-template>\r\n  </p-table>\r\n</div>\r\n<div *ngIf=\"!dt.paginator && !isLoading && tasks.length > 0\" class=\"paginator-return-pagination\">\r\n  <p-button\r\n    type=\"button\"\r\n    (click)=\"dt.paginator=true\"\r\n    styleClass=\"p-button-text\"\r\n  >\r\n    Return pagination\r\n  </p-button>\r\n</div>\r\n","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {Task} from '@shared/models/task';\r\nimport {TaskService} from '@shared/services/task.service';\r\nimport {tap} from 'rxjs/operators';\r\nimport {environment} from '@env/environment';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {PlanningStatus} from '../../../../../manufacturing/enums/planning-status.enum';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-corrections-list',\r\n  templateUrl: './corrections-list.component.html',\r\n  styleUrls: ['./corrections-list.component.scss']\r\n})\r\nexport class CorrectionsListComponent implements OnInit {\r\n  @Output() tasksCount: EventEmitter<string> = new EventEmitter<string>();\r\n  tasks: Task[] = [];\r\n  selectedTasks: Task[] = [];\r\n  isPendingDecline: boolean;\r\n  isPendingConfirm: boolean;\r\n  isLoading: boolean = true;\r\n  link = environment.link_url + 'dash/';\r\n\r\n  constructor(\r\n    private taskService: TaskService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getData();\r\n  }\r\n\r\n  getData() {\r\n    this.taskService.getTaskRequestToEditDate().pipe(untilDestroyed(this)).subscribe(data => {\r\n      data.forEach(task => {\r\n        const existing = this.tasks.find(el => el.family_id === task.family_id);\r\n        if (existing) {\r\n          existing.serial_numbers.push(...task.serial_numbers);\r\n        } else {\r\n          this.tasks.push(task);\r\n        }\r\n      });\r\n      this.tasks = [...this.tasks];\r\n      this.isLoading = false;\r\n      this.tasksCount.emit(this.tasks.length.toString());\r\n    });\r\n  }\r\n\r\n  onConfirm() {\r\n    this.selectedTasks.forEach(task => {\r\n      this.taskService.approveDeclineEditDatesPlan({\r\n        planning_status: PlanningStatus.REQUIRES_PLANNING,\r\n        family_id: task.family_id\r\n      }).pipe(tap(() => {\r\n        this.isPendingConfirm = true;\r\n      })).subscribe(() => {\r\n        this.tasks = [...this.tasks.filter(product => product.id !== task.id)];\r\n        this.tasksCount.emit(this.tasks.length.toString());\r\n        this.selectedTasks = [];\r\n        this.isPendingConfirm = false;\r\n      });\r\n    });\r\n  }\r\n\r\n  onDecline() {\r\n    this.selectedTasks.forEach(task => {\r\n      this.taskService.approveDeclineEditDatesPlan({\r\n        family_id: task.family_id\r\n      }).pipe(tap(() => {\r\n        this.isPendingDecline = true;\r\n      })).subscribe(() => {\r\n        this.tasks = [...this.tasks.filter(product => product.id !== task.id)];\r\n        this.tasksCount.emit(this.tasks.length.toString());\r\n        this.selectedTasks = [];\r\n        this.isPendingDecline = false;\r\n      });\r\n    });\r\n  }\r\n}\r\n","<div class=\"page__table\">\r\n  <p-table\r\n    #dt\r\n    selectionMode=\"single\"\r\n    scrollHeight=\"calc(100vh - 18.65rem)\"\r\n    [scrollable]=\"true\"\r\n    [paginator]=\"tasks.length > 0\"\r\n    [rows]=\"10\"\r\n    [(selection)]=\"selectedTasks\"\r\n    [value]=\"tasks\"\r\n  >\r\n    <ng-template pTemplate=\"caption\">\r\n      <div class=\"d-flex align-items-center\">\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-times\"\r\n          label=\"Decline\"\r\n          class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n          [loading]=\"isPendingDecline\"\r\n          (click)=\"onDecline()\"\r\n          [disabled]=\"selectedTasks.length === 0\"\r\n        ></button>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-check\"\r\n          label=\"Confirm\"\r\n          class=\"p-button-success p-button-icon\"\r\n          [loading]=\"isPendingConfirm\"\r\n          (click)=\"onConfirm()\"\r\n          [disabled]=\"selectedTasks.length === 0\"\r\n        ></button>\r\n      </div>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th [style.width.%]=\"5\">\r\n          <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n        </th>\r\n        <th class=\"index-header text-center\" [style.width.%]=\"5\">#</th>\r\n        <th class=\"text-center\" [style.width.%]=\"15\">Serial Numbers</th>\r\n        <th [style.width.%]=\"10\" pSortableColumn=\"production_list_id\">\r\n          List ID\r\n          <p-sortIcon field=\"production_list_id\">\r\n          </p-sortIcon>\r\n        </th>\r\n        <th [style.width.%]=\"22.5\" pSortableColumn=\"code\">\r\n          Code\r\n          <p-sortIcon field=\"code\">\r\n          </p-sortIcon>\r\n        </th>\r\n        <th [style.width.%]=\"22.5\"  pSortableColumn=\"name\">Name\r\n          <p-sortIcon field=\"name\">\r\n          </p-sortIcon></th>\r\n        <th [style.width.%]=\"10\"  pSortableColumn=\"created\">Created\r\n          <p-sortIcon field=\"created\">\r\n          </p-sortIcon></th>\r\n        <th [style.width.%]=\"10\"  pSortableColumn=\"end_date\">End Date\r\n          <p-sortIcon field=\"end_date\">\r\n          </p-sortIcon></th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-task let-i=\"rowIndex\">\r\n      <tr>\r\n        <td [style.width.%]=\"5\">\r\n          <p-tableCheckbox [value]=\"task\"></p-tableCheckbox>\r\n        </td>\r\n        <td class=\"text-center\"  [style.width.%]=\"5\">\r\n          {{i + 1}}\r\n        </td>\r\n        <td  [style.width.%]=\"15\">\r\n          <ul>\r\n            <li *ngIf=\"task.serial_numbers.length > 1\">\r\n              <div class=\"text-center\">\r\n                {{1}}\r\n                . {{task.serial_numbers[0].type_with_number ? task.serial_numbers[0].type_with_number : task.serial_numbers[0].id}}\r\n              </div>\r\n              <div class=\"text-center\">...</div>\r\n            </li>\r\n            <li class=\"text-center\" *ngIf=\"task.serial_numbers.length === 1\">\r\n              {{1}}\r\n              . {{task.serial_numbers[0].type_with_number ? task.serial_numbers[0].type_with_number : task.serial_numbers[0].id}}\r\n            </li>\r\n          </ul>\r\n\r\n          <pek-hover-detailed-info-component\r\n            [moveLeft]=\"20\"\r\n            *ngIf=\"task.serial_numbers.length > 1\"\r\n          >\r\n            <ul class=\"hidden-ul\">\r\n              <li *ngFor=\"let serial of task.serial_numbers; let idx = index\">\r\n                {{idx + 1}}. {{serial.type_with_number ? serial.type_with_number : serial.id}}\r\n              </li>\r\n            </ul>\r\n          </pek-hover-detailed-info-component>\r\n        </td>\r\n        <td  [style.width.%]=\"10\">\r\n          <a target=\"_blank\" [href]=\"link + 'production/plan/tasks/' + task.id\">{{task.production_list_id}}</a>\r\n        </td>\r\n        <td  [style.width.%]=\"22.5\">\r\n          {{task.code}}\r\n        </td>\r\n        <td  [style.width.%]=\"22.5\">\r\n          {{task.name}}\r\n        </td>\r\n        <td  [style.width.%]=\"10\">\r\n          {{task.created | date: 'dd/MM/yyyy'}}\r\n        </td>\r\n        <td  [style.width.%]=\"10\">\r\n          {{task.end_date | date: 'dd/MM/yyyy'}}\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n      <tr>\r\n        <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n          <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n          <span *ngIf=\"!isLoading\">No Records Found</span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"paginatorright\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=false\"\r\n        styleClass=\"p-button-text\"\r\n      >All\r\n      </p-button>\r\n    </ng-template>\r\n  </p-table>\r\n</div>\r\n<div *ngIf=\"!dt.paginator && !isLoading && tasks.length > 0\" class=\"paginator-return-pagination\">\r\n  <p-button\r\n    type=\"button\"\r\n    (click)=\"dt.paginator=true\"\r\n    styleClass=\"p-button-text\"\r\n  >\r\n    Return pagination\r\n  </p-button>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-planning-list-confirmation',\r\n  templateUrl: './planning-list-confirmation.component.html',\r\n  styleUrls: ['./planning-list-confirmation.component.scss']\r\n})\r\nexport class PlanningListConfirmationComponent implements OnInit {\r\n  confirmationListCount: string;\r\n  correctionsListCount: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'confirmation'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Planning Confirmation</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__tabs\">\r\n    <p-tabView class=\"custom-tabs\">\r\n      <p-tabPanel\r\n        [header]=\"'Request For Planing Corrections (' + (!correctionsListCount ? '...' : correctionsListCount ) + ')'\"\r\n        [selected]=\"true\"\r\n      >\r\n        <div class=\"page__table\">\r\n          <pek-corrections-list (tasksCount)=\"correctionsListCount = $event\"></pek-corrections-list>\r\n        </div>\r\n      </p-tabPanel>\r\n      <p-tabPanel\r\n        [header]=\"'Request For Planing Confirmations (' + (!confirmationListCount ?  '...' : confirmationListCount) + ')'\"\r\n      >\r\n        <div class=\"page__table\">\r\n          <pek-confirmations-list\r\n            (tasksCount)=\"confirmationListCount = $event\"></pek-confirmations-list>\r\n        </div>\r\n      </p-tabPanel>\r\n    </p-tabView>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {List} from '../../../warehouse/models/list';\r\nimport {ListService} from '../../../warehouse/services/list.service';\r\nimport {concat, finalize, Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-production-list-confirmation',\r\n  templateUrl: './production-list-confirmation.component.html',\r\n  styleUrls: ['./production-list-confirmation.component.scss']\r\n})\r\nexport class ProductionListConfirmationComponent implements OnInit, OnDestroy  {\r\n  isLoading = true;\r\n  productionLists: List[] = [];\r\n  selectedProductionLists: List[] = [];\r\n\r\n  isPendingConfirm: boolean = false;\r\n  isPendingDecline: boolean = false;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly modalService: ModalService,\r\n    private readonly listService: ListService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getProductionLists();\r\n  }\r\n\r\n  getProductionLists() {\r\n    this.listService.getProductionLists().pipe(\r\n      takeUntil(this.destroy$),\r\n    ).subscribe(productionLists => {\r\n      this.productionLists = productionLists;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onConfirm() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingConfirm = true;\r\n        const confirmProductionLists = [];\r\n\r\n        this.selectedProductionLists.forEach(productionList => {\r\n          confirmProductionLists.push({\r\n            id: productionList.id,\r\n            is_confirmed: true,\r\n          });\r\n        });\r\n\r\n        confirmProductionLists.sort((a, b) => a.id - b.id);\r\n\r\n        this.listService.updateListSeveral(confirmProductionLists).pipe(\r\n          finalize(() => this.isPendingConfirm = false)\r\n        ).subscribe(() => {\r\n          confirmProductionLists.forEach(productionList => {\r\n            this.productionLists = [...this.productionLists.filter(p => p.id !== productionList.id)];\r\n          });\r\n\r\n          this.selectedProductionLists = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onDecline() {\r\n    this.modalService.confirm('danger', 'Decline').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingDecline = true;\r\n        const declineProductionLists = [];\r\n\r\n        this.selectedProductionLists.forEach(productionList => {\r\n          declineProductionLists.push({\r\n            id: productionList.id,\r\n            is_confirmed: false,\r\n          });\r\n        });\r\n\r\n        declineProductionLists.sort((a, b) => a.id - b.id);\r\n\r\n       this.listService.updateListSeveral(declineProductionLists).pipe(\r\n          finalize(() => this.isPendingDecline = false)\r\n        ).subscribe(response => {\r\n          declineProductionLists.forEach(productionList => {\r\n            if (response) {\r\n              this.productionLists = [...this.productionLists.filter(p => p.id !== productionList.id)];\r\n            }\r\n          });\r\n\r\n          this.selectedProductionLists = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'confirmation'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Production Lists Confirmation</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.65rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"productionLists.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedProductionLists\"\r\n        [value]=\"productionLists\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-times\"\r\n              label=\"Decline\"\r\n              class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n              (click)=\"onDecline()\"\r\n              [loading]=\"isPendingDecline\"\r\n              [disabled]=\"selectedProductionLists.length === 0\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-check\"\r\n              label=\"Confirm\"\r\n              class=\"p-button-success p-button-icon\"\r\n              (click)=\"onConfirm()\"\r\n              [loading]=\"isPendingConfirm\"\r\n              [disabled]=\"selectedProductionLists.length === 0\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\">\r\n              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 30%\">Code</th>\r\n            <th style=\"width: 27%\">Name</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Quantity</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Is Grouped</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-list let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\">\r\n              <p-tableCheckbox [value]=\"list\"></p-tableCheckbox>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 30%\">{{list.nomenclature.code}}</td>\r\n            <td style=\"width: 27%\">{{list.nomenclature.name}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{list.quantity}}</td>\r\n            <td style=\"width: 20%\" class=\"text-center\">\r\n              <div class=\"icons\">\r\n                <i *ngIf=\"list.is_grouped; else notGrouped\" class=\"pi pi-check-circle success\"></i>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && productionLists.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #notGrouped>\r\n  <i class=\"pi pi-times-circle danger\"></i>\r\n</ng-template>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {WarehouseProductService} from '../../../warehouse/services/warehouse-product.service';\r\nimport {WarehouseProduct} from '../../../warehouse/models/warehouse-product';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {ENomenclatureBulk} from '@shared/models/nomenclature';\r\nimport {finalize, Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-reservation-confirmation',\r\n  templateUrl: './reservation-confirmation.component.html',\r\n  styleUrls: ['./reservation-confirmation.component.scss']\r\n})\r\nexport class ReservationConfirmationComponent implements OnInit, OnDestroy {\r\n  nomenclatureBulk = ENomenclatureBulk;\r\n\r\n  isLoading = true;\r\n  selectedProducts: WarehouseProduct[] = [];\r\n  products: WarehouseProduct[] = [];\r\n\r\n  isPendingDecline = false;\r\n  isPendingConfirm = false;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly warehouseProductsService: WarehouseProductService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getProducts();\r\n  }\r\n\r\n  getProducts() {\r\n    this.warehouseProductsService.getReservations().pipe(\r\n      takeUntil(this.destroy$),\r\n    ).subscribe(products => {\r\n      this.products = products;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onDecline() {\r\n    this.modalService.confirm('danger', 'Decline').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingDecline = true;\r\n        const ids: number[] = this.selectedProducts.map(p => p.id);\r\n        const send: { is_confirmed: boolean } = {\r\n          is_confirmed: false,\r\n        };\r\n\r\n        this.warehouseProductsService.severalUpdateReservations(ids, send).pipe(\r\n          finalize(() => this.isPendingDecline = false)\r\n        ).subscribe(() => {\r\n          ids.forEach(id => this.products = [...this.products.filter(product => product.id !== id)]);\r\n          this.selectedProducts = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onConfirm() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingConfirm = true;\r\n        const ids: number[] = this.selectedProducts.map(p => p.id);\r\n        const send: { is_confirmed: boolean } = {\r\n          is_confirmed: true,\r\n        };\r\n\r\n        this.warehouseProductsService.severalUpdateReservations(ids, send).pipe(\r\n          finalize(() => this.isPendingConfirm = false)\r\n        ).subscribe(() => {\r\n          ids.forEach(id => this.products = [...this.products.filter(product => product.id !== id)]);\r\n          this.selectedProducts = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'confirmation'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Reservations Confirmation</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.65rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"products.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedProducts\"\r\n        [value]=\"products\"\r\n        dataKey=\"id\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-times\"\r\n              label=\"Decline\"\r\n              class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n              (click)=\"onDecline()\"\r\n              [loading]=\"isPendingDecline\"\r\n              [disabled]=\"selectedProducts?.length === 0\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-check\"\r\n              label=\"Confirm\"\r\n              class=\"p-button-success p-button-icon\"\r\n              (click)=\"onConfirm()\"\r\n              [loading]=\"isPendingConfirm\"\r\n              [disabled]=\"selectedProducts?.length === 0\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\">\r\n              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 15%\">Code</th>\r\n            <th style=\"width: 15%\">Name</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Serial Number</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Created</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">List Id</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Required Quantity</th>\r\n            <th style=\"width: 12%\" class=\"text-center\">Reserved Quantity</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\">\r\n              <p-tableCheckbox [value]=\"product\"></p-tableCheckbox>\r\n            </td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 15%\">{{product.listproduct.nomenclature.code}}</td>\r\n            <td style=\"width: 15%\">\r\n              <b *ngIf=\"product.listproduct.nomenclature.bulk_or_serial === nomenclatureBulk.SERIAL\">(S)</b>\r\n              {{product.listproduct.nomenclature.name}}\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{product.serialnumber}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{product.created | date: 'dd/MM/y'}}</td>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{product?.list?.id}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{product.listproduct.required_quantity}}</td>\r\n            <td style=\"width: 12%\" class=\"text-center\">{{product.reserved_quantity}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && products.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {EOrderSupplierConfirmStatus, OrderSupplier, OrderSupplierConfirmation} from '../../../../models/order-supplier';\r\nimport {finalize, Subject, takeUntil} from 'rxjs';\r\nimport {OrderSupplierService} from '../../../../services/order-supplier.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {ListProduct} from '../../../../../warehouse/models/list-product';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Component({\r\n  selector: 'pek-tender-suppliers-list',\r\n  templateUrl: './tender-suppliers-list.component.html',\r\n  styleUrls: ['./tender-suppliers-list.component.scss']\r\n})\r\nexport class TenderSuppliersListComponent implements OnInit {\r\n  @Input() query: QuerySearch[];\r\n  @Output() confirmationsCount: EventEmitter<string> = new EventEmitter<string>();\r\n  orderSupplierConfirmStatus = EOrderSupplierConfirmStatus;\r\n\r\n  selectedOrder: OrderSupplierConfirmation;\r\n\r\n  outsourceSelectedOrderSupplierConfirmation: OrderSupplierConfirmation;\r\n  selectedOutsourceOrderSupplier: OrderSupplier;\r\n\r\n  outsourceOrderSupplierConfirmations: OrderSupplierConfirmation[] = [];\r\n  outsourceOrderSuppliers: OrderSupplier[] = [];\r\n\r\n  isLoading = true;\r\n  isLoadingOrderSuppliers = false;\r\n\r\n  isPendingConfirm = false;\r\n  isPendingDecline = false;\r\n  isPendingDeclineAll = false;\r\n\r\n  private destroy$ = new Subject();\r\n  constructor(\r\n    private readonly orderSupplierService: OrderSupplierService,\r\n    private readonly modalService: ModalService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getConfirmations();\r\n  }\r\n\r\n  getConfirmations() {\r\n    this.orderSupplierService.getConfirmations(this.query).pipe(\r\n      takeUntil(this.destroy$),\r\n    ).subscribe(confirmations => {\r\n      this.outsourceOrderSupplierConfirmations = confirmations;\r\n      this.confirmationsCount.emit(this.outsourceOrderSupplierConfirmations.length.toString());\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getRootLists(rootLists: ListProduct[]): { list: ListProduct, count?: number }[] {\r\n    const lists: { list: ListProduct, count?: number }[] = [];\r\n\r\n    rootLists.forEach((res: ListProduct) => {\r\n      const found = lists.find(el => el.list.nomenclature.name === res.nomenclature.name);\r\n\r\n      if (found) {\r\n        found.count++;\r\n      } else {\r\n        lists.push({list: res, count: 1});\r\n      }\r\n    });\r\n\r\n    return lists;\r\n  }\r\n\r\n  getConfirmStatus(status: EOrderSupplierConfirmStatus) {\r\n    switch (status) {\r\n      case EOrderSupplierConfirmStatus.UNTACHED:\r\n        return 'Untached';\r\n      case EOrderSupplierConfirmStatus.DECLINED:\r\n        return 'Declined';\r\n      case EOrderSupplierConfirmStatus.CONFIRMED:\r\n        return 'Confirmed';\r\n    }\r\n  }\r\n\r\n  getOrderSuppliers() {\r\n    this.outsourceOrderSuppliers = [];\r\n    this.isLoadingOrderSuppliers = true;\r\n    this.orderSupplierService.getOrderSuppliers(this.selectedOrder.id).pipe(\r\n      takeUntil(this.destroy$),\r\n    ).subscribe(orderSuppliers => {\r\n      this.outsourceOrderSuppliers = orderSuppliers;\r\n      this.isLoadingOrderSuppliers = false;\r\n    });\r\n  }\r\n\r\n  onSelectOutsourceOrder() {\r\n    if (this.outsourceSelectedOrderSupplierConfirmation) {\r\n      this.selectedOrder = this.outsourceSelectedOrderSupplierConfirmation;\r\n      this.getOrderSuppliers();\r\n    } else {\r\n      this.outsourceOrderSuppliers = [];\r\n      this.selectedOrder = null;\r\n    }\r\n  }\r\n\r\n  onConfirm() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingConfirm = true;\r\n        this.orderSupplierService.confirmOrderSupplier(this.selectedOutsourceOrderSupplier.id)\r\n          .pipe(\r\n            finalize(() => this.isPendingConfirm = false)\r\n          ).subscribe(() => this.clear());\r\n      }\r\n    });\r\n  }\r\n\r\n  onDecline() {\r\n    this.modalService.confirm('danger', 'Decline').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingDecline = true;\r\n        this.orderSupplierService.declineOrderSupplier(this.selectedOutsourceOrderSupplier.id)\r\n          .pipe(\r\n            finalize(() => this.isPendingDecline = false)\r\n          ).subscribe(() => {\r\n          const index = this.outsourceOrderSuppliers.findIndex(c => c.id === this.selectedOutsourceOrderSupplier.id);\r\n          this.outsourceOrderSuppliers[index].confirm_status = EOrderSupplierConfirmStatus.DECLINED;\r\n          this.selectedOutsourceOrderSupplier = null;\r\n\r\n          if (this.outsourceOrderSuppliers.every(item => item.confirm_status === EOrderSupplierConfirmStatus.DECLINED)) {\r\n            this.declineAll();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onDeclineAll() {\r\n    this.modalService.confirm('danger', 'Decline').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.declineAll();\r\n      }\r\n    });\r\n  }\r\n\r\n  declineAll() {\r\n    this.isPendingDeclineAll = true;\r\n    this.orderSupplierService.declineAll(this.outsourceSelectedOrderSupplierConfirmation.id)\r\n      .pipe(\r\n        finalize(() => this.isPendingDeclineAll = false)\r\n      ).subscribe(() => this.clear());\r\n  }\r\n\r\n  clear() {\r\n    this.outsourceOrderSupplierConfirmations = [...this.outsourceOrderSupplierConfirmations.filter(o => o.id !== this.outsourceSelectedOrderSupplierConfirmation.id)];\r\n    this.confirmationsCount.emit(this.outsourceOrderSupplierConfirmations.length.toString());\r\n    this.outsourceOrderSuppliers = [];\r\n    this.selectedOrder = null;\r\n    this.selectedOutsourceOrderSupplier = null;\r\n    this.outsourceSelectedOrderSupplierConfirmation = null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"mb-5\">\r\n  <h2 class=\"page__caption\">Suppliers Confirmation Orders</h2>\r\n  <div class=\"page__table\">\r\n    <p-table\r\n      #dt\r\n      selectionMode=\"single\"\r\n      scrollHeight=\"calc(100vh - 21.75rem)\"\r\n      [scrollable]=\"true\"\r\n      [paginator]=\"outsourceOrderSupplierConfirmations.length > 0\"\r\n      [rows]=\"10\"\r\n      [(selection)]=\"outsourceSelectedOrderSupplierConfirmation\"\r\n      [value]=\"outsourceOrderSupplierConfirmations\"\r\n      (selectionChange)=\"onSelectOutsourceOrder()\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n          <th style=\"width: 60%\">Order</th>\r\n          <th style=\"width: 35%\">Root Lists</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-confirmation let-i=\"rowIndex\">\r\n        <tr [pSelectableRow]=\"confirmation \">\r\n          <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n          <td style=\"width: 60%\">\r\n            <a\r\n              target=\"_blank\"\r\n              [routerLink]=\"'/dash/outsource/outsource-chain/products/' + confirmation.order.id\"\r\n            >\r\n              {{confirmation.order.id}}\r\n            </a>\r\n          </td>\r\n          <td>\r\n            <div\r\n              *ngFor=\"let item of getRootLists(confirmation.order.root_production_list_products); let idx = index\">\r\n              {{item.list.nomenclature.code}}~{{item.list.nomenclature.name}} ({{item.count}})\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"paginatorright\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"dt.paginator=false\"\r\n          styleClass=\"p-button-text\"\r\n        >All\r\n        </p-button>\r\n      </ng-template>\r\n    </p-table>\r\n  </div>\r\n  <div *ngIf=\"!dt.paginator && !isLoading && outsourceOrderSupplierConfirmations.length > 0\" class=\"paginator-return-pagination\">\r\n    <p-button\r\n      type=\"button\"\r\n      (click)=\"dt.paginator=true\"\r\n      styleClass=\"p-button-text\"\r\n    >\r\n      Return pagination\r\n    </p-button>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__card page__card_bottom\">\r\n\r\n  <div class=\"page__table\">\r\n    <p-table\r\n      #st\r\n      selectionMode=\"single\"\r\n      scrollHeight=\"calc(100vh - 20.875rem)\"\r\n      [scrollable]=\"true\"\r\n      [paginator]=\"outsourceOrderSuppliers.length > 0\"\r\n      [rows]=\"10\"\r\n      [(selection)]=\"selectedOutsourceOrderSupplier\"\r\n      [value]=\"outsourceOrderSuppliers\"\r\n    >\r\n      <ng-template pTemplate=\"caption\">\r\n        <div class=\"d-flex align-items-center\">\r\n          <h2 class=\"page__caption mb-0\">Suppliers Confirmation Items For Order {{selectedOrder ? selectedOrder.order.id : '...'}}</h2>\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-times\"\r\n            label=\"Decline All\"\r\n            class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n            (click)=\"onDeclineAll()\"\r\n            [loading]=\"isPendingDeclineAll\"\r\n            [disabled]=\"!outsourceSelectedOrderSupplierConfirmation\"\r\n          ></button>\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-times\"\r\n            label=\"Decline\"\r\n            class=\"p-button-danger p-button-icon mr-2\"\r\n            (click)=\"onDecline()\"\r\n            [loading]=\"isPendingDecline\"\r\n            [disabled]=\"!selectedOutsourceOrderSupplier || !outsourceSelectedOrderSupplierConfirmation || selectedOutsourceOrderSupplier?.confirm_status === orderSupplierConfirmStatus.DECLINED\"\r\n          ></button>\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-check\"\r\n            label=\"Confirm\"\r\n            class=\"p-button-success p-button-icon\"\r\n            (click)=\"onConfirm()\"\r\n            [loading]=\"isPendingConfirm\"\r\n            [disabled]=\"!selectedOutsourceOrderSupplier || !outsourceSelectedOrderSupplierConfirmation\"\r\n          ></button>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n          <th style=\"width: 30%\">Supplier</th>\r\n          <th style=\"width: 10%\" class=\"text-center\">Price</th>\r\n          <th style=\"width: 15%\" class=\"text-center\">Delivery Date</th>\r\n          <th style=\"width: 30%\">Comment</th>\r\n          <th style=\"width: 10%\" class=\"text-center\">Confirm Status</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-orderSupplier let-i=\"rowIndex\">\r\n        <tr [pSelectableRow]=\"orderSupplier\">\r\n          <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n          <td style=\"width: 30%\">{{orderSupplier.supplier}}</td>\r\n          <td style=\"width: 10%\" class=\"text-center\">{{orderSupplier.price | moneyFormat}} </td>\r\n          <td style=\"width: 15%\" class=\"text-center\">{{orderSupplier.delivery_date | date: 'dd/MM/yyyy'}}</td>\r\n          <td style=\"width: 30%\" class=\"text-center\">{{orderSupplier.comment}}</td>\r\n          <td style=\"width: 10%\" class=\"text-center\">{{getConfirmStatus(orderSupplier.confirm_status)}}</td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n            <i *ngIf=\"isLoadingOrderSuppliers\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoadingOrderSuppliers\">Select An Order</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"paginatorright\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"st.paginator=false\"\r\n          styleClass=\"p-button-text\"\r\n        >All\r\n        </p-button>\r\n      </ng-template>\r\n    </p-table>\r\n  </div>\r\n  <div *ngIf=\"!st.paginator && !isLoadingOrderSuppliers && outsourceOrderSuppliers.length > 0\" class=\"paginator-return-pagination\">\r\n    <p-button\r\n      type=\"button\"\r\n      (click)=\"st.paginator=true\"\r\n      styleClass=\"p-button-text\"\r\n    >\r\n      Return pagination\r\n    </p-button>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Component({\r\n  selector: 'pek-supplier-confirmation',\r\n  templateUrl: './supplier-confirmation.component.html',\r\n  styleUrls: ['./supplier-confirmation.component.scss']\r\n})\r\nexport class SupplierConfirmationComponent implements OnInit {\r\n  productionListQuery: QuerySearch[] = [\r\n    {\r\n      name: 'sent_to_confirmation',\r\n      value: true\r\n    },\r\n    {\r\n      name: 'has_purchase_category',\r\n      value: false\r\n    },\r\n    {\r\n      name: 'accounting_type__in',\r\n      value: 1\r\n    }\r\n  ];\r\n\r\n  generalProcurementQuery: QuerySearch[] = [\r\n    {\r\n      name: 'sent_to_confirmation',\r\n      value: true\r\n    },\r\n    {\r\n      name: 'has_purchase_category',\r\n      value: true\r\n    },\r\n    {\r\n      name: 'accounting_type__in',\r\n      value: 1\r\n    }\r\n  ];\r\n\r\n  outsourceQuery: QuerySearch[] = [\r\n    {\r\n      name: 'sent_to_confirmation',\r\n      value: true\r\n    },\r\n    {\r\n      name: 'accounting_type__in',\r\n      value: 2\r\n    }\r\n  ];\r\n\r\n  productListConfirmationsCount: string = '...';\r\n  outsourceConfirmationsCount: string = '...';\r\n  generalProcurementConfirmationsCount: string = '...';\r\n\r\n  constructor(\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'confirmation'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Suppliers Confirmation</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__tabs\">\r\n    <p-tabView class=\"custom-tabs\">\r\n      <p-tabPanel\r\n        [header]=\"'Production Lists Procurement Confirmations (' + productListConfirmationsCount + ')'\"\r\n        [selected]=\"true\"\r\n      >\r\n        <pek-tender-suppliers-list [query]=\"productionListQuery\"\r\n                                   (confirmationsCount)=\"productListConfirmationsCount = $event\"></pek-tender-suppliers-list>\r\n      </p-tabPanel>\r\n      <p-tabPanel\r\n        [header]=\"'Outsourcing Confirmations (' + outsourceConfirmationsCount + ')'\"\r\n      >\r\n        <pek-tender-suppliers-list [query]=\"outsourceQuery\"\r\n          (confirmationsCount)=\"outsourceConfirmationsCount = $event\"></pek-tender-suppliers-list>\r\n      </p-tabPanel>\r\n      <p-tabPanel\r\n        [header]=\"'General Procurement Confirmations (' + generalProcurementConfirmationsCount + ')'\"\r\n      >\r\n        <pek-tender-suppliers-list [query]=\"generalProcurementQuery\"\r\n                                   (confirmationsCount)=\"generalProcurementConfirmationsCount = $event\"></pek-tender-suppliers-list>\r\n      </p-tabPanel>\r\n    </p-tabView>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {WarehouseProduct} from '../../../warehouse/models/warehouse-product';\r\nimport {WarehouseProductService} from '../../../warehouse/services/warehouse-product.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {ENomenclatureApproval, Nomenclature} from '@shared/models/nomenclature';\r\nimport {finalize, Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-write-off-confirmation',\r\n  templateUrl: './write-off-confirmation.component.html',\r\n  styleUrls: ['./write-off-confirmation.component.scss']\r\n})\r\nexport class WriteOffConfirmationComponent implements OnInit, OnDestroy {\r\n  warehouseProducts: WarehouseProduct[] = [];\r\n  selectedWarehouseProducts: WarehouseProduct[] = [];\r\n  isLoading = true;\r\n\r\n  isPendingConfirm: boolean = false;\r\n  isPendingDecline: boolean = false;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly warehouseProductService: WarehouseProductService,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getProducts();\r\n  }\r\n\r\n  getProducts() {\r\n    this.warehouseProductService.get([{name: 'to_write_off', value: true}]).pipe(\r\n      takeUntil(this.destroy$),\r\n    ).subscribe(warehouseProducts => {\r\n      this.warehouseProducts = warehouseProducts;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onDecline() {\r\n    this.modalService.confirm('danger', 'Decline').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingDecline = true;\r\n        const declineNomenclatures: Partial<Nomenclature>[] = [];\r\n\r\n        this.selectedWarehouseProducts.forEach(product => {\r\n          declineNomenclatures.push({\r\n            id: product.id,\r\n            approved: ENomenclatureApproval.DECLINED\r\n          });\r\n        });\r\n\r\n        this.nomenclatureService.updateSeveralPartly(declineNomenclatures).pipe(\r\n          finalize(() => this.isPendingDecline = false)\r\n        ).subscribe(() => {\r\n          declineNomenclatures.forEach(nomenclature => {\r\n            this.warehouseProducts = [...this.warehouseProducts.filter(product => product.id !== nomenclature.id)];\r\n          });\r\n\r\n          this.selectedWarehouseProducts = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onConfirm() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isPendingConfirm = true;\r\n        const ids: number[] = [];\r\n\r\n        this.selectedWarehouseProducts.forEach(product => ids.push(product.id));\r\n\r\n        this.warehouseProductService.severalWriteOff(ids).pipe(\r\n          finalize(() => this.isPendingConfirm = false)\r\n        ).subscribe(() => {\r\n          ids.forEach(id => this.warehouseProducts = [...this.warehouseProducts.filter(product => product.id !== id)]);\r\n          this.selectedWarehouseProducts = [];\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'confirmation'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Write Off Confirmation</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.65rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"warehouseProducts.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedWarehouseProducts\"\r\n        [value]=\"warehouseProducts\"\r\n        dataKey=\"id\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-times\"\r\n              label=\"Decline\"\r\n              class=\"ml-auto p-button-danger p-button-icon mr-2\"\r\n              (click)=\"onDecline()\"\r\n              [loading]=\"isPendingDecline\"\r\n              [disabled]=\"selectedWarehouseProducts?.length === 0\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-check\"\r\n              label=\"Confirm\"\r\n              class=\"p-button-success p-button-icon\"\r\n              (click)=\"onConfirm()\"\r\n              [loading]=\"isPendingConfirm\"\r\n              [disabled]=\"selectedWarehouseProducts?.length === 0\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\">\r\n              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 30%\">Code</th>\r\n            <th style=\"width: 27%\">Name</th>\r\n            <th style=\"width: 15%\"  class=\"text-center\">Quantity</th>\r\n            <th style=\"width: 20%\"  class=\"text-center\">Write Off Quantity</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\">\r\n              <p-tableCheckbox [value]=\"product\"></p-tableCheckbox>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 30%\">{{product.nomenclature.code}}</td>\r\n            <td style=\"width: 27%\">{{product.nomenclature.name}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{product.total_area_locator_quantity}}</td>\r\n            <td style=\"width: 20%\" class=\"text-center\">{{product.quantity_to_write_off}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && warehouseProducts.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n\r\nimport {ConfirmationRouting} from './confirmation.routing';\r\nimport {\r\n  NomenclatureConfirmationComponent\r\n} from './components/nomenclature-confirmation/nomenclature-confirmation.component';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport {PaymentConfirmationComponent} from './components/payment-confirmation/payment-confirmation.component';\r\nimport {ConfirmationLayoutComponent} from './components/confirmation-layout/confirmation-layout.component';\r\nimport {LayoutModule} from '../layout/layout.module';\r\nimport {WriteOffConfirmationComponent} from './components/write-off-confirmation/write-off-confirmation.component';\r\nimport {\r\n  ProductionListConfirmationComponent\r\n} from './components/production-list-confirmation/production-list-confirmation.component';\r\nimport {SupplierConfirmationComponent} from './components/supplier-confirmation/supplier-confirmation.component';\r\nimport {\r\n  ReservationConfirmationComponent\r\n} from './components/reservation-confirmation/reservation-confirmation.component';\r\nimport {\r\n  PaymentConfirmationLimitComponent\r\n} from './modals/payment-confirmation-limit/payment-confirmation-limit.component';\r\nimport {\r\n  TenderSuppliersListComponent\r\n} from './components/supplier-confirmation/components/tender-suppliers-list/tender-suppliers-list.component';\r\nimport { PlanningListConfirmationComponent } from './components/planning-list-confirmation/planning-list-confirmation.component';\r\nimport { CorrectionsListComponent } from './components/planning-list-confirmation/components/corrections-list/corrections-list.component';\r\nimport { ConfirmationsListComponent } from './components/planning-list-confirmation/components/confirmations-list/confirmations-list.component';\r\n\r\n@NgModule({\r\n    declarations: [\r\n        NomenclatureConfirmationComponent,\r\n        PaymentConfirmationComponent,\r\n        ConfirmationLayoutComponent,\r\n        WriteOffConfirmationComponent,\r\n        ProductionListConfirmationComponent,\r\n        SupplierConfirmationComponent,\r\n        ReservationConfirmationComponent,\r\n        PaymentConfirmationLimitComponent,\r\n        PlanningListConfirmationComponent,\r\n        CorrectionsListComponent,\r\n        ConfirmationsListComponent,\r\n        TenderSuppliersListComponent,\r\n    ],\r\n    exports: [\r\n        SupplierConfirmationComponent\r\n    ],\r\n    imports: [\r\n        CommonModule,\r\n        ConfirmationRouting,\r\n        SharedModule,\r\n        LayoutModule,\r\n    ]\r\n})\r\nexport class ConfirmationModule {\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {\r\n  NomenclatureConfirmationComponent\r\n} from './components/nomenclature-confirmation/nomenclature-confirmation.component';\r\nimport {PaymentConfirmationComponent} from './components/payment-confirmation/payment-confirmation.component';\r\nimport {ConfirmationLayoutComponent} from './components/confirmation-layout/confirmation-layout.component';\r\nimport {WriteOffConfirmationComponent} from './components/write-off-confirmation/write-off-confirmation.component';\r\nimport {\r\n  ProductionListConfirmationComponent\r\n} from './components/production-list-confirmation/production-list-confirmation.component';\r\nimport {SupplierConfirmationComponent} from './components/supplier-confirmation/supplier-confirmation.component';\r\nimport {\r\n  ReservationConfirmationComponent\r\n} from './components/reservation-confirmation/reservation-confirmation.component';\r\nimport {\r\n  PlanningListConfirmationComponent\r\n} from './components/planning-list-confirmation/planning-list-confirmation.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ConfirmationLayoutComponent, children: [\r\n      {path: '', redirectTo: 'nomenclature', pathMatch: 'full'},\r\n      {path: 'nomenclature', title: 'Nomenclature Confirmation', component: NomenclatureConfirmationComponent},\r\n      {path: 'payments', title: 'Payments Confirmation', component: PaymentConfirmationComponent},\r\n      {path: 'write-off', title: 'Write Off Confirmation', component: WriteOffConfirmationComponent},\r\n      {path: 'production-lists', title: 'Production Lists Confirmation', component: ProductionListConfirmationComponent},\r\n      {path: 'suppliers', title: 'Suppliers Confirmation', component: SupplierConfirmationComponent},\r\n      {path: 'reservations', title: 'Reservations Confirmation', component: ReservationConfirmationComponent},\r\n      {path: 'planning', title: 'Planning Confirmation', component: PlanningListConfirmationComponent},\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ConfirmationRouting { }\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MatDialogRef} from '@angular/material/dialog';\r\nimport {finalize, Subject, takeUntil} from 'rxjs';\r\nimport {PaymentService} from '../../../payments/services/payment.service';\r\n\r\n@Component({\r\n  selector: 'pek-payment-confirmation-limit',\r\n  templateUrl: './payment-confirmation-limit.component.html',\r\n  styleUrls: ['./payment-confirmation-limit.component.scss']\r\n})\r\nexport class PaymentConfirmationLimitComponent implements OnInit, OnDestroy {\r\n  isSaving = false;\r\n  isLoading = true;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    id: [null],\r\n    value: [0, [Validators.required, Validators.min(0)]],\r\n  });\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<PaymentConfirmationLimitComponent>,\r\n    private readonly fb: FormBuilder,\r\n    private readonly paymentService: PaymentService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getLimit();\r\n  }\r\n\r\n  getLimit() {\r\n    this.paymentService.getLimit().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(response => {\r\n      const data = {\r\n        id: response[0].id,\r\n        value: +response[0].value,\r\n      };\r\n\r\n      this.form.patchValue(data);\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n    this.paymentService.setLimit(this.form.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => this.dialogRef.close());\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Payment Confirmation Limit\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"limit\">Limit*</label>\r\n      <input\r\n        *ngIf=\"!isLoading; else spinner\"\r\n        type=\"number\"\r\n        step=\"0.001\"\r\n        id=\"limit\"\r\n        pInputText\r\n        formControlName=\"value\"\r\n      >\r\n    </div>\r\n  </form>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Save'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {ListProduct} from '../../warehouse/models/list-product';\r\n\r\nexport class OrderSupplier {\r\n  confirm_status: EOrderSupplierConfirmStatus;\r\n  delivery_date: string | Date;\r\n  id: number;\r\n  list: number;\r\n  price: string | number;\r\n  supplier: string;\r\n  comment: string;\r\n}\r\n\r\nexport class OrderSupplierConfirmation {\r\n  id: number;\r\n  sent_to_confirmation: boolean;\r\n  order: {\r\n    id: number;\r\n    root_production_list_products: ListProduct[]\r\n  };\r\n}\r\n\r\nexport enum EOrderSupplierConfirmStatus {\r\n  UNTACHED = 0,\r\n  DECLINED = 1,\r\n  CONFIRMED = 2\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {OrderSupplier, OrderSupplierConfirmation} from '../models/order-supplier';\r\nimport {map} from 'rxjs/operators';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  AddSupplierToOrderComponent\r\n} from '../../outsourcing/modals/add-supplier-to-order/add-supplier-to-order.component';\r\nimport {EditOrderSupplierComponent} from '../../outsourcing/modals/edit-order-supplier/edit-order-supplier.component';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OrderSupplierService {\r\n\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'order_supplier_confirmation/';\r\n  readonly orderSupplierUrl = 'order_supplier_confirmation_list_item/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  getConfirmations(query: QuerySearch[] = []): Observable<OrderSupplierConfirmation[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: OrderSupplierConfirmation[] }>(this.API_URL + `${this.url}${qString}`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getOrderSuppliers(orderId: number): Observable<OrderSupplier[]> {\r\n    return this.httpClient.get<{ data: OrderSupplier[] }>(this.API_URL + `${this.orderSupplierUrl}?list_id=${orderId}`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  declineOrderSupplier(orderId: number): Observable<OrderSupplier> {\r\n    return this.httpClient.post<{ data: OrderSupplier }>(this.API_URL + `${this.orderSupplierUrl}${orderId}/decline_supplier/`, null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  confirmOrderSupplier(orderId: number): Observable<OrderSupplier> {\r\n    return this.httpClient.post<{ data: OrderSupplier }>(this.API_URL + `${this.orderSupplierUrl}${orderId}/confirm_supplier/`, null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  declineAll(id: number): Observable<any> {\r\n    return this.httpClient.post<{ data: OrderSupplierConfirmation[] }>(this.API_URL + `${this.url}${id}/decline_all_suppliers/`, null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getOrderSupplierListForOrder(id: number): Observable<OrderSupplier[]> {\r\n    return this.httpClient.get<{ data: OrderSupplier[] }>(this.API_URL + `order_supplier_confirmation_list_item/?order_id=${id}`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getOrderSupplierListForList(id: number): Observable<OrderSupplier[]> {\r\n    return this.httpClient.get<{ data: OrderSupplier[] }>(this.API_URL + `order_supplier_confirmation_list_item/?list_id=${id}`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  addSupplierToOrder(data: any): Observable<OrderSupplier> {\r\n    return this.httpClient.post<{ data: OrderSupplier }>(this.API_URL + `order_supplier_confirmation_list_item/`, data).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updateSupplier(data: Partial<OrderSupplier>) {\r\n    return this.httpClient.patch<{ data: OrderSupplier }>(this.API_URL + `order_supplier_confirmation_list_item/${data.id}/`, data).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  orderSupplierConfirm(id: number): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + `${id}/send_to_confirmation/`, null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  deleteSupplier(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + `order_supplier_confirmation_list_item/${id}/`);\r\n  }\r\n\r\n  openAddSupplierToOrderModal(id: number): Observable<OrderSupplier> {\r\n    return this.dialog\r\n      .open<AddSupplierToOrderComponent>(AddSupplierToOrderComponent, {\r\n        width: '40rem',\r\n        data: {id},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  getOrderSupplierConfirmation(id: number): Observable<OrderSupplierConfirmation[]> {\r\n    return this.httpClient.get<{ data: OrderSupplierConfirmation[] }>(this.API_URL + this.url + `?order=${id}`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  openEditSupplierModal(orderSupplier: OrderSupplier): Observable<OrderSupplier> {\r\n    return this.dialog\r\n      .open<EditOrderSupplierComponent>(EditOrderSupplierComponent, {\r\n        width: '40rem',\r\n        data: {orderSupplier},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {EventsListService} from '../../services/events-list.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {finalize} from 'rxjs';\r\nimport {EventItem} from '../../models/event-item';\r\n\r\n@Component({\r\n  selector: 'pek-add-company-to-event',\r\n  templateUrl: './add-company-to-event.component.html',\r\n  styleUrls: ['./add-company-to-event.component.scss']\r\n})\r\nexport class AddCompanyToEventComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    company_id: [null, Validators.required],\r\n    comment: [null],\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AddCompanyToEventComponent>,\r\n    @Inject(MAT_DIALOG_DATA) private eventId: number,\r\n    private readonly fb: FormBuilder,\r\n    private readonly eventListService: EventsListService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    this.eventListService.addCompany(this.eventId, [this.form.value as Partial<EventItem>]).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(event => {\r\n      this.dialogRef.close(event);\r\n    });\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.form.get('company_id').patchValue(id as any);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Add Company to Event\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Company*</label>\r\n      <pek-company-picker (selectCompany)=\"onSelectCompany($event)\"></pek-company-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"comment\">Comment</label>\r\n      <textarea\r\n        id=\"comment\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"false\"\r\n        formControlName=\"comment\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Add'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {EventsListService} from '../../services/events-list.service';\r\nimport {EventItem} from '../../models/event-item';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-add-contact-person-to-event',\r\n  templateUrl: './add-contact-person-to-event.component.html',\r\n  styleUrls: ['./add-contact-person-to-event.component.scss']\r\n})\r\nexport class AddContactPersonToEventComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    contact_person_id: [null, [Validators.required]],\r\n    comment: [null],\r\n    company: [null],\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AddContactPersonToEventComponent>,\r\n    @Inject(MAT_DIALOG_DATA) private eventId: number,\r\n    private readonly fb: FormBuilder,\r\n    private readonly eventListService: EventsListService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    this.eventListService.addContact(this.eventId, [this.form.value as Partial<EventItem>]).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(event => {\r\n      this.dialogRef.close(event);\r\n    });\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.form.get('company').patchValue(id as any);\r\n  }\r\n\r\n  onSelectContactPerson(id: number) {\r\n    this.form.get('contact_person_id').patchValue(id as any);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Add Concat Person to Event\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Contact Person*</label>\r\n      <pek-crm-contact-person-picker (selectContactPerson)=\"onSelectContactPerson($event)\"></pek-crm-contact-person-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Company</label>\r\n      <pek-company-picker (selectCompany)=\"onSelectCompany($event)\"></pek-company-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"comment\">Comment</label>\r\n      <textarea\r\n        id=\"comment\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"false\"\r\n        formControlName=\"comment\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Add'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {AddEventModalType, Company} from '../../models/company';\r\nimport {EventsListService} from '../../services/events-list.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {finalize} from 'rxjs';\r\nimport {CRMEmployee} from '../../models/crm-employee';\r\n\r\n@Component({\r\n  selector: 'pek-add-event-to-company',\r\n  templateUrl: './add-event-to-company.component.html',\r\n  styleUrls: ['./add-event-to-company.component.scss']\r\n})\r\nexport class AddEventToCompanyComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    event_type: [null, [Validators.required]],\r\n    start: [null, [Validators.required]],\r\n    end: [null, [Validators.required]],\r\n    company_ids: [[this.data.company.id]],\r\n    description: [''],\r\n    employee_ids: [[]],\r\n    contact_ids: [[]],\r\n    is_locked_by_company: [true],\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AddEventToCompanyComponent>,\r\n    private readonly fb: FormBuilder,\r\n    private readonly eventListService: EventsListService,\r\n    private readonly adapterService: AdapterService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: AddEventModalType, company: Company },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // if (this.data.type === 'withEmployee') {\r\n    //   this.form.addControl('employee_ids', new FormControl([], Validators.required));\r\n    // }\r\n  }\r\n\r\n  onSave() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n      const send = this.form.value;\r\n      send.start = this.adapterService.dateTimeAdapter(this.form.value.start);\r\n      send.end = this.adapterService.dateTimeAdapter(this.form.value.end);\r\n      this.eventListService.create(send).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(event => this.dialogRef.close(event));\r\n    }\r\n  }\r\n\r\n  onSelectEventType(id: number) {\r\n    this.form.get('event_type').patchValue(id);\r\n  }\r\n\r\n  onSelectContactPersons(contactPersonsIds: number[]) {\r\n    if (contactPersonsIds) {\r\n      this.form.get('contact_ids').patchValue(contactPersonsIds);\r\n    } else {\r\n      this.form.get('contact_ids').patchValue([]);\r\n    }\r\n  }\r\n\r\n  onSelectEmployees(ids: number[]) {\r\n    if (ids) {\r\n      this.form.get('employee_ids').patchValue(ids);\r\n    } else {\r\n      this.form.get('employee_ids').patchValue([]);\r\n    }\r\n  }\r\n\r\n  onOpenDatesEmployees() {\r\n    this.eventListService.openEditEmployeeEventDatesModal(this.form.get('employee_ids').value, this.form.value).subscribe(data => {\r\n      if (data) {\r\n        this.form.patchValue(data);\r\n      }\r\n    })\r\n  }\r\n\r\n  onSetStartDate(date: Date) {\r\n    this.form.get('start').patchValue(date);\r\n  }\r\n\r\n  onSetEndDate(date: Date) {\r\n    this.form.get('end').patchValue(date);\r\n  }\r\n\r\n  onClearStartDate() {\r\n    this.form.get('start').patchValue(null);\r\n  }\r\n\r\n  onClearEndDate() {\r\n    this.form.get('end').patchValue(null);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Add Event to Company {{data.type === 'withEmployee' ? 'with' : 'without'}} Employee\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Event Type*</label>\r\n      <pek-crm-event-type-picker\r\n        [filters]=\"[\r\n          {name: 'is_inner', value: true},\r\n          {name: 'is_auto', value: false}\r\n        ]\"\r\n        (selectEventType)=\"onSelectEventType($event)\"\r\n      >\r\n      </pek-crm-event-type-picker>\r\n    </div>\r\n    <div class=\"form-group\" *ngIf=\"data.type === 'withEmployee'\">\r\n      <label>Employees*</label>\r\n      <pek-crm-employee-picker (selectEmployees)=\"onSelectEmployees($event)\"></pek-crm-employee-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Contacts</label>\r\n      <pek-crm-multi-contact-persons-picker\r\n        [selectedCompaniesIds]=\"this.form.get('company_ids').value\"\r\n        (selectContactPersons)=\"onSelectContactPersons($event)\"\r\n      ></pek-crm-multi-contact-persons-picker>\r\n    </div>\r\n\r\n    <ng-container *ngIf=\"data.type === 'withoutEmployee'\">\r\n      <div class=\"row\">\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>Start Date and Time*</label>\r\n            <pek-date-time-picker\r\n              [maxDate]=\"form.get('end')?.value\"\r\n              (clearDate)=\"onClearStartDate()\"\r\n              (setDate)=\"onSetStartDate($event)\"\r\n              placeholder=\"Choice Start Date and Time\"\r\n            ></pek-date-time-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>End Date and Time*</label>\r\n            <pek-date-time-picker\r\n              [minDate]=\"form.get('start')?.value\"\r\n              (clearDate)=\"onClearEndDate()\"\r\n              (setDate)=\"onSetEndDate($event)\"\r\n              placeholder=\"Choice End Date and Time\"\r\n            ></pek-date-time-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"data.type === 'withEmployee'\">\r\n      <div\r\n        (click)=\"onOpenDatesEmployees()\"\r\n        [class.disabled]=\"form.get('employee_ids').value.length === 0\"\r\n        class=\"row select-date\"\r\n      >\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>Start Date and Time*</label>\r\n            <p-calendar\r\n              [minDate]=\"form.get('end')?.value\"\r\n              [showTime]=\"true\"\r\n              [showClear]=\"true\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              hourFormat=\"24\"\r\n              formControlName=\"start\"\r\n              placeholder=\"Choice Start Date and Time\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>End Date and Time*</label>\r\n            <p-calendar\r\n              [minDate]=\"form.get('start')?.value\"\r\n              [showTime]=\"true\"\r\n              [showClear]=\"true\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              hourFormat=\"24\"\r\n              formControlName=\"end\"\r\n              placeholder=\"Choice End Date and Time\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea\r\n        id=\"description\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        formControlName=\"description\"\r\n        [autoResize]=\"true\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Add'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {EventsListService} from '../../services/events-list.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {AddEventModalType, Company} from '../../models/company';\r\nimport {finalize} from 'rxjs';\r\nimport {ContactPerson} from '@shared/models/contact-person';\r\n\r\n@Component({\r\n  selector: 'pek-add-event-to-contact-person',\r\n  templateUrl: './add-event-to-contact-person.component.html',\r\n  styleUrls: ['./add-event-to-contact-person.component.scss']\r\n})\r\nexport class AddEventToContactPersonComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    event_type: [null, [Validators.required]],\r\n    start: [null, Validators.required],\r\n    end: [null, Validators.required],\r\n    contact_person_ids: [[this.data.contactPerson.id]],\r\n    description: [''],\r\n    company_ids: [[]],\r\n    contact_ids: [[this.data.contactPerson.id]],\r\n    employee_ids: [[]],\r\n    canOverlap: [false],\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AddEventToContactPersonComponent>,\r\n    private readonly fb: FormBuilder,\r\n    private readonly eventListService: EventsListService,\r\n    private readonly adapterService: AdapterService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: AddEventModalType, contactPerson: ContactPerson },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  onSave() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n      const send = this.form.value;\r\n      send.start = this.adapterService.dateTimeAdapter(this.form.value.start);\r\n      send.end = this.adapterService.dateTimeAdapter(this.form.value.end);\r\n      this.eventListService.create(send).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(event => this.dialogRef.close(event));\r\n    }\r\n  }\r\n\r\n  onSelectEventType(id: number) {\r\n    this.form.get('event_type').patchValue(id);\r\n  }\r\n\r\n  onSelectEmployees(ids: number[]) {\r\n    if (ids) {\r\n      this.form.get('employee_ids').patchValue(ids);\r\n    } else {\r\n      this.form.get('employee_ids').patchValue([]);\r\n    }\r\n  }\r\n\r\n  onOpenDatesEmployees() {\r\n    this.eventListService.openEditEmployeeEventDatesModal(this.form.get('employee_ids').value, this.form.value).subscribe(data => {\r\n      if (data) {\r\n        this.form.patchValue(data);\r\n      }\r\n    })\r\n  }\r\n\r\n  onSetStartDate(date: Date) {\r\n    this.form.get('start').patchValue(date);\r\n  }\r\n\r\n  onSetEndDate(date: Date) {\r\n    this.form.get('end').patchValue(date);\r\n  }\r\n\r\n  onClearStartDate() {\r\n    this.form.get('start').patchValue(null);\r\n  }\r\n\r\n  onClearEndDate() {\r\n    this.form.get('end').patchValue(null);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Add Event to Contact {{data.type === 'withEmployee' ? 'with' : 'without'}} Employee\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Event Type*</label>\r\n      <pek-crm-event-type-picker\r\n        [filters]=\"[\r\n          {name: 'is_inner', value: true},\r\n          {name: 'is_auto', value: false}\r\n        ]\"\r\n        (selectEventType)=\"onSelectEventType($event)\"\r\n      >\r\n      </pek-crm-event-type-picker>\r\n    </div>\r\n    <div class=\"form-group\" *ngIf=\"data.type === 'withEmployee'\">\r\n      <label>Employees*</label>\r\n      <pek-crm-employee-picker (selectEmployees)=\"onSelectEmployees($event)\"></pek-crm-employee-picker>\r\n    </div>\r\n\r\n    <ng-container *ngIf=\"data.type === 'withoutEmployee'\">\r\n      <div class=\"row\">\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>Start Date and Time*</label>\r\n            <pek-date-time-picker\r\n              [maxDate]=\"form.get('end')?.value\"\r\n              (clearDate)=\"onClearStartDate()\"\r\n              (setDate)=\"onSetStartDate($event)\"\r\n              placeholder=\"Choice Start Date and Time\"\r\n            ></pek-date-time-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>End Date and Time*</label>\r\n            <pek-date-time-picker\r\n              [minDate]=\"form.get('start')?.value\"\r\n              (clearDate)=\"onClearEndDate()\"\r\n              (setDate)=\"onSetEndDate($event)\"\r\n              placeholder=\"Choice End Date and Time\"\r\n            ></pek-date-time-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"data.type === 'withEmployee'\">\r\n      <div\r\n        (click)=\"onOpenDatesEmployees()\"\r\n        [class.disabled]=\"form.get('employee_ids').value.length === 0\"\r\n        class=\"row select-date\"\r\n      >\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>Start Date and Time*</label>\r\n            <p-calendar\r\n              [minDate]=\"form.get('end')?.value\"\r\n              [showTime]=\"true\"\r\n              [showClear]=\"true\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              hourFormat=\"24\"\r\n              formControlName=\"start\"\r\n              placeholder=\"Choice Start Date and Time\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>End Date and Time*</label>\r\n            <p-calendar\r\n              [minDate]=\"form.get('start')?.value\"\r\n              [showTime]=\"true\"\r\n              [showClear]=\"true\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              hourFormat=\"24\"\r\n              formControlName=\"end\"\r\n              placeholder=\"Choice End Date and Time\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea\r\n        id=\"description\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        formControlName=\"description\"\r\n        [autoResize]=\"true\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Add'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {CompanyCategoryService} from '../../services/company-category.service';\r\nimport {CompanyCategory, CompanyCategoryModule} from '../../models/company-category';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-company-category',\r\n  templateUrl: './create-edit-company-category.component.html',\r\n  styleUrls: ['./create-edit-company-category.component.scss']\r\n})\r\nexport class CreateEditCompanyCategoryComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: [null, [Validators.required]],\r\n    modules: [[]],\r\n  });\r\n\r\n  selectedModulesIds = [];\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly companyCategoryService: CompanyCategoryService,\r\n    private dialogRef: MatDialogRef<CreateEditCompanyCategoryComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, category: CompanyCategory }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.category.id));\r\n      this.form.patchValue(<any>this.data.category);\r\n      this.selectedModulesIds = this.data.category.modules.map(m => m.id);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createCompanyCategory();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editCompanyCategory();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createCompanyCategory() {\r\n    const send = <any>this.form.value;\r\n    this.companyCategoryService.create(send).subscribe({\r\n      next: category => this.dialogRef.close(category),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editCompanyCategory() {\r\n    const send = <any>this.form.value;\r\n    this.companyCategoryService.update(send).subscribe({\r\n      next: category => this.dialogRef.close(category),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectModule(modules: CompanyCategoryModule[]) {\r\n    this.form.get('modules').patchValue(modules.map(m => m.id));\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Company Category\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Modules</label>\r\n      <pek-company-category-module-picker\r\n        (selectModule)=\"onSelectModule($event)\"\r\n        [currentModulesIds]=\"selectedModulesIds\"\r\n      ></pek-company-category-module-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {CompanyService} from '../../services/company.service';\r\nimport {Company} from '../../models/company';\r\nimport {Region} from '@shared/models/region';\r\nimport {Country} from '@shared/models/country';\r\nimport {SubRegion} from '@shared/models/sub-region';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-company',\r\n  templateUrl: './create-edit-company.component.html',\r\n  styleUrls: ['./create-edit-company.component.scss']\r\n})\r\nexport class CreateEditCompanyComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  currentCategoriesIds = [];\r\n\r\n  form = this.fb.group({\r\n    name: ['', Validators.required],\r\n    address: [''],\r\n    comment: [''],\r\n    tax_number: [''],\r\n    registration_number: [''],\r\n    categories: [[], Validators.required],\r\n    email: [''],\r\n    phone_number: [''],\r\n    website: [''],\r\n    supplier_nomenclature: [''],\r\n    contact_persons: [[]],\r\n    has_not_vat: [false],\r\n    country: [null],\r\n    region: [null],\r\n    sub_region: [null],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly companyService: CompanyService,\r\n    private dialogRef: MatDialogRef<CreateEditCompanyComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data:  { type: ModalActionType, company: Company}\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.company.id));\r\n      this.form.patchValue(this.data.company);\r\n\r\n      this.form.get('categories').patchValue(this.data.company.categories?.map(c => c.id));\r\n      this.currentCategoriesIds = this.data.company.categories?.map(c => c.id);\r\n\r\n      this.form.get('contact_persons').patchValue(this.data.company.contact_persons?.map(c => c.id));\r\n      console.log('this.form. EDIT', this.form.value);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createCompany();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editCompany();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createCompany() {\r\n    let country = this.form.get('country').value;\r\n    if (country) {\r\n      this.form.get('country').setValue(country.id);\r\n    }\r\n    let region = this.form.get('region').value;\r\n    if (region) {\r\n      this.form.get('region').setValue(region.id);\r\n    }\r\n    let subRegion = this.form.get('sub_region').value;\r\n    if (subRegion) {\r\n      this.form.get('sub_region').setValue(subRegion.id);\r\n    }\r\n    let send = <Partial<Company>>this.form.value;\r\n    this.companyService.create(send).subscribe({\r\n      next: company => this.dialogRef.close(company),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editCompany() {\r\n    let country = this.form.get('country').value;\r\n    if (country) {\r\n      this.form.get('country').setValue(country.id);\r\n    }\r\n    let region = this.form.get('region').value;\r\n    if (region) {\r\n      this.form.get('region').setValue(region.id);\r\n    }\r\n    let subRegion = this.form.get('sub_region').value;\r\n    if (subRegion) {\r\n      this.form.get('sub_region').setValue(subRegion.id);\r\n    }\r\n\r\n    const send = <Partial<Company>>this.form.value;\r\n\r\n    this.companyService.updatePartial(send).subscribe({\r\n      next: company => this.dialogRef.close(company),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n\r\n  onSelectCompanyCategories(ids: string) {\r\n    if (ids) {\r\n      this.form.get('categories').patchValue(ids.split(',').map(id => +id));\r\n    } else {\r\n      this.form.get('categories').patchValue(null);\r\n    }\r\n  }\r\n\r\n  countrySelected(country: Country) {\r\n    if (country) {\r\n      this.form.get('country').setValue(country);\r\n      this.form.get('sub_region').setValue(null);\r\n      this.form.get('region').setValue(null);\r\n    }\r\n  }\r\n\r\n  regionSelected(region: Partial<Region>) {\r\n    this.form.get('region').setValue(region);\r\n    this.form.get('sub_region').setValue(null);\r\n  }\r\n\r\n  regionSubSelected(subRegion: Partial<SubRegion>) {\r\n    if (subRegion) {\r\n      this.form.get('sub_region').setValue(subRegion);\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Supplier\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"name\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"name\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Category*</label>\r\n      <pek-multi-company-category-picker\r\n        [currentCompanyCategoriesIds]=\"currentCategoriesIds\"\r\n        (selectCompanyCategories)=\"onSelectCompanyCategories($event)\">\r\n      </pek-multi-company-category-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"tax\"> Tax Number </label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"tax_number\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"tax\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"address\">Address </label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"address\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"address\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"email\"> Email</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"email\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"email\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"phone_number\"> Phone Number </label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"phone_number\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"phone_number\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"website\"> Website </label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"website\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"website\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"reg\"> Registration Number </label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"registration_number\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"reg\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Country</label>\r\n      <div class=\"countries\">\r\n        <pek-crm-company-picker\r\n          [country]=\"form.get('country').value?.id\"\r\n          (valueChange)=\"countrySelected($event)\"\r\n        ></pek-crm-company-picker>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Region</label>\r\n      <div class=\"countries\">\r\n        <pek-region-picker\r\n          [isDisabled]=\"!form.get('country').value\"\r\n          [countrySelected]=\"form.get('country').value?.id\"\r\n          [selectedRegionId]=\"form.get('region').value?.id\"\r\n          (selectRegionFull)=\"regionSelected($event)\"\r\n        ></pek-region-picker>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Sub Region</label>\r\n      <div class=\"countries\">\r\n        <pek-sub-region-picker\r\n          [isDisabled]=\"!form.get('region').value\"\r\n          [regionSelected]=\"form.get('region').value?.id\"\r\n          [selectedSubRegionId]=\"form.get('sub_region').value?.id\"\r\n          (selectSubRegionFull)=\"regionSubSelected($event)\"\r\n        ></pek-sub-region-picker>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"supplier_nomenclature\">Nomenclature</label>\r\n      <textarea\r\n        pInputTextarea\r\n        formControlName=\"supplier_nomenclature\"\r\n        class=\"form-control\"\r\n        id=\"supplier_nomenclature\"\r\n      ></textarea>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"comment\">Description</label>\r\n      <textarea\r\n        id=\"comment\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"false\"\r\n        formControlName=\"comment\"\r\n      ></textarea>\r\n    </div>\r\n    <div class=\"form-group checkbox\">\r\n      <p-checkbox\r\n        class=\"checkbox-big\"\r\n        name=\"vat\"\r\n        [binary]=\"true\"\r\n        inputId=\"vat\"\r\n        formControlName=\"has_not_vat\"\r\n      >\r\n      </p-checkbox>\r\n      <label for=\"vat\">Dont Have VAT</label>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"comment\">Additional Color Display</label>\r\n      <div>\r\n        <p-checkbox\r\n          class=\"checkbox-big\"\r\n          name=\"vat\"\r\n          [binary]=\"true\"\r\n          inputId=\"vat\"\r\n          formControlName=\"has_not_vat\"\r\n        >\r\n        </p-checkbox>\r\n        <label>Positive</label>\r\n      </div>\r\n      <div>\r\n        <p-checkbox\r\n          class=\"checkbox-big\"\r\n          name=\"vat\"\r\n          [binary]=\"true\"\r\n          inputId=\"vat\"\r\n          formControlName=\"has_not_vat\"\r\n        >\r\n        </p-checkbox>\r\n        <label>Positive</label>\r\n      </div>\r\n      <div>\r\n        <p-checkbox\r\n          class=\"checkbox-big\"\r\n          name=\"vat\"\r\n          [binary]=\"true\"\r\n          inputId=\"vat\"\r\n          formControlName=\"has_not_vat\"\r\n        >\r\n        </p-checkbox>\r\n        <label>Positive</label>\r\n      </div>\r\n\r\n    </div>\r\n\r\n\r\n<!--    <div class=\"form-group\">-->\r\n<!--      <label>Country</label>-->\r\n<!--      <div class=\"countries\">-->\r\n<!--        <app-regions-picker [selectedNode]=\"selectedCountry\" [isPicker]=\"true\"-->\r\n<!--                            (pickRegion)=\"pickCountry($event)\"></app-regions-picker>-->\r\n<!--      </div>-->\r\n<!--    </div>-->\r\n<!--    <div class=\"form-group\">-->\r\n<!--      <label>Region</label>-->\r\n<!--      <div *ngIf=\"!form.get('country').value\" class=\"message\">Choose a country</div>-->\r\n<!--      <div class=\"countries\" *ngIf=\"form.get('country').value\">-->\r\n<!--        <p-table-->\r\n<!--          [value]=\"regions\"-->\r\n<!--          selectionMode=\"single\"-->\r\n<!--          [(selection)]=\"selectedRegion\"-->\r\n<!--          (selectionChange)=\"pickRegion()\"-->\r\n<!--        >-->\r\n<!--          <ng-template pTemplate=\"header\">-->\r\n<!--            <tr>-->\r\n<!--              <th class=\"index-header text-center\" style=\"width: 10%\">#</th>-->\r\n<!--              <th pSortableColumn=\"name\" style=\"width: 90%\">-->\r\n<!--                Name-->\r\n<!--              </th>-->\r\n<!--            </tr>-->\r\n<!--          </ng-template>-->\r\n\r\n<!--          <ng-template pTemplate=\"body\" let-region let-i=\"rowIndex\">-->\r\n<!--            <tr [pSelectableRow]=\"region\">-->\r\n<!--              <td style=\"width: 10%\" class=\"text-center\">{{i + 1}}</td>-->\r\n<!--              <td style=\"width: 90%\">-->\r\n<!--                {{ region.name }}-->\r\n<!--              </td>-->\r\n<!--            </tr>-->\r\n<!--          </ng-template>-->\r\n<!--          <ng-template pTemplate=\"emptymessage\" let-columns>-->\r\n<!--            <tr>-->\r\n<!--              <td style=\"width: 100%;\" class=\"text-center p-4\" [attr.colspan]=\"2\">-->\r\n<!--                <i *ngIf=\"isLoadingRegions\" class=\"fas fa-circle-notch fa-spin fa-3x \"></i>-->\r\n<!--                <span *ngIf=\"!isLoadingRegions\">-->\r\n<!--              No Records Found-->\r\n<!--            </span>-->\r\n<!--              </td>-->\r\n<!--            </tr>-->\r\n<!--          </ng-template>-->\r\n<!--        </p-table>-->\r\n<!--      </div>-->\r\n<!--    </div>-->\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {ContactPerson} from '@shared/models/contact-person';\r\nimport {ContactPersonService} from '../../services/contact-person.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-contact-person',\r\n  templateUrl: './create-edit-contact-person.component.html',\r\n  styleUrls: ['./create-edit-contact-person.component.scss']\r\n})\r\nexport class CreateEditContactPersonComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    first_name: [null, [Validators.required]],\r\n    last_name: [null, [Validators.required]],\r\n    email: ['', [Validators.email]],\r\n    position: [''],\r\n    phone_number: [''],\r\n    comment: [''],\r\n    company: [this.data.companyId],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly contactPersonService: ContactPersonService,\r\n    private dialogRef: MatDialogRef<CreateEditContactPersonComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { companyId: number, type: ModalActionType, contactPerson: ContactPerson }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.contactPerson.id));\r\n      this.form.patchValue(<any>this.data.contactPerson);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createContactPerson();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editContactPerson();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createContactPerson() {\r\n    const send = <any>this.form.value;\r\n    this.contactPersonService.create(send).subscribe({\r\n      next: contactPerson => this.dialogRef.close(contactPerson),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editContactPerson() {\r\n    const send = <any>this.form.value;\r\n    this.contactPersonService.update(send).subscribe({\r\n      next: contactPerson => this.dialogRef.close(contactPerson),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Contact Person\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"row\">\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label for=\"first_name\">First Name*</label>\r\n          <input\r\n            pInputText\r\n            formControlName=\"first_name\"\r\n            class=\"form-control\"\r\n            type=\"text\"\r\n            id=\"first_name\"\r\n            required=\"required\"\r\n          >\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label for=\"last_name\">Last Name*</label>\r\n          <input\r\n            pInputText\r\n            formControlName=\"last_name\"\r\n            class=\"form-control\"\r\n            type=\"text\"\r\n            id=\"last_name\"\r\n            required=\"required\"\r\n          >\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"email\"> Email </label>\r\n      <input pInputText formControlName=\"email\" class=\"form-control\" type=\"text\" id=\"email\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"position\"> Position </label>\r\n      <input pInputText formControlName=\"position\" class=\"form-control\" type=\"text\" id=\"position\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"phone_number\"> Phone</label>\r\n      <input pInputText formControlName=\"phone_number\" class=\"form-control\" type=\"text\" id=\"phone_number\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"comment\"> Comment </label>\r\n      <textarea\r\n        id=\"comment\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"false\"\r\n        formControlName=\"comment\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {CrmEmployeeService} from '../../services/crm-employee.service';\r\nimport {CRMEmployee} from '../../models/crm-employee';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-crm-employee',\r\n  templateUrl: './create-edit-crm-employee.component.html',\r\n  styleUrls: ['./create-edit-crm-employee.component.scss']\r\n})\r\nexport class CreateEditCrmEmployeeComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    first_name: ['', Validators.required],\r\n    last_name: ['', Validators.required],\r\n    position: [null],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly crmEmployeeService: CrmEmployeeService,\r\n    private dialogRef: MatDialogRef<CreateEditCrmEmployeeComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, employee: CRMEmployee }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.employee.id));\r\n      this.form.patchValue(<any>this.data.employee);\r\n      if (this.data.employee.position) {\r\n        this.form.controls.position.patchValue(this.data.employee.position.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createEmployee();\r\n        break;\r\n      }\r\n\r\n      case 'edit': {\r\n        this.editEmployee();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createEmployee() {\r\n    const send = <any>this.form.value;\r\n    this.crmEmployeeService.create(send).subscribe({\r\n      next: employee => this.dialogRef.close(employee),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editEmployee() {\r\n    const send = <any>this.form.value;\r\n    this.crmEmployeeService.update(send).subscribe({\r\n      next: employee => this.dialogRef.close(employee),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Employee\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">First Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"first_name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"last-name\">Last Name*</label>\r\n      <input type=\"text\" id=\"last-name\" pInputText formControlName=\"last_name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Position</label>\r\n      <app-crm-position-picker\r\n        [position]=\"this.form.get('position').value\"\r\n        (valueChange)=\"form.get('position').setValue($event)\"\r\n      ></app-crm-position-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {AbstractControl, FormArray, FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {EventTypesService} from '../../services/event-types.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EventType} from '../../models/event-type';\r\nimport {CRMEmployee} from '../../models/crm-employee';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-event-type',\r\n  templateUrl: './create-edit-event-type.component.html',\r\n  styleUrls: ['./create-edit-event-type.component.scss']\r\n})\r\nexport class CreateEditEventTypeComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: [null, [Validators.required]],\r\n    description: [null, Validators.required],\r\n    google_calendar_id: [null],\r\n    google_owner_first_name: [null],\r\n    google_owner_last_name: [null],\r\n    google_owner_gmail: [null],\r\n    profiles_ids: this.fb.array([\r\n      // this.fb.group({\r\n      //   profile_id: [null, Validators.required],\r\n      //   employees_ids: [null, Validators.required],\r\n      // })\r\n    ], Validators.required),\r\n    is_inner: [true],\r\n    color_hex: ['#3788d8', Validators.required]\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateEditEventTypeComponent>,\r\n    private eventTypesService: EventTypesService,\r\n    private readonly fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, eventType: EventType }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.data.eventType.color_hex = this.data.eventType.color_hex ? this.data.eventType.color_hex : '#3788d8';\r\n      this.form.addControl(<any>'id', new FormControl(this.data.eventType.id));\r\n      this.form.patchValue(<any>this.data.eventType);\r\n\r\n      if (this.data.eventType.access_users.length > 0) {\r\n        this.data.eventType.access_users.forEach(user => {\r\n          (this.form.get('profiles_ids') as FormArray).push(this.fb.group({\r\n            // @ts-ignore\r\n            profile_id: [user.user_profile.id, Validators.required],\r\n            // @ts-ignore\r\n            employees_ids: [user.access_users_employees.map(u => u.employee.id), Validators.required],\r\n          }));\r\n        });\r\n      }\r\n    }\r\n\r\n    if (this.data.type === 'create') {\r\n      (this.form.get('profiles_ids') as FormArray).push(this.fb.group({\r\n        profile_id: [null, Validators.required],\r\n        employees_ids: [[], Validators.required],\r\n      }));\r\n    }\r\n  }\r\n\r\n  get users() {\r\n    return this.form.get('profiles_ids') as FormArray;\r\n  }\r\n\r\n  addUser() {\r\n    (this.form.get('profiles_ids') as FormArray).push(this.fb.group({\r\n      profile_id: [null, Validators.required],\r\n      employees_ids: [[], Validators.required],\r\n    }));\r\n  }\r\n\r\n  removeUser(index: number) {\r\n    (this.form.get('profiles_ids') as FormArray).removeAt(index);\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createEventType();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editEventType();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createEventType() {\r\n    const send = <any>this.form.value;\r\n    this.eventTypesService.create(send).subscribe({\r\n      next: type => this.dialogRef.close(type),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editEventType() {\r\n    const send = <any>this.form.value;\r\n    this.eventTypesService.update(send).subscribe({\r\n      next: type => this.dialogRef.close(type),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n\r\n  onSelectUserProfile(userProfileId: number, user: AbstractControl<any>) {\r\n    user.get('profile_id').patchValue(userProfileId);\r\n  }\r\n\r\n  onSelectEmployees(ids: number[], user: AbstractControl<any>) {\r\n    if (ids) {\r\n      user.get('employees_ids').patchValue(ids);\r\n    } else {\r\n      user.get('employees_ids').patchValue(null);\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Company Category\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"row-1\">\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name*</label>\r\n        <input\r\n          pInputText\r\n          formControlName=\"name\"\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"name\"\r\n        />\r\n      </div>\r\n      <div class=\"form-group ml-3 form-group_color\">\r\n        <label for=\"name\"> Color </label>\r\n        <p-colorPicker formControlName=\"color_hex\"></p-colorPicker>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"employees\" formArrayName=\"profiles_ids\">\r\n      <div class=\"employees-row\" *ngFor=\"let user of users.controls; let idx = index\" [formGroupName]=\"idx\">\r\n        <div class=\"employees-col\">\r\n          <div class=\"form-group\">\r\n            <label>User Profiles*</label>\r\n            <pek-user-profile-picker\r\n              [currentUserProfileId]=\"user.get('profile_id').value\"\r\n              (selectUserProfile)=\"onSelectUserProfile($event, user)\"\r\n            ></pek-user-profile-picker>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label>Employees*</label>\r\n            <pek-crm-employee-picker\r\n              (selectEmployees)=\"onSelectEmployees($event, user)\"\r\n              [currentEmployeeIds]=\"user.get('employees_ids').value\"\r\n            ></pek-crm-employee-picker>\r\n          </div>\r\n\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-times\"\r\n            class=\"p-button-rounded p-button-danger mr-2\"\r\n            (click)=\"removeUser(idx)\"\r\n          ></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      icon=\"pi pi-plus\"\r\n      class=\"add-button mt-2 mb-2\"\r\n      label=\"Add User\"\r\n      (click)=\"addUser()\"\r\n    >\r\n    </button>\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description*</label>\r\n      <textarea\r\n        id=\"description\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"false\"\r\n        formControlName=\"description\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {EventsListService} from '../../services/events-list.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {AddEventModalType} from '../../models/company';\r\nimport {CRMEmployee} from '../../models/crm-employee';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EventItem} from '../../models/event-item';\r\nimport {finalize, Observable} from 'rxjs';\r\nimport {MessageService} from 'primeng/api';\r\nimport {map} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-event',\r\n  templateUrl: './create-edit-event.component.html',\r\n  styleUrls: ['./create-edit-event.component.scss']\r\n})\r\nexport class CreateEditEventComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  eventsLists: EventItem[] = [];\r\n  eventId = -1;\r\n\r\n  scheduleDays = [\r\n    {value: 0, name: 'Monday'},\r\n    {value: 1, name: 'Tuesday'},\r\n    {value: 2, name: 'Wednesday'},\r\n    {value: 3, name: 'Thursday'},\r\n    {value: 4, name: 'Friday'},\r\n    {value: 5, name: 'Saturday'},\r\n    {value: 6, name: 'Sunday'},\r\n  ];\r\n\r\n  form: FormGroup = this.fb.group({\r\n    id: [null],\r\n    event_type: [null, [Validators.required]],\r\n    start: [null, [Validators.required]],\r\n    end: [null, [Validators.required]],\r\n    company_ids: [[]],\r\n    description: [''],\r\n    contact_ids: [[]],\r\n    employee_ids: [[]],\r\n    is_locked_by_company: [false],\r\n    is_scheduled: [false],\r\n    parent: [null],\r\n    canOverlap: [false],\r\n  });\r\n\r\n  scheduleForm = this.fb.group({\r\n    schedule_id: [null],\r\n    start: [null, [Validators.required]],\r\n    end: [null, [Validators.required]],\r\n    schedule_values: [[], [Validators.required]]\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateEditEventComponent>,\r\n    private readonly fb: FormBuilder,\r\n    private readonly eventListService: EventsListService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly messageService: MessageService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { modalType: ModalActionType,\r\n      type: AddEventModalType,\r\n      event: EventItem,\r\n      companyId: number,\r\n      isLinkedEvent:boolean },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.companyId) {\r\n      this.form.get('company_ids').patchValue([this.data.companyId]);\r\n    }\r\n\r\n    if (this.data.isLinkedEvent) {\r\n      this.form.get('parent').patchValue(this.data.event.id);\r\n    }\r\n\r\n    if (this.data.modalType === 'edit') {\r\n      this.eventId = this.data.event.id;\r\n      this.form.get('id').patchValue(this.data.event.id);\r\n      this.form.get('event_type').patchValue(this.data.event.event_type?.id);\r\n      this.form.get('contact_ids').patchValue(this.data.event.on_contacts.map(el => +el.contact_person_id));\r\n      this.form.get('company_ids').patchValue(this.data.event.on_companies.map(el => +el.company_id));\r\n      this.form.get('is_locked_by_company').patchValue(this.data.event.is_locked_by_company);\r\n      this.form.get('description').patchValue(this.data.event.description);\r\n      this.form.get('start').patchValue(new Date(this.data.event.start));\r\n      this.form.get('end').patchValue(new Date(this.data.event.end));\r\n      this.form.get('employee_ids').patchValue(this.data.event.employee?.map(e => e.id));\r\n      console.log('this.form.get(\\'company_ids\\')', this.form.get('company_ids').value);\r\n      console.log('this.form.get(\\'contact_ids\\')', this.form.get('contact_ids').value);\r\n      if (this.data.event.scheduler) {\r\n        this.scheduleForm.get('schedule_values').patchValue(this.data.event.scheduler.values);\r\n        this.scheduleForm.get('schedule_id').patchValue(this.data.event.scheduler.id);\r\n        this.scheduleForm.get('start').patchValue(<any>new Date(this.data.event.scheduler.start));\r\n        this.scheduleForm.get('end').patchValue(<any>new Date(this.data.event.scheduler.end));\r\n        this.form.get('is_scheduled').patchValue(true);\r\n\r\n        this.form.get('is_scheduled').disable();\r\n        this.scheduleForm.get('start').disable();\r\n        this.scheduleForm.get('end').disable();\r\n        this.scheduleForm.get('schedule_values').disable();\r\n      }\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    if (this.form.valid) {\r\n      switch (this.data.modalType) {\r\n        case 'create':\r\n          this.onCreateEvent();\r\n          break;\r\n        case 'edit':\r\n          this.onEdit();\r\n      }\r\n    }\r\n  }\r\n\r\n  onEdit() {\r\n    if (this.form.get('employee_ids').value.length > 0) {\r\n      this.checkEmployeesDatesBeforeAddingUpdating().subscribe(res => {\r\n        if (res) {\r\n          this.messageService.add({\r\n            severity: 'error',\r\n            summary: 'Dates colliding.',\r\n            detail: `Check for colliding dates!`\r\n          });\r\n          return;\r\n        } else {\r\n          this.onEditEvent();\r\n        }\r\n      });\r\n    } else {\r\n      this.onEditEvent();\r\n    }\r\n  }\r\n\r\n  onCreateEvent() {\r\n    if (this.form.get('employee_ids').value.length > 0) {\r\n      this.checkEmployeesDatesBeforeAddingUpdating().subscribe(res => {\r\n        if (res) {\r\n          this.messageService.add({\r\n            severity: 'error',\r\n            summary: 'Dates colliding.',\r\n            detail: `Check for colliding dates!`\r\n          });\r\n          return;\r\n        } else {\r\n          this.addEvent();\r\n        }\r\n      });\r\n    } else {\r\n      this.addEvent();\r\n    }\r\n  }\r\n\r\n  addEvent() {\r\n    this.isSaving = true;\r\n    const send = this.form.value;\r\n    send.start = this.adapterService.dateTimeAdapter(this.form.value.start);\r\n    send.end = this.adapterService.dateTimeAdapter(this.form.value.end);\r\n    this.eventListService.create(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(event => {\r\n      if (this.form.get('is_scheduled').value && !this.scheduleForm.get('schedule_id').value) {\r\n        this.createScheduleFromEvent(event.id);\r\n      } else {\r\n        this.dialogRef.close(event);\r\n      }\r\n    });\r\n  }\r\n\r\n  checkEmployeesDatesBeforeAddingUpdating(): Observable<boolean> {\r\n    const start = this.form.get('start').value;\r\n    const end = this.form.get('end').value;\r\n\r\n    if (this.form.get('employee_ids').value.length > 0) {\r\n      const query = [\r\n        {name: 'employee_ids', value: this.form.get('employee_ids').value},\r\n        {name: 'get_colliding_events_events', value: true},\r\n        {\r\n          name: 'from_datetime',\r\n          value: this.adapterService.dateTimeAdapter(start ?\r\n            new Date(new Date(start).setHours(12, 0, 0)) : new Date())\r\n        }\r\n      ];\r\n\r\n      if (end) {\r\n        query.push(\r\n          {\r\n            name: 'to_datetime', value: this.adapterService.dateTimeAdapter(end ?\r\n              new Date(new Date(end).setHours(12, 0, 0)) : new Date())\r\n          }\r\n        );\r\n      }\r\n      const res = this.eventListService.getShorts(query).pipe(\r\n        map(events => {\r\n          this.eventsLists = events;\r\n          this.eventsLists = this.eventsLists.filter(event => event.id !== this.eventId);\r\n          this.eventsLists.forEach(event => {\r\n            if (start) {\r\n              const eventStartDate = new Date(event.start);\r\n              const eventEndDate = new Date(event.end);\r\n\r\n              event.isDatesColliding = start <= eventEndDate && end >= eventStartDate;\r\n            } else {\r\n              event.isDatesColliding = false;\r\n            }\r\n          });\r\n          console.log('this.eventsLists', this.eventsLists);\r\n          return this.eventsLists.filter(el => el.isDatesColliding).length > 0 && !this.form.get('canOverlap').value;\r\n        }));\r\n      return res;\r\n    }\r\n  }\r\n\r\n  onEditEvent() {\r\n    if (this.form.get('is_scheduled').value) {\r\n      const startDate = new Date(<any>this.scheduleForm.get('start').value);\r\n      const endDate = new Date(<any>this.scheduleForm.get('end').value);\r\n      if (startDate.getTime() >= endDate.getTime()) {\r\n        this.messageService.add({\r\n          severity: 'error',\r\n          summary: 'Validation Error',\r\n          detail: `Start time date cannot be greater than End time`\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.isSaving = true;\r\n    this.eventListService.changeEvent(this.data.event.id, this.form.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe((res) => {\r\n      if (this.form.get('is_scheduled').value && !this.scheduleForm.get('schedule_id').value) {\r\n        this.createScheduleFromEvent(res.id);\r\n      } else {\r\n        this.dialogRef.close(res);\r\n      }\r\n    });\r\n  }\r\n\r\n  createScheduleFromEvent(eventId: number): void {\r\n    if (!this.scheduleForm.valid) {\r\n      return;\r\n    }\r\n\r\n    this.isSaving = true;\r\n\r\n    const data = {\r\n      schedule_values: this.scheduleForm.get('schedule_values').value,\r\n      start: this.scheduleForm.get('start').value,\r\n      end: this.scheduleForm.get('end').value,\r\n    };\r\n\r\n    this.eventListService.createScheduleFromEvent(eventId, data).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(res => {\r\n      this.dialogRef.close(res);\r\n    });\r\n  }\r\n\r\n  onSelectEventType(id: number) {\r\n    this.form.get('event_type').patchValue(id);\r\n  }\r\n\r\n  onSelectContactPersons(contactPersonsIds: number[]) {\r\n    if (contactPersonsIds) {\r\n      this.form.get('contact_ids').patchValue(contactPersonsIds);\r\n    } else {\r\n      this.form.get('contact_ids').patchValue([]);\r\n    }\r\n  }\r\n\r\n  onSelectEmployees(ids: number[]) {\r\n    if (ids) {\r\n      this.form.get('employee_ids').patchValue(ids);\r\n    } else {\r\n      this.form.get('employee_ids').patchValue([]);\r\n    }\r\n  }\r\n\r\n  onOpenDatesEmployees() {\r\n    this.eventListService.openEditEmployeeEventDatesModal(this.form.get('employee_ids').value, this.form.value).subscribe(data => {\r\n      if (data) {\r\n        this.form.patchValue(data);\r\n      }\r\n    });\r\n  }\r\n\r\n  onSelectCompanies(ids: string) {\r\n    if (ids) {\r\n      this.form.get('company_ids').patchValue(ids.split(',').map(id => +id));\r\n    } else {\r\n      this.form.get('company_ids').patchValue([]);\r\n    }\r\n  }\r\n\r\n  onSetStartDate(date: Date) {\r\n    this.form.get('start').patchValue(date);\r\n  }\r\n\r\n  onSetEndDate(date: Date) {\r\n    this.form.get('end').patchValue(date);\r\n  }\r\n\r\n  onClearStartDate() {\r\n    this.form.get('start').patchValue(null);\r\n  }\r\n\r\n  onClearEndDate() {\r\n    this.form.get('end').patchValue(null);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    <ng-container *ngIf=\"data.modalType === 'create'\">\r\n      Add Event {{data.type === 'withEmployee' ? 'with' : 'without'}} Employee\r\n    </ng-container>\r\n    <ng-container *ngIf=\"data.modalType === 'edit'\">\r\n      Edit Event\r\n    </ng-container>\r\n  </h2>\r\n  <form  [formGroup]=\"form\">\r\n    <label class=\"mr-3 p-error\">Accept An Overlapping Event</label>\r\n    <p-checkbox\r\n      name=\"group1\"\r\n      [binary]=\"true\"\r\n      inputId=\"canOverlap\"\r\n      formControlName=\"canOverlap\"\r\n    >\r\n    </p-checkbox>\r\n  </form>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Event Type*</label>\r\n      <pek-crm-event-type-picker\r\n        [currentEventTypeId]=\"form.get('event_type').value\"\r\n        [filters]=\"[\r\n          {name: 'is_inner', value: true},\r\n          {name: 'is_auto', value: false}\r\n        ]\"\r\n        (selectEventType)=\"onSelectEventType($event)\"\r\n      >\r\n      </pek-crm-event-type-picker>\r\n    </div>\r\n    <div class=\"form-group\" *ngIf=\"data.type === 'withEmployee'\">\r\n      <label>Employees</label>\r\n      <pek-crm-employee-picker\r\n        [currentEmployeeIds]=\"this.form.get('employee_ids').value\"\r\n        (selectEmployees)=\"onSelectEmployees($event)\"\r\n      ></pek-crm-employee-picker>\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label>Companies</label>\r\n          <pek-company-categorized-multi-picker\r\n            [currentCompaniesIds]=\"form.get('company_ids').value\"\r\n            (selectCompanies)=\"onSelectCompanies($event)\"\r\n          ></pek-company-categorized-multi-picker>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label>Contacts</label>\r\n          <pek-crm-multi-contact-persons-picker\r\n            [isDisabled]=\"form.get('company_ids').value.length === 0\"\r\n            [selectedCompaniesIds]=\"form.get('company_ids').value\"\r\n            [currentContactPersonsIds]=\"form.get('contact_ids').value\"\r\n            (selectContactPersons)=\"onSelectContactPersons($event)\"\r\n          ></pek-crm-multi-contact-persons-picker>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <ng-container *ngIf=\"data.type === 'withoutEmployee'\">\r\n      <div class=\"row\">\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>Start Date and Time*</label>\r\n            <pek-date-time-picker\r\n              [maxDate]=\"form.get('end')?.value\"\r\n              (clearDate)=\"onClearStartDate()\"\r\n              (setDate)=\"onSetStartDate($event)\"\r\n              [date]=\"form.get('start')?.value\"\r\n              placeholder=\"Choice Start Date and Time\"\r\n            ></pek-date-time-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>End Date and Time*</label>\r\n            <pek-date-time-picker\r\n              [minDate]=\"form.get('start')?.value\"\r\n              (clearDate)=\"onClearEndDate()\"\r\n              (setDate)=\"onSetEndDate($event)\"\r\n              [date]=\"form.get('end')?.value\"\r\n              placeholder=\"Choice End Date and Time\"\r\n            ></pek-date-time-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"data.type === 'withEmployee'\">\r\n      <div\r\n        (click)=\"onOpenDatesEmployees()\"\r\n        [class.disabled]=\"form.get('employee_ids').value.length === 0\"\r\n        class=\"row select-date\"\r\n      >\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>Start Date and Time*</label>\r\n            <p-calendar\r\n              [minDate]=\"form.get('end')?.value\"\r\n              [showTime]=\"true\"\r\n              [showClear]=\"true\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              hourFormat=\"24\"\r\n              formControlName=\"start\"\r\n              placeholder=\"Choice Start Date and Time\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <div class=\"form-group\">\r\n            <label>End Date and Time*</label>\r\n            <p-calendar\r\n              [minDate]=\"form.get('start')?.value\"\r\n              [showTime]=\"true\"\r\n              [showClear]=\"true\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              hourFormat=\"24\"\r\n              formControlName=\"end\"\r\n              placeholder=\"Choice End Date and Time\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea\r\n        id=\"description\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        formControlName=\"description\"\r\n        [autoResize]=\"true\"\r\n      ></textarea>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"is_scheduled\"> Is Scheduled </label>\r\n      <p-inputSwitch\r\n        id=\"is_scheduled\"\r\n        formControlName=\"is_scheduled\"\r\n      >\r\n      </p-inputSwitch>\r\n    </div>\r\n  </form>\r\n\r\n  <form *ngIf=\"form.get('is_scheduled').value\" [formGroup]=\"scheduleForm\">\r\n    <div class=\"row\">\r\n      <div class=\"col-4\">\r\n        <div class=\"form-group\">\r\n          <label for=\"start\">Start*</label>\r\n          <p-calendar\r\n            placeholder=\"Choice Start Time\"\r\n            [showButtonBar]=\"true\"\r\n            id=\"start\"\r\n            formControlName=\"start\"\r\n            [showTime]=\"true\"\r\n            [timeOnly]=\"true\"\r\n            [hourFormat]=\"'24'\"\r\n            inputId=\"timeonly\"\r\n          >\r\n          </p-calendar>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-4\">\r\n        <div class=\"form-group\">\r\n          <label for=\"end\">End*</label>\r\n          <p-calendar\r\n            id=\"end\"\r\n            placeholder=\"Choice End Time\"\r\n            [showButtonBar]=\"true\"\r\n            formControlName=\"end\"\r\n            [showTime]=\"true\"\r\n            [timeOnly]=\"true\"\r\n            [hourFormat]=\"'24'\"\r\n            [dateFormat]=\"'hh:mm'\" inputId=\"timeonly\"\r\n          >\r\n          </p-calendar>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"col-4\">\r\n        <div class=\"form-group\">\r\n          <label> Week days* </label>\r\n          <p-multiSelect\r\n            placeholder=\"Choice Week Days\"\r\n            formControlName=\"schedule_values\"\r\n            optionLabel=\"name\"\r\n            optionValue=\"value\"\r\n            [options]=\"scheduleDays\"\r\n          ></p-multiSelect>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.modalType\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid || (form.get('is_scheduled').value && scheduleForm.invalid)\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {EventTypesService} from '../../services/event-types.service';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EventType} from '../../models/event-type';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-external-event-type',\r\n  templateUrl: './create-edit-external-event-type.component.html',\r\n  styleUrls: ['./create-edit-external-event-type.component.scss']\r\n})\r\nexport class CreateEditExternalEventTypeComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    google_calendar_id: [null, [Validators.required]],\r\n    google_owner_first_name: [null],\r\n    google_owner_last_name: [null],\r\n    color_hex: ['#3788d8'],\r\n    profiles_ids: [[]],\r\n    google_owner_gmail: [null, [Validators.email]],\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateEditExternalEventTypeComponent>,\r\n    private eventTypesService: EventTypesService,\r\n    private readonly fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, eventType: EventType }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.data.eventType.color_hex = this.data.eventType.color_hex ? this.data.eventType.color_hex : '#3788d8';\r\n      this.form.addControl(<any>'id', new FormControl(this.data.eventType.id));\r\n      this.form.patchValue(<any>this.data.eventType);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createEventType();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editEventType();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createEventType() {\r\n    const send = <any>this.form.value;\r\n    this.eventTypesService.addCalendarFromGoogle(send).subscribe({\r\n      next: type => this.dialogRef.close(type),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editEventType() {\r\n    const send = <any>this.form.value;\r\n    this.eventTypesService.update(send).subscribe({\r\n      next: type => this.dialogRef.close(type),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Company Category\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"calendar\">Google Calendar ID*</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"google_calendar_id\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"calendar\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"first-name\">First Name</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"google_owner_first_name\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"first-name\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"last-name\">Last Name</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"google_owner_last_name\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"last-name\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"gmail\">Gmail</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"google_owner_gmail\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"gmail\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group form-group_color\">\r\n      <label> Color </label>\r\n      <p-colorPicker formControlName=\"color_hex\"></p-colorPicker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {CompanyService} from '../../services/company.service';\r\nimport {Company} from '../../models/company';\r\nimport {ContactPerson} from '@shared/models/contact-person';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-linked-company',\r\n  templateUrl: './create-edit-linked-company.component.html',\r\n  styleUrls: ['./create-edit-linked-company.component.scss']\r\n})\r\nexport class CreateEditLinkedCompanyComponent implements OnInit {\r\n  isSaving = false;\r\n  isLoading = false;\r\n\r\n  contactPersons: ContactPerson[] = [];\r\n\r\n  form = this.fb.group({\r\n    to_company_id: [null, [Validators.required]],\r\n    contact_person_id: [{ value: null, disabled: true }, Validators.required],\r\n    link_weight: [0, [Validators.required]],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly companyService: CompanyService,\r\n    private dialogRef: MatDialogRef<CreateEditLinkedCompanyComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: {companyId: number, type: ModalActionType, company: Company }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.get('link_weight').patchValue(this.data.company.link_weight);\r\n      this.form.get('to_company_id').patchValue(<any>this.data.company.to_company.id);\r\n      this.form.get('contact_person_id').patchValue(<any>this.data.company.contact_person.id);\r\n\r\n      this.form.get('contact_person_id').enable();\r\n\r\n      this.searchContactPersons();\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createLinkedCompany();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editLinkedCompany();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createLinkedCompany() {\r\n    const send = <any>this.form.value;\r\n    this.companyService.createEditLinkCompany(this.data.companyId, send).subscribe({\r\n      next: company => this.dialogRef.close(company),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editLinkedCompany() {\r\n    const send = <any>this.form.value;\r\n    this.companyService.createEditLinkCompany(this.data.company.to_company.id, send).subscribe({\r\n      next: company => this.dialogRef.close(company),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  searchContactPersons() {\r\n    const companyId = this.form.get('to_company_id').value;\r\n\r\n    if (companyId) {\r\n      this.isLoading = true;\r\n      this.companyService.getById(+companyId).subscribe(company => {\r\n        this.contactPersons = company.contact_persons.map(c => {\r\n          return {\r\n            ...c,\r\n            fullName: `${c.first_name} ${c.last_name}`\r\n          };\r\n        });\r\n        this.isLoading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    if (id) {\r\n      this.form.get('to_company_id').patchValue(<any>id);\r\n      this.form.get('contact_person_id').enable();\r\n      this.searchContactPersons();\r\n      console.log(this.form.value);\r\n    } else {\r\n      this.form.get('to_company_id').patchValue(null);\r\n      this.form.get('contact_person_id').disable();\r\n      this.form.get('contact_person_id').patchValue(null);\r\n      this.contactPersons = [];\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Linked Company\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Company*</label>\r\n      <pek-company-picker\r\n        (selectCompany)=\"onSelectCompany($event)\"\r\n        [currentCompanyId]=\"1\"\r\n      ></pek-company-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Contact Person* (First, choose a Company)</label>\r\n      <p-dropdown\r\n        *ngIf=\"!isLoading; else spinner\"\r\n        [options]=\"contactPersons\"\r\n        formControlName=\"contact_person_id\"\r\n        placeholder=\"Select Contact Person\"\r\n        optionLabel=\"fullName\"\r\n        optionValue=\"id\"\r\n        [showClear]=\"true\"\r\n      >\r\n      </p-dropdown>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label>Connection Weight*: {{ form.get('link_weight').value }}</label>\r\n      <p-slider formControlName=\"link_weight\" [min]=\"0\" [max]=\"10\"></p-slider>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {ContactPerson} from '@shared/models/contact-person';\r\nimport {ContactPersonService} from '../../services/contact-person.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-linked-contact',\r\n  templateUrl: './create-edit-linked-contact.component.html',\r\n  styleUrls: ['./create-edit-linked-contact.component.scss']\r\n})\r\nexport class CreateEditLinkedContactComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    to_contact: [null, [Validators.required]],\r\n    link_weight: [0, [Validators.required]],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<CreateEditLinkedContactComponent>,\r\n    private readonly contactPersonService: ContactPersonService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, person: ContactPerson, contactPerson: any }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.get('link_weight').patchValue(this.data.contactPerson.link_weight);\r\n      this.form.get('to_contact').patchValue(this.data.contactPerson.to_contact);\r\n      this.form.addControl(<any>'from_contact', new FormControl(this.data.contactPerson.from_contact.id));\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createLinkedContact();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editLinkedContact();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createLinkedContact() {\r\n    const send = <Partial<ContactPerson>>this.form.value;\r\n    this.contactPersonService.linkContact(this.data.person.id, send).subscribe({\r\n      next: contactPerson => this.dialogRef.close(contactPerson),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editLinkedContact() {\r\n    const send = <Partial<ContactPerson>>this.form.value;\r\n    this.contactPersonService.linkContact(this.data.person.id, send).subscribe({\r\n      next: contactPerson => this.dialogRef.close(contactPerson),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectContactPerson(id: number) {\r\n    this.form.get('to_contact').patchValue(<any>id);\r\n  }\r\n\r\n  onSelectContactPersonFromContact(id: number) {\r\n    this.form.get('from_contact').patchValue(<never>id);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Linked Company\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label> Contact Person* </label>\r\n      <ng-container *ngIf=\"data.type === 'create'\">\r\n        <pek-crm-contact-person-picker\r\n          [currentContactPersonId]=\"form.get('to_contact').value\"\r\n          (selectContactPerson)=\"onSelectContactPerson($event)\"\r\n        ></pek-crm-contact-person-picker>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"data.type === 'edit'\">\r\n        <pek-crm-contact-person-picker\r\n          [currentContactPersonId]=\"form.get('from_contact').value\"\r\n          (selectContactPerson)=\"onSelectContactPersonFromContact($event)\"\r\n        ></pek-crm-contact-person-picker>\r\n      </ng-container>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <div class=\"form-group\">\r\n        <label>Connection Weight*: {{ form.get('link_weight').value }}</label>\r\n        <p-slider formControlName=\"link_weight\" [min]=\"0\" [max]=\"10\"></p-slider>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {EventTypesService} from '../../services/event-types.service';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EventType} from '../../models/event-type';\r\nimport {UserProfile} from '../../models/user-profile';\r\nimport {UserProfileService} from '../../services/user-profile.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-user-profile',\r\n  templateUrl: './create-edit-user-profile.component.html',\r\n  styleUrls: ['./create-edit-user-profile.component.scss']\r\n})\r\nexport class CreateEditUserProfileComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    first_name: [null, Validators.required],\r\n    last_name: [null, Validators.required],\r\n    gmail: [null, Validators.required],\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateEditUserProfileComponent>,\r\n    private userProfileService: UserProfileService,\r\n    private readonly fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, userProfile: UserProfile }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl(<any>'id', new FormControl(this.data.userProfile.id));\r\n      this.form.patchValue(<any>this.data.userProfile);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createEventType();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editEventType();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createEventType() {\r\n    const send = <any>this.form.value;\r\n    this.userProfileService.create(send).subscribe({\r\n      next: userProfile => this.dialogRef.close(userProfile),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editEventType() {\r\n    const send = <any>this.form.value;\r\n    this.userProfileService.update(send).subscribe({\r\n      next: userProfile => this.dialogRef.close(userProfile),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} User Profile\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"first-name\">First Name*</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"first_name\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"first-name\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"last-name\">Last Name*</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"last_name\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"last-name\"\r\n      />\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"gmail\">Gmail*</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"gmail\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"gmail\"\r\n      />\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {CrmPositionsService} from '../../services/crm-positions.service';\r\nimport {take} from 'rxjs/operators';\r\nimport {CrmPosition} from '../../../business-trips/models/crm-position';\r\n\r\n@Component({\r\n  selector: 'pek-create-update-crm-positions',\r\n  templateUrl: './create-update-crm-positions.component.html',\r\n  styleUrls: ['./create-update-crm-positions.component.scss']\r\n})\r\nexport class CreateUpdateCrmPositionsComponent implements OnInit {\r\n  form: FormGroup;\r\n  isSaving: boolean;\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateUpdateCrmPositionsComponent>,\r\n    private fb: FormBuilder,\r\n    private crmPositionService: CrmPositionsService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: 'create' | 'edit', position: CrmPosition }\r\n  ) {\r\n\r\n    this.form = this.fb.group({\r\n      title: [null , [Validators.required]]\r\n    });\r\n\r\n    if (this.data.type === 'edit') {\r\n      this.form.patchValue(this.data.position);\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onSave() {\r\n    if (this.data.type === 'create') {\r\n      this.addPosition();\r\n    } else {\r\n      this.editPosition();\r\n    }\r\n  }\r\n\r\n  addPosition() {\r\n    if (this.form.valid) {\r\n      this.crmPositionService\r\n        .create(this.form.value)\r\n        .pipe(take(1))\r\n        .subscribe((res) => {\r\n          this.isSaving = true;\r\n          this.dialogRef.close(res);\r\n        });\r\n    }\r\n  }\r\n\r\n  editPosition() {\r\n    if (this.form.valid) {\r\n      this.form.value.id = this.data.position.id;\r\n      this.crmPositionService\r\n        .update( this.form.value.id, this.form.value)\r\n        .pipe(take(1))\r\n        .subscribe((res) => {\r\n          this.isSaving = true;\r\n          this.dialogRef.close(res);\r\n        });\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Position\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\"> Title </label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"title\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"name\"\r\n      />\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {EventCompanyService} from '../../services/event-company.service';\r\nimport {EventCompany} from '../../models/event-company';\r\nimport {finalize} from 'rxjs';\r\nimport {CompanyActivity} from '../../models/company-activity';\r\n\r\n@Component({\r\n  selector: 'pek-crm-edit-company-activity-event',\r\n  templateUrl: './crm-edit-company-activity.component.html',\r\n  styleUrls: ['./crm-edit-company-activity.component.scss']\r\n})\r\nexport class CrmEditCompanyActivityComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    comment: ['']\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CrmEditCompanyActivityComponent>,\r\n    private readonly fb: FormBuilder,\r\n    private readonly eventCompanyService: EventCompanyService,\r\n    @Inject(MAT_DIALOG_DATA) public companyActivity: CompanyActivity,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.patchValue(this.companyActivity);\r\n  }\r\n\r\n  onSave() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n\r\n      this.eventCompanyService.update(this.companyActivity.id, this.form.value).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(eventCompany => {\r\n        this.dialogRef.close(eventCompany);\r\n      });\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Edit Event\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"comment\">Comment</label>\r\n      <textarea\r\n        id=\"comment\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"true\"\r\n        formControlName=\"comment\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Save'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {EventCompany} from '../../models/event-company';\r\nimport {EventCompanyService} from '../../services/event-company.service';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-crm-edit-card-event-company',\r\n  templateUrl: './edit-crm-event-company.component.html',\r\n  styleUrls: ['./edit-crm-event-company.component.scss']\r\n})\r\nexport class EditCrmEventCompanyComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    comment: ['']\r\n  });\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<EditCrmEventCompanyComponent>,\r\n    private readonly fb: FormBuilder,\r\n    private readonly eventCompanyService: EventCompanyService,\r\n    @Inject(MAT_DIALOG_DATA) public eventCompany: EventCompany,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.patchValue(this.eventCompany);\r\n  }\r\n\r\n  onSave() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n\r\n      this.eventCompanyService.update(this.eventCompany.id, this.form.value).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(eventCompany => {\r\n        this.dialogRef.close(eventCompany);\r\n      });\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Edit Event Company\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"comment\">Comment</label>\r\n      <textarea\r\n        id=\"comment\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"true\"\r\n        formControlName=\"comment\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Save'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnDestroy, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {EventsListService} from '../../services/events-list.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Subject} from 'rxjs';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {EventItem} from '../../models/event-item';\r\nimport {MenuItem, MessageService} from 'primeng/api';\r\n\r\n\r\n@Component({\r\n  selector: 'pek-edit-employee-event-date',\r\n  templateUrl: './edit-employee-event-date.component.html',\r\n  styleUrls: ['./edit-employee-event-date.component.scss']\r\n})\r\nexport class EditEmployeeEventDateComponent implements OnInit, OnDestroy {\r\n\r\n  menuItems: MenuItem[] = [\r\n    {\r\n      label: 'Selected Event',\r\n      items: [\r\n        {\r\n          label: 'Event Card',\r\n          icon: 'pi pi-calendar',\r\n          command: () => this.onGoEvent()\r\n        },\r\n        {\r\n          label: 'Edit',\r\n          icon: 'pi pi-pencil',\r\n          command: () => this.onEditEvent()\r\n        },\r\n      ]\r\n    }\r\n  ];\r\n\r\n  isLoading = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    end: [null, [Validators.required]],\r\n    start: [null, [Validators.required]],\r\n    employee_ids: [[]],\r\n    canOverlap: [false],\r\n  });\r\n\r\n  destroy$ = new Subject();\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  eventId: number;\r\n\r\n  constructor(\r\n    private eventsListService: EventsListService,\r\n    private fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<EditEmployeeEventDateComponent>,\r\n    private messageService: MessageService,\r\n    private readonly adapterService: AdapterService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { employeeIds: number[], event: EventItem },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('employee_ids').patchValue(this.data.employeeIds.join(','));\r\n    if (this.data.event.id) {\r\n      this.eventId = this.data.event.id;\r\n\r\n    }\r\n    if (this.data.event.start) {\r\n      this.form.get('start').patchValue(this.data.event.start);\r\n    }\r\n    if (this.data.event.end) {\r\n      this.form.get('end').patchValue(this.data.event.end);\r\n    }\r\n    this.search();\r\n  }\r\n\r\n  events: EventItem[] = [];\r\n  selectedEvent: EventItem;\r\n\r\n  search() {\r\n    this.isLoading = true;\r\n    this.selectedEvent = null;\r\n    this.events = [];\r\n    this.destroy$.next(true);\r\n\r\n    this.query = [\r\n      {name: 'employee_ids', value: this.form.get('employee_ids').value},\r\n      {name: 'get_colliding_events_events', value: true},\r\n    ];\r\n    console.log('this.form.get(\\'start\\').value', this.form.get('start').value);\r\n    if (this.form.get('start').value) {\r\n      this.query.push({\r\n        name: 'from_datetime',\r\n        value: this.adapterService.dateTimeAdapter(this.form.get('start').value)\r\n      });\r\n    } else {\r\n      this.query.push({\r\n        name: 'from_datetime',\r\n        value: this.adapterService.dateTimeAdapter(new Date())\r\n      });\r\n    }\r\n\r\n    if (this.form.get('end').value) {\r\n      this.query.push({name: 'to_datetime', value: this.adapterService.dateTimeAdapter(this.form.get('end').value)});\r\n    }\r\n\r\n    this.getEvents();\r\n  }\r\n\r\n  getEvents() {\r\n    this.eventsListService.getShorts(this.query).subscribe(events => {\r\n      this.events = events;\r\n\r\n      this.events.sort((a, b) => new Date(b.start).getTime() - new Date(a.start).getTime());\r\n      this.findCollidingAndSortEvents();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  disableEmployees() {\r\n    if (this.events.length === 0 && this.form.get('end').value && this.form.get('start').value) return false;\r\n\r\n    if (this.events.some(e => e.isDatesColliding) && !this.form.get('canOverlap').value || !this.form.get('end').value || !this.form.get('start').value) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  findCollidingAndSortEvents(): void {\r\n    this.events  = this.events.filter(event => event.id !== this.eventId);\r\n    this.events.forEach(event => {\r\n      event.startDate = new Date(event.start);\r\n      if (this.form.get('start').value) {\r\n        const eventStartDate = new Date(event.start);\r\n        const eventEndDate = new Date(event.end);\r\n        event.isDatesColliding = this.form.get('start').value <= eventEndDate && this.form.get('end').value >= eventStartDate;\r\n      } else {\r\n        event.isDatesColliding = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  onAccept() {\r\n    if (this.events.filter(el => el.isDatesColliding).length > 0 && !this.form.get('canOverlap').value ) {\r\n      this.messageService.add({severity: 'error', summary: 'Dates colliding.', detail: `Check for colliding dates!`});\r\n      return;\r\n    }\r\n\r\n    this.dialogRef.close({start: this.form.get('start').value, end: this.form.get('end').value, canOverlap: this.form.get('canOverlap').value});\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  private onEditEvent() {\r\n    this.eventsListService.openCreateEventEventModal('edit', 'withEmployee', this.selectedEvent).subscribe(event => {\r\n      if (event) {\r\n        this.search();\r\n      }\r\n    });\r\n  }\r\n\r\n  private onGoEvent() {\r\n    const link = 'crm/events/' + this.selectedEvent.id;\r\n    window.open(link, '_blank');\r\n  }\r\n\r\n  onSetStartDate(date: Date) {\r\n    this.form.get('start').patchValue(date);\r\n    // this.search();\r\n  }\r\n\r\n  onSetEndDate(date: Date) {\r\n    this.form.get('end').patchValue(date);\r\n    // this.search();\r\n  }\r\n\r\n  onClearStartDate() {\r\n    this.form.get('start').patchValue(null);\r\n    this.search();\r\n  }\r\n\r\n  onClearEndDate() {\r\n    this.form.get('end').patchValue(null);\r\n    this.search();\r\n  }\r\n\r\n  onSelectStartDate(date: Date) {\r\n    if (date instanceof Date) {\r\n      this.form.get('start').patchValue(date);\r\n      this.search();\r\n    }\r\n  }\r\n\r\n  onSelectEndDate(date: Date) {\r\n    if (date instanceof Date) {\r\n      this.form.get('end').patchValue(date);\r\n      this.search();\r\n    }\r\n  }\r\n\r\n  onCloseStartDate(date: Date) {\r\n    // this.form.get('start').patchValue(date);\r\n    // this.search();\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Check Employees Free Time\r\n  </h2>\r\n\r\n  <form  [formGroup]=\"form\">\r\n    <label class=\"mr-3 p-error\">Accept An Overlapping Event</label>\r\n    <p-checkbox\r\n      name=\"group1\"\r\n      [binary]=\"true\"\r\n      inputId=\"canOverlap\"\r\n      formControlName=\"canOverlap\"\r\n    >\r\n    </p-checkbox>\r\n  </form>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\" class=\"mb-3\">\r\n    <div class=\"row\">\r\n      <div class=\"col-4 edit-start-date\">\r\n        <div class=\"form-group\">\r\n          <label>Start Date and Time*</label>\r\n          <pek-date-time-picker\r\n            (select)=\"onSelectStartDate($event)\"\r\n            [maxDate]=\"form.get('end')?.value\"\r\n            (clearDate)=\"onClearStartDate()\"\r\n            (setDate)=\"onSetStartDate($event)\"\r\n            [date]=\"form.get('start')?.value\"\r\n            placeholder=\"Choice Start Date and Time\"\r\n          ></pek-date-time-picker>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-4 edit-end-date\">\r\n        <div class=\"form-group\">\r\n          <label>End Date and Time*</label>\r\n          <pek-date-time-picker\r\n            (select)=\"onSelectEndDate($event)\"\r\n            [minDate]=\"form.get('start')?.value\"\r\n            (clearDate)=\"onClearEndDate()\"\r\n            (setDate)=\"onSetEndDate($event)\"\r\n            [date]=\"form.get('end')?.value\"\r\n            placeholder=\"Choice End Date and Time\"\r\n          ></pek-date-time-picker>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-4\">\r\n        <div class=\"bar\">\r\n          <p-menubar [model]=\"menuItems\" [class.disabled]=\"!selectedEvent\"></p-menubar>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n\r\n  <div class=\"page__table\">\r\n    <p-table\r\n      selectionMode=\"single\"\r\n      scrollHeight=\"calc(100vh - 28rem)\"\r\n      [scrollable]=\"true\"\r\n      [paginator]=\"false\"\r\n      [value]=\"events\"\r\n      [(selection)]=\"selectedEvent\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n          <th style=\"width: 30%\">Event Name</th>\r\n          <th style=\"width: 25%\" class=\"text-center\">Employee Name</th>\r\n          <th\r\n            style=\"width: 20%\"\r\n            pSortableColumn=\"start\"\r\n            class=\"text-center\"\r\n          >\r\n            Event Start\r\n            <p-sortIcon field=\"start\">\r\n            </p-sortIcon>\r\n          </th>\r\n          <th\r\n            style=\"width: 20%\"\r\n            class=\"text-center\"\r\n            pSortableColumn=\"end\"\r\n          >\r\n            Event End\r\n            <p-sortIcon field=\"end\">\r\n            </p-sortIcon>\r\n          </th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-event let-i=\"rowIndex\">\r\n        <tr [pSelectableRow]=\"event\" [class.overlap]=\"event.isDatesColliding\">\r\n          <td style=\"width: 5%\" class=\"text-center\">{{ i + 1 }}</td>\r\n          <td style=\"width: 30%\">\r\n            <a\r\n              [routerLink]=\"'/crm/events/' + event?.id\"\r\n              target=\"_blank\"\r\n            >\r\n              {{ event.event_type?.name }}\r\n            </a>\r\n          </td>\r\n          <td style=\"width: 25%\" class=\"text-center\">\r\n            <ng-container *ngIf=\"event.employee.length === 0\">\r\n              Not Related\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"event.employee.length > 0\">\r\n              <div *ngFor=\"let employee of event.employee\">\r\n                {{ employee.first_name + \" \" + employee.last_name }}\r\n              </div>\r\n            </ng-container>\r\n          </td>\r\n          <td style=\"width: 20%\" class=\"text-center\">\r\n            {{ event.start | date: \"dd/MM/yyyy, HH:mm\" }}\r\n          </td>\r\n          <td style=\"width: 20%\" class=\"text-center\">\r\n            {{ event.end | date: \"dd/MM/yyyy, HH:mm\" }}\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"8\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Accept'\"\r\n    [disabled]=\"disableEmployees()\"\r\n    (click)=\"onAccept()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {EventCompany, Impression} from '../../models/event-company';\r\nimport {EventCompanyService} from '../../services/event-company.service';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'pek-event-company-set-state',\r\n  templateUrl: './event-company-set-state.component.html',\r\n  styleUrls: ['./event-company-set-state.component.scss']\r\n})\r\nexport class EventCompanySetStateComponent implements OnInit {\r\n  disabled: boolean;\r\n  Impression = Impression;\r\n\r\n  form: FormGroup\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly eventCompanyService: EventCompanyService,\r\n    private dialogRef: MatDialogRef<EventCompanySetStateComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { eventCompany: EventCompany },\r\n  ) {\r\n    this.form = this.fb.group({\r\n      id: [null, Validators.required],\r\n      impression: [null, Validators.required],\r\n    });\r\n    this.form.get('id').setValue(this.data.eventCompany.id)\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  update() {\r\n\r\n  }\r\n\r\n  onAccept() {\r\n    if(this.form.valid) {\r\n      this.data.eventCompany.impression = this.form.get('impression').value;\r\n      this.eventCompanyService.update(this.data.eventCompany.id, {is_done: true, impression: this.form.get('impression').value})\r\n        .subscribe(() => this.dialogRef.close((this.data.eventCompany)));\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Choice Status Of Result\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <p-radioButton\r\n      class=\"mr-3 neutral\"\r\n      name=\"impression\"\r\n      label=\"Neutral\"\r\n      [value]=\"Impression.NEUTRAL\"\r\n      formControlName=\"impression\">\r\n    </p-radioButton>\r\n\r\n    <p-radioButton\r\n      class=\"mr-3 positive\"\r\n      name=\"impression\"\r\n      label=\"Positive\"\r\n      [value]=\"Impression.POSITIVE\"\r\n      formControlName=\"impression\">\r\n    </p-radioButton>\r\n\r\n    <p-radioButton\r\n      class=\"mr-3 negative\"\r\n      name=\"impression\"\r\n      label=\"Negative\"\r\n      [value]=\"Impression.NEGATIVE\"\r\n      formControlName=\"impression\">\r\n    </p-radioButton>\r\n  </form>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Accept'\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onAccept()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n","import {EventItem} from './event-item';\r\n\r\nexport class CompanyActivity {\r\n    comment: string;\r\n    company: number;\r\n    event: EventItem;\r\n    id: number;\r\n    is_done: boolean;\r\n}\r\n","import {EventItem} from './event-item';\r\nimport {Company} from './company';\r\n\r\nexport enum Impression {\r\n  NEUTRAL = \"0\" ,\r\n  POSITIVE = \"1\",\r\n  NEGATIVE = \"2\"\r\n}\r\n\r\nexport class EventCompany {\r\n  readonly id: number;\r\n  event: EventItem;\r\n  company: Company;\r\n  comment: string;\r\n  impression?: Impression;\r\n  is_done: boolean;\r\n}\r\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CrmEmployeeService} from '../../services/crm-employee.service';\r\nimport {CRMEmployee} from '../../models/crm-employee';\r\n\r\n@Component({\r\n  selector: 'pek-crm-employee-picker',\r\n  templateUrl: './crm-employee-picker.component.html',\r\n  styleUrls: ['./crm-employee-picker.component.scss']\r\n})\r\nexport class CrmEmployeePickerComponent implements OnInit, OnDestroy {\r\n  @Input() currentEmployeeIds: number[] = [];\r\n  @Output() selectEmployees: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n\r\n  isLoading = true;\r\n  employees: CRMEmployee[] = [];\r\n  selectedEmployees: CRMEmployee[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly crmEmployeeService: CrmEmployeeService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.crmEmployeeService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(employees => {\r\n      this.employees = employees;\r\n      this.findEmployees();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('currentEmployeeIds' in changes) {\r\n      this.selectedEmployees = [];\r\n      this.findEmployees();\r\n    }\r\n  }\r\n\r\n  onSelectEmployees(employees: CRMEmployee[]) {\r\n    if (employees) {\r\n      this.selectEmployees.emit(employees.map(e => e.id));\r\n    } else {\r\n      this.selectEmployees.emit(null);\r\n    }\r\n  }\r\n\r\n  findEmployees() {\r\n    if (this.currentEmployeeIds.length > 0) {\r\n      this.currentEmployeeIds.forEach(id => {\r\n        const findEmployee = this.employees.find(t => t.id === id);\r\n\r\n        if (findEmployee) {\r\n          this.selectedEmployees.push(findEmployee);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"crm-employee-picker\">\r\n  <p-multiSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"employees\"\r\n    [(ngModel)]=\"selectedEmployees\"\r\n    optionLabel=\"fullName\"\r\n    placeholder=\"Select Employees\"\r\n    (ngModelChange)=\"onSelectEmployees($event)\"\r\n    [showClear]=\"true\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {EventType} from '../../models/event-type';\r\nimport {EventTypesService} from '../../services/event-types.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Component({\r\n  selector: 'pek-crm-event-type-picker',\r\n  templateUrl: './crm-event-type-picker.component.html',\r\n  styleUrls: ['./crm-event-type-picker.component.scss']\r\n})\r\nexport class CrmEventTypePickerComponent implements OnInit {\r\n  @Output() selectEventType: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() currentEventTypeId: any;\r\n  @Input() filters: QuerySearch[] = [];\r\n  isLoading = true;\r\n  eventTypes: EventType[] = [];\r\n  selectedEventTypeId: number;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly eventTypeService: EventTypesService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.filters.length > 0) {\r\n      this.eventTypeService.getByFilters(this.filters).pipe(\r\n        takeUntil(this.destroy$)\r\n      ).subscribe(eventTypes => {\r\n        this.eventTypes = eventTypes;\r\n\r\n        if (this.currentEventTypeId) {\r\n          this.selectedEventTypeId = this.currentEventTypeId;\r\n        }\r\n\r\n        this.isLoading = false;\r\n      });\r\n    } else {\r\n      this.eventTypeService.get().pipe(\r\n        takeUntil(this.destroy$)\r\n      ).subscribe(eventTypes => {\r\n        this.eventTypes = eventTypes;\r\n\r\n        if (this.currentEventTypeId) {\r\n          this.selectedEventTypeId = this.currentEventTypeId;\r\n        }\r\n\r\n        this.isLoading = false;\r\n      });\r\n    }\r\n  }\r\n\r\n  onSelectEventType() {\r\n    this.selectEventType.emit(this.selectedEventTypeId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"crm-event-type-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"eventTypes\"\r\n    placeholder=\"Select Event Type\"\r\n    [(ngModel)]=\"selectedEventTypeId\"\r\n    (ngModelChange)=\"onSelectEventType()\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {CompanyCategory, CompanyCategoryModule} from '../models/company-category';\r\nimport {Observable, of} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  CreateEditCompanyCategoryComponent\r\n} from '../modals/create-edit-company-category/create-edit-company-category.component';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CompanyCategoryService {\r\n\r\n  categories: CompanyCategory[];\r\n  modules: CompanyCategoryModule[];\r\n\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'company_categories/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: { name: string, value: any }[]): Observable<CompanyCategory[]> {\r\n    if (this.categories) {\r\n      return of(this.categories);\r\n    }\r\n\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: CompanyCategory[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => {\r\n        const categories = response.data;\r\n        this.categories = categories;\r\n        return categories;\r\n      }));\r\n  }\r\n\r\n  create(category: Partial<CompanyCategory>): Observable<CompanyCategory> {\r\n    return this.httpClient.post<{ data: CompanyCategory }>(this.API_URL + this.url, category).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(category: Partial<CompanyCategory>): Observable<CompanyCategory> {\r\n    return this.httpClient.put<{ data: CompanyCategory }>(this.API_URL + this.url + category.id + '/', category).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getModules(query?: QuerySearch[]): Observable<CompanyCategoryModule[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: CompanyCategoryModule[] }>(this.API_URL + 'modules/' + queryParams).pipe(\r\n      map(response => {\r\n        const modules = response.data;\r\n        this.modules = modules;\r\n        return modules;\r\n      }));\r\n  }\r\n\r\n  delete(category: CompanyCategory): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + category.id + '/');\r\n  }\r\n\r\n  createEditWarehouseModal(type: ModalActionType, category?: CompanyCategory): Observable<CompanyCategory> {\r\n    return this.dialog\r\n      .open<CreateEditCompanyCategoryComponent>(CreateEditCompanyCategoryComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, category},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable, of, ReplaySubject, Subject} from 'rxjs';\r\nimport {AddEventModalType, Companies, Company} from '../models/company';\r\nimport {map} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {CreateEditCompanyComponent} from '../modals/create-edit-company/create-edit-company.component';\r\nimport {\r\n  CreateEditLinkedCompanyComponent\r\n} from '../modals/create-edit-linked-company/create-edit-linked-company.component';\r\nimport {AddCompanyToEventComponent} from '../modals/add-company-to-event/add-company-to-event.component';\r\nimport {AddEventToCompanyComponent} from '../modals/add-event-to-company/add-event-to-company.component';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CompanyService {\r\n\r\n  shortCompanies: Partial<Company>[];\r\n\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'companies/';\r\n  shortsCompaniesResult: ReplaySubject<Partial<Company>[]> = new ReplaySubject<Partial<Company>[]>();\r\n  isLoadingShortCompanies = false;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Company[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: Company[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getForPagination(query?: QuerySearch[]): Observable<Companies> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: Companies }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<Company> {\r\n    return this.httpClient.get<{ data: Company }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  getShorts(): Observable<Partial<Company>[]> {\r\n    if (this.isLoadingShortCompanies) {\r\n      return this.shortsCompaniesResult;\r\n    } else {\r\n      this.isLoadingShortCompanies = true;\r\n      return this.getShortsCompanies();\r\n    }\r\n  }\r\n\r\n  getShortsCompanies(query?: QuerySearch[]): Observable<Partial<Company>[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Partial<Company>[] }>(this.API_URL + this.url + 'get_short_companies_list/' + queryParams).pipe(\r\n      map(response => {\r\n        const shortCompanies = response.data;\r\n        this.shortsCompaniesResult.next(shortCompanies);\r\n        return shortCompanies;\r\n      }));\r\n  }\r\n\r\n  create(company: Partial<Company>): Observable<Company> {\r\n    return this.httpClient.post<{ data: Company }>(this.API_URL + this.url, company).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartial(company: Partial<Company>): Observable<Company> {\r\n    return this.httpClient.patch<{ data: Company }>(this.API_URL + this.url + company.id + '/', company).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  deleteLinkedCompany(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + 'linked_companies/' + id + '/');\r\n  }\r\n\r\n  createEditLinkCompany(id: number, company: Partial<Company>): Observable<Company> {\r\n    return this.httpClient.post<{ data: Company }>(this.API_URL + this.url + id + '/link_company/', company).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createEditCompanyModal(type: ModalActionType, company?: Company): Observable<Company> {\r\n    return this.dialog\r\n      .open<CreateEditCompanyComponent>(CreateEditCompanyComponent, {\r\n        width: '45rem',\r\n        height: 'auto',\r\n        data: {type, company},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  createEditLinkedCompanyModal(companyId: number, type: ModalActionType, company?: Company): Observable<Company> {\r\n    return this.dialog\r\n      .open<CreateEditLinkedCompanyComponent>(CreateEditLinkedCompanyComponent, {\r\n        width: '45rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {companyId, type, company},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openAddEventToCompanyModal(type: AddEventModalType, company: Company): Observable<any> {\r\n    return this.dialog\r\n      .open<AddEventToCompanyComponent>(AddEventToCompanyComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, company},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ContactPerson} from '@shared/models/contact-person';\r\nimport {Observable, of} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  CreateEditContactPersonComponent\r\n} from '../modals/create-edit-contact-person/create-edit-contact-person.component';\r\nimport {\r\n  CreateEditLinkedContactComponent\r\n} from '../modals/create-edit-linked-contact/create-edit-linked-contact.component';\r\nimport {AddEventModalType, Company} from '../models/company';\r\nimport {AddEventToCompanyComponent} from '../modals/add-event-to-company/add-event-to-company.component';\r\nimport {\r\n  AddEventToContactPersonComponent\r\n} from '../modals/add-event-to-contact-person/add-event-to-contact-person.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ContactPersonService {\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'contact_persons/';\r\n\r\n  contactPersons: ContactPerson[];\r\n  query;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<ContactPerson[]> {\r\n    if (this.contactPersons) {\r\n      return of(this.contactPersons);\r\n    }\r\n    return this.getForce(query, true);\r\n  }\r\n\r\n  getForce(query?: QuerySearch[], saveCache = false): Observable<ContactPerson[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: ContactPerson[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\r\n      map(response => {\r\n        const contactPersons = response.data.map(p => {\r\n          return {\r\n            ...p,\r\n            fullName: `${p.first_name} ${p.last_name}`\r\n          };\r\n        });\r\n        if (saveCache) {\r\n          this.contactPersons = contactPersons;\r\n        }\r\n        return contactPersons;\r\n      })\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<ContactPerson> {\r\n    return this.httpClient.get<{ data: ContactPerson }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(contactPerson: ContactPerson): Observable<ContactPerson> {\r\n    return this.httpClient.post<{ data: ContactPerson }>(this.API_URL + this.url, contactPerson).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(contactPerson: ContactPerson): Observable<ContactPerson> {\r\n    return this.httpClient.put<{ data: ContactPerson }>(this.API_URL + this.url + contactPerson.id + '/', contactPerson).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): any {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  linkContact(id: number, contactPerson: Partial<ContactPerson>): Observable<ContactPerson> {\r\n    return this.httpClient.post<{ data: ContactPerson }>(this.API_URL + this.url + id + '/link_contact/', contactPerson).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  deleteLinkedContact(contactPerson: ContactPerson): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + 'linked_contacts/' + contactPerson.id + '/');\r\n  }\r\n\r\n  openCreateEditLinkedContactModal(type: ModalActionType, person: ContactPerson, contactPerson?: ContactPerson) {\r\n    return this.dialog\r\n      .open<CreateEditLinkedContactComponent>(CreateEditLinkedContactComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, person, contactPerson},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  createEditContactPersonModal(companyId: number, type: ModalActionType, contactPerson?: ContactPerson): Observable<ContactPerson> {\r\n    return this.dialog\r\n      .open<CreateEditContactPersonComponent>(CreateEditContactPersonComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        data: {companyId, type, contactPerson},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openAddEventToContactPersonModal(type: AddEventModalType, contactPerson: ContactPerson): Observable<any> {\r\n    return this.dialog\r\n      .open<AddEventToContactPersonComponent>(AddEventToContactPersonComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, contactPerson},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {CRMEmployee} from '../models/crm-employee';\r\nimport {Observable, of} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EventType} from '../models/event-type';\r\nimport {CreateEditEventTypeComponent} from '../modals/create-edit-event-type/create-edit-event-type.component';\r\nimport {CreateEditCrmEmployeeComponent} from '../modals/create-edit-crm-employee/create-edit-crm-employee.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CrmEmployeeService {\r\n\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'employees/';\r\n\r\n  employees: CRMEmployee[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private dialog: MatDialog\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<CRMEmployee[]> {\r\n    // if (this.employees) {\r\n    //   return of(this.employees);\r\n    // }\r\n\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    console.log('query', query);\r\n\r\n    return this.httpClient.get<{ data: CRMEmployee[] }>(this.API_URL + this.url  + queryParams).pipe(\r\n      map(response => {\r\n        const employees = response.data.map(e => {\r\n          return {\r\n            ...e,\r\n            fullName: `${e.first_name} ${e.last_name}`\r\n          };\r\n        });\r\n        this.employees = employees;\r\n        return employees;\r\n      }));\r\n  }\r\n\r\n  getById(id): Observable<CRMEmployee> {\r\n    return this.httpClient\r\n      .get<{ data: CRMEmployee }>(this.API_URL + this.url + id + '/')\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  create(employee: Partial<CRMEmployee>): Observable<CRMEmployee> {\r\n    return this.httpClient.post<{ data: CRMEmployee }>(this.API_URL + this.url, employee).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(employee: Partial<CRMEmployee>): Observable<CRMEmployee> {\r\n    return this.httpClient.patch<{ data: CRMEmployee }>(this.API_URL + this.url + employee.id + '/', employee).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(employee: CRMEmployee): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + employee.id + '/');\r\n  }\r\n\r\n  createEditEmployeeModal(type: ModalActionType, employee?: CRMEmployee): Observable<CRMEmployee> {\r\n    return this.dialog\r\n      .open<CreateEditCrmEmployeeComponent>(CreateEditCrmEmployeeComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, employee},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {CrmPosition} from '../../business-trips/models/crm-position';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {CRMEmployee} from '../models/crm-employee';\r\nimport {\r\n  CreateEditCrmEmployeeComponent\r\n} from '../modals/create-edit-crm-employee/create-edit-crm-employee.component';\r\nimport {\r\n  CreateUpdateCrmPositionsComponent\r\n} from '../modals/create-update-crm-positions/create-update-crm-positions.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CrmPositionsService {\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'positions/';\r\n\r\n  constructor(private httpClient: HttpClient, public dialog: MatDialog) {}\r\n  get(query?: QuerySearch[]): Observable<CrmPosition[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .get<{ data: CrmPosition[] }>(this.API_URL + this.url + qString)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getById(id): Observable<CrmPosition> {\r\n    return this.httpClient.get<{ data: CrmPosition }>(this.API_URL + this.url + id + '/').pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  create(entity) {\r\n    return this.httpClient\r\n      .post<{ data: CrmPosition }>(this.API_URL + this.url, entity)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  update(id, entity: CrmPosition) {\r\n    return this.httpClient.patch(this.API_URL + this.url + id + '/', entity);\r\n  }\r\n\r\n  delete(entity: CrmPosition) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n\r\n  createEditCrmPositionModal(type: ModalActionType, position?: CrmPosition) {\r\n    return this.dialog\r\n      .open<CreateUpdateCrmPositionsComponent>(CreateUpdateCrmPositionsComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, position},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {EventCompany} from '../models/event-company';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {EditCrmEventCompanyComponent} from '../modals/edit-crm-event-company/edit-crm-event-company.component';\r\nimport {CompanyActivity} from '../models/company-activity';\r\nimport {\r\n  CrmEditCompanyActivityComponent\r\n} from '../modals/crm-edit-company-activity-event/crm-edit-company-activity.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EventCompanyService {\r\n\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'event_companies/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<EventCompany[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: EventCompany[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id): Observable<EventCompany> {\r\n    return this.httpClient.get<{ data: EventCompany }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(company: Partial<EventCompany>): Observable<EventCompany> {\r\n    return this.httpClient.post<{ data: EventCompany }>(this.API_URL + this.url, company).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(id: number, company: Partial<EventCompany>): Observable<EventCompany> {\r\n    return this.httpClient.patch<{ data: EventCompany }>(this.API_URL + this.url + id + '/', company).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  openEditModal(eventCompany: EventCompany): Observable<EventCompany> {\r\n    return this.dialog\r\n      .open<EditCrmEventCompanyComponent>(EditCrmEventCompanyComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: eventCompany,\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openEditCompanyActivityModal(companyActivity: CompanyActivity): Observable<CompanyActivity> {\r\n    return this.dialog\r\n      .open<CrmEditCompanyActivityComponent>(CrmEditCompanyActivityComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: companyActivity,\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {Observable, of} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {map} from 'rxjs/operators';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {CreateEditEventTypeComponent} from '../modals/create-edit-event-type/create-edit-event-type.component';\r\nimport {EventType} from '../models/event-type';\r\nimport {\r\n  CreateEditExternalEventTypeComponent\r\n} from '../modals/create-edit-external-event-type/create-edit-external-event-type.component';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EventTypesService {\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'event_types/';\r\n\r\n  eventTypes: EventType[];\r\n  externalEventTypes: EventType[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query: QuerySearch[] = []): Observable<EventType[]> {\r\n    if (this.eventTypes) {\r\n      return of(this.eventTypes);\r\n    }\r\n\r\n    query.push({name: 'is_inner', value: true});\r\n\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: EventType[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => {\r\n        const eventTypes = response.data;\r\n        this.eventTypes = eventTypes;\r\n        return eventTypes;\r\n      }));\r\n  }\r\n\r\n  getExternalEventTypes(query: QuerySearch[] = []): Observable<EventType[]> {\r\n    if (this.externalEventTypes) {\r\n      return of(this.externalEventTypes);\r\n    }\r\n\r\n    query.push({name: 'is_inner', value: false});\r\n\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: EventType[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => {\r\n        const eventTypes = response.data;\r\n        this.externalEventTypes = eventTypes;\r\n        return eventTypes;\r\n      }));\r\n  }\r\n\r\n  getByFilters(query?: QuerySearch[]): Observable<EventType[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: EventType[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n\r\n  create(eventType: EventType): Observable<EventType> {\r\n    return this.httpClient.post<{ data: EventType }>(this.API_URL + this.url, eventType).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(eventType: EventType): Observable<EventType> {\r\n    return this.httpClient.patch<{ data: EventType }>(this.API_URL + this.url + eventType.id + '/', eventType).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(eventType: EventType): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + eventType.id + '/');\r\n  }\r\n\r\n  addCalendarFromGoogle(eventType: Partial<EventType>): Observable<EventType> {\r\n    return this.httpClient.post<{ data }>(this.API_URL + this.url + 'add_calendar_from_google/', eventType).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createEditEventType(type: ModalActionType, eventType?: EventType): Observable<EventType> {\r\n    return this.dialog\r\n      .open<CreateEditEventTypeComponent>(CreateEditEventTypeComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, eventType},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  createEditExternalEventType(type: ModalActionType, eventType?: EventType): Observable<EventType> {\r\n    return this.dialog\r\n      .open<CreateEditExternalEventTypeComponent>(CreateEditExternalEventTypeComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, eventType},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {EventItem} from '../models/event-item';\r\nimport {Observable} from 'rxjs';\r\nimport {environment} from '@env/environment';\r\nimport {map} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {AddCompanyToEventComponent} from '../modals/add-company-to-event/add-company-to-event.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  AddContactPersonToEventComponent\r\n} from '../modals/add-contact-person-to-event/add-contact-person-to-event.component';\r\nimport {EditEmployeeEventDateComponent} from '../modals/edit-employee-event-date/edit-employee-event-date.component';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {CreateEditEventComponent} from '../modals/create-edit-event/create-edit-event.component';\r\nimport {AddEventModalType} from '../models/company';\r\nimport {EventCompany} from '../models/event-company';\r\nimport {EventCompanySetStateComponent} from '../modals/event-company-set-state/event-company-set-state.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EventsListService {\r\n\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'events_list/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  getById(id): Observable<EventItem> {\r\n    return this.httpClient.get<{ data: EventItem }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<EventItem[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: EventItem[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getShorts(query?: QuerySearch[]): Observable<EventItem[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: EventItem[] }>(this.API_URL + this.url + 'get_short_events_list/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getByEventsDays(): Observable<any[]> {\r\n    return this.httpClient.get<{ data: any[] }>(this.API_URL + this.url + 'events_by_days/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(event: EventItem): Observable<EventItem> {\r\n    return this.httpClient.post<{ data: EventItem }>(this.API_URL + this.url, event).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  addCompany(id: number, event: Partial<EventItem>[]): Observable<EventItem> {\r\n    return this.httpClient.post<{ data: EventItem }>(this.API_URL + this.url + id + '/add_companies/', event).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  addContact(id: number, event: Partial<EventItem>[]): Observable<EventItem> {\r\n    return this.httpClient.post<{ data: EventItem }>(this.API_URL + this.url + id + '/add_contacts/', event).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  changeEvent(id: number, event: EventItem): Observable<EventItem> {\r\n    return this.httpClient.patch<{ data: EventItem }>(this.API_URL + this.url + id + '/', event).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  createScheduleFromEvent(id: number, data: any): Observable<any> {\r\n    return this.httpClient.post<{ data: EventItem }>(this.API_URL + 'schedule_from_event/' + id + '/', data).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  openAddCompanyToEventModal(eventId: number): Observable<EventItem> {\r\n    return this.dialog\r\n      .open<AddCompanyToEventComponent>(AddCompanyToEventComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: eventId,\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openAddContactPersonToEventModal(eventId: number): Observable<EventItem> {\r\n    return this.dialog\r\n      .open<AddContactPersonToEventComponent>(AddContactPersonToEventComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: eventId,\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openEditEmployeeEventDatesModal(employeeIds: number[], event: EventItem): Observable<{ start: Date, end: Date, canOverlap: boolean }> {\r\n    return this.dialog\r\n      .open<EditEmployeeEventDateComponent>(EditEmployeeEventDateComponent, {\r\n        width: '64rem',\r\n        height: 'auto',\r\n        data: {employeeIds, event},\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openEventCompanySetStateModal(eventCompany: EventCompany): Observable<{ eventCompany: EventCompany }> {\r\n    return this.dialog\r\n      .open<EventCompanySetStateComponent>(EventCompanySetStateComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {eventCompany},\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openCreateEventEventModal(modalType: ModalActionType,\r\n                            type: AddEventModalType,\r\n                            event?: EventItem,\r\n                            companyId?: number,\r\n                            isLinkedEvent?: boolean): Observable<EventItem> {\r\n    return this.dialog\r\n      .open<CreateEditEventComponent>(CreateEditEventComponent, {\r\n        width: '60rem',\r\n        height: 'auto',\r\n        data: {modalType, type, event, companyId, isLinkedEvent},\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable, of} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {UserProfile} from '../models/user-profile';\r\nimport {map} from 'rxjs/operators';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EventType} from '../models/event-type';\r\nimport {CreateEditEventTypeComponent} from '../modals/create-edit-event-type/create-edit-event-type.component';\r\nimport {User} from '@shared/models/user';\r\nimport {CreateEditUserProfileComponent} from '../modals/create-edit-user-profile/create-edit-user-profile.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserProfileService {\r\n\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'user_profile/';\r\n\r\n  userProfiles: UserProfile[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private dialog: MatDialog\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<UserProfile[]> {\r\n    if (this.userProfiles) {\r\n      return of(this.userProfiles);\r\n    }\r\n\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: UserProfile[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\r\n      map(response => {\r\n        const userProfile = response.data.map(p => {\r\n          return {\r\n            ...p,\r\n            fullName: `${p.first_name} ${p.last_name}`\r\n          }\r\n        });\r\n        this.userProfiles = userProfile;\r\n        return userProfile;\r\n      }));\r\n  }\r\n\r\n  create(userProfile): Observable<UserProfile> {\r\n    return this.httpClient.post<{ data: UserProfile }>(this.API_URL + this.url, userProfile).pipe(\r\n        map(response => response.data)\r\n      );\r\n  }\r\n\r\n  update(entity: UserProfile): Observable<UserProfile> {\r\n    return this.httpClient.put<{ data: UserProfile }>(this.API_URL + this.url + entity.id + '/', entity).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(entity: UserProfile): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n\r\n  createEditUserProfileModel(type: ModalActionType, userProfile?: UserProfile): Observable<UserProfile> {\r\n    return this.dialog\r\n      .open<CreateEditUserProfileComponent>(CreateEditUserProfileComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, userProfile},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-not-found',\r\n  templateUrl: './not-found.component.html',\r\n  styleUrls: ['./not-found.component.scss']\r\n})\r\nexport class NotFoundComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"not-found\">\r\n  <h1>Under Construction</h1>\r\n\r\n  <a\r\n    class=\"dashboard__button p-button-secondary\"\r\n    pButton\r\n    type=\"button\"\r\n    [label]=\"'Go Back'\"\r\n    routerLink=\"/\"\r\n  ></a>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { DeliveryChainsRouting } from './delivery-chains.routing';\r\nimport { NotFoundComponent } from './components/not-found/not-found.component';\r\nimport {SharedModule} from '@shared/shared.module';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    NotFoundComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    DeliveryChainsRouting,\r\n    SharedModule\r\n  ]\r\n})\r\nexport class DeliveryChainsModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {NotFoundComponent} from './components/not-found/not-found.component';\r\n\r\nconst routes: Routes = [\r\n  {path: '', component: NotFoundComponent}\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class DeliveryChainsRouting { }\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\n\r\n@Component({\r\n  selector: 'pek-guide-button',\r\n  templateUrl: './guide-button.component.html',\r\n  styleUrls: ['./guide-button.component.scss']\r\n})\r\nexport class GuideButtonComponent implements OnInit {\r\n  @Input() btnStyle: 'primary' | 'secondary' | 'outline' = 'primary';\r\n  @Input() title: string;\r\n  @Input() routeUrl: string;\r\n  @Input() buttonsPosition: 'left' | 'right' | 'top' | 'bottom';\r\n  @Input() info: boolean;\r\n  @Input() disabled = false;\r\n  @Input() hideButtons = false;\r\n  @Output() navigate: EventEmitter<string> = new EventEmitter<string>();\r\n  @Output() getInfo: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  env = environment\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onNavigate() {\r\n    if (this.routeUrl) {\r\n      this.navigate.emit(this.routeUrl);\r\n    }\r\n  }\r\n\r\n  onGetInfo() {\r\n    if (this.info) {\r\n      this.getInfo.emit();\r\n    }\r\n  }\r\n\r\n}\r\n","<button\r\n  class=\"guide-button\"\r\n  [class.guide-button_secondary]=\"btnStyle === 'secondary'\"\r\n  [class.guide-button_outline]=\"btnStyle === 'outline'\"\r\n  [class.guide-button_disabled]=\"disabled\"\r\n  [routerLinkActive]=\"routeUrl ? 'guide-button_active' : ''\"\r\n>\r\n  <span\r\n    [routerLink]=\"routeUrl\"\r\n    class=\"guide-button__inner\"\r\n  >\r\n    {{title}}\r\n  </span>\r\n  <div\r\n    *ngIf=\"!disabled && !hideButtons && btnStyle === 'primary'\"\r\n    class=\"guide-button__buttons\"\r\n    [class.guide-button__buttons_right]=\"buttonsPosition === 'right'\"\r\n    [class.guide-button__buttons_left]=\"buttonsPosition === 'left'\"\r\n    [class.guide-button__buttons_top]=\"buttonsPosition === 'top'\"\r\n    [class.guide-button__buttons_bottom]=\"buttonsPosition === 'bottom'\"\r\n  >\r\n    <button (click)=\"onGetInfo()\">?</button>\r\n    <button (click)=\"onNavigate()\">\r\n      <pek-in-icon></pek-in-icon>\r\n    </button>\r\n    <button>R</button>\r\n  </div>\r\n</button>\r\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\r\n\r\nexport class GlossaryItem {\r\n  title: string;\r\n  description: string;\r\n  images?: string[];\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-guide-glossary',\r\n  templateUrl: './guide-glossary.component.html',\r\n  styleUrls: ['./guide-glossary.component.scss']\r\n})\r\nexport class GuideGlossaryComponent implements OnInit {\r\n\r\n  searchTitle = '';\r\n\r\n  selectedItem: GlossaryItem = null;\r\n\r\n  glossary: GlossaryItem[] = [\r\n    {\r\n      title: 'Product structure',\r\n      images: ['1.png'],\r\n      description: 'Product structure represents a hierarchical structure of the product indicating the technological operations required for the production of the selected item. The hierarchy makes it possible to specify the sequence of production of a product - according to the hierarchy, it is impossible to get a parent element without having or producing a child.'\r\n    },\r\n    {\r\n      title: 'Production list',\r\n      images: ['2.png'],\r\n      description: 'A production list is an assembly sent to production, for which it is necessary to check the availability of the necessary items in the warehouse, send a request for the purchase of purchased items and prepare all available items on one locator, so that later, when production requests the necessary items for sub assemblies, quickly prepare them and put into production.'\r\n    },\r\n    {\r\n      title: 'Production list deficit',\r\n      images: ['3.png'],\r\n      description: 'If we have no required quantity of items on stock or the items is reserved for other production list that we have a production list deficit. This item will have status deficit in production plan till we get it on stock and reserve it for this production list.'\r\n    },\r\n    {\r\n      title: 'Actual quantity for production list',\r\n      images: ['4.png', '5.png'],\r\n      description: 'The quantity, available for this production list item in stock. It is necessary to put down the actual quantity when creating a new production list. Depend of availability we will see the status of items in production list and production plan.',\r\n    },\r\n    {\r\n      title: 'Free warehouse quantity',\r\n      images: ['6.png'],\r\n      description: 'Available warehouse quantity. After we set actual quantity for production list item this quantity is reserved for this production list and not available for reservation for another. Free warehouse quantity  stock quantity, that we can use for production list items.'\r\n    },\r\n    {\r\n      title: 'Warehouse reservation/reserved quantity',\r\n      description: 'After we set actual quantity, we reserve required quantity for production list from available warehouse quantity and can use this quantity only for manufacture of product, for which this quantity is reserved.'\r\n    },\r\n    {\r\n      title: 'Cancel actual quantity',\r\n      images: ['7.png'],\r\n      description: 'Cancellation of reservation of reserved for production list items and make them free, to use for other production list.'\r\n    },\r\n    {\r\n      title: 'Procurement auto request',\r\n      images: ['8.png'],\r\n      description: 'Request for procurement items, created automatically after setting of actual quantity for production list. Procurement manager will see a name of production list, formed this request. This request connected to this production list an production plan for this production list. In production plan for this item will be shown a status of procurement.'\r\n    },\r\n    {\r\n      title: 'Production requests',\r\n      images: ['9.png'],\r\n      description: 'Request to warehouse for parts, required to manufacture ordered to own production or outsourcing chain.'\r\n    },\r\n    {\r\n      title: 'Production plan',\r\n      images: ['10.png'],\r\n      description: 'Gantt style schedule for manufacturing. Include Structure of product with stock statuses, calendar, resource planing option, order creation option.'\r\n    },\r\n    {\r\n      title: 'General procurement',\r\n      images: ['11.png', '12.png'],\r\n      description: 'A procurement module, includes an option for all company expenses and procurement by any categories, that can be configured.'\r\n    },\r\n    {\r\n      title: 'Outsourcing procurement',\r\n      description: 'The procurement module, supports outsourcing chain procurement. Include all options, required for outsourcing supply chain.'\r\n    },\r\n    {\r\n      title: 'Production list procurement',\r\n      description: 'The procurement module, supports procurement chain for production list auto requests.'\r\n    },\r\n    {\r\n      title: 'Auxiliary invoice',\r\n      description: 'Service invoices, connected to material procurement invoices  delivery, custom e.t.c. and influencing to end cost of materials. Should be created inside of procurement chain for this procured materials.'\r\n    },\r\n    {\r\n      title: 'Procurement request',\r\n      images: ['13.png'],\r\n      description: 'Request to procurement items and materials. Can be auto for production list or manual for all other purposes  manufacture, tools, office e.t.c. List of procurement request will form procurement'\r\n    },\r\n    {\r\n      title: 'Purchased items/parts',\r\n      description: 'Type warehouse parts, that can be procured in market and dont require additional manufacturing process. Like example bolts, nuts, steel pipes, motors, laptops.'\r\n    },\r\n    {\r\n      title: 'Manufactured parts/items',\r\n      description: 'Type of warehouse items, that required any manufacturing process or services  laser cutting, welding, painting.'\r\n    },\r\n    {\r\n      title: 'Assemblies',\r\n      description: 'Type of warehouse items, that include other items after manufacturing process  welding frames, screwed together parts.'\r\n    },\r\n    {\r\n      title: 'Procurement chain',\r\n      images: ['14.png'],\r\n      description: 'All required information and all procurement processes, required for procure purchased items, from request till payment, presented in one window.'\r\n    },\r\n    {\r\n      title: 'Outsourcing chain',\r\n      images: ['15.png'],\r\n      description: 'All required information and all procurement processes, required for procure outsourcing items, from request till payment, presented in one window.'\r\n    },\r\n    {\r\n      title: 'Sales chain',\r\n      description: 'All required information and all processes, required for sales, presented in one window.'\r\n    },\r\n    {\r\n      title: 'Delivery chain',\r\n      description: 'All required information and all processes, required for delivery products to customers, presented in one window.'\r\n    },\r\n    {\r\n      title: 'Shipment request',\r\n      description: 'List of products, required for preparationin warehouse for sending to customer, formed throw delivery chain.'\r\n    },\r\n    {\r\n      title: 'Tools/equipment requests',\r\n      images: ['16.png'],\r\n      description: 'Request to warehouse with required to prepare and bring to current user items from stock.'\r\n    },\r\n    {\r\n      title: 'Physical inventory',\r\n      description: 'The process of bringing the number of warehouse items up to date.'\r\n    },\r\n    {\r\n      title: 'Warehouse locator',\r\n      images: ['17.png'],\r\n      description: 'Storage place with specific coordinates.'\r\n    },\r\n    {\r\n      title: 'Isolator',\r\n      images: ['18.png'],\r\n      description: 'Specific place in warehouse with items, canceled by QC process and require special decision about next processing.'\r\n    },\r\n    {\r\n      title: 'Root assembly',\r\n      images: ['19.png'],\r\n      description: 'Finish assembly for current production plan.'\r\n    },\r\n    {\r\n      title: 'Subassembly',\r\n      images: ['20.png'],\r\n      description: 'Assembly, placed inside of other assembly.'\r\n    },\r\n    {\r\n      title: 'Parent assembly',\r\n      images: ['21.png'],\r\n      description: 'Assembly, consist other assembly inside themselves.'\r\n    },\r\n    {\r\n      title: 'Rework',\r\n      images: ['22.png'],\r\n      description: 'The process of repairing or additional manufacturing with order, that was sended back from QC process or from isolator.'\r\n    },\r\n  ];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.glossary.sort((a, b) => a.title.localeCompare(b.title));\r\n  }\r\n\r\n  openingImage() {\r\n    const guide = document.querySelector('.guide');\r\n    const images = guide.querySelectorAll('img');\r\n\r\n    const imageBlock = guide.querySelector('.guide__image-box');\r\n\r\n    images.forEach(image => {\r\n      const idx = image.src.indexOf('/assets/');\r\n\r\n      image.addEventListener('click', () => {\r\n        imageBlock.innerHTML = '';\r\n        imageBlock.classList.add('guide__image-box_open');\r\n\r\n        const newImage = document.createElement('img');\r\n        newImage.src = image.src.slice(idx + 1);\r\n        imageBlock.appendChild(newImage);\r\n\r\n        imageBlock.querySelector('img').addEventListener('click', evt => {\r\n          evt.stopPropagation();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  onSelectItem(item: GlossaryItem) {\r\n    if (this.selectedItem && this.selectedItem.title === item.title) {\r\n      this.selectedItem = null;\r\n      return;\r\n    }\r\n\r\n    this.selectedItem = item;\r\n    setTimeout(() => this.openingImage());\r\n  }\r\n}\r\n","<div class=\"guide-glossary\">\r\n  <div class=\"guide-glossary__row\">\r\n    <div class=\"guide-glossary__column-left\">\r\n      <input\r\n        [(ngModel)]=\"searchTitle\"\r\n        pInputText\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        placeholder=\"Search...\"\r\n      />\r\n      <ul class=\"guide-glossary__list\">\r\n        <li\r\n          class=\"guide-glossary__item\"\r\n          [class.active]=\"selectedItem?.title === item.title\"\r\n          *ngFor=\"let item of glossary | glossarySearch: searchTitle\"\r\n          (click)=\"onSelectItem(item)\"\r\n        >\r\n          {{item.title}}\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div class=\"guide-glossary__column-right\">\r\n      <div class=\"guide-glossary__box\">\r\n        <h2>{{selectedItem?.title || 'Choice Item'}}</h2>\r\n        <div class=\"guide-glossary__description\">\r\n          <ng-container *ngIf=\"selectedItem\">\r\n            <p>\r\n              {{selectedItem.description}}\r\n            </p>\r\n\r\n            <img *ngFor=\"let img of selectedItem.images\" [src]=\"'assets/images/glossary/' + img\">\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-confirmation-instruction',\r\n  templateUrl: './confirmation-instruction.component.html',\r\n  styleUrls: ['./confirmation-instruction.component.scss']\r\n})\r\nexport class ConfirmationInstructionComponent implements OnInit, AfterViewInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const guide = document.querySelector('.guide');\r\n    const images = guide.querySelectorAll('img');\r\n\r\n    const imageBlock = guide.querySelector('.guide__image-box');\r\n\r\n    images.forEach(image => {\r\n      const idx = image.src.indexOf('/assets/');\r\n\r\n      image.addEventListener('click', () => {\r\n        imageBlock.innerHTML = '';\r\n        imageBlock.classList.add('guide__image-box_open')\r\n\r\n        const newImage = document.createElement('img');\r\n        newImage.src = image.src.slice(idx + 1);\r\n        imageBlock.appendChild(newImage);\r\n\r\n        imageBlock.querySelector('img').addEventListener('click', evt => {\r\n          evt.stopPropagation();\r\n        })\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"confirmation-instruction\">\r\n  <h2>Confirmation Module Instruction</h2>\r\n  <p>This is where the <span>Confirmation Module Instruction</span> will be located. It is currently missing.</p>\r\n</div>\r\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-main-instruction',\r\n  templateUrl: './main-instruction.component.html',\r\n  styleUrls: ['./main-instruction.component.scss']\r\n})\r\nexport class MainInstructionComponent implements OnInit, AfterViewInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const guide = document.querySelector('.guide');\r\n    const images = guide.querySelectorAll('img');\r\n\r\n    const imageBlock = guide.querySelector('.guide__image-box');\r\n\r\n    images.forEach(image => {\r\n      const idx = image.src.indexOf('/assets/');\r\n\r\n      image.addEventListener('click', () => {\r\n        imageBlock.innerHTML = '';\r\n        imageBlock.classList.add('guide__image-box_open')\r\n\r\n        const newImage = document.createElement('img');\r\n        newImage.src = image.src.slice(idx + 1);\r\n        imageBlock.appendChild(newImage);\r\n\r\n        imageBlock.querySelector('img').addEventListener('click', evt => {\r\n          evt.stopPropagation();\r\n        })\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"main-instruction\">\r\n  <h2>MODULES AND CONNECTIONS</h2>\r\n\r\n  <p>\r\n    R-WAVE erp supports all business processes required for the operation of manufacturing and development companies.\r\n    All departments of the company are presented in the form of modules:\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/main/1.jpg\">\r\n  </p>\r\n\r\n  <h2>ADVANTAGES</h2>\r\n\r\n  <p>\r\n    The advantage of R-WAVE ERP is full cycle of manufacturing process. R-WAVE ERP contains and supports all the processes necessary for the production of the final product, from\r\n    the structure of the product, purchase, storage in a warehouse, and ending directly with production and subsequent sale\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/main/2.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    In R-WAVE ERP we use special concepts:<br>\r\n    -\tproduct structure<br>\r\n    -\tproduction list<br>\r\n    -\tproduction plan<br>\r\n    -\tprocurement chain\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/main/3.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    These special concepts allow you to organize an end-to-end production process for the final product.\r\n    The product structure defines the composition of the product, the sequence of assembly and required technologies.\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/main/4.jpg\">\r\n    <img src=\"assets/images/instructions/main/3.jpg\">\r\n  </p>\r\n</div>\r\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-product-structure-instruction',\r\n  templateUrl: './product-structure-instruction.component.html',\r\n  styleUrls: ['./product-structure-instruction.component.scss']\r\n})\r\nexport class ProductStructureInstructionComponent implements OnInit, AfterViewInit {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const guide = document.querySelector('.guide');\r\n    const images = guide.querySelectorAll('img');\r\n\r\n    const imageBlock = guide.querySelector('.guide__image-box');\r\n\r\n    images.forEach(image => {\r\n      const idx = image.src.indexOf('/assets/');\r\n\r\n      image.addEventListener('click', () => {\r\n        imageBlock.innerHTML = '';\r\n        imageBlock.classList.add('guide__image-box_open')\r\n\r\n        const newImage = document.createElement('img');\r\n        newImage.src = image.src.slice(idx + 1);\r\n        imageBlock.appendChild(newImage);\r\n\r\n        imageBlock.querySelector('img').addEventListener('click', evt => {\r\n          evt.stopPropagation();\r\n        })\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"product-structure-instruction\">\r\n  <h2>Product Structure Module Instruction</h2>\r\n\r\n  <p>\r\n    Product structure represents a hierarchical structure of the product indicating the technological operations\r\n    required for the production of the selected item.\r\n    The hierarchy makes it possible to specify the sequence of production of a product - according to the hierarchy, it\r\n    is impossible to get a parent element without having or producing a child.\r\n  </p>\r\n\r\n  <p>\r\n    In the products menu, all products are divided into categories.\r\n    To create a new structure, you must click the new product button, fill in the code, name and select a category\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/1.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/2.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    There are three types of positions in the structure<br>\r\n    - assemblies - positions of the structure, inside which other positions can be located<br>\r\n    - manufactured parts - items that need to be produced or ordered in outsourcing<br>\r\n    - purchased - purchased items\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/3.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    Options for the structure are presented in the menu\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/4.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    After creating a new product, you need to fill in the structure - create assemblies, fill them with subassemblies,\r\n    manufactured parts or purchased. To do this, select the level to which we want to add the position, select add item\r\n    from the menu, then select the position type.\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/5.jpg\">\r\n  </p>\r\n\r\n  <p>Then we look for the necessary position according to the nomenclature or create a new one.</p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/6.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/7.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    If you need to change the parent of a position, you can use drag-n-drop\r\n  </p>\r\n\r\n  <p>\r\n    After creating a new assembly or manufactured part, you must specify the technologies required for the production of\r\n    this position, in the order in which it is necessary for production.\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/8.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    If an existing position was selected, and not a new one was created, the technologies will be put down automatically\r\n    from the structure where this position was originally created. If an assembly has been selected, the structure of\r\n    this assembly will also be automatically pulled up.\r\n  </p>\r\n\r\n  <p>\r\n    It is also possible to import the product structure from SolidWorks. To do this, select the structure level from\r\n    which you want to import and follow the instructions ...\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/9.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    In order to send the selected structure to production, you need to select the assembly you want to produce, select\r\n    the make production list item in the menu, select the required quantity, and also select group production plan if\r\n    we want to produce the selected quantity in one production list\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/10.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    The list of technologies is formed in the technology menu. To create a new technology, you must click the new\r\n    technology button and fill in the required fields\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/11.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    The prefixes menu is intended for creating prefixes for the structure importer configuration. The prefix is an\r\n    indication that the position in the import file, the code of which begins with this prefix, is a manufactured part\r\n    or assembly\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/12.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    In the category menu, we create a list of categories for the stretch product\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/product-structure/13.jpg\">\r\n  </p>\r\n</div>\r\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-sales-instruction',\r\n  templateUrl: './sales-instruction.component.html',\r\n  styleUrls: ['./sales-instruction.component.scss']\r\n})\r\nexport class SalesInstructionComponent implements OnInit, AfterViewInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const guide = document.querySelector('.guide');\r\n    const images = guide.querySelectorAll('img');\r\n\r\n    const imageBlock = guide.querySelector('.guide__image-box');\r\n\r\n    images.forEach(image => {\r\n      const idx = image.src.indexOf('/assets/');\r\n\r\n      image.addEventListener('click', () => {\r\n        imageBlock.innerHTML = '';\r\n        imageBlock.classList.add('guide__image-box_open')\r\n\r\n        const newImage = document.createElement('img');\r\n        newImage.src = image.src.slice(idx + 1);\r\n        imageBlock.appendChild(newImage);\r\n\r\n        imageBlock.querySelector('img').addEventListener('click', evt => {\r\n          evt.stopPropagation();\r\n        })\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"sales-instruction\">\r\n  <h2>Sales Module Instruction</h2>\r\n  <p>This is where the <span>Sales Module Instruction</span> will be located. It is currently missing.</p>\r\n</div>\r\n","import {AfterViewInit, Component, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-instruction',\r\n  templateUrl: './warehouse-instruction.component.html',\r\n  styleUrls: ['./warehouse-instruction.component.scss']\r\n})\r\nexport class WarehouseInstructionComponent implements OnInit, AfterViewInit {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    const guide = document.querySelector('.guide');\r\n    const images = guide.querySelectorAll('img');\r\n\r\n    const imageBlock = guide.querySelector('.guide__image-box');\r\n\r\n    images.forEach(image => {\r\n      const idx = image.src.indexOf('/assets/');\r\n\r\n      image.addEventListener('click', () => {\r\n        imageBlock.innerHTML = '';\r\n        imageBlock.classList.add('guide__image-box_open');\r\n\r\n        const newImage = document.createElement('img');\r\n        newImage.src = image.src.slice(idx + 1);\r\n        imageBlock.appendChild(newImage);\r\n\r\n        imageBlock.querySelector('img').addEventListener('click', evt => {\r\n          evt.stopPropagation();\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"warehouse-instruction\">\r\n  <h2>Warehouse Module Instruction</h2>\r\n\r\n  <h3>MENU ITEMS</h3>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/1.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    In this section, you can view the current state of the warehouse, and filter the available items by filters:<br>\r\n     warehouse category<br>\r\n     location<br>\r\n     type of<br>\r\n     product structure category (for the root nomenclature<br>\r\n     search by name<br>\r\n     search by code<br>\r\n     search by description\r\n  </p>\r\n\r\n  <p>\r\n    You can also create a new nomenclature, where you first need to select the type of item to be created and then fill\r\n    in the required fields\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/2.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/3.jpg\">\r\n  </p>\r\n\r\n  <h3>QC-WAREHOUSE</h3>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/4.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    This section includes invoices and orders from own production that have passed QC. <br>\r\n    They are categorized\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/5.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    Open the necessary invoice or order for your production, select items, select the locator where you want to place\r\n    the selected item.\r\n    Locators that already have positions of this item are marked in blue. Within the same warehouse, we can only select\r\n    a locator, where position data is already located.\r\n  </p>\r\n\r\n  <h3>PRODUCTION LIST</h3>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/6.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    A production list is an assembly sent to production, for which it is necessary to check the availability of the\r\n    necessary items in the warehouse, send a request for the purchase of purchased items and prepare all available items\r\n    on one locator, so that later, when production requests the necessary items for sub assemblies, quickly prepare them\r\n    and put into production\r\n  </p>\r\n\r\n  <p>\r\n    It is necessary to put down the actual quantity when creating a new production list, as well as track the receipt of\r\n    items that were previously in deficit, and their transfer to the production list locator. Items that were previously\r\n    in deficit, but then received at the warehouse and became available, are marked in color<br>\r\n    red - available items that are not related to this production list (manually ordered to the warehouse) green - items\r\n    received at the warehouse, ordered directly through this production list or through the plan (auto request)<br>\r\n    If, when preparing a production list, we decide to use a ready-made assembly included in this production list, there\r\n    is no need to prepare the items included in this assembly.\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/7.jpg\">\r\n  </p>\r\n\r\n  <h3>PRODUCTION REQUEST</h3>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/8.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    Production requests - requests from production for certain items needed to produce specific sub- assemblies of the\r\n    production list or to produce specific manufactured items at the moment\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/9.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    It is a list of required items, subassemblies or material, indicating the required quantity and location in the\r\n    warehouse\r\n  </p>\r\n\r\n  <p>\r\n    It is necessary to prepare, print out the form, sign the form yourself and at the production site, keep a copy for\r\n    yourself, complete the request, transfer the positions according to the list to production. It is possible to cancel\r\n    a production request if it was created by mistake.\r\n    it is possible to use scanning when searching for items in the warehouse\r\n  </p>\r\n\r\n  <h3>TOOL REQUEST</h3>\r\n\r\n  <p>\r\n    A list of tools or supplies requested by the employee for use or requested for the department. During processing,\r\n    they are moved to the employee's (department's) locator\r\n  </p>\r\n\r\n  <h3>WHERE USED</h3>\r\n\r\n  <p>\r\n    Filter to find which builds use the selected stock item\r\n  </p>\r\n\r\n  <h3>PHYSICAL INVENTORY</h3>\r\n\r\n  <p>\r\n    Allows you to make an inventory of the selected locators in order to bring the number in the erp system in line with\r\n    the real number\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/10.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    To create a new physical inventory, select the warehouses and shelves for which you need an inventory\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/11.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    After creation, a list of all positions recorded on the selected locators will be displayed.\r\n    It is necessary to bring the recorded quantity into conformity with the real one. To do this, you need to edit the\r\n    entered quantity field.\r\n    If during the inventory process it is necessary to inventory an item that is not in the list, you need to click the\r\n    add product button, find the required item, enter the quantity, select the locator to which we want to record it,\r\n    and enter the technology if it is a manufactured item or assembly.\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/12.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    Also, if you need to change the position locator in the inventory list, you can do this by clicking the move product\r\n    button.\r\n    After the completion of the inventory, you must click the Complite button, after which all changes will be written\r\n    to the system\r\n  </p>\r\n\r\n  <h3>ISOLATOR</h3>\r\n\r\n  <h3>CONFIG MENU</h3>\r\n\r\n  <h3>Warehouses</h3>\r\n\r\n  <p>\r\n    It is possible to create the required number of warehouses - storage areas with their own structure locators.\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/13.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    Each warehouse has locators  specific storage locations within the warehouse.\r\n    Each locator, in addition to the name and description, can have coordinates - a row, a column, a shelf, a place.\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/14.jpg\">\r\n  </p>\r\n\r\n  <h3>Unit of measure</h3>\r\n\r\n  <p>\r\n    Units of measure to be used for warehouse categories\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/15.jpg\">\r\n  </p>\r\n\r\n  <h3>\r\n    Serial numbers type\r\n  </h3>\r\n\r\n  <p>\r\n    You can assign a serial number to a warehouse item. The assignment of a serial number occurs when completing an\r\n    invoice (purchase chains and chain outsourcing), ordering to your own production or when confirming production (a\r\n    serial number is assigned only to the root assembly)\r\n  </p>\r\n\r\n  <p>\r\n    In order for the item to have a serial number, you need to create a new type of serial number, in which you need to\r\n    fill in the prefix - the invariable part of the serial number, code - the part of the number that will increase by\r\n    one when creating a new one, and the suffix - the invariable part of the serial number.\r\n  </p>\r\n\r\n  <p>\r\n    <img src=\"assets/images/instructions/warehouse/16.jpg\">\r\n  </p>\r\n\r\n  <p>\r\n    And then select an item that will obey the created serial number assignment rule.\r\n  </p>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-guide-outsourcing',\r\n  templateUrl: './guide-outsourcing.component.html',\r\n  styleUrls: ['./guide-outsourcing.component.scss']\r\n})\r\nexport class GuideOutsourcingComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"guide-outsourcing\">\r\n  <div class=\"guide-outsourcing__col guide-outsourcing__col_1\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Supplier\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-outsourcing__col guide-ouFtsourcing__col_2\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Creating of outsourcing order\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Work with Outsourcer\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmed payment\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmed Supplier after lender confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-outsourcing__col guide-outsourcing__col_3\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Outsourcing\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-outsourcing__col guide-outsourcing__col_4\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Work with Outsourcer request\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Delivered Items\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Request for confirmation of payment\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Request for confirmation of Outsourcer by tender\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-outsourcing__col guide-outsourcing__col_5\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Outsourser\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"QC\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-guide-procurement',\r\n  templateUrl: './guide-procurement.component.html',\r\n  styleUrls: ['./guide-procurement.component.scss']\r\n})\r\nexport class GuideProcurementComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"guide-procurement\">\r\n  <div class=\"guide-procurement__col guide-procurement__col_1\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Supplier\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-procurement__col guide-procurement__col_2\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Procurement request for production list\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Work with Supplier\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmed payment\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmed Supplier after lender confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-procurement__col guide-procurement__col_3\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Manufacturing procurement\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-procurement__col guide-procurement__col_4\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Work with Supplier request\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Delivered Items\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Request for confirmation of payment\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Request for confirmation of Supplier by tender\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-procurement__col guide-procurement__col_5\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Supplier\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"QC\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmation\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-guide-production',\r\n  templateUrl: './guide-production.component.html',\r\n  styleUrls: ['./guide-production.component.scss']\r\n})\r\nexport class GuideProductionComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"guide-production\">\r\n  <div class=\"guide-production__col guide-production__col_1\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"QC\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-production__col guide-production__col_2\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Production list deficit\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Production request\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Tool request\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Rework all and rework item process\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-production__col guide-production__col_3\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-production__col guide-production__col_4\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Completed production order\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Creating order to Outsourcer\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Production request\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Tool request\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-production__col guide-production__col_5\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"QC\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Outsourcing\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-guide-sales',\r\n  templateUrl: './guide-sales.component.html',\r\n  styleUrls: ['./guide-sales.component.scss']\r\n})\r\nexport class GuideSalesComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"guide-sales\">\r\n  <div class=\"guide-sales__col guide-sales__col_1\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Contact and events\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-sales__col guide-sales__col_2\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Marketing events\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span class=\"arrow\"></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-sales__col guide-sales__col_3\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Sales\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-sales__col guide-sales__col_4\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Sales events\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Request for creating a new production\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Creating a new delivery chain\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-sales__col guide-sales__col_5\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Contacts and events\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmations\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Delivery chain\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-guide-confirmation',\r\n  templateUrl: './guide-confirmation.component.html',\r\n  styleUrls: ['./guide-confirmation.component.scss']\r\n})\r\nexport class GuideConfirmationComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"guide-confirmation\">\r\n  <div class=\"guide-confirmation__col guide-confirmation__col_1\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Product Structure\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Sales\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Manufacturing procurement\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Outsoursing\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Purchasing\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Outsourcing\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-confirmation__col guide-confirmation__col_2\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"New nomenclature confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Production request\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Payment confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Payment confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Payment confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Write off by physical inventory confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Reservation of assemblies with serial numbers confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Supplier tender confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-confirmation__col guide-confirmation__col_3\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmations\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-confirmation__col guide-confirmation__col_4\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Creation of production list\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Payment process\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Work with production plan regarding reserved serial numbers\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmed payment\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmed Supplier after tender confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-confirmation__col guide-confirmation__col_5\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Payments\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Procurement\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Outsourcing\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-guide-warehouse',\r\n  templateUrl: './guide-warehouse.component.html',\r\n  styleUrls: ['./guide-warehouse.component.scss']\r\n})\r\nexport class GuideWarehouseComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"guide-warehouse\">\r\n  <div class=\"guide-warehouse__col guide-warehouse__col_1\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Confirmations\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"QC\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Delivery chain\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-warehouse__col guide-warehouse__col_2\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Creating production list\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Production request\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"QC passed invoices and orders from own manufacture\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Sipment request\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Tools request\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-warehouse__col guide-warehouse__col_3\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-warehouse__col guide-warehouse__col_4\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Production list deficit\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Production request\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Delivery process\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"QC passed item\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Physical inventory\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Tool request\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Procurement request for production list\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide-warehouse__col guide-warehouse__col_5\">\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        [hideButtons]=\"true\"\r\n        title=\"Customer\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Warehouse\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Production\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide-button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        title=\"Manufacturing procurement\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport {GuideComponent} from './guide/guide.component';\r\nimport {GuideButtonComponent} from './guide-button/guide-button.component';\r\nimport {GuideRouting} from './guide.routing';\r\nimport {GuideSalesComponent} from './guide-sales/guide-sales.component';\r\nimport {GuideOutsourcingComponent} from './guide-outsourcing/guide-outsourcing.component';\r\nimport {GuideProcurementComponent} from './guide-procurement/guide-procurement.component';\r\nimport {GuideProductionComponent} from './guide-production/guide-production.component';\r\nimport { SalesInstructionComponent } from './guide-instructions/sales-instruction/sales-instruction.component';\r\nimport { MainInstructionComponent } from './guide-instructions/main-instruction/main-instruction.component';\r\nimport { GuideWarehouseComponent } from './guide-schemes/guide-warehouse/guide-warehouse.component';\r\nimport { WarehouseInstructionComponent } from './guide-instructions/warehouse-instruction/warehouse-instruction.component';\r\nimport { GuideConfirmationComponent } from './guide-schemes/guide-confirmation/guide-confirmation.component';\r\nimport { ConfirmationInstructionComponent } from './guide-instructions/confirmation-instruction/confirmation-instruction.component';\r\nimport { ProductStructureInstructionComponent } from './guide-instructions/product-structure-instruction/product-structure-instruction.component';\r\nimport { GuideGlossaryComponent } from './guide-glossary/guide-glossary.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [GuideComponent, GuideButtonComponent, GuideSalesComponent, GuideOutsourcingComponent, GuideProcurementComponent, GuideProductionComponent, SalesInstructionComponent, MainInstructionComponent, GuideWarehouseComponent, WarehouseInstructionComponent, GuideConfirmationComponent, ConfirmationInstructionComponent, ProductStructureInstructionComponent, GuideGlossaryComponent],\r\n  exports: [\r\n    GuideComponent\r\n  ],\r\n    imports: [\r\n        CommonModule,\r\n        GuideRouting,\r\n        SharedModule\r\n    ]\r\n})\r\nexport class GuideModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nconst routes: Routes = [];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class GuideRouting { }\r\n","import {AfterViewInit, Component, ElementRef, HostListener, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {Subscription} from 'rxjs';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {MatDialogRef} from '@angular/material/dialog';\r\nimport {environment} from '@env/environment';\r\n\r\nexport type GuideFlowType =\r\n  'all'\r\n  | 'qc'\r\n  | 'sales'\r\n  | 'outsource'\r\n  | 'procurement'\r\n  | 'production'\r\n  | 'warehouse'\r\n  | 'confirmation'\r\n  | 'product-structure';\r\n\r\nexport type GuideType = 'flow' | 'map' | 'glossary'\r\n\r\n@Component({\r\n  selector: 'app-guide',\r\n  templateUrl: './guide.component.html',\r\n  styleUrls: ['./guide.component.scss']\r\n})\r\nexport class GuideComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  guideType: GuideType = 'flow';\r\n\r\n  routerSub: Subscription;\r\n  @ViewChild('guidePanel') guidePanel: ElementRef;\r\n\r\n  guideTitle = 'Select a module or process to get more information';\r\n\r\n  guideFlowType: GuideFlowType = 'all';\r\n\r\n  showLorem = false;\r\n\r\n  zoom = 1;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly dialogRef: MatDialogRef<GuideComponent>,\r\n  ) {\r\n    this.routerSub = this.router.events.pipe(\r\n    ).subscribe(evt => {\r\n    });\r\n  }\r\n\r\n  changeRoute(url: string) {\r\n    this.choiceType(url);\r\n  }\r\n\r\n  goToLinkWindow(link: string) {\r\n    this.hideGuide();\r\n\r\n    setTimeout(() => {\r\n      window.open(environment.link_url + link.slice(1) + '?showGuide=true', '_self');\r\n    }, 400);\r\n  }\r\n\r\n  goToLink(link: string) {\r\n    this.hideGuide();\r\n\r\n    setTimeout(() => {\r\n      this.router.navigate([link]);\r\n      this.changeRoute(link);\r\n    }, 600);\r\n\r\n    setTimeout(() => {\r\n      this.openGuide();\r\n    }, 1500);\r\n  }\r\n\r\n  hideGuide() {\r\n    document.querySelector('.guide-modalbox').classList.add('guide-modalbox_hide');\r\n  }\r\n\r\n  openGuide() {\r\n    document.querySelector('.guide-modalbox').classList.remove('guide-modalbox_hide');\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.choiceType(this.router.url);\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.drag();\r\n  }\r\n\r\n  drag() {\r\n    const panel = this.guidePanel.nativeElement;\r\n    let isDown = false;\r\n    let startX;\r\n    let startY;\r\n    let scrollLeft;\r\n    let scrollTop;\r\n\r\n    panel.addEventListener('mousedown', (e) => {\r\n      isDown = true;\r\n      panel.style.cursor = 'grabbing';\r\n\r\n      startX = e.pageX - panel.offsetLeft;\r\n      startY = e.pageY - panel.offsetTop;\r\n\r\n      scrollLeft = panel.scrollLeft;\r\n      scrollTop = panel.scrollTop;\r\n    });\r\n    panel.addEventListener('mouseleave', () => {\r\n      isDown = false;\r\n      panel.style.cursor = 'grab';\r\n    });\r\n    panel.addEventListener('mouseup', () => {\r\n      isDown = false;\r\n      panel.style.cursor = 'grab';\r\n    });\r\n    panel.addEventListener('mousemove', (e) => {\r\n      if (!isDown) return;\r\n      e.preventDefault();\r\n      const x = e.pageX - panel.offsetLeft;\r\n      const y = e.pageY - panel.offsetTop;\r\n\r\n      const walkX = (x - startX) * 0.75;\r\n      const walkY = (y - startY) * 0.75;\r\n\r\n      panel.scrollLeft = scrollLeft - walkX;\r\n      panel.scrollTop = scrollTop - walkY;\r\n    });\r\n  }\r\n\r\n  choiceType(url: string) {\r\n    if (url.includes('quality-control')) {\r\n      this.guideFlowType = 'qc';\r\n      this.showLorem = true;\r\n    } else if (url.includes('sales')) {\r\n      this.guideFlowType = 'sales';\r\n    } else if (url.includes('outsource')) {\r\n      this.guideFlowType = 'outsource';\r\n    } else if (url.includes('procurement')) {\r\n      this.guideFlowType = 'procurement';\r\n    } else if (url.includes('production')) {\r\n      this.guideFlowType = 'production';\r\n    } else if (url.includes('confirmation')) {\r\n      this.guideFlowType = 'confirmation';\r\n    } else if (url.includes('warehouse')) {\r\n      this.guideFlowType = 'warehouse';\r\n    } else if (url.includes('product-structure')) {\r\n      this.guideFlowType = 'product-structure';\r\n    } else {\r\n      this.showLorem = false;\r\n    }\r\n  }\r\n\r\n  onClose() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.routerSub.unsubscribe();\r\n  }\r\n\r\n  onBack() {\r\n    this.hideGuide();\r\n\r\n    setTimeout(() => {\r\n      this.guideFlowType = 'all';\r\n      this.router.navigate(['/dash']);\r\n    }, 600);\r\n\r\n    setTimeout(() => {\r\n      this.openGuide();\r\n    }, 1500);\r\n  }\r\n\r\n  plusScale() {\r\n    this.zoom += 0.1;\r\n  }\r\n\r\n  minusScale() {\r\n    this.zoom -= 0.1;\r\n  }\r\n\r\n  @HostListener('window:keydown.escape', ['$event'])\r\n  closeImageModalKeyDown() {\r\n    const imageBlock = document.querySelector('.guide__image-box');\r\n    if (imageBlock.classList.contains('guide__image-box_open')) {\r\n      imageBlock.classList.remove('guide__image-box_open');\r\n    }\r\n  }\r\n\r\n  closeImageModal() {\r\n    const imageBlock = document.querySelector('.guide__image-box');\r\n    imageBlock.classList.remove('guide__image-box_open');\r\n  }\r\n\r\n  onChoiceGuideType(type: GuideType) {\r\n    this.guideType = type;\r\n\r\n    if (type === 'flow') {\r\n      setTimeout(() => this.drag());\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"guide\">\r\n  <ng-container *ngIf=\"guideType === 'flow'\">\r\n    <div\r\n      #guidePanel\r\n      class=\"guide__panel\"\r\n      [style.paddingTop]=\"guideFlowType === 'all' || guideFlowType === 'product-structure' ? zoom * 24 + 'rem' : 0\"\r\n      [ngSwitch]=\"guideFlowType\"\r\n      [style.zoom]=\"zoom\"\r\n    >\r\n\r\n      <div class=\"guide__box\" *ngSwitchCase=\"'all'\">\r\n        <ng-container *ngTemplateOutlet=\"main\"></ng-container>\r\n      </div>\r\n\r\n      <div class=\"guide__box\" *ngSwitchCase=\"'product-structure'\">\r\n        <ng-container *ngTemplateOutlet=\"main\"></ng-container>\r\n      </div>\r\n\r\n      <div class=\"guide__box guide__qc\" *ngSwitchCase=\"'qc'\">\r\n        <div class=\"guide__qc-box guide__qc-box_1\">\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_1\">\r\n            <div class=\"guide__button guide__button_disabled\">\r\n              <pek-guide-button\r\n                [disabled]=\"true\"\r\n                title=\"Manufacturing Procurement\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n\r\n            <div class=\"guide__button guide__button_disabled\">\r\n              <pek-guide-button\r\n                [disabled]=\"true\"\r\n                title=\"Outsourcing\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_2\">\r\n            <div class=\"guide__button guide__button_disabled guide__button_arrow-right\">\r\n              <pek-guide-button\r\n                btnStyle=\"secondary\"\r\n                [disabled]=\"true\"\r\n                title=\"Completed Procurement Invoice\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_3\">\r\n            <div class=\"guide__button guide__button_qc-main\">\r\n              <pek-guide-button\r\n                [hideButtons]=\"true\"\r\n                title=\"QC procurement invoices\"\r\n              ></pek-guide-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_4\">\r\n            <div class=\"guide__button guide__button_1\">\r\n              <pek-guide-button\r\n                [hideButtons]=\"true\"\r\n                btnStyle=\"secondary\"\r\n                title=\"Cancellation\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n\r\n            <div class=\"guide__button guide__button_2\">\r\n              <pek-guide-button\r\n                [hideButtons]=\"true\"\r\n                btnStyle=\"secondary\"\r\n                title=\"QC passed\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n\r\n            <div class=\"guide__button guide__button_3\">\r\n              <pek-guide-button\r\n                [hideButtons]=\"true\"\r\n                btnStyle=\"secondary\"\r\n                title=\"Isolator\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_5\">\r\n            <div class=\"guide__button guide__button_disabled\">\r\n              <pek-guide-button\r\n                [disabled]=\"true\"\r\n                title=\"Outsourcing\"\r\n              ></pek-guide-button>\r\n              <div>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"guide__button guide__button_disabled\">\r\n              <pek-guide-button\r\n                [disabled]=\"true\"\r\n                title=\"Warehouse\"\r\n              ></pek-guide-button>\r\n              <div>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_6\">\r\n            <pek-guide-button\r\n              [disabled]=\"true\"\r\n              title=\"Manufacturing Procurement\"\r\n            ></pek-guide-button>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"guide__qc-box\">\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_7\">\r\n            <div class=\"guide__button guide__button_disabled\">\r\n              <pek-guide-button\r\n                [disabled]=\"true\"\r\n                title=\"Production\"\r\n              ></pek-guide-button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_8\">\r\n            <div class=\"guide__button guide__button_disabled guide__button_arrow-right\">\r\n              <pek-guide-button\r\n                btnStyle=\"secondary\"\r\n                [disabled]=\"true\"\r\n                title=\"Completed production order\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_9\">\r\n            <div class=\"guide__button guide__button_qc-main\">\r\n              <pek-guide-button\r\n                [hideButtons]=\"true\"\r\n                title=\"QC our manufacturing\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_10\">\r\n\r\n            <div class=\"guide__button guide__button_1\">\r\n              <pek-guide-button\r\n                [hideButtons]=\"true\"\r\n                btnStyle=\"secondary\"\r\n                title=\"Rework All\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n\r\n            <div class=\"guide__button guide__button_2\">\r\n              <pek-guide-button\r\n                [hideButtons]=\"true\"\r\n                btnStyle=\"secondary\"\r\n                title=\"Rework Item\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n\r\n            <div class=\"guide__button guide__button_3\">\r\n              <pek-guide-button\r\n                [hideButtons]=\"true\"\r\n                btnStyle=\"secondary\"\r\n                title=\"QC passed\"\r\n              ></pek-guide-button>\r\n              <span></span>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"guide__qc-col guide__qc-col_11\">\r\n            <div class=\"guide__button guide__button_disabled\">\r\n              <pek-guide-button\r\n                [disabled]=\"true\"\r\n                title=\"Production\"\r\n              ></pek-guide-button>\r\n              <div>\r\n                <span></span>\r\n                <span></span>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n\r\n            <div class=\"guide__button guide__button_disabled\">\r\n              <pek-guide-button\r\n                [disabled]=\"true\"\r\n                title=\"Warehouse\"\r\n              ></pek-guide-button>\r\n              <div>\r\n                <span></span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n\r\n      <div *ngSwitchCase=\"'sales'\">\r\n        <app-guide-sales></app-guide-sales>\r\n      </div>\r\n\r\n      <div *ngSwitchCase=\"'outsource'\">\r\n        <app-guide-outsourcing></app-guide-outsourcing>\r\n      </div>\r\n\r\n      <div *ngSwitchCase=\"'procurement'\">\r\n        <app-guide-procurement></app-guide-procurement>\r\n      </div>\r\n\r\n      <div *ngSwitchCase=\"'production'\">\r\n        <app-guide-production></app-guide-production>\r\n      </div>\r\n\r\n      <ng-container *ngSwitchCase=\"'warehouse'\">\r\n        <pek-guide-warehouse></pek-guide-warehouse>\r\n      </ng-container>\r\n\r\n      <ng-container *ngSwitchCase=\"'confirmation'\">\r\n        <pek-guide-confirmation></pek-guide-confirmation>\r\n      </ng-container>\r\n    </div>\r\n\r\n    <div class=\"guide__instruction\">\r\n      <ng-container [ngSwitch]=\"guideFlowType\">\r\n        <ng-container *ngSwitchCase=\"'all'\">\r\n          <pek-main-instruction></pek-main-instruction>\r\n        </ng-container>\r\n\r\n        <ng-container *ngSwitchCase=\"'sales'\">\r\n          <pek-sales-instruction></pek-sales-instruction>\r\n        </ng-container>\r\n\r\n        <ng-container *ngSwitchCase=\"'warehouse'\">\r\n          <pek-warehouse-instruction></pek-warehouse-instruction>\r\n        </ng-container>\r\n\r\n        <ng-container *ngSwitchCase=\"'confirmation'\">\r\n          <pek-confirmation-instruction></pek-confirmation-instruction>\r\n        </ng-container>\r\n\r\n        <ng-container *ngSwitchCase=\"'product-structure'\">\r\n          <pek-product-structure-instruction></pek-product-structure-instruction>\r\n        </ng-container>\r\n      </ng-container>\r\n    </div>\r\n\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"guideType === 'map'\">\r\n    <div class=\"guide__map\">\r\n      <h2>Under Construction</h2>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"guideType === 'glossary'\">\r\n    <pek-guide-glossary></pek-guide-glossary>\r\n  </ng-container>\r\n\r\n  <div class=\"guide__image-box\" (click)=\"closeImageModal()\"></div>\r\n  <!--  <button-->\r\n  <!--    pButton-->\r\n  <!--    *ngIf=\"data.type=='writeOff'\"-->\r\n  <!--    type=\"button\"-->\r\n  <!--    class=\"p-button-success\"-->\r\n  <!--    [label]=\"'Write Off'\"-->\r\n  <!--    (click)=\"writeOff()\"-->\r\n  <!--  ></button>-->\r\n\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-danger guide__close\"\r\n    label=\"Close Business guide\"\r\n    icon=\"pi pi-times\"\r\n    (click)=\"onClose()\"\r\n  >\r\n  </button>\r\n\r\n  <button\r\n    pButton\r\n    label=\"Back\"\r\n    class=\"guide__back mr-2\"\r\n    *ngIf=\"guideFlowType !== 'all' && guideType === 'flow'\"\r\n    (click)=\"onBack()\"\r\n    icon=\"pi pi-arrow-left\"\r\n  ></button>\r\n\r\n  <div class=\"guide__header\">\r\n    <ng-container *ngIf=\"guideType === 'flow'\">\r\n      <button\r\n        class=\"mr-2\"\r\n        (click)=\"plusScale()\"\r\n        pButton\r\n        label=\"+\"\r\n        [disabled]=\"zoom >= 1.3\">\r\n      </button>\r\n      <button\r\n        pButton\r\n        label=\"-\"\r\n        class=\"mr-3\"\r\n        (click)=\"minusScale()\"\r\n        [disabled]=\"zoom <= 0.8\"\r\n      ></button>\r\n    </ng-container>\r\n\r\n    <button\r\n      pButton\r\n      [disabled]=\"guideType === 'flow'\"\r\n      (click)=\"onChoiceGuideType('flow')\"\r\n      label=\"Business Flow\"\r\n      icon=\"pi pi-box\"\r\n    ></button>\r\n    <button\r\n      pButton\r\n      [disabled]=\"guideType === 'map'\"\r\n      class=\"ml-2\"\r\n      (click)=\"onChoiceGuideType('map')\"\r\n      icon=\"pi pi-map\"\r\n      label=\"Business Processes Maps\"\r\n    ></button>\r\n    <button\r\n      [disabled]=\"guideType === 'glossary'\"\r\n      pButton\r\n      class=\"ml-2\"\r\n      icon=\"pi pi-book\"\r\n      (click)=\"onChoiceGuideType('glossary')\"\r\n      label=\"Glossary\"\r\n    ></button>\r\n  </div>\r\n</div>\r\n\r\n\r\n<ng-template #main>\r\n  <div class=\"guide__col guide__col_1\">\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Product Structure\"\r\n        routeUrl=\"product-structure/products\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Nomenclature Confirmation\"\r\n        routeUrl=\"/confirmation/nomenclature\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n        buttonsPosition=\"right\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Confirmation\"\r\n        routeUrl=\"/confirmation\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Business trips\"\r\n        routeUrl=\"/business-trips/trips\"\r\n        (navigate)=\"goToLink($event)\"\r\n        buttonsPosition=\"top\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n  <div class=\"guide__col guide__col_2\">\r\n    <div class=\"guide__button guide__button_arrow-right\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Creating structure of product\"\r\n        routeUrl=\"/dash/product-structure/products\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Sales Chain Creating\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"primary\"\r\n        title=\"Contacts and Events\"\r\n        routeUrl=\"/crm/business-partners\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-top-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Marketing and Sales Events\"\r\n      ></pek-guide-button>\r\n      <span class=\"top\"></span>\r\n      <span class=\"bottom\"></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        title=\"Customer\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Correspondents\"\r\n        routeUrl=\"/correspondents/incoming-correspondent\"\r\n        (navigate)=\"goToLink($event)\"\r\n        buttonsPosition=\"top\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n  <div class=\"guide__col guide__col_3\">\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        [hideButtons]=\"true\"\r\n        btnStyle=\"secondary\"\r\n        title=\"Manufacturing parts in advance\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Sales\"\r\n        routeUrl=\"/sales/sales-chains\"\r\n        (navigate)=\"goToLink($event)\"\r\n        buttonsPosition=\"right\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Creation of delivery chain\"\r\n        buttonsPosition=\"right\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Delivery chain\"\r\n        buttonsPosition=\"right\"\r\n        routeUrl=\"/dash/delivery-chains\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Shipment request\"\r\n        buttonsPosition=\"right\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        routeUrl=\"/warehouse/items\"\r\n        title=\"Warehouse\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Delivery process\"\r\n        buttonsPosition=\"right\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        title=\"Customer\"\r\n        buttonsPosition=\"right\"\r\n        [hideButtons]=\"true\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"ERP Statistics\"\r\n        routeUrl=\"/statistics\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n  <div class=\"guide__col guide__col_4\">\r\n    <div class=\"guide__button guide__button_arrow-right\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Production request\"\r\n        routeUrl=\"/dash/warehouse/requests\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n  </div>\r\n  <div class=\"guide__col guide__col_5\">\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        routeUrl=\"/product-structure/products\"-->\r\n    <!--        (navigate)=\"goToLink($event)\"-->\r\n    <!--        title=\"Product structure\"-->\r\n    <!--        buttonsPosition=\"top\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"Manufacturing parts in advance\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span></span>-->\r\n    <!--    </div>-->\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Confirmation\"\r\n        routeUrl=\"/confirmation\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Confirmation\"\r\n        routeUrl=\"/confirmation\"\r\n        buttonsPosition=\"left\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Confirmation payments\"\r\n        buttonsPosition=\"left\"\r\n        routeUrl=\"/dash/confirmation\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Payments\"\r\n        routeUrl=\"/dash/payments\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n        buttonsPosition=\"left\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n  <div class=\"guide__col guide__col_6\">\r\n    <div class=\"guide__button guide__button_arrow-right\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Creating Production list\"\r\n        routeUrl=\"/dash/sales/lists\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-left\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        routeUrl=\"/dash/confirmation\"\r\n        title=\"Payments confirmation\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        routeUrl=\"/dash/confirmation\"\r\n        title=\"Tender\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"top\"\r\n        btnStyle=\"primary\"\r\n        routeUrl=\"/dash/confirmation\"\r\n        title=\"Confirmation\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        routeUrl=\"/dash/confirmation\"\r\n        title=\"Tender\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        routeUrl=\"/dash/confirmation\"\r\n        title=\"Payment confirmation\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"guide__col guide__col_7\">\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Warehouse\"\r\n        routeUrl=\"/warehouse/items\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Procurement request\"\r\n        routeUrl=\"/dash/procurement/request-creation\"\r\n        buttonsPosition=\"left\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Production lists procurement\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n        routeUrl=\"/dash/procurement/orders\"\r\n        buttonsPosition=\"left\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-top-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Procurement\"\r\n        buttonsPosition=\"left\"\r\n      ></pek-guide-button>\r\n      <span class=\"top\"></span>\r\n      <span class=\"bottom\"></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        title=\"Supplier\"\r\n        buttonsPosition=\"left\"\r\n        [hideButtons]=\"true\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-top-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Procurement\"\r\n        buttonsPosition=\"left\"\r\n        [hideButtons]=\"true\"\r\n      ></pek-guide-button>\r\n      <span class=\"top\"></span>\r\n      <span class=\"bottom\"></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"primary\"\r\n        routeUrl=\"/dash/purchasing/orders\"\r\n        title=\"General Procurement\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n        buttonsPosition=\"left\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-top\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Manual procurement request\"\r\n        buttonsPosition=\"left\"\r\n        [hideButtons]=\"true\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        title=\"Employees\"\r\n        buttonsPosition=\"left\"\r\n        [hideButtons]=\"true\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"primary\"-->\r\n    <!--        title=\"Instruments/ tools/ equipment\"-->\r\n    <!--        buttonsPosition=\"left\"-->\r\n    <!--        [hideButtons]=\"true\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n  </div>\r\n  <div class=\"guide__col guide__col_8\">\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"primary\"\r\n        title=\"Confirmation\"\r\n        routeUrl=\"/confirmation\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Schedule Confirmation\"\r\n        routeUrl=\"/confirmation\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-right\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\" Production list deficit\"\r\n        routeUrl=\"/dash/warehouse/lists\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <!--        <button-->\r\n    <!--          class=\"guide__button guide__button_secondary guide__button_delivery\"-->\r\n    <!--          routerLinkActive=\"guide__button_active\"-->\r\n    <!--        >-->\r\n    <!--          Delivery items (?)-->\r\n    <!--          <span></span>-->\r\n    <!--          <span></span>-->\r\n    <!--          <span></span>-->\r\n    <!--          <span></span>-->\r\n    <!--          <span></span>-->\r\n\r\n    <!--          <div class=\"guide__buttons guide__buttons_top\">-->\r\n    <!--            <button>?</button>-->\r\n    <!--            <button>-->\r\n    <!--              <app-in-icon></app-in-icon>-->\r\n    <!--            </button>-->\r\n    <!--            <button>R</button>-->\r\n    <!--          </div>-->\r\n    <!--        </button>-->\r\n\r\n    <div class=\"guide__button guide__button_delivery\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Delivery items\"\r\n        routeUrl=\"test\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_rework\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Rework\"\r\n        routeUrl=\"test\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Delivered items\"\r\n        buttonsPosition=\"left\"\r\n        [hideButtons]=\"true\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Tool request\"\r\n        buttonsPosition=\"left\"\r\n        [hideButtons]=\"true\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"primary\"\r\n        title=\"Instruments/ tools/ equipment\"\r\n        buttonsPosition=\"top\"\r\n        routeUrl=\"/dash/instruments/instruments-and-tools\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n  <div class=\"guide__col guide__col_9\">\r\n    <!--        <button-->\r\n    <!--          class=\"guide__button\"-->\r\n    <!--          routerLinkActive=\"guide__button_active\"-->\r\n    <!--        >-->\r\n    <!--          Warehouse-->\r\n    <!--          <div class=\"guide__buttons guide__buttons_top\">-->\r\n    <!--            <button>?</button>-->\r\n    <!--            <button routerLink=\"/dash/warehouse/products\">-->\r\n    <!--              <app-in-icon></app-in-icon>-->\r\n    <!--            </button>-->\r\n    <!--            <button>R</button>-->\r\n    <!--          </div>-->\r\n    <!--        </button>-->\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Warehouse\"\r\n        routeUrl=\"/warehouse/items\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-top-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Production request\"\r\n        routeUrl=\"/dash/warehouse/requests\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n\r\n      <span class=\"top\"></span>\r\n      <span class=\"bottom\"></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Production\"\r\n        routeUrl=\"/dash/production/plan\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Order to our manufacture\"\r\n        routeUrl=\"/dash/production/orders\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Production\"\r\n        routeUrl=\"/dash/production/plan\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Manufactured order\"\r\n        routeUrl=\"/dash/production/orders\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"QC\"\r\n        buttonsPosition=\"right\"\r\n        (getInfo)=\"showLorem = true\"\r\n        [info]=\"true\"\r\n        routeUrl=\"/dash/quality-control/invoices\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"QC passed\"\r\n        routeUrl=\"/dash/quality-control/invoices\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Warehouse\"\r\n        routeUrl=\"/warehouse/items\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide__col guide__col_10\">\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Declined Payment\"\r\n        buttonsPosition=\"top\"\r\n      >\r\n      </pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-right\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Outsourcing orders\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Rework order\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-left-bottom-big\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"QC not passed\"\r\n        routeUrl=\"/dash/quality-control/invoices\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Return to outsourcer\"\r\n        routeUrl=\"/dash/quality-control/invoices\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"primary\"\r\n        title=\"Manufacturing procurement\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n        routeUrl=\"/dash/procurement/orders\"\r\n      ></pek-guide-button>\r\n\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Delivered Items\"\r\n        routeUrl=\"/dash/quality-control/invoices\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        title=\"Outsourcer\"\r\n        routeUrl=\"/dash/quality-control/invoices\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n\r\n      <div class=\"rma\">\r\n        RMA\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"QC not passed\"\r\n        routeUrl=\"/dash/quality-control/invoices\"\r\n        buttonsPosition=\"bottom\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"QC Passed\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide__col guide__col_11\">\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Payments\"\r\n        routeUrl=\"/dash/payments\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide__button guide__button_arrow-top\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Confirmed payment\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Confirmation\"\r\n        buttonsPosition=\"right\"\r\n        routeUrl=\"/confirmation\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide__button guide__button_arrow-top\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Payment confirmation\"\r\n        routeUrl=\"/dash/confirmation\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        title=\"Outsourcing\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom-left-big\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Outsorsed parts\"\r\n        routeUrl=\"test\"\r\n        buttonsPosition=\"right\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        title=\"Supplier\"\r\n        routeUrl=\"test\"\r\n        buttonsPosition=\"right\"\r\n      ></pek-guide-button>\r\n\r\n      <div class=\"rma\">\r\n        RMA\r\n        <span></span>\r\n      </div>\r\n\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <!--    <div class=\"guide__button guide__button_delivered-items\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"Delivered items\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--      ></pek-guide-button>-->\r\n\r\n    <!--      <div>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--      </div>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        title=\"Warehouse isolator\"-->\r\n    <!--        routeUrl=\"/warehouse/isolator\"-->\r\n    <!--        buttonsPosition=\"bottom\"-->\r\n    <!--        (navigate)=\"goToLink($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <div>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--      </div>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"Return to procurement\"-->\r\n    <!--        routeUrl=\"/dash/warehouse/insulator\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span></span>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        title=\"Manufacturing procurement\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        routeUrl=\"/dash/procurement/orders\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"Delivered Items\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span></span>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        title=\"QC\"-->\r\n    <!--        routeUrl=\"/dash/quality-control/invoices\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <div>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--      </div>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"QC passed\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span></span>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        title=\"Warehouse\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        routeUrl=\"/warehouse/items\"-->\r\n    <!--        (navigate)=\"goToLink($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n  </div>\r\n  <div class=\"guide__col guide__col_12\">\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"top\"\r\n        btnStyle=\"primary\"\r\n        title=\"Confirmation\"\r\n        routeUrl=\"/confirmation\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"secondary\"\r\n        title=\"Tender\"\r\n        routeUrl=\"/confirmation\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-right-left\">\r\n      <pek-guide-button\r\n        [btnStyle]=\"'secondary'\"\r\n        title=\"Outsourcing\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span class=\"left\"></span>\r\n      <span class=\"right\"></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"primary\"\r\n        title=\"Confirmation\"\r\n        routeUrl=\"/confirmation\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-top\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"secondary\"\r\n        title=\"Rework Request\"\r\n        routeUrl=\"/dash/confirmation\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"primary\"\r\n        title=\"Warehouse Isolator\"\r\n        routeUrl=\"/warehouse/isolator\"\r\n        (navigate)=\"goToLink($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"secondary\"\r\n        title=\"Return to procurement\"\r\n        routeUrl=\"/dash/confirmation\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button small\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"primary\"\r\n        title=\"Production lists procurement \\ General procurement\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n        routeUrl=\"/dash/procurement/orders\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"secondary\"\r\n        title=\"Delivered items\"\r\n        routeUrl=\"/dash/confirmation\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"right\"\r\n        btnStyle=\"primary\"\r\n        title=\"QC\"\r\n        routeUrl=\"/dash/quality-control/invoices\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        [btnStyle]=\"'secondary'\"-->\r\n    <!--        title=\"Disasembling request\"-->\r\n    <!--        routeUrl=\"/dash/outsource/outsource-chain\"-->\r\n    <!--        buttonsPosition=\"top\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <div>-->\r\n    <!--        <span></span>-->\r\n    <!--      </div>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        buttonsPosition=\"top\"-->\r\n    <!--        btnStyle=\"primary\"-->\r\n    <!--        title=\"Confirmation\"-->\r\n    <!--        routeUrl=\"/dash/confirmation\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        [btnStyle]=\"'secondary'\"-->\r\n    <!--        title=\"Disasembled items\"-->\r\n    <!--        buttonsPosition=\"top\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <div>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--      </div>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        [btnStyle]=\"'secondary'\"-->\r\n    <!--        title=\"Write off request\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span></span>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        btnStyle=\"primary\"-->\r\n    <!--        title=\"Confirmation\"-->\r\n    <!--        routeUrl=\"/dash/confirmation\"-->\r\n    <!--      ></pek-guide-button>-->\r\n\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        [btnStyle]=\"'secondary'\"-->\r\n    <!--        title=\"Write off\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span></span>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        [btnStyle]=\"'outline'\"-->\r\n    <!--        title=\"Write off\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        title=\"Write off\"-->\r\n    <!--        routeUrl=\"/confirmation/write-off\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLink($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"Disassembling\"-->\r\n    <!--        buttonsPosition=\"right\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n\r\n    <!--      <div>-->\r\n    <!--        <span></span>-->\r\n    <!--        <span></span>-->\r\n    <!--      </div>-->\r\n    <!--    </div>-->\r\n  </div>\r\n\r\n  <div class=\"guide__col guide__col_13\">\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        title=\"Outsourcer\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Disassembling request\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"primary\"\r\n        title=\"Confirmation\"\r\n        routeUrl=\"/confirmation/nomenclature\"\r\n        (navigate)=\"goToLink($event)\"\r\n        buttonsPosition=\"top\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Disassembled items\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        title=\"Purchasing\"-->\r\n    <!--        buttonsPosition=\"left\"-->\r\n    <!--        routeUrl=\"/dash/purchasing/orders\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"Payment confirmation\"-->\r\n    <!--        routeUrl=\"/dash/confirmation\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span></span>-->\r\n    <!--    </div>-->\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        title=\"Confirmation\"-->\r\n    <!--        buttonsPosition=\"left\"-->\r\n    <!--        routeUrl=\"/confirmation\"-->\r\n    <!--        (navigate)=\"goToLink($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n    <!--    <div class=\"guide__button guide__button_arrow-bottom\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"Confirmed payment\"-->\r\n    <!--        routeUrl=\"/dash/confirmation\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span></span>-->\r\n    <!--    </div>-->\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        title=\"Payments\"-->\r\n    <!--        buttonsPosition=\"left\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--        routeUrl=\"/dash/payments\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n    <!--  </div>-->\r\n\r\n    <!--  <div class=\"guide__col guide__col_14\">-->\r\n    <!--    <div class=\"guide__button guide__button_arrow-right-left\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"secondary\"-->\r\n    <!--        title=\"Purchasing\"-->\r\n    <!--        routeUrl=\"/dash/purchasing/orders\"-->\r\n    <!--        (navigate)=\"goToLinkWindow($event)\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--      <span class=\"left\"></span>-->\r\n    <!--      <span class=\"right\"></span>-->\r\n    <!--    </div>-->\r\n    <!--  </div>-->\r\n\r\n    <!--  <div class=\"guide__col guide__col_15\">-->\r\n    <!--    <div class=\"guide__button\">-->\r\n    <!--      <pek-guide-button-->\r\n    <!--        btnStyle=\"outline\"-->\r\n    <!--        title=\"Supplier\"-->\r\n    <!--        buttonsPosition=\"bottom\"-->\r\n    <!--        routeUrl=\"test\"-->\r\n    <!--      ></pek-guide-button>-->\r\n    <!--    </div>-->\r\n    <!--  </div>-->\r\n  </div>\r\n  <div class=\"guide__col guide__col_14\">\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Write off request\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"primary\"\r\n        title=\"Confirmation\"\r\n        routeUrl=\"/confirmation/nomenclature\"\r\n        (navigate)=\"goToLink($event)\"\r\n        buttonsPosition=\"top\"\r\n      ></pek-guide-button>\r\n    </div>\r\n\r\n    <div class=\"guide__button guide__button_arrow-bottom\">\r\n      <pek-guide-button\r\n        btnStyle=\"secondary\"\r\n        title=\"Write off\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <span></span>\r\n    </div>\r\n\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        btnStyle=\"outline\"\r\n        title=\"write off\"\r\n        routeUrl=\"/dash/outsource/outsource-chain\"\r\n        buttonsPosition=\"top\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"guide__col guide__col_reports\">\r\n    <div class=\"guide__button\">\r\n      <pek-guide-button\r\n        buttonsPosition=\"top\"\r\n        btnStyle=\"primary\"\r\n        title=\"Reports\"\r\n        routeUrl=\"/dash/accounting/cost-reports\"\r\n        (navigate)=\"goToLinkWindow($event)\"\r\n      ></pek-guide-button>\r\n      <div>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {NavigationLink} from '../../navigation-route';\r\nimport {NavigationStart, Router} from '@angular/router';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-header',\r\n  templateUrl: './header.component.html',\r\n  styleUrls: ['./header.component.scss', './header.mobile.component.scss']\r\n})\r\nexport class HeaderComponent implements OnInit {\r\n  @Input() module: string;\r\n  @Input() routes: NavigationLink[];\r\n  @Input() settingsRoutes: NavigationLink[];\r\n\r\n  isShowMobileNav = false;\r\n  isShowSettings: boolean;\r\n  isShowSwitcher: boolean;\r\n\r\n  settingRouters = [\r\n    '/warehouse/measure',\r\n    '/warehouse/warehouses',\r\n    '/warehouse/serial-types',\r\n    '/warehouse/categories',\r\n    '/procurement/services',\r\n    '/procurement/statuses',\r\n    '/manufacturing/employees',\r\n    '/manufacturing/positions',\r\n    '/manufacturing/machines',\r\n    '/manufacturing/order-statuses',\r\n    '/production/instruments-tools',\r\n    '/production/areas',\r\n    '/production/tool-orders',\r\n    '/accounting/currencies',\r\n    '/accounting/accounting-services',\r\n    '/accounting/filters',\r\n    '/purchasing/categories',\r\n    '/purchasing/statuses',\r\n    '/product-structure/technologies',\r\n    '/product-structure/prefixes',\r\n    '/quality-control/protocols',\r\n    '/crm/company-categories',\r\n    '/crm/event-types',\r\n    '/crm/employees',\r\n    '/crm/external-events',\r\n    '/crm/users-profiles',\r\n    '/sales/statuses',\r\n    '/sales/regions',\r\n    '/business-trips/vehicles',\r\n    '/business-trips/expenses',\r\n    '/correspondents/outgoing-categories',\r\n    '/correspondents/incoming-categories',\r\n    '/outsourcing/statuses',\r\n  ];\r\n\r\n  settingModules = [\r\n    '/warehouse',\r\n    '/procurement/',\r\n    '/production/',\r\n    '/accounting/',\r\n    '/purchasing/',\r\n    '/product-structure/',\r\n    '/quality-control/',\r\n    '/crm/',\r\n    '/sales/',\r\n    '/outsourcing/',\r\n    '/business-trips/',\r\n    '/correspondents/',\r\n    '/manufacturing',\r\n  ];\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n    router.events.forEach(event => {\r\n      if (event instanceof NavigationStart) {\r\n        this.closeMobileMenu();\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getLinks();\r\n  }\r\n\r\n  getLinks() {\r\n    const routerLink = this.router.url;\r\n    this.isShowSettings = this.settingRouters.some(route => routerLink.includes(route));\r\n    this.isShowSwitcher = this.settingModules.some(module => routerLink.includes(module));\r\n  }\r\n\r\n  toggleVisibleSettingMenu() {\r\n    this.isShowSettings = !this.isShowSettings;\r\n  }\r\n\r\n  openMobileMenu() {\r\n    this.isShowMobileNav = true;\r\n    this.getLinks();\r\n    document.body.style.overflow = 'hidden';\r\n  }\r\n\r\n  closeMobileMenu() {\r\n    this.isShowMobileNav = false;\r\n    document.body.style.overflow = '';\r\n  }\r\n\r\n  onOpenBusinessGuide() {\r\n    this.modalService.showBusinessGuide();\r\n  }\r\n}\r\n","<div\r\n  class=\"layout-header\"\r\n  [class.layout-header_open]=\"isShowMobileNav\"\r\n>\r\n  <pek-logo [module]=\"module\"></pek-logo>\r\n  <div\r\n    class=\"layout-navigation\"\r\n    [class.layout-navigation_wh]=\"module === 'Warehouse'\"\r\n  >\r\n    <ul class=\"layout-navigation__list\">\r\n      <li\r\n        *ngFor=\"let route of routes\"\r\n        class=\"layout-navigation__item\"\r\n      >\r\n        <a\r\n          *ngIf=\"!route.isExternal\"\r\n          [routerLink]=\"route.commands\"\r\n          routerLinkActive=\"active\"\r\n        >\r\n          {{route.label}}\r\n        </a>\r\n        <a\r\n          *ngIf=\"route.isExternal\"\r\n          [href]=\"route.commands[0]\"\r\n          target=\"_self\"\r\n          routerLinkActive=\"active\"\r\n        >\r\n          {{route.label}}\r\n        </a>\r\n      </li>\r\n\r\n      <li\r\n        *ngFor=\"let route of settingsRoutes\"\r\n        class=\"layout-navigation__item layout-navigation__item_settings\"\r\n        [class.layout-navigation__item_settings-show]=\"isShowSettings\"\r\n      >\r\n        <a\r\n          [routerLink]=\"route.commands\"\r\n          routerLinkActive=\"active\"\r\n        >\r\n          {{route.label}}\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n  <button class=\"show-navigation-button\" (click)=\"openMobileMenu()\">\r\n    <i class=\"pi pi-bars\"></i>\r\n  </button>\r\n\r\n  <button class=\"close-navigation-button\" (click)=\"closeMobileMenu()\">\r\n    <i class=\"pi pi-times\"></i>\r\n  </button>\r\n\r\n  <div class=\"actions ml-auto\">\r\n    <div class=\"toggle mr-3\" *ngIf=\"isShowSwitcher\">\r\n    <span (click)=\"toggleVisibleSettingMenu()\">\r\n      {{isShowSettings ? 'Hide' : 'Show'}} settings menu\r\n    </span>\r\n      <p-inputSwitch title=\"Show Settings Menu\" [(ngModel)]=\"isShowSettings\"></p-inputSwitch>\r\n    </div>\r\n    <button\r\n      (click)=\"onOpenBusinessGuide()\"\r\n      class=\"guide-button\"\r\n    >\r\n      <i class=\"pi pi-book\"></i>\r\n      Business Guide\r\n    </button>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-layout',\r\n  templateUrl: './layout.component.html',\r\n  styleUrls: ['./layout.component.scss']\r\n})\r\nexport class LayoutComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"layout\">\r\n  <div class=\"layout__content\">\r\n    <div class=\"layout__inner\">\r\n      <router-outlet></router-outlet>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-logo',\r\n  templateUrl: './logo.component.html',\r\n  styleUrls: ['./logo.component.scss']\r\n})\r\nexport class LogoComponent implements OnInit {\r\n  @Input() module: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"logo\">\r\n  <a class=\"logo__link\" routerLink=\"/\">\r\n    <span class=\"logo__text\">R-WAVE-ERP</span>\r\n    <span class=\"logo__module\">{{module}}</span>\r\n  </a>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { LayoutComponent } from './components/layout/layout.component';\r\nimport { HeaderComponent } from './components/header/header.component';\r\nimport {RouterModule} from '@angular/router';\r\nimport { LogoComponent } from './components/logo/logo.component';\r\nimport {MatButtonModule} from '@angular/material/button';\r\nimport {MatIconModule} from '@angular/material/icon';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport {InputSwitchModule} from 'primeng/inputswitch';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    LayoutComponent,\r\n    HeaderComponent,\r\n    LogoComponent,\r\n  ],\r\n  exports: [\r\n    LogoComponent,\r\n    HeaderComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    SharedModule,\r\n    InputSwitchModule,\r\n  ]\r\n})\r\nexport class LayoutModule { }\r\n","export enum PlanningStatus {\r\n  WAITING_CONFIRMATION = '0',\r\n  REQUIRES_PLANNING = '1',\r\n  PLANNED = '2',\r\n  ON_STOCK = '3',\r\n}\r\n","export enum ShiftTypes {\r\n  HOURS = 'Hours',\r\n  DAYS = 'Days',\r\n  WEEKS = 'Weeks',\r\n  MONTHS = 'Months'\r\n}\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EmployeeService} from '@shared/services/employee.service';\r\nimport {Employee} from '@shared/models/employee';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-employee',\r\n  templateUrl: './create-edit-employee.component.html',\r\n  styleUrls: ['./create-edit-employee.component.scss']\r\n})\r\nexport class CreateEditEmployeeComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    first_name: [null, [Validators.required]],\r\n    last_name: [null, [Validators.required]],\r\n    start_time: [null, [Validators.required]],\r\n    position: [null, [Validators.required]],\r\n    max_working_time: [null, [Validators.required, Validators.max(24), Validators.min(0)]]\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly employeeService: EmployeeService,\r\n    private readonly adapterService: AdapterService,\r\n    private dialogRef: MatDialogRef<CreateEditEmployeeComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, employee: Employee }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, this.fb.control(this.data.employee.id));\r\n      this.form.patchValue(<any>this.data.employee);\r\n      this.form.get('position').patchValue(<any>this.data.employee.position.id);\r\n      this.form.get('max_working_time').patchValue(<any>parseInt(this.data.employee.max_working_time, 10));\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    const send = <any>{...this.form.value};\r\n    console.log(send);\r\n\r\n    if (typeof (send.start_time) !== 'string') {\r\n      send.start_time = this.adapterService.msToTime(send.start_time.getTime());\r\n    }\r\n\r\n    send.max_working_time = send.max_working_time * 3600;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createEmployee(send);\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editEmployee(send);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createEmployee(send: any) {\r\n    this.employeeService.create(send).subscribe({\r\n      next: employee => this.dialogRef.close(employee),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editEmployee(send: any) {\r\n    this.employeeService.update(send).subscribe({\r\n      next: employee => this.dialogRef.close(employee),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectPosition(id: number) {\r\n    this.form.get('position').patchValue(<any>id ?? null);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Employee\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"first_name\"> First Name* </label>\r\n      <input\r\n        id=\"first_name\"\r\n        formControlName=\"first_name\"\r\n        type=\"text\"\r\n        pInputText\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"last_name\"> Last Name* </label>\r\n      <input\r\n        id=\"last_name\"\r\n        formControlName=\"last_name\"\r\n        type=\"text\"\r\n        pInputText\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Position*</label>\r\n      <pek-employee-position-picker\r\n        (selectPosition)=\"onSelectPosition($event)\"\r\n        [currentPositionId]=\"+form.get('position').value\"\r\n      ></pek-employee-position-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label> Start Time* </label>\r\n      <p-calendar\r\n        formControlName=\"start_time\"\r\n        [timeOnly]=\"true\"\r\n        inputId=\"timeonly\"\r\n      >\r\n      </p-calendar>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Max Working Hours*</label>\r\n      <input\r\n        formControlName=\"max_working_time\"\r\n        class=\"form-control\"\r\n        type=\"number\"\r\n        max=\"24\"\r\n        step=\"1\"\r\n        id=\"max_working_time\"\r\n        pInputText\r\n      >\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {EmployeeService} from '@shared/services/employee.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {Employee} from '@shared/models/employee';\r\nimport {MachineService} from '../../services/machine.service';\r\nimport {Machine} from '../../models/machine';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-machine',\r\n  templateUrl: './create-edit-machine.component.html',\r\n  styleUrls: ['./create-edit-machine.component.scss']\r\n})\r\nexport class CreateEditMachineComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', Validators.required],\r\n    description: ['', Validators.required],\r\n    max_working_time: [null, [Validators.required, Validators.max(24), Validators.min(0)]]\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly machineService: MachineService,\r\n    private readonly adapterService: AdapterService,\r\n    private dialogRef: MatDialogRef<CreateEditMachineComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, machine: Machine }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, this.fb.control(this.data.machine.id));\r\n      this.form.patchValue(<any>this.data.machine);\r\n      this.form.get('max_working_time').patchValue(<any>parseInt(this.data.machine.max_working_time, 10));\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    const send = <any>{...this.form.value};\r\n\r\n    send.max_working_time = send.max_working_time * 3600;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createMachine(send);\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editMachine(send);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createMachine(send: any) {\r\n    this.machineService.create(send).subscribe({\r\n      next: machine => this.dialogRef.close(machine),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editMachine(send: any) {\r\n    this.machineService.update(send).subscribe({\r\n      next: machine => this.dialogRef.close(machine),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Machine\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\"> Name* </label>\r\n      <input\r\n        id=\"name\"\r\n        formControlName=\"name\"\r\n        type=\"text\"\r\n        pInputText\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Max Working Hours*</label>\r\n      <input\r\n        formControlName=\"max_working_time\"\r\n        class=\"form-control\"\r\n        type=\"number\"\r\n        max=\"24\"\r\n        step=\"1\"\r\n        id=\"max_working_time\"\r\n        pInputText\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description*</label>\r\n      <textarea\r\n        id=\"description\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"false\"\r\n        formControlName=\"description\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EmployeePosition} from '@shared/models/employee-position';\r\nimport {EmployeePositionService} from '@shared/services/employee-position.service';``\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-position',\r\n  templateUrl: './create-edit-position.component.html',\r\n  styleUrls: ['./create-edit-position.component.scss']\r\n})\r\nexport class CreateEditPositionComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    title: [null, [Validators.required]],\r\n    rate: [null, [Validators.required, Validators.min(0)]],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly employeePositionService: EmployeePositionService,\r\n    private dialogRef: MatDialogRef<CreateEditPositionComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, position: EmployeePosition }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, this.fb.control(this.data.position.id));\r\n      this.form.patchValue(<any>this.data.position);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    const send = <any>{...this.form.value};\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createPosition(send);\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editPosition(send);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createPosition(send: any) {\r\n    this.employeePositionService.create(send).subscribe({\r\n      next: position => this.dialogRef.close(position),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editPosition(send: any) {\r\n    this.employeePositionService.update(send).subscribe({\r\n      next: position => this.dialogRef.close(position),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Employee\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\"> Name* </label>\r\n      <input\r\n        id=\"name\"\r\n        formControlName=\"title\"\r\n        type=\"text\"\r\n        pInputText\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"rate\"> Rate* </label>\r\n      <input\r\n        formControlName=\"rate\"\r\n        type=\"number\"\r\n        step=\"0.01\"\r\n        class=\"form-control\"\r\n        id=\"rate\"\r\n        required=\"required\"\r\n        pInputText\r\n      >\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {ENomenclatureType} from '@shared/models/nomenclature';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {WarehouseProduct} from '../../../warehouse/models/warehouse-product';\r\nimport {filter} from 'rxjs/operators';\r\nimport {WarehouseProductService} from '../../../warehouse/services/warehouse-product.service';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\n\r\nexport class NewItem {\r\n  taskId: number;\r\n  data: {\r\n    nomenclature: number;\r\n    quantity: number;\r\n  };\r\n}\r\n\r\nexport class AssemblingRequest {\r\n  assemblingProduct: any;\r\n  quantity: number;\r\n}\r\n\r\nexport class MaterialRequest {\r\n  warehouseProduct: WarehouseProduct;\r\n  quantity: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-manufacturing-add-items',\r\n  templateUrl: './manufacturing-add-items.component.html',\r\n  styleUrls: ['./manufacturing-add-items.component.scss']\r\n})\r\nexport class ManufacturingAddItemsComponent implements OnInit {\r\n\r\n  newItems: NewItem[] = [];\r\n\r\n  isSaving = false;\r\n\r\n  materials = [{\r\n    warehouseProduct: <any>null,\r\n    quantity: 1\r\n  }];\r\n\r\n  assemblies = [{\r\n    assemblingProduct: <any>null,\r\n    quantity: 1\r\n  }];\r\n\r\n  type: 'assemblies' | 'warehouse' | 'manufactured-parts' = null;\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<ManufacturingAddItemsComponent>,\r\n    private readonly warehouseProductService: WarehouseProductService,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { parentTasks: Task[] },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  protected readonly ENomenclatureType = ENomenclatureType;\r\n\r\n  choiceType(type: any) {\r\n    this.type = type;\r\n    this.dialogRef.updateSize('60rem', 'auto');\r\n  }\r\n\r\n  public onRemoveItem(item: AssemblingRequest | MaterialRequest) {\r\n    if (this.type === 'warehouse') {\r\n      const index = this.materials.indexOf(<MaterialRequest>item);\r\n      this.materials.splice(index, 1);\r\n    } else {\r\n      const index = this.assemblies.indexOf(<AssemblingRequest>item);\r\n      this.assemblies.splice(index, 1);\r\n    }\r\n\r\n  }\r\n\r\n  onAddItem() {\r\n    if (this.type === 'warehouse') {\r\n      this.materials.push({warehouseProduct: null, quantity: 1});\r\n    } else {\r\n      this.assemblies.push({assemblingProduct: null, quantity: 1});\r\n    }\r\n  }\r\n\r\n  onItemSearch(item: AssemblingRequest | MaterialRequest) {\r\n    if (this.type === 'warehouse') {\r\n      this.warehouseProductService.openSearchInWarehouseModal().pipe(\r\n        filter(product => !!product)\r\n      ).subscribe(product => {\r\n        // @ts-ignore\r\n        item.warehouseProduct = product;\r\n      });\r\n    } else if (this.type === 'assemblies') {\r\n      this.nomenclatureService.assemblyManufacturedPickerDialog(ENomenclatureType.ASSEMBLY).pipe(\r\n        filter(product => !!product)\r\n      ).subscribe(product => {\r\n        // @ts-ignore\r\n        item.assemblingProduct = product;\r\n      });\r\n    } else if (this.type === 'manufactured-parts') {\r\n      this.nomenclatureService.assemblyManufacturedPickerDialog(ENomenclatureType.MANUFACTURED).pipe(\r\n        filter(product => !!product)\r\n      ).subscribe(product => {\r\n        // @ts-ignore\r\n        item.assemblingProduct = product;\r\n      });\r\n    }\r\n  }\r\n\r\n  onAddItems() {\r\n    this.isSaving = true;\r\n    this.materials = this.materials.filter(m => m.warehouseProduct);\r\n    this.assemblies = this.assemblies.filter(a => a.assemblingProduct);\r\n\r\n    if (this.materials.length > 0) {\r\n      this.materials.forEach(material => {\r\n        this.newItems.push({\r\n          // @ts-ignore\r\n          taskId: this.data.parentTasks[0].id,\r\n          data: {\r\n            nomenclature: material.warehouseProduct.nomenclature.id,\r\n            quantity: material.quantity,\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    if (this.assemblies.length > 0) {\r\n      this.assemblies.forEach(assembling => {\r\n        this.newItems.push({\r\n          // @ts-ignore\r\n          taskId: this.data.parentTasks[0].id,\r\n          data: {\r\n            nomenclature: assembling.assemblingProduct.id,\r\n            quantity: assembling.quantity,\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    this.dialogRef.close(this.newItems);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Add\r\n    <ng-container [ngSwitch]=\"type\">\r\n      <ng-container *ngSwitchCase=\"'assemblies'\">Assembly</ng-container>\r\n      <ng-container *ngSwitchCase=\"'warehouse'\">Warehouse Products</ng-container>\r\n      <ng-container *ngSwitchCase=\"'manufactured-parts'\">Manufactured</ng-container>\r\n    </ng-container>\r\n    Items\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <ng-container *ngIf=\"type; else selectionType\">\r\n    <div class=\"add-items\">\r\n      <div class=\"row\">\r\n        <div class=\"col-9\">\r\n          <h3 class=\"header-title\">\r\n            <ng-container [ngSwitch]=\"type\">\r\n              <ng-container *ngSwitchCase=\"'assemblies'\">Assemblies</ng-container>\r\n              <ng-container *ngSwitchCase=\"'warehouse'\">Warehouse Products</ng-container>\r\n              <ng-container *ngSwitchCase=\"'manufactured-parts'\">Manufactured</ng-container>\r\n            </ng-container>\r\n          </h3>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <h3 class=\"header-title\">Quantity</h3>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\" *ngIf=\"type !== 'warehouse'\">\r\n        <div *ngFor=\"let assembling of assemblies; index as index\"\r\n             class=\"col-12 row pt-2 align-items-center material\"\r\n        >\r\n          <div class=\"col-9 item\">\r\n            <a class=\"btn-picker\" (click)=\"onItemSearch(assembling)\">\r\n              <span *ngIf=\"!assembling.assemblingProduct\">\r\n                {{type === 'assemblies' ? 'Search Assembling' : 'Search Manufactured Parts'}}\r\n              </span>\r\n              <span *ngIf=\"assembling.assemblingProduct\">\r\n                {{type === 'assemblies' ? 'Change Assembling' : 'Change Manufactured Parts'}}\r\n              </span>\r\n            </a>\r\n            <span class=\"item-name\" *ngIf=\"assembling.assemblingProduct\">\r\n              {{assembling.assemblingProduct.name}}\r\n              ({{assembling.assemblingProduct.code}})\r\n            </span>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <input min=\"1\" type=\"number\" pInputText class=\"form-control\" [(ngModel)]=\"assembling.quantity\">\r\n          </div>\r\n          <div class=\"col-1\">\r\n            <button *ngIf=\"index\" class=\"btn-picker btn-danger btn-picker-danger\" (click)=\"onRemoveItem(assembling)\">\r\n              <i class=\"fas fa-minus\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row\" *ngIf=\"type === 'warehouse'\">\r\n        <div *ngFor=\"let material of materials; index as index\"\r\n             class=\"col-12 row pt-2 align-items-center material\"\r\n        >\r\n          <div class=\"col-9 item\">\r\n            <a class=\"btn-picker\" (click)=\"onItemSearch(material)\">\r\n              <span *ngIf=\"!material.warehouseProduct\">Search In Warehouse</span>\r\n              <span *ngIf=\"material.warehouseProduct\">Change material</span>\r\n            </a>\r\n            <span class=\"item-name\" *ngIf=\"material.warehouseProduct\">\r\n              {{material.warehouseProduct.nomenclature.name}} ({{material.warehouseProduct.nomenclature.code}})\r\n              Quantity: {{material.warehouseProduct.total_locator_quantity}}\r\n            </span>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <input pInputText min=\"1\" type=\"number\" class=\"form-control\" [(ngModel)]=\"material.quantity\">\r\n          </div>\r\n          <div class=\"col-1\">\r\n            <button *ngIf=\"index\" class=\"btn-picker btn-danger btn-picker-danger\" (click)=\"onRemoveItem(material)\">\r\n              <i class=\"pi pi-times\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <a class=\"btn-picker btn-picker-add\" (click)=\"onAddItem()\">\r\n        <i class=\"pi pi-plus\"></i>\r\n        Add new item\r\n      </a>\r\n    </div>\r\n  </ng-container>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n\r\n  <button\r\n    *ngIf=\"type\"\r\n    pButton\r\n    type=\"button\"\r\n    [loading]=\"isSaving\"\r\n    label=\"Add Items\"\r\n    class=\"p-button-success\"\r\n    (click)=\"onAddItems()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #selectionType>\r\n  <div class=\"add-product\">\r\n    <h3>Please select the type of new position</h3>\r\n\r\n    <div class=\"buttons\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Purchased\"\r\n        (click)=\"choiceType('warehouse')\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Assembly\"\r\n        (click)=\"choiceType('assemblies')\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Manufactured\"\r\n        (click)=\"choiceType('manufactured-parts')\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {UITask} from '../../components/manufacturing-chart/manufacturing-chart.component';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {TechnologyService} from '../../../product-structure/services/technology.service';\r\nimport {TaskService} from '@shared/services/task.service';\r\nimport {Technology} from '../../../product-structure/models/technology';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-manufacturing-add-technology',\r\n  templateUrl: './manufacturing-add-technology.component.html',\r\n  styleUrls: ['./manufacturing-add-technology.component.scss']\r\n})\r\nexport class ManufacturingAddTechnologyComponent implements OnInit {\r\n  task: UITask;\r\n  form: FormGroup = this.fb.group({\r\n    technology: [null, Validators.required],\r\n    position: [null, Validators.required]\r\n  });\r\n\r\n  isSaving = false;\r\n  technologies: Technology[] = [];\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: { task: UITask },\r\n    private technologyService: TechnologyService,\r\n    private readonly taskService: TaskService,\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<ManufacturingAddTechnologyComponent>\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.task = this.data.task;\r\n    this.getTechnologies();\r\n  }\r\n\r\n  getTechnologies() {\r\n    this.technologyService.get().subscribe(res => {\r\n      this.technologies = res;\r\n    });\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n    this.taskService.addTechnologyToTask(this.task.tasks[0].id, this.form.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => {\r\n      this.dialogRef.close(true);\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Add Technology of Task\r\n  </h2>\r\n</div>\r\n\r\n<form [formGroup]=\"form\">\r\n  <mat-dialog-content>\r\n    <div class=\"form-group\">\r\n      <label>Technology</label>\r\n      <p-dropdown\r\n        [showClear]=\"true\"\r\n        placeholder=\"Select Technology\"\r\n        formControlName=\"technology\"\r\n        [options]=\"technologies\"\r\n        optionLabel=\"name\"\r\n        optionValue=\"id\"\r\n      >\r\n      </p-dropdown>\r\n    </div>\r\n    <div class=\"form-group mb-0\">\r\n      <label>Position</label>\r\n\r\n      <div class=\"radio\">\r\n        <div class=\"form-group mr-4\" [class.disabled]=\"task.status === '4'\">\r\n          <input id=\"before\" type=\"radio\" value=\"before\" name=\"position\" formControlName=\"position\">\r\n          <label for=\"before\">Before</label>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <input id=\"after\" type=\"radio\" value=\"after\" name=\"position\" formControlName=\"position\">\r\n          <label for=\"after\">After</label>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </mat-dialog-content>\r\n</form>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Save\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {MaterialRequest} from '../../pickers/manufacturing-material-picker/manufacturing-material-picker.component';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {EmployeeService} from '@shared/services/employee.service';\r\nimport {TaskService} from '@shared/services/task.service';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\nimport {Task} from '@shared/models/task';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {finalize} from 'rxjs';\r\n\r\nexport class TaskOrder {\r\n  task: Task;\r\n  order: Order;\r\n  quantity: number;\r\n  useOwnMaterials = false;\r\n  useTechnicalEquipment = false;\r\n  materials: MaterialRequest[] = [];\r\n  sent = false;\r\n\r\n  constructor(config: Partial<TaskOrder>) {\r\n    this.order = new Order();\r\n    if (config) {\r\n      Object.assign(this, config);\r\n    }\r\n  }\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-manufacturing-create-order',\r\n  templateUrl: './manufacturing-create-order.component.html',\r\n  styleUrls: ['./manufacturing-create-order.component.scss']\r\n})\r\nexport class ManufacturingCreateOrderComponent implements OnInit {\r\n  orders: TaskOrder[] = [];\r\n  production: 'own' | 'outsource' = 'own';\r\n\r\n  manufacturer: Company | undefined;\r\n  manufacturers: Company[] = [];\r\n  isSaving = false;\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: { tasks: Task[] },\r\n    private dialogRef: MatDialogRef<ManufacturingCreateOrderComponent>,\r\n    private taskService: TaskService,\r\n    private employeeService: EmployeeService,\r\n    private companyService: CompanyService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.orders = this.data.tasks.map(task => new TaskOrder({task}));\r\n\r\n    this.orders.forEach(order => {\r\n      order.quantity = order.task.tasks.reduce((sum, task) => sum += task.required_quantity, 0);\r\n    });\r\n\r\n    this.checkTasksTechnicalEquipment();\r\n    this.getData();\r\n  }\r\n\r\n  checkTasksTechnicalEquipment() {\r\n    switch (this.production) {\r\n      case 'own':\r\n        this.activateTechnicalEquipments();\r\n        break;\r\n      case 'outsource':\r\n        this.deactivateTechnicalEquipment();\r\n        break;\r\n    }\r\n  }\r\n\r\n  activateTechnicalEquipments() {\r\n    this.orders.forEach(order => {\r\n      const hasTechnicalEquipment = order.task.needs_technical_equipment;\r\n      if (hasTechnicalEquipment) {\r\n        order.task.use_technical_equipment = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  deactivateTechnicalEquipment() {\r\n    this.orders.forEach(order => {\r\n      const hasTechnicalEquipment = order.task.needs_technical_equipment;\r\n      if (hasTechnicalEquipment) {\r\n        order.task.use_technical_equipment = false;\r\n      }\r\n    });\r\n  }\r\n\r\n  getData(): void {\r\n    this.companyService.get().subscribe(companies => {\r\n      this.manufacturers = companies.map(x => {\r\n        x.filter_id = 'A' + x.id + 'A';\r\n        return x;\r\n      });\r\n      this.manufacturers.unshift({name: 'All', filter_id: 'A', id: 0});\r\n    });\r\n  }\r\n\r\n  createOrder(): void {\r\n    //       \r\n\r\n    this.isSaving = true;\r\n\r\n    // const sendRequests: Array<Observable<any>> = [];\r\n\r\n    const data = {\r\n      order: {\r\n        /** OrderStatusThrough */\r\n        // statuses: [],\r\n        /** string($date) title: Created */\r\n        // created: new Date(),\r\n        /** string($date-time); title: Promised date; x-nullable: true */\r\n        // promised_date: new Date(),\r\n        /** string($date-time); title: Items reception date; x-nullable: true */\r\n        // items_reception_date: new Date(),\r\n        /** string; title: Comment; x-nullable: true */\r\n        // comment: '',\r\n        /** string; title: Type(PURCHASED == 1, OUTSOURCE == 2, OWN == 2) */\r\n        accounting_type: this.production === 'own' ? 3 : 2,\r\n        /** boolean; title: Is closed; */\r\n        is_closed: false,\r\n        /** integer; title: Supplier; x-nullable: true */\r\n        supplier: this.production === 'outsource' ? this.manufacturer?.id : null,\r\n        /** string; title: Currency; x-nullable: true */\r\n        // currency: ''\r\n        can_select_supplier: null\r\n      },\r\n      tasks: this.generateTasks()\r\n    };\r\n\r\n    if (this.production === 'outsource') {\r\n      data.order.can_select_supplier = !this.manufacturer?.id;\r\n    } else {\r\n      delete data.order.can_select_supplier;\r\n    }\r\n\r\n    this.taskService.createOutsource(data).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe({\r\n      next: () => {\r\n        this.data.tasks.forEach(task => task.status = 'Ordered');\r\n        this.dialogRef.close(true);\r\n      },\r\n      error: err => {\r\n        this.dialogRef.close(false);\r\n      }\r\n    });\r\n  }\r\n\r\n  generateTasks(): Task[] {\r\n    const tasks = [];\r\n\r\n    this.orders.forEach(order => {\r\n      /** Array<{\r\n       *   nomenclature\tinteger; title: Nomenclature\r\n       *   required_quantity integer; title: Required quantity\r\n       *  }>\r\n       */\r\n\r\n      order.task.tasks.forEach(t => {\r\n        const result = {\r\n          task: t.id,\r\n          materials: order.materials\r\n            .filter(materialRequest => materialRequest.warehouseProduct)\r\n            .map(materialRequest => ({\r\n              nomenclature: (materialRequest.warehouseProduct.nomenclature as Nomenclature).id,\r\n              required_quantity: materialRequest.quantity,\r\n            })),\r\n          use_technical_equipment: null\r\n        };\r\n        if (order.task.needs_technical_equipment) {\r\n          result.use_technical_equipment = order.task.use_technical_equipment;\r\n        }\r\n        tasks.push(result);\r\n      });\r\n    });\r\n\r\n    return tasks;\r\n  }\r\n\r\n  disable() {\r\n    let disable = false;\r\n\r\n    this.orders.forEach(order => {\r\n      if (order.useOwnMaterials) {\r\n        order.materials.forEach(material => {\r\n          if (!material.warehouseProduct || material.quantity < 1) {\r\n            disable = true;\r\n          }\r\n        })\r\n      }\r\n    })\r\n\r\n    return disable\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Create Order\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content class=\"overflow-auto\">\r\n  <div class=\"d-flex indicators col-12 mb-3\">\r\n    <div class=\"ol-6 mr-2\">\r\n      <input id=\"own\" type=\"radio\" value=\"own\" name=\"production\" [(ngModel)]=\"production\" (ngModelChange)=\"checkTasksTechnicalEquipment()\">\r\n      <label for=\"own\">Own production</label>\r\n    </div>\r\n    <div class=\"col-6\">\r\n      <input id=\"outsource\" class=\"radio-outsource\" type=\"radio\" value=\"outsource\" name=\"production\"\r\n             [(ngModel)]=\"production\" (ngModelChange)=\"checkTasksTechnicalEquipment()\">\r\n      <label for=\"outsource\">Outsource production</label>\r\n    </div>\r\n  </div>\r\n\r\n  <div *ngFor=\"let order of orders; let idx = index\" class=\"order-content\">\r\n\r\n    <div class=\"p-3\">\r\n      <h3 class=\"mb-3\">{{idx + 1}}. {{order.task.technology}} of {{order.task.list_product.nomenclature.name}}\r\n        <i>{{order.task.list_product.nomenclature.code}}</i> x {{order.quantity}}</h3>\r\n\r\n      <label class=\"add-material\">\r\n        <p-checkbox class=\"our-mat mr-2\" [(ngModel)]=\"order.useOwnMaterials\" [binary]=\"true\"></p-checkbox>\r\n        <span>Material required</span>\r\n      </label>\r\n\r\n      <div [class.mt-3]=\"order.useOwnMaterials\" class=\"warehouse-product\">\r\n        <pek-manufacturing-material-picker *ngIf=\"order.useOwnMaterials\" [(materials)]=\"order.materials\"></pek-manufacturing-material-picker>\r\n      </div>\r\n\r\n      <label *ngIf=\"order.task.needs_technical_equipment\" class=\"add-material\">\r\n        <p-checkbox class=\"our-mat mr-2\" [(ngModel)]=\"order.task.use_technical_equipment\" [binary]=\"true\"></p-checkbox>\r\n        <span>Use technical equipment</span>\r\n      </label>\r\n    </div>\r\n\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Create Order\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"disable()\"\r\n    (click)=\"createOrder()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {BehaviorSubject, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, finalize, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-manufacturing-picker-product',\r\n  templateUrl: './manufacturing-picker-product.component.html',\r\n  styleUrls: ['./manufacturing-picker-product.component.scss']\r\n})\r\nexport class ManufacturingPickerProductComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  isSaving = false;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [''],\r\n    code: [''],\r\n    type: [null],\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProduct: Nomenclature;\r\n\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  products$: Observable<Nomenclature[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.nomenclatureService.getForPagination(this.query)),\r\n    tap(response => this.productsCount = response.count),\r\n    map(response => response.results),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly adapterService: AdapterService,\r\n    private dialogRef: MatDialogRef<ManufacturingPickerProductComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ENomenclatureType }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.searchForm.get('type').patchValue(this.data.type);\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProduct = null;\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'paginated', value: true},\r\n      {name: 'page', value: this.currentPage},\r\n    ];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value) {\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onAddProduct() {\r\n    this.dialogRef.close(this.selectedProduct);\r\n  }\r\n\r\n  protected readonly ENomenclatureType = ENomenclatureType;\r\n}\r\n","<div class=\"modal-header\">\r\n  <ng-container *ngIf=\"data.type === ENomenclatureType.ASSEMBLY\">\r\n    <h2 class=\"modal-header__title\">Choice Assembling</h2>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"data.type === ENomenclatureType.MANUFACTURED\">\r\n    <h2 class=\"modal-header__title\">Manufactured Parts</h2>\r\n  </ng-container>\r\n</div>\r\n\r\n<form [formGroup]=\"searchForm\">\r\n  <div class=\"row\">\r\n    <div class=\"col-6\">\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name</label>\r\n        <input\r\n          pInputText\r\n          formControlName=\"name\"\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"name\"\r\n          (ngModelChange)=\"name$.next()\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"col-6\">\r\n      <div class=\"form-group\">\r\n        <label for=\"code\">Code</label>\r\n        <input\r\n          pInputText\r\n          formControlName=\"code\"\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"code\"\r\n          (ngModelChange)=\"code$.next()\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n<div class=\"table-pagination-preloader\">\r\n  <mat-dialog-content>\r\n    <p-table\r\n      #dt\r\n      selectionMode=\"single\"\r\n      dataKey=\"id\"\r\n      rowExpandMode=\"single\"\r\n      [rows]=\"10\"\r\n      [value]=\"products$ | async\"\r\n      [(selection)]=\"selectedProduct\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n          <th style=\"width: 25%\">Code</th>\r\n          <th style=\"width: 25%\">Name</th>\r\n          <th style=\"width: 30%\">Description</th>\r\n          <th style=\"width: 15%\" class=\"text-center\">UOM</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n        <tr\r\n          [pSelectableRow]=\"product\"\r\n          [pSelectableRowDisabled]=\"product.approved === '0' && product.type === '0'\"\r\n        >\r\n          <td style=\"width: 5%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n          <td style=\"width: 25%\">\r\n            {{ product.code }}\r\n          </td>\r\n          <td style=\"width: 25%\">\r\n                  <span\r\n                    *ngIf=\"product.approved === '0' && product.type === '0'\"\r\n                    class=\"badge badge_warning\"\r\n                    style=\"margin-right: 0.25rem\"\r\n                  >\r\n                    NEW\r\n                  </span>\r\n            {{ product.name }}\r\n          </td>\r\n          <td class=\"word-break\" style=\"width: 30%\">{{product.description}}</td>\r\n          <td class=\"text-center\" style=\"width: 15%\">\r\n            {{product.category?.unit_of_measure?.symbol ? product.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n          </td>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n\r\n    <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n    </div>\r\n  </mat-dialog-content>\r\n</div>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <div\r\n    class=\"paginator-wrapper\"\r\n    [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n  >\r\n    <p-paginator\r\n      #paginator\r\n      [rows]=\"10\"\r\n      [totalRecords]=\"productsCount\"\r\n      (onPageChange)=\"paginate($event)\"\r\n    >\r\n    </p-paginator>\r\n  </div>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Add\"\r\n    [disabled]=\"!selectedProduct\"\r\n    (click)=\"onAddProduct()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\nimport {FormArray, FormBuilder, FormGroup} from '@angular/forms';\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\nimport {TaskService} from '@shared/services/task.service';\nimport {Task} from '@shared/models/task';\nimport {finalize} from 'rxjs/operators';\n\n\n@Component({\n  selector: 'pek-manufacturing-split-plan',\n  templateUrl: './manufacturing-split-plan.component.html',\n  styleUrls: ['./manufacturing-split-plan.component.scss']\n})\nexport class ManufacturingSplitPlanComponent implements OnInit {\n\n  form: FormGroup = this.fb.group({\n    split_as_quantities: this.fb.array([])\n  });\n\n  task: Task;\n  isSaving = false;\n\n  constructor(\n    private readonly fb: FormBuilder,\n    private readonly taskService: TaskService,\n    private dialogRef: MatDialogRef<ManufacturingSplitPlanComponent>,\n    @Inject(MAT_DIALOG_DATA) public data: { task: Task }\n  ) {\n  }\n\n  get splitQuantities() {\n    return this.form.get('split_as_quantities') as FormArray;\n  }\n\n  ngOnInit(): void {\n    this.task = this.data.task;\n    this.addQuantity();\n  }\n\n  close() {\n    this.dialogRef.close(false);\n  }\n\n  addQuantity() {\n    this.splitQuantities.push(this.fb.control(0));\n  }\n\n  onSave() {\n    this.isSaving = true;\n    this.taskService.splitTasks(this.form.value, this.data.task.id).pipe(\n      finalize(() => this.isSaving = false)\n    ).subscribe(() => this.dialogRef.close(true));\n  }\n\n  disabled() {\n    return this.splitQuantities.value.reduce((v, sum) => sum += v, 0) !== this.data.task.required_quantity;\n  }\n\n  removeQuantity(idx: number) {\n    this.splitQuantities.removeAt(idx);\n  }\n}\n","<div class=\"modal-header\">\n  <h2 class=\"modal-header__title\">\n    Split {{task.list_product.nomenclature.name}} {{task.list_product.nomenclature.code}}\n  </h2>\n</div>\n\n<mat-dialog-content>\n  <form [formGroup]=\"form\">\n    <h3>Default Quantity: {{task.required_quantity}}</h3>\n    <p class=\"mt-2 mb-2\">Split: </p>\n\n    <ul formArrayName=\"split_as_quantities\" class=\"list\">\n      <li *ngFor=\"let quantity of splitQuantities.controls; let idx = index\">\n        <input [formControlName]=\"idx\" type=\"number\" pInputText>\n        <button class=\"ml-2\" (click)=\"removeQuantity(idx)\" [class.hidden]=\"idx === 0\">\n          <i class=\"pi pi-times\"></i>\n        </button>\n      </li>\n    </ul>\n\n    <button (click)=\"addQuantity()\" class=\"mt-3 add\"><i class=\"pi pi-plus\"></i> Add split</button>\n  </form>\n</mat-dialog-content>\n\n<mat-dialog-actions class=\"justify-content-between\">\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\n  <button\n    pButton\n    type=\"button\"\n    class=\"p-button-success\"\n    label=\"Split\"\n    [loading]=\"isSaving\"\n    [disabled]=\"disabled()\"\n    (click)=\"onSave()\"\n  ></button>\n</mat-dialog-actions>\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormArray, FormBuilder, Validators} from '@angular/forms';\r\nimport {TTCDisplayType} from '@shared/models/task';\r\nimport {UITask} from '../../components/manufacturing-chart/manufacturing-chart.component';\r\nimport {Employee} from '@shared/models/employee';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {Machine} from '../../models/machine';\r\nimport {SerialNumber} from '../../../procurement/models/invoice';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Router, UrlTree} from '@angular/router';\r\nimport {TaskService} from '@shared/services/task.service';\r\nimport {EmployeeService} from '@shared/services/employee.service';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {MachineService} from '../../services/machine.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {PlanningStatus} from '../../enums/planning-status.enum';\r\nimport {Task} from '@shared/models/task';\r\nimport {environment} from '@env/environment';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-manufacturing-task-edit',\r\n  templateUrl: './manufacturing-task-edit.component.html',\r\n  styleUrls: ['./manufacturing-task-edit.component.scss']\r\n})\r\nexport class ManufacturingTaskEditComponent implements OnInit {\r\n  form = this.fb.group({\r\n    start: [new Date(), Validators.required],\r\n    end: [new Date(), Validators.required],\r\n    ttc: [0],\r\n    ttc_display_type: [TTCDisplayType.MINUTES],\r\n    production: ['1'],\r\n    manufacturer: [null],\r\n    employees: this.fb.array([\r\n      this.fb.group({\r\n        employee: [null, Validators.required],\r\n        ttc: [0, Validators.required],\r\n        startDate: [<any>null, Validators.required],\r\n        ttc_display_type: [null, Validators.required],\r\n      }),\r\n    ]),\r\n    machines: this.fb.array([\r\n      this.fb.group({\r\n        machine: [null, Validators.required],\r\n        ttc: [0, Validators.required],\r\n        startDate: [<any>null, Validators.required],\r\n        ttc_display_type: [null, Validators.required],\r\n      }),\r\n    ]),\r\n    isLocked: [false],\r\n  });\r\n\r\n  isDeleting = false;\r\n  isSaving = false;\r\n\r\n  status = '';\r\n\r\n  isTTCUpdated = false;\r\n  isEndUpdated = false;\r\n\r\n  currentTaskIndex: number;\r\n\r\n  task: UITask;\r\n  employees: Employee[];\r\n  manufacturers: Company[];\r\n  machines: Machine[];\r\n\r\n  reservedSerialNumbers: SerialNumber[] = [];\r\n  futureSerialNumbers: SerialNumber[] = [];\r\n  productionSerialNumbers: SerialNumber[] = [];\r\n  ttcIn = 'hours';\r\n\r\n  get executors() {\r\n    return this.form.get('employees') as FormArray;\r\n  }\r\n\r\n  get exeMachines() {\r\n    return this.form.get('machines') as FormArray;\r\n  }\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ManufacturingTaskEditComponent>,\r\n    private fb: FormBuilder,\r\n    private router: Router,\r\n    private tasksService: TaskService,\r\n    private employeesService: EmployeeService,\r\n    private companiesService: CompanyService,\r\n    private modalService: ModalService,\r\n    private machinesService: MachineService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { task: any, tasks: UITask[], rootTask: Task },\r\n    private adapterService: AdapterService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.task = this.data.task;\r\n    console.log(this.task);\r\n\r\n    this.prepareDetailedStatus();\r\n\r\n    this.data.tasks.forEach(task => {\r\n      task.tasks.forEach(innerTask => {\r\n        if (innerTask.serial_numbers.length > 0) {\r\n          innerTask.serial_numbers.forEach(serial => {\r\n            if (!this.futureSerialNumbers.some(el => el.id === serial.id)) {\r\n              this.futureSerialNumbers.push(serial);\r\n            }\r\n          });\r\n        }\r\n        if (innerTask.reserved_on_stock_serial_numbers.length > 0) {\r\n          this.reservedSerialNumbers.push(...innerTask.reserved_on_stock_serial_numbers);\r\n        }\r\n\r\n        if (innerTask.reserved_in_production_serial_numbers.length > 0) {\r\n          this.productionSerialNumbers.push(...innerTask.reserved_in_production_serial_numbers);\r\n        }\r\n\r\n      //\r\n      });\r\n    });\r\n    this.data.tasks.sort((a, b) => a.start_date.getTime() - b.start_date.getTime());\r\n    this.currentTaskIndex = this.data.tasks.findIndex(t => t.id === this.task.id);\r\n    this.getData();\r\n    this.initValues();\r\n\r\n    this.data.task.serials = [];\r\n\r\n    this.data.tasks.forEach(task => {\r\n      task.serial_products = [];\r\n      task.tasks.forEach(t => {\r\n        t.serial_numbers.forEach(serial => this.data.task.serials.push(serial));\r\n        t.serial_products.forEach(sp => task.serial_products.push(sp));\r\n      });\r\n      // this.data.entity.serials = task.tasks[0].serial_numbers;\r\n    });\r\n\r\n    this.data.task.serials = this.adapterService.removeDuplicates(this.data.task.serials, x => x.id);\r\n  }\r\n\r\n  prepareDetailedStatus() {\r\n    if (this.task.status === 'Ordered') {\r\n      if (this.task.is_in_qc_wh) {\r\n        this.status = 'In QC-WH';\r\n      } else if (this.task.is_in_qc) {\r\n        this.status = 'In QC';\r\n      } else {\r\n        this.status = this.task.status;\r\n      }\r\n    } else {\r\n      this.status = this.task.status;\r\n    }\r\n  }\r\n\r\n  ttc_display_get_multiplier(): number {\r\n    switch (this.form.get('ttc_display_type').value) {\r\n      case TTCDisplayType.DAYS:\r\n        return 1440;\r\n      case TTCDisplayType.HOURS:\r\n        return 60;\r\n      case TTCDisplayType.MINUTES:\r\n        return 1;\r\n    }\r\n  }\r\n\r\n  ttcGetMultiplier(type: TTCDisplayType): number {\r\n    switch (type) {\r\n      case TTCDisplayType.DAYS:\r\n        return 1440;\r\n      case TTCDisplayType.HOURS:\r\n        return 60;\r\n      case TTCDisplayType.MINUTES:\r\n        return 1;\r\n    }\r\n  }\r\n\r\n  onOpenProtocolInfo(protocol, paragraphs, serial) {\r\n    const serialNumber = serial.type_with_number ? serial.type_with_number : serial.id;\r\n    // this.modalService.taskProtocolInfo(protocol, paragraphs, serialNumber).subscribe();\r\n  }\r\n\r\n  getData(): void {\r\n    this.employeesService.get().subscribe(employees => {\r\n      this.employees = employees.map(employee => {\r\n        return {\r\n          ...employee,\r\n          fullName: `${employee.first_name} ${employee.last_name}`,\r\n        };\r\n      });\r\n\r\n      this.initEmployees();\r\n    });\r\n\r\n    this.machinesService.get().subscribe(machines => {\r\n      this.machines = machines;\r\n      this.initMachines();\r\n    });\r\n  }\r\n\r\n  private initValues() {\r\n    this.form.get('start').setValue(new Date(this.task.start_date.getTime()));\r\n    this.form.get('end').setValue(new Date(this.task.end_date.getTime()));\r\n    this.form.get('production').setValue(this.task.production_type);\r\n    this.form.get('isLocked').setValue(this.task.is_locked);\r\n    this.form.get('ttc_display_type').setValue(this.task.ttc_display_type ? this.task.ttc_display_type : TTCDisplayType.MINUTES);\r\n    this.form.get('ttc').setValue(((this.task.end_date.getTime() -\r\n      this.task.start_date.getTime()) / 1000 / 60) / this.ttc_display_get_multiplier());\r\n\r\n    const rootStatus = this.data.rootTask.planning_status;\r\n    const rootPlanProductionId = this.data.rootTask.list_product.id;\r\n    if (rootStatus === PlanningStatus.WAITING_CONFIRMATION) {\r\n      this.form.get('start').disable();\r\n      this.form.get('end').disable();\r\n      this.form.get('ttc').disable();\r\n    }\r\n\r\n    if (rootStatus === PlanningStatus.PLANNED && rootPlanProductionId === this.data.task.list_product.id) {\r\n      this.form.get('start').disable();\r\n      this.form.get('end').disable();\r\n      this.form.get('ttc').disable();\r\n    }\r\n  }\r\n\r\n  private initEmployees() {\r\n    if (this.task.employees.length > 0) {\r\n\r\n      //   \r\n      (this.form.get('employees') as FormArray).removeAt(0);\r\n\r\n      this.task.employees.forEach(employee => {\r\n        if (typeof employee.employee === 'number') {\r\n          // @ts-ignore\r\n          employee.employee = (this.employees.find(emp => emp.id === employee.employee));\r\n        }\r\n\r\n        (this.form.get('employees') as FormArray).push(this.fb.group({\r\n          employee: [employee.employee.id, Validators.required],\r\n          ttc: [this.adapterService.timeToMinutesAdapter(employee.duration) /\r\n          this.ttc_display_get_multiplier(), Validators.required],\r\n          startDate: [new Date(employee.start), Validators.required],\r\n          ttc_display_type: [this.form.get('ttc_display_type').value, Validators.required],\r\n        }));\r\n      });\r\n      // (this.form.get('employees') as FormArray).controls.forEach(control => {\r\n      //   if (this.data.rootTask.planning_status === PlanningStatus.WAITING_CONFIRMATION) {\r\n      //     control.get('startDate').disable();\r\n      //     control.get('ttc').disable();\r\n      //   }\r\n      // });\r\n    }\r\n  }\r\n\r\n  private initMachines() {\r\n    if (this.task.machines.length > 0) {\r\n\r\n      //   \r\n      (this.form.get('machines') as FormArray).removeAt(0);\r\n\r\n      this.task.machines.forEach(machine => {\r\n        if (typeof machine.machine === 'number') {\r\n          // @ts-ignore\r\n          machine.machine = (this.machines.find(m => m.id === machine.machine));\r\n        }\r\n\r\n        (this.form.get('machines') as FormArray).push(this.fb.group({\r\n          machine: [machine.machine.id, Validators.required],\r\n          ttc: [this.adapterService.timeToMinutesAdapter(machine.duration) /\r\n          this.ttc_display_get_multiplier(), Validators.required],\r\n          startDate: [new Date(machine.start), Validators.required],\r\n          ttc_display_type: [this.form.get('ttc_display_type').value, Validators.required],\r\n        }));\r\n      });\r\n\r\n      // (this.form.get('machines') as FormArray).controls.forEach(control => {\r\n      //   if (this.data.rootTask.planning_status === PlanningStatus.WAITING_CONFIRMATION) {\r\n      //     control.get('startDate').disable();\r\n      //     control.get('ttc').disable();\r\n      //   }\r\n      // });\r\n    }\r\n  }\r\n\r\n  addExecutor() {\r\n    (this.form.get('employees') as FormArray).push(this.fb.group({\r\n      employee: [null, Validators.required],\r\n      ttc: [0, Validators.required],\r\n      startDate: [null, Validators.required],\r\n    }));\r\n  }\r\n\r\n  addExecutionMachine() {\r\n    (this.form.get('machines') as FormArray).push(this.fb.group({\r\n      machine: [null, Validators.required],\r\n      ttc: [0, Validators.required],\r\n      startDate: [null, Validators.required],\r\n    }));\r\n  }\r\n\r\n  removeExecutor(index: number) {\r\n    (this.form.get('employees') as FormArray).removeAt(index);\r\n  }\r\n\r\n  removeExecutionMachine(index: number) {\r\n    (this.form.get('machines') as FormArray).removeAt(index);\r\n  }\r\n\r\n  getNewDateFromCalendar() {\r\n    this.form.get('ttc').setValue(((this.form.get('end').value).getTime() -\r\n      (((this.form.get('start').value).getTime()) / 60 / 1000) * this.ttc_display_get_multiplier()));\r\n    this.isTTCUpdated = true;\r\n\r\n    setTimeout(() => {\r\n      this.isTTCUpdated = false;\r\n    }, 1000);\r\n  }\r\n\r\n  getNewDateFromInput() {\r\n    this.form.get('end').setValue(new Date(((this.form.get('start').value).getTime() +\r\n      (this.form.get('ttc').value * 60 * 1000) * this.ttc_display_get_multiplier())));\r\n    this.isEndUpdated = true;\r\n\r\n    setTimeout(() => {\r\n      this.isEndUpdated = false;\r\n    }, 1000);\r\n  }\r\n\r\n  save(): void {\r\n    //       \r\n    // const sentRequests: Array<Observable<any>> = [];\r\n\r\n    this.isSaving = true;\r\n\r\n    this.applyFormToTask(this.task);\r\n    const data = this.getTaskData(this.task);\r\n    this.tasksService.update(this.task, data).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe();\r\n    this.task.is_planned = true;\r\n\r\n    // sentRequests.push(this.tasksService.update(this.task, data));\r\n    // concat(...sentRequests).subscribe();\r\n    this.dialogRef.close({\r\n      start: this.form.get('start').value,\r\n      end: this.form.get('end').value,\r\n      ttc_display_type: this.form.get('ttc_display_type').value\r\n    });\r\n  }\r\n\r\n  private applyFormToTask(task: Task) {\r\n    //      ..     \r\n\r\n    //    , ..    \r\n    // if (task.list_product.nomenclature.type !== ENomenlatureType.PURCHASED) {\r\n    //   task.start_date = this.form.get('start').value;\r\n    //   task.end_date = this.form.get('end').value;\r\n    // }\r\n    task.ttc_display_type = this.form.get('ttc_display_type').value;\r\n    task.production_type = <any>this.form.get('production').value;\r\n\r\n    //       \r\n    if (this.data.rootTask.planning_status === PlanningStatus.WAITING_CONFIRMATION) {\r\n      this.form.get('start').enable();\r\n      this.form.get('end').enable();\r\n      this.form.get('ttc').enable();\r\n    }\r\n    // (this.form.get('employees') as FormArray).controls.forEach(control => {\r\n    //   if (this.data.rootTask.planning_status === PlanningStatus.WAITING_CONFIRMATION) {\r\n    //     control.get('startDate').enable();\r\n    //     control.get('ttc').enable();\r\n    //   }\r\n    // });\r\n    // (this.form.get('machines') as FormArray).controls.forEach(control => {\r\n    //   if (this.data.rootTask.planning_status === PlanningStatus.WAITING_CONFIRMATION) {\r\n    //     control.get('startDate').enable();\r\n    //     control.get('ttc').enable();\r\n    //   }\r\n    // });\r\n\r\n    task.employees = <any>this.form.get('employees').value.map(employeeGroup => ({\r\n      employee: employeeGroup.employee,\r\n      duration: employeeGroup.ttc * this.ttc_display_get_multiplier(),\r\n      start: employeeGroup.startDate,\r\n      end: employeeGroup.employee ? new Date((employeeGroup.startDate.getTime() +\r\n        ((employeeGroup.ttc * 60 * 1000) * this.ttc_display_get_multiplier()))) : null,\r\n    })).filter(emp => emp.employee);\r\n\r\n    task.machines = <any>this.form.get('machines').value.map(machineGroup => ({\r\n      machine: machineGroup.machine,\r\n      duration: machineGroup.ttc * this.ttc_display_get_multiplier(),\r\n      start: machineGroup.startDate,\r\n      end: machineGroup.machine ? new Date((machineGroup.startDate.getTime() +\r\n        ((machineGroup.ttc * 60 * 1000) * this.ttc_display_get_multiplier()))) : null,\r\n    })).filter(m => m.machine);\r\n\r\n    task.is_locked = this.form.get('isLocked').value;\r\n  }\r\n\r\n  private getTaskData(task: Task): Partial<Task> {\r\n    const data: Partial<Task> = {\r\n      id: task.id,\r\n    };\r\n\r\n    // data.start_date = task.start_date;\r\n    // data.end_date = task.end_date;\r\n    data.production_type = task.production_type;\r\n    data.employees = task.employees.filter(emp => emp.employee);\r\n    data.machines = task.machines.filter(m => m.machine);\r\n    data.is_locked = task.is_locked;\r\n    data.ttc_display_type = task.ttc_display_type;\r\n    return data;\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  deleteTask(): void {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isDeleting = true;\r\n        this.tasksService.delete(this.task).pipe(\r\n          finalize(() => this.isDeleting = false)\r\n        ).subscribe(() => {\r\n          this.dialogRef.close();\r\n        });\r\n      }\r\n    });\r\n  }\r\n  goToOrder() {\r\n    let url: UrlTree | string = '';\r\n    if ((this.task.status === 'Ordered' || this.task.status === 'On stock' || this.task.status === 'Rework') &&\r\n      this.task.created_order.accounting_type === 3) {\r\n      url = this.router.createUrlTree(['manufacturing', 'orders', 'order', this.task.created_order.id]);\r\n    } else if ((this.task.status === 'Ordered' || this.task.status === 'On stock' || this.task.status === 'Rework') &&\r\n      this.task.created_order.accounting_type === 2) {\r\n      url =  'outsourcing/chains/order/' + this.task.created_order.id;\r\n    } else if ((this.task.status === 'Ordered' || this.task.status === 'On stock' || this.task.status === 'Rework') &&\r\n      this.task.created_order.accounting_type === 1) {\r\n      url = 'procurement/chains/order/' + this.task.created_order.id;\r\n    }\r\n    // console.log(url);\r\n    // this.router.navigate([url])\r\n    //\r\n    window.open(url.toString(), '_blank');\r\n  }\r\n\r\n  showError() {\r\n    if (this.form.get('start').value.getTime() > this.form.get('end').value.getTime()) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  showErrorTasks() {\r\n    if (this.currentTaskIndex > 0 && this.form.get('start').value.getTime() <\r\n      this.data.tasks[this.currentTaskIndex - 1].end_date.getTime()) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  onAddTechnology() {\r\n    this.tasksService.addTechnologyToPlanModal(this.task).subscribe(response => {\r\n      if (response) {\r\n        this.dialogRef.close('reload');\r\n      }\r\n    });\r\n  }\r\n\r\n  changedTTCType() {\r\n    this.form.get('ttc').setValue(((this.form.get('end').value.getTime() -\r\n      this.form.get('start').value.getTime()) / 1000 / 60) / this.ttc_display_get_multiplier());\r\n\r\n    this.executors.controls.forEach(employee => {\r\n      const currentTTCType = employee.get('ttc_display_type').value;\r\n      const selectedTTCType = this.form.get('ttc_display_type').value;\r\n      if (+currentTTCType !== +selectedTTCType) {\r\n        if (+selectedTTCType > +currentTTCType) {\r\n          employee.get('ttc').setValue((employee.get('ttc').value *\r\n            this.ttcGetMultiplier(currentTTCType)) / this.ttc_display_get_multiplier());\r\n        } else {\r\n          employee.get('ttc').setValue((employee.get('ttc').value *\r\n            this.ttcGetMultiplier(currentTTCType)) / this.ttc_display_get_multiplier());\r\n        }\r\n      }\r\n      employee.get('ttc_display_type').setValue(this.form.get('ttc_display_type').value);\r\n    });\r\n\r\n    this.exeMachines.controls.forEach(machine => {\r\n      const currentTTCType = machine.get('ttc_display_type').value;\r\n      const selectedTTCType = this.form.get('ttc_display_type').value;\r\n      if (+currentTTCType !== +selectedTTCType) {\r\n        if (+selectedTTCType > +currentTTCType) {\r\n          machine.get('ttc').setValue((machine.get('ttc').value *\r\n            this.ttcGetMultiplier(currentTTCType)) / this.ttc_display_get_multiplier());\r\n        } else {\r\n          machine.get('ttc').setValue((machine.get('ttc').value *\r\n            this.ttcGetMultiplier(currentTTCType)) / this.ttc_display_get_multiplier());\r\n        }\r\n      }\r\n      machine.get('ttc_display_type').setValue(this.form.get('ttc_display_type').value);\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Edit Task {{task.technology}} of {{task.list_product.nomenclature.name}}\r\n    ({{task.list_product.nomenclature.code}})\r\n  </h2>\r\n  <div class=\"status\">Status: {{status}}</div>\r\n</div>\r\n\r\n<form [formGroup]=\"form\" (ngSubmit)=\"save()\">\r\n\r\n  <mat-dialog-content class=\"mb-3 overflow-visible\">\r\n    <div class=\"wrapper task-edit\">\r\n      <div class=\"row time-wrap\">\r\n        <div class=\"col-5\">\r\n          <div class=\"form-group\">\r\n            <label for=\"start\"> Start </label>\r\n            <p-calendar\r\n              [class.disabled]=\"task.list_product.nomenclature.type === '0'\"\r\n              formControlName=\"start\"\r\n              (onSelect)=\"getNewDateFromCalendar()\"\r\n              id=\"start\" dataType=\"date\"\r\n              [showTime]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n            ></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-5\">\r\n          <div class=\"form-group\">\r\n            <label for=\"end_date\"> End </label>\r\n            <p-calendar\r\n              [class.disabled]=\"task.list_product.nomenclature.type === '0'\"\r\n              [class.p-input-green]=\"isEndUpdated\"\r\n              formControlName=\"end\"\r\n              id=\"end_date\"\r\n              dataType=\"date\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [showTime]=\"true\"\r\n              [readonlyInput]=\"true\"\r\n              (onSelect)=\"getNewDateFromCalendar()\"\r\n            ></p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group form-ttc\">\r\n            <label for=\"total-ttc\" class=\" total-ttc\"\r\n                   [title]=\"'Time to complete (in ' + ttcIn + ')'\">Total\r\n              TTC</label>\r\n            <div class=\"ml-auto\">\r\n              <input\r\n                pInputText\r\n                [class.error-bord]=\"showError()\"\r\n                [class.input-green]=\"isTTCUpdated\"\r\n                [class.disabled]=\"task.list_product.nomenclature.type === '0'\"\r\n                formControlName=\"ttc\"\r\n                id=\"total-ttc\"\r\n                class=\"form-control total-ttc\"\r\n                type=\"number\"\r\n                step=\"10\"\r\n                placeholder=\"Minutes\"\r\n                (input)=\"getNewDateFromInput()\"\r\n              >\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <span *ngIf=\"showError()\" class=\"error\">The start date cannot be greater than the end date, Total TTC cannot be negative</span>\r\n      <span *ngIf=\"showErrorTasks()\" class=\"error\">\r\n        Task \"{{data.tasks[currentTaskIndex].technology}}\r\n        \" can't start before task \"{{data.tasks[currentTaskIndex - 1].technology}}\", <br>\r\n        \"{{data.tasks[currentTaskIndex - 1].technology}}\r\n        \" ending {{data.tasks[currentTaskIndex - 1].end_date | date: 'dd.MM.yy HH.mm'}}\r\n      </span>\r\n\r\n      <div class=\"row indicators mt-2 mb-4\" *ngIf=\"task.list_product.nomenclature.type !== '0'\">\r\n        <div class=\"col-6\">\r\n          <input id=\"own\" type=\"radio\" value=\"1\" name=\"production\" formControlName=\"production\">\r\n          <label for=\"own\">Own production</label>\r\n        </div>\r\n        <div class=\"col-6\">\r\n          <input id=\"outsource\" type=\"radio\" value=\"0\" name=\"production\" formControlName=\"production\">\r\n          <label for=\"outsource\">Outsource production</label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"row indicators mt-2 mb-4\" *ngIf=\"task.list_product.nomenclature.type !== '0'\">\r\n        <div class=\"col-2\">\r\n          Display TTC In:\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <input id=\"minutes\" type=\"radio\" value=\"0\" name=\"ttc_display_type\" formControlName=\"ttc_display_type\"\r\n                 (ngModelChange)=\"changedTTCType()\">\r\n          <label for=\"minutes\">Minutes</label>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <input id=\"hours\" type=\"radio\" value=\"1\" name=\"ttc_display_type\" formControlName=\"ttc_display_type\"\r\n                 (ngModelChange)=\"changedTTCType()\">\r\n          <label for=\"hours\">Hours</label>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <input id=\"days\" type=\"radio\" value=\"2\" name=\"ttc_display_type\" formControlName=\"ttc_display_type\"\r\n                 (ngModelChange)=\"changedTTCType()\">\r\n          <label for=\"days\">Days</label>\r\n        </div>\r\n        <div class=\"col-4\"></div>\r\n      </div>\r\n      <div *ngIf=\"form.get('production').value === '1' && task.list_product.nomenclature.type !== '0'\">\r\n        <p-table selectionMode=\"single\" rowGroupMode=\"rowspan\" [scrollable]=\"true\"\r\n                 scrollHeight=\"calc(100vh - 335px)\" frozenWidth=\"1000px\" class=\"mt-2 mb-3\">\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"own-production p-3\">\r\n              <div class=\"own-production__wrap\">\r\n                <div class=\"own-production__employee\" formArrayName=\"employees\">\r\n                  <div class=\"own-production__row\" *ngFor=\"let executor of executors.controls; let idx = index\"\r\n                       [formGroupName]=\"idx\">\r\n                    <div class=\"own-production__col employee\">\r\n                      <label class=\"mb-2\" *ngIf=\"idx === 0\">Employee</label>\r\n                      <p-dropdown [filter]=\"true\" [options]=\"employees\"\r\n                                  name=\"employees\" optionValue=\"id\" formControlName=\"employee\"\r\n                                  optionLabel=\"fullName\" placeholder=\"No employee selected\">\r\n                      </p-dropdown>\r\n                    </div>\r\n                    <div class=\"own-production__col date\">\r\n                      <label class=\"mb-2\" *ngIf=\"idx === 0\">Start date</label>\r\n                      <p-calendar\r\n                        formControlName=\"startDate\"\r\n                        dataType=\"date\"\r\n                        dateFormat=\"dd/mm/yy\"\r\n                        [showTime]=\"true\"\r\n                        [readonlyInput]=\"true\"\r\n                        placeholder=\"Start date\"\r\n                      ></p-calendar>\r\n                    </div>\r\n                    <div class=\"own-production__col time\">\r\n                      <label\r\n                        class=\"flex-0\" class=\"mb-2\" [title]=\"'Employee time to complete (in' + ttcIn + ')'\"\r\n                        *ngIf=\"idx === 0\"\r\n                      >\r\n                        TTC\r\n                      </label>\r\n                      <div class=\"ml-auto\">\r\n                        <input type=\"text\" pInputText class=\"form-control\" formControlName=\"ttc\">\r\n                      </div>\r\n                    </div>\r\n                    <button class=\"btn-remove\" (click)=\"removeExecutor(idx)\">\r\n                      <i class=\"pi pi-times\"></i>\r\n                    </button>\r\n                  </div>\r\n                  <a class=\"btn-add\" (click)=\"addExecutor()\">\r\n                    <i class=\"pi pi-plus\"></i>\r\n                    Add employee\r\n                  </a>\r\n                </div>\r\n\r\n                <div class=\"own-production__tool\" formArrayName=\"machines\">\r\n                  <div class=\"own-production__row\" *ngFor=\"let machine of exeMachines.controls; let idx = index\"\r\n                       [formGroupName]=\"idx\">\r\n                    <div class=\"own-production__col machine\">\r\n                      <label class=\"mb-2\" *ngIf=\"idx === 0\">Machine</label>\r\n                      <p-dropdown [filter]=\"true\" [options]=\"machines\"\r\n                                  name=\"tools\" optionValue=\"id\" formControlName=\"machine\"\r\n                                  optionLabel=\"name\" placeholder=\"No machine selected\">\r\n                      </p-dropdown>\r\n                    </div>\r\n                    <div class=\"own-production__col date\">\r\n                      <label class=\"mb-2\" *ngIf=\"idx === 0\">Start date</label>\r\n                      <p-calendar\r\n                        formControlName=\"startDate\"\r\n                        dataType=\"date\"\r\n                        dateFormat=\"dd/mm/yy\"\r\n                        [showTime]=\"true\"\r\n                        [readonlyInput]=\"true\"\r\n                        placeholder=\"Start date\"\r\n                      ></p-calendar>\r\n                    </div>\r\n                    <div class=\"own-production__col time\">\r\n                      <label class=\"flex-0\" class=\"mb-2\" [title]=\"'Machine time to complete (in ' + ttcIn + ')'\"\r\n                             *ngIf=\"idx === 0\">TTC</label>\r\n                      <div class=\"ml-auto\">\r\n                        <input formControlName=\"ttc\" type=\"text\" class=\"form-control\" pInputText>\r\n                      </div>\r\n                    </div>\r\n                    <button class=\"btn-remove\" (click)=\"removeExecutionMachine(idx)\">\r\n                      <i class=\"pi pi-times\"></i>\r\n                    </button>\r\n                  </div>\r\n                  <a class=\"btn-add\" (click)=\"addExecutionMachine()\">\r\n                    <i class=\"pi pi-plus\"></i>\r\n                    Add machine\r\n                  </a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row indicators mt-4 mb-4\">\r\n      <div class=\"col-6\">\r\n        <input formControlName=\"isLocked\" type=\"checkbox\" id=\"locked\">\r\n        <label for=\"locked\">Locked</label>\r\n      </div>\r\n      <div class=\"col-6\" *ngIf=\"task.created_order\">\r\n        <span class=\"mr-2\">Order:</span>\r\n        <a class=\"go-order\" (click)=\"goToOrder()\">\r\n          {{task.created_order.id}}\r\n        </a>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row mb-3\"\r\n         *ngIf=\"(reservedSerialNumbers.length > 0 || futureSerialNumbers.length > 0 ) && data.task.list_product.nomenclature.bulk_or_serial === '1'\">\r\n      <div class=\"col-12\">\r\n        <p-accordion class=\"serial-numbers\">\r\n          <p-accordionTab header=\"Serial Numbers\">\r\n            <ng-container *ngIf=\"reservedSerialNumbers.length > 0\">\r\n              <p>Reserved Serial Numbers:</p>\r\n              <ul class=\"serial-numbers__list\">\r\n                <li *ngFor=\"let serial of reservedSerialNumbers; let idx = index\">\r\n                  {{idx + 1}}. {{serial.type_with_number ? serial.type_with_number : serial.id}}\r\n                </li>\r\n              </ul>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"futureSerialNumbers.length > 0\">\r\n              <p>Future Serial Numbers:</p>\r\n              <ul class=\"serial-numbers__list\">\r\n                <li *ngFor=\"let serial of futureSerialNumbers; let idx = index\">\r\n                  {{idx + 1}}. {{serial.type_with_number ? serial.type_with_number : serial.id}}\r\n                </li>\r\n              </ul>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"productionSerialNumbers.length > 0\">\r\n              <p>Serial Numbers Reserved From Production:</p>\r\n              <ul class=\"serial-numbers__list\">\r\n                <li *ngFor=\"let serial of productionSerialNumbers; let idx = index\">\r\n                  {{idx + 1}}. {{serial.type_with_number ? serial.type_with_number : serial.id}}\r\n                </li>\r\n              </ul>\r\n            </ng-container>\r\n          </p-accordionTab>\r\n        </p-accordion>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <div class=\"empty mb-3\"\r\n         *ngIf=\"(reservedSerialNumbers.length === 0 && futureSerialNumbers.length === 0) && data.task.list_product.nomenclature.bulk_or_serial === '1'\">\r\n      Serial Numbers not available\r\n    </div>\r\n\r\n    <div class=\"row mb-3\"\r\n         *ngIf=\"data.task.serial_products.length > 0 && data.task.status === '4' && data.task.list_product.nomenclature.bulk_or_serial === '1'\">\r\n      <div class=\"col-12\">\r\n        <p-accordion class=\"serial-numbers\">\r\n          <p-accordionTab header=\"Serial Numbers\">\r\n            <ul class=\"serial-numbers__list\">\r\n              <li class=\"serial-numbers__heading\">\r\n                <div class=\"serial-numbers__col serial-numbers__col_0\">#</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_1\">Invoice</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_2\">Order</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_3\">Protocol</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_4\">Serial Number</div>\r\n              </li>\r\n              <li *ngFor=\"let product of data.task.serial_products; let idx = index\">\r\n                <div class=\"serial-numbers__col serial-numbers__col_0\">{{idx + 1}}</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_1\" *ngIf=\"!product.invoice\">None</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_1\"\r\n                     *ngIf=\"product.invoice\">{{product?.invoice?.self_serial_number}}</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_2\" *ngIf=\"!product.order\">None</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_2\" *ngIf=\"product.order\">{{product.order}}</div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_3\" *ngIf=\"!product.warehouse_product_qc_protocol\">\r\n                  None\r\n                </div>\r\n                <div class=\"serial-numbers__col serial-numbers__col_3\" *ngIf=\"product.warehouse_product_qc_protocol\">\r\n                  <a\r\n                    (click)=\"onOpenProtocolInfo(product.warehouse_product_qc_protocol.protocol, product.warehouse_product_qc_protocol.paragraphs, product.serial_number)\">\r\n                    {{product?.warehouse_product_qc_protocol.protocol.name}}\r\n                  </a>\r\n                </div>\r\n                <div\r\n                  class=\"serial-numbers__col serial-numbers__col_4\">{{product.serial_number.type_with_number ? product.serial_number.type_with_number : product.serial_number.id}}</div>\r\n              </li>\r\n            </ul>\r\n          </p-accordionTab>\r\n        </p-accordion>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"empty\"\r\n         *ngIf=\"data.task.serial_products.length === 0 && data.task.status === '4' && data.task.list_product.nomenclature.bulk_or_serial === '1'\">\r\n      Serial Products not available\r\n    </div>\r\n\r\n    <button\r\n      type=\"button\"\r\n      (click)=\"onAddTechnology()\"\r\n      icon=\"pi pi-plus\"\r\n      label=\"Add Technology\"\r\n      pButton\r\n      *ngIf=\"this.task?.production?.product?.nomenclature?.type !== '0'\"\r\n    >\r\n    </button>\r\n\r\n  </mat-dialog-content>\r\n  <mat-dialog-actions class=\" d-flex justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <div class=\"d-flex\">\r\n      <button type=\"button\" pButton class=\"p-button-danger mr-3\" (click)=\"deleteTask()\" label=\"Delete\"\r\n              [loading]=\"isDeleting\"></button>\r\n\r\n      <button\r\n        pButton\r\n        type=\"submit\"\r\n        [disabled]=\"showError() || showErrorTasks()\"\r\n        label=\"Save\"\r\n        class=\"p-button-success\"\r\n        [loading]=\"isSaving\"\r\n      >\r\n      </button>\r\n    </div>\r\n  </mat-dialog-actions>\r\n</form>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormArray, FormBuilder, Validators} from '@angular/forms';\r\nimport {UITask} from '../../components/manufacturing-chart/manufacturing-chart.component';\r\nimport {Employee} from '@shared/models/employee';\r\nimport {Machine} from '../../models/machine';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {TaskService} from '@shared/services/task.service';\r\nimport {EmployeeService} from '@shared/services/employee.service';\r\nimport {MachineService} from '../../services/machine.service';\r\nimport {Task} from '@shared/models/task';\r\nimport {concat, finalize, Observable} from 'rxjs';\r\nimport {ENomenclatureType} from '@shared/models/nomenclature';\r\nimport {ShiftTypes} from '../../enums/shift-types.enum';\r\n\r\n@Component({\r\n  selector: 'pek-manufacturing-tasks-edit',\r\n  templateUrl: './manufacturing-tasks-edit.component.html',\r\n  styleUrls: ['./manufacturing-tasks-edit.component.scss']\r\n})\r\nexport class ManufacturingTasksEditComponent implements OnInit {\r\n  form = this.fb.group({\r\n    time: this.fb.group({\r\n      /** Date */\r\n      start: [new Date(), Validators.required],\r\n      /** Date */\r\n      end: [new Date(), Validators.required],\r\n      /** Hours */\r\n      ttc: [0],\r\n    }),\r\n    production: this.fb.group({\r\n      /** '0' -outsource, 1 - own */\r\n      production: [<any>'1'],\r\n      /** id of manufacturer */\r\n      employees: this.fb.array([\r\n        this.fb.group({\r\n          employee: [null, Validators.required],\r\n          ttc: [0, Validators.required],\r\n          startDate: [<any>null, Validators.required],\r\n        }),\r\n      ]),\r\n      machines: this.fb.array([\r\n        this.fb.group({\r\n          machine: [null, Validators.required],\r\n          ttc: [0, Validators.required],\r\n          startDate: [<any>null, Validators.required],\r\n        }),\r\n      ]),\r\n    }),\r\n    flags: this.fb.group({\r\n      isLocked: [false],\r\n    }),\r\n    shiftBy: this.fb.group(({\r\n      amount: [],\r\n      type: []\r\n    }))\r\n  });\r\n\r\n  tasks: UITask[] = [];\r\n\r\n  //  \r\n  isHighlightTime = false;\r\n  isHighlightProduction = false;\r\n  isHighlightFlags = false;\r\n  isHighlightShiftBy = false;\r\n\r\n  employees: Employee[] = [];\r\n  machines: Machine[] = [];\r\n\r\n  isTTCUpdated = false;\r\n  isEndUpdated = false;\r\n  isSaving = false;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: { tasks: UITask[] },\r\n    private dialogRef: MatDialogRef<ManufacturingTasksEditComponent>,\r\n    private tasksService: TaskService,\r\n    private employeesService: EmployeeService,\r\n    private machinesService: MachineService,\r\n  ) {\r\n  }\r\n\r\n  get applyTime(): boolean {\r\n    return this.form.get('time').enabled;\r\n  }\r\n\r\n  set applyTime(value: boolean) {\r\n    // this.form.get('time').reset();\r\n    if (value) {\r\n      this.form.get('time').enable();\r\n    } else {\r\n      this.form.get('time').disable();\r\n    }\r\n  }\r\n\r\n  get applyProduction(): boolean {\r\n    return this.form.get('production').enabled;\r\n  }\r\n\r\n  set applyProduction(value: boolean) {\r\n    // this.form.get('production').reset();\r\n    if (value) this.form.get('production').enable();\r\n    else this.form.get('production').disable();\r\n  }\r\n\r\n  get applyFlags(): boolean {\r\n    return this.form.get('flags').enabled;\r\n  }\r\n\r\n  set applyFlags(value: boolean) {\r\n    // this.form.get('flags').reset();\r\n    if (value) {\r\n      this.form.get('flags').enable();\r\n    } else {\r\n      this.form.get('flags').disable();\r\n    }\r\n  }\r\n\r\n  get applyShiftBy(): boolean {\r\n    return this.form.get('shiftBy').enabled;\r\n  }\r\n\r\n  set applyShiftBy(value: boolean) {\r\n    if (value) {\r\n      this.form.get('shiftBy').enable();\r\n    } else {\r\n      this.form.get('shiftBy').disable();\r\n    }\r\n  }\r\n\r\n  get executors() {\r\n    return this.form.get('production').get('employees') as FormArray;\r\n  }\r\n\r\n  get exeMachines() {\r\n    return this.form.get('production').get('machines') as FormArray;\r\n  }\r\n\r\n  get taskDurationInMinutes(): number {\r\n    return this.form.get('time').get('ttc').value * 60;\r\n  }\r\n\r\n  set taskDurationInMinutes(value: number) {\r\n    this.form.get('time').get('ttc').setValue(value / 60);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.disable();\r\n    this.data.tasks.forEach(task => this.tasks.push(task));\r\n    this.initDates();\r\n    this.getData();\r\n  }\r\n\r\n  getData(): void {\r\n    this.employeesService.get().subscribe(employees => {\r\n      this.employees = employees.map(employee => {\r\n        return {\r\n          ...employee,\r\n          fullName: `${employee.first_name} ${employee.last_name}`,\r\n        };\r\n      });\r\n    });\r\n\r\n    this.machinesService.get().subscribe(machines => this.machines = machines);\r\n  }\r\n\r\n  save(): void {\r\n    //       \r\n    const sentRequests: Array<Observable<any>> = [];\r\n    this.isSaving = true;\r\n\r\n    this.tasks.forEach(task => {\r\n\r\n      this.applyFormToTask(task);\r\n      const data = this.getTaskData(task);\r\n\r\n      sentRequests.push(this.tasksService.update(task, data));\r\n    });\r\n    concat(...sentRequests).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe();\r\n\r\n    this.dialogRef.close({\r\n      start: this.form.get('time').enabled ? this.form.get('time').get('start').value : null,\r\n      end: this.form.get('time').enabled ? this.form.get('time').get('end').value : null,\r\n      shiftByAmount: this.form.get('shiftBy').enabled ? this.form.get('shiftBy').get('amount').value : null,\r\n      shiftByType: this.form.get('shiftBy').enabled ? this.form.get('shiftBy').get('type').value : null,\r\n    });\r\n  }\r\n\r\n  close(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  getNewDateFromCalendar() {\r\n    this.form.get('time').get('ttc').setValue(((this.form.get('time').get('end').value).getTime() - (this.form.get('time').get('start').value).getTime()) / 60 / 1000);\r\n    this.isTTCUpdated = true;\r\n\r\n    setTimeout(() => {\r\n      this.isTTCUpdated = false;\r\n    }, 1000);\r\n  }\r\n\r\n  getNewDateFromInput() {\r\n    this.form.get('time').get('end').setValue(new Date((this.form.get('time').get('start').value).getTime() + (this.form.get('time').get('ttc').value * 60 * 1000)));\r\n    this.isEndUpdated = true;\r\n\r\n    setTimeout(() => {\r\n      this.isEndUpdated = false;\r\n    }, 1000);\r\n  }\r\n\r\n  addExecutor() {\r\n    (this.form.get('production').get('employees') as FormArray).push(this.fb.group({\r\n      employee: [null, Validators.required],\r\n      ttc: [0, Validators.required],\r\n      startDate: [null, Validators.required],\r\n    }));\r\n  }\r\n\r\n  removeExecutor(index: number) {\r\n    (this.form.get('production').get('employees') as FormArray).removeAt(index);\r\n  }\r\n\r\n  addExecutionMachine() {\r\n    (this.form.get('production').get('machines') as FormArray).push(this.fb.group({\r\n      machine: [null, Validators.required],\r\n      ttc: [0, Validators.required],\r\n      startDate: [null, Validators.required],\r\n    }));\r\n  }\r\n\r\n  removeExecutionMachine(index: number) {\r\n    (this.form.get('production').get('machines') as FormArray).removeAt(index);\r\n  }\r\n\r\n  private initDates() {\r\n    this.form.get('time').get('start').setValue(new Date(Math.min(...this.tasks.map(task => task.start_date.getTime()))));\r\n    this.form.get('time').get('end').setValue(new Date(Math.max(...this.tasks.map(task => task.end_date.getTime()))));\r\n    this.form.get('time').get('ttc').setValue(((this.form.get('time').get('end').value).getTime() - (this.form.get('time').get('start').value).getTime()) / 1000 / 60);\r\n  }\r\n\r\n  private applyFormToTask(task: Task) {\r\n    if (\r\n      this.form.get('time').enabled\r\n      //      ..     \r\n      && task.list_product.nomenclature.type !== ENomenclatureType.PURCHASED\r\n    ) {\r\n      task.start_date = this.form.get('time').get('start').value;\r\n      task.end_date = this.form.get('time').get('end').value;\r\n      task.duration = this.taskDurationInMinutes / 60;\r\n    }\r\n\r\n    if (this.form.get('production').enabled) {\r\n      task.production_type = this.form.get('production').get('production').value;\r\n\r\n      task.employees = <any>this.form.get('production').get('employees').value.map(employeeGroup => ({\r\n        employee: employeeGroup.employee,\r\n        duration: employeeGroup.ttc,\r\n        start: employeeGroup.startDate,\r\n        end: employeeGroup.employee ? new Date(employeeGroup.startDate.getTime() + employeeGroup.ttc * 60 * 1000) : null,\r\n      })).filter(emp => emp.employee);\r\n\r\n      task.machines = <any>this.form.get('production').get('machines').value.map(machineGroup => ({\r\n        machine: machineGroup.machine,\r\n        duration: machineGroup.ttc,\r\n        start: machineGroup.startDate,\r\n        end: machineGroup.machine ? new Date(machineGroup.startDate.getTime() + machineGroup.ttc * 60 * 1000) : null,\r\n      })).filter(m => m.machine);\r\n    }\r\n\r\n    if (this.form.get('shiftBy').enabled && task.list_product.nomenclature.type !== ENomenclatureType.PURCHASED) {\r\n      const shiftAmount = this.form.get('shiftBy').get('amount').value;\r\n      const shiftType = this.form.get('shiftBy').get('type').value;\r\n\r\n      const startDate = new Date(task.start_date);\r\n      const endDate = new Date(task.end_date);\r\n\r\n      if (shiftType === ShiftTypes.DAYS) {\r\n        task.start_date = new Date(startDate.setDate(startDate.getDate() + shiftAmount));\r\n        task.end_date = new Date(endDate.setDate(endDate.getDate() + shiftAmount));\r\n      }\r\n\r\n      if (shiftType === ShiftTypes.HOURS) {\r\n        task.start_date = new Date(startDate.setHours(startDate.getHours() + shiftAmount));\r\n        task.end_date = new Date(endDate.setHours(endDate.getHours() + shiftAmount));\r\n      }\r\n\r\n      if (shiftType === ShiftTypes.WEEKS) {\r\n        task.start_date = new Date(startDate.setDate(startDate.getDate() + shiftAmount * 7));\r\n        task.end_date = new Date(endDate.setDate(endDate.getDate() + shiftAmount * 7));\r\n      }\r\n\r\n      if (shiftType === ShiftTypes.MONTHS) {\r\n        task.start_date = new Date(startDate.setMonth(startDate.getMonth() + shiftAmount));\r\n        task.end_date = new Date(endDate.setMonth(endDate.getMonth() + shiftAmount));\r\n      }\r\n    }\r\n  }\r\n\r\n  private getTaskData(task: Task): Partial<Task> {\r\n\r\n    const data: Partial<Task> = {\r\n      id: task.id,\r\n    };\r\n\r\n    // if (this.form.get('time').enabled) {\r\n    //   data.start_date = task.start_date;\r\n    //   data.end_date = task.end_date;\r\n    // }\r\n\r\n    if (this.form.get('production').enabled) {\r\n      data.production_type = task.production_type;\r\n\r\n      data.employees = task.employees.filter(emp => emp.employee);\r\n      data.machines = task.machines.filter(m => m.machine);\r\n    }\r\n\r\n    if (this.form.get('flags').enabled) {\r\n      data.is_locked = task.is_locked;\r\n      // data.is_planned = task.is_planned;\r\n    }\r\n\r\n    return data;\r\n  }\r\n\r\n  showError() {\r\n    if (this.form.get('time').get('start').value.getTime() > this.form.get('time').get('end').value.getTime()) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  showErrorShiftBy() {\r\n    if (this.form.get('shiftBy').enabled && (!this.form.get('shiftBy').get('amount').value || !this.form.get('shiftBy').get('type').value)) {\r\n      return true;\r\n    }\r\n  }\r\n\r\n  typeChanged() {\r\n\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Edit tasks\r\n  </h2>\r\n</div>\r\n\r\n<form [formGroup]=\"form\" (ngSubmit)=\"save()\">\r\n\r\n  <mat-dialog-content class=\"dialog\">\r\n    <div class=\"wrapper task-edit\">\r\n      <div formGroupName=\"time\" class=\"position-relative d-flex align-items-center group-time\"\r\n           [class.highlight]=\"isHighlightTime\">\r\n        <label class=\"group-input\">\r\n          <input\r\n            #applyTimeCheckbox type=\"checkbox\" [value]=\"applyTime\"\r\n            (input)=\"applyTime=applyTimeCheckbox.checked; applyShiftBy=false; applyShiftByCheckbox.checked = false\"\r\n            (mouseover)=\"isHighlightTime = true\"\r\n            (mouseleave)=\"isHighlightTime = false\"\r\n          >\r\n        </label>\r\n        <div class=\"w-100\">\r\n          <div class=\"dates row time-wrap\">\r\n            <div class=\"col-5\">\r\n              <div class=\"form-group\">\r\n                <label for=\"start\"> Start </label>\r\n                <p-calendar\r\n                  formControlName=\"start\"\r\n                  (onSelect)=\"getNewDateFromCalendar()\"\r\n                  id=\"start\" dataType=\"date\"\r\n                  [showTime]=\"true\"\r\n                  dateFormat=\"dd/mm/yy\"\r\n                  [readonlyInput]=\"true\"\r\n                ></p-calendar>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-5\">\r\n              <div class=\"form-group\">\r\n                <label for=\"end_date\"> End </label>\r\n                <p-calendar\r\n                  formControlName=\"end\"\r\n                  id=\"end_date\"\r\n                  dataType=\"date\"\r\n                  dateFormat=\"dd/mm/yy\"\r\n                  [class.p-input-green]=\"isEndUpdated\"\r\n                  [showTime]=\"true\"\r\n                  [readonlyInput]=\"true\"\r\n                  (onSelect)=\"getNewDateFromCalendar()\"\r\n                ></p-calendar>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-2\">\r\n              <div class=\"form-group\">\r\n                <label for=\"total-ttc\" class=\"total-ttc\" title=\"Time to complete (in minutes)\">Total\r\n                  TTC</label>\r\n                <div class=\"ml-auto\">\r\n                  <input\r\n                    pInputText\r\n                    [class.input-green]=\"isTTCUpdated\"\r\n                    formControlName=\"ttc\"\r\n                    id=\"total-ttc\"\r\n                    class=\"form-control total-ttc\"\r\n                    type=\"number\"\r\n                    step=\"10\"\r\n                    placeholder=\"Minutes\"\r\n                    (input)=\"getNewDateFromInput()\"\r\n                  >\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <span *ngIf=\"showError()\" class=\"error\">The start date cannot be greater than the end date, Total TTC cannot be negative</span>\r\n        </div>\r\n      </div>\r\n\r\n      <div formGroupName=\"production\"\r\n           class=\"position-relative production-wrap group-production\"\r\n           [class.highlight]=\"isHighlightProduction\"\r\n      >\r\n        <label class=\"group-input\">\r\n          <input #applyProductionCheckbox type=\"checkbox\" [value]=\"applyProduction\"\r\n                 (input)=\"applyProduction=applyProductionCheckbox.checked\"\r\n                 (mouseover)=\"isHighlightProduction= true\"\r\n                 (mouseleave)=\"isHighlightProduction = false\"\r\n          >\r\n        </label>\r\n        <div class=\"row-header\">\r\n          <div class=\"production row indicators mb-4\">\r\n            <div class=\"col-6\">\r\n              <input id=\"own\" type=\"radio\" value=\"1\" name=\"production\" formControlName=\"production\">\r\n              <label for=\"own\">Own production</label>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <input id=\"outsource\" type=\"radio\" value=\"0\" name=\"production\" formControlName=\"production\">\r\n              <label for=\"outsource\">Outsource production</label>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"resources\" *ngIf=\"form.get('production').get('production').value === '1'\">\r\n            <p-table selectionMode=\"single\" rowGroupMode=\"rowspan\" [scrollable]=\"true\"\r\n                     scrollHeight=\"calc(100vh - 335px)\" frozenWidth=\"1000px\" class=\"mt-2 mb-3\">\r\n              <ng-template pTemplate=\"caption\">\r\n                <div class=\"own-production p-3\">\r\n                  <div class=\"own-production__wrap\">\r\n                    <div class=\"own-production__employee\" formArrayName=\"employees\">\r\n                      <div class=\"own-production__row\" *ngFor=\"let executor of executors.controls; let idx = index\"\r\n                           [formGroupName]=\"idx\">\r\n                        <div class=\"own-production__col employee\">\r\n                          <label class=\"mb-2\" *ngIf=\"idx === 0\">Employee</label>\r\n                          <p-dropdown [filter]=\"true\" [options]=\"employees\"\r\n                                      name=\"employees\" optionValue=\"id\" formControlName=\"employee\"\r\n                                      optionLabel=\"fullName\" placeholder=\"No employee selected\">\r\n                          </p-dropdown>\r\n                        </div>\r\n                        <div class=\"own-production__col date\">\r\n                          <label class=\"mb-2\" *ngIf=\"idx === 0\">Start date</label>\r\n                          <p-calendar\r\n                            dataType=\"date\"\r\n                            dateFormat=\"dd/mm/yy\"\r\n                            [showTime]=\"true\"\r\n                            [readonlyInput]=\"true\"\r\n                            placeholder=\"Start date\"\r\n                            formControlName=\"startDate\"\r\n                          ></p-calendar>\r\n                        </div>\r\n                        <div class=\"own-production__col time\">\r\n                          <label class=\"flex-0\" class=\"mb-2\" title=\"Employee time to complete (in minutes)\"\r\n                                 *ngIf=\"idx === 0\">\r\n                            TTC\r\n                          </label>\r\n                          <div class=\"ml-auto\">\r\n                            <input type=\"text\" pInputText class=\"form-control\" formControlName=\"ttc\">\r\n                          </div>\r\n                        </div>\r\n                        <button class=\"btn-remove\" [class.btn-disable]=\"!applyProduction\"\r\n                                (click)=\"removeExecutor(idx)\"></button>\r\n                      </div>\r\n                      <a class=\"btn-add\" (click)=\"addExecutor()\" [class.btn-disable]=\"!applyProduction\">\r\n                        <i class=\"pi pi-plus\"></i>\r\n                        Add employee\r\n                      </a>\r\n                    </div>\r\n\r\n                    <div class=\"own-production__tool\" formArrayName=\"machines\">\r\n                      <div class=\"own-production__row\" *ngFor=\"let machine of exeMachines.controls; let idx = index\"\r\n                           [formGroupName]=\"idx\">\r\n                        <div class=\"own-production__col machine\">\r\n                          <label class=\"mb-2\" *ngIf=\"idx === 0\">Machine</label>\r\n                          <p-dropdown [filter]=\"true\" [options]=\"machines\"\r\n                                      name=\"machines\" optionValue=\"id\" formControlName=\"machine\"\r\n                                      optionLabel=\"name\" placeholder=\"No machine selected\">\r\n                          </p-dropdown>\r\n                        </div>\r\n                        <div class=\"own-production__col date\">\r\n                          <label class=\"mb-2\" *ngIf=\"idx === 0\">Start date</label>\r\n                          <p-calendar\r\n                            dataType=\"date\"\r\n                            dateFormat=\"dd/mm/yy\"\r\n                            [showTime]=\"true\"\r\n                            [readonlyInput]=\"true\"\r\n                            placeholder=\"Start date\"\r\n                            formControlName=\"startDate\"\r\n                          ></p-calendar>\r\n                        </div>\r\n                        <div class=\"own-production__col time\">\r\n                          <label class=\"mb-2\" title=\"Machine time to complete (in minutes)\"\r\n                                 *ngIf=\"idx === 0\">TTC</label>\r\n                          <div class=\"ml-auto\">\r\n                            <input type=\"text\" class=\"form-control\" pInputText formControlName=\"ttc\">\r\n                          </div>\r\n                        </div>\r\n                        <button class=\"btn-remove\" [class.btn-disable]=\"!applyProduction\"\r\n                                (click)=\"removeExecutionMachine(idx)\"></button>\r\n                      </div>\r\n                      <a class=\"btn-add\" [class.btn-disable]=\"!applyProduction\" (click)=\"addExecutionMachine()\">\r\n                        <i class=\"pi pi-plus\"></i>\r\n                        Add Machine\r\n                      </a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!--      <div class=\"position-relative group-flags\" formGroupName=\"flags\" [class.highlight]=\"isHighlightFlags\">-->\r\n      <!--        <label class=\"group-input\">-->\r\n      <!--          <input #applyFlagsCheckbox type=\"checkbox\" [value]=\"applyFlags\"-->\r\n      <!--                 (input)=\"applyFlags=applyFlagsCheckbox.checked\"-->\r\n      <!--                 (mouseover)=\"isHighlightFlags= true\"-->\r\n      <!--                 (mouseleave)=\"isHighlightFlags = false\"-->\r\n      <!--          >-->\r\n      <!--        </label>-->\r\n      <!--        <div class=\"flags row indicators mt-1 mb-1\">-->\r\n      <!--          &lt;!&ndash;div class=\"col-6\">-->\r\n      <!--            <input type=\"checkbox\" id=\"planned\" [ngModel]=\"task.is_planned\">-->\r\n      <!--            <label for=\"planned\">Planned</label>-->\r\n      <!--          </div&ndash;&gt;-->\r\n      <!--          <div class=\"col-6\">-->\r\n      <!--            <input type=\"checkbox\" id=\"locked\" formControlName=\"isLocked\">-->\r\n      <!--            <label for=\"locked\">Locked</label>-->\r\n      <!--          </div>-->\r\n      <!--        </div>-->\r\n      <!--      </div>-->\r\n\r\n      <div class=\"position-relative group-flags\" formGroupName=\"shiftBy\" [class.highlight]=\"isHighlightShiftBy\">\r\n        <label class=\"group-input\">\r\n          <input #applyShiftByCheckbox type=\"checkbox\" [value]=\"applyShiftBy\"\r\n                 (input)=\"applyShiftBy=applyShiftByCheckbox.checked; applyTime=false; applyTimeCheckbox.checked = false\"\r\n                 (mouseover)=\"isHighlightShiftBy= true\"\r\n                 (mouseleave)=\"isHighlightShiftBy = false\"\r\n          >\r\n        </label>\r\n        <div class=\"w-100\">\r\n          <div class=\"flags row mt-1 mb-1\">\r\n            <div class=\"col-6\">\r\n              <div class=\"form-group\">\r\n                <label for=\"amount\">Shift By Amount</label>\r\n                <input pInputText formControlName=\"amount\" class=\"form-control\" type=\"number\" id=\"amount\">\r\n              </div>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <div class=\"form-group\">\r\n                <label>Shift Type</label>\r\n                <pek-shift-by-types\r\n                  [type]=\"form.get('shiftBy').get('type').value\"\r\n                  (valueChange)=\"form.get('shiftBy').get('type').setValue($event)\"\r\n                  [isDisabled]=\"!applyShiftByCheckbox.checked\"\r\n                >\r\n                </pek-shift-by-types>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <!--          <span *ngIf=\"showErrorShiftBy()\" class=\"error\">Fill Shift Amount or Type To Shift</span>-->\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n  <mat-dialog-actions class=\" d-flex justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      class=\"p-button-success\"\r\n      type=\"submit\"\r\n      label=\"Save\"\r\n      [disabled]=\"showError() || showErrorShiftBy()\"\r\n      [loading]=\"isSaving\"\r\n    >\r\n    </button>\r\n  </mat-dialog-actions>\r\n\r\n  <!--  <mat-dialog-actions class=\" d-flex justify-content-between\">-->\r\n  <!--    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>-->\r\n  <!--    <div class=\"d-flex\">-->\r\n  <!--      <button type=\"button\" pButton class=\"p-button-danger mr-3\" (click)=\"deleteTask()\" label=\"Delete\" [loading]=\"isDeleting\"></button>-->\r\n\r\n  <!--      <button-->\r\n  <!--        pButton-->\r\n  <!--        type=\"submit\"-->\r\n  <!--        [disabled]=\"showError() || showErrorTasks()\"-->\r\n  <!--        label=\"Save\"-->\r\n  <!--        class=\"p-button-success\"-->\r\n  <!--        [loading]=\"isSaving\"-->\r\n  <!--      >-->\r\n  <!--      </button>-->\r\n  <!--    </div>-->\r\n  <!--  </mat-dialog-actions>-->\r\n</form>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {ShiftTypes} from '../../enums/shift-types.enum';\r\n\r\n@Component({\r\n  selector: 'pek-shift-by-types',\r\n  templateUrl: './shift-by-types.component.html',\r\n  styleUrls: ['./shift-by-types.component.scss']\r\n})\r\nexport class ShiftByTypesComponent implements OnInit {\r\n\r\n  @Output() valueChange  = new EventEmitter<string>();\r\n  types: { value: string, name: string }[] = [\r\n    {\r\n      value: ShiftTypes.HOURS,\r\n      name: 'HOURS'\r\n    },\r\n    {\r\n      value: ShiftTypes.DAYS,\r\n      name: 'DAYS'\r\n    },\r\n    {\r\n      value: ShiftTypes.WEEKS,\r\n      name: 'WEEKS'\r\n    },\r\n    {\r\n      value: ShiftTypes.MONTHS,\r\n      name: 'MONTHS'\r\n    },\r\n  ];\r\n  @Input() type: string;\r\n  @Input() isDisabled = false;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onChange(position: string) {\r\n    this.setValue(position);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.valueChange.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    // okay\r\n  }\r\n\r\n  private setValue(type: string) {\r\n    this.type = type;\r\n    console.log('this.type', this.type);\r\n    this.valueChange.emit(this.type);\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    this.type = obj;\r\n  }\r\n\r\n}\r\n","<p-dropdown\r\n  placeholder=\"Choose Type\"\r\n  [filter]=\"true\"\r\n  [options]=\"types\"\r\n  [disabled]=\"isDisabled\"\r\n  [(ngModel)]=\"type\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n  optionValue=\"value\"\r\n  optionLabel=\"name\"\r\n></p-dropdown>\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {Machine} from '../models/machine';\r\nimport {environment} from '@env/environment';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {EmployeePosition} from '@shared/models/employee-position';\r\nimport {CreateEditPositionComponent} from '../modals/create-edit-position/create-edit-position.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {CreateEditMachineComponent} from '../modals/create-edit-machine/create-edit-machine.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class MachineService {\r\n\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'machines/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: { name: string, value: any }[]): Observable<Machine[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Machine[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(machine: Machine): Observable<Machine> {\r\n    return this.httpClient.post<{ data: Machine }>(this.API_URL + this.url, machine).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(machine: Machine): Observable<Machine> {\r\n    return this.httpClient.put<{ data: Machine }>(this.API_URL + this.url + machine.id + '/', machine).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  createEditMachineModal(type: ModalActionType, machine?: Machine): Observable<Machine> {\r\n    return this.dialog\r\n      .open<CreateEditMachineComponent>(CreateEditMachineComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, machine},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms',\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {OrderProduct} from '../../../procurement/models/order-product';\r\nimport {BehaviorSubject, iif, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {Router} from '@angular/router';\r\nimport {Technology} from '../../../product-structure/models/technology';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-outsourcing-chain-creation-list',\r\n  templateUrl: './outsourcing-chain-creation-list.component.html',\r\n  styleUrls: ['./outsourcing-chain-creation-list.component.scss']\r\n})\r\nexport class OutsourcingChainCreationListComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  isCanOrder = false;\r\n  isCanAddOrder = false;\r\n\r\n  isShowAll = false;\r\n\r\n  statuses = [\r\n    {label: 'ORDERED', value: 'ordered'},\r\n    {label: 'NOT ORDERED', value: 'not_ordered'},\r\n    {label: 'PARTLY ORDERED', value: 'partially_ordered'}\r\n  ];\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    nomenclature__name: [null],\r\n    nomenclature__code: [null],\r\n    request_date: [null],\r\n    technologies_ids: [null],\r\n    status: ['not_ordered']\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProducts: OrderProduct[] = [];\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n\r\n  orderProducts$: Observable<OrderProduct[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      iif(() =>\r\n          !this.isShowAll,\r\n        this.orderProductService.getGroupedOutsourceForPagination(this.query).pipe(\r\n          tap(response => this.productsCount = response.count),\r\n          map(response => response.results.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          })),\r\n        ),\r\n        this.orderProductService.getGroupedOutsource(this.query).pipe(\r\n          tap(products => this.productsCount = products.length),\r\n          map(products => products.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          }))\r\n        )\r\n      ),\r\n    ),\r\n    map(products =>\r\n      products.map(product => {\r\n        // @ts-ignore\r\n        product.id = product.request_id;\r\n        return product;\r\n      })\r\n    ),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly orderService: OrderService,\r\n    private readonly modalService: ModalService,\r\n    private readonly router: Router,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  setProductStatus(product: OrderProduct) {\r\n    let status: string;\r\n\r\n    if (product.ordered_quantity >= product.initial_quantity) {\r\n      status = 'A0';\r\n    } else if (product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0) {\r\n      status = 'A1';\r\n    } else {\r\n      status = 'A2';\r\n    }\r\n\r\n    return status;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProducts = [];\r\n\r\n    this.onCheckOrder();\r\n    this.onCheckAddOrder();\r\n    this.getIsCleanUnnecessary();\r\n    this.getIsDeleted();\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: true},);\r\n    }\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  getSmallDescription(description: string) {\r\n    if (description && description?.length > 40) return description.substring(0, 40) + '...';\r\n    else return description;\r\n  }\r\n\r\n  onCheckOrder() {\r\n    this.isCanOrder = true;\r\n\r\n    this.selectedProducts.forEach(element => {\r\n      if (element.ordered_quantity >= element.initial_quantity) {\r\n        this.isCanOrder = false;\r\n      }\r\n    });\r\n\r\n    if (this.selectedProducts.length === 0) {\r\n      this.isCanOrder = false;\r\n    }\r\n  }\r\n\r\n  onCheckAddOrder() {\r\n    this.isCanAddOrder = this.selectedProducts.every(node => node.status !== 'A0');\r\n  }\r\n\r\n  getIsCleanUnnecessary() {\r\n    if (this.selectedProducts) {\r\n      return this.selectedProducts.every(node => node.status === 'A1');\r\n    }\r\n  }\r\n\r\n  getIsDeleted() {\r\n    if (this.selectedProducts) {\r\n      return this.selectedProducts.every(node => node.status === 'A2');\r\n    }\r\n  }\r\n\r\n  onCloseOrders() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        const partlyOrderedProducts = this.selectedProducts.filter(n => n.status === 'A1');\r\n\r\n        if (partlyOrderedProducts.length > 0) {\r\n\r\n          this.selectedProducts = [];\r\n          this.orderProductService.closeOrders(partlyOrderedProducts).subscribe(() => this.search$.next());\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onDeleteOrders() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        const notOrderedProducts = this.selectedProducts.filter(n => n.status === 'A2');\r\n\r\n        if (notOrderedProducts.length > 0) {\r\n          this.selectedProducts = [];\r\n          this.orderProductService.deleteSeveral(notOrderedProducts).subscribe(() => this.search$.next());\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreateChain() {\r\n    this.orderService.openCreateChainModal(this.selectedProducts, 'outsourcing').subscribe(order => {\r\n      if (order) {\r\n        this.router.navigate(['/outsourcing/chains/order', order.id]);\r\n      }\r\n    });\r\n  }\r\n\r\n  onAddProductsToChain() {\r\n    this.orderService.openAddProductsToChainModal(this.selectedProducts, 'outsourcing').subscribe(order => {\r\n      if (order) {\r\n        this.search$.next();\r\n      }\r\n    });\r\n  }\r\n\r\n  onSelectTechnologies(technologies: Technology[]) {\r\n    this.searchForm.get('technologies_ids').patchValue(technologies?.map(t => t.id)?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isShowAll = value;\r\n\r\n    if (!this.isShowAll) {\r\n      this.currentPage = 1;\r\n    }\r\n\r\n    this.search$.next();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'outsourcing'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Outsourcing Chain Creation</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        [disabled]=\"!selectedProducts || !isCanOrder\"\r\n        class=\"ml-auto mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Create Outsourcing Chain\"\r\n        (click)=\"onCreateChain()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder\"\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Add To Outsourcing Chain\"\r\n        (click)=\"onAddProductsToChain()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder || !getIsCleanUnnecessary()\"\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-check\"\r\n        label=\"Close Order\"\r\n        (click)=\"onCloseOrders()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder || !getIsDeleted()\"\r\n        class=\"p-button-danger\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-times\"\r\n        label=\"Delete Order\"\r\n        (click)=\"onDeleteOrders()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form\r\n      [formGroup]=\"searchForm\"\r\n      class=\"form mb-3\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"nomenclature__name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Code</label>\r\n            <input\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"nomenclature__code\"\r\n              (ngModelChange)=\"code$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Technologies</label>\r\n            <pek-multi-technology-picker\r\n              (selectTechnologies)=\"onSelectTechnologies($event)\"></pek-multi-technology-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Date</label>\r\n            <p-calendar\r\n              formControlName=\"request_date\"\r\n              dataType=\"date\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Status</label>\r\n            <p-dropdown\r\n              [options]=\"statuses\"\r\n              formControlName=\"status\"\r\n              optionValue=\"value\"\r\n              [showClear]=\"true\"\r\n              placeholder=\"Choose Status\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            ></p-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"multiple\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 24.25rem)\"\r\n        [value]=\"orderProducts$ | async\"\r\n        [(selection)]=\"selectedProducts\"\r\n        (selectionChange)=\"onCheckOrder(); onCheckAddOrder();\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 3%\">#</th>\r\n            <th style=\"width: 11%\">Code</th>\r\n            <th style=\"width: 10%\" pSortableColumn=\"nomenclature.name\">Name</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Request Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Ordered Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">UOM</th>\r\n            <th style=\"width: 10%\">Description</th>\r\n            <th style=\"width: 6%\" class=\"text-center\">Date</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Request Type</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Free Ordered Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Chains</th>\r\n            <th style=\"width: 11%\">Root Lists</th>\r\n            <th style=\"width: 10%\">Production Lists</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Status</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"product\">\r\n            <td style=\"width: 3%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 11%\">{{product.nomenclature.code}}</td>\r\n            <td style=\"width: 10%\">{{product.nomenclature.name}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{product.initial_quantity}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{product.ordered_quantity}}</td>\r\n            <td\r\n              style=\"width: 5%\"\r\n              class=\"text-center\">{{product.nomenclature.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs'}}\r\n            </td>\r\n            <td style=\"width: 10%\">\r\n              <div class=\"word-break\">\r\n                {{getSmallDescription(product.nomenclature.description)}}\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">{{product.request_date|date:'dd/MM/yyyy'}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <ng-container *ngIf=\"product.request_type==1\">Auto</ng-container>\r\n              <ng-container *ngIf=\"product.request_type==0\">Manual</ng-container>\r\n            </td>\r\n            <td style=\"width: 7%\" class=\"text-center\">{{product.free_quantity_without_final_status ? product.free_quantity_without_final_status : 0}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <ng-container *ngFor=\"let order of product.orders; let idx = index;\">\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 1\"\r\n                   [routerLink]=\"['/procurement/chains/order/',order.id]\">\r\n                  {{order.id}}</a>\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 2\"\r\n                   [routerLink]=\"['/outsourcing/chains/order/', order.id]\">\r\n                  {{order.id}}<span *ngIf=\"idx !== product.orders.length - 1\">,</span>\r\n                </a>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 11%\">\r\n              <ng-container *ngFor=\"let list of product.root_production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.root_production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 10%\">\r\n              <ng-container *ngFor=\"let list of product.production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 7%\" class=\"text-center\">\r\n              <ng-container *ngIf=\"product.ordered_quantity>=product.initial_quantity\"><span\r\n                class=\"badge badge_success\">ORDERED</span></ng-container>\r\n              <ng-container\r\n                *ngIf=\"product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0\">\r\n                <span class=\"badge badge_warning\">PARTLY ORDERED </span>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"product.ordered_quantity==0\"><span class=\"badge badge_danger\">NOT\r\n                                        ORDERED</span></ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"16\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n      <div\r\n        *ngIf=\"!isShowAll\"\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"productsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll(true)\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(false)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {Order, Orders} from '../../../procurement/models/order';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {Router} from '@angular/router';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {ListProduct} from '../../../warehouse/models/list-product';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {BehaviorSubject, switchMap} from 'rxjs';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {OrderStatusesTableComponent} from '@shared/components/order-statuses-table/order-statuses-table.component';\r\nimport {Table} from 'primeng/table';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {deepCopy} from 'deep-copy-ts';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-outsourcing-chains',\r\n  templateUrl: './outsourcing-chains.component.html',\r\n  styleUrls: ['./outsourcing-chains.component.scss']\r\n})\r\nexport class OutsourcingChainsComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('orderTable') orderTable: OrderStatusesTableComponent;\r\n  @ViewChild('dt') dt: Table;\r\n  @ViewChild(OrderStatusesTableComponent)\r\n  orderStatusTableComponent: OrderStatusesTableComponent;\r\n  firstPage: number = 0;\r\n  isCreating = false;\r\n\r\n  isShowStatuses = false;\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Chain',\r\n    items: [\r\n      {\r\n        label: 'Open Chain',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onGoToOderPage()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveChain()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  finalStatusSelected = false;\r\n\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    contains_nomenclature: [null],\r\n    supplier: [null],\r\n    order_root_list_id: [null],\r\n    active_status__in: [null],\r\n    created_after: [null],\r\n    created_before: [null],\r\n    contains_declined_payment: [null],\r\n    page: [1],\r\n  });\r\n\r\n  orders: Order[] = [];\r\n  selectedOrder: Order;\r\n\r\n  isLoading = false;\r\n  isHideFilters = false;\r\n\r\n  nomenclaturesList: Nomenclature[] = [];\r\n  rootLists: any[] = [];\r\n\r\n  query: QuerySearch[] = [];\r\n  queryProdList: QuerySearch[] = [];\r\n  queryNomenclatureList: QuerySearch[] = [];\r\n  tableScrollHeight = '29.625rem';\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  isShowAll = false;\r\n  isStartOnePage = false;\r\n  countOrders: any;\r\n\r\n  loadedIdsQuery: QuerySearch[];\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderService: OrderService,\r\n    private readonly router: Router,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.search$.pipe(\r\n      tap(() => this.prepareForSearch()),\r\n      tap(() => this.getOrdersIds()),\r\n      switchMap(() => this.isShowAll ? this.orderService.getForPagination(this.query) : this.orderService.get(this.query)),\r\n      map(orders => {\r\n        if (!this.isShowAll) {\r\n          this.countOrders = (orders as Orders).count;\r\n        } else {\r\n          this.countOrders = (orders as Order[]).length;\r\n        }\r\n        if (this.isStartOnePage) {\r\n          this.paginator?.changePage(0);\r\n        }\r\n\r\n        this.isStartOnePage = false;\r\n        return this.orderService.modifyOrders(this.isShowAll ? (orders as Order[]) : (orders as Orders).results);\r\n      }),\r\n      tap(orders => this.orders = orders),\r\n      tap(() => this.generateNomenclaturesListAndRootLists()),\r\n      tap(() => this.collectOrderedProductsTechnologies()),\r\n      tap(() => {\r\n        this.isLoading = false;\r\n\r\n      }),\r\n      untilDestroyed(this)\r\n    ).subscribe(() => {\r\n    });\r\n\r\n    this.prepareForSearch();\r\n    this.getOrdersIds();\r\n  }\r\n\r\n  generateNomenclaturesListAndRootLists() {\r\n    this.orders.forEach(order => {\r\n      if (order.activeStatusDate) {\r\n        order.activeStatusDate = new Date(order.activeStatusDate);\r\n      }\r\n\r\n      order.order_products.forEach(orderProduct => {\r\n        if (!this.nomenclaturesList.includes(orderProduct.nomenclature)) {\r\n          this.nomenclaturesList.push(orderProduct.nomenclature);\r\n        }\r\n      });\r\n\r\n      order.root_production_list_products.forEach(root => this.rootLists.push(root));\r\n\r\n      this.rootLists = this.rootLists.map(root => {\r\n        return {\r\n          ...root,\r\n          fullName: `(${root.id}) ${root.nomenclature.code}~${root.nomenclature.name}`\r\n        };\r\n      });\r\n    });\r\n\r\n    this.nomenclaturesList = this.adapterService.removeDuplicates(this.nomenclaturesList, x => x.id);\r\n    this.rootLists = this.adapterService.removeDuplicates(this.rootLists, x => x.id);\r\n\r\n    this.nomenclaturesList.sort((a, b) => {\r\n      if (a.name < b.name) return -1;\r\n      if (a.name > b.name) return 1;\r\n      return 0;\r\n    });\r\n\r\n    this.rootLists.sort((a, b) => {\r\n      if (a.fullName < b.fullName) return -1;\r\n      if (a.fullName > b.fullName) return 1;\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  collectOrderedProductsTechnologies() {\r\n    this.orders.forEach(order => {\r\n      order.ordered_products_unique_technologies = [];\r\n      order.order_products?.forEach(product => {\r\n        const needToAdd = order.ordered_products_unique_technologies.findIndex(tech => tech.id === product?.current_technology.id) < 0;\r\n        if (needToAdd) {\r\n          order.ordered_products_unique_technologies.push(product?.current_technology);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getRootLists(rootLists: ListProduct[]): { list: ListProduct, count?: number }[] {\r\n    const lists: { list: ListProduct, count?: number }[] = [];\r\n    rootLists.forEach((res: ListProduct) => {\r\n      const found = lists.find(el => el.list.nomenclature.name === res.nomenclature.name);\r\n      if (found) {\r\n        found.count++;\r\n      } else {\r\n        lists.push({list: res, count: 1});\r\n      }\r\n    });\r\n    return lists;\r\n  }\r\n\r\n  private onGoToOderPage() {\r\n    window.open('/outsourcing/chains/order/' + this.selectedOrder?.id, '_blank');\r\n  }\r\n\r\n  onRemoveChain() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.orderService.delete(this.selectedOrder.id).subscribe(() => {\r\n          this.orders = this.orders.filter(x => x.id !== this.selectedOrder.id);\r\n          this.selectedOrder = null;\r\n\r\n          setTimeout(() => {\r\n            this.orderStatusTableComponent?.renderDates({first: this.firstPage});\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreateChain() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isCreating = true;\r\n        this.orderService.create({accounting_type: 2, can_select_supplier: true}).subscribe(order => {\r\n          this.isCreating = false;\r\n          this.router.navigate(['/outsourcing/chains/order/', order.id]);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedOrder = null;\r\n    this.orders = [];\r\n\r\n    this.query = [\r\n      {name: 'accounting_type', value: 2},\r\n      {name: 'exclude_with_active_final_status', value: !this.finalStatusSelected},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push(\r\n        {name: 'paginated', value: true}\r\n      );\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n    }\r\n\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n    const queryToLocalStorage = deepCopy(this.query);\r\n    const pagePosIndex = this.query.findIndex(el => el.name === 'page');\r\n    const paginatedPosIndex = this.query.findIndex(el => el.name === 'paginated');\r\n    if (pagePosIndex >= 0) {\r\n      queryToLocalStorage.splice(pagePosIndex, 1);\r\n    }\r\n    if (paginatedPosIndex >= 0) {\r\n      queryToLocalStorage.splice(paginatedPosIndex, 1);\r\n    }\r\n\r\n    localStorage.setItem('queryParamsForInWindowView', JSON.stringify(queryToLocalStorage));\r\n    this.firstPage = 0;\r\n    this.orderStatusTableComponent?.renderDates({first: 0});\r\n    this.orders = this.orders.map(o => o);\r\n  }\r\n\r\n  getOrdersIds() {\r\n    const tempQuery = deepCopy(this.query);\r\n\r\n    const listIndex = tempQuery.findIndex(el => el.name === 'order_root_list_id');\r\n    if (listIndex >= 0) {\r\n      tempQuery.splice(listIndex, 1);\r\n    }\r\n    const nomenclatureIndex = tempQuery.findIndex(el => el.name === 'contains_nomenclature');\r\n    if (nomenclatureIndex >= 0) {\r\n      tempQuery.splice(nomenclatureIndex, 1);\r\n    }\r\n    const pageIndex = tempQuery.findIndex(el => el.name === 'page');\r\n    if (pageIndex >= 0) {\r\n      tempQuery.splice(pageIndex, 1);\r\n    }\r\n\r\n    if (JSON.stringify(this.loadedIdsQuery) !== JSON.stringify(tempQuery)) {\r\n      this.loadedIdsQuery = tempQuery;\r\n      return this.orderService.getFilteredOrderIds(tempQuery).subscribe(orderIds => {\r\n        if (orderIds.ids.length > 0) {\r\n          this.queryProdList = [\r\n            {\r\n              name: 'level',\r\n              value: 0,\r\n            },\r\n            {\r\n              name: 'order_accounting_type',\r\n              value: 2\r\n            },\r\n            {\r\n              name: 'order_id__in',\r\n              value: orderIds.ids\r\n            }\r\n          ];\r\n          this.queryNomenclatureList = [\r\n            {\r\n              name: 'order_accounting_type',\r\n              value: 2\r\n            },\r\n            {\r\n              name: 'order_id__in',\r\n              value: orderIds.ids\r\n            }\r\n          ];\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.resetPage();\r\n    this.searchForm.get('supplier').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectStatuses(ids: number[]) {\r\n    this.resetPage();\r\n    this.searchForm.get('active_status__in').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onToggleStatuses() {\r\n    this.isShowStatuses = !this.isShowStatuses;\r\n  }\r\n\r\n  onChangePage(page: number) {\r\n    this.firstPage = page;\r\n  }\r\n\r\n  onPage(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onSelectOrder() {\r\n    this.orderStatusTableComponent.selectedOrder = this.selectedOrder;\r\n  }\r\n\r\n  onSelectionOrder(order: Order) {\r\n    this.selectedOrder = order;\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.search$.next();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.search$.next();\r\n  }\r\n\r\n  resetPage() {\r\n    this.searchForm.get('page').patchValue(1);\r\n    this.search$.next();\r\n  }\r\n\r\n\r\n  setOrderProduct($event: number) {\r\n    this.searchForm.get('order_root_list_id').setValue($event);\r\n    this.resetPage();\r\n  }\r\n\r\n  setOrderNomenclature($event: number) {\r\n    this.searchForm.get('contains_nomenclature').setValue($event);\r\n    this.resetPage();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'outsourcing'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Outsourcing Chains</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        (click)=\"onCreateChain()\"\r\n        pButton\r\n        [loading]=\"isCreating\"\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Create Outsource Chain\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n\r\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n      <div class=\"filters-visibility__header\">\r\n        <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n      </div>\r\n\r\n      <button\r\n        class=\"icon pi\"\r\n        [class.pi-angle-double-up]=\"!isHideFilters\"\r\n        [class.pi-angle-double-down]=\"isHideFilters\"\r\n        [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n        tooltipPosition=\"left\"\r\n      ></button>\r\n\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Nomenclature</label>\r\n              <pek-product-lists-nomenclature-picker\r\n                [query]=\"queryNomenclatureList\"\r\n                (selectRootList)=\"setOrderNomenclature($event)\"\r\n              ></pek-product-lists-nomenclature-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Company</label>\r\n              <pek-company-picker (selectCompany)=\"onSelectCompany($event)\"></pek-company-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Root List</label>\r\n              <pek-root-list-picker-by-order-type\r\n                [query]=\"queryProdList\"\r\n              (selectRootList)=\"setOrderProduct($event)\"\r\n              ></pek-root-list-picker-by-order-type>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Status</label>\r\n              <pek-multi-statuses-picker\r\n                (selectStatuses)=\"onSelectStatuses($event)\"\r\n                (isFinalStatusSelected)=\"finalStatusSelected = $event\"\r\n                [accountingType]=\"2\"\r\n              ></pek-multi-statuses-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>From</label>\r\n              <p-calendar\r\n                formControlName=\"created_after\"\r\n                dataType=\"date\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                (ngModelChange)=\"resetPage()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>To</label>\r\n              <p-calendar\r\n                dataType=\"date\"\r\n                formControlName=\"created_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                (ngModelChange)=\"resetPage()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group form-group_checkbox\">\r\n              <label>Declined</label>\r\n              <p-triStateCheckbox\r\n                formControlName=\"contains_declined_payment\"\r\n                (ngModelChange)=\"resetPage()\"\r\n              ></p-triStateCheckbox>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"page__table\">\r\n        <div [ngClass]=\"{'d-none': !isShowStatuses}\">\r\n          <pek-order-statuses-table\r\n            #orderTable\r\n            [isPaginated]=\"isShowAll\"\r\n            [isPaginatedOutside]=\"true\"\r\n            [orders]=\"orders\"\r\n            [isLoading]=\"isLoading\"\r\n            (changePage)=\"onChangePage($event)\"\r\n            (selectOrder)=\"onSelectionOrder($event)\"\r\n          ></pek-order-statuses-table>\r\n        </div>\r\n        <div [ngClass]=\"{'d-none': isShowStatuses}\" class=\"table-pagination-preloader\">\r\n          <p-table\r\n            #dt\r\n            selectionMode=\"single\"\r\n            [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n            [scrollable]=\"true\"\r\n            dataKey=\"id\"\r\n            [(first)]=\"firstPage\"\r\n            [paginator]=\"false\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedOrder\"\r\n            [value]=\"orders\"\r\n            [totalRecords]=\"countOrders\"\r\n            (selectionChange)=\"onSelectOrder()\"\r\n          >\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th class=\"text-center\" style=\"width: 3%;\">#</th>\r\n                <th class=\"text-center\" style=\"width: 10%;\">Date</th>\r\n                <th class=\"text-center\" style=\"width: 7%;\">Order ID</th>\r\n                <th class=\"text-center\" style=\"width: 15%;\">Supplier</th>\r\n                <th class=\"text-center\" style=\"width: 15%;\">Technologies</th>\r\n                <th style=\"width: 15%;\">Comment</th>\r\n                <th style=\"width: 15%;\">Root Lists</th>\r\n                <th class=\"text-center\" style=\"width: 10%;\">Status</th>\r\n                <th class=\"text-center\" style=\"width: 10%;\">Completion</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"order\">\r\n                <td class=\"text-center\" style=\"width: 3%;\">{{(this.searchForm.get('page').value - 1) * 10 + i + 1}}</td>\r\n                <td class=\"text-center\" style=\"width: 10%;\">{{order.created | date:'dd/MM/yyyy'}}</td>\r\n                <td class=\"text-center\" style=\"width: 7%;\">{{order.id}}</td>\r\n                <td class=\"text-center\" style=\"width: 15%;\">{{order.supplier?.name}}</td>\r\n                <td class=\"text-center\" style=\"width: 15%;\">\r\n                  <span *ngFor=\"let tech of order.ordered_products_unique_technologies; let last=last\">\r\n                    {{tech.name}}<span *ngIf=\"!last\">,</span>\r\n                  </span>\r\n                </td>\r\n                <td style=\"width: 15%;\">\r\n                  <div class=\"word-break\">\r\n                    {{order.comment}}\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 15%;\">\r\n                  <div class=\"word-break\"\r\n                       *ngFor=\"let item of getRootLists(order.root_production_list_products); let idx = index\">\r\n                    {{item.list.nomenclature.code}}~{{item.list.nomenclature.name}} ({{item.count}})\r\n                  </div>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 10%;\">{{order.status?.value}}</td>\r\n                <td class=\"text-center\" style=\"width: 10%;\">{{order?.activeStatusDate | date: 'dd/MM/yyyy'}}</td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n                  <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </p-table>\r\n          <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n            <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n          </div>\r\n        </div>\r\n      <div\r\n        class=\"paginator-wrapper\"\r\n        *ngIf=\"!isShowAll\"\r\n        [class.paginator-wrapper_hide]=\"orders.length === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"countOrders\"\r\n          (onPageChange)=\"onPage($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll()\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n\r\n      <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"onShowPartial()\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #actionButtons>\r\n  <div class=\"action-buttons\">\r\n    <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedOrder\"></p-menubar>\r\n    <button\r\n      class=\"ml-2\"\r\n      pButton\r\n      type=\"button\"\r\n      icon=\"pi pi-table\"\r\n      [label]=\"(isShowStatuses ? 'Close' : 'Open') +  ' Order Statuses'\"\r\n      (click)=\"onToggleStatuses()\"\r\n    ></button>\r\n  </div>\r\n</ng-template>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {NavigationLink} from '../../../layout/navigation-route';\r\n\r\n@Component({\r\n  selector: 'pek-outsourcing-layout',\r\n  templateUrl: './outsourcing-layout.component.html',\r\n  styleUrls: ['./outsourcing-layout.component.scss']\r\n})\r\nexport class OutsourcingLayoutComponent implements OnInit {\r\n\r\n  routes: NavigationLink[] = [\r\n    {label: 'Assembly & Manufactured Requests', commands: ['requests']},\r\n    {label: 'Outsourcing Chain Creation', commands: ['order-products']},\r\n    {label: 'Outsourcing Chains', commands: ['chains']},\r\n  ];\r\n\r\n  settingsRoutes: NavigationLink[] = [\r\n    {label: 'Order Statuses', commands: ['statuses']},\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'Outsourcing'\"\r\n  [routes]=\"routes\"\r\n  [settingsRoutes]=\"settingsRoutes\"\r\n></pek-header>\r\n<router-outlet></router-outlet>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {OrderPageComponent} from '@shared/components/order-page/order-page.component';\r\nimport {MessageService} from 'primeng/api';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-outsourcing-order-page',\r\n  templateUrl: './outsourcing-order-page.component.html',\r\n  styleUrls: ['./outsourcing-order-page.component.scss']\r\n})\r\nexport class OutsourcingOrderPageComponent implements OnInit {\r\n  @ViewChild('orderPage') orderPage: OrderPageComponent;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    can_select_supplier: [false]\r\n  });\r\n\r\n  orderId: number;\r\n  isOrderLoading = true;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly orderService: OrderService,\r\n    private messageService: MessageService,\r\n    private readonly modalService: ModalService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('can_select_supplier').disable();\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.orderId = +id),\r\n    ).subscribe()\r\n  }\r\n\r\n  openOrderFiles() {\r\n    this.orderService.filesModal$.next();\r\n  }\r\n\r\n  editOrder() {\r\n    this.orderService.editOrderModal$.next()\r\n  }\r\n\r\n  loaded(order: Order) {\r\n    console.log('this.order loaded()', order);\r\n    if (!order.can_select_supplier) {\r\n      this.form.get('can_select_supplier').enable();\r\n    } else {\r\n      this.form.get('can_select_supplier').setValue(true);\r\n      this.form.get('can_select_supplier').disable();\r\n    }\r\n    this.isOrderLoading = false;\r\n  }\r\n\r\n  tenderToggle($event: any) {\r\n    this.modalService.confirm('danger', 'confirm').subscribe(confirm => {\r\n      if (confirm) {\r\n        const isBlocked = this.orderPage.checkIfIsBlockedToTenderTransform();\r\n        if (isBlocked) {\r\n          this.messageService.add({severity: 'error', summary: `Existing Invoice or Proforma Invoices`,\r\n            detail: `Can't turn to tender with existing Invoice or Proforma Invoices!\\n Remove before turning to tender`});\r\n          this.form.get('can_select_supplier').setValue(false);\r\n        } else {\r\n\r\n          this.orderService.activateTenderSuppliers(this.orderId).subscribe(() => {\r\n            this.orderPage.clearSupplierRelatedFields();\r\n            this.form.get('can_select_supplier').setValue(true);\r\n            this.form.get('can_select_supplier').disable();\r\n          });\r\n        }\r\n      } else {\r\n        this.form.get('can_select_supplier').setValue(false);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"procurement-order-page\">\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <div class=\"page__title\">\r\n        <pek-module-icon [module]=\"'outsourcing'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>Order {{orderId}}</h1>\r\n      </div>\r\n      <div class=\"page__tools\">\r\n        <form class=\"align-items-center d-flex\" [formGroup]=\"form\">\r\n          <p-checkbox\r\n            inputId=\"binary\"\r\n            formControlName=\"can_select_supplier\"\r\n            [binary]=\"true\"\r\n            (onChange)=\"tenderToggle($event)\"\r\n          >\r\n          </p-checkbox>\r\n          <label class=\"capitalize ml-2 mr-3\">enable tender supplier required</label>\r\n        </form>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-file\"\r\n          label=\"Order Files\"\r\n          class=\"mr-2\"\r\n          (click)=\"openOrderFiles()\"\r\n          [disabled]=\"isOrderLoading\"\r\n        >\r\n        </button>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-pencil\"\r\n          label=\"Lead Date & Status\"\r\n          (click)=\"editOrder()\"\r\n          [disabled]=\"isOrderLoading\"\r\n        >\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <pek-order-page\r\n      #orderPage\r\n      (loaded)=\"loaded($event)\"\r\n      [orderId]=\"orderId\"\r\n      [orderType]=\"'outsourcing'\"\r\n    ></pek-order-page>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-outsourcing-order-statuses',\r\n  templateUrl: './outsourcing-order-statuses.component.html',\r\n  styleUrls: ['./outsourcing-order-statuses.component.scss']\r\n})\r\nexport class OutsourcingOrderStatusesComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"procurement-order-statuses\">\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <div class=\"page__title\">\r\n        <pek-module-icon [module]=\"'outsourcing'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>Order Statuses</h1>\r\n      </div>\r\n      <div class=\"page__tools\">\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <h2 class=\"mb-4\">Manual Statuses</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <pek-order-statuses [statusType]=\"2\"></pek-order-statuses>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Automatic Statuses</h2>\r\n\r\n    <div class=\"page__card\">\r\n      <pek-order-statuses [statusType]=\"2\" [isAutoStatus]=\"true\"></pek-order-statuses>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {OrderProduct} from '../../../procurement/models/order-product';\r\nimport {BehaviorSubject, iif, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {Technology} from '../../../product-structure/models/technology';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-outsourcing-requests',\r\n  templateUrl: './outsourcing-requests.component.html',\r\n  styleUrls: ['./outsourcing-requests.component.scss']\r\n})\r\nexport class OutsourcingRequestsComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  statuses = [\r\n    {label: 'ORDERED', value: 'ordered'},\r\n    {label: 'NOT ORDERED', value: 'not_ordered'},\r\n    {label: 'PARTLY ORDERED', value: 'partially_ordered'}\r\n  ];\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    nomenclature__name: [null],\r\n    nomenclature__code: [null],\r\n    request_date: [null],\r\n    technologies_ids: [null],\r\n    status: ['not_ordered']\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n  isShowAll = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProducts: OrderProduct[] = [];\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n\r\n  orderProducts$: Observable<OrderProduct[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      iif(() =>\r\n          !this.isShowAll,\r\n        this.orderProductService.getGroupedOutsourceForPagination(this.query).pipe(\r\n          tap(response => this.productsCount = response.count),\r\n          map(response => response.results.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          })),\r\n        ),\r\n        this.orderProductService.getGroupedOutsource(this.query).pipe(\r\n          tap(products => this.productsCount = products.length),\r\n          map(products => products.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          }))\r\n        )\r\n      ),\r\n    ),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly orderService: OrderService,\r\n    private readonly adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  setProductStatus(product: OrderProduct) {\r\n    let status: string;\r\n\r\n    if (product.ordered_quantity >= product.initial_quantity) {\r\n      status = 'A0';\r\n    } else if (product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0) {\r\n      status = 'A1';\r\n    } else {\r\n      status = 'A2';\r\n    }\r\n\r\n    return status;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProducts = [];\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: true},)\r\n    }\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  getSmallDescription(description: string) {\r\n    if (description && description?.length > 40) return description.substring(0, 40) + '...';\r\n    else return description;\r\n  }\r\n\r\n  onCreateRequest() {\r\n    this.orderProductService.openAddOutsourcingRequestModal(null).subscribe(products => {\r\n      if (products) {\r\n        this.search$.next();\r\n      }\r\n    });\r\n  }\r\n\r\n  onSelectTechnologies(technologies: Technology[]) {\r\n    this.searchForm.get('technologies_ids').patchValue(technologies?.map(t => t.id)?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isShowAll = value;\r\n\r\n    if (!this.isShowAll) {\r\n      this.currentPage = 1\r\n    }\r\n\r\n    this.search$.next()\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'outsourcing'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Assembly & Manufactured Requests</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"New Request\"\r\n        (click)=\"onCreateRequest()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form\r\n      [formGroup]=\"searchForm\"\r\n      class=\"form mb-3\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"nomenclature__name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Code</label>\r\n            <input\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"nomenclature__code\"\r\n              (ngModelChange)=\"code$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Technologies</label>\r\n            <pek-multi-technology-picker (selectTechnologies)=\"onSelectTechnologies($event)\"></pek-multi-technology-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Date</label>\r\n            <p-calendar\r\n              formControlName=\"request_date\"\r\n              dataType=\"date\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Status</label>\r\n            <p-dropdown\r\n              [options]=\"statuses\"\r\n              formControlName=\"status\"\r\n              optionValue=\"value\"\r\n              [showClear]=\"true\"\r\n              placeholder=\"Choose Status\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            ></p-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"multiple\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 24.25rem)\"\r\n        [value]=\"orderProducts$ | async\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 3%\">#</th>\r\n            <th style=\"width: 11%\">Code</th>\r\n            <th style=\"width: 10%\" pSortableColumn=\"nomenclature.name\">Name</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Request Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Ordered Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">UOM</th>\r\n            <th style=\"width: 10%\">Description</th>\r\n            <th style=\"width: 6%\" class=\"text-center\">Date</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Request Type</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Free Ordered Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Chains</th>\r\n            <th style=\"width: 11%\">Root Lists</th>\r\n            <th style=\"width: 10%\">Production Lists</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Status</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 11%\">{{product.nomenclature.code}}</td>\r\n            <td style=\"width: 10%\">{{product.nomenclature.name}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{product.initial_quantity}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{product.ordered_quantity}}</td>\r\n            <td\r\n              style=\"width: 5%\" class=\"text-center\">{{product.nomenclature.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs'}}\r\n            </td>\r\n            <td style=\"width: 10%\">\r\n              <div class=\"word-break\">\r\n                {{getSmallDescription(product.nomenclature.description)}}\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">{{product.request_date|date:'dd/MM/yyyy'}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <ng-container *ngIf=\"product.request_type==1\">Auto</ng-container>\r\n              <ng-container *ngIf=\"product.request_type==0\">Manual</ng-container>\r\n            </td>\r\n            <td style=\"width: 7%\" class=\"text-center\">{{product.free_quantity_without_final_status ? product.free_quantity_without_final_status : 0}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <ng-container *ngFor=\"let order of product.orders; let idx = index;\">\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 1\"\r\n                   [routerLink]=\"['/dash/procurement/orders/products',order.id]\">\r\n                  {{order.id}}</a>\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 2\"\r\n                   [routerLink]=\"['/dash/outsource/outsource-chain/products', order.id]\">\r\n                  {{order.id}}<span *ngIf=\"idx !== product.orders.length - 1\">,</span>\r\n                </a>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 11%\">\r\n              <ng-container *ngFor=\"let list of product.root_production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.root_production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 10%\">\r\n              <ng-container *ngFor=\"let list of product.production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 7%\" class=\"text-center\">\r\n              <ng-container *ngIf=\"product.ordered_quantity>=product.initial_quantity\"><span\r\n                class=\"badge badge_success\">ORDERED</span></ng-container>\r\n              <ng-container\r\n                *ngIf=\"product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0\">\r\n                <span class=\"badge badge_warning\">PARTLY ORDERED </span>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"product.ordered_quantity==0\"><span class=\"badge badge_danger\">NOT\r\n                                        ORDERED</span></ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"16\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n      <div\r\n        *ngIf=\"!isShowAll\"\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"productsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll(true)\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(false)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Inject, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {BehaviorSubject, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, finalize, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {RequestService} from '../../../warehouse/services/request.service';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-add-material-to-order',\r\n  templateUrl: './add-material-to-order.component.html',\r\n  styleUrls: ['./add-material-to-order.component.scss']\r\n})\r\nexport class AddMaterialToOrderComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  isSaving = false;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    code: [null],\r\n    root_categories: [null],\r\n    category: [null],\r\n    type: ['0']\r\n  });\r\n\r\n  createForm: FormGroup = this.fb.group({\r\n    required_quantity: [0, [Validators.required, Validators.min(1)]],\r\n    for_order_product: [null, Validators.required],\r\n    material_nomenclature: [null, Validators.required],\r\n    technology: [null]\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProduct: Nomenclature;\r\n\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  products$: Observable<Nomenclature[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.nomenclatureService.getForPagination(this.query)),\r\n    tap(response => this.productsCount = response.count),\r\n    map(response => response.results),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly requestService: RequestService,\r\n    private dialogRef: MatDialogRef<AddMaterialToOrderComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { productId: number }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.createForm.get('for_order_product').patchValue(this.data.productId)\r\n\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProduct = null;\r\n\r\n    this.createForm.get('required_quantity').patchValue(null);\r\n    this.createForm.get('technology').patchValue(null);\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'paginated', value: true},\r\n      {name: 'page', value: this.currentPage},\r\n    ];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value) {\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    this.searchForm.get('category').patchValue(category?.name || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  clearCreatForm() {\r\n    this.createForm.get('required_quantity').patchValue(0);\r\n  }\r\n\r\n  onSelectProduct() {\r\n    this.createForm.get('material_nomenclature').patchValue(this.selectedProduct?.id || null);\r\n  }\r\n\r\n  onAddMaterial() {\r\n    this.isSaving = true;\r\n\r\n    this.requestService.create(this.createForm.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => {\r\n      this.dialogRef.close(true)\r\n    })\r\n  }\r\n\r\n  onSelectNomenclatureType(type: ENomenclatureType) {\r\n    this.searchForm.get('type').patchValue(type);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectRootCategories(ids: string) {\r\n    this.searchForm.get('root_categories').patchValue(ids ?? null)\r\n    this.search$.next();\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Add Material To Order product item\r\n  </h2>\r\n\r\n  <p>\r\n    Please Search the Item from catalogue and select item for product item\r\n  </p>\r\n</div>\r\n\r\n<div class=\"add-order-product-to-order__row\">\r\n  <div class=\"add-order-product-to-order__column-left\">\r\n    <pek-categories-tree-picker (categorySelected)=\"onSelectCategory($event)\"></pek-categories-tree-picker>\r\n  </div>\r\n  <div class=\"add-order-product-to-order__column-right\">\r\n    <form [formGroup]=\"searchForm\">\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Type</label>\r\n            <pek-nomenclature-type-picker\r\n              [currentNomenclatureType]=\"searchForm.get('type').value\"\r\n              (choiceNomenclatureType)=\"onSelectNomenclatureType($event)\"\r\n            ></pek-nomenclature-type-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Root Categories</label>\r\n            <pek-multi-product-structure-categories-picker\r\n              (choiceCategories)=\"onSelectRootCategories($event)\"\r\n            ></pek-multi-product-structure-categories-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Name</label>\r\n            <input\r\n              pInputText\r\n              formControlName=\"name\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              id=\"name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label for=\"code\">Code</label>\r\n            <input\r\n              pInputText\r\n              formControlName=\"code\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              id=\"code\"\r\n              (ngModelChange)=\"code$.next()\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"table-pagination-preloader\">\r\n      <mat-dialog-content>\r\n        <p-table\r\n          #dt\r\n          selectionMode=\"single\"\r\n          dataKey=\"id\"\r\n          rowExpandMode=\"single\"\r\n          [rows]=\"10\"\r\n          [value]=\"products$ | async\"\r\n          [(selection)]=\"selectedProduct\"\r\n          (selectionChange)=\"onSelectProduct()\"\r\n          (onRowExpand)=\"clearCreatForm()\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n              <th style=\"width: 25%\">Code</th>\r\n              <th style=\"width: 25%\">Name</th>\r\n              <th style=\"width: 30%\">Description</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">UOM</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n            <tr\r\n              [pSelectableRow]=\"product\"\r\n              [pRowToggler]=\"product\"\r\n              [pSelectableRowDisabled]=\"product.approved === '0' && product.type === '0'\"\r\n              [pRowTogglerDisabled]=\"product.approved === '0' && product.type === '0'\"\r\n            >\r\n              <td style=\"width: 5%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n              <td style=\"width: 25%\">\r\n                {{ product.code }}\r\n              </td>\r\n              <td style=\"width: 25%\">\r\n                  <span\r\n                    *ngIf=\"product.approved === '0' && product.type === '0'\"\r\n                    class=\"badge badge_warning\"\r\n                    style=\"margin-right: 0.25rem\"\r\n                  >\r\n                    NEW\r\n                  </span>\r\n                {{ product.name }}\r\n              </td>\r\n              <td class=\"word-break\" style=\"width: 30%\">{{product.description}}</td>\r\n              <td class=\"text-center\" style=\"width: 15%\">\r\n                {{product.category?.unit_of_measure?.symbol ? product.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"rowexpansion\" let-product>\r\n            <tr>\r\n              <td colspan=\"5\">\r\n                <form [formGroup]=\"createForm\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-6\" [class.col-12]=\"selectedProduct?.type === '0'\">\r\n                      <div class=\"form-group\">\r\n                        <label>Quantity*</label>\r\n                        <input\r\n                          pInputText\r\n                          formControlName=\"required_quantity\"\r\n                          min=\"1\"\r\n                          class=\"form-control\"\r\n                          type=\"number\"\r\n                        >\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-6\" *ngIf=\"selectedProduct?.type !== '0'\">\r\n                      <div class=\"form-group\">\r\n                        <label>Technology*</label>\r\n                        <p-dropdown\r\n                          [showClear]=\"true\"\r\n                          *ngIf=\"product.technologies.length > 0\"\r\n                          [autoDisplayFirst]=\"false\"\r\n                          [options]=\"product.technologies\"\r\n                          formControlName=\"technology\"\r\n                          placeholder=\"Technology\"\r\n                          optionLabel=\"name\"\r\n                          optionValue=\"id\"\r\n                        >\r\n                        </p-dropdown>\r\n                        <div class=\"text-danger\" *ngIf=\"product.technologies.length === 0\">No technology to select from\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </form>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </mat-dialog-content>\r\n      <div\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"productsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Add\"\r\n    [disabled]=\"createForm.invalid || (this.selectedProduct?.type !== '0' && !this.createForm.get('technology').value)\"\r\n    [loading]=\"isSaving\"\r\n    (click)=\"onAddMaterial()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {OrderSupplierService} from '../../../confirmation/services/order-supplier.service';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\nimport {finalize} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-add-supplier-to-order',\r\n  templateUrl: './add-supplier-to-order.component.html',\r\n  styleUrls: ['./add-supplier-to-order.component.scss']\r\n})\r\nexport class AddSupplierToOrderComponent implements OnInit {\r\n  isLoading = true;\r\n  companies: Partial<Company>[] = [];\r\n\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    list_id: [null, Validators.required],\r\n    supplier_id: [null, Validators.required],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly companyService: CompanyService,\r\n    private dialogRef: MatDialogRef<AddSupplierToOrderComponent>,\r\n    private readonly orderSupplierService: OrderSupplierService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { id: number }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('list_id').patchValue(this.data.id);\r\n    this.getCompanies();\r\n  }\r\n\r\n  getCompanies() {\r\n    this.companyService.getShortsCompanies([{\r\n      name: 'categories', value: 1\r\n    }]).subscribe(companies => {\r\n      this.companies = companies;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onAdd() {\r\n    this.isSaving = true;\r\n    this.orderSupplierService.addSupplierToOrder(this.form.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(company => this.dialogRef.close(company));\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">Add Supplier to Order</h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Supplier*</label>\r\n        <p-dropdown\r\n          *ngIf=\"!isLoading else spinner\"\r\n          [filter]=\"true\"\r\n          [options]=\"companies\"\r\n          placeholder=\"Select Company\"\r\n          formControlName=\"supplier_id\"\r\n          optionLabel=\"name\"\r\n          optionValue=\"id\"\r\n          [showClear]=\"true\"\r\n        >\r\n        </p-dropdown>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      [loading]=\"isSaving\"\r\n      [disabled]=\"form.invalid\"\r\n      [label]=\"'Add'\"\r\n      (click)=\"onAdd()\"\r\n    ></button>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Inject, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {BehaviorSubject, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, finalize, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-create-outsourcing-request',\r\n  templateUrl: './create-outsourcing-request.component.html',\r\n  styleUrls: ['./create-outsourcing-request.component.scss']\r\n})\r\nexport class CreateOutsourcingRequestComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  nomenclatureFilterTypes = [\r\n    {name: 'Manufactured', value: '2'},\r\n    {name: 'Assembly', value: '1'}\r\n  ];\r\n\r\n  isSaving = false;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [''],\r\n    code: [''],\r\n    type: ['2'],\r\n  });\r\n\r\n  createForm: FormGroup = this.fb.group({\r\n    current_technology: [null, Validators.required],\r\n    quantity: [0, [Validators.required, Validators.min(1)]],\r\n    order: [null],\r\n    nomenclature: [null, Validators.required],\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProduct: Nomenclature;\r\n\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  products$: Observable<Nomenclature[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.nomenclatureService.getForPagination(this.query)),\r\n    tap(response => this.productsCount = response.count),\r\n    map(response => response.results),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly adapterService: AdapterService,\r\n    private dialogRef: MatDialogRef<CreateOutsourcingRequestComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { orderId: number }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.createForm.get('order').patchValue(this.data.orderId);\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProduct = null;\r\n\r\n    this.createForm.get('quantity').patchValue(null);\r\n    this.createForm.get('current_technology').patchValue(null);\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'paginated', value: true},\r\n      {name: 'page', value: this.currentPage},\r\n    ];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value) {\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onSelectProduct() {\r\n    this.createForm.get('nomenclature').patchValue(this.selectedProduct?.id || null);\r\n  }\r\n\r\n  clearCreatForm() {\r\n    this.createForm.get('quantity').patchValue(0);\r\n    this.createForm.get('current_technology').patchValue(null);\r\n  }\r\n\r\n  onAddProduct() {\r\n    this.isSaving = true;\r\n    this.orderProductService.create(this.createForm.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(order => {\r\n      this.dialogRef.close(order);\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <ng-container *ngIf=\"!data.orderId\">\r\n    <h2 class=\"modal-header__title\">Add a New Item To Request</h2>\r\n    <p>Please Search the Item from catalogue and select items for request</p>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"data.orderId\">\r\n    <h2 class=\"modal-header__title\">Add A New Item To Order</h2>\r\n  </ng-container>\r\n</div>\r\n\r\n<form [formGroup]=\"searchForm\">\r\n  <div class=\"row\">\r\n    <div class=\"col-4\">\r\n      <div class=\"form-group\">\r\n        <label>Type</label>\r\n        <p-dropdown\r\n          formControlName=\"type\"\r\n          [options]=\"nomenclatureFilterTypes\"\r\n          placeholder=\"Type\"\r\n          optionLabel=\"name\"\r\n          optionValue=\"value\"\r\n          (ngModelChange)=\"search$.next()\"\r\n          [showClear]=\"true\"\r\n        >\r\n        </p-dropdown>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-4\">\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name</label>\r\n        <input\r\n          pInputText\r\n          formControlName=\"name\"\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"name\"\r\n          (ngModelChange)=\"name$.next()\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"col-4\">\r\n      <div class=\"form-group\">\r\n        <label for=\"code\">Code</label>\r\n        <input\r\n          pInputText\r\n          formControlName=\"code\"\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"code\"\r\n          (ngModelChange)=\"code$.next()\"\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</form>\r\n\r\n<div class=\"table-pagination-preloader\">\r\n  <mat-dialog-content>\r\n    <p-table\r\n      #dt\r\n      class=\"chain-create-table\"\r\n      selectionMode=\"single\"\r\n      dataKey=\"id\"\r\n      rowExpandMode=\"single\"\r\n      [rows]=\"10\"\r\n      [value]=\"products$ | async\"\r\n      [(selection)]=\"selectedProduct\"\r\n      (selectionChange)=\"onSelectProduct()\"\r\n      (onRowExpand)=\"clearCreatForm()\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n          <th style=\"width: 25%\">Code</th>\r\n          <th style=\"width: 25%\">Name</th>\r\n          <th style=\"width: 30%\">Description</th>\r\n          <th style=\"width: 15%\" class=\"text-center\">UOM</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n        <tr\r\n          [pSelectableRow]=\"product\"\r\n          [pRowToggler]=\"product\"\r\n          [pSelectableRowDisabled]=\"product.approved === '0' && product.type === '0'\"\r\n          [pRowTogglerDisabled]=\"product.approved === '0' && product.type === '0'\"\r\n        >\r\n          <td style=\"width: 5%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n          <td style=\"width: 25%\">\r\n            {{ product.code }}\r\n          </td>\r\n          <td style=\"width: 25%\">\r\n                  <span\r\n                    *ngIf=\"product.approved === '0' && product.type === '0'\"\r\n                    class=\"badge badge_warning\"\r\n                    style=\"margin-right: 0.25rem\"\r\n                  >\r\n                    NEW\r\n                  </span>\r\n            {{ product.name }}\r\n          </td>\r\n          <td class=\"word-break\" style=\"width: 30%\">{{product.description}}</td>\r\n          <td class=\"text-center\" style=\"width: 15%\">\r\n            {{product.category?.unit_of_measure?.symbol ? product.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n          </td>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"rowexpansion\" let-product>\r\n        <tr>\r\n          <td colspan=\"5\">\r\n            <form [formGroup]=\"createForm\">\r\n              <div class=\"row\">\r\n                <div class=\"col-6\">\r\n                  <div class=\"form-group\">\r\n                    <label>Quantity*</label>\r\n                    <input\r\n                      pInputText\r\n                      formControlName=\"quantity\"\r\n                      min=\"1\"\r\n                      class=\"form-control\"\r\n                      type=\"number\"\r\n                    >\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-6\">\r\n                  <div class=\"form-group\">\r\n                    <label>Technology*</label>\r\n                    <p-dropdown\r\n                      [showClear]=\"true\"\r\n                      *ngIf=\"product.technologies.length > 0\"\r\n                      [autoDisplayFirst]=\"false\"\r\n                      [options]=\"product.technologies\"\r\n                      formControlName=\"current_technology\"\r\n                      placeholder=\"Technology\"\r\n                      optionLabel=\"name\"\r\n                      optionValue=\"id\"\r\n                    >\r\n                    </p-dropdown>\r\n                    <div class=\"text-danger\" *ngIf=\"product.technologies.length === 0\">No technology to select from\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n\r\n    <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n    </div>\r\n  </mat-dialog-content>\r\n</div>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <div\r\n    class=\"paginator-wrapper\"\r\n    [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n  >\r\n    <p-paginator\r\n      #paginator\r\n      [rows]=\"10\"\r\n      [totalRecords]=\"productsCount\"\r\n      (onPageChange)=\"paginate($event)\"\r\n    >\r\n    </p-paginator>\r\n  </div>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Add\"\r\n    [disabled]=\"createForm.invalid\"\r\n    [loading]=\"isSaving\"\r\n    (click)=\"onAddProduct()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {OrderSupplier} from '../../../confirmation/models/order-supplier';\r\nimport {OrderSupplierService} from '../../../confirmation/services/order-supplier.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {finalize} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-edit-order-supplier',\r\n  templateUrl: './edit-order-supplier.component.html',\r\n  styleUrls: ['./edit-order-supplier.component.scss']\r\n})\r\nexport class EditOrderSupplierComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    price: [0],\r\n    comment: [''],\r\n    delivery_date: [null],\r\n  });\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<EditOrderSupplierComponent>,\r\n    private readonly orderSupplierService: OrderSupplierService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: { orderSupplier: OrderSupplier }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.patchValue(this.data.orderSupplier);\r\n    this.form.get('delivery_date').patchValue(new Date(this.data.orderSupplier.delivery_date));\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    const send = {\r\n      id: this.data.orderSupplier.id,\r\n      price: this.form.get('price').value,\r\n      comment: this.form.get('comment').value,\r\n      delivery_date: this.adapterService.dateAdapter(this.form.get('delivery_date').value),\r\n    };\r\n\r\n    this.orderSupplierService.updateSupplier(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(updateSupplier => {\r\n      this.dialogRef.close(updateSupplier);\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">Add Supplier to Order</h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"row\">\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label for=\"price\">Price</label>\r\n          <input type=\"number\" id=\"price\" pInputText formControlName=\"price\">\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label>Delivery Date</label>\r\n          <p-calendar\r\n            [firstDayOfWeek]=\"1\"\r\n            [showButtonBar]=\"true\"\r\n            formControlName=\"delivery_date\"\r\n            inputId=\"basic\"\r\n            dateFormat=\"dd/mm/yy\"\r\n            [readonlyInput]=\"true\"\r\n          ></p-calendar>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12\">\r\n        <div class=\"form-group\">\r\n          <label for=\"comment\">Comment*</label>\r\n          <textarea id=\"comment\" [rows]=\"2\" pInputTextarea [autoResize]=\"true\" formControlName=\"comment\"></textarea>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    [label]=\"'Edit'\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {WarehouseProductService} from '../../../warehouse/services/warehouse-product.service';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {WarehouseProduct, WarehouseProducts} from '../../../warehouse/models/warehouse-product';\r\nimport {BehaviorSubject, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {MatDialogRef} from '@angular/material/dialog';\r\nimport {Category} from '../../../product-structure/models/category';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-search-product-in-warehouse',\r\n  templateUrl: './search-product-in-warehouse.component.html',\r\n  styleUrls: ['./search-product-in-warehouse.component.scss']\r\n})\r\nexport class SearchProductInWarehouseComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [''],\r\n    code: [''],\r\n    warehouse: [null],\r\n    locator: [null],\r\n    type: [null],\r\n    category: [null],\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProduct: WarehouseProduct;\r\n\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  products$: Observable<WarehouseProduct[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.warehouseProductService.getGroupedPagination(this.query)),\r\n    tap(response => this.productsCount = response.count),\r\n    map(response => response.results),\r\n    map(products => products.map((product, index) => {\r\n      product.uid = index;\r\n      if (typeof product.nomenclature !== 'number') {\r\n        // @ts-ignore\r\n        product.uom = product.nomenclature?.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs';\r\n      }\r\n      return product\r\n    })),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  )\r\n\r\n  constructor(\r\n    private readonly warehouseProductService: WarehouseProductService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<SearchProductInWarehouseComponent>,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProduct = null;\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'paginated', value: true},\r\n      {name: 'page', value: this.currentPage},\r\n      {name: 'at_area', value: false},\r\n    ];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value) {\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    this.searchForm.get('category').patchValue(category?.id || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onPickProduct() {\r\n    this.dialogRef.close(this.selectedProduct)\r\n  }\r\n\r\n  onSelectWarehouse(id: number) {\r\n    this.searchForm.get('warehouse').patchValue(id);\r\n    this.searchForm.get('locator').patchValue(null);\r\n    this.search$.next()\r\n  }\r\n\r\n  onSelectLocator(id: number) {\r\n    this.searchForm.get('locator').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectNomenclatureType(type: ENomenclatureType) {\r\n    this.searchForm.get('type').patchValue(type);\r\n    this.search$.next()\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Search in Warehouse\r\n  </h2>\r\n</div>\r\n\r\n<div class=\"search-product-in-warehouse__row\">\r\n  <div class=\"search-product-in-warehouse__column-left\">\r\n    <pek-categories-tree-picker (categorySelected)=\"onSelectCategory($event)\"></pek-categories-tree-picker>\r\n  </div>\r\n  <div class=\"search-product-in-warehouse__column-right\">\r\n    <form [formGroup]=\"searchForm\">\r\n      <div class=\"row\">\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Name</label>\r\n            <input\r\n              pInputText\r\n              formControlName=\"name\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              id=\"name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label for=\"code\">Code</label>\r\n            <input\r\n              pInputText\r\n              formControlName=\"code\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              id=\"code\"\r\n              (ngModelChange)=\"code$.next()\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Warehouses</label>\r\n            <pek-warehouse-picker\r\n              (selectWarehouse)=\"onSelectWarehouse($event)\"\r\n            ></pek-warehouse-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Locator</label>\r\n            <pek-locator-picker\r\n              (selectLocator)=\"onSelectLocator($event)\"\r\n              [warehouseId]=\"searchForm.get('warehouse').value\"\r\n              [isAllLocators]=\"false\"\r\n              [isDisabled]=\"true\"\r\n            ></pek-locator-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Type</label>\r\n            <pek-nomenclature-type-picker\r\n              (choiceNomenclatureType)=\"onSelectNomenclatureType($event)\"\r\n            ></pek-nomenclature-type-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"table-pagination-preloader\">\r\n      <mat-dialog-content>\r\n        <p-table\r\n          #dt\r\n          selectionMode=\"single\"\r\n          dataKey=\"id\"\r\n          [rows]=\"10\"\r\n          [value]=\"products$ | async\"\r\n          [(selection)]=\"selectedProduct\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n              <th style=\"width: 17%\">Code</th>\r\n              <th style=\"width: 18%\">Name</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Quantity</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">UOM</th>\r\n              <th style=\"width: 13%\" class=\"text-center\">Category</th>\r\n              <th style=\"width: 12%\" class=\"text-center\">Warehouse</th>\r\n              <th style=\"width: 15%\">Locator</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"product\">\r\n              <td style=\"width: 5%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n              <td style=\"width: 17%\">{{product.nomenclature ? product.nomenclature?.code : product.code}}</td>\r\n              <td style=\"width: 18%\">{{product.nomenclature ? product.nomenclature?.name : product.name}}</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <span *ngIf=\"product?.total_locator_quantity\">{{product.total_locator_quantity}}</span>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                {{product.uom}}\r\n              </td>\r\n              <td style=\"width: 13%\" class=\"text-center\">\r\n                {{product.nomenclature ? product.nomenclature?.category?.name : product.category?.name}}\r\n              </td>\r\n              <td style=\"width: 12%\" class=\"text-center\">\r\n                <ng-container *ngIf=\"product.locator\">{{product.locator.warehouse.name}}\r\n                </ng-container>\r\n              </td>\r\n              <td style=\"width: 15%\">\r\n                <ng-container *ngIf=\"product.locator\">{{product.locator.name}}</ng-container>\r\n                <span class=\"d-block\" *ngIf=\"product.locator\"> R: {{product.locator.row}} Col:\r\n                  {{product.locator.column}} Sh: {{product.locator.shelf}} Pl:\r\n                  {{product.locator.place}}</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </mat-dialog-content>\r\n      <div\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"productsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Add\"\r\n    [disabled]=\"!selectedProduct\"\r\n    (click)=\"onPickProduct()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { OutsourcingRouting } from './outsourcing.routing';\r\nimport { OutsourcingLayoutComponent } from './components/outsourcing-layout/outsourcing-layout.component';\r\nimport { OutsourcingChainsComponent } from './components/outsourcing-chains/outsourcing-chains.component';\r\nimport { OutsourcingOrderStatusesComponent } from './components/outsourcing-order-statuses/outsourcing-order-statuses.component';\r\nimport {LayoutModule} from '../layout/layout.module';\r\nimport { OutsourcingOrderPageComponent } from './components/outsourcing-order-page/outsourcing-order-page.component';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport { AddSupplierToOrderComponent } from './modals/add-supplier-to-order/add-supplier-to-order.component';\r\nimport { EditOrderSupplierComponent } from './modals/edit-order-supplier/edit-order-supplier.component';\r\nimport { OutsourcingChainCreationListComponent } from './components/outsourcing-chain-creation-list/outsourcing-chain-creation-list.component';\r\nimport { OutsourcingRequestsComponent } from './components/outsourcing-requests/outsourcing-requests.component';\r\nimport { CreateOutsourcingRequestComponent } from './modals/create-outsourcing-request/create-outsourcing-request.component';\r\nimport {TriStateCheckboxModule} from 'primeng/tristatecheckbox';\r\nimport { SearchProductInWarehouseComponent } from './modals/search-product-in-warehouse/search-product-in-warehouse.component';\r\nimport { AddMaterialToOrderComponent } from './modals/add-material-to-order/add-material-to-order.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    OutsourcingLayoutComponent,\r\n    OutsourcingChainsComponent,\r\n    OutsourcingOrderStatusesComponent,\r\n    OutsourcingOrderPageComponent,\r\n    AddSupplierToOrderComponent,\r\n    EditOrderSupplierComponent,\r\n    OutsourcingChainCreationListComponent,\r\n    OutsourcingRequestsComponent,\r\n    CreateOutsourcingRequestComponent,\r\n    SearchProductInWarehouseComponent,\r\n    AddMaterialToOrderComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    OutsourcingRouting,\r\n    SharedModule,\r\n    LayoutModule,\r\n    TriStateCheckboxModule,\r\n  ]\r\n})\r\nexport class OutsourcingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {ProcurementLayoutComponent} from '../procurement/components/procurement-layout/procurement-layout.component';\r\nimport {ProcurementChainsComponent} from '../procurement/components/procurement-chains/procurement-chains.component';\r\nimport {\r\n  ProcurementOrderPageComponent\r\n} from '../procurement/components/procurement-order-page/procurement-order-page.component';\r\nimport {\r\n  AuxiliaryInvoicesTypesListComponent\r\n} from '../procurement/components/auxiliary-invoices-types-list/auxiliary-invoices-types-list.component';\r\nimport {\r\n  ProcurementChainCreationListComponent\r\n} from '../procurement/components/procurement-chain-creation-list/procurement-chain-creation-list.component';\r\nimport {\r\n  ProcurementOrderStatusesComponent\r\n} from '../procurement/components/procurement-order-statuses/procurement-order-statuses.component';\r\nimport {OutsourcingLayoutComponent} from './components/outsourcing-layout/outsourcing-layout.component';\r\nimport {OutsourcingChainsComponent} from './components/outsourcing-chains/outsourcing-chains.component';\r\nimport {OutsourcingOrderPageComponent} from './components/outsourcing-order-page/outsourcing-order-page.component';\r\nimport {\r\n  OutsourcingOrderStatusesComponent\r\n} from './components/outsourcing-order-statuses/outsourcing-order-statuses.component';\r\nimport {\r\n  OutsourcingChainCreationListComponent\r\n} from './components/outsourcing-chain-creation-list/outsourcing-chain-creation-list.component';\r\nimport {OutsourcingRequestsComponent} from './components/outsourcing-requests/outsourcing-requests.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: OutsourcingLayoutComponent,\r\n    children: [\r\n      {path: '', redirectTo: 'chains', pathMatch: 'full'},\r\n      {\r\n        path: 'chains',\r\n        children: [\r\n          {path: '', title: 'Outsourcing Chains', component: OutsourcingChainsComponent},\r\n          {path: 'order/:id', title: 'Outsourcing Order', component: OutsourcingOrderPageComponent},\r\n        ]\r\n      },\r\n      {path: 'order-products', title: 'Outsourcing Chain Creation', component: OutsourcingChainCreationListComponent},\r\n      {path: 'statuses', title: 'Order Statuses', component: OutsourcingOrderStatusesComponent},\r\n      {path: 'requests', title: 'Assembly & Manufactured Requests', component: OutsourcingRequestsComponent},\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class OutsourcingRouting { }\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {Subject, takeUntil} from \"rxjs\";\r\nimport {Payment} from \"../../models/payment\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {PaymentService} from \"../../services/payment.service\";\r\nimport {MenuItem} from \"primeng/api\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\n\r\n@Component({\r\n  selector: 'pek-delivery-payment-list',\r\n  templateUrl: './delivery-payment-list.component.html',\r\n  styleUrls: ['./delivery-payment-list.component.scss']\r\n})\r\nexport class DeliveryPaymentListComponent implements OnInit {\r\n\r\n  private destroy$ = new Subject();\r\n  isLoading = true;\r\n  payments: Payment[] = []; //delivery\r\n  todayDate = new Date()\r\n  selectedPayment: Payment;\r\n  statusPayment = ['DECLINED', 'PAID', 'CONFIRMED', 'WAITING'];\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Payment',\r\n    items: [\r\n      {\r\n        label: 'Pay',\r\n        icon: 'pi pi-check',\r\n        command: () => this\r\n        // disabled: true\r\n      },\r\n      {\r\n        label: 'Go to Order',\r\n        icon: 'pi pi-angle-double-right',\r\n        command: () => this\r\n      },\r\n      {\r\n        label: 'Go to Invoice',\r\n        icon: 'pi pi-angle-double-right',\r\n        command: () => this\r\n      },\r\n      {\r\n        label: 'Files',\r\n        icon: 'pi pi-file',\r\n        command: () => this\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this\r\n      }\r\n    ]\r\n  }];\r\n\r\n  query: QuerySearch[] = [\r\n    {\r\n      name: 'payment_date_after',\r\n      value: this.adapterService.dateAdapter(new Date(this.todayDate.setMonth(this.todayDate.getMonth() - 1)))\r\n    },\r\n    {\r\n      name: 'payment_date_before',\r\n      value: this.adapterService.dateAdapter(new Date())\r\n    },\r\n    {\r\n      name: 'for_delivery',\r\n      value: true\r\n    }\r\n  ]\r\n\r\n  searchDeliveryForm: FormGroup = this.fb.group({\r\n    supplier: [null],\r\n    payment_date_after: [new Date(this.todayDate.setMonth(this.todayDate.getMonth() - 1))],\r\n    payment_date_before: [new Date()],\r\n    accounting_type: [null],\r\n    material_or_service: [null],\r\n    purchase_categories: [null],\r\n    status: [null]\r\n  })\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private adapterService: AdapterService,\r\n    private paymentService: PaymentService,\r\n    private modalService: ModalService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getPayments()\r\n  }\r\n\r\n  getPayments() {\r\n    this.paymentService.get(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(payments => {\r\n      this.payments = payments\r\n      this.payments.forEach(p => p.payment_date = new Date(p.payment_date))\r\n      this.isLoading = false\r\n    });\r\n  }\r\n\r\n  selectedCompany(id: number) {\r\n    this.searchDeliveryForm.get('supplier').patchValue(id);\r\n    this.searchPayments()\r\n  }\r\n\r\n  searchPayments() {\r\n    this.isLoading = true;\r\n    this.destroy$.next(true);\r\n    this.payments = []\r\n    this.selectedPayment = null\r\n    this.query = [\r\n      {\r\n        name: 'for_delivery',\r\n        value: true\r\n      }\r\n    ]\r\n\r\n    if (this.searchDeliveryForm.get('supplier').value) {\r\n      this.query.push({\r\n        name: 'supplier',\r\n        value: this.searchDeliveryForm.get('supplier').value\r\n      })\r\n    }\r\n\r\n    if (this.searchDeliveryForm.get('payment_date_after').value) {\r\n      this.query.push({\r\n        name: 'payment_date_after',\r\n        value: this.adapterService.dateAdapter(this.searchDeliveryForm.get('payment_date_after').value)\r\n      })\r\n    }\r\n\r\n    if (this.searchDeliveryForm.get('payment_date_before').value) {\r\n      this.query.push({\r\n        name: 'payment_date_before',\r\n        value: this.adapterService.dateAdapter(this.searchDeliveryForm.get('payment_date_before').value)\r\n      })\r\n    }\r\n    if (this.searchDeliveryForm.get('status').value) {\r\n      this.query.push({\r\n        name: 'status',\r\n        value: this.searchDeliveryForm.get('status').value\r\n      })\r\n    }\r\n    this.getPayments()\r\n  }\r\n\r\n  onSelectPayment() {\r\n    if (this.selectedPayment) {\r\n      this.menuItems[0].items[0].disabled = this.selectedPayment.status !== 'CONFIRMED'\r\n    }\r\n    if (this.selectedPayment) {\r\n      this.menuItems[0].items[2].disabled = this.selectedPayment.status === 'PAID'\r\n    }\r\n  }\r\n\r\n  onCreate() {\r\n    this.paymentService.openCreateEditPaymentForm('create').subscribe(payment => {\r\n      if (payment) {\r\n        this.getPayments()\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Delivery Payments</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"New Payment\"\r\n        (click)=\"onCreate()\"\r\n        [disabled]=true\r\n      >\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n\r\n    <div class=\"page__table\">\r\n      <form\r\n        [formGroup]=\"searchDeliveryForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Supplier</label>\r\n              <pek-company-picker\r\n                [currentCompanyId]=\"searchDeliveryForm.get('supplier').value\"\r\n                (selectCompany)=\"selectedCompany($event)\"\r\n              >\r\n              </pek-company-picker>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>From</label>\r\n              <p-calendar\r\n                formControlName=\"payment_date_after\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                (ngModelChange)=\"searchPayments()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>To</label>\r\n              <p-calendar\r\n                formControlName=\"payment_date_before\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                (ngModelChange)=\"searchPayments()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Status</label>\r\n              <p-dropdown\r\n                formControlName=\"status\"\r\n                (ngModelChange)=\"searchPayments()\"\r\n                [options]=\"statusPayment\"\r\n                [showClear]=\"true\"\r\n                placeholder=\"Choose Status\"\r\n              >\r\n              </p-dropdown>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </form>\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"payments.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedPayment\"\r\n        [value]=\"payments\"\r\n        (selectionChange)=\"onSelectPayment()\"\r\n      >\r\n<!--        <ng-template pTemplate=\"caption\">-->\r\n<!--          <div class=\"d-flex buttons\">-->\r\n<!--            <p-menubar-->\r\n<!--              class=\"ml-auto\"-->\r\n<!--              [model]=\"menuItems\"-->\r\n<!--              [class.disabled]=\"!selectedPayment\"-->\r\n<!--            ></p-menubar>-->\r\n<!--          </div>-->\r\n<!--        </ng-template>-->\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 4%\">#</th>\r\n            <th style=\"width: 10%\">Payment ID</th>\r\n            <th style=\"width: 10%\">Date</th>\r\n            <th style=\"width: 14%\">Customer</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Invoice</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Amount</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Delivery Chain ID</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Status</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">% Paid</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-payment let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"payment\">\r\n            <td class=\"text-center\" style=\"width: 4%\">{{i + 1}}</td>\r\n            <td style=\"width: 10%\">{{payment.id}}</td>\r\n            <td style=\"width: 10%\">{{payment.payment_date | date:'dd/MM/yyyy'}}</td>\r\n            <td style=\"width: 14%\">\r\n              {{payment.delivery_chain.customer.name}}\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              <div *ngFor=\"let invoice of payment.invoices\">\r\n                {{invoice.self_serial_number}}\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{payment.converted_amount | moneyFormat}} </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              {{payment.delivery_chain.serial_number}}\r\n            </td>\r\n            <td style=\"width: 15%\" class=\"text-center\">\r\n              <div\r\n                [ngClass]=\"{\r\n                    'text-primary': payment.status==='PAID',\r\n                    'text-warning': payment.status==='WAITING'\r\n                }\"\r\n              >\r\n                {{payment.status}}\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 15%\" class=\"text-center\">\r\n              {{payment.amount / payment.total | percent:'2.2-2'}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && payments.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {NavigationLink} from \"../../../layout/navigation-route\";\r\n\r\n@Component({\r\n  selector: 'pek-payment-layout',\r\n  templateUrl: './payment-layout.component.html',\r\n  styleUrls: ['./payment-layout.component.scss']\r\n})\r\nexport class PaymentLayoutComponent implements OnInit {\r\n\r\n  routes: NavigationLink[] = [\r\n    {label: 'Payments', commands: ['payments']},\r\n    {label: 'Delivery', commands: ['delivery']}\r\n  ]\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'Payments'\"\r\n  [routes]=\"routes\"\r\n  [style.color]=\"'fff'\"\r\n  >\r\n</pek-header>\r\n<router-outlet></router-outlet>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {PaymentService} from '../../services/payment.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {Payment} from '../../models/payment';\r\nimport {ServiceInvoicePaymentService} from '../../services/service-invoice-payment.service';\r\nimport {ServiceInvoicePayment} from '../../models/service-invoice-payment';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {environment} from '@env/environment';\r\nimport {Invoice} from '../../../procurement/models/invoice';\r\nimport {Order} from '../../../procurement/models/order';\r\n\r\n\r\n@Component({\r\n  selector: 'pek-payment-lists',\r\n  templateUrl: './payment-lists.component.html',\r\n  styleUrls: ['./payment-lists.component.scss']\r\n})\r\nexport class PaymentListsComponent implements OnInit {\r\n  link = environment.link_url + 'dash/';\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Payment',\r\n    items: [\r\n      {\r\n        label: 'Pay',\r\n        icon: 'pi pi-check',\r\n        command: () => this.onPayPayment(),\r\n        disabled: true\r\n      },\r\n      {\r\n        label: 'Files',\r\n        icon: 'pi pi-file',\r\n        command: () => this.onShowFilesPayment()\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditPayment()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemovePayment()\r\n      }\r\n    ]\r\n  }];\r\n  menuItemsAux: MenuItem[] = [{\r\n    label: 'Selected Auxiliary Payment',\r\n    items: [\r\n      {\r\n        label: 'Pay',\r\n        icon: 'pi pi-check',\r\n        command: () => this.onPayAuxiliaryPayment(),\r\n        disabled: true\r\n      },\r\n      {\r\n        label: 'File',\r\n        icon: 'pi pi-file',\r\n        command: () => this.onShowFilesAuxiliaryPayments()\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEdit()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemovePaymentAuxiliary()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  payments: Payment[] = [];\r\n  servicePayments: ServiceInvoicePayment[] = [];\r\n\r\n  isLoadingPayments = true;\r\n  isLoadingAuxPayments = true;\r\n\r\n  statusPayment = ['DECLINED', 'PAID', 'CONFIRMED', 'WAITING'];\r\n\r\n  paymentMethod = ['Card', 'Invoice'];\r\n\r\n  selectedPayment: Payment;\r\n  selectedServicePayment: ServiceInvoicePayment;\r\n  tabIndex = 0;\r\n  todayDate = new Date();\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  paymentsQuery: QuerySearch[] = [\r\n    {\r\n      name: 'payment_date_after',\r\n      value: this.adapterService.dateAdapter(new Date(this.todayDate.setMonth(this.todayDate.getMonth() - 1)))\r\n    },\r\n    {\r\n      name: 'payment_date_before',\r\n      value: this.adapterService.dateAdapter(new Date())\r\n    },\r\n    {\r\n      name: 'for_delivery',\r\n      value: false\r\n    }\r\n  ];\r\n\r\n  auxiliaryPaymentsQuery: QuerySearch[] = [\r\n    {\r\n      name: 'payment_date_after',\r\n      value: this.adapterService.dateAdapter(new Date(this.todayDate.setMonth(this.todayDate.getMonth())))\r\n    },\r\n    {\r\n      name: 'payment_date_before',\r\n      value: this.adapterService.dateAdapter(new Date())\r\n    },\r\n    {\r\n      name: 'for_delivery',\r\n      value: false\r\n    }\r\n  ];\r\n\r\n  searchPaymentsForm: FormGroup = this.fb.group({\r\n    supplier: [null],\r\n    payment_date_after: [new Date(this.todayDate.setMonth(this.todayDate.getMonth()))],\r\n    payment_date_before: [new Date()],\r\n    accounting_type: [null],\r\n    material_or_service: [null],\r\n    purchase_categories: [null],\r\n    payment_method: [null],\r\n    status: [null]\r\n  });\r\n\r\n  searchPaymentsAuxiliaryForm: FormGroup = this.fb.group({\r\n    supplier: [null],\r\n    payment_date_after: [new Date(this.todayDate.setMonth(this.todayDate.getMonth()))],\r\n    payment_date_before: [new Date()],\r\n    accounting_type: [null],\r\n    material_or_service: [null],\r\n    purchase_categories: [null],\r\n    payment_method: [null],\r\n    status: [null]\r\n  });\r\n\r\n  constructor(\r\n    private paymentService: PaymentService,\r\n    private modalService: ModalService,\r\n    private serviceInvoicePaymentService: ServiceInvoicePaymentService,\r\n    private adapterService: AdapterService,\r\n    private readonly fb: FormBuilder,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getAllPayments();\r\n  }\r\n\r\n  getPayments() {\r\n    this.paymentService.get(this.paymentsQuery).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(payments => {\r\n      this.payments = payments;\r\n      this.payments.forEach(p => p.payment_date = new Date(p.payment_date));\r\n      this.isLoadingPayments = false;\r\n    });\r\n  }\r\n\r\n  getServiceInvoicePayments() {\r\n    this.serviceInvoicePaymentService.get(this.auxiliaryPaymentsQuery).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(payments => {\r\n      this.servicePayments = payments;\r\n      this.servicePayments.forEach(p => p.payment_date = new Date(p.payment_date));\r\n      this.isLoadingAuxPayments = false;\r\n    });\r\n  }\r\n\r\n  getAllPayments() {\r\n    this.getPayments();\r\n    this.getServiceInvoicePayments();\r\n  }\r\n\r\n  createPayment() {\r\n    this.paymentService.openCreateEditPaymentForm('create').subscribe(payment => {\r\n      if (payment) {\r\n        this.getPayments();\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreate() {\r\n    if (this.tabIndex === 0) {\r\n      this.createPayment();\r\n    } else {\r\n      this.createServicePayment();\r\n    }\r\n  }\r\n\r\n  onEdit() {\r\n    if (this.tabIndex === 0) {\r\n      this.onEditPayment();\r\n    } else {\r\n      this.onEditPaymentAuxiliary();\r\n    }\r\n  }\r\n\r\n  onEditPayment() {\r\n    this.paymentService.openCreateEditPaymentForm('edit', this.selectedPayment).subscribe(payment => {\r\n      if (payment) {\r\n        this.getPayments();\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditPaymentAuxiliary() {\r\n    this.serviceInvoicePaymentService.openCreateEditServicePaymentForm('edit', this.selectedServicePayment).subscribe(payment => {\r\n      if (payment) {\r\n        this.getServiceInvoicePayments();\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemovePayment() {\r\n    this.modalService.confirm('danger').subscribe((confirm) => {\r\n      if (confirm) {\r\n        this.paymentService.delete(this.selectedPayment).subscribe(() => {\r\n          this.payments = this.payments.filter(p => p.id != this.selectedPayment.id);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemovePaymentAuxiliary() {\r\n    this.modalService.confirm('danger').subscribe((confirm) => {\r\n      if (confirm) {\r\n        this.serviceInvoicePaymentService.delete(this.selectedServicePayment.id).subscribe(() => {\r\n          this.servicePayments = this.servicePayments.filter(p => p.id != this.selectedServicePayment.id);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  createServicePayment() {\r\n    this.serviceInvoicePaymentService.openCreateEditServicePaymentForm('create', null).subscribe(paymentService => {\r\n      console.log(paymentService);\r\n      if (paymentService) {\r\n        this.getServiceInvoicePayments();\r\n      }\r\n    });\r\n  }\r\n\r\n  onPayPayment() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.paymentService.pay(\r\n          {\r\n            id: this.selectedPayment.id,\r\n            is_paid: true\r\n          }).subscribe(payment => {\r\n          if (payment) {\r\n            this.searchPayments();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onPayAuxiliaryPayment() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.serviceInvoicePaymentService.pay(\r\n          {\r\n            id: this.selectedServicePayment.id,\r\n            is_paid: true\r\n          }).subscribe(payment => {\r\n          if (payment) {\r\n            this.searchAuxiliaryPayments();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onShowFilesPayment() {\r\n    this.paymentService.showPaymentFiles(this.selectedPayment.id).subscribe();\r\n  }\r\n\r\n  onShowFilesAuxiliaryPayments() {\r\n    this.serviceInvoicePaymentService.showAuxiliaryPaymentFiles(this.selectedServicePayment.id).subscribe();\r\n  }\r\n\r\n  searchPayments() {\r\n    this.isLoadingPayments = true;\r\n    this.destroy$.next(true);\r\n    this.payments = [];\r\n    this.selectedPayment = null;\r\n    this.paymentsQuery = [\r\n      {\r\n        name: 'for_delivery',\r\n        value: false\r\n      }\r\n    ];\r\n\r\n    console.log(this.searchPaymentsForm.get('status').value);\r\n\r\n    if (this.searchPaymentsForm.get('supplier').value) {\r\n      this.paymentsQuery.push({\r\n        name: 'supplier',\r\n        value: this.searchPaymentsForm.get('supplier').value\r\n      });\r\n    }\r\n\r\n    if (this.searchPaymentsForm.get('payment_date_after').value) {\r\n      this.paymentsQuery.push({\r\n        name: 'payment_date_after',\r\n        value: this.adapterService.dateAdapter(this.searchPaymentsForm.get('payment_date_after').value)\r\n      });\r\n    }\r\n\r\n    if (this.searchPaymentsForm.get('payment_date_before').value) {\r\n      this.paymentsQuery.push({\r\n        name: 'payment_date_before',\r\n        value: this.adapterService.dateAdapter(this.searchPaymentsForm.get('payment_date_before').value)\r\n      });\r\n    }\r\n    if (this.searchPaymentsForm.get('status').value) {\r\n      this.paymentsQuery.push({\r\n        name: 'status',\r\n        value: this.searchPaymentsForm.get('status').value\r\n      });\r\n    }\r\n    if (this.searchPaymentsForm.get('payment_method').value) {\r\n      this.paymentsQuery.push({\r\n        name: 'payment_method',\r\n        value: this.searchPaymentsForm.get('payment_method').value\r\n      });\r\n    }\r\n    this.getPayments();\r\n  }\r\n\r\n  selectedCompany(id: number) {\r\n    this.searchPaymentsForm.get('supplier').patchValue(id);\r\n    this.searchPayments();\r\n  }\r\n\r\n  selectedAuxPaymentCompany(id: number) {\r\n    this.searchPaymentsAuxiliaryForm.get('supplier').patchValue(id);\r\n    this.searchAuxiliaryPayments();\r\n  }\r\n\r\n  searchAuxiliaryPayments() {\r\n    this.isLoadingAuxPayments = true;\r\n    this.destroy$.next(true);\r\n    this.servicePayments = [];\r\n    this.selectedServicePayment = null;\r\n    this.auxiliaryPaymentsQuery = [\r\n      {\r\n        name: 'for_delivery',\r\n        value: false\r\n      }\r\n    ];\r\n\r\n    if (this.searchPaymentsAuxiliaryForm.get('supplier').value) {\r\n      this.auxiliaryPaymentsQuery.push({\r\n        name: 'supplier',\r\n        value: this.searchPaymentsAuxiliaryForm.get('supplier').value\r\n      });\r\n    }\r\n    if (this.searchPaymentsAuxiliaryForm.get('payment_date_after').value) {\r\n      this.auxiliaryPaymentsQuery.push(\r\n        {\r\n          name: 'payment_date_after',\r\n          value: this.adapterService.dateAdapter(this.searchPaymentsAuxiliaryForm.get('payment_date_after').value)\r\n        }\r\n      );\r\n    }\r\n    if (this.searchPaymentsAuxiliaryForm.get('payment_date_before').value) {\r\n      this.auxiliaryPaymentsQuery.push(\r\n        {\r\n          name: 'payment_date_before',\r\n          value: this.adapterService.dateAdapter(this.searchPaymentsAuxiliaryForm.get('payment_date_before').value)\r\n        }\r\n      );\r\n    }\r\n    if (this.searchPaymentsAuxiliaryForm.get('status').value && this.searchPaymentsAuxiliaryForm.get('status').value !== 'All') {\r\n      this.auxiliaryPaymentsQuery.push(\r\n        {\r\n          name: 'status',\r\n          value: this.searchPaymentsAuxiliaryForm.get('status').value\r\n        }\r\n      );\r\n    }\r\n    if (this.searchPaymentsAuxiliaryForm.get('payment_method').value) {\r\n      this.auxiliaryPaymentsQuery.push(\r\n        {\r\n        name: 'payment_method',\r\n        value: this.searchPaymentsAuxiliaryForm.get('payment_method').value\r\n      }\r\n      );\r\n    }\r\n    this.getServiceInvoicePayments();\r\n  }\r\n\r\n  onSelectPayment() {\r\n    if (this.selectedPayment) {\r\n      this.menuItems[0].items[0].disabled = this.selectedPayment.status !== 'CONFIRMED';\r\n      this.menuItems[0].items[3].disabled = this.selectedPayment.status === 'PAID';\r\n    }\r\n  }\r\n\r\n  onSelectAuxiliaryPayment() {\r\n    if (this.selectedServicePayment) {\r\n      this.menuItemsAux[0].items[0].disabled = this.selectedServicePayment.status !== 'CONFIRMED';\r\n      this.menuItemsAux[0].items[3].disabled = this.selectedServicePayment.status === 'PAID';\r\n    }\r\n  }\r\n\r\n  goToPaymentOrder() {\r\n    if (this.selectedPayment.invoices[0].order.accounting_type === 1) {\r\n      window.open(`${this.link}procurement/orders/products/` + this.selectedPayment.invoices[0].order.id);\r\n    }\r\n\r\n    if (this.selectedPayment.invoices[0].order.accounting_type === 2) {\r\n      window.open(`${this.link}outsource/outsource-chain/products/` + this.selectedPayment.invoices[0].order.id);\r\n    }\r\n  }\r\n\r\n  goToPaymentInvoice() {\r\n    window.open(`${this.link}accounting/invoices/products/` + this.selectedPayment.invoices[0].id);\r\n  }\r\n\r\n  goToServicePaymentInvoice() {\r\n    window.open(`${this.link}accounting/invoices/service-invoice/` + this.selectedServicePayment.service_invoices[0].id);\r\n  }\r\n\r\n  goToServicePaymentOrder() {\r\n    if (this.selectedServicePayment.service_invoices[0].order.accounting_type === 1) {\r\n      window.open(`${this.link}procurement/orders/products/` + this.selectedServicePayment.service_invoices[0].order.id);\r\n    }\r\n\r\n    if (this.selectedServicePayment.service_invoices[0].order.accounting_type === 2) {\r\n      window.open(`${this.link}outsource/outsource-chain/products/` + this.selectedServicePayment.service_invoices[0].order.id);\r\n    }\r\n  }\r\n\r\n  goToLinkPaymentInvoice(invoice: Invoice) {\r\n    window.open(`${this.link}accounting/invoices/products/` + invoice.id);\r\n  }\r\n\r\n  goToLinkServicePaymentInvoice(invoice: Invoice) {\r\n    window.open(`${this.link}accounting/invoices/service-invoice/` + invoice.id);\r\n  }\r\n\r\n  goToLinkPaymentOrder(order: Order) {\r\n    if (order.accounting_type === 1) {\r\n      window.open(`${this.link}procurement/orders/products/` + order.id);\r\n    }\r\n\r\n    if (order.accounting_type === 2) {\r\n      window.open(`${this.link}outsource/outsource-chain/products/` + order.id);\r\n    }\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Payments</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        [label]=\"tabIndex === 0 ? 'New Payment' : 'New Auxiliary Payment'\"\r\n        (click)=\"onCreate()\"\r\n      >\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <div class=\"page__content\">\r\n\r\n    <p-tabView class=\"custom-tabs\" [(activeIndex)]=\"tabIndex\">\r\n      <p-tabPanel header=\"Payments\" [selected]=\"true\">\r\n        <div class=\"page__table\">\r\n          <form\r\n            [formGroup]=\"searchPaymentsForm\"\r\n            class=\"form mb-3\"\r\n          >\r\n            <div class=\"row\">\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Supplier</label>\r\n                  <pek-company-picker\r\n                    [currentCompanyId]=\"searchPaymentsForm.get('supplier').value\"\r\n                    (selectCompany)=\"selectedCompany($event)\"\r\n                  >\r\n                  </pek-company-picker>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>From</label>\r\n                  <p-calendar\r\n                    formControlName=\"payment_date_after\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                    (ngModelChange)=\"searchPayments()\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>To</label>\r\n                  <p-calendar\r\n                    formControlName=\"payment_date_before\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                    (ngModelChange)=\"searchPayments()\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Status</label>\r\n                  <p-dropdown\r\n                    formControlName=\"status\"\r\n                    (ngModelChange)=\"searchPayments()\"\r\n                    [options]=\"statusPayment\"\r\n                    [showClear]=\"true\"\r\n                    placeholder=\"Choose Status\"\r\n                  >\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Payment Method</label>\r\n                  <p-dropdown\r\n                    formControlName=\"payment_method\"\r\n                    (ngModelChange)=\"searchPayments()\"\r\n                    [options]=\"paymentMethod\"\r\n                    [showClear]=\"true\"\r\n                    placeholder=\"Choose Payment Method\"\r\n                  >\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </form>\r\n          <p-table\r\n            #dt\r\n            selectionMode=\"single\"\r\n            scrollHeight=\"calc(100vh - 28.25rem)\"\r\n            [scrollable]=\"true\"\r\n            [paginator]=\"payments.length > 0\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedPayment\"\r\n            [value]=\"payments\"\r\n            (selectionChange)=\"onSelectPayment()\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex buttons align-items-center\">\r\n                <p class=\"subtitle\" *ngIf=\"!selectedPayment\">Choose the Payment to edit</p>\r\n                <button\r\n                  class=\"ml-auto mr-2\"\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi-angle-double-right\"\r\n                  label=\"Invoice\"\r\n                  (click)=\"goToPaymentInvoice()\"\r\n                  [disabled]=\"!selectedPayment || selectedPayment?.invoices?.length !== 1\"\r\n                >\r\n                </button>\r\n                <button\r\n                  class=\"mr-2\"\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi pi-angle-double-right\"\r\n                  label=\"Order\"\r\n                  (click)=\"goToPaymentOrder()\"\r\n                  [disabled]=\"!selectedPayment || selectedPayment?.invoices?.length !== 1\"\r\n                >\r\n                </button>\r\n                <p-menubar\r\n                  [model]=\"menuItems\"\r\n                  [class.disabled]=\"!selectedPayment\"\r\n                ></p-menubar>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th class=\"text-center\" style=\"width: 4%\">#</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Payment ID</th>\r\n                <th style=\"width: 10%\">Date</th>\r\n                <th style=\"width: 16%\">Supplier</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Invoice</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Amount</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Converted Amount</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Status</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Root list</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Payment method</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-payment let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"payment\">\r\n                <td class=\"text-center\" style=\"width: 4%\">{{i + 1}}</td>\r\n                <td style=\"width: 10%\" class=\"text-center\">{{payment.id}}</td>\r\n                <td style=\"width: 10%\">\r\n                  <div class=\"payment-paperclip\">\r\n                    {{payment.payment_date | date:'dd/MM/yyyy'}}\r\n                    <i *ngIf=\"payment.related_files\" class=\"pi pi-paperclip\"></i>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 16%\">\r\n                  <div *ngFor=\"let invoice of payment.invoices\">\r\n                    <div class=\"word-break\">{{invoice.supplier.name}}</div>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <div *ngFor=\"let invoice of payment.invoices\">\r\n                    <a (click)=\"goToLinkPaymentInvoice(invoice)\">{{invoice.self_serial_number}}</a>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">{{payment.amount | moneyFormat}} </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">{{payment.converted_amount | moneyFormat}} </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <div *ngFor=\"let invoice of payment.invoices\">\r\n                    <a (click)=\"goToLinkPaymentOrder(invoice.order)\">{{invoice.order.id}}</a>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <div\r\n                    [ngClass]=\"{\r\n                    'text-primary': payment.status==='PAID',\r\n                    'text-success': payment.status==='CONFIRMED',\r\n                    'text-danger': payment.status==='DECLINED',\r\n                    'text-warning': payment.status==='WAITING'\r\n                }\"\r\n                  >\r\n                    {{payment.status}}\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <div *ngFor=\"let invoice of payment.invoices; let idx = index\">\r\n                    <span *ngFor=\"let root of invoice.order.root_production_list_products\">\r\n                      {{root.nomenclature.name}}<i\r\n                      *ngIf=\"idx !== invoice.order.root_production_list_products.length - 1\">,</i>\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  {{payment.payment_method}}\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"10\">\r\n                  <i *ngIf=\"isLoadingPayments\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingPayments\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"paginatorright\">\r\n              <p-button\r\n                type=\"button\"\r\n                (click)=\"dt.paginator=false\"\r\n                styleClass=\"p-button-text\"\r\n              >All\r\n              </p-button>\r\n            </ng-template>\r\n          </p-table>\r\n        </div>\r\n        <div *ngIf=\"!dt.paginator && !isLoadingPayments && payments.length > 0\" class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=true\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </p-tabPanel>\r\n\r\n      <p-tabPanel header=\"Auxiliary Invoice Payments\">\r\n        <div class=\"page__table\">\r\n          <form\r\n            [formGroup]=\"searchPaymentsAuxiliaryForm\"\r\n            class=\"form mb-3\"\r\n          >\r\n            <div class=\"row\">\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Supplier</label>\r\n                  <pek-company-picker\r\n                    [currentCompanyId]=\"searchPaymentsAuxiliaryForm.get('supplier').value\"\r\n                    (selectCompany)=\"selectedAuxPaymentCompany($event)\"\r\n                  >\r\n                  </pek-company-picker>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>From</label>\r\n                  <p-calendar\r\n                    formControlName=\"payment_date_after\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                    (ngModelChange)=\"searchAuxiliaryPayments()\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>To</label>\r\n                  <p-calendar\r\n                    formControlName=\"payment_date_before\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                    (ngModelChange)=\"searchAuxiliaryPayments()\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Status</label>\r\n                  <p-dropdown\r\n                    formControlName=\"status\"\r\n                    (ngModelChange)=\"searchAuxiliaryPayments()\"\r\n                    [options]=\"statusPayment\"\r\n                    [showClear]=\"true\"\r\n                    placeholder=\"Choose Status\"\r\n                  >\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Payment Method</label>\r\n                  <p-dropdown\r\n                    formControlName=\"payment_method\"\r\n                    (ngModelChange)=\"searchAuxiliaryPayments()\"\r\n                    [options]=\"paymentMethod\"\r\n                    [showClear]=\"true\"\r\n                    placeholder=\"Choose Payment Method\"\r\n                  >\r\n                  </p-dropdown>\r\n                </div>\r\n              </div>\r\n\r\n            </div>\r\n          </form>\r\n\r\n          <p-table\r\n            #st\r\n            selectionMode=\"single\"\r\n            scrollHeight=\"calc(100vh - 28.25rem)\"\r\n            [scrollable]=\"true\"\r\n            [paginator]=\"servicePayments.length > 0\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedServicePayment\"\r\n            [value]=\"servicePayments\"\r\n            (selectionChange)=\"onSelectAuxiliaryPayment()\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex buttons align-items-center\">\r\n                <p class=\"subtitle\" *ngIf=\"!selectedServicePayment\">Choose the Auxiliary Payment to edit</p>\r\n                <button\r\n                  class=\"ml-auto mr-2\"\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi-angle-double-right\"\r\n                  label=\"Invoice\"\r\n                  (click)=\"goToServicePaymentInvoice()\"\r\n                  [disabled]=\"!selectedServicePayment || selectedServicePayment?.service_invoices?.length !== 1\"\r\n                >\r\n                </button>\r\n                <button\r\n                  class=\"mr-2\"\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi pi-angle-double-right\"\r\n                  label=\"Order\"\r\n                  (click)=\"goToServicePaymentOrder()\"\r\n                  [disabled]=\"!selectedServicePayment || selectedServicePayment?.service_invoices?.length !== 1\"\r\n                ></button>\r\n                <p-menubar\r\n                  [model]=\"menuItemsAux\"\r\n                  [class.disabled]=\"!selectedServicePayment\"\r\n                ></p-menubar>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th class=\"text-center\" style=\"width: 4%\">#</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Payment ID</th>\r\n                <th style=\"width: 10%\">Date</th>\r\n                <th style=\"width: 16%\">Supplier</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Invoice</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Amount</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Converted Amount</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Status</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Root list</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Payment method</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-payment let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"payment\">\r\n                <td class=\"text-center\" style=\"width: 4%\">{{i + 1}}</td>\r\n                <td style=\"width: 10%\" class=\"text-center\">{{payment.id}}</td>\r\n                <td style=\"width: 10%\">\r\n                  <div class=\"payment-paperclip\">\r\n                    {{payment.payment_date | date:'dd/MM/yyyy'}}\r\n                    <i *ngIf=\"payment.related_files\" class=\"pi pi-paperclip\"></i>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 16%\">\r\n                  <div *ngFor=\"let invoice of payment.service_invoices\">\r\n                    <div class=\"word-break\">{{invoice.supplier.name}}</div>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <div *ngFor=\"let invoice of payment.service_invoices\">\r\n                    <a (click)=\"goToLinkServicePaymentInvoice(invoice)\">{{invoice.self_serial_number}}</a>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">{{payment.amount | moneyFormat}} </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">{{payment.converted_amount | moneyFormat}} </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <div *ngFor=\"let invoice of payment.service_invoices\">\r\n                    <a (click)=\"goToLinkPaymentOrder(invoice.order)\">{{invoice.order.id}}</a>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <div\r\n                    [ngClass]=\"{\r\n                    'text-primary': payment.status==='PAID',\r\n                    'text-success': payment.status==='CONFIRMED',\r\n                    'text-danger': payment.status==='DECLINED',\r\n                    'text-warning': payment.status==='WAITING'\r\n                }\"\r\n                  >\r\n                    {{payment.status}}\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <div *ngFor=\"let invoice of payment.service_invoices\">\r\n                    <span *ngFor=\"let root of invoice.order.root_production_list_products; let idx = index\">\r\n                      {{root.nomenclature.name}}<i\r\n                      *ngIf=\"idx !== invoice.order.root_production_list_products.length - 1\">,</i>\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  {{payment.payment_method}}\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"10\">\r\n                  <i *ngIf=\"isLoadingAuxPayments\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingAuxPayments\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"paginatorright\">\r\n              <p-button\r\n                type=\"button\"\r\n                (click)=\"st.paginator=false\"\r\n                styleClass=\"p-button-text\"\r\n              >All\r\n              </p-button>\r\n            </ng-template>\r\n          </p-table>\r\n        </div>\r\n        <div *ngIf=\"!st.paginator && !isLoadingAuxPayments && payments.length > 0\" class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"st.paginator=true\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </p-tabPanel>\r\n    </p-tabView>\r\n  </div>\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {Payment} from '../../models/payment';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {Invoice} from '../../../procurement/models/invoice';\r\nimport {InvoiceService} from '../../../procurement/services/invoice.service';\r\nimport {PaymentService} from '../../services/payment.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-payment-form',\r\n  templateUrl: './create-edit-payment-form.component.html',\r\n  styleUrls: ['./create-edit-payment-form.component.scss']\r\n})\r\nexport class CreateEditPaymentFormComponent implements OnInit {\r\n  isDisabledCompanyPicker = false;\r\n  isLoading = false;\r\n\r\n  form = this.fb.group({\r\n    supplier: [<number>null, Validators.required],\r\n    invoices: [<number[]>[], Validators.required],\r\n    amount: [<number>0, [Validators.required, Validators.min(0)]],\r\n    converted_amount: [0],\r\n    exchange_rate: [1, Validators.required],\r\n    payment_date: ['', Validators.required],\r\n    accountant_number: ['', Validators.required],\r\n    paid_by_card: [false],\r\n  });\r\n  isSaving = false;\r\n  invoices: Invoice[] = [];\r\n  amount: number = 0;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<CreateEditPaymentFormComponent>,\r\n    private readonly adapterService: AdapterService,\r\n    private invoiceService: InvoiceService,\r\n    private paymentService: PaymentService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, payment: Payment, companyId: number, orderId: number }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('converted_amount').disable();\r\n\r\n    if (this.data.type === 'create')\r\n      this.form.get('invoices').disable();\r\n\r\n    if (this.data.type === 'edit') {\r\n      this.form.patchValue(<any>this.data.payment);\r\n      this.form.addControl('id' as any, this.fb.control(this.data.payment.id));\r\n      this.form.get('supplier').patchValue(this.data.payment.invoices[0].supplier.id);\r\n      const ids = this.data.payment.invoices.map(i => i.id);\r\n      this.form.get('invoices').patchValue(ids);\r\n      this.invoices = [...this.data.payment.invoices];\r\n      this.form.get('invoices').disable();\r\n      this.amount = this.data.payment.amount;\r\n      this.form.get('payment_date').patchValue(<any>new Date(this.data.payment.payment_date));\r\n    }\r\n\r\n    if (this.data.companyId) {\r\n      this.form.get('supplier').patchValue(this.data.companyId);\r\n      this.onSelectCompany({id: this.data.companyId});\r\n      this.isDisabledCompanyPicker = true;\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createPayment();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editPayment();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createPayment() {\r\n    const send = this.form.value;\r\n    send.payment_date = this.adapterService.dateAdapter(new Date(send.payment_date));\r\n\r\n    this.paymentService.create(send).subscribe({\r\n      next: payment => this.dialogRef.close(payment),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editPayment() {\r\n    const send = this.form.value;\r\n    send.payment_date = this.adapterService.dateAdapter(new Date(send.payment_date));\r\n    this.paymentService.update(send).subscribe({\r\n      next: payment => this.dialogRef.close(payment),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectCompany(company: Partial<Company>) {\r\n    if (company) {\r\n      this.form.get('supplier').patchValue(company.id);\r\n      this.form.get('invoices').enable();\r\n      this.getInvoicesByCompany();\r\n    } else {\r\n      this.form.get('supplier').patchValue(null);\r\n      this.form.get('invoices').disable();\r\n    }\r\n    this.form.get('invoices').patchValue([]);\r\n    this.invoices = [];\r\n  }\r\n\r\n  private getInvoicesByCompany() {\r\n    this.isLoading = true;\r\n    const query = [{\r\n      name: 'supplier',\r\n      value: this.form.get('supplier').value\r\n    }];\r\n\r\n    if (this.data.orderId) {\r\n      query.push({name: 'order', value: this.data.orderId});\r\n    }\r\n\r\n    this.invoiceService.get(query).subscribe(invoices => {\r\n      this.invoices = invoices;\r\n      invoices.forEach(i => {\r\n        if (i.is_proforma) {\r\n          i.label = i.self_proforma_serial_number + ` (price ${i.total_price_converted} )`;\r\n        } else {\r\n          i.label = i.self_serial_number + ' (Invoice)' + ` (price: ${i.total_price_converted} )`;\r\n        }\r\n      });\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  roundValue(value) {\r\n    return Math.round(value * Math.pow(10, 2)) / Math.pow(10, 2);\r\n  }\r\n\r\n  countSum() {\r\n    const ids = this.form.get('invoices').value as number[];\r\n    let sum = 0;\r\n\r\n    if (ids.length > 0) {\r\n      ids.forEach(id => {\r\n        const findInvoice = this.invoices.find(inv => inv.id === id);\r\n        if (findInvoice) {\r\n          sum += findInvoice.total_price_converted;\r\n        }\r\n      });\r\n      const exchangeNum = this.form.get('exchange_rate').value;\r\n      if (exchangeNum < 0) {\r\n        const num = 1;\r\n        this.form.get('exchange_rate').patchValue(num);\r\n      }\r\n    }\r\n\r\n    if (this.data.type === 'create') {\r\n      this.form.get('converted_amount').patchValue(this.form.get('exchange_rate').value * sum);\r\n      this.form.get('amount').patchValue(sum);\r\n      sum = this.roundValue(sum);\r\n    } else {\r\n      this.form.get('converted_amount').patchValue(this.form.get('exchange_rate').value * +this.amount);\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Payment\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Supplier*</label>\r\n      <pek-company-picker\r\n        [currentCompanyId]=\"form.get('supplier').value\"\r\n        (selectCompanyFull)=\"onSelectCompany($event)\"\r\n        [isDisabled]=\"data.type === 'edit' || isDisabledCompanyPicker\"\r\n      >\r\n      </pek-company-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Invoice*</label>\r\n      <ng-container *ngIf=\"!isLoading; else spinner\">\r\n        <ng-container *ngIf=\"data.type === 'create'\">\r\n          <p-multiSelect\r\n            formControlName=\"invoices\"\r\n            class=\"disabled\"\r\n            placeholder=\"Choose Invoice\"\r\n            [options]=\"invoices\"\r\n            optionValue=\"id\"\r\n            optionLabel=\"label\"\r\n            (onChange)=\"countSum()\"\r\n          >\r\n          </p-multiSelect>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"data.type === 'edit'\">\r\n          <p-multiSelect\r\n            formControlName=\"invoices\"\r\n            class=\"disabled\"\r\n            placeholder=\"Choose Invoice\"\r\n            [options]=\"invoices\"\r\n            optionValue=\"id\"\r\n            optionLabel=\"self_serial_number\"\r\n            (onChange)=\"countSum()\"\r\n          >\r\n          </p-multiSelect>\r\n        </ng-container>\r\n      </ng-container>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Payment Amount*</label>\r\n      <input\r\n        class=\"p-inputtext\"\r\n        formControlName=\"amount\"\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Converted Payment Amount</label>\r\n      <input\r\n        class=\"p-inputtext disabled\"\r\n        formControlName=\"converted_amount\"\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Exchange Rate*</label>\r\n      <input\r\n        class=\"p-inputtext\"\r\n        formControlName=\"exchange_rate\"\r\n        (ngModelChange)=\"countSum()\"\r\n        type=\"number\"\r\n      >\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label>Date*</label>\r\n          <p-calendar\r\n            formControlName=\"payment_date\"\r\n            dateFormat=\"dd/mm/yy\"\r\n            [readonlyInput]=\"true\"\r\n          >\r\n          </p-calendar>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label>Accountant Number*</label>\r\n          <input class=\"p-inputtext\" formControlName=\"accountant_number\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Paid by card</label>\r\n      <p-checkbox formControlName=\"paid_by_card\" [binary]=\"true\" inputId=\"binary\"></p-checkbox>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n\r\n\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {InvoiceService} from '../../../procurement/services/invoice.service';\r\nimport {PaymentService} from '../../services/payment.service';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {Payment} from '../../models/payment';\r\nimport {CreateEditPaymentFormComponent} from '../create-edit-payment-form/create-edit-payment-form.component';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {ServiceInvoicePaymentService} from '../../services/service-invoice-payment.service';\r\nimport {ServiceInvoiceService} from '@shared/services/service-invoice.service';\r\nimport {Invoice} from '../../../procurement/models/invoice';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-service-payment-form',\r\n  templateUrl: './create-edit-service-payment-form.component.html',\r\n  styleUrls: ['./create-edit-service-payment-form.component.scss']\r\n})\r\nexport class CreateEditServicePaymentFormComponent implements OnInit {\r\n  isDisabledCompanyPicker = false;\r\n  isLoading = false;\r\n\r\n  form = this.fb.group({\r\n    supplier: [<number>null, Validators.required],\r\n    service_invoices: [<number[]>[], Validators.required],\r\n    amount: [<number>0, [Validators.required, Validators.min(0)]],\r\n    converted_amount: [0],\r\n    exchange_rate: [1, Validators.required],\r\n    payment_date: [<Date | string>'', Validators.required],\r\n    accountant_number: ['', Validators.required],\r\n    paid_by_card: [false],\r\n  });\r\n  isSaving = false;\r\n  serviceInvoices: Invoice[] = [];\r\n  amount: number = 0;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<CreateEditPaymentFormComponent>,\r\n    private readonly adapterService: AdapterService,\r\n    private invoiceService: InvoiceService,\r\n    private paymentService: PaymentService,\r\n    private serviceInvoicePaymentService: ServiceInvoicePaymentService,\r\n    private serviceInvoice: ServiceInvoiceService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, payment: Payment, companyId: number, orderId?: number }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('converted_amount').disable();\r\n\r\n    if (this.data.type === 'create')\r\n      this.form.get('service_invoices').disable();\r\n\r\n    if (this.data.type === 'edit') {\r\n      this.form.patchValue(<any>this.data.payment);\r\n      this.form.addControl('id' as any, this.fb.control(this.data.payment.id));\r\n      this.form.get('supplier').patchValue(this.data.payment.service_invoices[0].supplier.id);\r\n      const ids = this.data.payment.service_invoices.map(i => i.id);\r\n      this.form.get('service_invoices').patchValue(ids);\r\n      this.serviceInvoices = [...this.data.payment.service_invoices];\r\n      this.form.get('payment_date').patchValue(new Date(this.data.payment.payment_date));\r\n      this.form.get('service_invoices').disable();\r\n      this.amount = this.data.payment.amount;\r\n    }\r\n\r\n    if (this.data.companyId) {\r\n      this.form.get('supplier').patchValue(this.data.companyId);\r\n      this.onSelectCompany({id: this.data.companyId});\r\n      this.isDisabledCompanyPicker = true;\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createPayment();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editPayment();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createPayment() {\r\n    const send = this.form.value;\r\n    send.payment_date = this.adapterService.dateAdapter(new Date(send.payment_date));\r\n    this.serviceInvoicePaymentService.create(send).subscribe({\r\n      next: payment => this.dialogRef.close(payment),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editPayment() {\r\n    const send = this.form.value;\r\n    send.payment_date = this.adapterService.dateAdapter(new Date(send.payment_date));\r\n    this.serviceInvoicePaymentService.update(send).subscribe({\r\n      next: payment => this.dialogRef.close(payment),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectCompany(company: Partial<Company>) {\r\n    if (company) {\r\n      this.form.get('supplier').patchValue(company.id);\r\n      this.form.get('service_invoices').enable();\r\n      this.getInvoicesByCompany();\r\n    } else {\r\n      this.form.get('supplier').patchValue(null);\r\n      this.form.get('service_invoices').disable();\r\n    }\r\n    this.form.get('service_invoices').patchValue([]);\r\n    this.serviceInvoices = [];\r\n  }\r\n\r\n  getInvoicesByCompany() {\r\n    this.isLoading = true;\r\n    const query = [\r\n      {name: 'completed', value: true},\r\n      {name: 'supplier', value: this.form.get('supplier').value},\r\n    ];\r\n\r\n    if (this.data.orderId) {\r\n      query.push({name: 'order', value: this.data.orderId});\r\n    }\r\n\r\n    this.serviceInvoice.get(query).subscribe(invoices => {\r\n      this.serviceInvoices = invoices;\r\n      invoices.forEach(i => {\r\n        if (i.is_proforma) {\r\n          i.label = i.self_proforma_serial_number + ` (price ${i.total_price_converted} )`;\r\n        } else {\r\n          i.label = i.self_serial_number + ' (Invoice)' + ` (price: ${i.total_price_converted} )`;\r\n        }\r\n      });\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  roundValue(value) {\r\n    return Math.round(value * Math.pow(10, 2)) / Math.pow(10, 2);\r\n  }\r\n\r\n  countSum() {\r\n    const ids = this.form.get('service_invoices').value as number[];\r\n    let sum = 0;\r\n    console.log(sum);\r\n    if (ids.length > 0) {\r\n      ids.forEach(id => {\r\n        const findInvoice = this.serviceInvoices.find(inv => inv.id === id);\r\n        if (findInvoice) {\r\n          sum += findInvoice.total_price_converted;\r\n        }\r\n      });\r\n      const exchangeNum = this.form.get('exchange_rate').value;\r\n      if (exchangeNum < 0) {\r\n        const num = 1;\r\n        this.form.get('exchange_rate').patchValue(num);\r\n      }\r\n    }\r\n\r\n    if (this.data.type === 'create') {\r\n      this.form.get('converted_amount').patchValue(this.form.get('exchange_rate').value * sum);\r\n      this.form.get('amount').patchValue(sum);\r\n      sum = this.roundValue(sum);\r\n    } else {\r\n      this.form.get('converted_amount').patchValue(this.form.get('exchange_rate').value * +this.amount);\r\n    }\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Auxiliary Payment\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Supplier*</label>\r\n      <pek-company-picker\r\n        [currentCompanyId]=\"form.get('supplier').value\"\r\n        (selectCompanyFull)=\"onSelectCompany($event)\"\r\n        [isDisabled]=\"data.type === 'edit' || isDisabledCompanyPicker\"\r\n      >\r\n      </pek-company-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Invoice*</label>\r\n      <ng-container *ngIf=\"!isLoading; else spinner\">\r\n        <ng-container *ngIf=\"data.type === 'create'\">\r\n          <p-multiSelect\r\n            formControlName=\"service_invoices\"\r\n            class=\"disabled\"\r\n            placeholder=\"Choose Invoice\"\r\n            [options]=\"serviceInvoices\"\r\n            optionValue=\"id\"\r\n            optionLabel=\"label\"\r\n            (onChange)=\"countSum()\"\r\n          >\r\n          </p-multiSelect>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"data.type === 'edit'\">\r\n          <p-multiSelect\r\n            formControlName=\"service_invoices\"\r\n            class=\"disabled\"\r\n            placeholder=\"Choose Invoice\"\r\n            [options]=\"serviceInvoices\"\r\n            optionValue=\"id\"\r\n            optionLabel=\"self_serial_number\"\r\n            (onChange)=\"countSum()\"\r\n          >\r\n          </p-multiSelect>\r\n        </ng-container>\r\n      </ng-container>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Payment Amount*</label>\r\n      <input\r\n        class=\"p-inputtext\"\r\n        formControlName=\"amount\"\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Converted Payment Amount</label>\r\n      <input\r\n        class=\"p-inputtext disabled\"\r\n        formControlName=\"converted_amount\"\r\n      >\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Exchange Rate*</label>\r\n      <input\r\n        class=\"p-inputtext\"\r\n        formControlName=\"exchange_rate\"\r\n        (ngModelChange)=\"countSum()\"\r\n        type=\"number\"\r\n      >\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label>Date*</label>\r\n          <p-calendar\r\n            formControlName=\"payment_date\"\r\n            dateFormat=\"dd/mm/yy\"\r\n            [readonlyInput]=\"true\"\r\n          >\r\n          </p-calendar>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label>Accountant Number*</label>\r\n          <input class=\"p-inputtext\" formControlName=\"accountant_number\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Paid by card</label>\r\n      <p-checkbox formControlName=\"paid_by_card\" [binary]=\"true\" inputId=\"binary\"></p-checkbox>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {ProductFile} from \"../../../product-structure/models/product\";\r\nimport {PaymentService} from \"../../services/payment.service\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {finalize} from \"rxjs\";\r\nimport {PaymentFile} from \"../../models/payment\";\r\nimport {environment} from '@env/environment';\r\n\r\n@Component({\r\n  selector: 'pek-payment-file-form',\r\n  templateUrl: './payment-file-form.component.html',\r\n  styleUrls: ['./payment-file-form.component.scss']\r\n})\r\nexport class PaymentFileFormComponent implements OnInit {\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  uploadFiles: File[] = [];\r\n  files: PaymentFile[] = []\r\n  isLoading = true;\r\n  isPending = false;\r\n  link = environment.image_path;\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<PaymentFileFormComponent>,\r\n    private paymentService: PaymentService,\r\n    private adapterService: AdapterService,\r\n    private modalService: ModalService,\r\n    @Inject(MAT_DIALOG_DATA) public paymentId: number\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getFiles()\r\n  }\r\n\r\n  getFiles() {\r\n    this.paymentService.getPaymentFiles(this.paymentId).subscribe(files => {\r\n      this.files = files;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getFileName(file: string) {\r\n    let name = file.split('/');\r\n    return name[name.length - 1];\r\n  }\r\n\r\n  onSelectFiles(files: File[]) {\r\n    this.uploadFiles = files;\r\n  }\r\n\r\n\r\n  onDownloadFile(file: PaymentFile) {\r\n    this.addition.add(file.id);\r\n    this.paymentService.downloadPaymentFile(file.id).subscribe(response => {\r\n      const filename = this.getFileName(file.file);\r\n      this.adapterService.downloadFile(filename, response);\r\n      this.addition.clear();\r\n    });\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm =>{\r\n      if (confirm) {\r\n        this.deletion.add(id)\r\n\r\n        this.paymentService.removePaymentFile(id).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id)\r\n          this.files.splice(index, 1)\r\n          this.deletion.clear()\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onUploadFiles() {\r\n    this.isPending = true;\r\n    this.paymentService.severalUploadFiles(this.paymentId, this.uploadFiles)\r\n      .pipe(\r\n        finalize(() => this.isPending = false)\r\n      )\r\n      .subscribe(files => this.dialogRef.close(files));\r\n  }\r\n\r\n  fileAdded(file: File) {\r\n    this.uploadFiles.push(file);\r\n  }\r\n}\r\n","<div pekPasteScreenImage (imageAdded)=\"fileAdded($event)\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      Payment Files\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content >\r\n    <pek-upload-file\r\n      [uploadFiles]=\"uploadFiles\"\r\n      [multiple]=\"true\"\r\n      (selectFile)=\"onSelectFiles($event)\"\r\n    ></pek-upload-file>\r\n\r\n    <div class=\"product-files\">\r\n      <h3 class=\"product-files__caption\">Uploaded Files</h3>\r\n      <p-table\r\n        selectionMode=\"single\"\r\n        [value]=\"files\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 75%\">Name</th>\r\n            <th style=\"width: 20%\">Download</th>\r\n          </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"body\" let-file let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 75%\" class=\"word-break\">\r\n              <a [href]=\"link + file.file\">\r\n                {{getFileName(file.file)}}\r\n              </a>\r\n            </td>\r\n            <td style=\"width: 20%\">\r\n              <div class=\"d-flex\">\r\n                <button\r\n                  pButton\r\n                  (click)=\"onDownloadFile(file)\"\r\n                  [loading]=\"addition.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                  icon=\"pi pi-download\"\r\n                ></button>\r\n                <button\r\n                  pButton\r\n                  (click)=\"onRemoveFile(file.id)\"\r\n                  [loading]=\"deletion.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                  icon=\"pi pi-trash\"\r\n                ></button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-2\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Upload\"\r\n      [loading]=\"isPending\"\r\n      [disabled]=\"uploadFiles.length === 0\"\r\n      (click)=\"onUploadFiles()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {ServiceInvoicePayment, ServiceInvoicePaymentFile} from \"../../models/service-invoice-payment\";\r\nimport {ServiceInvoicePaymentService} from \"../../services/service-invoice-payment.service\";\r\nimport {finalize} from \"rxjs\";\r\nimport {environment} from '@env/environment';\r\n\r\n@Component({\r\n  selector: 'pek-service-payment-file-form',\r\n  templateUrl: './service-payment-file-form.component.html',\r\n  styleUrls: ['./service-payment-file-form.component.scss']\r\n})\r\nexport class ServicePaymentFileFormComponent implements OnInit {\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  uploadFiles: File[] = [];\r\n  files: ServiceInvoicePaymentFile[] = []\r\n  isLoading = true;\r\n  isPending = false;\r\n  link = environment.image_path;\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<ServicePaymentFileFormComponent>,\r\n    private serviceInvoicePaymentService: ServiceInvoicePaymentService,\r\n    private adapterService: AdapterService,\r\n    private modalService: ModalService,\r\n    @Inject(MAT_DIALOG_DATA) public paymentId: number) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.paymentId)\r\n    this.getFiles()\r\n  }\r\n\r\n  getFiles() {\r\n\r\n    this.serviceInvoicePaymentService.getAuxiliaryPaymentFiles(this.paymentId).subscribe(files => {\r\n      console.log(`Files`,files)\r\n      this.files = files;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getFileName(file: string) {\r\n    let name = file.split('/');\r\n    return name[name.length - 1];\r\n  }\r\n\r\n  onSelectFiles(files: File[]) {\r\n    this.uploadFiles = files\r\n  }\r\n\r\n  onDownloadFile(file: ServiceInvoicePaymentFile) {\r\n    this.addition.add(file.id)\r\n    this.serviceInvoicePaymentService.downloadAuxiliaryPaymentFile(file.id).subscribe(response => {\r\n      const fileName = this.getFileName(file.file)\r\n      this.adapterService.downloadFile(fileName, response)\r\n      this.addition.clear()\r\n    })\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm =>{\r\n      if (confirm) {\r\n        this.deletion.add(id)\r\n\r\n        this.serviceInvoicePaymentService.removeAuxiliaryPaymentFile(id).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id)\r\n          this.files.splice(index, 1)\r\n          this.deletion.clear()\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onUploadFiles() {\r\n    this.isPending = true;\r\n    this.serviceInvoicePaymentService.severalUploadFiles(this.paymentId, this.uploadFiles)\r\n      .pipe(\r\n        finalize(() => this.isPending = false)\r\n      )\r\n      .subscribe(files => this.dialogRef.close(files));\r\n  }\r\n\r\n  fileAdded(file: File) {\r\n    this.uploadFiles.push(file);\r\n  }\r\n}\r\n","<div pekPasteScreenImage (imageAdded)=\"fileAdded($event)\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      Auxiliary Payment Files\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content>\r\n    <pek-upload-file\r\n      [uploadFiles]=\"uploadFiles\"\r\n      [multiple]=\"true\"\r\n      (selectFile)=\"onSelectFiles($event)\"\r\n    ></pek-upload-file>\r\n\r\n    <div class=\"product-files\">\r\n      <h3 class=\"product-files__caption\">Uploaded Files</h3>\r\n      <p-table\r\n        selectionMode=\"single\"\r\n        [value]=\"files\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 75%\">Name</th>\r\n            <th style=\"width: 20%\">Download</th>\r\n          </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"body\" let-file let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 75%\" class=\"word-break\">\r\n              <a [href]=\"link + file.file\">\r\n                {{getFileName(file.file)}}\r\n              </a>\r\n            </td>\r\n            <td style=\"width: 20%\">\r\n              <div class=\"d-flex\">\r\n                <button\r\n                  pButton\r\n                  (click)=\"onDownloadFile(file)\"\r\n                  [loading]=\"addition.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                  icon=\"pi pi-download\"\r\n                ></button>\r\n                <button\r\n                  pButton\r\n                  (click)=\"onRemoveFile(file.id)\"\r\n                  [loading]=\"deletion.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                  icon=\"pi pi-trash\"\r\n                ></button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-2\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Upload\"\r\n      [loading]=\"isPending\"\r\n      [disabled]=\"uploadFiles.length === 0\"\r\n      (click)=\"onUploadFiles()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PaymentListsComponent } from './components/payment-lists/payment-lists.component';\r\nimport { PaymentLayoutComponent } from './components/payment-layout/payment-layout.component';\r\nimport {RouterModule} from \"@angular/router\";\r\nimport {LayoutModule} from \"../layout/layout.module\";\r\nimport {PaymentsRouting} from \"./payments.routing\";\r\nimport {SharedModule} from \"@shared/shared.module\";\r\nimport { CreateEditPaymentFormComponent } from './modals/create-edit-payment-form/create-edit-payment-form.component';\r\nimport {MultiSelectModule} from \"primeng/multiselect\";\r\nimport { CreateEditServicePaymentFormComponent } from './modals/create-edit-service-payment-form/create-edit-service-payment-form.component';\r\nimport { PaymentFileFormComponent } from './modals/payment-file-form/payment-file-form.component';\r\nimport { ServicePaymentFileFormComponent } from './modals/service-payment-file-form/service-payment-file-form.component';\r\nimport { DeliveryPaymentListComponent } from './components/delivery-payment-list/delivery-payment-list.component';\r\n\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PaymentListsComponent,\r\n    PaymentLayoutComponent,\r\n    CreateEditPaymentFormComponent,\r\n    CreateEditServicePaymentFormComponent,\r\n    PaymentFileFormComponent,\r\n    ServicePaymentFileFormComponent,\r\n    DeliveryPaymentListComponent,\r\n\r\n  ],\r\n    imports: [\r\n        CommonModule,\r\n        RouterModule,\r\n        LayoutModule,\r\n        PaymentsRouting,\r\n        SharedModule,\r\n        MultiSelectModule\r\n    ]\r\n})\r\nexport class PaymentsModule { }\r\n","import {RouterModule, Routes} from \"@angular/router\";\r\nimport {NgModule} from \"@angular/core\";\r\nimport {PaymentLayoutComponent} from \"./components/payment-layout/payment-layout.component\";\r\nimport {PaymentListsComponent} from \"./components/payment-lists/payment-lists.component\";\r\nimport {DeliveryPaymentListComponent} from \"./components/delivery-payment-list/delivery-payment-list.component\";\r\n\r\nconst routes: Routes = [{\r\n  path: '', component: PaymentLayoutComponent, children: [\r\n    {path: 'payments', component: PaymentListsComponent},\r\n    {path: 'delivery', component: DeliveryPaymentListComponent},\r\n    {path: '', redirectTo: 'payments', pathMatch: 'full'},\r\n    //{path: '**', redirectTo: '', pathMatch: 'full'},\r\n  ]\r\n}];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PaymentsRouting {\r\n\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {forkJoin, Observable, of} from 'rxjs';\r\nimport {environment} from \"@env/environment\";\r\nimport {Payment, PaymentFile} from \"../models/payment\";\r\nimport {catchError, map} from 'rxjs/operators';\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {CreateEditPaymentFormComponent} from \"../modals/create-edit-payment-form/create-edit-payment-form.component\";\r\nimport {PaymentFileFormComponent} from \"../modals/payment-file-form/payment-file-form.component\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PaymentService {\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'payments/';\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Payment[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.http.get<{ data: Payment[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  create(payment: any): Observable<Payment> {\r\n    return this.http.post<{ data: Payment }>(this.API_URL + this.url, payment).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  update(payment: any): Observable<Payment> {\r\n    return this.http.patch<{ data: Payment }>(this.API_URL + this.url + `${payment.id}/`, payment).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(payment: Payment): Observable<any> {\r\n    return this.http.delete(this.API_URL + this.url + `${payment.id}/`)\r\n  };\r\n\r\n  pay(payment: any): Observable<Payment> {\r\n    return this.http.patch<{ data: Payment }>(this.API_URL + this.url + `${payment.id}/`, payment).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  downloadPaymentFile(fileId: number): Observable<Blob> {\r\n    return this.http.get(this.API_URL + `payment_file_download/${fileId}/`, {responseType: 'blob'})\r\n  }\r\n\r\n  removePaymentFile(fileId: number): Observable<any> {\r\n    return this.http.post(this.API_URL + `payment_file_delete/${fileId}/`, null)\r\n  }\r\n\r\n  getPaymentFiles(paymentId: number): Observable<PaymentFile[]> {\r\n    return this.http.get<{data: PaymentFile[]}>(this.API_URL + `payment_files/${paymentId}/`).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  getConfirmationPayments(): Observable<Payment[]> {\r\n    return this.http.get<{ data: Payment[] }>(this.API_URL + this.url + 'confirmation_list/').pipe(\r\n      map(response => response.data));\r\n  }\r\n\r\n  severalConfirm(ids: number[]): Observable<any[]> {\r\n    return forkJoin(...ids.map(id => this.http.post<{ data: Payment }>(this.API_URL + this.url + `confirm/${id}/`, null).pipe(\r\n      catchError(() => of(null)),\r\n    )));\r\n  }\r\n\r\n  severalDecline(ids: number[]): Observable<any[]> {\r\n    return forkJoin(...ids.map(id => this.http.post<{ data: Payment }>(this.API_URL + this.url + `decline/${id}/`, null).pipe(\r\n      catchError(() => of(null)),\r\n    )));\r\n  }\r\n\r\n  getLimit(): Observable<{ id: number; value: string }[]> {\r\n    return this.http.get<{ data: { id: number; value: string }[] }>(this.API_URL + 'maximum_confirmed_payment_amount/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  setLimit(limit: { id: number, value: string }): Observable<any> {\r\n    return this.http.patch(this.API_URL + 'maximum_confirmed_payment_amount/' + limit.id + '/', limit);\r\n  }\r\n\r\n  severalUploadFiles(paymentId: number, files: File[]): Observable<PaymentFile[]> {\r\n    const arrayFormData: FormData[] = [];\r\n\r\n    files.forEach(file => {\r\n      const formData = new FormData()\r\n      formData.append('file', file);\r\n      arrayFormData.push(formData)\r\n    })\r\n    return forkJoin(...arrayFormData.map(formData => this.http.post<{data: PaymentFile}>(this.API_URL + `payment_files/${paymentId}/`, formData).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  openCreateEditPaymentForm(type: ModalActionType, payment?: Payment, companyId?: number, orderId?: number): Observable<Payment[]> {\r\n    return this.dialog\r\n      .open<CreateEditPaymentFormComponent>(CreateEditPaymentFormComponent, {\r\n        width: '39rem',\r\n        height: 'auto',\r\n        data: {type, payment, companyId, orderId},\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  showPaymentFiles(paymentId: number): Observable<void> {\r\n    return this.dialog\r\n      .open<PaymentFileFormComponent>(PaymentFileFormComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: paymentId,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {map} from 'rxjs/operators';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {ServiceInvoicePayment, ServiceInvoicePaymentFile} from '../models/service-invoice-payment';\r\nimport {Payment} from \"../models/payment\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {\r\n  CreateEditServicePaymentFormComponent\r\n} from \"../modals/create-edit-service-payment-form/create-edit-service-payment-form.component\";\r\nimport {\r\n  ServicePaymentFileFormComponent\r\n} from \"../modals/service-payment-file-form/service-payment-file-form.component\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ServiceInvoicePaymentService {\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'service_invoice_payments/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  getConfirmationPayments(): Observable<ServiceInvoicePayment[]> {\r\n    return this.httpClient.get<{ data: ServiceInvoicePayment[] }>(this.API_URL + this.url + 'confirmation_list/').pipe(\r\n      map(response => response.data));\r\n  }\r\n\r\n  severalConfirm(ids: number[]): Observable<any[]> {\r\n    return forkJoin(...ids.map(id => this.httpClient.post<{ data: ServiceInvoicePayment }>(this.API_URL + this.url + `confirm/${id}/`, null)));\r\n  }\r\n\r\n  severalDecline(ids: number[]): Observable<any[]> {\r\n    return forkJoin(...ids.map(id => this.httpClient.post<{ data: ServiceInvoicePayment }>(this.API_URL + this.url + `decline/${id}/`, null)));\r\n  }\r\n\r\n  create(payment: any): Observable<ServiceInvoicePayment> {\r\n    return this.httpClient.post<{ data: ServiceInvoicePayment }>(this.API_URL + this.url, payment).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  update(payment: any): Observable<ServiceInvoicePayment> {\r\n    return this.httpClient.patch<{ data: ServiceInvoicePayment }>(this.API_URL + this.url + `${payment.id}/`, payment).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${id}/`)\r\n  };\r\n\r\n  get(query?: { name: string, value: any }[]): Observable<ServiceInvoicePayment[]> {\r\n    let q_string = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: ServiceInvoicePayment[] }>(this.API_URL + this.url + 'all/' + q_string).pipe\r\n    (map(response => response.data))\r\n  }\r\n\r\n  downloadAuxiliaryPaymentFile(fileId): Observable<Blob> {\r\n    return this.httpClient.get(this.API_URL + `service_invoice_payment_file_download/${fileId}/`, {responseType: 'blob'})\r\n  }\r\n\r\n  removeAuxiliaryPaymentFile(fileId: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + `service_invoice_payment_file_delete/${fileId}/`, null)\r\n  }\r\n\r\n  getAuxiliaryPaymentFiles(paymentId: number): Observable<ServiceInvoicePaymentFile[]> {\r\n    return this.httpClient.get<{ data: ServiceInvoicePaymentFile[] }>(this.API_URL + `service_invoice_payment_files/${paymentId}/`).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  severalUploadFiles(paymentId: number, files: File[]): Observable<ServiceInvoicePaymentFile[]> {\r\n    const arrayFormData: FormData[] = [];\r\n\r\n    files.forEach(file => {\r\n      const formData = new FormData()\r\n      formData.append('file', file);\r\n      arrayFormData.push(formData)\r\n    })\r\n    return forkJoin(...arrayFormData.map(formData => this.httpClient.post<{ data: ServiceInvoicePaymentFile }>(this.API_URL + `service_invoice_payment_files/${paymentId}/`, formData).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  pay(payment: any): Observable<Payment> {\r\n    return this.httpClient.patch<{ data: Payment }>(this.API_URL + this.url + `${payment.id}/`, payment).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  openCreateEditServicePaymentForm(type: ModalActionType, payment?: ServiceInvoicePayment, companyId?: number, orderId?: number): Observable<ServiceInvoicePayment[]> {\r\n    return this.dialog\r\n      .open<CreateEditServicePaymentFormComponent>(CreateEditServicePaymentFormComponent, {\r\n        width: '55rem',\r\n        height: 'auto',\r\n        data: {type, payment, companyId, orderId},\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n\r\n  showAuxiliaryPaymentFiles(paymentId: number): Observable<void> {\r\n    return this.dialog\r\n      .open<ServicePaymentFileFormComponent>(ServicePaymentFileFormComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: paymentId,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {BaseServicesService} from '../../services/base-services.service';\r\nimport {BaseService} from '../../models/base-service';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {cloneDeep} from 'lodash-es';\r\nimport {TreeService} from '@shared/services/tree.service';\r\n\r\n@Component({\r\n  selector: 'pek-auxiliary-invoices-types-list',\r\n  templateUrl: './auxiliary-invoices-types-list.component.html',\r\n  styleUrls: ['./auxiliary-invoices-types-list.component.scss']\r\n})\r\nexport class AuxiliaryInvoicesTypesListComponent implements OnInit {\r\n  isLoading = true;\r\n  services: BaseService[] = [];\r\n  selectedNode: TreeNode<BaseService>;\r\n  servicesTree: TreeNode<BaseService>[] = [];\r\n\r\n  expanseMap = {};\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Auxiliary Invoices Type',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditService()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveService()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  constructor(\r\n    private readonly baseServicesService: BaseServicesService,\r\n    private readonly treeService: TreeService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getServices();\r\n  }\r\n\r\n  getServices() {\r\n    this.baseServicesService.get().subscribe(services => {\r\n      this.services = services;\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.servicesTree) {\r\n      this.treeService.mapExpansion(this.servicesTree, this.expanseMap);\r\n    }\r\n\r\n    this.servicesTree = this.treeService.createTree(this.services, this.expanseMap);\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.servicesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.servicesTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.servicesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.servicesTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  private onEditService() {\r\n    this.baseServicesService.createEditBaseService('edit', this.selectedNode.data).subscribe(service => {\r\n      if (service) {\r\n        const index = this.services.findIndex(s => s.id === service.id);\r\n        this.services[index] = service;\r\n        this.selectedNode = null;\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n  public onCreateService() {\r\n    this.baseServicesService.createEditBaseService('create').subscribe(service => {\r\n      if (service) {\r\n        this.services.unshift(service);\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n  private onRemoveService() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.baseServicesService.delete(this.selectedNode.data.id).subscribe(() => {\r\n          const removeChildren = (id: number) => {\r\n            const ids: number[] = this.services.filter(p => p.parent === id).map(p => p.id);\r\n            this.services = [...this.services.filter(p => p.parent !== id)];\r\n\r\n            ids.forEach(id => {\r\n              removeChildren(id);\r\n            });\r\n          };\r\n\r\n          removeChildren(this.selectedNode.data.id);\r\n\r\n          const index = this.services.findIndex(p => p.id === this.selectedNode.data.id);\r\n          this.services.splice(index, 1);\r\n          this.selectedNode = null;\r\n          this.createTree();\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Auxiliary Invoices Types</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"New Auxiliary Invoices Types\"\r\n        (click)=\"onCreateService()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          #dt\r\n          [value]=\"servicesTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedNode\"\r\n          [scrollable]=\"true\"\r\n          scrollHeight=\"calc(100vh - 19.2rem)\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedNode\">Choose the Auxiliary Invoices Type to edit</p>\r\n              <p-menubar class=\"ml-auto mr-2\" [model]=\"menuItems\" [class.disabled]=\"!selectedNode\"></p-menubar>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-down\"\r\n                label=\"Expand All\"\r\n                class=\"mr-2\"\r\n                (click)=\"onExpandAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-up\"\r\n                label=\"Collapse All\"\r\n                (click)=\"onCollapseAll()\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 45%; padding-left: 48px\">Name</th>\r\n              <th style=\"width: 55%\">Comment</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr\r\n              [ttRow]=\"rowNode\"\r\n              [ttSelectableRow]=\"rowNode\"\r\n            >\r\n              <td style=\"width: 45%\">\r\n                <div class=\"table-toggle\">\r\n                  <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                  <span>{{rowData.name}}</span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 55%\">\r\n                {{rowData.comment}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {OrderProduct} from '../../models/order-product';\r\nimport {BehaviorSubject, iif, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, map, tap} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {OrderProductService} from '../../services/order-product.service';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {OrderService} from '../../services/order.service';\r\nimport {Router} from '@angular/router';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-procurement-chain-creation-list',\r\n  templateUrl: './procurement-chain-creation-list.component.html',\r\n  styleUrls: ['./procurement-chain-creation-list.component.scss']\r\n})\r\nexport class ProcurementChainCreationListComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  isCanOrder = false;\r\n  isCanAddOrder = false;\r\n\r\n  isShowAll = false;\r\n\r\n  statuses = [\r\n    {label: 'ORDERED', value: 'ordered'},\r\n    {label: 'NOT ORDERED', value: 'not_ordered'},\r\n    {label: 'PARTLY ORDERED', value: 'partially_ordered'}\r\n  ];\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    nomenclature__name: [null],\r\n    categories_ids: [null],\r\n    request_date: [null],\r\n    order_by_name: [null],\r\n    order_by_code: [null],\r\n    order_by_category: [null],\r\n    first_root_plan_name: [null],\r\n    first_product_list_name: [null],\r\n    status: ['not_ordered']\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProducts: OrderProduct[] = [];\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  name$: Subject<void> = new Subject<void>();\r\n\r\n  orderProducts$: Observable<OrderProduct[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      iif(() =>\r\n        !this.isShowAll,\r\n        this.orderProductService.getGroupedPurchasedForPagination(this.query).pipe(\r\n          tap(response => this.productsCount = response.count),\r\n          map(response => response.results.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          })),\r\n        ),\r\n        this.orderProductService.getGroupedPurchased(this.query).pipe(\r\n          tap(products => this.productsCount = products.length),\r\n          map(products => products.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          }))\r\n        )\r\n      ),\r\n    ),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly orderService: OrderService,\r\n    private readonly modalService: ModalService,\r\n    private readonly router: Router,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  setProductStatus(product: OrderProduct) {\r\n    let status: string;\r\n\r\n    if (product.ordered_quantity >= product.initial_quantity) {\r\n      status = 'A0';\r\n    } else if (product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0) {\r\n      status = 'A1';\r\n    } else {\r\n      status = 'A2';\r\n    }\r\n\r\n    return status;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProducts = [];\r\n\r\n    this.onCheckOrder();\r\n    this.onCheckAddOrder();\r\n    this.getIsCleanUnnecessary();\r\n    this.getIsDeleted();\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n    ];\r\n    const ordering = this.prepareSortingField();\r\n    if (ordering) {\r\n      this.query.push({\r\n        name: 'ordering',\r\n        value: ordering\r\n      });\r\n    }\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: true},)\r\n    }\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  prepareSortingField() {\r\n    let sorting = '';\r\n    if (this.searchForm.get('order_by_name').value !== null) {\r\n      if (this.searchForm.get('order_by_name').value) {\r\n        sorting += '-nomenclature__name,';\r\n      } else {\r\n        sorting += 'nomenclature__name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_code').value !== null) {\r\n      if (this.searchForm.get('order_by_code').value) {\r\n        sorting += '-nomenclature__code,';\r\n      } else {\r\n        sorting += 'nomenclature__code,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_category').value !== null) {\r\n      if (this.searchForm.get('order_by_category').value) {\r\n        sorting += '-nomenclature__category__name,';\r\n      } else {\r\n        sorting += 'nomenclature__category__name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('first_root_plan_name').value !== null) {\r\n      if (this.searchForm.get('first_root_plan_name').value) {\r\n        sorting += '-first_root_plan_name,';\r\n      } else {\r\n        sorting += 'first_root_plan_name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('first_product_list_name').value !== null) {\r\n      if (this.searchForm.get('first_product_list_name').value) {\r\n        sorting += '-first_product_list_name,';\r\n      } else {\r\n        sorting += 'first_product_list_name,';\r\n      }\r\n    }\r\n    return sorting;\r\n  }\r\n\r\n  sorting(value: boolean, field: string) {\r\n    this.resetAllSorting();\r\n    if (value === null) {\r\n      this.searchForm.get(field).patchValue(false);\r\n    } else if (value === false) {\r\n      this.searchForm.get(field).patchValue(true);\r\n    } else if (value === true) {\r\n      this.searchForm.get(field).patchValue(null);\r\n    }\r\n    this.search$.next();\r\n  }\r\n  resetAllSorting() {\r\n    this.searchForm.get('order_by_code').setValue(null);\r\n    this.searchForm.get('order_by_name').setValue(null);\r\n    this.searchForm.get('order_by_category').setValue(null);\r\n    this.searchForm.get('first_root_plan_name').setValue(null);\r\n    this.searchForm.get('first_product_list_name').setValue(null);\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  getSmallDescription(description: string) {\r\n    if (description && description?.length > 40) return description.substring(0, 40) + '...';\r\n    else return description\r\n  }\r\n\r\n  onCheckOrder() {\r\n    this.isCanOrder = true;\r\n\r\n    this.selectedProducts.forEach(element => {\r\n      if (element.ordered_quantity >= element.initial_quantity) {\r\n        this.isCanOrder = false;\r\n      }\r\n    });\r\n\r\n    if (this.selectedProducts.length === 0) {\r\n      this.isCanOrder = false;\r\n    }\r\n  }\r\n\r\n  onCheckAddOrder() {\r\n    this.isCanAddOrder = this.selectedProducts.every(node => node.status !== 'A0');\r\n  }\r\n\r\n  getIsCleanUnnecessary() {\r\n    if (this.selectedProducts) {\r\n      return this.selectedProducts.every(node => node.status === 'A1');\r\n    }\r\n  }\r\n\r\n  getIsDeleted() {\r\n    if (this.selectedProducts) {\r\n      return this.selectedProducts.every(node => node.status === 'A2');\r\n    }\r\n  }\r\n\r\n  onCloseOrders() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        const partlyOrderedProducts = this.selectedProducts.filter(n => n.status === 'A1');\r\n\r\n        if (partlyOrderedProducts.length > 0) {\r\n\r\n          console.log(partlyOrderedProducts);\r\n          this.selectedProducts = [];\r\n          this.orderProductService.closeOrders(partlyOrderedProducts).subscribe(() => this.search$.next());\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onDeleteOrders() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        const notOrderedProducts = this.selectedProducts.filter(n => n.status === 'A2');\r\n\r\n        if (notOrderedProducts.length > 0) {\r\n          this.selectedProducts = [];\r\n          this.orderProductService.deleteSeveral(notOrderedProducts).subscribe(() => this.search$.next());\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreateChain() {\r\n    this.orderService.openCreateChainModal(this.selectedProducts, 'procurement').subscribe(order => {\r\n      if (order) {\r\n        this.router.navigate(['/procurement/chains/order', order.id]);\r\n      }\r\n    });\r\n  }\r\n\r\n  onAddProductsToChain() {\r\n    this.orderService.openAddProductsToChainModal(this.selectedProducts, 'procurement').subscribe(order => {\r\n      if (order) {\r\n        this.search$.next();\r\n      }\r\n    });\r\n  }\r\n\r\n  onSelectCategories(ids: number[]) {\r\n    this.searchForm.get('categories_ids').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isShowAll = value;\r\n    this.search$.next()\r\n\r\n    if (!this.isShowAll) {\r\n      this.currentPage = 1\r\n    }\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Procurement Chain Creation</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        [disabled]=\"!selectedProducts || !isCanOrder\"\r\n        class=\"ml-auto mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Create Procurement Chain\"\r\n        (click)=\"onCreateChain()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder\"\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Add To Procurement Chain\"\r\n        (click)=\"onAddProductsToChain()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder || !getIsCleanUnnecessary()\"\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-check\"\r\n        label=\"Close Order\"\r\n        (click)=\"onCloseOrders()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder || !getIsDeleted()\"\r\n        class=\"p-button-danger\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-times\"\r\n        label=\"Delete Order\"\r\n        (click)=\"onDeleteOrders()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form\r\n      [formGroup]=\"searchForm\"\r\n      class=\"form mb-3\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input\r\n              formControlName=\"nomenclature__name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n              type=\"text\"\r\n              pInputText\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Category</label>\r\n            <pek-multi-product-categories-picker\r\n              (choiceCategories)=\"onSelectCategories($event)\"></pek-multi-product-categories-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Date</label>\r\n            <p-calendar\r\n              formControlName=\"request_date\"\r\n              dataType=\"date\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Status</label>\r\n            <p-dropdown\r\n              [options]=\"statuses\"\r\n              formControlName=\"status\"\r\n              optionValue=\"value\"\r\n              [showClear]=\"true\"\r\n              placeholder=\"Choose Status\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            ></p-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"multiple\"\r\n        dataKey=\"id\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 24.25rem)\"\r\n        [value]=\"orderProducts$ | async\"\r\n        [(selection)]=\"selectedProducts\"\r\n        (selectionChange)=\"onCheckOrder(); onCheckAddOrder();\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 2%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 3%\" class=\"text-center\">ID</th>\r\n            <th style=\"width: 8%\"\r\n                pSortableColumn=\"nomenclature.name\"\r\n                (click)=\"sorting(searchForm.get('order_by_name').value, 'order_by_name')\">\r\n              Name\r\n              <pek-sort-icon [value]=\"searchForm.get('order_by_name').value\"></pek-sort-icon>\r\n            </th>\r\n            <th style=\"width: 4%\" class=\"text-center\">Request Quantity</th>\r\n            <th style=\"width: 4%\" class=\"text-center\">Ordered Quantity</th>\r\n            <th style=\"width: 6%\" class=\"text-center\">Free Ordered Quantity</th>\r\n            <th style=\"width: 4%\" class=\"text-center\">UOM</th>\r\n            <th style=\"width: 7%;\"\r\n                pSortableColumn=\"nomenclature.category.name\"\r\n                (click)=\"sorting(searchForm.get('order_by_category').value, 'order_by_category')\">\r\n              Category\r\n              <pek-sort-icon [value]=\"searchForm.get('order_by_category').value\"></pek-sort-icon>\r\n            </th>\r\n            <th style=\"width: 10%;\"> Description</th>\r\n            <th style=\"width: 5%;\" class=\"text-center\">Date</th>\r\n            <th style=\"width: 6%;\" class=\"text-center\">Request Type</th>\r\n            <th class=\"text-center\" style=\"width: 6%;\">Chains</th>\r\n            <th style=\"width: 9%;\"\r\n                pSortableColumn=\"first_root_plan_name\"\r\n                (click)=\"sorting(searchForm.get('first_root_plan_name').value, 'first_root_plan_name')\">\r\n              Root Lists\r\n              <pek-sort-icon [value]=\"searchForm.get('first_root_plan_name').value\"></pek-sort-icon>\r\n            </th>\r\n            <th style=\"width: 9%;\"\r\n\r\n                pSortableColumn=\"first_product_list_name\"\r\n                (click)=\"sorting(searchForm.get('first_product_list_name').value, 'first_product_list_name')\">\r\n              Production Lists\r\n              <pek-sort-icon [value]=\"searchForm.get('first_product_list_name').value\"></pek-sort-icon>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 7%;\">Status</th>\r\n            <th class=\"text-center\" style=\"width: 10%;\">Creator</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"product\">\r\n            <td style=\"width: 2%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 3%\" class=\"text-center\">{{product.request_id}}</td>\r\n            <td style=\"width: 8%\">\r\n              {{product.nomenclature.name}}\r\n            </td>\r\n            <td style=\"width: 4%\" class=\"text-center\">{{product.initial_quantity}}</td>\r\n            <td style=\"width: 4%\" class=\"text-center\">{{product.ordered_quantity}}</td>\r\n            <td style=\"width: 6%\"\r\n                class=\"text-center\">{{product.free_quantity_without_final_status ? product.free_quantity_without_final_status : 0}}</td>\r\n            <td style=\"width: 4%\" class=\"text-center\">\r\n              {{product.nomenclature.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs'}}\r\n            </td>\r\n            <td style=\"width: 7%;\">{{product.nomenclature.category?.name}}</td>\r\n            <td style=\"width: 10%;\">\r\n              <div class=\"hovered-info\">\r\n                <div class=\"word-break hovered-info\">\r\n                  <!--                [pTooltip]=\"product.nomenclature.description ? product.nomenclature.description : 'No Description'\"-->\r\n                  {{getSmallDescription(product.nomenclature.description)}}\r\n                  <pek-hover-detailed-info-component\r\n                    [moveLeft]=\"40\"\r\n                    *ngIf=\"product.nomenclature.description\"\r\n                  >\r\n                    <div class=\"description-tooltip\">\r\n                      {{product.nomenclature.description}}\r\n                    </div>\r\n                  </pek-hover-detailed-info-component>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 5%;\"\r\n                class=\"text-center  hovered-info\">{{product.request_date | date:'dd/MM/yyyy HH:mm'}}</td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              <ng-container *ngIf=\"product.request_type==1\">Auto</ng-container>\r\n              <ng-container *ngIf=\"product.request_type==0\">Manual</ng-container>\r\n            </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">\r\n              <ng-container *ngFor=\"let order of product.orders; let idx = index\">\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 1\"\r\n                   [routerLink]=\"['/procurement/chains/order/',order.id]\">\r\n                  {{order.id}}</a>\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 2\"\r\n                   [routerLink]=\"['/outsourcing/chains/order/',order.id]\">\r\n                  {{order.id}}<span *ngIf=\"idx !== product.orders.length - 1\">,</span></a>\r\n              </ng-container>\r\n            </td>\r\n\r\n            <td style=\"width: 9%;\">\r\n              <ng-container *ngFor=\"let list of product.root_production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.root_production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 9%;\">\r\n              <ng-container *ngFor=\"let list of product.production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 7%;\">\r\n              <ng-container *ngIf=\"product.ordered_quantity >= product.initial_quantity\">\r\n                <span class=\"badge badge_success\">ORDERED</span>\r\n              </ng-container>\r\n              <ng-container\r\n                *ngIf=\"product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0\"\r\n              >\r\n                <span class=\"badge badge_warning\">PARTLY ORDERED</span>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"product.ordered_quantity==0\">\r\n                <span class=\"badge badge_danger\">NOT ORDERED</span>\r\n              </ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 10%;\">\r\n              <ng-container *ngIf=\"product.creator\">\r\n                {{product.creator.first_name}} {{product.creator.last_name}}\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"16\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n      <div\r\n        *ngIf=\"!isShowAll\"\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"productsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll(true)\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(false)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {OrderService} from '../../services/order.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Order} from '../../models/order';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ListProduct} from '../../../warehouse/models/list-product';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {Router} from '@angular/router';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {BehaviorSubject, switchMap} from 'rxjs';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {Table} from 'primeng/table';\r\nimport {OrderStatusesTableComponent} from '@shared/components/order-statuses-table/order-statuses-table.component';\r\nimport {environment} from \"@env/environment\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-procurement-chains',\r\n  templateUrl: './procurement-chains.component.html',\r\n  styleUrls: ['./procurement-chains.component.scss']\r\n})\r\nexport class ProcurementChainsComponent implements OnInit {\r\n  @ViewChild('dt') dt: Table;\r\n  @ViewChild(OrderStatusesTableComponent)\r\n  orderStatusTableComponent: OrderStatusesTableComponent;\r\n\r\n  isShowStatuses = false;\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Chain',\r\n    items: [\r\n      {\r\n        label: 'Open Chain',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onGoToOderPage()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveChain()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    contains_nomenclature: [null],\r\n    supplier: [null],\r\n    order_root_list_id: [null],\r\n    active_status__in: [null],\r\n    created_after: [null],\r\n    created_before: [null],\r\n    root_production_list_products_root_categories: [null],\r\n    contains_nomenclatures_by_categories: [null],\r\n    contains_declined_payment: [null],\r\n  });\r\n\r\n  orders: Order[] = [];\r\n  selectedOrder: Order;\r\n\r\n  isLoading = false;\r\n  isHideFilters = false;\r\n\r\n  nomenclaturesList: Nomenclature[] = [];\r\n  rootLists: any[] = [];\r\n  productionPlanLinkBase = environment.link_url + \"dash/production/plan/tasks/\";\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  tableScrollHeight = '29.625rem';\r\n  firstPage: number = 0;\r\n  finalStatusSelected = false;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderService: OrderService,\r\n    private readonly router: Router,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.search$.pipe(\r\n      tap(() => this.prepareForSearch()),\r\n      switchMap(() => this.orderService.get(this.query)),\r\n      map(orders => this.orderService.modifyOrders(orders)),\r\n      tap(orders => this.orders = orders),\r\n      tap(() => this.generateNomenclaturesListAndRootLists()),\r\n      tap(() => this.isLoading = false),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  generateNomenclaturesListAndRootLists() {\r\n    this.orders.forEach(order => {\r\n      if (order.activeStatusDate) {\r\n        order.activeStatusDate = new Date(order.activeStatusDate);\r\n      }\r\n\r\n      order.order_products.forEach(orderProduct => {\r\n        if (!this.nomenclaturesList.includes(orderProduct.nomenclature)) {\r\n          this.nomenclaturesList.push(orderProduct.nomenclature);\r\n        }\r\n      });\r\n\r\n      order.root_production_list_products.forEach((root) => {\r\n\r\n        order.root_production_plans.forEach((plan: any) => {\r\n          if (plan.list_product.id == root.id) {\r\n            root.productionPlanId = plan.id\r\n          }\r\n        })\r\n        this.rootLists.push(root);\r\n      });\r\n\r\n      this.rootLists = this.rootLists.map(root => {\r\n        return {\r\n          ...root,\r\n          fullName: `(${root.id}) ${root.nomenclature.code}~${root.nomenclature.name}`\r\n        };\r\n      });\r\n    });\r\n\r\n    this.nomenclaturesList = this.adapterService.removeDuplicates(this.nomenclaturesList, x => x.id);\r\n    this.rootLists = this.adapterService.removeDuplicates(this.rootLists, x => x.id);\r\n\r\n    this.nomenclaturesList.sort((a, b) => {\r\n      if (a.name < b.name) return -1;\r\n      if (a.name > b.name) return 1;\r\n      return 0;\r\n    });\r\n\r\n    this.rootLists.sort((a, b) => {\r\n      if (a.fullName < b.fullName) return -1;\r\n      if (a.fullName > b.fullName) return 1;\r\n      return 0;\r\n    });\r\n\r\n  }\r\n\r\n  getRootLists(rootLists: ListProduct[]): { list: ListProduct, count?: number }[] {\r\n    const lists: { list: ListProduct, count?: number }[] = [];\r\n    rootLists.forEach((res: ListProduct) => {\r\n      const found = lists.find(el => el.list.nomenclature.name === res.nomenclature.name);\r\n      if (found) {\r\n        found.count++;\r\n      } else {\r\n        lists.push({list: res, count: 1});\r\n      }\r\n    });\r\n    return lists;\r\n  }\r\n\r\n  private onGoToOderPage() {\r\n    window.open('/procurement/chains/order/' + this.selectedOrder?.id, '_blank');\r\n  }\r\n\r\n  onRemoveChain() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.orderService.delete(this.selectedOrder.id).subscribe(() => {\r\n          this.orders = this.orders.filter(x => x.id !== this.selectedOrder.id);\r\n          this.selectedOrder = null;\r\n\r\n          setTimeout(() => {\r\n            this.orderStatusTableComponent?.renderDates({first: this.firstPage});\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedOrder = null;\r\n    this.orders = [];\r\n\r\n    this.query = [\r\n      {name: 'accounting_type', value: 1},\r\n      {name: 'has_purchase_category', value: false},\r\n      {name: 'exclude_with_active_final_status', value: !this.finalStatusSelected}\r\n    ];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    this.firstPage = 0;\r\n    this.orderStatusTableComponent?.renderDates({first: 0});\r\n    this.orders = this.orders.map(o => o);\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.searchForm.get('supplier').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectStatuses(ids: number[]) {\r\n    this.searchForm.get('active_status__in').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectRootCategories(ids: string) {\r\n    this.searchForm.get('root_production_list_products_root_categories').patchValue(ids);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategories(ids: number[]) {\r\n    this.searchForm.get('contains_nomenclatures_by_categories').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onToggleStatuses() {\r\n    this.isShowStatuses = !this.isShowStatuses;\r\n  }\r\n\r\n  onChangePage(page: number) {\r\n    this.firstPage = page;\r\n  }\r\n\r\n  onPage(evt: any) {\r\n    this.orderStatusTableComponent.renderDates(evt);\r\n  }\r\n\r\n  onSelectOrder() {\r\n    this.orderStatusTableComponent.selectedOrder = this.selectedOrder;\r\n  }\r\n\r\n  onSelectionOrder(order: Order) {\r\n    this.selectedOrder = order;\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.dt.paginator = value;\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Procurement Chains</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n\r\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n      <div class=\"filters-visibility__header\">\r\n        <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n      </div>\r\n\r\n      <button\r\n        class=\"icon pi\"\r\n        [class.pi-angle-double-up]=\"!isHideFilters\"\r\n        [class.pi-angle-double-down]=\"isHideFilters\"\r\n        [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n        tooltipPosition=\"left\"\r\n      ></button>\r\n\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Nomenclature</label>\r\n              <p-dropdown\r\n                [filter]=\"true\"\r\n                [showClear]=\"true\"\r\n                [options]=\"nomenclaturesList\"\r\n                formControlName=\"contains_nomenclature\"\r\n                optionValue=\"id\"\r\n                optionLabel=\"name\"\r\n                placeholder=\"No Nomenclature Selected\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              ></p-dropdown>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Company</label>\r\n              <pek-company-picker (selectCompany)=\"onSelectCompany($event)\"></pek-company-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Root List</label>\r\n              <p-dropdown\r\n                [filter]=\"true\"\r\n                [showClear]=\"true\"\r\n                [options]=\"rootLists\"\r\n                formControlName=\"order_root_list_id\"\r\n                (ngModelChange)=\"search$.next()\"\r\n                optionValue=\"list.id\"\r\n                optionLabel=\"fullName\"\r\n                placeholder=\"No List Selected\"\r\n              ></p-dropdown>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Status</label>\r\n              <pek-multi-statuses-picker\r\n                (selectStatuses)=\"onSelectStatuses($event)\"\r\n                (isFinalStatusSelected)=\"finalStatusSelected = $event\"\r\n                [accountingType]=\"4\"\r\n              ></pek-multi-statuses-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"row\">\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>From</label>\r\n                  <p-calendar\r\n                    formControlName=\"created_after\"\r\n                    dataType=\"date\"\r\n                    [showButtonBar]=\"true\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                    (ngModelChange)=\"search$.next()\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>To</label>\r\n                  <p-calendar\r\n                    dataType=\"date\"\r\n                    formControlName=\"created_before\"\r\n                    [showButtonBar]=\"true\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                    (ngModelChange)=\"search$.next()\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Product Structure Categories</label>\r\n              <pek-multi-product-structure-categories-picker\r\n                (choiceCategories)=\"onSelectRootCategories($event)\"></pek-multi-product-structure-categories-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Warehouse Category</label>\r\n              <pek-multi-product-categories-picker\r\n                (choiceCategories)=\"onSelectCategories($event)\"></pek-multi-product-categories-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3 d-flex\">\r\n            <div class=\"form-group form-group_checkbox\">\r\n              <label>Declined</label>\r\n              <p-triStateCheckbox\r\n                formControlName=\"contains_declined_payment\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-triStateCheckbox>\r\n            </div>\r\n            <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"page__table\">\r\n      <div [ngClass]=\"{'d-none': !isShowStatuses}\">\r\n        <pek-order-statuses-table\r\n          [orders]=\"orders\"\r\n          [isLoading]=\"isLoading\"\r\n          (changePage)=\"onChangePage($event)\"\r\n          (selectOrder)=\"onSelectionOrder($event)\"\r\n        ></pek-order-statuses-table>\r\n      </div>\r\n\r\n      <div [ngClass]=\"{'d-none': isShowStatuses}\">\r\n        <p-table\r\n          #dt\r\n          selectionMode=\"single\"\r\n          [scrollable]=\"true\"\r\n          dataKey=\"id\"\r\n          [paginator]=\"orders.length > 0\"\r\n          [rows]=\"10\"\r\n          [(first)]=\"firstPage\"\r\n          [value]=\"orders\"\r\n          [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n          [(selection)]=\"selectedOrder\"\r\n          (onPage)=\"onPage($event)\"\r\n          (selectionChange)=\"onSelectOrder()\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"text-center\" style=\"width: 3%;\">#</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Date</th>\r\n              <th class=\"text-center\" style=\"width: 7%;\">Order ID</th>\r\n              <th class=\"text-center\" style=\"width: 15%;\">Supplier</th>\r\n              <th class=\"text-center\" style=\"width: 15%;\">Supplier Nomenclature</th>\r\n              <th style=\"width: 15%;\">Comment</th>\r\n              <th style=\"width: 15%;\">Root Lists</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Status</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Completion</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"order\">\r\n              <td class=\"text-center\" style=\"width: 3%;\">{{i + 1}}</td>\r\n              <td class=\"text-center\" style=\"width: 10%;\">{{order.created | date:'dd/MM/yyyy'}}</td>\r\n              <td class=\"text-center\" style=\"width: 7%;\">{{order.id}}</td>\r\n              <td class=\"text-center\" style=\"width: 15%;\">{{order.supplier?.name}}</td>\r\n              <td class=\"text-center\" style=\"width: 15%;\">{{order.supplier?.supplier_nomenclature}}</td>\r\n              <td style=\"width: 15%;\">\r\n                <div class=\"word-break\">\r\n                  {{order.comment}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 15%;\">\r\n                <div class=\"word-break\"\r\n                     *ngFor=\"let item of getRootLists(order.root_production_list_products); let idx = index\">\r\n                  <a\r\n                    target=\"_blank\"\r\n                    [href]=\"productionPlanLinkBase + item.list.productionPlanId\">\r\n                  >\r\n                    {{item.list.nomenclature.code}}\r\n                    ~{{item.list.nomenclature.name}}({{item.count}})\r\n                  </a>\r\n                </div>\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 10%;\">{{order.status?.value}}</td>\r\n              <td class=\"text-center\" style=\"width: 10%;\">{{order?.activeStatusDate | date: 'dd/MM/yyyy'}}</td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"onShowAll(false)\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n        <div *ngIf=\"!dt.paginator && !isLoading && orders.length > 0\" class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"onShowAll(true)\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #actionButtons>\r\n  <div class=\"action-buttons\">\r\n    <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedOrder\"></p-menubar>\r\n    <button\r\n      class=\"ml-2\"\r\n      pButton\r\n      type=\"button\"\r\n      icon=\"pi pi-table\"\r\n      [label]=\"(isShowStatuses ? 'Close' : 'Open') +  ' Order Statuses'\"\r\n      (click)=\"onToggleStatuses()\"\r\n    ></button>\r\n  </div>\r\n</ng-template>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {NavigationLink} from '../../../layout/navigation-route';\r\n\r\n@Component({\r\n  selector: 'pek-procurement-layout',\r\n  templateUrl: './procurement-layout.component.html',\r\n  styleUrls: ['./procurement-layout.component.scss']\r\n})\r\nexport class ProcurementLayoutComponent implements OnInit {\r\n\r\n  routes: NavigationLink[] = [\r\n    {label: 'Procurement Chain Creation', commands: ['order-products']},\r\n    {label: 'Procurement Chains', commands: ['chains']},\r\n  ];\r\n\r\n  settingsRoutes: NavigationLink[] = [\r\n    {label: 'Auxiliary Invoices Types', commands: ['services']},\r\n    {label: 'Order Statuses', commands: ['statuses']},\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'Production Lists Procurement'\"\r\n  [routes]=\"routes\"\r\n  [settingsRoutes]=\"settingsRoutes\"\r\n></pek-header>\r\n<router-outlet></router-outlet>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {OrderService} from '../../services/order.service';\r\nimport {OrderPageComponent} from '@shared/components/order-page/order-page.component';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {MessageService} from 'primeng/api';\r\nimport {Order} from '../../models/order';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-procurement-order-page',\r\n  templateUrl: './procurement-order-page.component.html',\r\n  styleUrls: ['./procurement-order-page.component.scss']\r\n})\r\nexport class ProcurementOrderPageComponent implements OnInit {\r\n  @ViewChild('orderPage') orderPage: OrderPageComponent;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    can_select_supplier: [false]\r\n  });\r\n  orderId: number;\r\n  isOrderLoading = true;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private messageService: MessageService,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly orderService: OrderService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('can_select_supplier').disable();\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.orderId = +id),\r\n    ).subscribe();\r\n  }\r\n\r\n  openOrderFiles() {\r\n    this.orderService.filesModal$.next();\r\n  }\r\n\r\n  editOrder() {\r\n    this.orderService.editOrderModal$.next();\r\n  }\r\n\r\n  loaded(order: Order) {\r\n    console.log('this.order loaded()', order);\r\n    if (!order.can_select_supplier) {\r\n      this.form.get('can_select_supplier').enable();\r\n    } else {\r\n      this.form.get('can_select_supplier').setValue(true);\r\n      this.form.get('can_select_supplier').disable();\r\n    }\r\n    this.isOrderLoading = false;\r\n  }\r\n\r\n  tenderToggle($event: any) {\r\n    this.modalService.confirm('danger', 'confirm').subscribe(confirm => {\r\n      if (confirm) {\r\n        const isBlocked = this.orderPage.checkIfIsBlockedToTenderTransform();\r\n        if (isBlocked) {\r\n          this.messageService.add({severity: 'error', summary: `Existing Invoice or Proforma Invoices`,\r\n            detail: `Can't turn to tender with existing Invoice or Proforma Invoices!\\n Remove before turning to tender`});\r\n          this.form.get('can_select_supplier').setValue(false);\r\n        } else {\r\n\r\n          this.orderService.activateTenderSuppliers(this.orderId).subscribe(() => {\r\n            this.orderPage.clearSupplierRelatedFields();\r\n            this.form.get('can_select_supplier').setValue(true);\r\n            this.form.get('can_select_supplier').disable();\r\n          });\r\n        }\r\n      } else {\r\n        this.form.get('can_select_supplier').setValue(false);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"procurement-order-page\">\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <div class=\"page__title\">\r\n        <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>Order {{orderId}}</h1>\r\n      </div>\r\n      <div class=\"page__tools\">\r\n        <form class=\"align-items-center d-flex\" [formGroup]=\"form\">\r\n          <p-checkbox\r\n            inputId=\"binary\"\r\n            formControlName=\"can_select_supplier\"\r\n            [binary]=\"true\"\r\n            (onChange)=\"tenderToggle($event)\"\r\n          >\r\n          </p-checkbox>\r\n          <label class=\"capitalize ml-2 mr-3\">enable tender supplier required</label>\r\n        </form>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-file\"\r\n          label=\"Order Files\"\r\n          class=\"mr-2\"\r\n          (click)=\"openOrderFiles()\"\r\n          [disabled]=\"isOrderLoading\"\r\n        >\r\n        </button>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-pencil\"\r\n          label=\"Lead Date & Status\"\r\n          (click)=\"editOrder()\"\r\n          [disabled]=\"isOrderLoading\"\r\n        >\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <pek-order-page\r\n      #orderPage\r\n      [orderType]=\"'procurement'\"\r\n      (loaded)=\"loaded($event)\"\r\n      [orderId]=\"orderId\"\r\n    ></pek-order-page>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-procurement-order-statuses',\r\n  templateUrl: './procurement-order-statuses.component.html',\r\n  styleUrls: ['./procurement-order-statuses.component.scss']\r\n})\r\nexport class ProcurementOrderStatusesComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"procurement-order-statuses\">\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <div class=\"page__title\">\r\n        <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>Order Statuses</h1>\r\n      </div>\r\n      <div class=\"page__tools\">\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <h2 class=\"mb-4\">Manual Statuses</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <pek-order-statuses [statusType]=\"4\"></pek-order-statuses>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Automatic Statuses</h2>\r\n\r\n    <div class=\"page__card\">\r\n      <pek-order-statuses [statusType]=\"4\" [isAutoStatus]=\"true\"></pek-order-statuses>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Inject, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {BehaviorSubject, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, finalize, map, tap} from 'rxjs/operators';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {ProductStructureCategory} from '../../../product-structure/models/product-structure-category';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {OrderProductService} from '../../services/order-product.service';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-add-order-product-to-order',\r\n  templateUrl: './add-order-product-to-order.component.html',\r\n  styleUrls: ['./add-order-product-to-order.component.scss']\r\n})\r\nexport class AddOrderProductToOrderComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  isSaving = false;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [''],\r\n    code: [''],\r\n    root_categories: [null],\r\n    category: [null],\r\n  });\r\n\r\n  createForm: FormGroup = this.fb.group({\r\n    quantity: [0, [Validators.required, Validators.min(1)]],\r\n    order: [this.data.orderId],\r\n    nomenclature: [null, Validators.required],\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProduct: Nomenclature;\r\n\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  products$: Observable<Nomenclature[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.nomenclatureService.getForPagination(this.query)),\r\n    tap(response => this.productsCount = response.count),\r\n    map(response => response.results),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly orderProductService: OrderProductService,\r\n    private dialogRef: MatDialogRef<AddOrderProductToOrderComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { isPurchased: boolean, orderId: number }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProduct = null;\r\n\r\n    this.createForm.get('quantity').patchValue(null);\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'paginated', value: true},\r\n      {name: 'page', value: this.currentPage},\r\n      {name: 'type', value: 0}\r\n    ];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value) {\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onAddProduct() {\r\n    if (this.createForm.value) {\r\n      this.isSaving = true;\r\n\r\n      if (this.data.isPurchased) {\r\n        this.createForm.addControl('is_purchased_only', this.fb.control(true));\r\n      }\r\n\r\n      this.orderProductService.create(this.createForm.value).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(product => this.dialogRef.close(product));\r\n    }\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    this.searchForm.get('category').patchValue(category?.name || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectRootCategory(category: ProductStructureCategory) {\r\n    this.searchForm.get('root_categories').patchValue(category?.id || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  clearCreatForm() {\r\n    this.createForm.get('quantity').patchValue(0);\r\n  }\r\n\r\n  onSelectProduct() {\r\n    this.createForm.get('nomenclature').patchValue(this.selectedProduct?.id || null);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    <ng-container *ngIf=\"!data.isPurchased\">\r\n      Add a New Item To Order\r\n    </ng-container>\r\n    <ng-container *ngIf=\"data.isPurchased\">\r\n      Add a New Item To Request\r\n    </ng-container>\r\n  </h2>\r\n\r\n  <p *ngIf=\"data.isPurchased\">\r\n    Please Search the Item from catalogue and select items for request\r\n  </p>\r\n</div>\r\n\r\n<div class=\"add-order-product-to-order__row\">\r\n  <div class=\"add-order-product-to-order__column-left\">\r\n    <pek-categories-tree-picker (categorySelected)=\"onSelectCategory($event)\"></pek-categories-tree-picker>\r\n  </div>\r\n  <div class=\"add-order-product-to-order__column-right\">\r\n    <form [formGroup]=\"searchForm\">\r\n      <div class=\"row\">\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Root Category</label>\r\n            <pek-product-structure-category-picker\r\n              (choiceCategory)=\"onSelectRootCategory($event)\"\r\n            ></pek-product-structure-category-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Name</label>\r\n            <input\r\n              pInputText\r\n              formControlName=\"name\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              id=\"name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label for=\"code\">Code</label>\r\n            <input\r\n              pInputText\r\n              formControlName=\"code\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              id=\"code\"\r\n              (ngModelChange)=\"code$.next()\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"table-pagination-preloader\">\r\n      <mat-dialog-content>\r\n        <p-table\r\n          #dt\r\n          selectionMode=\"single\"\r\n          dataKey=\"id\"\r\n          rowExpandMode=\"single\"\r\n          [rows]=\"10\"\r\n          [value]=\"products$ | async\"\r\n          [(selection)]=\"selectedProduct\"\r\n          (selectionChange)=\"onSelectProduct()\"\r\n          (onRowExpand)=\"clearCreatForm()\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n              <th style=\"width: 25%\">Code</th>\r\n              <th style=\"width: 25%\">Name</th>\r\n              <th style=\"width: 30%\">Description</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">UOM</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n            <tr\r\n              [pSelectableRow]=\"product\"\r\n              [pRowToggler]=\"product\"\r\n              [pSelectableRowDisabled]=\"product.approved === '0' && product.type === '0'\"\r\n              [pRowTogglerDisabled]=\"product.approved === '0' && product.type === '0'\"\r\n            >\r\n              <td style=\"width: 5%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n              <td style=\"width: 25%\">\r\n                {{ product.code }}\r\n              </td>\r\n              <td style=\"width: 25%\">\r\n                  <span\r\n                    *ngIf=\"product.approved === '0' && product.type === '0'\"\r\n                    class=\"badge badge_warning\"\r\n                    style=\"margin-right: 0.25rem\"\r\n                  >\r\n                    NEW\r\n                  </span>\r\n                {{ product.name }}\r\n              </td>\r\n              <td class=\"word-break\" style=\"width: 30%\">{{product.description}}</td>\r\n              <td class=\"text-center\" style=\"width: 15%\">\r\n                {{product.category?.unit_of_measure?.symbol ? product.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"rowexpansion\" let-product>\r\n            <tr>\r\n              <td colspan=\"5\">\r\n                <form [formGroup]=\"createForm\">\r\n                  <div class=\"form-group\">\r\n                    <label>Quantity*</label>\r\n                    <input\r\n                      pInputText\r\n                      formControlName=\"quantity\"\r\n                      min=\"1\"\r\n                      class=\"form-control\"\r\n                      type=\"number\"\r\n                    >\r\n                  </div>\r\n                </form>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </mat-dialog-content>\r\n      <div\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"productsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Add\"\r\n    [disabled]=\"createForm.invalid\"\r\n    [loading]=\"isSaving\"\r\n    (click)=\"onAddProduct()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {BaseService} from '../../models/base-service';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {BaseServicesService} from '../../services/base-services.service';\r\nimport {TreeService} from '@shared/services/tree.service';\r\nimport {finalize} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-auxiliary-invoice-type',\r\n  templateUrl: './create-edit-auxiliary-invoice-type.component.html',\r\n  styleUrls: ['./create-edit-auxiliary-invoice-type.component.scss']\r\n})\r\nexport class CreateEditAuxiliaryInvoiceTypeComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  isLoading = true;\r\n  services: BaseService[] = [];\r\n  selectedNode: TreeNode<BaseService>;\r\n  servicesTree: TreeNode<BaseService>[] = [];\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    comment: [''],\r\n    parent: [null],\r\n    is_for_root: [true]\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly baseServicesService: BaseServicesService,\r\n    private readonly treeService: TreeService,\r\n    private dialogRef: MatDialogRef<CreateEditAuxiliaryInvoiceTypeComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, service: BaseService }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getServices();\r\n\r\n    if (this.data.type === 'edit') {\r\n      this.form.patchValue(this.data.service);\r\n\r\n      if (this.data.service.parent) {\r\n        this.form.get('is_for_root').patchValue(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  findNode() {\r\n    const find = (nodes: TreeNode<BaseService>[]) => {\r\n      const foundNode = nodes.find(n => n.data.id === this.data.service.id);\r\n\r\n      if (foundNode) {\r\n        this.selectedNode = foundNode;\r\n        return;\r\n      } else {\r\n        nodes.forEach(node => {\r\n          node.expanded = true;\r\n          if (node.children.length > 0) {\r\n            find(node.children);\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    find(this.servicesTree);\r\n  }\r\n\r\n  getServices() {\r\n    this.baseServicesService.get().subscribe(services => {\r\n      this.services = services;\r\n      this.createTree();\r\n\r\n      if (this.data.type === 'edit') {\r\n        this.findNode();\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.servicesTree) {\r\n      this.treeService.mapExpansion(this.servicesTree, {});\r\n    }\r\n\r\n    this.servicesTree = this.treeService.createTree(this.services, {});\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createService();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editService();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  onChange() {\r\n    this.selectedNode = null;\r\n    this.form.get('parent').patchValue(null);\r\n  }\r\n\r\n  editService() {\r\n    this.baseServicesService.update(this.form.value, this.data.service.id).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(service => this.dialogRef.close(service));\r\n  }\r\n\r\n  createService() {\r\n    const send = this.form.value;\r\n\r\n    this.baseServicesService.create(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(service => this.dialogRef.close(service));\r\n  }\r\n\r\n  onSelection() {\r\n    this.form.get('parent').patchValue(this.selectedNode?.data?.id || null);\r\n  }\r\n}\r\n","<div class=\"create-edit-product-structure-category\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      {{data.type}} Auxiliary Invoice Type\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content>\r\n    <form [formGroup]=\"form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name*</label>\r\n        <input\r\n          pInputText\r\n          formControlName=\"name\"\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"name\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"comment\">Comment</label>\r\n        <textarea\r\n          id=\"comment\"\r\n          [rows]=\"2\"\r\n          pInputTextarea\r\n          [autoResize]=\"true\"\r\n          formControlName=\"comment\"\r\n        ></textarea>\r\n      </div>\r\n\r\n      <div class=\"form-group box\">\r\n        <p-checkbox\r\n          inputId=\"root\"\r\n          formControlName=\"is_for_root\"\r\n          (onChange)=\"onChange()\"\r\n          [binary]=\"true\"\r\n        ></p-checkbox>\r\n        <label class=\"ml-2 mb-0\" for=\"root\">Is For Root</label>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"table mt-2\" *ngIf=\"!form.get('is_for_root')?.value\">\r\n      <p-treeTable\r\n        [value]=\"servicesTree\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selectedNode\"\r\n        [scrollable]=\"true\"\r\n        (selectionChange)=\"onSelection()\"\r\n        scrollHeight=\"calc(100vh - 40.625rem)\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 50%; padding-left: 48px\">Name</th>\r\n            <th style=\"width: 50%\">Comment</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n          <tr\r\n            [ttRow]=\"rowNode\"\r\n            [ttSelectableRow]=\"rowNode\"\r\n          >\r\n            <td style=\"width: 50%\">\r\n              <div class=\"table-toggle\">\r\n                <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                <span>{{rowData.name}}</span>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 50%\">\r\n              {{rowData.comment}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-treeTable>\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      [label]=\"data.type\"\r\n      [loading]=\"isSaving\"\r\n      [disabled]=\"form.invalid || (!this.form.get('is_for_root').value) && !selectedNode\"\r\n      (click)=\"onSave()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {OrderProductService} from '../../services/order-product.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {OrderProduct} from '../../models/order-product';\r\nimport {finalize} from 'rxjs/operators';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {forkJoin, Observable} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-edit-order-product-delivery-date',\r\n  templateUrl: './edit-order-product-delivery-date.component.html',\r\n  styleUrls: ['./edit-order-product-delivery-date.component.scss']\r\n})\r\nexport class EditOrderProductDeliveryDateComponent implements OnInit {\r\n  isSaving = false;\r\n  isReset = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    id: [null, Validators.required],\r\n    reception_date: [null, Validators.required],\r\n  });\r\n\r\n  constructor(\r\n    private readonly orderProductService: OrderProductService,\r\n    private dialogRef: MatDialogRef<EditOrderProductDeliveryDateComponent>,\r\n    private readonly modalService: ModalService,\r\n    private readonly fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public orderProduct: OrderProduct\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('id').patchValue(this.orderProduct.id);\r\n\r\n    if (this.orderProduct.reception_date) {\r\n      this.form.get('reception_date').patchValue(new Date(this.orderProduct.reception_date));\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n    this.save();\r\n  }\r\n\r\n  onReset() {\r\n    this.modalService.confirm('danger', 'Reset').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isReset = true;\r\n        this.form.get('reception_date').patchValue(null);\r\n        this.save();\r\n      }\r\n    });\r\n  }\r\n\r\n  save() {\r\n    let productsToUpdateCalls: Observable<OrderProduct>[] = [];\r\n    this.orderProduct.equal_order_products.forEach(product => {\r\n      const dataToSend = {\r\n        id: product.id,\r\n        reception_date: this.form.get('reception_date').value\r\n      };\r\n      productsToUpdateCalls.push(\r\n        this.orderProductService.updatePartly(dataToSend as OrderProduct)\r\n      );\r\n    });\r\n    forkJoin([...productsToUpdateCalls]).pipe(\r\n      finalize(() => {\r\n        this.isSaving = false;\r\n        this.isReset = false;\r\n      })\r\n    ).subscribe(orderProduct => {\r\n      this.dialogRef.close(orderProduct[0]);\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Edit Delivery Date for {{orderProduct.nomenclature.name}}\r\n  </h2>\r\n  <button\r\n    [disabled]=\"!orderProduct.reception_date\"\r\n    icon=\"pi pi-times\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Reset\"\r\n    [loading]=\"isReset\"\r\n    (click)=\"onReset()\"\r\n    class=\"ml-3 p-button-danger p-button-icon\"\r\n  ></button>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Delivery Date*</label>\r\n      <p-calendar\r\n        formControlName=\"reception_date\"\r\n        [showButtonBar]=\"true\"\r\n        dateFormat=\"dd/mm/yy\"\r\n        [readonlyInput]=\"true\"\r\n      >\r\n      </p-calendar>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Change\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {OrderProductService} from '../../services/order-product.service';\r\nimport {OrderProduct} from '../../models/order-product';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {finalize} from 'rxjs/operators';\r\nimport {forkJoin, Observable} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-edit-order-product-quantity',\r\n  templateUrl: './edit-order-product-quantity.component.html',\r\n  styleUrls: ['./edit-order-product-quantity.component.scss']\r\n})\r\nexport class EditOrderProductQuantityComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    id: [null, Validators.required],\r\n    totalQuantity: [null, [Validators.required, Validators.min(0)]],\r\n    request_date: [null, Validators.required],\r\n  });\r\n  initialQuantity: number;\r\n  proformaInvoiceQuantity: number;\r\n  invoiceQuantity: number;\r\n\r\n  constructor(\r\n    private readonly orderProductService: OrderProductService,\r\n    private dialogRef: MatDialogRef<EditOrderProductQuantityComponent>,\r\n    private readonly fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public orderProduct: OrderProduct\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.patchValue(this.orderProduct);\r\n    this.initialQuantity = this.orderProduct.totalQuantity;\r\n    this.proformaInvoiceQuantity = this.orderProduct.equal_order_products.reduce((sum, p) => sum + p.proforma_invoice_quantity, 0);\r\n    this.invoiceQuantity = this.orderProduct.equal_order_products.reduce((sum, p) => sum + p.invoice_quantity, 0);\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n    if (this.initialQuantity === this.form.get('totalQuantity').value) {\r\n      this.dialogRef.close(this.orderProduct);\r\n      return;\r\n    }\r\n\r\n    const isSubtract = this.initialQuantity > this.form.get('totalQuantity').value;\r\n    let quantity = 0;\r\n    if (isSubtract) {\r\n      quantity = this.initialQuantity - this.form.get('totalQuantity').value;\r\n    } else {\r\n      quantity = this.form.get('totalQuantity').value - this.initialQuantity;\r\n    }\r\n    let productsToUpdateCalls: Observable<OrderProduct>[] = [];\r\n\r\n    this.orderProduct.equal_order_products.sort((a, b) => new Date(b.request_date).getTime() - new Date(a.request_date).getTime()).forEach(product => {\r\n      if (quantity > 0) {\r\n        let dataToSend = {\r\n          id: product.id,\r\n          quantity: 0,\r\n          order: product.order,\r\n          reception_date: this.form.get('request_date').value\r\n        };\r\n        if (isSubtract) {\r\n          const canSubtractInvoice = product.quantity - product.invoice_quantity;\r\n          const canSubtractProformaInvoice = product.quantity - product.proforma_invoice_quantity;\r\n          let canSubtractQuantity;\r\n          if (canSubtractProformaInvoice > canSubtractInvoice) {\r\n            canSubtractQuantity = canSubtractProformaInvoice;\r\n          } else {\r\n            canSubtractQuantity = canSubtractInvoice;\r\n          }\r\n          if (canSubtractQuantity >= quantity) {\r\n            product.quantity -= quantity;\r\n            quantity = 0;\r\n            dataToSend.quantity = product.quantity;\r\n          } else {\r\n            quantity -= canSubtractQuantity;\r\n            product.quantity = 0;\r\n            dataToSend.quantity = product.quantity;\r\n          }\r\n        } else {\r\n          product.quantity += quantity;\r\n          quantity = 0;\r\n          dataToSend.quantity = product.quantity;\r\n        }\r\n        if (dataToSend.quantity === 0) {\r\n          dataToSend.order = null;\r\n          dataToSend.quantity = product.initial_quantity;\r\n        }\r\n        productsToUpdateCalls.push(\r\n          this.orderProductService.updatePartly(dataToSend as OrderProduct)\r\n        );\r\n      }\r\n    });\r\n\r\n    forkJoin([...productsToUpdateCalls]).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(orderProduct => {\r\n      orderProduct[0].totalQuantity = this.form.get('totalQuantity').value\r\n      this.dialogRef.close(orderProduct[0]);\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Change Order Item Quantity\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"totalQuantity\">Quantity*</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"totalQuantity\"\r\n        [min]=\"0\"\r\n        class=\"form-control\"\r\n        type=\"number\"\r\n        id=\"totalQuantity\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"text-danger mt-3 capitalize\" *ngIf=\"form.get('totalQuantity').value < proformaInvoiceQuantity || form.get('totalQuantity').value < invoiceQuantity\">\r\n      Quantity can't be Lower than sent to invoice\\proforma invoice:\r\n      {{proformaInvoiceQuantity > invoiceQuantity ? proformaInvoiceQuantity : invoiceQuantity}}\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Change\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid || form.get('totalQuantity').value < proformaInvoiceQuantity || form.get('totalQuantity').value < invoiceQuantity\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {PaymentFile} from '../../../payments/models/payment';\r\nimport {environment} from '@env/environment';\r\nimport {Invoice, InvoiceFile} from '../../models/invoice';\r\nimport {InvoiceService} from '../../services/invoice.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-invoice-files',\r\n  templateUrl: './invoice-files.component.html',\r\n  styleUrls: ['./invoice-files.component.scss']\r\n})\r\nexport class InvoiceFilesComponent implements OnInit {\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  invoiceId: number;\r\n\r\n  uploadFiles: File[] = [];\r\n  files: InvoiceFile[] = [];\r\n  isLoading = true;\r\n  isPending = false;\r\n  link = environment.image_path;\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<InvoiceFilesComponent>,\r\n    private readonly invoiceService: InvoiceService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly modalService: ModalService,\r\n    @Inject(MAT_DIALOG_DATA) private invoice: Invoice,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.invoiceId = this.invoice.id;\r\n    this.getFiles();\r\n  }\r\n\r\n  getFiles() {\r\n    this.invoiceService.getFiles(this.invoiceId).subscribe(files => {\r\n      this.files = files;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  fileAdded(file: File) {\r\n    this.uploadFiles.push(file);\r\n  }\r\n\r\n  getFileName(file: string) {\r\n    let name = file.split('/');\r\n    return name[name.length - 1];\r\n  }\r\n\r\n  onDownloadFile(file: PaymentFile) {\r\n    this.addition.add(file.id);\r\n    this.invoiceService.downloadFile(file.id).subscribe(response => {\r\n      const filename = this.getFileName(file.file);\r\n      this.adapterService.downloadFile(filename, response);\r\n      this.addition.clear();\r\n    });\r\n  }\r\n\r\n  onSelectFiles(files: File[]) {\r\n    this.uploadFiles = files;\r\n  }\r\n\r\n  onUploadFiles() {\r\n    this.isPending = true;\r\n    this.invoiceService.severalUploadFiles(this.invoiceId, this.uploadFiles)\r\n      .pipe(\r\n        finalize(() => this.isPending = false)\r\n      )\r\n      .subscribe(files => this.dialogRef.close(files));\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.deletion.add(id);\r\n\r\n        this.invoiceService.removeFile(id).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id);\r\n          this.files.splice(index, 1);\r\n          this.deletion.clear();\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div pekPasteScreenImage (imageAdded)=\"fileAdded($event)\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      Invoice Files\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content >\r\n    <pek-upload-file\r\n      [uploadFiles]=\"uploadFiles\"\r\n      [multiple]=\"true\"\r\n      (selectFile)=\"onSelectFiles($event)\"\r\n    ></pek-upload-file>\r\n\r\n    <div class=\"product-files\">\r\n      <h3 class=\"product-files__caption\">Uploaded Files</h3>\r\n      <p-table\r\n        selectionMode=\"single\"\r\n        [value]=\"files\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 75%\">Name</th>\r\n            <th style=\"width: 20%\">Download</th>\r\n          </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"body\" let-file let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 75%\" class=\"word-break\">\r\n              <a [href]=\"link + file.file\">\r\n                {{getFileName(file.file)}}\r\n              </a>\r\n            </td>\r\n            <td style=\"width: 20%\">\r\n              <div class=\"d-flex\">\r\n                <button\r\n                  pButton\r\n                  (click)=\"onDownloadFile(file)\"\r\n                  [loading]=\"addition.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                  icon=\"pi pi-download\"\r\n                ></button>\r\n                <button\r\n                  pButton\r\n                  (click)=\"onRemoveFile(file.id)\"\r\n                  [loading]=\"deletion.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                  icon=\"pi pi-trash\"\r\n                ></button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-2\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Upload\"\r\n      [loading]=\"isPending\"\r\n      [disabled]=\"uploadFiles.length === 0\"\r\n      (click)=\"onUploadFiles()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {Invoice, InvoiceFile} from '../../models/invoice';\r\nimport {environment} from '@env/environment';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {InvoiceService} from '../../services/invoice.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {PaymentFile} from '../../../payments/models/payment';\r\nimport {finalize} from 'rxjs';\r\nimport {ServiceInvoiceService} from '@shared/services/service-invoice.service';\r\n\r\n@Component({\r\n  selector: 'pek-service-invoice-files',\r\n  templateUrl: './service-invoice-files.component.html',\r\n  styleUrls: ['./service-invoice-files.component.scss']\r\n})\r\nexport class ServiceInvoiceFilesComponent implements OnInit {\r\n\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  invoiceId: number;\r\n\r\n  uploadFiles: File[] = [];\r\n  files: InvoiceFile[] = [];\r\n  isLoading = true;\r\n  isPending = false;\r\n  link = environment.image_path;\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<ServiceInvoiceFilesComponent>,\r\n    private readonly serviceInvoiceService: ServiceInvoiceService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly modalService: ModalService,\r\n    @Inject(MAT_DIALOG_DATA) private invoice: Invoice,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.invoice);\r\n    this.invoiceId = this.invoice.id;\r\n    this.getFiles();\r\n  }\r\n\r\n  getFiles() {\r\n    this.serviceInvoiceService.getFiles(this.invoiceId).subscribe(files => {\r\n      this.files = files;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  fileAdded(file: File) {\r\n    this.uploadFiles.push(file);\r\n  }\r\n\r\n  getFileName(file: string) {\r\n    let name = file.split('/');\r\n    return name[name.length - 1];\r\n  }\r\n\r\n  onDownloadFile(file: PaymentFile) {\r\n    console.log(file);\r\n    this.addition.add(file.id);\r\n    this.serviceInvoiceService.downloadFile(file.id).subscribe(response => {\r\n      const filename = this.getFileName(file.file);\r\n      this.adapterService.downloadFile(filename, response);\r\n      this.addition.clear();\r\n    });\r\n  }\r\n\r\n  onSelectFiles(files: File[]) {\r\n    this.uploadFiles = files;\r\n  }\r\n\r\n  onUploadFiles() {\r\n    this.isPending = true;\r\n    this.serviceInvoiceService.severalUploadFiles(this.invoiceId, this.uploadFiles)\r\n      .pipe(\r\n        finalize(() => this.isPending = false)\r\n      )\r\n      .subscribe(files => this.dialogRef.close(files));\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.deletion.add(id);\r\n\r\n        this.serviceInvoiceService.removeFile(id).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id);\r\n          this.files.splice(index, 1);\r\n          this.deletion.clear();\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div pekPasteScreenImage (imageAdded)=\"fileAdded($event)\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      Auxiliary Invoice Files\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content >\r\n    <pek-upload-file\r\n      [uploadFiles]=\"uploadFiles\"\r\n      [multiple]=\"true\"\r\n      (selectFile)=\"onSelectFiles($event)\"\r\n    ></pek-upload-file>\r\n\r\n    <div class=\"product-files\">\r\n      <h3 class=\"product-files__caption\">Uploaded Files</h3>\r\n      <p-table\r\n        selectionMode=\"single\"\r\n        [value]=\"files\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 75%\">Name</th>\r\n            <th style=\"width: 20%\">Download</th>\r\n          </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"body\" let-file let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 75%\" class=\"word-break\">\r\n              <a [href]=\"link + file.file\">\r\n                {{getFileName(file.file)}}\r\n              </a>\r\n            </td>\r\n            <td style=\"width: 20%\">\r\n              <div class=\"d-flex\">\r\n                <button\r\n                  pButton\r\n                  (click)=\"onDownloadFile(file)\"\r\n                  [loading]=\"addition.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                  icon=\"pi pi-download\"\r\n                ></button>\r\n                <button\r\n                  pButton\r\n                  (click)=\"onRemoveFile(file.id)\"\r\n                  [loading]=\"deletion.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                  icon=\"pi pi-trash\"\r\n                ></button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-2\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Upload\"\r\n      [loading]=\"isPending\"\r\n      [disabled]=\"uploadFiles.length === 0\"\r\n      (click)=\"onUploadFiles()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n\r\n</div>\r\n","import {Order} from './order';\r\nimport {Company} from \"../../crm/models/company\";\r\n\r\nexport class Invoice {\r\n  readonly id: number;\r\n  self_serial_number?: string;\r\n  self_proforma_serial_number?: string;\r\n  supplier_serial_number: string;\r\n  supplier?: Company;\r\n  total_price: number;\r\n  ddv: number;\r\n  tax: number;\r\n  completed: boolean;\r\n  qc_completed: boolean;\r\n  order?: Order;\r\n  related_files: boolean;\r\n  invoice?: Invoice;\r\n  // currency: Currency;\r\n  invoice_date: Date;\r\n  items_reception_date: Date;\r\n  items_reception_date_to: Date;\r\n  invoice_reception_date: Date;\r\n  invoice_reception_date_to: Date;\r\n  due_date: Date;\r\n  is_proforma: boolean;\r\n  proformas: Invoice[] | null;\r\n  total_price_converted: number;\r\n  pure_total_price?: number;\r\n  pure_total_price_converted?: number;\r\n  label?;\r\n  payment_status: string;\r\n  supplierId?: number;\r\n  paid_interest?: number;\r\n  supplier_total_price?: number;\r\n  to_invoices?: any;\r\n  otherCurrency?: number;\r\n  isAux?: boolean;\r\n  isPayment?: boolean;\r\n  isCompleted?: boolean;\r\n  purchase_category?: any;\r\n\r\n  creationDateFrom?: Date;\r\n  creationDateTo?: Date;\r\n\r\n  invoiceReceptionFrom?: Date;\r\n  invoiceReceptionTo?: Date;\r\n\r\n  itemsReceptionFrom?: Date;\r\n  itemsReceptionTo?: Date;\r\n  relatedStatus?: boolean;\r\n\r\n  supplierCategories: string[];\r\n  root_production_plans?: any[];\r\n  unique_root_production_plans?: any[];\r\n\r\n  system_creation_date?: Date;\r\n  system_creation_date_to: Date;\r\n  related_status?;\r\n  general_invoices?: any[];\r\n\r\n}\r\n\r\nexport class SerialNumber {\r\n  id: number;\r\n  type_with_number: string;\r\n  is_passed: boolean;\r\n  traversed?: boolean;\r\n  warehouseproductqcprotocol_set?: any;\r\n}\r\n\r\nexport class InvoiceFile {\r\n  readonly id: number;\r\n  file: string;\r\n  invoice_id: number;\r\n}\r\n","import {Nomenclature} from '@shared/models/nomenclature';\r\nimport {Locator} from '../../warehouse/models/locator';\r\nimport {ListProduct} from '../../warehouse/models/list-product';\r\nimport {Technology} from '../../product-structure/models/technology';\r\nimport {GroupedRequest} from '../../warehouse/models/grouped-request';\r\nimport {User} from '@shared/models/user';\r\n\r\nexport enum OrderRequestType {\r\n  MANUALLY = \"0\",\r\n  AUTOMATICALLY = \"1\"\r\n}\r\n\r\nexport class OrderProduct {\r\n  readonly id: number;\r\n  ids?: number[];\r\n  current_technology: any;\r\n  nomenclature: Nomenclature;\r\n  order: string;\r\n  accepted_quantity: number;\r\n  initial_quantity: number;\r\n  quantity: number;\r\n  totalQuantity?: number;\r\n  ordered_quantity: number;\r\n  passed_quantity?: number;\r\n  not_passed_quantity?: number;\r\n  request_type: string;\r\n  first_root_plan_name?: string;\r\n  first_product_list_name?: string;\r\n  status: 0 | 1 | 2 | string;\r\n  request_date?;\r\n  request_id?;\r\n  technologies?;\r\n  details?: OrderDetail;\r\n  root_lists?;\r\n  root_production_list_products?: any[];\r\n  equal_order_products?: OrderProduct[];\r\n  exists_on_locators?: Locator[];\r\n  production_list_products?: any[];\r\n  is_technology_ready?: boolean;\r\n  not_ordered_product_id?: number;\r\n  free_quantity_without_final_status?: number;\r\n  quality_control?: any;\r\n  // details?: OrderDetail;\r\n  isReady?: boolean;\r\n  products: OrderProduct[];\r\n  reception_date?: string;\r\n  isSelected?: boolean;\r\n  checkedForGeneration?: boolean;\r\n  serial_numbers?: { id: number, type_with_number: string, is_passed: boolean }[];\r\n  creator?: User;\r\n  is_subtracted_from_free_quantity?: boolean;\r\n  invoice_quantity?: number;\r\n  proforma_invoice_quantity?: number;\r\n  orderProducts?: OrderProduct[];\r\n  totalQuantityPassed?: number;\r\n  totalQuantityNotPassed?: number;\r\n  totalSerialNumbers: any[];\r\n}\r\n\r\nexport class OrderProductGroupedForPrint  extends OrderProduct {\r\n  // orderProduct?: OrderProduct;\r\n  // listProduct?: ListProduct;\r\n  children?: GroupedRequest[];\r\n}\r\n\r\nexport class OrderMaterial {\r\n  readonly id: number;\r\n  name: string;\r\n  code: string;\r\n  technology?: string;\r\n  required_quantity: number;\r\n  material_nomenclature?: Nomenclature;\r\n  order_product_nomenclature?: Nomenclature;\r\n  list_product: ListProduct;\r\n  allIds?: number[];\r\n  totalInitialQuantity?: number;\r\n  totalRequiredQuantity?: number;\r\n  initial_quantity?: number;\r\n}\r\n\r\nexport class OrderDetail {\r\n  current_technology: Technology;\r\n  task_employees: [];\r\n  task_materials: OrderMaterial[];\r\n  task_machines: OrderMachine[];\r\n}\r\n\r\nexport class OrderProducts {\r\n  prev: string;\r\n  next: string;\r\n  count: number;\r\n  results: OrderProduct[];\r\n}\r\n\r\nexport class OrderMachine {\r\n  readonly id: number;\r\n  machine: any;\r\n  duration: any\r\n}\r\n\r\n","import {Company} from '../../crm/models/company';\r\nimport {PurchaseCategory} from '../../purchasing/models/purchase-category';\r\nimport {Task} from '@shared/models/task';\r\nimport {Technology} from '../../product-structure/models/technology';\r\n\r\nexport class Order {\r\n  readonly id: number;\r\n  request: string;\r\n  supplier: Company;\r\n  created?: any;\r\n  updated?: string;\r\n  deadline?: Date;\r\n  promised_date: string;\r\n  comment: string;\r\n  statuses: Array<any>;\r\n  dates: any;\r\n  type;\r\n  accointing_type;\r\n  status?;\r\n  order_products?: any[];\r\n  root_lists?: any[];\r\n  root_production_list_products?: any[];\r\n  root_search_lists?;\r\n  created_to?;\r\n  completed?: boolean;\r\n  qc_completed?: boolean;\r\n  searchFieldList?: any;\r\n  searchFiledStatus?: any;\r\n  quality_control: boolean;\r\n  is_closed?: boolean;\r\n  is_prepared?: boolean;\r\n  purchase_category?: PurchaseCategory;\r\n  companyId?: number;\r\n  statusesIds?: number[];\r\n  dateFrom?: Date;\r\n  dateTo?: Date;\r\n  order?: Order;\r\n  rootLists?: [];\r\n  list_ids?: number[];\r\n  orderStatuses?: any;\r\n  root_production_plans?: any[];\r\n  unique_root_production_plans?: any[];\r\n  root_production_plans_display?: {root_list: Task, list: Task[]}[];\r\n  activeStatusDate?: any;\r\n  // root_production_list_products?: ListProduct[];\r\n  can_select_supplier?: boolean;\r\n  is_hand_added?: boolean;\r\n  accounting_type?: number;\r\n  ordered_products_unique_technologies?: Technology[]\r\n  qc_wh_started_date?: Date;\r\n  qc_closed_date?: Date;\r\n  qc_started_date?: Date;\r\n  qc_wh_closed_date?: Date;\r\n  freeNomenclatureQuantityAtChain?: number;\r\n  sent_to_qc_quantity?: number;\r\n  isReceiptDateOverdue?: boolean;\r\n}\r\n\r\nexport class Orders {\r\n  prev: string;\r\n  next: string;\r\n  count: number;\r\n  results: Order[];\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ProcurementRouting } from './procurement.routing';\r\nimport { ProcurementChainsComponent } from './components/procurement-chains/procurement-chains.component';\r\nimport { ProcurementLayoutComponent } from './components/procurement-layout/procurement-layout.component';\r\nimport {LayoutModule} from '../layout/layout.module';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport {WarehouseModule} from '../warehouse/warehouse.module';\r\nimport { ProcurementOrderPageComponent } from './components/procurement-order-page/procurement-order-page.component';\r\nimport { EditOrderProductQuantityComponent } from './modals/edit-order-product-quantity/edit-order-product-quantity.component';\r\nimport { EditOrderProductDeliveryDateComponent } from './modals/edit-order-product-delivery-date/edit-order-product-delivery-date.component';\r\nimport { AddOrderProductToOrderComponent } from './modals/add-order-product-to-order/add-order-product-to-order.component';\r\nimport { InvoiceFilesComponent } from './modals/invoice-files/invoice-files.component';\r\nimport { ServiceInvoiceFilesComponent } from './modals/service-invoice-files/service-invoice-files.component';\r\nimport { AuxiliaryInvoicesTypesListComponent } from './components/auxiliary-invoices-types-list/auxiliary-invoices-types-list.component';\r\nimport { CreateEditAuxiliaryInvoiceTypeComponent } from './modals/create-edit-auxiliary-invoice-type/create-edit-auxiliary-invoice-type.component';\r\nimport { ProcurementOrderStatusesComponent } from './components/procurement-order-statuses/procurement-order-statuses.component';\r\nimport { ProcurementChainCreationListComponent } from './components/procurement-chain-creation-list/procurement-chain-creation-list.component';\r\nimport {TriStateCheckboxModule} from 'primeng/tristatecheckbox';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProcurementChainsComponent,\r\n    ProcurementLayoutComponent,\r\n    ProcurementOrderPageComponent,\r\n    EditOrderProductQuantityComponent,\r\n    EditOrderProductDeliveryDateComponent,\r\n    AddOrderProductToOrderComponent,\r\n    InvoiceFilesComponent,\r\n    ServiceInvoiceFilesComponent,\r\n    AuxiliaryInvoicesTypesListComponent,\r\n    CreateEditAuxiliaryInvoiceTypeComponent,\r\n    ProcurementOrderStatusesComponent,\r\n    ProcurementChainCreationListComponent,\r\n  ],\r\n  exports: [\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ProcurementRouting,\r\n    LayoutModule,\r\n    SharedModule,\r\n    WarehouseModule,\r\n    TriStateCheckboxModule\r\n  ]\r\n})\r\nexport class ProcurementModule { }\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {ProcurementLayoutComponent} from './components/procurement-layout/procurement-layout.component';\r\nimport {ProcurementChainsComponent} from './components/procurement-chains/procurement-chains.component';\r\nimport {ProcurementOrderPageComponent} from './components/procurement-order-page/procurement-order-page.component';\r\nimport {\r\n  AuxiliaryInvoicesTypesListComponent\r\n} from './components/auxiliary-invoices-types-list/auxiliary-invoices-types-list.component';\r\nimport {\r\n  ProcurementOrderStatusesComponent\r\n} from './components/procurement-order-statuses/procurement-order-statuses.component';\r\nimport {\r\n  ProcurementChainCreationListComponent\r\n} from './components/procurement-chain-creation-list/procurement-chain-creation-list.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProcurementLayoutComponent,\r\n    children: [\r\n      {path: '', redirectTo: 'chains', pathMatch: 'full'},\r\n      {\r\n        path: 'chains',\r\n        children: [\r\n          {path: '', title: 'Procurement Chains', component: ProcurementChainsComponent},\r\n          {path: 'order/:id', title: 'Procurement Order', component: ProcurementOrderPageComponent},\r\n        ]\r\n      },\r\n      {path: 'services', title: 'Auxiliary Invoices Types', component: AuxiliaryInvoicesTypesListComponent},\r\n      {path: 'order-products', title: 'Procurement Chain Creation', component: ProcurementChainCreationListComponent},\r\n      {path: 'statuses', title: 'Order Statuses', component: ProcurementOrderStatusesComponent},\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ProcurementRouting {\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {BaseService} from '../models/base-service';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  CreateEditAuxiliaryInvoiceTypeComponent\r\n} from '../modals/create-edit-auxiliary-invoice-type/create-edit-auxiliary-invoice-type.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class BaseServicesService {\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'base_services/';\r\n\r\n  baseService: BaseService[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  getById(id): Observable<BaseService> {\r\n    return this.httpClient.get<{ data: BaseService }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  get(): Observable<BaseService[]> {\r\n    return this.httpClient.get<{ data: BaseService[] }>(this.API_URL + this.url + 'all/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(baseService): Observable<BaseService> {\r\n    return this.httpClient.post<{ data: BaseService }>(this.API_URL + this.url, baseService).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(baseService: Partial<BaseService>, id: number): Observable<BaseService> {\r\n    return this.httpClient.patch<{ data: BaseService }>(this.API_URL + this.url + id + '/', baseService).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  createEditBaseService(type: ModalActionType, service?: BaseService): Observable<BaseService> {\r\n    return this.dialog\r\n      .open<CreateEditAuxiliaryInvoiceTypeComponent>(CreateEditAuxiliaryInvoiceTypeComponent, {\r\n        width: '54rem',\r\n        height: 'auto',\r\n        data: {type, service},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {InvoiceProduct} from '../models/invoice-product';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InvoiceProductService {\r\n\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'invoice_products/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<InvoiceProduct[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: InvoiceProduct[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  severalUpdatePartly(invoices: Partial<InvoiceProduct>[]) {\r\n    return forkJoin(...invoices.map(invoice => this.httpClient.patch(this.API_URL + this.url + invoice.id + '/', invoice)));\r\n  }\r\n\r\n  updatePartly(invoice: Partial<InvoiceProduct>): Observable<InvoiceProduct> {\r\n    return this.httpClient.patch<{ data: InvoiceProduct }>(this.API_URL + this.url + invoice.id + '/', invoice).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getInvoiceProducts(id: number): Observable<InvoiceProduct[]> {\r\n    return this.httpClient.get<{ data: InvoiceProduct[] }>(this.API_URL + 'invoices/' + id + '/products_to_qc/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  acceptSeveral(send: any[]): Observable<any> {\r\n    return this.httpClient.post(environment.base_url + environment.warehouse_url + 'invoice_product_to_warehouse/', send).pipe(\r\n      map(response => response)\r\n    );\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {map} from 'rxjs/operators';\r\nimport {Invoice, InvoiceFile} from '../models/invoice';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {InvoiceProduct} from '../models/invoice-product';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  QcAcceptToWarehouseComponent\r\n} from '../../warehouse/modals/qc-accept-to-warehouse/qc-accept-to-warehouse.component';\r\nimport {Order} from '../models/order';\r\nimport {InvoiceFilesComponent} from '../modals/invoice-files/invoice-files.component';\r\nimport {PaymentFile} from '../../payments/models/payment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class InvoiceService {\r\n\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'invoices/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Invoice[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: Invoice[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<Invoice> {\r\n    return this.httpClient.get<{ data: Invoice }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getProductsToAccept(id: number): Observable<InvoiceProduct[]> {\r\n    return this.httpClient.get<{ data: InvoiceProduct[] }>(this.API_URL + this.url + id + '/products_to_accept/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getFiles(id: number): Observable<InvoiceFile[]> {\r\n    return this.httpClient.get<{ data: InvoiceFile[] }>(this.API_URL + 'invoice_files/' + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  downloadFile(id: number): Observable<any> {\r\n    return this.httpClient.get(this.API_URL + 'invoice_file_download/' + id + '/', {responseType: 'blob'});\r\n  }\r\n\r\n  removeFile(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + 'invoice_file_delete/' + id + '/', null).pipe(\r\n      map(response => response)\r\n    );\r\n  }\r\n\r\n  cancellation(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + id + '/cancellation/', null);\r\n  }\r\n\r\n  updatePartly(invoice: Partial<Invoice>): Observable<Invoice> {\r\n    return this.httpClient.patch<{ data: Invoice }>(this.API_URL + this.url + invoice.id + '/', invoice).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  severalUploadFiles(invoiceId: number, files: File[]): Observable<InvoiceFile[]> {\r\n    const arrayFormData: FormData[] = [];\r\n\r\n    files.forEach(file => {\r\n      const formData = new FormData()\r\n      formData.append('file', file);\r\n      arrayFormData.push(formData)\r\n    })\r\n    return forkJoin(...arrayFormData.map(formData => this.httpClient.post<{data: InvoiceFile}>(this.API_URL + `invoice_files/${invoiceId}/`, formData).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  openInvoiceFilesModal(invoice: Invoice): Observable<any> {\r\n    return this.dialog\r\n      .open<InvoiceFilesComponent>(InvoiceFilesComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: invoice,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openAcceptToWarehouseModal(items: InvoiceProduct[], id: number, type = 'invoice'): Observable<any> {\r\n    return this.dialog\r\n      .open<QcAcceptToWarehouseComponent>(QcAcceptToWarehouseComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: {items, id, type},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {OrderProduct, OrderProducts} from '../models/order-product';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  EditOrderProductQuantityComponent\r\n} from '../modals/edit-order-product-quantity/edit-order-product-quantity.component';\r\nimport {\r\n  EditOrderProductDeliveryDateComponent\r\n} from '../modals/edit-order-product-delivery-date/edit-order-product-delivery-date.component';\r\nimport {\r\n  AddOrderProductToOrderComponent\r\n} from '../modals/add-order-product-to-order/add-order-product-to-order.component';\r\nimport {\r\n  CreateOutsourcingRequestComponent\r\n} from '../../outsourcing/modals/create-outsourcing-request/create-outsourcing-request.component';\r\nimport {\r\n  AddMaterialToOrderComponent\r\n} from '../../outsourcing/modals/add-material-to-order/add-material-to-order.component';\r\nimport {OrderTechnicalEquipment} from '../../warehouse/models/order-technical-equipment';\r\nimport {ListProduct} from '../../warehouse/models/list-product';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OrderProductService {\r\n\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'order_products/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<OrderProduct[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: OrderProduct[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getQc(id: number): Observable<OrderProduct[]> {\r\n    return this.httpClient.get<{ data: OrderProduct[] }>(this.API_URL + 'orders/' + id + '/products_to_qc/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n\r\n  getFiltered(query?: QuerySearch[]): Observable<OrderProduct[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: OrderProduct[] }>(this.API_URL + this.url + 'minimal_order_products/' + queryParams).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  getGroupedPurchasedForPagination(query?: { name: string, value: any }[]): Observable<OrderProducts> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{\r\n      data: OrderProducts\r\n    }>(this.API_URL + this.url + 'purchased_grouped_by_nomenclature_request_id/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getGroupedPurchased(query?: { name: string, value: any }[]): Observable<OrderProduct[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{\r\n      data: OrderProduct[]\r\n    }>(this.API_URL + this.url + 'purchased_grouped_by_nomenclature_request_id/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getGroupedOutsourceForPagination(query?: { name: string, value: any }[]): Observable<OrderProducts> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{\r\n      data: OrderProducts\r\n    }>(this.API_URL + this.url + 'other_grouped_by_nomenclature_request_id/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  reworkOrderProduct(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + `${id}/to_initial_state/`, null);\r\n  }\r\n\r\n  getGroupedOutsource(query?: { name: string, value: any }[]): Observable<OrderProduct[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{\r\n      data: OrderProduct[]\r\n    }>(this.API_URL + this.url + 'other_grouped_by_nomenclature_request_id/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  acceptSeveral(send: any[]): Observable<any> {\r\n    return this.httpClient.post(environment.base_url + environment.warehouse_url + 'order_product_to_warehouse/', send).pipe(\r\n      map(response => response)\r\n    );\r\n  }\r\n\r\n  create(send: Partial<OrderProduct>): Observable<OrderProduct> {\r\n    return this.httpClient.post<{ data: OrderProduct }>(this.API_URL + this.url, send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  severalUpdatePartly(send: Partial<OrderProduct[]>): Observable<OrderProduct[]> {\r\n    return forkJoin(...send.map(product => this.httpClient.patch<{\r\n        data: OrderProduct\r\n      }>(this.API_URL + this.url + product.id + '/', product).pipe(\r\n        map(response => response.data)))\r\n    );\r\n  }\r\n\r\n  deleteSeveral(orderProducts: OrderProduct[]): Observable<OrderProduct[]> {\r\n    return forkJoin(...orderProducts.map(orderProduct => this.httpClient.delete<OrderProduct>(this.API_URL + this.url + orderProduct.not_ordered_product_id + '/')));\r\n  }\r\n\r\n  closeOrders(orderProducts: OrderProduct[]): Observable<OrderProduct[]> {\r\n    return forkJoin(...orderProducts.map(orderProduct => this.httpClient.post<OrderProduct>(this.API_URL + this.url + orderProduct.not_ordered_product_id + '/clean_unnecessary/', orderProduct.not_ordered_product_id)));\r\n  }\r\n\r\n  addToOrder(send: { id: number; order: number }[]): Observable<OrderProduct[]> {\r\n    return forkJoin(...send.map(send => this.httpClient.patch<OrderProduct>(this.API_URL + this.url + send.id + '/', send)));\r\n  }\r\n\r\n  updatePartly(orderProduct: OrderProduct): Observable<OrderProduct> {\r\n    return this.httpClient.patch<{\r\n      data: OrderProduct\r\n    }>(this.API_URL + this.url + orderProduct.id + '/', orderProduct).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  reworkOrder(ids: number[]): Observable<any> {\r\n    return forkJoin(...ids.map(id => this.httpClient.post(this.API_URL + this.url + `${id}/to_initial_state/`, null)));\r\n  }\r\n\r\n  removeFromOrder(orderProduct: OrderProduct): Observable<any> {\r\n    return this.httpClient.post<{\r\n      data: OrderProduct\r\n    }>(this.API_URL + this.url + orderProduct.id + '/remove_from_order/', orderProduct);\r\n  }\r\n\r\n  getTechnicalEquipmentToQC(id): Observable<OrderTechnicalEquipment[]> {\r\n    return this.httpClient.get<{\r\n      data: OrderTechnicalEquipment[]\r\n    }>(this.API_URL + 'orders/' + id + '/technical_equipment_to_qc/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  moveToQc(orderProduct: any): Observable<OrderProduct> {\r\n    return this.httpClient.patch<{\r\n      data: OrderProduct\r\n    }>(this.API_URL + this.url + orderProduct.id + '/', orderProduct.product).pipe(\r\n      map(response => response.data)\r\n    );\r\n  };\r\n\r\n  openAddOutsourcingRequestModal(orderId: number): Observable<OrderProduct> {\r\n    return this.dialog\r\n      .open<CreateOutsourcingRequestComponent>(CreateOutsourcingRequestComponent, {\r\n        width: '70rem',\r\n        height: 'auto',\r\n        data: {orderId},\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  editOrderProductQuantity(orderProduct: OrderProduct): Observable<OrderProduct> {\r\n    return this.dialog\r\n      .open<EditOrderProductQuantityComponent>(EditOrderProductQuantityComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: orderProduct,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  editOrderProductDeliveryDate(orderProduct: OrderProduct): Observable<OrderProduct> {\r\n    return this.dialog\r\n      .open<EditOrderProductDeliveryDateComponent>(EditOrderProductDeliveryDateComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: orderProduct,\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openAddProductToOrderModal(isPurchased: boolean, orderId: number): Observable<OrderProduct> {\r\n    return this.dialog\r\n      .open<AddOrderProductToOrderComponent>(AddOrderProductToOrderComponent, {\r\n        width: '80%',\r\n        maxHeight: '80%',\r\n        data: {isPurchased, orderId},\r\n        panelClass: 'modal-picker',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openAddPMaterialToOrder(productId: number): Observable<OrderProduct> {\r\n    return this.dialog\r\n      .open<AddMaterialToOrderComponent>(AddMaterialToOrderComponent, {\r\n        width: '80%',\r\n        maxHeight: '80%',\r\n        data: {productId},\r\n        panelClass: 'modal-picker',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Order, Orders} from '../models/order';\r\nimport {forkJoin, Observable, Subject} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {OrderProduct} from '../models/order-product';\r\nimport {\r\n  QcAcceptToWarehouseComponent\r\n} from '../../warehouse/modals/qc-accept-to-warehouse/qc-accept-to-warehouse.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {OrderTechnicalEquipment} from '../../warehouse/models/order-technical-equipment';\r\nimport {\r\n  QcAcceptTechnicalEquipmentComponent\r\n} from '../../warehouse/modals/qc-accept-technical-equipment/qc-accept-technical-equipment.component';\r\nimport {EditOrderComponent} from '@shared/modals/edit-order/edit-order.component';\r\nimport {OrderType} from '@shared/components/order-page/order-page.component';\r\nimport {CreateChainComponent} from '@shared/modals/create-chain/create-chain.component';\r\nimport {AddProductsToChainComponent} from '@shared/modals/add-products-to-chain/add-products-to-chain.component';\r\nimport {\r\n  CreateOutsourcingRequestComponent\r\n} from '../../outsourcing/modals/create-outsourcing-request/create-outsourcing-request.component';\r\nimport {\r\n  CreateEditPurchasingCategoryComponent\r\n} from '../../purchasing/modals/create-edit-purchasing-category/create-edit-purchasing-category.component';\r\nimport {\r\n  CreateEmptyPurchaseChainComponent\r\n} from '../../purchasing/modals/create-empty-purchase-chain/create-empty-purchase-chain.component';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {Router} from '@angular/router';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OrderService {\r\n  filesModal$: Subject<void> = new Subject<void>();\r\n  editOrderModal$: Subject<void> = new Subject<void>();\r\n\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'orders/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n    private readonly router: Router,\r\n    private readonly adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Order[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Order[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getFilteredOrderIds(query?: QuerySearch[]): Observable<{ ids: number[] }> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: { ids: number[] } }>(this.API_URL + this.url + 'filtered_order_ids' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getForPagination(query?: QuerySearch[]): Observable<Orders> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Orders }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  updatePartly(order: any) {\r\n    return this.httpClient.patch<{ data: Order }>(this.API_URL + this.url + order.id + '/', order).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<Order> {\r\n    return this.httpClient.get<{ data: Order }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getProductsToAccept(id: number): Observable<OrderProduct[]> {\r\n    return this.httpClient.get<{ data: OrderProduct[] }>(this.API_URL + this.url + id + '/products_to_accept/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getFiles(orderId: number): Observable<any> {\r\n    return this.httpClient.get<{ data: any }>(this.API_URL + 'order_files/' + orderId + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getTechnicalEquipmentToAccept(id: number): Observable<OrderTechnicalEquipment[]> {\r\n    return this.httpClient.get<{ data: OrderTechnicalEquipment[] }>(this.API_URL + this.url + id + '/order_technical_equipment_to_accept/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createProformaInvoice(id: number): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + id + '/proforma_invoice_with_products_create/', null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createInvoice(id: number): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + id + '/invoice_with_products_create/', null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  downloadFile(id: number): Observable<any> {\r\n    return this.httpClient.get(this.API_URL + 'order_file_download/' + id + '/', {responseType: 'blob'});\r\n  }\r\n\r\n  deleteFile(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + 'order_file_delete/' + id + '/', null);\r\n  }\r\n\r\n  activateTenderSuppliers(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + id + '/order_create_supplier_confirmation_list/', null);\r\n  }\r\n\r\n  create(data: any): Observable<Order> {\r\n    return this.httpClient.post<{ data: Order }>(this.API_URL + this.url, data).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createChain(order: any): Observable<Order> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + 'order_bulk_products_create/', order).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  severalUploadFiles(id: number, files: File[]): Observable<any[]> {\r\n    const arrayFormData: FormData[] = [];\r\n\r\n    files.forEach(file => {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      arrayFormData.push(formData);\r\n    });\r\n    return forkJoin(...arrayFormData.map(formData => this.httpClient.post<{ data: any }>(this.API_URL + `order_files/${id}/`, formData).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  openOrderStatusesChartWindow(orders: Order[]) {\r\n    localStorage.setItem('orders', JSON.stringify(orders));\r\n\r\n    console.log(JSON.parse(localStorage.getItem('orders')));\r\n\r\n    const url = this.router.serializeUrl(\r\n      this.router.createUrlTree(['/order-statuses-chart'])\r\n    );\r\n\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openAcceptToWarehouseModal(items: OrderProduct[], id: number, type = 'order'): Observable<any> {\r\n    return this.dialog\r\n      .open<QcAcceptToWarehouseComponent>(QcAcceptToWarehouseComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: {items, id, type},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openAcceptToWarehouseModalTechnicalEquipment(items: OrderTechnicalEquipment[], id: number): Observable<any> {\r\n    return this.dialog\r\n      .open<QcAcceptTechnicalEquipmentComponent>(QcAcceptTechnicalEquipmentComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: {items, id},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openEditOrderModal(order: Order, orderType: OrderType): Observable<Order> {\r\n    return this.dialog\r\n      .open<EditOrderComponent>(EditOrderComponent, {\r\n        width: '54rem',\r\n        height: 'auto',\r\n        data: {order, orderType},\r\n        autoFocus: false,\r\n        panelClass: 'modal-picker',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openCreateChainModal(products: OrderProduct[], orderType: OrderType): Observable<Order> {\r\n    return this.dialog\r\n      .open<CreateChainComponent>(CreateChainComponent, {\r\n        width: '64rem',\r\n        height: 'auto',\r\n        data: {products, orderType},\r\n        autoFocus: false,\r\n        panelClass: 'modal-picker',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  modifyOrders(orders: Order[]): Order[] {\r\n    let modifyOrders = [];\r\n\r\n    orders.forEach(order => {\r\n      order.created = new Date(order.created);\r\n      order.created_to = order.created;\r\n      order.status = order.statuses.filter(stat => stat.is_active)[0]?.status;\r\n      order.activeStatusDate = order.statuses.filter(stat => stat.is_active)[0]?.estimated_date;\r\n\r\n      order.root_lists = [];\r\n      order.order_products.forEach(prod => order.root_lists = order.root_lists.concat(prod.root_production_list_products));\r\n      order.root_lists = this.adapterService.removeDuplicates(order.root_lists, x => x.id);\r\n      order.root_search_lists = 'A' + order.root_lists.map(x => x.nomenclature.code + '~' + x.nomenclature.name).join('/');\r\n\r\n      order.orderStatuses = order.status ? order.status.value : 'Empty';\r\n\r\n      order.statuses.forEach(stat => {\r\n        stat.estimated_date = new Date(stat.estimated_date);\r\n      })\r\n\r\n      if (order.status) {\r\n        order.status.filter_value = 'A' + order.status.value;\r\n      } else {\r\n        order.status = {value: 'Empty', filter_value: 'A'};\r\n      }\r\n\r\n      order.statuses.sort((a, b) => new Date(a.estimated_date).getTime() - new Date(b.estimated_date).getTime());\r\n      order.root_lists = this.adapterService.removeDuplicates(order.root_lists, x => x.fullName);\r\n\r\n      order.dates = [];\r\n\r\n      order.companyId = order.supplier?.id;\r\n      order.dateFrom = order.created;\r\n      order.dateTo = new Date(new Date(order.created).setDate(new Date(order.created).getDate() - 1));\r\n    })\r\n\r\n    modifyOrders = [...orders]\r\n\r\n    return modifyOrders\r\n  }\r\n\r\n  moveToQc(data: any): Observable<Order> {\r\n    return this.httpClient.patch<{data: Order}>(this.API_URL + this.url + data.id + '/', data.order).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  openAddProductsToChainModal(products: OrderProduct[], orderType: OrderType): Observable<Order> {\r\n    return this.dialog\r\n      .open<AddProductsToChainComponent>(AddProductsToChainComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        data: {products, orderType},\r\n        autoFocus: false,\r\n        panelClass: 'modal-picker',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openCreateEmptyPurchaseChainModal(): Observable<Order> {\r\n    return this.dialog\r\n      .open<CreateEmptyPurchaseChainComponent>(CreateEmptyPurchaseChainComponent, {\r\n        width: '54rem',\r\n        height: 'auto',\r\n        data: {},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {map} from 'rxjs/operators';\r\nimport {Status} from '../models/status';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {CreateEditStatusComponent} from '@shared/modals/create-edit-status/create-edit-status.component';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class StatusService {\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'statuses/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Status[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Status[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(status: Partial<Status>): Observable<Status> {\r\n    return this.httpClient.post<{ data: Status }>(this.API_URL + this.url, status).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(status: Partial<Status>): Observable<Status> {\r\n    return this.httpClient.put<{ data: Status }>(this.API_URL + this.url + `${status.id}/`, status).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartly(status: Partial<Status>): Observable<Status> {\r\n    return this.httpClient.patch<{ data: Status }>(this.API_URL + this.url + `${status.id}/`, status).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  createEditStatusModal(type: ModalActionType, statusType: number, isAutoStatus: boolean, status?: Status): Observable<Status> {\r\n    return this.dialog\r\n      .open<CreateEditStatusComponent>(CreateEditStatusComponent, {\r\n        width: '45rem',\r\n        height: 'auto',\r\n        data: {type, statusType, isAutoStatus, status},\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Component, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {NomenclaturesFileService} from '@shared/services/nomenclatures-file.service';\r\nimport {forkJoin, Subject, takeUntil} from 'rxjs';\r\nimport {NomenclatureFile} from '@shared/models/nomenclature';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {UploadFilePickerComponent} from '@shared/components/upload-file-picker/upload-file-picker.component';\r\n\r\n@Component({\r\n  selector: 'pek-nomenclature-files',\r\n  templateUrl: './nomenclature-files.component.html',\r\n  styleUrls: ['./nomenclature-files.component.scss']\r\n})\r\nexport class NomenclatureFilesComponent implements OnInit, OnDestroy {\r\n  @ViewChild('filePicker') filePicker: UploadFilePickerComponent;\r\n  @Input() nomenclatureId: number;\r\n  private destroy$ = new Subject();\r\n  files: NomenclatureFile[] = [];\r\n  selectedFile: NomenclatureFile;\r\n\r\n  readonly deletion = new Set<number>();\r\n\r\n  constructor(\r\n    private nomenclatureFileService: NomenclaturesFileService,\r\n    private modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.nomenclatureId) {\r\n      this.loadFiles();\r\n    }\r\n  }\r\n\r\n  loadFiles() {\r\n    this.nomenclatureFileService.get([{name: 'nomenclature', value: this.nomenclatureId}])\r\n      .pipe(\r\n        takeUntil(this.destroy$)\r\n      ).subscribe(res => {\r\n      this.files = res;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  filesChanged(files: File[]) {\r\n    const filesToAddCall = [];\r\n    files.forEach(file => {\r\n      filesToAddCall.push(this.nomenclatureFileService.create({nomenclature: this.nomenclatureId, file}));\r\n    });\r\n    const observable = forkJoin([\r\n      ...filesToAddCall\r\n    ]);\r\n\r\n    observable.pipe(takeUntil(this.destroy$)).subscribe({\r\n      next: value => {\r\n        this.filePicker.clearFiles();\r\n        this.loadFiles();\r\n      },\r\n      complete: () => {\r\n\r\n      },\r\n    });\r\n  }\r\n\r\n  public deleteFile(id: number) {\r\n    this.modalService.confirm('danger', 'Confirm').pipe(takeUntil(this.destroy$)).subscribe(confirm => {\r\n      if (confirm) {\r\n        this.deletion.add(id);\r\n        this.nomenclatureFileService.delete(id).pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n          this.deletion.delete(id);\r\n          this.selectedFile = null;\r\n          this.loadFiles();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  getName(name) {\r\n    const nameArr = name.split('/');\r\n    return nameArr[nameArr.length - 1];\r\n  }\r\n\r\n  printFileAdded(file: File) {\r\n    this.nomenclatureFileService.create({\r\n      nomenclature: this.nomenclatureId,\r\n      file\r\n    }).pipe(takeUntil(this.destroy$)).subscribe(() => {\r\n      this.filePicker.clearFiles();\r\n      this.loadFiles();\r\n    });\r\n  }\r\n}\r\n","<div pekPasteScreenImage [trackMousePosition]=\"true\" (imageAdded)=\"printFileAdded($event)\">\r\n  <div class=\"\">\r\n    <div class=\"col-12\">\r\n      <div class=\"form-group\">\r\n        <pek-upload-file-picker #filePicker (fileChanged)=\"filesChanged($event)\"></pek-upload-file-picker>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <p-table\r\n    [paginator]=\"files.length > 10\"\r\n    [rows]=\"10\"\r\n    [value]=\"files\"\r\n    selectionMode=\"single\"\r\n    [scrollable]=\"true\"\r\n    [(selection)]=\"selectedFile\"\r\n  >\r\n    <ng-template pTemplate=\"caption\">\r\n    </ng-template>\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n        <th style=\"width: 75%\">File Name</th>\r\n        <th class=\"text-center\" style=\"width: 20%\">Actions</th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-file let-i=\"rowIndex\">\r\n      <tr>\r\n        <td class=\"text-center\" style=\"width: 5%\">\r\n          <h3 class=\"td-title\">#</h3>\r\n          {{i + 1}}\r\n        </td>\r\n        <td style=\"width: 75%\" class=\"word-break\">\r\n          <h3 class=\"td-title\">File Name</h3>\r\n          <a>\r\n            {{getName(file.file)}}\r\n          </a>\r\n        </td>\r\n        <td style=\"width: 20%\">\r\n          <h3 class=\"td-title\">Actions</h3>\r\n          <div class=\"btn-actions\">\r\n            <button\r\n              pButton\r\n              (click)=\"deleteFile(file.id)\"\r\n              [loading]=\"deletion.has(file.id)\"\r\n              type=\"button\"\r\n              class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n              icon=\"pi pi-trash\"\r\n            ></button>\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n      <tr>\r\n        <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n          <span>No Records Found</span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </p-table>\r\n</div>\r\n\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {TechnicalEquipment} from '../../../../../models/technical-equipment';\r\nimport {Technology} from '../../../../../models/technology';\r\n\r\n@Component({\r\n  selector: 'pek-edit-technical-equipment',\r\n  templateUrl: './edit-technical-equipment.component.html',\r\n  styleUrls: ['./edit-technical-equipment.component.scss']\r\n})\r\nexport class EditTechnicalEquipmentComponent implements OnInit {\r\n  equipment: TechnicalEquipment;\r\n  form: FormGroup = this.fb.group({\r\n    quantity: [1, Validators.required],\r\n    technology: [null, Validators.required]\r\n  });\r\n  technologies: Technology[];\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<EditTechnicalEquipmentComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public technicalEquipment: { technicalEquipment: TechnicalEquipment, technologies: Technology[] },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.technologies = this.technicalEquipment.technologies;\r\n    this.form.get('quantity').patchValue(this.technicalEquipment.technicalEquipment.quantity)\r\n    this.form.get('technology').patchValue(this.technicalEquipment.technicalEquipment.technology.id)\r\n    this.equipment = this.technicalEquipment.technicalEquipment;\r\n  }\r\n\r\n  onSave() {\r\n    if (this.form.valid) {\r\n      const data: TechnicalEquipment = {\r\n        id: this.equipment.id,\r\n        nomenclature_in_use: this.equipment.nomenclature_in_use,\r\n        quantity: this.form.get('quantity').value,\r\n        technology: {id: this.form.get('technology').value}\r\n      }\r\n      this.dialogRef.close(data);\r\n    }\r\n  }\r\n\r\n  technologySelected(technology: number) {\r\n    this.form.get('technology').setValue(technology);\r\n  }\r\n}\r\n","<!--<div *ngIf=\"technicalEquipment\">-->\r\n<!--  <p>edit-technical-equipment works!</p>-->\r\n<!--  {{technicalEquipment.technicalEquipment.technical_equipment.code}}-->\r\n<!--  /-->\r\n<!--  {{technicalEquipment.technicalEquipment.quantity}}-->\r\n<!--</div>-->\r\n\r\n<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Edit Technical Equipment\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"quantity\">Quantity</label>\r\n      <input type=\"text\" id=\"quantity\" pInputText formControlName=\"quantity\">\r\n    </div>\r\n    <div  class=\"form-group\">\r\n      <label for=\"quantity\">Technology (Select Technology of the Product)</label>\r\n      <pek-technology-picker [showClear]=\"false\" [predefinedTechnologies]=\"technologies\" [selectTechnologyId]=\"form.get('technology').value\" (selectTechnology)=\"technologySelected($event)\"></pek-technology-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Update\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {TechnicalEquipment} from '../../../../models/technical-equipment';\r\nimport {TechnicalEquipmentService} from '../../../../services/technical-equipment.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {Technology} from '../../../../models/technology';\r\n\r\n@Component({\r\n  selector: 'pek-technical-equipments-table',\r\n  templateUrl: './technical-equipments-table.component.html',\r\n  styleUrls: ['./technical-equipments-table.component.scss']\r\n})\r\nexport class TechnicalEquipmentsTableComponent implements OnInit, OnDestroy, OnChanges {\r\n  @Input() technicalEquipments: TechnicalEquipment[] = [];\r\n  @Input() technologies: Technology[] = [];\r\n  @Output() isSelectedEquipmentEmitter: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n  @Output() equipmentChanged: EventEmitter<{ index: number, technicalEquipment: TechnicalEquipment }>\r\n    = new EventEmitter<{ index: number; technicalEquipment: TechnicalEquipment }>();\r\n  @Output() deleteEquipmentIndex: EventEmitter<number> = new EventEmitter<number>();\r\n  selectedTechnicalEquipment: TechnicalEquipment;\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private technicalEquipmentService: TechnicalEquipmentService\r\n  ) {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n       if ('technologies' in changes) {\r\n         if (changes['technologies'].previousValue && changes['technologies'].currentValue.length < changes['technologies'].previousValue.length ) {\r\n           changes['technologies'].previousValue.forEach(technology => {\r\n             const isDeleted = changes['technologies'].currentValue.findIndex(el => el.id === technology.id) < 0;\r\n             if (isDeleted) {\r\n               const toDeleteTE = this.technicalEquipments.filter(el => el.technology.id === technology.id);\r\n               toDeleteTE.forEach((el, index) => {\r\n                 const delIndex = this.technicalEquipments.findIndex(el2 => el2.id === el.id);\r\n                 this.deleteEquipmentIndex.emit(delIndex);\r\n               });\r\n             }\r\n           });\r\n         }\r\n       }\r\n    }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  emitItemSelected(): void {\r\n    this.isSelectedEquipmentEmitter.emit(!!this.selectedTechnicalEquipment);\r\n  }\r\n\r\n  emitDeletedIndex(): void {\r\n    const index = this.technicalEquipments.findIndex(equipments => equipments === this.selectedTechnicalEquipment);\r\n    this.deleteEquipmentIndex.emit(index);\r\n    this.selectedTechnicalEquipment = null;\r\n    this.emitItemSelected();\r\n  }\r\n\r\n  editTechnicalEquipment() {\r\n    const index = this.technicalEquipments.findIndex(equipments => equipments === this.selectedTechnicalEquipment);\r\n    this.technicalEquipmentService.openEditTechnicalEquipment(this.selectedTechnicalEquipment, this.technologies)\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(res => {\r\n        if (res) {\r\n          res.technology = this.technologies.find(el => el.id === res.technology.id);\r\n          this.equipmentChanged.emit({index: index, technicalEquipment: res});\r\n          this.selectedTechnicalEquipment = null;\r\n          this.emitItemSelected();\r\n        }\r\n      });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"d-flex justify-content-end mb-3\" *ngIf=\"selectedTechnicalEquipment\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    icon=\"pi pi-pencil\"\r\n    class=\"p-button-rounded mr-2\"\r\n    (click)=\"editTechnicalEquipment()\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    icon=\"pi pi-trash\"\r\n    class=\"p-button-rounded p-button-danger\"\r\n    (click)=\"emitDeletedIndex()\"\r\n  ></button>\r\n</div>\r\n\r\n<div class=\"table-pagination-preloader\">\r\n  <p-table\r\n    #dt\r\n    selectionMode=\"single\"\r\n    [scrollable]=\"true\"\r\n    [rows]=\"10\"\r\n    [(selection)]=\"selectedTechnicalEquipment\"\r\n    (selectionChange)=\"emitItemSelected()\"\r\n    [value]=\"technicalEquipments\"\r\n  >\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n        <th style=\"width: 27.5%\">Code</th>\r\n        <th style=\"width: 27.5%\">Name</th>\r\n        <th style=\"width: 25%\">Technology</th>\r\n        <th class=\"text-center\" style=\"width: 15%\">Quantity</th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-technicalEquipment let-i=\"rowIndex\">\r\n      <tr [pSelectableRow]=\"technicalEquipment\">\r\n        <td style=\"width: 5%\" class=\"text-center\">\r\n          {{i + 1}}\r\n        </td>\r\n        <td style=\"width: 27.5%\">\r\n          {{technicalEquipment.nomenclature_in_use.code}}\r\n        </td>\r\n        <td style=\"width: 27.5%\">\r\n          <b *ngIf=\"technicalEquipment.nomenclature_in_use.bulk_or_serial === '1'\">(S)</b>\r\n          {{technicalEquipment.nomenclature_in_use.name}}\r\n        </td>\r\n        <td style=\"width: 25%\" class=\"text-center\">\r\n          {{technicalEquipment.technology?.name}}\r\n        </td>\r\n        <td style=\"width: 15%\" class=\"text-center\">\r\n          {{technicalEquipment.quantity}}\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n      <tr>\r\n        <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n          <span >No Records Found</span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </p-table>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from '@angular/core';\r\nimport {FormArray, FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {ENomenclatureBulk, ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {Technology} from '../../models/technology';\r\nimport {Product} from '../../models/product';\r\nimport {Category} from '../../models/category';\r\nimport {CdkDragDrop, moveItemInArray} from '@angular/cdk/drag-drop';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {TechnicalEquipmentService} from '../../services/technical-equipment.service';\r\nimport {TechnicalEquipment} from '../../models/technical-equipment';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {MessageService} from 'primeng/api';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-form',\r\n  templateUrl: './create-edit-product-form.component.html',\r\n  styleUrls: ['./create-edit-product-form.component.scss']\r\n})\r\nexport class CreateEditProductFormComponent implements OnInit, OnDestroy {\r\n  technicalEquipments: TechnicalEquipment[] = [];\r\n  deleted_technical_equipments_ids: number[] = [];\r\n  @Input() isShowQuantity = true;\r\n  @Input() type: 'edit' | 'create' = 'edit';\r\n  @Input() product: Partial<Product>;\r\n  @Output() formChange: EventEmitter<{ invalid: boolean, formValue: Partial<Product & Nomenclature> }> = new EventEmitter<{ invalid: boolean; formValue: Partial<Product> }>();\r\n  @Output() uploadImage: EventEmitter<File[]> = new EventEmitter<File[]>();\r\n  @Output() removeImage: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n  nomenclatureType = ENomenclatureType;\r\n\r\n  selectedTechnologiesIds: number[] = [];\r\n  warehouseQuantity: number;\r\n\r\n  bulkOrSerial = [\r\n    {label: 'Bulk', value: ENomenclatureBulk.BULK},\r\n    {label: 'With Serial Numbers', value: ENomenclatureBulk.SERIAL}\r\n  ];\r\n\r\n  form: FormGroup = this.fb.group({\r\n    type: [null, {disabled: true}],\r\n    name: ['', Validators.required],\r\n    code: ['', Validators.required],\r\n    description: [''],\r\n    quantity: [1, [Validators.required, Validators.min(1)]],\r\n    category: [null],\r\n    canAddTechnicalEquipment: [false],\r\n    bulk_or_serial: ['0', Validators.required],\r\n    codeId: [{value: '', disabled: true}],\r\n    technologies: [[]],\r\n    technical_equipments: this.fb.array([]),\r\n    deleted_technical_equipments_ids: [[]],\r\n  });\r\n\r\n  private destroy$ = new Subject();\r\n  isItemSelected: boolean;\r\n\r\n  constructor(\r\n    private readonly messageService: MessageService,\r\n    private readonly fb: FormBuilder,\r\n    private technicalEquipmentService: TechnicalEquipmentService,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.valueChanges.pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(data => {\r\n      this.formChange.next({invalid: this.form.invalid, formValue: data});\r\n    });\r\n\r\n    if (this.product) {\r\n      if (this.product.nomenclature.technologies.length > 0) {\r\n        this.selectedTechnologiesIds = this.product.nomenclature.technologies.map(t => t.id);\r\n        this.form.get('technologies').patchValue([...this.product.nomenclature.technologies]);\r\n      }\r\n\r\n      this.form.patchValue(this.product.nomenclature);\r\n\r\n      if (this.isShowQuantity) {\r\n        this.form.get('quantity').patchValue(this.product.quantity);\r\n      } else {\r\n        this.form.removeControl('quantity');\r\n      }\r\n\r\n      this.form.get('codeId').patchValue(this.product.nomenclature.code);\r\n\r\n      if (this.product.nomenclature.category) {\r\n        this.form.get('category').patchValue(this.product.nomenclature.category.id);\r\n      }\r\n\r\n      if (this.product.nomenclature.type === ENomenclatureType.PURCHASED) {\r\n        this.form.removeControl('code');\r\n      }\r\n\r\n      if (this.product.nomenclature.id) {\r\n        this.getTechnicalEquipments();\r\n      }\r\n    }\r\n\r\n    if (this.type === 'edit') {\r\n      this.getNomenclatureWarehouseQuantity();\r\n    }\r\n  }\r\n\r\n  getNomenclatureWarehouseQuantity() {\r\n    this.nomenclatureService.getWarehouseQuantity(this.product.nomenclature.id).subscribe(response => this.warehouseQuantity = response.total_warehouse_quantity)\r\n  }\r\n\r\n  getTechnicalEquipments(): void {\r\n    this.technicalEquipmentService.get([{\r\n      name: 'nomenclature',\r\n      value: this.product.nomenclature.id\r\n    }]).pipe(takeUntil(this.destroy$)).subscribe(res => {\r\n      if (res) {\r\n        this.technicalEquipments = res.map(equipment => {\r\n          return {\r\n            id: equipment.id,\r\n            nomenclature_in_use: {\r\n              id: equipment.nomenclature_in_use.id,\r\n              code: equipment.nomenclature_in_use.code,\r\n              name: equipment.nomenclature_in_use.name,\r\n            },\r\n            quantity: equipment.quantity,\r\n            technology: equipment.technology,\r\n          };\r\n        });\r\n        if (this.technicalEquipments.length > 0) {\r\n          this.form.get('canAddTechnicalEquipment').patchValue(true);\r\n          this.technicalEquipments.forEach(equipment => {\r\n            (this.form.controls['technical_equipments'] as FormArray).push(this.fb.group({\r\n              ...equipment\r\n            }));\r\n          });\r\n        }\r\n      }\r\n\r\n    });\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    if (category) {\r\n      this.form.get('category').patchValue(category.id);\r\n    } else {\r\n      this.form.get('category').patchValue(null);\r\n    }\r\n  }\r\n\r\n  onUploadImages(files: File[]) {\r\n    this.uploadImage.emit(files);\r\n  }\r\n\r\n  onRemoveImage(idx: number) {\r\n    this.removeImage.emit(idx);\r\n  }\r\n\r\n  drop(event: CdkDragDrop<Technology[]>) {\r\n    const technologies = this.form.get('technologies').value.map(t => t);\r\n    const technologiesIds = this.selectedTechnologiesIds;\r\n    moveItemInArray(technologies, event.previousIndex, event.currentIndex);\r\n    moveItemInArray(technologiesIds, event.previousIndex, event.currentIndex);\r\n    this.form.get('technologies').patchValue([...technologies]);\r\n    this.selectedTechnologiesIds = [...technologiesIds];\r\n  }\r\n\r\n  onSelectTechnology(technologies: Technology[]) {\r\n    this.form.get('technologies').patchValue(technologies);\r\n    this.selectedTechnologiesIds = technologies.map(t => t.id);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  addTechnicalEquipment() {\r\n    console.log('this.form.get(\\'technologies\\')', this.form.get('technologies').value);\r\n    const technologies = this.form.get('technologies').value;\r\n    if (!technologies || technologies.length === 0) {\r\n      this.messageService.add({\r\n        severity: 'error',\r\n        summary: 'Add Technologies.',\r\n        detail: `Add Technologies First!`\r\n      });\r\n    }\r\n    this.technicalEquipmentService.openAddTechnicalEquipment(technologies).pipe(takeUntil(this.destroy$)).subscribe(res => {\r\n      console.log('res', res);\r\n      res.technology = technologies.find(el => el.id === res.technology.id);\r\n\r\n      if (res) {\r\n        (this.form.controls['technical_equipments'] as FormArray).push(this.fb.group({\r\n          ...res\r\n        }));\r\n        this.refreshTechnicalEquipments();\r\n      }\r\n    });\r\n  }\r\n\r\n  refreshTechnicalEquipments(): void {\r\n    this.technicalEquipments = [];\r\n    (this.form.controls['technical_equipments'] as FormArray).controls.forEach(group => {\r\n      this.technicalEquipments.push(group.value);\r\n    });\r\n  }\r\n\r\n  equipmentChanged(data: { index: number; technicalEquipment: TechnicalEquipment }) {\r\n    (this.form.controls['technical_equipments'] as FormArray).controls[data.index].setValue(data.technicalEquipment);\r\n    this.refreshTechnicalEquipments();\r\n  }\r\n\r\n  equipmentDeleted(index: number) {\r\n    if (index > -1) {\r\n      const equipmentId = this.technicalEquipments[index].id;\r\n      if (equipmentId) {\r\n        this.deleted_technical_equipments_ids.push(this.technicalEquipments[index].id);\r\n        this.form.get('deleted_technical_equipments_ids').patchValue([...this.deleted_technical_equipments_ids]);\r\n      }\r\n      this.technicalEquipments.splice(index, 1);\r\n      (this.form.controls['technical_equipments'] as FormArray).removeAt(index);\r\n    }\r\n  }\r\n\r\n  showWarehouseQuantityConfirm() {\r\n    if (this.type === 'edit') {\r\n      if (this.form.get('bulk_or_serial').value === ENomenclatureBulk.SERIAL) {\r\n        this.nomenclatureService.showSerialConfirmationModal(this.product, this.warehouseQuantity).subscribe(confirm => {\r\n          if (!confirm) {\r\n            this.form.get('bulk_or_serial').patchValue(ENomenclatureBulk.BULK)\r\n          }\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"create-edit-product-form\">\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"edit-product\">\r\n      <div class=\"edit-product__left\" *ngIf=\"product.nomenclature.type !== nomenclatureType.PURCHASED\">\r\n        <div class=\"form-group edit-product__technology-picker\">\r\n          <label>Technologies</label>\r\n          <pek-multi-technology-picker\r\n            (selectTechnologies)=\"onSelectTechnology($event)\"\r\n            [currentTechnologiesIds]=\"selectedTechnologiesIds\"\r\n          >\r\n          </pek-multi-technology-picker>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label>Order of Technologies</label>\r\n          <div\r\n            class=\"edit-product__list\"\r\n            cdkDropList\r\n            (cdkDropListDropped)=\"drop($event)\"\r\n          >\r\n            <div\r\n              class=\"edit-product__technology\"\r\n              *ngFor=\"let technology of form.get('technologies').value\"\r\n              cdkDrag\r\n            >\r\n              <div class=\"edit-product__placeholder\" *cdkDragPlaceholder></div>\r\n              {{technology.name}}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"edit-product__right\">\r\n        <div class=\"edit-product__column\">\r\n          <div class=\"edit-product__image\">\r\n            <pek-images-slider\r\n              [width]=\"'15.75rem'\"\r\n              [height]=\"'15.75rem'\"\r\n              [images]=\"product.nomenclature.images\"\r\n              (removeImage)=\"onRemoveImage($event)\"\r\n              (choiceImages)=\"onUploadImages($event)\"\r\n            ></pek-images-slider>\r\n          </div>\r\n          <div class=\"edit-product__fields\">\r\n            <div class=\"form-group\">\r\n              <label>Type</label>\r\n              <pek-nomenclature-type-picker\r\n                [isDisabled]=\"true\"\r\n                [currentNomenclatureType]=\"form.get('type').value\"\r\n              ></pek-nomenclature-type-picker>\r\n            </div>\r\n            <div class=\"form-group\" *ngIf=\"form.get('type').value !== nomenclatureType.PURCHASED\">\r\n              <label for=\"code\">Code*</label>\r\n              <input type=\"text\" id=\"code\" pInputText formControlName=\"code\">\r\n            </div>\r\n\r\n            <div class=\"form-group\">\r\n              <label for=\"name\">Name*</label>\r\n              <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n            </div>\r\n\r\n            <div class=\"form-group\" *ngIf=\"form.get('type').value === nomenclatureType.PURCHASED\">\r\n              <label>Category</label>\r\n              <pek-product-category-picker\r\n                (choiceCategory)=\"onSelectCategory($event)\"\r\n                [currentCategoryId]=\"this.form.get('category').value\"\r\n              >\r\n              </pek-product-category-picker>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"product-add__box\">\r\n          <div class=\"form-group\">\r\n            <label for=\"bulk\">Bulk / With Serial Numbers*</label>\r\n            <p-dropdown\r\n              id=\"bulk\"\r\n              [options]=\"bulkOrSerial\"\r\n              formControlName=\"bulk_or_serial\"\r\n              optionLabel=\"label\"\r\n              optionValue=\"value\"\r\n              (ngModelChange)=\"showWarehouseQuantityConfirm()\"\r\n            ></p-dropdown>\r\n          </div>\r\n          <div class=\"form-group\" *ngIf=\"type === 'edit'\">\r\n            <label for=\"id\">Id</label>\r\n            <input type=\"text\" id=\"id\" pInputText formControlName=\"codeId\">\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"description\">Description</label>\r\n            <textarea\r\n              id=\"description\"\r\n              [rows]=\"2\"\r\n              pInputTextarea\r\n              [autoResize]=\"false\"\r\n              formControlName=\"description\"\r\n            ></textarea>\r\n          </div>\r\n          <div class=\"form-group\" *ngIf=\"(product.parent || type === 'create') && isShowQuantity\">\r\n            <label for=\"quantity\">Quantity*</label>\r\n            <input type=\"number\" min=\"1\" step=\"1\" id=\"quantity\" pInputText formControlName=\"quantity\">\r\n          </div>\r\n          <div *ngIf=\"product.nomenclature.type !== nomenclatureType.PURCHASED\" class=\"form-group\">\r\n            <label for=\"technicalEquipment\">Required Technical Equipment</label>\r\n            <p-checkbox id=\"technicalEquipment\" formControlName=\"canAddTechnicalEquipment\" [binary]=\"true\"\r\n                        inputId=\"binary\"></p-checkbox>\r\n          </div>\r\n          <div class=\"d-flex justify-content-end mb-3\"\r\n               *ngIf=\"form.get('canAddTechnicalEquipment').value && !isItemSelected\">\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-plus\"\r\n              class=\"p-button-rounded\"\r\n              (click)=\"addTechnicalEquipment()\"\r\n            ></button>\r\n          </div>\r\n          <div *ngIf=\"form.get('canAddTechnicalEquipment').value\">\r\n            <pek-technical-equipments-table\r\n              [technologies]=\"this.form.get('technologies').value\"\r\n              (isSelectedEquipmentEmitter)=\"isItemSelected = $event\" [technicalEquipments]=\"technicalEquipments\"\r\n              (deleteEquipmentIndex)=\"equipmentDeleted($event)\"\r\n              (equipmentChanged)=\"equipmentChanged($event)\"></pek-technical-equipments-table>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <pek-nomenclature-files [nomenclatureId]=\"product.nomenclature.id\"></pek-nomenclature-files>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {ProductPrefix} from '../../models/prefix';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {PrefixService} from '../../services/prefix.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-prefixes',\r\n  templateUrl: './prefixes.component.html',\r\n  styleUrls: ['./prefixes.component.scss']\r\n})\r\nexport class PrefixesComponent implements OnInit, OnDestroy {\r\n  prefixes: ProductPrefix[] = [];\r\n  selectedPrefix: ProductPrefix;\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private prefixService: PrefixService,\r\n    public modalService: ModalService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getPrefixes();\r\n  }\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Prefix',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditPrefix()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemovePrefix()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  getPrefixes() {\r\n    this.prefixService.get().subscribe(prefixes => {\r\n      this.prefixes = prefixes;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onAddPrefix() {\r\n    this.prefixService.createEditPrefix('create').pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(prefix => {\r\n      if (prefix) {\r\n        this.prefixes.unshift(prefix);\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditPrefix() {\r\n    this.prefixService.createEditPrefix('edit', this.selectedPrefix).subscribe(prefix => {\r\n      if (prefix) {\r\n        const index = this.prefixes.findIndex(t => t.id === this.selectedPrefix.id);\r\n        this.prefixes[index] = prefix;\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemovePrefix() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.prefixService.delete(this.selectedPrefix.id).subscribe(() => {\r\n          const index = this.prefixes.findIndex(t => t.id === this.selectedPrefix.id);\r\n          this.prefixes.splice(index, 1);\r\n          this.selectedPrefix = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'product-structure'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Prefixes</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Prefix\" (click)=\"onAddPrefix()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"prefixes.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedPrefix\"\r\n        [value]=\"prefixes\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedPrefix\">Choose the Prefix to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedPrefix\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 30%\">Name</th>\r\n            <th style=\"width: 50%\">Description</th>\r\n            <th class=\"text-center\" style=\"width: 15%\">Type</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-prefix let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"prefix\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 30%\">{{prefix.prefix}}</td>\r\n            <td style=\"width: 50%\">{{prefix.description}}</td>\r\n            <td class=\"text-center\" style=\"width: 15%\">\r\n              <ng-container [ngSwitch]=\"prefix.service_or_material\">\r\n                <span *ngSwitchCase=\"'0'\">\r\n                  Service\r\n                </span>\r\n                <span *ngSwitchCase=\"'1'\">\r\n                  Material\r\n                </span>\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && prefixes.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ProductStructureCategoryService} from '../../services/product-structure-category.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {ProductStructureCategory} from '../../models/product-structure-category';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {cloneDeep} from 'lodash-es';\r\nimport {finalize, Subject, takeUntil} from 'rxjs';\r\nimport {TreeService} from '@shared/services/tree.service';\r\nimport {Category} from '../../models/category';\r\n\r\n@Component({\r\n  selector: 'pek-product-structure-categories',\r\n  templateUrl: './product-structure-categories.component.html',\r\n  styleUrls: ['./product-structure-categories.component.scss']\r\n})\r\nexport class ProductStructureCategoriesComponent implements OnInit, OnDestroy {\r\n  categories: ProductStructureCategory[] = [];\r\n  categoriesTree: TreeNode<ProductStructureCategory>[];\r\n  selectedCategory: TreeNode<ProductStructureCategory>;\r\n\r\n  isLoading = true;\r\n  isMovingDown = false;\r\n  isMovingUp = false;\r\n\r\n  expanseMap = {};\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Category',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditCategory()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveCategory()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private productStructureCategoryService: ProductStructureCategoryService,\r\n    private modalService: ModalService,\r\n    private readonly treeService: TreeService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getCategories();\r\n  }\r\n\r\n  getCategories() {\r\n    this.productStructureCategoryService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.categoriesTree) {\r\n      this.treeService.mapExpansion(this.categoriesTree, this.expanseMap);\r\n    }\r\n\r\n    this.categoriesTree = this.treeService.createTree(this.categories, this.expanseMap);\r\n  }\r\n\r\n  getMeasure(measure) {\r\n    if (measure != null) {\r\n      return measure.name + ' (' + measure.symbol + ')';\r\n    } else {\r\n      return '_';\r\n    }\r\n  }\r\n\r\n  findIndexToMove(selectedNodeId) {\r\n    let index;\r\n\r\n    const find = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach((node, i) => {\r\n        if (node.data.id === selectedNodeId) {\r\n          index = i;\r\n          return;\r\n        } else {\r\n          find(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    find(this.categoriesTree);\r\n    return index;\r\n  }\r\n\r\n  down() {\r\n    const node = this.selectedCategory;\r\n\r\n    const index = this.findIndexToMove(node.data.id);\r\n\r\n    if ((index < node.parent?.children.length - 1 || (!node.parent && index < this.categoriesTree.length - 1)) && !this.isMovingDown) {\r\n      this.isMovingDown = true;\r\n      const move = {\r\n        parent: node.parent ? node.parent.children[index + 1].data.id : this.categoriesTree[index + 1].data.id,\r\n        move_to: 'right'\r\n      };\r\n      this.productStructureCategoryService.move(move, node.data.id).pipe(\r\n        finalize(() => this.isMovingDown = false)\r\n      ).subscribe(category => {\r\n        const index = this.categories.findIndex(c => c.id === node.data.id);\r\n        this.categories[index] = category;\r\n\r\n        this.productMoved(category, 'down');\r\n      });\r\n    }\r\n  }\r\n\r\n  up() {\r\n    const node = this.selectedCategory;\r\n    const index = this.findIndexToMove(node.data.id);\r\n\r\n    if (index > 0 && !this.isMovingUp) {\r\n      this.isMovingUp = true;\r\n      const move = {\r\n        parent: node.parent ? node.parent.children[index - 1].data.id : this.categoriesTree[index - 1].data.id,\r\n        move_to: 'left'\r\n      };\r\n      this.productStructureCategoryService.move(move, node.data.id).pipe(\r\n        finalize(() => this.isMovingUp = false)\r\n      ).subscribe(category => {\r\n        const index = this.categories.findIndex(c => c.id === node.data.id);\r\n        this.categories[index] = category;\r\n\r\n        this.productMoved(category, 'up');\r\n      });\r\n    }\r\n  }\r\n\r\n  productMoved(category: Category, direction: 'up' | 'down') {\r\n    let findedProduct: TreeNode<ProductStructureCategory>;\r\n    let parentProduct: TreeNode<ProductStructureCategory>;\r\n\r\n    const findProduct = (nodes: TreeNode<ProductStructureCategory>[]) => {\r\n      nodes.forEach(node => {\r\n        if (node.data.id === category.id) {\r\n          findedProduct = node;\r\n        } else {\r\n          if (node.children && node.children.length > 0) {\r\n            findProduct(node.children);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    const findParent = (nodes: TreeNode<ProductStructureCategory>[]) => {\r\n      nodes.forEach(node => {\r\n        if (node.data.id === findedProduct.parent.data.id) {\r\n          parentProduct = node;\r\n        } else {\r\n          if (node.children && node.children.length > 0) {\r\n            findParent(node.children);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    findProduct(this.categoriesTree);\r\n\r\n    if (findedProduct.parent) {\r\n      findParent(this.categoriesTree);\r\n    } else {\r\n      parentProduct = findedProduct;\r\n    }\r\n\r\n    if (findedProduct.parent) {\r\n      const index = parentProduct.children.findIndex(child => child.data.id === category.id);\r\n\r\n      if (direction === 'down') {\r\n        [parentProduct.children[index], parentProduct.children[index + 1]] = [parentProduct.children[index + 1], parentProduct.children[index]];\r\n      } else {\r\n        [parentProduct.children[index], parentProduct.children[index - 1]] = [parentProduct.children[index - 1], parentProduct.children[index]];\r\n      }\r\n    } else {\r\n      const index = this.categoriesTree.findIndex(node => node.data.id === category.id);\r\n\r\n      if (direction === 'down') {\r\n        [this.categoriesTree[index], this.categoriesTree[index + 1]] = [this.categoriesTree[index + 1], this.categoriesTree[index]];\r\n      } else {\r\n        [this.categoriesTree[index], this.categoriesTree[index - 1]] = [this.categoriesTree[index - 1], this.categoriesTree[index]];\r\n      }\r\n    }\r\n\r\n    this.categoriesTree = this.categoriesTree.map(node => node);\r\n  }\r\n\r\n  onCreateCategory() {\r\n    this.productStructureCategoryService.createEditCategory('create').subscribe(category => {\r\n      if (category) {\r\n        this.categories.unshift(category);\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditCategory() {\r\n    this.productStructureCategoryService.createEditCategory('edit', this.selectedCategory.data).subscribe(category => {\r\n      if (category) {\r\n        const index = this.categories.findIndex(t => t.id === this.selectedCategory.data.id);\r\n        this.categories[index] = category;\r\n        this.createTree();\r\n        this.selectedCategory = this.treeService.findSelectedNode(this.selectedCategory, this.categoriesTree);\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveCategory() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.productStructureCategoryService.delete(this.selectedCategory.data).subscribe(() => {\r\n          const index = this.categories.findIndex(t => t.id === this.selectedCategory.data.id);\r\n          this.categories.splice(index, 1);\r\n          this.selectedCategory = null;\r\n          this.createTree();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.categoriesTree = temp;\r\n    this.selectedCategory = null;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'product-structure'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Product Structure Categories</h1>\r\n    </div>\r\n\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Category\" (click)=\"onCreateCategory()\"></button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          [value]=\"categoriesTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedCategory\"\r\n          [scrollable]=\"true\"\r\n          scrollHeight=\"calc(100vh - 19.2rem)\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex align-items-center\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-arrow-up\"\r\n                class=\"p-button-rounded mr-2\"\r\n                [disabled]=\"!selectedCategory\"\r\n                [loading]=\"isMovingUp\"\r\n                (click)=\"up()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-arrow-down\"\r\n                class=\"p-button-rounded mr-2\"\r\n                [disabled]=\"!selectedCategory\"\r\n                [loading]=\"isMovingDown\"\r\n                (click)=\"down()\"\r\n              ></button>\r\n\r\n              <p class=\"subtitle ml-1 mr-2\" *ngIf=\"!selectedCategory\">Choose the Category to edit</p>\r\n              <p-menubar class=\"ml-auto mr-2\" [model]=\"menuItems\" [class.disabled]=\"!selectedCategory\"></p-menubar>\r\n\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-down\"\r\n                label=\"Expand All\"\r\n                class=\"mr-2\"\r\n                (click)=\"onExpandAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-up\"\r\n                label=\"Collapse All\"\r\n                (click)=\"onCollapseAll()\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 35%; padding-left: 52px\">Name</th>\r\n              <th style=\"width: 30%\">Unit of Measure</th>\r\n              <th style=\"width: 35%\">Description</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\">\r\n              <td style=\"width: 35%\">\r\n                <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                {{rowData.name}}\r\n              </td>\r\n              <td style=\"width: 30%\">\r\n                {{getMeasure(rowData.unit_of_measure)}}\r\n              </td>\r\n              <td style=\"width: 35%\">\r\n                <ng-container>\r\n                  {{rowData.description}}\r\n                </ng-container>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {NavigationLink} from '../../../layout/navigation-route';\r\n\r\n@Component({\r\n  selector: 'pek-product-structure-layout',\r\n  templateUrl: './product-structure-layout.component.html',\r\n  styleUrls: ['./product-structure-layout.component.scss']\r\n})\r\nexport class ProductStructureLayoutComponent implements OnInit {\r\n\r\n  routes: NavigationLink[] = [\r\n    {label: 'Products', commands: ['products']},\r\n    {label: 'Categories', commands: ['categories']},\r\n  ]\r\n\r\n  settingRoutes: NavigationLink[] = [\r\n    {label: 'Technologies', commands: ['technologies']},\r\n    {label: 'Prefixes', commands: ['prefixes']},\r\n    {label: 'Serial Number Types', commands: ['serial-types']},\r\n  ]\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'Product Structure'\"\r\n  [routes]=\"routes\"\r\n  [settingsRoutes]=\"settingRoutes\"\r\n></pek-header>\r\n<router-outlet></router-outlet>\r\n","import {AfterViewInit, Component, ElementRef, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {FormBuilder} from '@angular/forms';\r\nimport {Product} from '../../models/product';\r\nimport {Table} from 'primeng/table';\r\nimport {finalize, fromEvent, Subject, Subscription, takeUntil} from 'rxjs';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\nimport {cloneDeep} from 'lodash-es';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {MakeRootProductComponent} from '../../modals/make-root-product/make-root-product.component';\r\nimport {MakeProductionListComponent} from '../../modals/make-production-list/make-production-list.component';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {ENomenclatureType} from '@shared/models/nomenclature';\r\n\r\n@Component({\r\n  selector: 'pek-product-structure-product',\r\n  templateUrl: './product-structure-product.component.html',\r\n  styleUrls: ['./product-structure-product.component.scss']\r\n})\r\nexport class ProductStructureProductComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('dt') dt: Table;\r\n  @ViewChild('searchCodeInput') searchCodeInput: ElementRef;\r\n  @ViewChild('searchNameInput') searchNameInput: ElementRef;\r\n\r\n  productsTree: TreeNode<Product>[];\r\n  selectedProduct: TreeNode<Product> = null;\r\n  products: Product[];\r\n\r\n  isMovingUp = false;\r\n  isMovingDown = false;\r\n\r\n  menuItems: MenuItem[] = [\r\n    {\r\n      label: 'Selected Product',\r\n      items: [\r\n        {\r\n          label: 'Add Item',\r\n          icon: 'pi pi-plus',\r\n          disabled: true,\r\n          command: () => this.onAddProduct(),\r\n        },\r\n        {\r\n          label: 'Make Production List',\r\n          icon: 'pi pi-box',\r\n          command: () => this.onOpenMakeProductionList(),\r\n        },\r\n        {\r\n          label: 'Make Root',\r\n          icon: 'pi pi-globe',\r\n          disabled: true,\r\n          command: () => this.onOpenMakeRoot(),\r\n        },\r\n        {\r\n          label: 'Upload Structure',\r\n          icon: 'pi pi-upload',\r\n          command: () => this.onUploadProductStructure(),\r\n        },\r\n        {\r\n          label: 'Files',\r\n          icon: 'pi pi-file',\r\n          command: () => this.onShowFiles(),\r\n        },\r\n        {\r\n          label: 'Images',\r\n          icon: 'pi pi-images',\r\n          command: () => this.onShowGallery(),\r\n        },\r\n        {\r\n          label: 'Edit',\r\n          icon: 'pi pi-pencil',\r\n          command: () => this.onEditProduct(),\r\n        },\r\n        {\r\n          label: 'Copy',\r\n          icon: 'pi pi-clone',\r\n          command: () => this.onCopyProduct(),\r\n        },\r\n        {\r\n          label: 'Remove',\r\n          icon: 'pi pi-trash',\r\n          command: () => this.onDeleteProduct(),\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  expanseMap = {};\r\n  sorted = false;\r\n  isLoading = true;\r\n\r\n  productId = this.route.snapshot.paramMap.get('id');\r\n\r\n  inputCodeSub: Subscription;\r\n  inputNameSub: Subscription;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly route: ActivatedRoute,\r\n    private readonly productService: ProductService,\r\n    private readonly modalService: ModalService,\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialog: MatDialog,\r\n    private readonly router: Router,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getProducts();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputCodeSub = fromEvent(this.searchCodeInput.nativeElement, 'input')\r\n      .pipe(\r\n        map(() => this.searchCodeInput.nativeElement.value),\r\n        tap(value => this.filterProducts(value, 'code', 'contains')),\r\n        debounceTime(299),\r\n      ).subscribe((value) => {\r\n        if (!value) {\r\n          this.onCollapseAll();\r\n          return;\r\n        }\r\n\r\n        this.expandedFindProducts(value, 'code');\r\n      });\r\n\r\n    this.inputNameSub = fromEvent(this.searchNameInput.nativeElement, 'input')\r\n      .pipe(\r\n        map(() => this.searchNameInput.nativeElement.value),\r\n        tap(value => this.filterProducts(value, 'name', 'contains')),\r\n        debounceTime(299),\r\n      ).subscribe((value) => {\r\n        if (!value) {\r\n          this.onCollapseAll();\r\n          return;\r\n        }\r\n\r\n        this.expandedFindProducts(value, 'name');\r\n      });\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.productsTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.productsTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.productsTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.productsTree = temp;\r\n    this.selectedProduct = null;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  getProducts() {\r\n    if (this.productsTree) {\r\n      this.mapExpansion();\r\n    }\r\n\r\n    this.productService.getTree(Number(this.productId)).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(products => {\r\n        this.products = products;\r\n        if (!this.sorted) {\r\n          this.createTree();\r\n        } else {\r\n          this.sort();\r\n        }\r\n\r\n        this.isLoading = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  filterProducts(event: any, field: string, mode: string) {\r\n    this.dt.filter(event, `nomenclature.${field}`, mode);\r\n  }\r\n\r\n  expandedFindProducts(value: string, field: string) {\r\n    this.selectedProduct = null;\r\n\r\n    this.productsTree.forEach(parent => {\r\n      parent.children.forEach(product => {\r\n        if (product.data.nomenclature[field].toLowerCase().indexOf(value) >= 0) {\r\n          parent.expanded = true;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.productsTree) {\r\n      this.mapExpansion();\r\n    }\r\n\r\n    const dd = [];\r\n    this.products.forEach(element => {\r\n      const ins = {data: element, expanded: false};\r\n      if (this.expanseMap) {\r\n        ins.expanded = this.expanseMap[element.id];\r\n      }\r\n      dd.push(ins);\r\n    });\r\n    let root;\r\n    const idMapping = dd.reduce((acc, el, i) => {\r\n      acc[el.data.id] = i;\r\n      return acc;\r\n    }, {});\r\n    dd.forEach(el => {\r\n      if (el.data.parent === null) {\r\n        root = el;\r\n        return;\r\n      }\r\n      const parentEl = dd[idMapping[el.data.parent]];\r\n\r\n      parentEl.children = [...(parentEl.children || []), el];\r\n      if (parentEl.children.length === 0) {\r\n        delete parentEl.children;\r\n      }\r\n    });\r\n    root.expanded = true;\r\n    this.productsTree = [root];\r\n    if (this.selectedProduct) {\r\n      this.getSelected(this.productsTree[0]);\r\n    }\r\n  }\r\n\r\n  down() {\r\n    const node = this.selectedProduct;\r\n\r\n    let index;\r\n    node.parent.children.forEach((element, i) => {\r\n      if (element.data.id === node.data.id) {\r\n        index = i;\r\n      }\r\n    });\r\n\r\n    if (index < node.parent.children.length - 1 && !this.isMovingDown) {\r\n      this.isMovingDown = true;\r\n      const move = {\r\n        parent: node.parent.children[index + 1].data.id,\r\n        move_to: 'right'\r\n      };\r\n      this.productService.move(move, node.data.id).pipe(\r\n        finalize(() => this.isMovingDown = false)\r\n      ).subscribe(product => {\r\n\r\n        this.productMoved(product, 'down');\r\n      });\r\n    }\r\n  }\r\n\r\n  up() {\r\n    const node = this.selectedProduct;\r\n\r\n    let index;\r\n    node.parent.children.forEach((element, i) => {\r\n      if (element.data.id === node.data.id) {\r\n        index = i;\r\n      }\r\n    });\r\n\r\n    if (index > 0 && !this.isMovingUp) {\r\n      this.isMovingUp = true;\r\n      const move = {\r\n        parent: node.parent.children[index - 1].data.id,\r\n        move_to: 'left'\r\n      };\r\n      this.productService.move(move, node.data.id).pipe(\r\n        finalize(() => this.isMovingUp = false)\r\n      ).subscribe(product => {\r\n        this.productMoved(product, 'up');\r\n      });\r\n    }\r\n  }\r\n\r\n  productMoved(product: Product, direction: 'up' | 'down') {\r\n    let findedProduct: TreeNode<Product>;\r\n    let parentProduct: TreeNode<Product>;\r\n\r\n    const findProduct = (nodes: TreeNode<Product>[]) => {\r\n      nodes.forEach(node => {\r\n        if (node.data.id === product.id) {\r\n          findedProduct = node;\r\n        } else {\r\n          if (node.children && node.children.length > 0) {\r\n            findProduct(node.children);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    const findParent = (nodes: TreeNode<Product>[]) => {\r\n      nodes.forEach(node => {\r\n        if (node.data.id === findedProduct.parent.data.id) {\r\n          parentProduct = node;\r\n        } else {\r\n          if (node.children && node.children.length > 0) {\r\n            findParent(node.children);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    findProduct(this.productsTree);\r\n    findParent(this.productsTree);\r\n\r\n    const index = parentProduct.children.findIndex(child => child.data.id === product.id);\r\n\r\n    if (direction === 'down') {\r\n      [parentProduct.children[index], parentProduct.children[index + 1]] = [parentProduct.children[index + 1], parentProduct.children[index]];\r\n    } else {\r\n      [parentProduct.children[index], parentProduct.children[index - 1]] = [parentProduct.children[index - 1], parentProduct.children[index]];\r\n    }\r\n\r\n    this.productsTree = this.productsTree.map(node => node);\r\n  }\r\n\r\n  sort() {\r\n    this.sorted = true;\r\n    const sortType = {'0': 3, '1': 1, '2': 2};\r\n    this.products.sort((a, b) => sortType[a.nomenclature.type] - sortType[b.nomenclature.type]);\r\n    this.createTree();\r\n  }\r\n\r\n  mapExpansion() {\r\n    this.productsTree.forEach(element => {\r\n      this.createExpanseMap(element);\r\n    });\r\n  }\r\n\r\n  getSelected(node) {\r\n    if (node.data.id == this.selectedProduct.data.id) {\r\n      this.selectedProduct = node;\r\n    } else {\r\n      if (node.children) {\r\n        node.children.forEach(element => {\r\n          this.getSelected(element);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  createExpanseMap(node) {\r\n    if (node.expanded) {\r\n      this.expanseMap[node.data.id] = node.expanded;\r\n    } else {\r\n      this.expanseMap[node.data.id] = false;\r\n    }\r\n    if (node.children) {\r\n      node.children.forEach(element => {\r\n        this.createExpanseMap(element);\r\n      });\r\n    }\r\n  }\r\n\r\n  onSelectNode() {\r\n    if (this.selectedProduct) {\r\n      this.menuItems[0].items[0].disabled = !(this.selectedProduct.data.nomenclature.type === ENomenclatureType.ASSEMBLY || this.selectedProduct.data.parent === null);\r\n      this.menuItems[0].items[2].disabled = !(this.selectedProduct.data.nomenclature.type === ENomenclatureType.ASSEMBLY && this.selectedProduct.data.parent !== null);\r\n      this.menuItems[0].items[3].disabled = !(this.selectedProduct.data.nomenclature.type === ENomenclatureType.ASSEMBLY);\r\n    }\r\n  }\r\n\r\n  onOpenMakeRoot() {\r\n    this.dialog.open(MakeRootProductComponent, {\r\n      width: '36rem',\r\n      data: this.selectedProduct.data,\r\n      autoFocus: false,\r\n      enterAnimationDuration: '250ms',\r\n      panelClass: 'modal_visible'\r\n    });\r\n  }\r\n\r\n  onOpenMakeProductionList() {\r\n    this.dialog.open(MakeProductionListComponent, {\r\n      width: '36rem',\r\n      data: {nomenclature: this.selectedProduct.data.nomenclature, rootId: this.productsTree[0].data.nomenclature.id},\r\n      autoFocus: false,\r\n      enterAnimationDuration: '250ms',\r\n    });\r\n  }\r\n\r\n  onEditProduct() {\r\n    this.productService.editProductModal(this.selectedProduct.data).subscribe(product => {\r\n      if (product) {\r\n        this.getProducts();\r\n      }\r\n    });\r\n  }\r\n\r\n  onCopyProduct() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.productService.copyStructure({\r\n          nomenclature_id: this.selectedProduct.data.nomenclature.id,\r\n          parent_id: this.selectedProduct.data.parent,\r\n          name: this.selectedProduct.data.nomenclature.name\r\n        }).subscribe(products => {\r\n          if (products) {\r\n            this.getProducts();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onDeleteProduct() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.productService.delete(this.selectedProduct.data.id).subscribe(() => {\r\n          const removeChildren = (id: number) => {\r\n            const ids: number[] = this.products.filter(p => p.parent === id).map(p => p.id);\r\n            this.products = [...this.products.filter(p => p.parent !== id)];\r\n\r\n            ids.forEach(id => {\r\n              removeChildren(id);\r\n            });\r\n          };\r\n\r\n          removeChildren(this.selectedProduct.data.id);\r\n\r\n          const index = this.products.findIndex(p => p.id === this.selectedProduct.data.id);\r\n\r\n          if (index >= 0) {\r\n            if (!this.products[index].parent) {\r\n              this.router.navigate(['../../'], {relativeTo: this.route});\r\n            } else {\r\n              this.products.splice(index, 1);\r\n              this.selectedProduct = null;\r\n              this.createTree();\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onAddProduct() {\r\n    this.productService.addProductModal(this.selectedProduct.data.id).subscribe(products => {\r\n      if (products) {\r\n        console.log(products);\r\n        this.products = [...this.products, ...products];\r\n        // console.log(this.products);\r\n        // this.productsTree = [];\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n  onShowGallery() {\r\n    this.modalService.showImageGallery(this.selectedProduct.data.nomenclature.images).subscribe();\r\n  }\r\n\r\n  onUploadProductStructure() {\r\n    if (this.selectedProduct.data.nomenclature.type === ENomenclatureType.ASSEMBLY) {\r\n      this.productService.uploadProductStructureModal(this.selectedProduct.data.id, this.productId).subscribe(response => {\r\n        if (response) {\r\n          this.getProducts();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onShowFiles() {\r\n    this.productService.showProductFiles(+this.productId).subscribe();\r\n  }\r\n\r\n  drop(event) {\r\n    const parent = this.products.find(x => x.id === event.container.data);\r\n    const child = this.products.find(x => x.id === event.item.data);\r\n    if (child.parent !== null && child.id !== parent.id) {\r\n      if (parent.nomenclature.type === ENomenclatureType.ASSEMBLY || parent.parent === null) {\r\n        if (child.id !== parent.id) {\r\n          const product = {\r\n            id: child.id,\r\n            parent: parent.id,\r\n          };\r\n\r\n          this.productService.updatePartly(product).subscribe(product => {\r\n            this.getProducts();\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n    this.inputCodeSub.unsubscribe();\r\n    this.inputNameSub.unsubscribe();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'product-structure'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Product Structure ({{!isLoading ? productsTree[0].data.nomenclature.name : '...'}})</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <div class=\"p-input-icon-left mr-2\">\r\n        <i class=\"pi pi-search\"></i>\r\n        <input\r\n          #searchCodeInput\r\n          pInputText\r\n          type=\"text\"\r\n          class=\"input-fill\"\r\n          placeholder=\"Search by code\"\r\n        >\r\n      </div>\r\n      <div class=\"p-input-icon-left mr-2\">\r\n        <i class=\"pi pi-search\"></i>\r\n        <input\r\n          #searchNameInput\r\n          pInputText\r\n          type=\"text\"\r\n          class=\"input-fill\"\r\n          placeholder=\"Search by name\"\r\n        >\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          #dt\r\n          [value]=\"productsTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedProduct\"\r\n          [scrollable]=\"true\"\r\n          scrollHeight=\"calc(100vh - 19.2rem)\"\r\n          (onNodeSelect)=\"onSelectNode()\"\r\n          cdkDropListGroup\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex align-items-center\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-arrow-up\"\r\n                class=\"p-button-rounded mr-2\"\r\n                [disabled]=\"selectedProduct?.data.parent === null\"\r\n                [loading]=\"isMovingUp\"\r\n                (click)=\"up()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-arrow-down\"\r\n                class=\"p-button-rounded mr-2\"\r\n                [disabled]=\"selectedProduct?.data.parent === null\"\r\n                [loading]=\"isMovingDown\"\r\n                (click)=\"down()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-print\"\r\n                label=\"Print\"\r\n                class=\"mr-2\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-refresh\"\r\n                label=\"Sort\"\r\n                class=\"mr-2\"\r\n                (click)=\"sort()\"\r\n              ></button>\r\n              <p class=\"ml-1 subtitle\" *ngIf=\"!selectedProduct\">Choose the Product to edit</p>\r\n              <p-menubar\r\n                class=\"product-structure-bar ml-auto mr-2\"\r\n                [model]=\"menuItems\"\r\n                [class.disabled]=\"!selectedProduct\"\r\n              ></p-menubar>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-down\"\r\n                label=\"Expand All\"\r\n                class=\"mr-2\"\r\n                (click)=\"onExpandAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-up\"\r\n                label=\"Collapse All\"\r\n                (click)=\"onCollapseAll()\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 30%; padding-left: 40px\">Code</th>\r\n              <th style=\"width: 20%\">Name</th>\r\n              <th style=\"width: 7%\" class=\"text-center\">Quantity</th>\r\n              <th style=\"width: 6%\" class=\"text-center\">UOM</th>\r\n              <th style=\"width: 14%\" class=\"text-center\">Technologies</th>\r\n              <th style=\"width: 11%\" class=\"text-center\">Type</th>\r\n              <th style=\"width: 12%\" class=\"text-center\">Confirmation</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\">\r\n              <td\r\n                style=\"width: 30%\"\r\n                [ngStyle]=\"{'padding-left': rowNode.level * 0.5 + 'rem'}\"\r\n                [class.font-italic]=\"rowData.nomenclature.type !== '1'\"\r\n                (cdkDropListDropped)=\"drop($event)\"\r\n                [cdkDropListData]=\"rowData.id\"\r\n                cdkDropList\r\n              >\r\n                <div class=\"table-toggle\">\r\n                  <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                  <span\r\n                    cdkDrag\r\n                    [cdkDragData]=\"rowData.id\"\r\n                    class=\"drag-cursor\"\r\n                  >\r\n                    {{rowData.nomenclature.code}}\r\n                  </span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 20%\" [class.font-italic]=\"rowData.nomenclature.type !== '1'\">\r\n                <b *ngIf=\"rowData.nomenclature.has_technical_equipment\">(T)</b>\r\n                {{rowData.nomenclature.name}}</td>\r\n              <td\r\n                style=\"width: 7%\"\r\n                class=\"text-center\"\r\n                [class.font-italic]=\"rowData.nomenclature.type !== '1'\"\r\n              >\r\n                {{rowData.quantity}}\r\n              </td>\r\n              <td\r\n                style=\"width: 6%\"\r\n                class=\"text-center\"\r\n                [class.font-italic]=\"rowData.nomenclature.type !== '1'\"\r\n              >\r\n                <ng-container *ngIf=\"rowData.nomenclature.category; else symbol\">\r\n                  {{rowData.nomenclature.category.unit_of_measure?.symbol}}\r\n                </ng-container>\r\n              </td>\r\n              <td\r\n                style=\"width: 14%\"\r\n                class=\"text-center\"\r\n                [class.font-italic]=\"rowData.nomenclature.type !== '1'\"\r\n              >\r\n                <ng-container *ngIf=\"rowData.nomenclature.technologies.length > 0\">\r\n                  <ng-container *ngFor=\"let tech of rowData.nomenclature.technologies; let idx = index\">\r\n                    {{tech.name}}<span *ngIf=\"idx !== rowData.nomenclature.technologies.length - 1\">,</span>\r\n                  </ng-container>\r\n                </ng-container>\r\n              </td>\r\n              <td style=\"width: 11%\" class=\"text-center\">\r\n                <ng-container [ngSwitch]=\"rowData.nomenclature.type\">\r\n                  <span *ngSwitchCase=\"'0'\" class=\"font-italic\">Purchased</span>\r\n                  <span *ngSwitchCase=\"'2'\" class=\"font-italic\">Manufactured</span>\r\n                  <ng-container *ngSwitchCase=\"'1'\">Assembly</ng-container>\r\n                </ng-container>\r\n              </td>\r\n              <td\r\n                style=\"width: 12%\"\r\n                class=\"text-center\"\r\n                [class.font-italic]=\"rowData.nomenclature.type !== '1'\"\r\n              >\r\n                <ng-container *ngIf=\"rowData.nomenclature.type === '0'\">\r\n                  <ng-container [ngSwitch]=\"rowData.nomenclature.approved\">\r\n                    <span *ngSwitchCase=\"'0'\" class=\"text-warning\">NEW</span>\r\n                    <span *ngSwitchCase=\"'1'\" class=\"text-success\">APPROVED</span>\r\n                    <span *ngSwitchCase=\"'2'\" class=\"text-danger\">DECLINED</span>\r\n                  </ng-container>\r\n                </ng-container>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #symbol>Pcs</ng-template>\r\n","import {AfterViewInit, Component, ElementRef, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {Product} from '../../models/product';\r\nimport {forkJoin, fromEvent, Subject, Subscription, takeUntil} from 'rxjs';\r\nimport {cloneDeep} from 'lodash-es';\r\nimport {Table} from 'primeng/table';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {ProductStructureCategory} from '../../models/product-structure-category';\r\nimport {ProductStructureCategoryService} from '../../services/product-structure-category.service';\r\n\r\n@Component({\r\n  selector: 'pek-product-structure-products-list',\r\n  templateUrl: './product-structure-products-list.component.html',\r\n  styleUrls: ['./product-structure-products-list.component.scss']\r\n})\r\nexport class ProductStructureProductsListComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('dt') dt: Table;\r\n  @ViewChild('searchCodeInput') searchCodeInput: ElementRef;\r\n  @ViewChild('searchNameInput') searchNameInput: ElementRef;\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Product',\r\n    items: [\r\n      {\r\n        label: 'Structure',\r\n        icon: 'pi pi-table',\r\n        command: () => this.goToProductStructure(),\r\n      },\r\n      {\r\n        label: 'Copy',\r\n        icon: 'pi pi-clone',\r\n        command: () => this.onCopyProduct(),\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditProduct(),\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveProduct(),\r\n      }\r\n    ]\r\n  }];\r\n\r\n  productsTree: TreeNode<Product & ProductStructureCategory>[] = [];\r\n  categories: ProductStructureCategory[];\r\n  selectedNode: TreeNode<Product>;\r\n  products: Product[];\r\n\r\n  inputCodeSub: Subscription;\r\n  inputNameSub: Subscription;\r\n\r\n  isLoading = true;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly productService: ProductService,\r\n    private readonly router: Router,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly productStructureCategoryServices: ProductStructureCategoryService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getProductsAndCategories();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputCodeSub = fromEvent(this.searchCodeInput.nativeElement, 'input')\r\n      .pipe(\r\n        map(() => this.searchCodeInput.nativeElement.value),\r\n        tap(value => this.filterProducts(value, 'code', 'contains')),\r\n        debounceTime(299),\r\n      ).subscribe((value) => {\r\n        if (!value) {\r\n          this.onCollapseAll();\r\n          return;\r\n        }\r\n\r\n        this.expandedFindProducts(value, 'code');\r\n      });\r\n\r\n    this.inputNameSub = fromEvent(this.searchNameInput.nativeElement, 'input')\r\n      .pipe(\r\n        map(() => this.searchNameInput.nativeElement.value),\r\n        tap(value => this.filterProducts(value, 'name', 'contains')),\r\n        debounceTime(299),\r\n      ).subscribe((value) => {\r\n        if (!value) {\r\n          this.onCollapseAll();\r\n          return;\r\n        }\r\n\r\n        this.expandedFindProducts(value, 'name');\r\n      });\r\n  }\r\n\r\n  filterProducts(event: any, field: string, mode: string) {\r\n    this.dt.filter(event, `nomenclature.${field}`, mode);\r\n  }\r\n\r\n  expandedFindProducts(value: string, field: string) {\r\n    this.selectedNode = null;\r\n\r\n    this.productsTree.forEach(parent => {\r\n      parent.children.forEach(product => {\r\n        if (product.data.nomenclature[field].toLowerCase().indexOf(value) >= 0) {\r\n          parent.expanded = true;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getProductsAndCategories() {\r\n    forkJoin({\r\n      products: this.productService.getRoots(),\r\n      categories: this.productStructureCategoryServices.get()\r\n    }).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(({products, categories}) => {\r\n      this.products = products;\r\n      this.categories = categories;\r\n      this.createTreeCategories();\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTreeCategories() {\r\n    this.productsTree.unshift({\r\n      // @ts-ignore\r\n      data: {name: 'Not category'},\r\n      expanded: false,\r\n      parent: null,\r\n      children: []\r\n    });\r\n\r\n    this.categories.filter(category => !category.parent).forEach(category => {\r\n      this.productsTree.push({\r\n        data: category,\r\n        expanded: false,\r\n        parent: null,\r\n        children: []\r\n      });\r\n    });\r\n\r\n    const addChildrenCategories = (nodes: TreeNode<Product>[]) => {\r\n      nodes.forEach(node => {\r\n        const childrenCategories = this.categories.filter(category => category.parent === node.data.id);\r\n\r\n        if (childrenCategories.length > 0) {\r\n          node.children = childrenCategories.map(category => {\r\n            return {\r\n              data: category,\r\n              expanded: false,\r\n              parent: null,\r\n              children: [],\r\n            };\r\n          });\r\n        }\r\n\r\n        if (node.children.length > 0) {\r\n          addChildrenCategories(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    addChildrenCategories(this.productsTree);\r\n  }\r\n\r\n  clearTree() {\r\n    const clear = (nodes: TreeNode<Product & ProductStructureCategory>[]) => {\r\n      nodes.forEach(node => {\r\n        node.children = [...node.children.filter(child => child.data.tree_id)];\r\n\r\n        clear(node.children);\r\n      });\r\n    };\r\n\r\n    clear(this.productsTree);\r\n  }\r\n\r\n  createTree() {\r\n    this.clearTree();\r\n\r\n    const addProductsToTree = (nodes: TreeNode<Product>[]) => {\r\n      nodes.forEach(node => {\r\n        const products = this.products.filter(p => p.nomenclature.root_category?.id === node.data.id);\r\n\r\n        node.children = [...node.children, ...products.map(product => {\r\n          return {\r\n            data: product,\r\n            expanded: false,\r\n            parent: null,\r\n            children: [],\r\n          };\r\n        })];\r\n\r\n        addProductsToTree(node.children);\r\n      });\r\n    };\r\n\r\n    this.productsTree = [...this.productsTree];\r\n\r\n    addProductsToTree(this.productsTree);\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.productsTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.productsTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.productsTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.productsTree = temp;\r\n    this.selectedNode = null;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  onRemoveProduct() {\r\n    const product: Product = this.selectedNode.data;\r\n\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.productService.delete(product.id).subscribe(() => {\r\n          this.selectedNode = null;\r\n          const index = this.products.findIndex(p => p.id === product.id);\r\n          this.products.splice(index, 1);\r\n          this.createTree();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreateProduct() {\r\n    this.productService.createEditRootProduct('create').subscribe(product => {\r\n      if (product) {\r\n        this.products.unshift(<Product>product);\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditProduct() {\r\n    const product = {...<Product>this.selectedNode.data};\r\n    this.productService.createEditRootProduct('edit', product).subscribe(nomenclature => {\r\n      if (nomenclature) {\r\n        const index = this.products.findIndex(p => p.nomenclature.id === nomenclature.id);\r\n\r\n        if (index !== -1) {\r\n          this.products[index].nomenclature = nomenclature;\r\n          this.createTree();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onCopyProduct() {\r\n    const product = <Product>this.selectedNode.data;\r\n    this.productService.createEditRootProduct('copy', product).subscribe(products => {\r\n      if (products) this.updateProducts();\r\n    });\r\n  }\r\n\r\n  //    \r\n  updateProducts() {\r\n    this.productService.getRoots().subscribe(products => {\r\n      this.products = products;\r\n      this.createTree();\r\n    });\r\n  }\r\n\r\n  goToProductStructure() {\r\n    this.router.navigate(['structure', this.selectedNode.data.id], {relativeTo: this.route}).then();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.inputCodeSub.unsubscribe();\r\n    this.inputNameSub.unsubscribe();\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'product-structure'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Products</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <div class=\"p-input-icon-left mr-2\">\r\n        <i class=\"pi pi-search\"></i>\r\n        <input\r\n          #searchCodeInput\r\n          pInputText\r\n          type=\"text\"\r\n          class=\"input-fill\"\r\n          placeholder=\"Search by code\"\r\n        >\r\n      </div>\r\n      <div class=\"p-input-icon-left mr-2\">\r\n        <i class=\"pi pi-search\"></i>\r\n        <input\r\n          #searchNameInput\r\n          pInputText\r\n          type=\"text\"\r\n          class=\"input-fill\"\r\n          placeholder=\"Search by name\"\r\n        >\r\n      </div>\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Product\" (click)=\"onCreateProduct()\"></button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          #dt\r\n          [value]=\"productsTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedNode\"\r\n          [scrollable]=\"true\"\r\n          scrollHeight=\"calc(100vh - 19.2rem)\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedNode\">Choose the Product to edit</p>\r\n              <p-menubar class=\"ml-auto mr-2\" [model]=\"menuItems\" [class.disabled]=\"!selectedNode\"></p-menubar>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-down\"\r\n                label=\"Expand All\"\r\n                class=\"mr-2\"\r\n                (click)=\"onExpandAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-up\"\r\n                label=\"Collapse All\"\r\n                (click)=\"onCollapseAll()\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 35%; padding-left: 48px\">Code</th>\r\n              <th style=\"width: 35%\">Name</th>\r\n              <th style=\"width: 30%\">Description</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr\r\n              [ttRow]=\"rowNode\"\r\n              [ttSelectableRow]=\"rowNode\"\r\n              [ttSelectableRowDisabled]=\"!rowData.nomenclature\"\r\n              [class.disabled]=\"!rowData.nomenclature\"\r\n            >\r\n              <td style=\"width: 35%\">\r\n                <div class=\"table-toggle\">\r\n                  <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                  <ng-container *ngIf=\"!rowData.nomenclature\">\r\n                  <span class=\"category-name\">{{rowData.name}}\r\n                  </span>\r\n                  </ng-container>\r\n                  {{rowData.nomenclature?.code}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 35%\">\r\n                {{rowData.nomenclature?.name}}\r\n              </td>\r\n              <td style=\"width: 30%\">\r\n                {{rowData.nomenclature?.description}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {TechnologyService} from '../../services/technology.service';\r\nimport {Technology} from '../../models/technology';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-technologies',\r\n  templateUrl: './technologies.component.html',\r\n  styleUrls: ['./technologies.component.scss']\r\n})\r\nexport class TechnologiesComponent implements OnInit, OnDestroy {\r\n  technologies: Technology[] = [];\r\n  selectedTechnology: Technology;\r\n  isLoading = true;\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Technology',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditTechnology()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveTechnology()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private technologyService: TechnologyService,\r\n    public modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getTechnologies();\r\n  }\r\n\r\n  getTechnologies() {\r\n    this.technologyService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(technologies => {\r\n      this.technologies = technologies;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onAddTechnology() {\r\n    this.technologyService.createEditTechnology('create').subscribe(technology => {\r\n      if (technology) {\r\n        this.technologies.unshift(technology);\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditTechnology() {\r\n    this.technologyService.createEditTechnology('edit', this.selectedTechnology).subscribe(technology => {\r\n      if (technology) {\r\n        const index = this.technologies.findIndex(t => t.id === this.selectedTechnology.id);\r\n        this.technologies[index] = technology;\r\n        this.selectedTechnology = this.technologies[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveTechnology() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.technologyService.delete(this.selectedTechnology).subscribe(() => {\r\n          const index = this.technologies.findIndex(t => t.id === this.selectedTechnology.id);\r\n          this.technologies.splice(index, 1);\r\n          this.selectedTechnology = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'product-structure'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Technologies</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Technology\" (click)=\"onAddTechnology()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"technologies.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedTechnology\"\r\n        [value]=\"technologies\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedTechnology\">Choose the Technology to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedTechnology\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 30%\">Name</th>\r\n            <th style=\"width: 50%\">Description</th>\r\n            <th class=\"text-center\" style=\"width: 15%\">Type</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-technology let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"technology\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 30%\">{{technology.name}}</td>\r\n            <td style=\"width: 50%\">{{technology.description}}</td>\r\n            <td class=\"text-center\" style=\"width: 15%\">\r\n              <ng-container [ngSwitch]=\"technology.service_or_material\">\r\n                <span *ngSwitchCase=\"'0'\">\r\n                  Service\r\n                </span>\r\n                <span *ngSwitchCase=\"'1'\">\r\n                  Material\r\n                </span>\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && technologies.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {SerialType} from '../../models/serial-type';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {SerialTypeService} from '../../services/serial-type.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-serial-types',\r\n  templateUrl: './warehouse-serial-types.component.html',\r\n  styleUrls: ['./warehouse-serial-types.component.scss']\r\n})\r\nexport class WarehouseSerialTypesComponent implements OnInit {\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Serial Type',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditSerialType()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveSerialType()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  isLoading = true;\r\n  serialTypes: SerialType[] = [];\r\n  selectedSerialType: SerialType;\r\n\r\n  constructor(\r\n    private serialTypeService: SerialTypeService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getSerialTypes();\r\n  }\r\n\r\n  getSerialTypes() {\r\n    this.serialTypeService.get().subscribe(serialTypes => {\r\n      this.serialTypes = serialTypes;\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  onEditSerialType() {\r\n    this.serialTypeService.createEditSerialTypeModal('edit', this.selectedSerialType).subscribe(serialTypes => {\r\n      if (serialTypes) {\r\n        const index = this.serialTypes.findIndex(t => t.id === this.selectedSerialType.id);\r\n        this.serialTypes[index] = serialTypes;\r\n        this.selectedSerialType = this.serialTypes[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveSerialType() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.serialTypeService.delete(this.selectedSerialType).subscribe(() => {\r\n          const index = this.serialTypes.findIndex(w => w.id === this.selectedSerialType.id);\r\n          this.serialTypes.splice(index, 1);\r\n          this.selectedSerialType = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onAddSerialType() {\r\n    this.serialTypeService.createEditSerialTypeModal('create').subscribe(serialType => {\r\n      if (serialType) {\r\n        this.serialTypes.unshift(serialType);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Serial Number Types</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Serial Type\" (click)=\"onAddSerialType()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"serialTypes.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedSerialType\"\r\n        [value]=\"serialTypes\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedSerialType\">Choose the Serial Type to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedSerialType\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n            <th style=\"width: 35%\">Name</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Prefix</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Start Number</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Suffix</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-type let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"type\">\r\n            <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 35%\">{{type.name}}</td>\r\n            <td style=\"width: 20%\" class=\"text-center\">{{type.prefix}}</td>\r\n            <td style=\"width: 20%\" class=\"text-center\">{{type.start_number}}</td>\r\n            <td style=\"width: 20%\" class=\"text-center\">{{type.suffix}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && serialTypes.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {AfterViewInit, Component, Inject, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ENomenclatureApproval, ENomenclatureType, Nomenclature, NomenclatureImage} from '@shared/models/nomenclature';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {finalize, fromEvent, Subject, Subscription, takeUntil} from 'rxjs';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\nimport {Category} from '../../models/category';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {Table} from 'primeng/table';\r\nimport {Product} from '../../models/product';\r\n\r\n@Component({\r\n  selector: 'pek-add-product',\r\n  templateUrl: './add-product.component.html',\r\n  styleUrls: ['./add-product.component.scss']\r\n})\r\nexport class AddProductComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n  @ViewChild('dt') table: Table;\r\n\r\n  isCreateFormInvalid: boolean = true;\r\n  createFormValue: Partial<Nomenclature & Product>;\r\n\r\n  mode: 'add' | 'create' = 'add';\r\n\r\n  inputCodeSub: Subscription;\r\n  inputNameSub: Subscription;\r\n\r\n  isStartOnePage = false;\r\n  isSelectNomenclature = false;\r\n  isLoading = false;\r\n  isSaving = false;\r\n\r\n  nomenclatures: Nomenclature[] = [];\r\n  countNomenclatures = 0;\r\n\r\n  selectedNomenclature: Nomenclature = null;\r\n\r\n  nomenclatureType = ENomenclatureType;\r\n  nomenclatureApproval = ENomenclatureApproval;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    page: [1],\r\n    name: [''],\r\n    code: [''],\r\n    category: [''],\r\n    type: [null],\r\n  });\r\n\r\n  sendForm: FormGroup = this.fb.group({\r\n    quantity: [1, [Validators.min(1), Validators.required]],\r\n  });\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n    {name: 'paginated', value: true}\r\n  ];\r\n\r\n  queryKey = 'name:/code:/category:';\r\n\r\n  newProduct: Partial<Product> = {\r\n    nomenclature: {\r\n      id: null,\r\n      category: null,\r\n      technologies: [],\r\n      images: [],\r\n      type: null,\r\n    }\r\n  };\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<AddProductComponent>,\r\n    private readonly productService: ProductService,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    public readonly adapterService: AdapterService,\r\n    @Inject(MAT_DIALOG_DATA) private parentId: number,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    this.inputNameSub = fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedNomenclature = null),\r\n        map(() => this.searchBoxName.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n        this.searchNomenclatures();\r\n      });\r\n\r\n    this.inputCodeSub = fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedNomenclature = null),\r\n        map(() => this.searchBoxCode.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n        this.searchNomenclatures();\r\n      });\r\n  }\r\n\r\n  getNomenclatures() {\r\n    this.nomenclatureService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatures = nomenclatures.results;\r\n      this.countNomenclatures = nomenclatures.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  choiceType(type: ENomenclatureType) {\r\n    this.searchForm.get('type').patchValue(type);\r\n\r\n    this.query.push({\r\n      name: 'type',\r\n      value: this.searchForm.get('type').value\r\n    });\r\n\r\n    this.newProduct.nomenclature.type = type;\r\n\r\n    this.isSelectNomenclature = true;\r\n    this.isLoading = true;\r\n    this.dialogRef.updateSize('92rem', 'auto');\r\n\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  searchNomenclatures() {\r\n\r\n    this.destroy$.next(true);\r\n    this.isLoading = true;\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}/category:${this.searchForm.get('category').value}`;\r\n\r\n    //    ,   1 \r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.searchForm.get('page').value},\r\n      {name: 'paginated', value: true},\r\n      {name: 'type', value: this.searchForm.get('type').value}\r\n    ];\r\n\r\n    if (this.searchForm.get('name').value) {\r\n      this.query.push({name: 'name', value: this.searchForm.get('name').value});\r\n    }\r\n\r\n    if (this.searchForm.get('code').value) {\r\n      this.query.push({name: 'code', value: encodeURIComponent(this.searchForm.get('code').value)});\r\n    }\r\n\r\n    if (this.searchForm.get('category').value) {\r\n      this.query.push({name: 'category', value: this.searchForm.get('category').value});\r\n    }\r\n\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (this.searchForm.get('page').value !== evt.page + 1 && !this.isStartOnePage) {\r\n      this.selectedNomenclature = null;\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchNomenclatures();\r\n    }\r\n  }\r\n\r\n  onAddProduct() {\r\n    this.isSaving = true;\r\n\r\n    const send: any = {\r\n      nomenclature: this.selectedNomenclature.id,\r\n      parent: this.parentId,\r\n      quantity: this.sendForm.get('quantity').value,\r\n    };\r\n\r\n    this.productService.addProduct(send)\r\n      .pipe(finalize(() => this.isSaving = false))\r\n      .subscribe(products => {\r\n        this.dialogRef.close(products);\r\n      });\r\n  }\r\n\r\n  choiceCategory(category: Category) {\r\n    if (category) {\r\n      this.searchForm.get('category').patchValue(category.name);\r\n    } else {\r\n      this.searchForm.get('category').patchValue('');\r\n    }\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  resetSendForm() {\r\n    this.sendForm.get('quantity').patchValue(1);\r\n  }\r\n\r\n  onOpenLink(description: string) {\r\n    window.open(description, '_blank');\r\n    this.selectedNomenclature = null;\r\n    this.table.expandedRowKeys = {};\r\n    this.resetSendForm();\r\n  }\r\n\r\n  onChangeMode(mode: 'add' | 'create') {\r\n    this.mode = mode;\r\n\r\n    if (this.searchForm.get('type').value === ENomenclatureType.PURCHASED) {\r\n      this.dialogRef.updateSize('50rem', 'auto');\r\n    } else {\r\n      this.dialogRef.updateSize('60rem', 'auto');\r\n    }\r\n\r\n    this.dialogRef.removePanelClass('modal-picker');\r\n    this.dialogRef.addPanelClass('modal-overflow-visible');\r\n  }\r\n\r\n  onChangeFormValue(data: { invalid: boolean, formValue: Partial<Product & Nomenclature> }) {\r\n    this.createFormValue = data.formValue;\r\n    this.isCreateFormInvalid = data.invalid;\r\n  }\r\n\r\n  onCreateProduct() {\r\n    if (!this.isCreateFormInvalid) {\r\n      this.isSaving = true;\r\n\r\n      const send: Partial<Nomenclature> = {\r\n        name: this.createFormValue.name,\r\n        code: this.createFormValue.code,\r\n        description: this.createFormValue.description,\r\n        type: this.createFormValue.type,\r\n        bulk_or_serial: this.createFormValue.bulk_or_serial\r\n      };\r\n\r\n      if (this.createFormValue.type === ENomenclatureType.PURCHASED) {\r\n        send.category = this.createFormValue.category;\r\n        delete send.code;\r\n      } else {\r\n        send.technologies = [...this.createFormValue.technologies];\r\n        send.category = null;\r\n      }\r\n\r\n      this.nomenclatureService.create(send).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(nomenclature => {\r\n        this.isSaving = true;\r\n\r\n        const send = [];\r\n\r\n        if (this.newProduct.nomenclature.images.length > 0) {\r\n          this.newProduct.nomenclature.images.forEach(file => {\r\n            send.push({\r\n              nomenclature: nomenclature.id,\r\n              image: file.file,\r\n            });\r\n          });\r\n\r\n          this.nomenclatureService.uploadImagesSeveral(send).pipe(\r\n            finalize(() => this.isSaving = false)\r\n          ).subscribe(images => {\r\n            this.isSaving = true;\r\n            this.addProduct(nomenclature.id, this.createFormValue.quantity, images);\r\n          });\r\n        } else {\r\n          this.isSaving = true;\r\n          this.addProduct(nomenclature.id, this.createFormValue.quantity, []);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  addProduct(id: number, quantity: number, images: NomenclatureImage[]) {\r\n    const send: Partial<Product> = {\r\n      // @ts-ignore\r\n      nomenclature: id,\r\n      parent: this.parentId,\r\n      quantity,\r\n    };\r\n    this.productService.addProduct(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(products => {\r\n      products[0].nomenclature.images = [...images];\r\n      this.dialogRef.close(products);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.inputNameSub.unsubscribe();\r\n    this.inputCodeSub.unsubscribe();\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  onRemoveImage(idx: number) {\r\n    this.newProduct.nomenclature.images.splice(idx, 1);\r\n  }\r\n\r\n  onUploadImage(files: File[]) {\r\n    files.forEach(file => {\r\n      const fileReader = new FileReader();\r\n\r\n      fileReader.onload = (fileLoadedEvent) => {\r\n        const srcData = fileLoadedEvent.target.result;\r\n\r\n        const newImage: NomenclatureImage = {\r\n          file,\r\n          image: srcData,\r\n          id: null\r\n        };\r\n\r\n        this.newProduct.nomenclature.images.push(newImage);\r\n      };\r\n\r\n      fileReader.readAsDataURL(file);\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        {{mode === 'add' ? 'Add' : 'Create'}} new Position\r\n        <ng-container *ngIf=\"mode === 'create'\">\r\n          <span\r\n            class=\"hint\"\r\n            pTooltip=\"To paste the image, copy it and press Ctrl + V\"\r\n            tooltipPosition=\"top\"\r\n          >\r\n            <i>?</i>\r\n          </span>\r\n        </ng-container>\r\n      </h2>\r\n\r\n      <p *ngIf=\"mode === 'add' && this.searchForm.get('type').value\">\r\n        Please search the Item from Catalogue (If not found Create a New Position)\r\n      </p>\r\n    </div>\r\n\r\n    <div\r\n      class=\"ml-auto\"\r\n      *ngIf=\"mode === 'add' && this.searchForm.get('type').value\"\r\n    >\r\n      <button\r\n        pButton\r\n        label=\"Or create New Position\"\r\n        icon=\"pi pi-plus\"\r\n        type=\"button\"\r\n        (click)=\"onChangeMode('create')\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n  <ng-container *ngIf=\"mode === 'add'\">\r\n    <div class=\"form\" [class.hide]=\"!searchForm.get('type').value\">\r\n      <form [formGroup]=\"searchForm\">\r\n        <div\r\n          class=\"form-box\"\r\n          [class.form-box_2]=\"this.searchForm.get('type').value !== nomenclatureType.PURCHASED\"\r\n          [class.form-box_3]=\"this.searchForm.get('type').value === nomenclatureType.PURCHASED\"\r\n        >\r\n          <div class=\"form-group\">\r\n            <label for=\"code\">Code</label>\r\n            <input type=\"text\" id=\"code\" pInputText formControlName=\"code\" #searchBoxCode>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Name</label>\r\n            <input type=\"text\" id=\"name\" pInputText formControlName=\"name\" #searchBoxName>\r\n          </div>\r\n          <div class=\"form-group\" *ngIf=\"this.searchForm.get('type').value === nomenclatureType.PURCHASED\">\r\n            <label>Categories</label>\r\n            <pek-product-category-picker (choiceCategory)=\"choiceCategory($event)\"></pek-product-category-picker>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <ng-container *ngIf=\"mode === 'add'\">\r\n    <ng-container *ngIf=\"searchForm.get('type').value; else selectionType\">\r\n      <div class=\"table-pagination-preloader\">\r\n        <p-table\r\n          #dt\r\n          (onRowExpand)=\"resetSendForm()\"\r\n          [value]=\"nomenclatures\"\r\n          [(selection)]=\"selectedNomenclature\"\r\n          [rows]=\"10\"\r\n          dataKey=\"id\"\r\n          selectionMode=\"single\"\r\n          rowExpandMode=\"single\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 7%\" class=\"text-center\">#</th>\r\n              <th style=\"width: 25%\">Code</th>\r\n              <th style=\"width: 25%\">Name</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">UOM</th>\r\n              <th style=\"width: 33%\">Description</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"product\" [pRowToggler]=\"product\">\r\n              <td style=\"width: 7%\" class=\"text-center\">{{(this.searchForm.get('page').value - 1) * 10 + i + 1}}</td>\r\n              <td style=\"width: 25%\">{{product.code}}</td>\r\n              <td style=\"width: 25%\">\r\n                <ng-container\r\n                  *ngIf=\"product.approved === nomenclatureApproval.NEW && product.type === nomenclatureType.PURCHASED\">\r\n                  <span class=\"badge badge_warning \">NEW</span>\r\n                </ng-container>\r\n                {{product.name}}\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                {{product.category?.unit_of_measure?.symbol ? product.category?.unit_of_measure?.symbol : 'Pcs' }}\r\n              </td>\r\n              <td style=\"width: 33%\" class=\"word-break\" [pRowToggler]=\"product\">\r\n                <a\r\n                  *ngIf=\"adapterService.isValidHttpUrl(product.description); else productDescription\"\r\n                  (click)=\"onOpenLink(product.description)\"\r\n                  target=\"_blank\"\r\n                >\r\n                  {{product.description}}\r\n                </a>\r\n\r\n                <ng-template #productDescription>\r\n                  {{product.description}}\r\n                </ng-template>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"rowexpansion\">\r\n            <tr class=\"disabled\">\r\n              <td colspan=\"5\">\r\n                <form [formGroup]=\"sendForm\">\r\n                  <div class=\"form-group\">\r\n                    <label for=\"quantity\">Quantity (Quantity can't be less than one)</label>\r\n                    <input id=\"quantity\" min=\"1\" class=\"form-control\" type=\"number\" pInputText\r\n                           formControlName=\"quantity\">\r\n                  </div>\r\n                </form>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-3\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n\r\n        <div class=\"pagination-preloader\" *ngIf=\"isLoading\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"mode === 'create'\">\r\n    <pek-create-edit-form\r\n      [product]=\"newProduct\"\r\n      (formChange)=\"onChangeFormValue($event)\"\r\n      (uploadImage)=\"onUploadImage($event)\"\r\n      (removeImage)=\"onRemoveImage($event)\"\r\n      type=\"create\"\r\n    ></pek-create-edit-form>\r\n  </ng-container>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n\r\n  <ng-container *ngIf=\"mode === 'add'\">\r\n    <p-paginator\r\n      #paginator\r\n      [class.hide]=\"countNomenclatures === 0\"\r\n      [rows]=\"10\"\r\n      [totalRecords]=\"countNomenclatures\"\r\n      (onPageChange)=\"paginate($event)\"\r\n    >\r\n    </p-paginator>\r\n    <button\r\n      *ngIf=\"searchForm.get('type').value\"\r\n      pButton\r\n      type=\"button\"\r\n      label=\"Add\"\r\n      class=\"p-button-success\"\r\n      [disabled]=\"!selectedNomenclature || sendForm.invalid\"\r\n      [loading]=\"isSaving\"\r\n      (click)=\"onAddProduct()\"\r\n    ></button>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"mode === 'create'\">\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      label=\"Create\"\r\n      class=\"p-button-success\"\r\n      [disabled]=\"isCreateFormInvalid\"\r\n      [loading]=\"isSaving\"\r\n      (click)=\"onCreateProduct()\"\r\n    ></button>\r\n  </ng-container>\r\n\r\n</mat-dialog-actions>\r\n\r\n<ng-template #selectionType>\r\n  <div class=\"add-product\">\r\n    <h3>Please select the type of new position</h3>\r\n\r\n    <div class=\"add-product__buttons\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Purchased\"\r\n        (click)=\"choiceType(nomenclatureType.PURCHASED)\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Assembly\"\r\n        (click)=\"choiceType(nomenclatureType.ASSEMBLY)\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Manufactured\"\r\n        (click)=\"choiceType(nomenclatureType.MANUFACTURED)\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Inject, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Category} from '../../models/category';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {debounceTime} from 'rxjs/operators';\r\nimport {Technology} from '../../models/technology';\r\n\r\n@Component({\r\n  selector: 'pek-add-technical-equipment',\r\n  templateUrl: './add-technical-equipment.component.html',\r\n  styleUrls: ['./add-technical-equipment.component.scss']\r\n})\r\nexport class AddTechnicalEquipmentComponent implements OnInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  selectedNomenclature: Nomenclature;\r\n  nomenclatures: Nomenclature[] = [];\r\n  countNomenclatures: number = 0;\r\n  technologies: Technology[] = [];\r\n\r\n  tableScrollHeight = '29.75rem';\r\n\r\n  isShowAll = false;\r\n  isLoading = false;\r\n  isStartOnePage = false;\r\n\r\n  form = this.fb.group({\r\n    code: [''],\r\n    name: [''],\r\n    category: [null],\r\n    root_categories: [null],\r\n    page: [1],\r\n  });\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.form.get('page').value},\r\n    {name: 'paginated', value: true}\r\n  ];\r\n\r\n  sendForm: FormGroup = this.fb.group({\r\n    quantity: [1, [Validators.min(1), Validators.required]],\r\n    technology: [null, Validators.required]\r\n  });\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private nomenclatureService: NomenclatureService,\r\n    private readonly dialogRef: MatDialogRef<AddTechnicalEquipmentComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { nomenclatureId: number, technologies: Technology[] }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.technologies = this.data.technologies;\r\n    console.log('this.technologies', this.technologies);\r\n    this.form.valueChanges.pipe(takeUntil(this.destroy$), debounceTime(50)).subscribe(res => {\r\n      this.searchNomenclature();\r\n    });\r\n  }\r\n\r\n  onSelected() {\r\n    const technicalEquipment = {\r\n      id: this.selectedNomenclature.id,\r\n      code: this.selectedNomenclature.code,\r\n      name: this.selectedNomenclature.name,\r\n    }\r\n    const send: any = {\r\n      id: null,\r\n      nomenclature_in_use: technicalEquipment,\r\n      quantity: this.sendForm.get('quantity').value,\r\n      technology: {id: this.sendForm.get('technology').value},\r\n    };\r\n    this.dialogRef.close(send);\r\n  }\r\n\r\n  searchNomenclature() {\r\n    this.query = [];\r\n    if (!this.isShowAll) {\r\n      this.query = [\r\n        {name: 'paginated', value: 'true'},\r\n        {name: 'page', value: this.form.get('page').value},\r\n      ];\r\n    }\r\n\r\n    if (this.form.get('code').value) this.query.push({name: 'code', value: this.form.get('code').value});\r\n    if (this.form.get('name').value) this.query.push({name: 'name', value: this.form.get('name').value});\r\n    if (this.form.get('category').value) this.query.push({name: 'category', value: this.form.get('category').value});\r\n    if (this.form.get('root_categories').value) this.query.push({name: 'root_categories', value: this.form.get('root_categories').value});\r\n\r\n    if (!this.isShowAll) {\r\n      this.getNomenclaturesForPagination();\r\n    } else {\r\n      this.form.get('page').patchValue(1);\r\n      this.getNomenclatures();\r\n    }\r\n  }\r\n\r\n  getNomenclaturesForPagination() {\r\n    this.nomenclatureService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(response => {\r\n      response.results.forEach((product: any, idx) => {\r\n\r\n      this.nomenclatures = response.results;\r\n      this.countNomenclatures = response.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n\r\n      this.isLoading = false;\r\n    });\r\n  });\r\n  }\r\n\r\n  getNomenclatures() {\r\n    this.nomenclatureService.get(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(response => {\r\n\r\n      this.nomenclatures = response;\r\n      this.countNomenclatures = response.length;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectNomenclatureStructureCategory(ids: number[]) {\r\n    if (ids) {\r\n      this.form.get('root_categories').patchValue(ids.join(','));\r\n    } else {\r\n      this.form.get('root_categories').patchValue('');\r\n    }\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    if (category) {\r\n      this.form.get('category').patchValue(category.id);\r\n    } else {\r\n      this.form.get('category').patchValue(null);\r\n    }\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.form.get('page').patchValue(evt.page + 1);\r\n      this.searchNomenclature();\r\n    }\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.setTableScrollHeight();\r\n    this.searchNomenclature();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.setTableScrollHeight();\r\n    this.searchNomenclature();\r\n  }\r\n\r\n  setTableScrollHeight() {\r\n    if (this.isShowAll) {\r\n      this.tableScrollHeight = '27.5rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isShowAll) {\r\n      this.tableScrollHeight = '29.75rem';\r\n      return;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  changedSelection() {\r\n  }\r\n\r\n  technologySelected(technologyId: number) {\r\n    this.sendForm.get('technology').setValue(technologyId);\r\n    console.log('technologySelected', technologyId);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Pick Nomenclature\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form class=\"d-flex\" [formGroup]=\"form\">\r\n    <div class=\"side-categories form-group\">\r\n      <pek-categories-tree-picker [isModal]=\"true\" (categorySelected)=\"onSelectCategory($event)\"></pek-categories-tree-picker>\r\n    </div>\r\n    <div class=\"right-side\">\r\n      <div class=\"row\">\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Code</label>\r\n            <input class=\"form-control\" formControlName=\"code\" pInputText #searchBoxCode>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input class=\"form-control\" formControlName=\"name\" pInputText #searchBoxName>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Product Structure Category</label>\r\n            <pek-product-structure-category-picker\r\n              [isAllIds]=\"true\"\r\n              (choiceCategoryFolAllIds)=\"onSelectNomenclatureStructureCategory($event)\"\r\n            ></pek-product-structure-category-picker>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <div class=\"table-pagination-preloader\">\r\n          <p-table\r\n            #dt\r\n            class=\"nomenclature-picker\"\r\n            selectionMode=\"single\"\r\n            rowExpandMode=\"single\"\r\n            dataKey=\"id\"\r\n            [scrollable]=\"true\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedNomenclature\"\r\n            [value]=\"nomenclatures\"\r\n            (selectionChange)=\"changedSelection()\"\r\n          >\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n                <th style=\"width: 23.75%\">Code</th>\r\n                <th style=\"width: 23.75%\">Name</th>\r\n                <th class=\"text-center\" style=\"width: 23.75%\">UOM</th>\r\n                <th class=\"text-center\" style=\"width: 23.75%\">Category</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"nomenclature\" [pRowToggler]=\"nomenclature\">\r\n                <td style=\"width: 5%\" class=\"text-center\">\r\n                  {{(this.form.get('page').value - 1) * 10 + i + 1}}\r\n                </td>\r\n                <td style=\"width: 23.75%\">\r\n                  {{nomenclature.code}}\r\n                </td>\r\n                <td style=\"width: 23.75%\">\r\n                  <b *ngIf=\"nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n                  {{nomenclature.name}}\r\n                </td>\r\n                <td style=\"width: 23.75%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"nomenclature.category || nomenclature.root_category\">\r\n                    <ng-container *ngIf=\"nomenclature.category\">\r\n                      {{nomenclature.category?.unit_of_measure?.symbol ? nomenclature.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"nomenclature.root_category\">\r\n                      {{nomenclature.root_category?.unit_of_measure?.symbol ? nomenclature.root_category?.unit_of_measure?.symbol : 'Pcs' }}\r\n                    </ng-container>\r\n                  </ng-container>\r\n\r\n                  <span *ngIf=\"!nomenclature.category && !nomenclature.root_category\">\r\n                    Pcs\r\n                  </span>\r\n                </td>\r\n                <td style=\"width: 23.75%\" class=\"text-center\">\r\n                  {{nomenclature.category?.name}}\r\n                  {{nomenclature.root_category?.name}}\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"rowexpansion\">\r\n              <tr class=\"disabled\">\r\n                <td colspan=\"5\">\r\n                  <form [formGroup]=\"sendForm\">\r\n                    <div class=\"form-group\">\r\n                      <label for=\"quantity\">Quantity (Quantity can't be less than one)</label>\r\n                      <input id=\"quantity\" min=\"1\" class=\"form-control\" type=\"number\" pInputText\r\n                             formControlName=\"quantity\">\r\n                    </div>\r\n                    <div  class=\"form-group\">\r\n                      <label for=\"quantity\">Technology (Select Technology of the Product)</label>\r\n                      <pek-technology-picker [showClear]=\"false\" [predefinedTechnologies]=\"technologies\" (selectTechnology)=\"technologySelected($event)\"></pek-technology-picker>\r\n                    </div>\r\n                  </form>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n                  <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </p-table>\r\n          <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n            <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"paginator-wrapper\"\r\n          *ngIf=\"!isShowAll\"\r\n          [class.paginator-wrapper_hide]=\"nomenclatures.length === 0\"\r\n        >\r\n          <p-paginator\r\n            #paginator\r\n            [rows]=\"10\"\r\n            [totalRecords]=\"countNomenclatures\"\r\n            (onPageChange)=\"paginate($event)\">\r\n          </p-paginator>\r\n          <p-button\r\n            (click)=\"onShowAll()\"\r\n            class=\"paginator-all\"\r\n            type=\"button\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            All\r\n          </p-button>\r\n        </div>\r\n\r\n        <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"onShowPartial()\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Select\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSelected()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {ProductStructureCompare} from '../../models/product-structure-compare';\r\nimport {AuthService} from '../../../auth/auth.service';\r\nimport * as cloneDeep from 'lodash/cloneDeep';\r\nimport {CompareChangedCodeName} from '../../models/compare-changed-code-name';\r\n\r\n@Component({\r\n  selector: 'pek-compare-structure',\r\n  templateUrl: './compare-structure.component.html',\r\n  styleUrls: ['./compare-structure.component.scss']\r\n})\r\nexport class CompareStructureComponent implements OnInit {\r\n  currentProductsTree: TreeNode<ProductStructureCompare>[] = [];\r\n  newProductsTree: TreeNode<ProductStructureCompare>[] = [];\r\n  isLoading: any;\r\n  hasCyclingProduct = false;\r\n  hasChangedName = false;\r\n  changedCodeNamesList: CompareChangedCodeName[] = [];\r\n\r\n  newSelectedItem: TreeNode<ProductStructureCompare>;\r\n  newMenuItems: MenuItem[] = [\r\n    {\r\n      label: 'Selected Product',\r\n      items: [\r\n        {\r\n          label: 'Set New Name',\r\n          icon: 'pi pi-refresh',\r\n          command: () => this.onAcceptNewName(this.newSelectedItem.data),\r\n        },\r\n        {\r\n          label: 'Set Current Name',\r\n          icon: 'pi pi-replay',\r\n          command: () => this.onAcceptCurrentName(this.newSelectedItem.data),\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  currentSelectedItem: TreeNode<ProductStructureCompare>;\r\n  currentMenuItems: MenuItem[] = [\r\n    {\r\n      label: 'Selected Product',\r\n      items: [\r\n        {\r\n          label: 'Accept New Name',\r\n          icon: 'pi pi-refresh',\r\n          command: () => this.onAcceptNewName(this.currentSelectedItem.data),\r\n        },\r\n        {\r\n          label: 'Accept Current Name',\r\n          icon: 'pi pi-replay',\r\n          command: () => this.onAcceptCurrentName(this.currentSelectedItem.data),\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CompareStructureComponent>,\r\n    public auth: AuthService,\r\n    @Inject(MAT_DIALOG_DATA) public data: {\r\n      newResult: TreeNode<ProductStructureCompare>[],\r\n      oldResult: TreeNode<ProductStructureCompare>[],\r\n      hasCyclingProduct: boolean,\r\n      hasChangedName: boolean,\r\n      changedNamesList: CompareChangedCodeName[],\r\n    },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.newProductsTree = this.data.newResult;\r\n    this.currentProductsTree = this.data.oldResult;\r\n    this.hasCyclingProduct = this.data.hasCyclingProduct;\r\n    this.hasChangedName = this.data.hasChangedName;\r\n    this.changedCodeNamesList = this.data.changedNamesList;\r\n  }\r\n\r\n\r\n\r\n  onCancel() {\r\n    this.dialogRef.close(false);\r\n  }\r\n\r\n  onContinueUpdate() {\r\n    this.dialogRef.close(this.changedCodeNamesList.map(name => {\r\n      return {code: name.code, selected_name: name.selectedName};\r\n    }));\r\n  }\r\n\r\n  expandAllNew() {\r\n    const temp = cloneDeep(this.newProductsTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.newProductsTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  collapseAllNew() {\r\n    const temp = cloneDeep(this.newProductsTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.newProductsTree = temp;\r\n  }\r\n\r\n  expandAllCurrent() {\r\n    const temp = cloneDeep(this.currentProductsTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.currentProductsTree = temp;\r\n  }\r\n\r\n  collapseAllCurrent() {\r\n    const temp = cloneDeep(this.currentProductsTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.currentProductsTree = temp;\r\n  }\r\n\r\n  hasNameChanged(rowData: any) {\r\n    return this.changedCodeNamesList.findIndex(name => name.code === rowData.code && !name.selectedName) > -1;\r\n  }\r\n\r\n  hasNameChangeDepend() {\r\n    return this.changedCodeNamesList.some(name => !name.selectedName);\r\n  }\r\n\r\n  private onAcceptNewName(data) {\r\n    const nameInList = this.changedCodeNamesList.find(name => name.code === data.code);\r\n\r\n    nameInList.selectedName = nameInList.newName;\r\n    this.updateNamesInNodes(nameInList);\r\n  }\r\n\r\n  private onAcceptCurrentName(data) {\r\n    const nameInList = this.changedCodeNamesList.find(name => name.code === data.code);\r\n\r\n    nameInList.selectedName = nameInList.currentName;\r\n    this.updateNamesInNodes(nameInList);\r\n  }\r\n\r\n  updateNamesInNodes(nameInList) {\r\n    this.newProductsTree.forEach(node => {\r\n      node.children.forEach(child => {\r\n        this.changedNames(child, nameInList.code, nameInList.selectedName);\r\n      });\r\n    });\r\n    this.currentProductsTree.forEach(node => {\r\n      node.children.forEach(child => {\r\n        this.changedNames(child, nameInList.code, nameInList.selectedName);\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  changedNames(node: TreeNode<ProductStructureCompare>, code: string, newName: string) {\r\n    if (node.data.code === code) {\r\n      node.data.name = newName;\r\n    }\r\n    node.children.forEach(child => {\r\n      this.changedNames(child, code, newName);\r\n    });\r\n  }\r\n\r\n  hasNoMultipleNames(data) {\r\n    return this.changedCodeNamesList.findIndex(name => name.code === data.code && !name.selectedName) < 0;\r\n  }\r\n\r\n  acceptNewForAll() {\r\n    this.changedCodeNamesList.forEach(change => {\r\n      change.selectedName = change.newName;\r\n      this.updateNamesInNodes(change);\r\n    });\r\n  }\r\n\r\n  acceptCurrentForAll() {\r\n    this.changedCodeNamesList.forEach(change => {\r\n      change.selectedName = change.currentName;\r\n      this.updateNamesInNodes(change);\r\n    });\r\n  }\r\n\r\n  getPossibleName(code: string, isNewStructure: boolean = false) {\r\n    const name = this.changedCodeNamesList.find(name => name.code === code && !name.selectedName);\r\n    if (name) {\r\n      return isNewStructure ? name.currentName : name.newName;\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  codeHasMoreThanOne(data) {\r\n    return this.changedCodeNamesList.filter(change => change.code === data.code).length > 1;\r\n  }\r\n\r\n  moreThanOne() {\r\n    return this.changedCodeNamesList.map(change => change.code).findIndex(el => {\r\n      return this.changedCodeNamesList.filter(change => change.code === el).length > 1;\r\n    }) > -1;\r\n  }\r\n}\r\n","<div class=\"d-flex align-items-center mb-2\">\r\n  <div class=\"d-flex align-items-center \">\r\n    <span class=\"color-box name-changed\"></span>\r\n    <div>\r\n      Name Changed\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"d-flex align-items-center ml-3\">\r\n    <span class=\"color-box is-deleted\"></span>\r\n    <div>\r\n      Is Deleted\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"d-flex align-items-center ml-3\">\r\n    <span class=\"color-box quantity-changed\"></span>\r\n    <div>\r\n      Quantity Changed\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"d-flex align-items-center ml-3\">\r\n    <span class=\"color-box is-cycled\"></span>\r\n    <div>\r\n      Is Looped\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"d-flex align-items-center ml-3\">\r\n    <span class=\"color-box is-new\"></span>\r\n    <div>\r\n      Is New\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"compare\">\r\n  <div class=\" page__table mr-2\">\r\n    <div class=\"page__title\">\r\n      <h1 style=\"width: 100%\" class=\"d-flex align-items-center justify-content-between mb-2\">\r\n        <div>\r\n          Current Structure\r\n        </div>\r\n        <div class=\"d-flex align-item-center\">\r\n          <p-menubar\r\n            class=\"product-structure-bar ml-auto mr-2\"\r\n            [model]=\"currentMenuItems\"\r\n            [class.disabled]=\"!currentSelectedItem || currentSelectedItem && (hasNoMultipleNames(currentSelectedItem.data) || codeHasMoreThanOne(currentSelectedItem.data))\"\r\n          ></p-menubar>\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-angle-down\"\r\n            class=\"mr-2\"\r\n            (click)=\"expandAllCurrent()\"\r\n          ></button>\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-angle-up\"\r\n            (click)=\"collapseAllCurrent()\"\r\n          ></button>\r\n        </div>\r\n      </h1>\r\n    </div>\r\n    <p-treeTable\r\n      #dt\r\n      [value]=\"currentProductsTree\"\r\n      [(selection)]=\"currentSelectedItem\"\r\n      selectionMode=\"single\"\r\n      [scrollable]=\"true\"\r\n      scrollHeight=\"calc(100vh - 19.2rem)\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 30%; padding-left: 40px\">Code</th>\r\n          <th style=\"width: 20%\">Name</th>\r\n          <th style=\"width: 7%\" class=\"text-center\">Quantity</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n        <tr [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\"\r\n            [class.is-new]=\"rowData?.isNew\"\r\n            [class.quantity-changed]=\"rowData?.hasQuantityChanged && !rowData?.hasNameChanged && !rowData?.isDeleted\"\r\n            [class.name-changed]=\"hasNameChanged(rowData) && !rowData?.hasQuantityChanged && !rowData?.isDeleted\"\r\n            [class.is-deleted]=\"rowData?.isDeleted && !rowData?.hasQuantityChanged && !rowData?.hasNameChanged\">\r\n          <td\r\n            style=\"width: 30%\"\r\n            [ngStyle]=\"{'padding-left': rowNode.level * 0.5 + 'rem'}\"\r\n          >\r\n            <div class=\"table-toggle\">\r\n              <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n              <span>\r\n                    {{rowData?.code}}\r\n                </span>\r\n            </div>\r\n          </td>\r\n          <td style=\"width: 20%\" class=\"name\">\r\n            {{rowData?.name}}\r\n            <span *ngIf=\"rowData ? codeHasMoreThanOne(rowData) : false\">\r\n              <p class=\"badge_warning\">Has Multiple Names In Import</p>\r\n            </span>\r\n            <span *ngIf=\"getPossibleName(rowData?.code) &&\r\n             getPossibleName(rowData?.code) !== rowData?.name && !codeHasMoreThanOne(rowData)\">\r\n              <b>\r\n                <br>\r\n                New Name:\r\n                <br>\r\n                {{getPossibleName(rowData?.code)}}\r\n              </b>\r\n            </span>\r\n          </td>\r\n          <td\r\n            style=\"width: 7%\"\r\n            class=\"text-center\"\r\n          >\r\n            {{rowData ? rowData?.quantity : rowData | json}}\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-treeTable>\r\n  </div>\r\n\r\n  <div class=\"page__table\">\r\n    <div class=\"page__title ml-2\">\r\n      <h1 style=\"width: 100%\" class=\"d-flex align-items-center justify-content-between mb-2\">\r\n        <div>\r\n          New Structure\r\n        </div>\r\n        <div class=\"d-flex align-item-center\">\r\n          <p-menubar\r\n            class=\"product-structure-bar ml-auto mr-2\"\r\n            [model]=\"newMenuItems\"\r\n            [class.disabled]=\"!newSelectedItem || newSelectedItem && (hasNoMultipleNames(newSelectedItem.data) || codeHasMoreThanOne(newSelectedItem.data))\"\r\n          ></p-menubar>\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-angle-down\"\r\n            class=\"mr-2\"\r\n            (click)=\"expandAllNew()\"\r\n          ></button>\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-angle-up\"\r\n            (click)=\"collapseAllNew()\"\r\n          ></button>\r\n        </div>\r\n      </h1>\r\n    </div>\r\n    <p-treeTable\r\n      #dt\r\n      [value]=\"newProductsTree\"\r\n      selectionMode=\"single\"\r\n      [scrollable]=\"true\"\r\n      scrollHeight=\"calc(100vh - 19.2rem)\"\r\n      [(selection)]=\"newSelectedItem\"\r\n      cdkDropListGroup\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 30%; padding-left: 40px\">Code</th>\r\n          <th style=\"width: 20%\">Name</th>\r\n          <th style=\"width: 7%\" class=\"text-center\">Quantity</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n        <tr [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\"\r\n            [class.is-new]=\"rowData?.isNew && !rowData?.hasCycle\"\r\n            [class.quantity-changed]=\"rowData?.hasQuantityChanged && !rowData?.hasNameChanged && !rowData?.isDeleted\"\r\n            [class.name-changed]=\"hasNameChanged(rowData) && !rowData?.hasQuantityChanged && !rowData?.isDeleted\"\r\n            [class.is-cycled]=\"rowData?.hasCycle && !rowData?.hasQuantityChanged && !rowData?.isDeleted\"\r\n            [class.is-deleted]=\"rowData?.isDeleted && !rowData?.hasQuantityChanged && !rowData?.hasNameChanged\">\r\n          <td\r\n            style=\"width: 30%\"\r\n            [ngStyle]=\"{'padding-left': rowNode.level * 0.5 + 'rem'}\"\r\n          >\r\n            <div class=\"table-toggle\">\r\n              <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n              <span>\r\n                    {{rowData?.code}}\r\n                </span>\r\n            </div>\r\n          </td>\r\n          <td class=\"name\" style=\"width: 20%\">\r\n            {{rowData?.name}}\r\n            <span *ngIf=\"rowData ? codeHasMoreThanOne(rowData) : false\">\r\n              <p class=\"badge_warning\">Has Multiple Names In Import</p>\r\n            </span>\r\n            <span *ngIf=\"getPossibleName(rowData?.code, true) &&\r\n             getPossibleName(rowData?.code, true) !== rowData?.name && !codeHasMoreThanOne(rowData)\">\r\n              <b>\r\n                <br>\r\n                Current Name:\r\n                <br>\r\n                {{getPossibleName(rowData?.code, true)}}\r\n              </b>\r\n\r\n            </span>\r\n          </td>\r\n          <td\r\n            style=\"width: 7%\"\r\n            class=\"text-center\"\r\n          >\r\n            {{rowData ? rowData?.quantity : rowData | json}}\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-treeTable>\r\n  </div>\r\n</div>\r\n<div class=\"d-flex justify-content-between mt-3\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-warning mr-2\"\r\n    label=\"Cancel Changes\"\r\n    (click)=\"onCancel()\"\r\n  ></button>\r\n  <div class=\"d-flex align-items-center\">\r\n    <button\r\n      *ngIf=\"hasNameChangeDepend() && !moreThanOne()\"\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-warning mr-2\"\r\n      label=\"Accept Current Names For All\"\r\n      [disabled]=\"!auth.user.can_accept_changes_on_import || hasCyclingProduct\"\r\n      (click)=\"acceptCurrentForAll()\"\r\n    ></button>\r\n    <button\r\n      *ngIf=\"hasNameChangeDepend() && !moreThanOne()\"\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-danger  mr-2\"\r\n      label=\"Accept New Names For All\"\r\n      [disabled]=\"!auth.user.can_accept_changes_on_import || hasCyclingProduct\"\r\n      (click)=\"acceptNewForAll()\"\r\n    ></button>\r\n    <p style=\"display: inline-block\" class=\"mr-2 text-danger\" *ngIf=\"moreThanOne()\"><b>Some Codes Has More Than One Different Name</b></p>\r\n    <button\r\n      [disabled]=\"!auth.user.can_accept_changes_on_import || hasCyclingProduct || hasNameChangeDepend()\"\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Accept Changes\"\r\n      (click)=\"onContinueUpdate()\"\r\n    ></button>\r\n  </div>\r\n\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {ProductPrefix} from '../../models/prefix';\r\nimport {PrefixService} from '../../services/prefix.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-prefix',\r\n  templateUrl: './create-edit-prefix.component.html',\r\n  styleUrls: ['./create-edit-prefix.component.scss']\r\n})\r\nexport class CreateEditPrefixComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    prefix: ['', [Validators.required]],\r\n    description: [''],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly prefixService: PrefixService,\r\n    private dialogRef: MatDialogRef<CreateEditPrefixComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, prefix: ProductPrefix }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.prefix.id));\r\n      this.form.patchValue(this.data.prefix);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createPrefix();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editPrefix();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createPrefix() {\r\n    const send = <Partial<ProductPrefix>>this.form.value;\r\n    this.prefixService.create(send).subscribe({\r\n      next: prefix => this.dialogRef.close(prefix),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editPrefix() {\r\n    const send = <Partial<ProductPrefix>>this.form.value;\r\n    this.prefixService.update(send).subscribe({\r\n      next: prefix => this.dialogRef.close(prefix),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Prefix\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"prefix\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea id=\"description\" [rows]=\"2\" pInputTextarea [autoResize]=\"true\" formControlName=\"description\"></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {ProductStructureCategoryService} from '../../services/product-structure-category.service';\r\nimport {ProductStructureCategory} from '../../models/product-structure-category';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-product-structure-category',\r\n  templateUrl: './create-edit-product-structure-category.component.html',\r\n  styleUrls: ['./create-edit-product-structure-category.component.scss']\r\n})\r\nexport class CreateEditProductStructureCategoryComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', Validators.required],\r\n    description: ['', Validators.required],\r\n    unit_of_measure: [0],\r\n    parent: [null],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly productStructureCategoryService: ProductStructureCategoryService,\r\n    private dialogRef: MatDialogRef<CreateEditProductStructureCategoryComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, category: Partial<ProductStructureCategory> }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      const category = this.data.category;\r\n      this.form.addControl('id' as any, new FormControl(category.id));\r\n      this.form.get('name').patchValue(category.name);\r\n      this.form.get('description').patchValue(category.description);\r\n      this.form.get('parent').patchValue(category.parent);\r\n      this.form.get('unit_of_measure').patchValue(this.data.category.unit_of_measure.id);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createCategory();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editCategory();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createCategory() {\r\n    const send = <any>this.form.value;\r\n    this.productStructureCategoryService.create(send).subscribe({\r\n      next: category => this.dialogRef.close(category),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editCategory() {\r\n    const send = <any>this.form.value;\r\n    this.productStructureCategoryService.updatePartly(send).subscribe({\r\n      next: category => this.dialogRef.close(category),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectMeasureUnit(id: number) {\r\n    this.form.get('unit_of_measure').patchValue(id);\r\n  }\r\n\r\n  onSelectCategory(category: ProductStructureCategory) {\r\n    if (category) {\r\n      this.form.get('parent').patchValue(category.id);\r\n    } else {\r\n      this.form.get('parent').patchValue(null);\r\n    }\r\n  }\r\n}\r\n","<div class=\"create-edit-product-structure-category\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      {{data.type}} Product Structure\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content>\r\n    <form [formGroup]=\"form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name*</label>\r\n        <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"description\">Description*</label>\r\n        <textarea id=\"description\" [rows]=\"2\" pInputTextarea [autoResize]=\"true\"\r\n                  formControlName=\"description\"></textarea>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Unit of measure*</label>\r\n        <pek-unit-measure-picker\r\n          [currentMeasureUnitId]=\"form.get('unit_of_measure').value\"\r\n          (selectMeasureUnit)=\"onSelectMeasureUnit($event)\"\r\n        ></pek-unit-measure-picker>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Parent Category</label>\r\n        <pek-product-structure-category-picker\r\n          [ignoredCategoryId]=\"data.category?.id\"\r\n          [currentCategoryId]=\"form.get('parent').value\"\r\n          (choiceCategory)=\"onSelectCategory($event)\"\r\n        ></pek-product-structure-category-picker>\r\n      </div>\r\n    </form>\r\n  </mat-dialog-content>\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      [label]=\"data.type\"\r\n      [loading]=\"isSaving\"\r\n      [disabled]=\"form.invalid || !form.get('unit_of_measure').value\"\r\n      (click)=\"onSave()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Product} from '../../models/product';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {finalize} from 'rxjs';\r\nimport {ProductStructureCategory} from '../../models/product-structure-category';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-root-product',\r\n  templateUrl: './create-edit-root-product.component.html',\r\n  styleUrls: ['./create-edit-root-product.component.scss']\r\n})\r\nexport class CreateEditRootProductComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', Validators.required],\r\n    code: ['', Validators.required],\r\n    description: [''],\r\n    type: [1],\r\n    root_category: [null],\r\n  });\r\n\r\n  isCategoryDisabled: boolean = false;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly productService: ProductService,\r\n    private dialogRef: MatDialogRef<CreateEditRootProductComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, product: Partial<Product> }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type !== 'create') {\r\n      const nomenclature: Partial<Nomenclature> = this.data.product.nomenclature;\r\n      this.form.addControl('id' as any, new FormControl(this.data.product.id));\r\n      // @ts-ignore\r\n      this.form.patchValue(nomenclature);\r\n\r\n      if (nomenclature.root_category) {\r\n        this.form.get('root_category').patchValue(nomenclature.root_category.id);\r\n      }\r\n    }\r\n\r\n    if (this.data.type === 'copy') {\r\n      this.isCategoryDisabled = true;\r\n      this.form.get('code').disable();\r\n      this.form.get('description').disable();\r\n    }\r\n  }\r\n\r\n  onSelectCategory(category: ProductStructureCategory) {\r\n    if (category) {\r\n      this.form.get('root_category').patchValue(category.id);\r\n    } else {\r\n      this.form.get('root_category').patchValue(null);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n    const send: any = this.form.value;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createProduct(send);\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editProduct(send);\r\n        break;\r\n      }\r\n      case 'copy': {\r\n        this.copyProduct();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createProduct(send: any) {\r\n    this.nomenclatureService.create(send).subscribe({\r\n      next: (nomenclature) => {\r\n        if (nomenclature) {\r\n          // @ts-ignore\r\n          this.productService.addProduct({nomenclature: nomenclature.id}).pipe(\r\n            finalize(() => this.isSaving = false)\r\n          ).subscribe(products => this.dialogRef.close(products[0]));\r\n        }\r\n      },\r\n      error: () => this.isSaving = false\r\n    });\r\n  }\r\n\r\n  editProduct(send: any) {\r\n    this.nomenclatureService.updatePartly(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(product => this.dialogRef.close(product));\r\n  }\r\n\r\n  copyProduct() {\r\n    const send = {\r\n      nomenclature_id: this.form.get('id').value,\r\n      parent_id: null,\r\n      name: this.form.get('name').value,\r\n    };\r\n\r\n    this.productService.copyStructure(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(products => this.dialogRef.close(products));\r\n  }\r\n}\r\n","<div class=\"create-edit-root-product\">\r\n\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      {{data.type}} Product\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content>\r\n    <form [formGroup]=\"form\">\r\n      <div class=\"form-group\">\r\n        <label>Category</label>\r\n        <pek-product-structure-category-picker\r\n          [currentCategoryId]=\"form.get('root_category').value\"\r\n          [isDisabled]=\"isCategoryDisabled\"\r\n          (choiceCategory)=\"onSelectCategory($event)\"\r\n        ></pek-product-structure-category-picker>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name*</label>\r\n        <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"code\">Code*</label>\r\n        <input type=\"text\" id=\"code\" pInputText formControlName=\"code\">\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label for=\"description\">Description</label>\r\n        <textarea id=\"description\" [rows]=\"2\" pInputTextarea [autoResize]=\"true\"\r\n                  formControlName=\"description\"></textarea>\r\n      </div>\r\n    </form>\r\n  </mat-dialog-content>\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      [label]=\"data.type\"\r\n      [loading]=\"isSaving\"\r\n      [disabled]=\"form.invalid\"\r\n      (click)=\"onSave()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {SerialTypeService} from '../../services/serial-type.service';\r\nimport {SerialType} from '../../models/serial-type';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-serial-type',\r\n  templateUrl: './create-edit-serial-type.component.html',\r\n  styleUrls: ['./create-edit-serial-type.component.scss']\r\n})\r\nexport class CreateEditSerialTypeComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  nomenclatures: Partial<Nomenclature>[] = [];\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    prefix: ['', [Validators.required]],\r\n    suffix: ['', [Validators.required]],\r\n    start_number: [0, [Validators.required]],\r\n    nomenclature_set: [[]],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly serialTypeService: SerialTypeService,\r\n    private readonly modalService: ModalService,\r\n    private dialogRef: MatDialogRef<CreateEditSerialTypeComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, serialType: SerialType }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.serialType.id));\r\n      this.form.patchValue(<any>this.data.serialType);\r\n\r\n      this.form.get('nomenclature_set').patchValue(this.data.serialType.nomenclature_set.map(n => n.id));\r\n      this.nomenclatures = this.data.serialType.nomenclature_set;\r\n    }\r\n  }\r\n\r\n  getType(type: ENomenclatureType) {\r\n    switch (type) {\r\n      case ENomenclatureType.PURCHASED:\r\n        return 'Purchased';\r\n      case ENomenclatureType.ASSEMBLY:\r\n        return 'Assembly';\r\n      case ENomenclatureType.MANUFACTURED:\r\n        return 'Manufactured';\r\n    }\r\n  }\r\n\r\n  onRemoveNomenclature(id: number) {\r\n    const index = this.nomenclatures.findIndex(n => n.id === id);\r\n    this.nomenclatures.splice(index, 1);\r\n    this.form.get('nomenclature_set').patchValue(this.nomenclatures.map(n => n.id));\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createSerialType();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editSerialType();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  onChoiceNomenclature() {\r\n    this.modalService.choiceNomenclatureModal().subscribe(nomenclature => {\r\n      if (nomenclature) {\r\n        this.form.get('nomenclature_set').value.push(nomenclature.id);\r\n        this.nomenclatures.push(nomenclature);\r\n      }\r\n    })\r\n  }\r\n\r\n  createSerialType() {\r\n    const send = <any>this.form.value;\r\n    this.serialTypeService.create(send).subscribe({\r\n      next: serialType => this.dialogRef.close(serialType),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editSerialType() {\r\n    const send = <any>this.form.value;\r\n    this.serialTypeService.update(send).subscribe({\r\n      next: serialType => this.dialogRef.close(serialType),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Serial Number Type\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col-4\">\r\n        <div class=\"form-group\">\r\n          <label for=\"prefix\"> Prefix* </label>\r\n          <input formControlName=\"prefix\" pInputText class=\"form-control\" type=\"text\" id=\"prefix\" required=\"required\">\r\n        </div>\r\n      </div>\r\n      <div class=\"col-4\">\r\n        <div class=\"form-group\">\r\n          <label for=\"start\"> Start Number* </label>\r\n          <input formControlName=\"start_number\" pInputText class=\"form-control\" type=\"number\" id=\"start\"\r\n                 required=\"required\">\r\n        </div>\r\n      </div>\r\n      <div class=\"col-4\">\r\n        <div class=\"form-group\">\r\n          <label for=\"suffix\"> Suffix* </label>\r\n          <input formControlName=\"suffix\" pInputText class=\"form-control\" type=\"text\" id=\"suffix\" required=\"required\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <div class=\"nomenclature-header\">\r\n        <label> Nomenclatures </label>\r\n        <div class=\"custom-button\">\r\n          <p-button\r\n            icon=\"pi pi-plus\"\r\n            type=\"button\"\r\n            styleClass=\"p-button-text\"\r\n            (click)=\"onChoiceNomenclature()\"\r\n          >\r\n            Add Nomenclature\r\n          </p-button>\r\n        </div>\r\n      </div>\r\n\r\n      <div *ngIf=\"nomenclatures.length > 0; else empty\">\r\n        <p-table\r\n          [value]=\"nomenclatures\"\r\n          [paginator]=\"true\"\r\n          [rows]=\"10\"\r\n          selectionMode=\"single\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 7%\" class=\"text-center\">#</th>\r\n              <th style=\"width: 33%\">Name</th>\r\n              <th style=\"width: 30%\">Code</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Type</th>\r\n              <th style=\"width: 10%\" class=\"text-right\"></th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n            <tr>\r\n              <td style=\"width: 7%\" class=\"text-center\">{{i + 1}}</td>\r\n              <td style=\"width: 33%\">{{nomenclature.name}}</td>\r\n              <td style=\"width: 30%\">{{nomenclature.code}}</td>\r\n              <td style=\"width: 20%\" class=\"text-center\">{{getType(nomenclature.type)}}</td>\r\n              <td style=\"width: 10%\" class=\"text-right\">\r\n                <button\r\n                  pButton\r\n                  (click)=\"onRemoveNomenclature(nomenclature.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                  icon=\"pi pi-trash\"\r\n                ></button>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n\r\n      <ng-template #empty>\r\n        <div class=\"empty\">The nomenclature is missing</div>\r\n      </ng-template>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {Technology} from '../../models/technology';\r\nimport {TechnologyService} from '../../services/technology.service';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-technology',\r\n  templateUrl: './create-edit-technology.component.html',\r\n  styleUrls: ['./create-edit-technology.component.scss']\r\n})\r\nexport class CreateEditTechnologyComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    description: ['', Validators.required],\r\n    service_or_material: [null, Validators.required]\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly technologyService: TechnologyService,\r\n    private dialogRef: MatDialogRef<CreateEditTechnologyComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, technology: Technology }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.technology.id));\r\n      this.form.patchValue(this.data.technology);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createTechnology();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editTechnology();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createTechnology() {\r\n    const send = <Partial<Technology>>this.form.value;\r\n    this.technologyService.create(send).subscribe({\r\n      next: technology => this.dialogRef.close(technology),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editTechnology() {\r\n    const send = <Partial<Technology>>this.form.value;\r\n    this.technologyService.update(send).subscribe({\r\n      next: technology => this.dialogRef.close(technology),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Technology\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Namea*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description*</label>\r\n      <textarea id=\"description\" [rows]=\"2\" pInputTextarea [autoResize]=\"true\" formControlName=\"description\"></textarea>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Type*</label>\r\n      <div class=\"column\">\r\n        <p-radioButton\r\n          class=\"mr-3\"\r\n          name=\"service_or_material\"\r\n          label=\"Service\"\r\n          value=\"0\"\r\n          formControlName=\"service_or_material\">\r\n        </p-radioButton>\r\n        <p-radioButton\r\n          name=\"service_or_material\"\r\n          label=\"Material\"\r\n          value=\"1\"\r\n          formControlName=\"service_or_material\">\r\n        </p-radioButton>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Product} from '../../models/product';\r\nimport {FormBuilder} from '@angular/forms';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {finalize, forkJoin, of} from 'rxjs';\r\nimport {TechnicalEquipmentService} from '../../services/technical-equipment.service';\r\nimport {TechnicalEquipment} from '../../models/technical-equipment';\r\n\r\n@Component({\r\n  selector: 'pek-edit-product',\r\n  templateUrl: './edit-product.component.html',\r\n  styleUrls: ['./edit-product.component.scss']\r\n})\r\nexport class EditProductComponent implements OnInit {\r\n  isSaving: boolean = false;\r\n  isFormInvalid: boolean = true;\r\n\r\n  formValue: Partial<Product & Nomenclature>;\r\n  quantity: number;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly productService: ProductService,\r\n    private readonly technicalEquipmentService: TechnicalEquipmentService,\r\n    private readonly dialogRef: MatDialogRef<EditProductComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public product: Product,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.product.nomenclature.type !== ENomenclatureType.PURCHASED) {\r\n      this.dialogRef.updateSize('60rem', 'auto');\r\n    }\r\n  }\r\n\r\n  onChangeFormValue(data: { invalid: boolean, formValue: Partial<Product & Nomenclature> }) {\r\n    this.formValue = data.formValue;\r\n    this.isFormInvalid = data.invalid;\r\n  }\r\n\r\n  onUploadImage(files: File[]) {\r\n    files.forEach(newFile => {\r\n      const send = {\r\n        nomenclature: this.product.nomenclature.id,\r\n        image: newFile,\r\n      };\r\n\r\n      this.nomenclatureService.uploadImage(send).subscribe(image => {\r\n        this.product.nomenclature.images.push(image);\r\n      });\r\n    });\r\n  }\r\n\r\n  onRemoveImage(index: number) {\r\n    this.nomenclatureService.removeImage(this.product.nomenclature.images[index].id).subscribe(() => {\r\n      this.product.nomenclature.images.splice(index, 1);\r\n    });\r\n  }\r\n\r\n  onUpdateProduct() {\r\n    if (!this.isFormInvalid) {\r\n      this.isSaving = true;\r\n\r\n      const send: Partial<Nomenclature> = {\r\n        id: this.product.nomenclature.id,\r\n        name: this.formValue.name,\r\n        code: this.formValue.code,\r\n        description: this.formValue.description,\r\n        type: this.formValue.type,\r\n        bulk_or_serial: this.formValue.bulk_or_serial\r\n      };\r\n\r\n      if (this.product.nomenclature.type === ENomenclatureType.PURCHASED) {\r\n        send.category = this.formValue.category;\r\n        delete send.code;\r\n      } else {\r\n        send.technologies = [...this.formValue.technologies];\r\n        send.category = null;\r\n      }\r\n\r\n      const sendUpdateQuantity: Partial<Product> = {\r\n        id: this.product.id,\r\n        quantity: this.formValue.quantity,\r\n      };\r\n\r\n      const technicalEquipments = this.formValue.technical_equipments;\r\n      const createUpdateTechnicalEquipments = {\r\n        updated_created_technical_equipment: technicalEquipments.map(equipment => {\r\n          return {\r\n            id: equipment.id,\r\n            nomenclature_in_use: equipment.nomenclature_in_use.id,\r\n            quantity: equipment.quantity,\r\n            technology: equipment.technology.id,\r\n          };\r\n        }),\r\n        deleted_technical_equipment_ids: this.formValue.deleted_technical_equipments_ids,\r\n      };\r\n      if (this.product.parent && this.product.nomenclature.type !== ENomenclatureType.ASSEMBLY) {\r\n        forkJoin({\r\n          nomenclature: this.nomenclatureService.update(send),\r\n          product: this.productService.updatePartly(sendUpdateQuantity),\r\n          technicalEquipment: this.product.nomenclature.type !== ENomenclatureType.PURCHASED ?\r\n            this.nomenclatureService.bulkCreateUpdateTechnicalEquipments(this.product.nomenclature.id, createUpdateTechnicalEquipments) :\r\n            of(true),\r\n        }).pipe(\r\n          finalize(() => this.isSaving = false)\r\n        ).subscribe(({nomenclature, product, technicalEquipment}) => {\r\n          this.dialogRef.close({nomenclature, product});\r\n        });\r\n      } else {\r\n        forkJoin({\r\n          nomenclature: this.nomenclatureService.update(send),\r\n          product: this.productService.updatePartly(sendUpdateQuantity),\r\n          technicalEquipment: this.product.nomenclature.type !== ENomenclatureType.PURCHASED ?\r\n            this.nomenclatureService.bulkCreateUpdateTechnicalEquipments(this.product.nomenclature.id, createUpdateTechnicalEquipments) :\r\n            of(true),\r\n        }).pipe(\r\n          finalize(() => this.isSaving = false)\r\n        ).subscribe(({nomenclature, product, technicalEquipment}) => {\r\n          this.dialogRef.close({nomenclature, product});\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Edit Product\r\n    {{product.nomenclature.id}}\r\n    <span\r\n      class=\"hint\"\r\n      pTooltip=\"To paste the image, copy it and press Ctrl + V\"\r\n      tooltipPosition=\"top\"\r\n    >\r\n      <i>?</i>\r\n    </span>\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <pek-create-edit-form\r\n    [product]=\"product\"\r\n    (formChange)=\"onChangeFormValue($event)\"\r\n    (uploadImage)=\"onUploadImage($event)\"\r\n    (removeImage)=\"onRemoveImage($event)\"\r\n  ></pek-create-edit-form>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Edit\"\r\n    class=\"p-button-success\"\r\n    [disabled]=\"isFormInvalid\"\r\n    [loading]=\"isSaving\"\r\n    (click)=\"onUpdateProduct()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\n\r\n@Component({\r\n  selector: 'pek-make-production-list',\r\n  templateUrl: './make-production-list.component.html',\r\n  styleUrls: ['./make-production-list.component.scss']\r\n})\r\nexport class MakeProductionListComponent implements OnInit {\r\n  isSaving: boolean = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    nomenclature: [null],\r\n    quantity: [1, [Validators.required, Validators.min(1)]],\r\n    is_grouped: [false],\r\n    root_nomenclature: [null]\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<MakeProductionListComponent>,\r\n    private readonly productService: ProductService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { nomenclature: Nomenclature, rootId: number }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('is_grouped').disable();\r\n    this.form.get('nomenclature').patchValue(this.data.nomenclature.id);\r\n    this.form.get('root_nomenclature').patchValue(this.data.rootId);\r\n  }\r\n\r\n  onChangeQuantity() {\r\n    if (this.form.get('quantity').value < 1) {\r\n      this.form.get('quantity').patchValue(1);\r\n    } else {\r\n      if (this.form.get('quantity').value <= 1) {\r\n        this.form.get('is_grouped').disable();\r\n        this.form.get('is_grouped').patchValue(false);\r\n      } else {\r\n        this.form.get('is_grouped').enable();\r\n      }\r\n    }\r\n  }\r\n\r\n  onMakeProductionList(): void {\r\n    this.isSaving = true;\r\n    const send = {...this.form.value};\r\n    this.productService.makeProductionList(send).subscribe({\r\n      next: () => this.dialogRef.close(true),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Make Production List from &laquo;{{data.nomenclature.name}}&raquo;\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Number Of Sets</label>\r\n      <input type=\"number\" pInputText class=\"form-control\" formControlName=\"quantity\" (ngModelChange)=\"onChangeQuantity()\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <p-checkbox label=\"Group Production Plan\" [binary]=\"true\" formControlName=\"is_grouped\"></p-checkbox>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Make\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onMakeProductionList()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Product} from '../../models/product';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {ProductStructureCategory} from '../../models/product-structure-category';\r\n\r\n@Component({\r\n  selector: 'pek-make-root-product',\r\n  templateUrl: './make-root-product.component.html',\r\n  styleUrls: ['./make-root-product.component.scss']\r\n})\r\nexport class MakeRootProductComponent implements OnInit {\r\n  isSaving: boolean = false;\r\n  form: FormGroup = this.fb.group({\r\n    category: [null, Validators.required]\r\n  })\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<MakeRootProductComponent>,\r\n    private readonly productService: ProductService,\r\n    @Inject(MAT_DIALOG_DATA) public product: Product\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onSelectCategory(category: ProductStructureCategory) {\r\n    if (category) {\r\n      this.form.get('category').patchValue(category.id);\r\n    } else {\r\n      this.form.get('category').patchValue(null);\r\n    }\r\n  }\r\n\r\n  onMakeRoot() {\r\n    this.isSaving = true;\r\n    this.productService.makeRoot(this.product.id, this.form.value).subscribe({\r\n      next: () => this.dialogRef.close(true),\r\n      error: () => this.isSaving = false,\r\n    })\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Make Root &laquo;{{product.nomenclature.name}}&raquo;\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"form-group\">\r\n    <label>Category</label>\r\n    <pek-product-structure-category-picker\r\n      [currentCategoryId]=\"form.get('category').value\"\r\n      (choiceCategory)=\"onSelectCategory($event)\"\r\n    ></pek-product-structure-category-picker>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Make\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onMakeRoot()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ProductFile} from '../../models/product';\r\nimport {finalize} from 'rxjs';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {Route, Router} from '@angular/router';\r\nimport {environment} from '@env/environment';\r\n\r\n@Component({\r\n  selector: 'pek-product-files',\r\n  templateUrl: './product-files.component.html',\r\n  styleUrls: ['./product-files.component.scss']\r\n})\r\nexport class ProductFilesComponent implements OnInit {\r\n  link = environment.image_path;\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  uploadFiles: File[] = [];\r\n  files: ProductFile[] = [];\r\n  isLoading = true;\r\n  isPending = false;\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<ProductFilesComponent>,\r\n    private readonly productService: ProductService,\r\n    private readonly modalService: ModalService,\r\n    private readonly adapterService: AdapterService,\r\n    private router: Router,\r\n    @Inject(MAT_DIALOG_DATA) public productId: number,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getFiles();\r\n   }\r\n\r\n  getFiles() {\r\n    this.productService.getProductFiles(this.productId).subscribe(files => {\r\n      this.files = files;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getFileName(file: string) {\r\n    let name = file.split('/');\r\n    return name[name.length - 1];\r\n  }\r\n\r\n  onUploadFiles(file: File = null) {\r\n    this.isPending = true;\r\n    const sendFiles = file ? [file] : this.uploadFiles;\r\n    this.productService.severalUploadFiles(this.productId, sendFiles)\r\n      .pipe(\r\n        finalize(() => this.isPending = false)\r\n      )\r\n      .subscribe(files => this.dialogRef.close(files));\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.deletion.add(id);\r\n\r\n        this.productService.removeProductFile(id).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id);\r\n          this.files.splice(index, 1);\r\n          this.deletion.clear();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  openFileInBrowser(file: ProductFile) {\r\n    window.open(this.link + file.file, '_blank');\r\n  }\r\n\r\n  onDownloadFile(file: ProductFile) {\r\n    this.addition.add(file.id);\r\n    this.productService.downloadProductFile(file.id).subscribe(response => {\r\n      const filename = this.getFileName(file.file);\r\n      this.adapterService.downloadFile(filename, response);\r\n      this.addition.clear();\r\n    });\r\n  }\r\n\r\n  onSelectFiles(files: File[]) {\r\n    this.uploadFiles = files;\r\n  }\r\n\r\n  imageAdded(file: File) {\r\n    this.onUploadFiles(file)\r\n  }\r\n}\r\n","<div class=\"modal-header\" >\r\n  <h2 class=\"modal-header__title\">\r\n    Product Files\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content pekPasteScreenImage (imageAdded)=\"imageAdded($event)\">\r\n  <pek-upload-file\r\n    [multiple]=\"true\"\r\n    (selectFile)=\"onSelectFiles($event)\"\r\n  ></pek-upload-file>\r\n\r\n  <div class=\"product-files\">\r\n    <h3 class=\"product-files__caption\">Uploaded Files</h3>\r\n    <p-table\r\n      selectionMode=\"single\"\r\n      [value]=\"files\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n          <th style=\"width: 75%\">File Name</th>\r\n          <th style=\"width: 20%\">Actions</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-file let-i=\"rowIndex\">\r\n        <tr>\r\n          <td class=\"text-center\" style=\"width: 5%\">#</td>\r\n          <td style=\"width: 75%\" class=\"word-break\">\r\n            <a [href]=\"link + file.file\">\r\n              {{getFileName(file.file)}}\r\n            </a>\r\n          </td>\r\n          <td style=\"width: 20%\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton\r\n                (click)=\"onDownloadFile(file)\"\r\n                [loading]=\"addition.has(file.id)\"\r\n                type=\"button\"\r\n                class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                icon=\"pi pi-download\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                (click)=\"onRemoveFile(file.id)\"\r\n                [loading]=\"deletion.has(file.id)\"\r\n                type=\"button\"\r\n                class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                icon=\"pi pi-trash\"\r\n              ></button>\r\n            </div>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-2\" [attr.colspan]=\"3\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Upload\"\r\n    [loading]=\"isPending\"\r\n    [disabled]=\"uploadFiles.length === 0\"\r\n    (click)=\"onUploadFiles()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Product} from '../../models/product';\r\n\r\n@Component({\r\n  selector: 'pek-serial-confirmation',\r\n  templateUrl: './serial-confirmation.component.html',\r\n  styleUrls: ['./serial-confirmation.component.scss']\r\n})\r\nexport class SerialConfirmationComponent implements OnInit {\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<SerialConfirmationComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { product: Product, warehouseQuantity: number }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.data.warehouseQuantity);\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Confirmation\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <p>\r\n    Are you going to assign ({{data.product.nomenclature.code}}) {{data.product.nomenclature.name}}\r\n    <b>({{data.warehouseQuantity && data.warehouseQuantity >= 0 ? data.warehouseQuantity : 'Out of warehouse'}})</b> Serial Numbers\r\n  </p>\r\n\r\n  <p class=\"mt-3\">Confirm your action</p>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Confirm\"\r\n    class=\"p-button-success\"\r\n    [mat-dialog-close]=\"true\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnDestroy, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ProductService} from '../../services/product.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {ProductStructureCompare} from '../../models/product-structure-compare';\r\nimport {AncestorProductStructureCompare} from '../../models/product-structure-compare-result';\r\nimport {CompareChangedCodeName} from '../../models/compare-changed-code-name';\r\n\r\n@Component({\r\n  selector: 'pek-upload-product-structure',\r\n  templateUrl: './upload-product-structure.component.html',\r\n  styleUrls: ['./upload-product-structure.component.scss']\r\n})\r\nexport class UploadProductStructureComponent implements OnInit, OnDestroy {\r\n  fileToUpload: File;\r\n  isLoading = false;\r\n  showErrorUpload = false;\r\n\r\n  files: string[] = [];\r\n  error: string;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  currentProductsTree: TreeNode<ProductStructureCompare>[] = [];\r\n  newProductsTree: TreeNode<ProductStructureCompare>[] = [];\r\n  hasCyclingProduct = false;\r\n  hasChangedName = false;\r\n  hasChanges = false;\r\n  newStructure: ProductStructureCompare;\r\n  currentStructure: ProductStructureCompare;\r\n  ancestorsProducts: AncestorProductStructureCompare[];\r\n  changedNames: { code: string, selected_name: string }[];\r\n  changedCodeNamesList: CompareChangedCodeName[] = [];\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<UploadProductStructureComponent>,\r\n    private productService: ProductService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { productId: number, rootProductId: number },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onCancel() {\r\n    this.showErrorUpload = false;\r\n    this.isLoading = false;\r\n    this.fileToUpload = null;\r\n    this.error = '';\r\n  }\r\n\r\n  previewStructure() {\r\n    const dataFprStructurePreview = {\r\n      file_xls: this.fileToUpload,\r\n      root_product_id: this.data.productId\r\n    };\r\n\r\n    this.productService.compare_structure(dataFprStructurePreview)\r\n      .pipe(\r\n        takeUntil(this.destroy$)\r\n      ).subscribe({\r\n      next: res => {\r\n        this.newStructure = res.data.new_structure;\r\n        this.currentStructure = res.data.current_structure;\r\n        this.ancestorsProducts = res.data.ancestors_products;\r\n\r\n        this.checkForDifferences();\r\n        this.newProductsTree.forEach(node => {\r\n          node.children.forEach(child => {\r\n            this.collectChangedNames(child);\r\n          });\r\n        });\r\n        if (this.hasCyclingProduct || this.changedCodeNamesList.length > 0 || this.hasChanges) {\r\n          this.productService.openCompareStructureDialog(this.newProductsTree, this.currentProductsTree, this.hasCyclingProduct, this.hasChangedName, this.changedCodeNamesList).subscribe(res => {\r\n            if (res) {\r\n              this.changedNames = res as { code: string, selected_name: string }[];\r\n              this.onUpload();\r\n            } else {\r\n              this.dialogRef.close(false);\r\n            }\r\n          });\r\n        } else {\r\n          this.onUpload();\r\n        }\r\n      },\r\n      error: err => {\r\n        if (err) {\r\n          this.isLoading = false;\r\n          this.error = err.error.data;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  collectChangedNames(node: TreeNode<ProductStructureCompare>) {\r\n    if (node.data.current_name && node.data.current_name.trim() !== node.data.name.trim()) {\r\n      const isNotExists = this.changedCodeNamesList.findIndex(change => change.code === node.data.code && change.newName === node.data.name.trim()) < 0;\r\n      if (isNotExists) {\r\n        this.changedCodeNamesList.push({\r\n          currentName: node.data.current_name.trim(),\r\n          newName: node.data.name.trim(),\r\n          selectedName: '',\r\n          code: node.data.code\r\n        });\r\n      }\r\n    }\r\n    node.children.forEach(child => {\r\n      this.collectChangedNames(child);\r\n    });\r\n  }\r\n\r\n  onUpload(codes: string[] = null) {\r\n    this.isLoading = true;\r\n\r\n    const data = {\r\n      file_xls: this.fileToUpload,\r\n      root_product_id: this.data.productId,\r\n      changed_names: this.changedNames\r\n    };\r\n\r\n    if (codes) {\r\n      data['passed_codes'] = codes.join(',');\r\n    }\r\n\r\n    this.productService.uploadProductStructure(data)\r\n      .pipe(\r\n        takeUntil(this.destroy$)\r\n      ).subscribe({\r\n      next: res => {\r\n        this.dialogRef.close(true);\r\n      },\r\n      error: err => {\r\n        if (err) {\r\n          this.isLoading = false;\r\n          this.error = err.error.data;\r\n          this.processing(err.error.data);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  processing(arr: any) {\r\n    const str: string = arr ? arr[0] : '';\r\n\r\n    if (str.includes('Error in parsing items at position')) {\r\n      this.showErrorUpload = true;\r\n      const str2 = str.split('code:')[1];\r\n      const str3 = str2.split(', Index:')[0];\r\n\r\n      this.files.push(str3);\r\n    } else {\r\n      this.showErrorUpload = false;\r\n      this.fileToUpload = null;\r\n    }\r\n  }\r\n\r\n  onContinueUpdate() {\r\n    this.onUpload(this.files);\r\n  }\r\n\r\n  selectFile(files: File[]) {\r\n    this.error = '';\r\n    this.fileToUpload = files[0];\r\n  }\r\n\r\n  removeFile() {\r\n    this.fileToUpload = null;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  checkForDifferences() {\r\n    this.compareOldVersion();\r\n    this.compareNewVersion();\r\n    this.prepareCurrentTree();\r\n    this.prepareNewTree();\r\n  }\r\n\r\n  checkChangesInCurrentStructure(parent: ProductStructureCompare, parentIndex) {\r\n    if (parent.children) {\r\n      parent.children.forEach((element, index) => {\r\n        element.isNew = true;\r\n        this.hasChanges = true;\r\n        if (element.children) {\r\n          element.children.forEach((el, childIndex) => {\r\n            el.isNew = true;\r\n            this.hasChanges = true;\r\n            this.checkChangesInCurrentStructure(el, index);\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  prepareCurrentTree() {\r\n    this.currentProductsTree.push({\r\n      data: this.currentStructure,\r\n      expanded: false,\r\n      parent: null,\r\n      children: []\r\n    });\r\n\r\n    this.currentStructure.children?.forEach(child => {\r\n      this.currentProductsTree[0].children.push(\r\n        {\r\n          data: child,\r\n          expanded: false,\r\n          parent: null,\r\n          children: []\r\n        }\r\n      );\r\n    });\r\n    this.addProdStructureCurrent(this.currentProductsTree[0]);\r\n  }\r\n\r\n  addProdStructureCurrent(treeProduct: TreeNode<ProductStructureCompare>) {\r\n    if (treeProduct.children) {\r\n      treeProduct.children.forEach(child => {\r\n        if (child.parent) {\r\n          child.data.hasCycle = this.isCycle(child.data.parent, child.data.code);\r\n\r\n          if (!child.data.hasCycle) {\r\n            if (this.newStructure.parent_id) {\r\n              const nextParent = this.ancestorsProducts.find(el => el.id === this.newStructure.parent_id);\r\n              child.data.hasCycle = this.isCycleOnStructure(nextParent, child.data.code);\r\n            }\r\n          }\r\n        }\r\n        if (child.data.hasCycle) {\r\n          this.hasCyclingProduct = true;\r\n          this.hasChanges = true;\r\n        }\r\n        if (child.data && child.data.children) {\r\n          child.data.children.forEach(innerChild => {\r\n            if (innerChild.parent) {\r\n              innerChild.hasCycle = this.isCycle(innerChild.parent, innerChild.code);\r\n\r\n              if (!innerChild.hasCycle) {\r\n                if (this.newStructure.parent_id) {\r\n                  const nextParent = this.ancestorsProducts.find(el => el.id === this.newStructure.parent_id);\r\n                  innerChild.hasCycle = this.isCycleOnStructure(nextParent, innerChild.code);\r\n                }\r\n              }\r\n            }\r\n            if (innerChild.hasCycle) {\r\n              this.hasCyclingProduct = true;\r\n              this.hasChanges = true;\r\n            }\r\n            child.children.push({\r\n              data: innerChild,\r\n              expanded: false,\r\n              parent: null,\r\n              children: []\r\n            });\r\n          });\r\n          this.addProdStructureCurrent(child);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  prepareNewTree() {\r\n    this.newProductsTree.push({\r\n      data: this.newStructure,\r\n      expanded: false,\r\n      parent: null,\r\n      children: []\r\n    });\r\n\r\n    this.newStructure.children.forEach(child => {\r\n      if (child.parent) {\r\n        child.hasCycle = this.isCycle(child.parent, child.code);\r\n\r\n        if (!child.hasCycle) {\r\n          if (this.newStructure.parent_id) {\r\n            const nextParent = this.ancestorsProducts.find(el => el.id === this.newStructure.parent_id);\r\n            child.hasCycle = this.isCycleOnStructure(nextParent, child.code);\r\n          }\r\n        }\r\n      }\r\n      if (child.hasCycle) {\r\n        this.hasCyclingProduct = true;\r\n        this.hasChanges = true;\r\n      }\r\n      this.newProductsTree[0].children.push(\r\n        {\r\n          data: child,\r\n          expanded: false,\r\n          parent: null,\r\n          children: []\r\n        }\r\n      );\r\n    });\r\n    this.addProdStructureCurrent(this.newProductsTree[0]);\r\n\r\n  }\r\n\r\n  private compareOldVersion() {\r\n    // if (this.currentStructure.children)\r\n    this.currentStructure.children?.forEach((oldVersionProduct, index) => {\r\n      const newVersionProduct = this.newStructure.children.find(el => el.code === oldVersionProduct.code && !el.hasCheckedForQuantity);\r\n      if (!newVersionProduct) {\r\n        oldVersionProduct.isDeleted = true;\r\n        this.hasChanges = true;\r\n        if (oldVersionProduct.children) {\r\n          this.markAsDeleted(oldVersionProduct);\r\n        }\r\n      }\r\n\r\n      if (newVersionProduct) {\r\n        if (newVersionProduct.quantity !== oldVersionProduct.quantity && !newVersionProduct.hasCheckedForQuantity) {\r\n          oldVersionProduct.hasQuantityChanged = true;\r\n          this.hasChanges = true;\r\n        }\r\n        newVersionProduct.hasCheckedForQuantity = true;\r\n\r\n        if (oldVersionProduct.children && newVersionProduct.children) {\r\n          this.recursiveFindChangesOld(oldVersionProduct, newVersionProduct);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  //       (    )      ()\r\n  // hasCheckedForDeletion\r\n  // hasCheckedForQuantity\r\n  // hasCheckedForNew\r\n\r\n  private recursiveFindChangesOld(oldProductStructure: ProductStructureCompare, newProductStructure: ProductStructureCompare) {\r\n    oldProductStructure.children.forEach((oldVersionProduct, index) => {\r\n      const newVersionProduct = newProductStructure.children.find(el => el.code === oldVersionProduct.code && !el.hasCheckedForQuantity);\r\n      if (!newVersionProduct) {\r\n        oldVersionProduct.isDeleted = true;\r\n        this.hasChanges = true;\r\n        if (oldVersionProduct.children) {\r\n          this.markAsDeleted(oldVersionProduct);\r\n        }\r\n      }\r\n      if (newVersionProduct) {\r\n        if (newVersionProduct.quantity !== oldVersionProduct.quantity) {\r\n          oldVersionProduct.hasQuantityChanged = true;\r\n          this.hasChanges = true;\r\n        }\r\n        newVersionProduct.hasCheckedForQuantity = true;\r\n\r\n        if (oldVersionProduct.children && newVersionProduct.children) {\r\n          this.recursiveFindChangesOld(oldVersionProduct, newVersionProduct);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  markAsDeleted(productStructure: ProductStructureCompare) {\r\n    productStructure.children.forEach(child => {\r\n      child.isDeleted = true;\r\n      this.hasChanges = true;\r\n      if (child.children) {\r\n        this.markAsDeleted(child);\r\n      }\r\n    });\r\n  }\r\n\r\n  private compareNewVersion() {\r\n    this.newStructure.children.forEach((newVersionProduct, index) => {\r\n      const oldVersionProduct = this.currentStructure.children?.find(el => el.code === newVersionProduct.code && !el.hasCheckedForQuantity);\r\n      newVersionProduct.parent = {\r\n        code: this.newStructure.code,\r\n        name: this.newStructure.name,\r\n        quantity: null\r\n      };\r\n      if (!oldVersionProduct) {\r\n        newVersionProduct.isNew = true;\r\n        this.hasChanges = true;\r\n        if (newVersionProduct.children) {\r\n          this.markAsNew(newVersionProduct);\r\n        }\r\n      }\r\n      if (oldVersionProduct) {\r\n        if (newVersionProduct.quantity !== oldVersionProduct.quantity) {\r\n          newVersionProduct.hasQuantityChanged = true;\r\n          this.hasChanges = true;\r\n        }\r\n        oldVersionProduct.hasCheckedForQuantity = true;\r\n        if (oldVersionProduct.children && newVersionProduct.children) {\r\n          this.recursiveFindChangesNew(newVersionProduct, oldVersionProduct);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private recursiveFindChangesNew(newVersionProductParent: ProductStructureCompare, oldProductStructure: ProductStructureCompare) {\r\n    newVersionProductParent.children.forEach((newVersionProduct, index) => {\r\n      newVersionProduct.parent = {\r\n        code: newVersionProductParent.code,\r\n        name: newVersionProductParent.name,\r\n        parent: newVersionProductParent.parent,\r\n        quantity: null\r\n      };\r\n      const oldVersionProduct = oldProductStructure.children.find(el => el.code === newVersionProduct.code && !el.hasCheckedForQuantity);\r\n\r\n      if (!oldVersionProduct) {\r\n        newVersionProduct.isNew = true;\r\n        this.hasChanges = true;\r\n        if (newVersionProduct.children) {\r\n          this.markAsNew(newVersionProduct);\r\n        }\r\n      }\r\n\r\n      if (oldVersionProduct) {\r\n        if (newVersionProduct.quantity !== oldVersionProduct.quantity) {\r\n          newVersionProduct.hasQuantityChanged = true;\r\n          this.hasChanges = true;\r\n        }\r\n        oldVersionProduct.hasCheckedForQuantity = true;\r\n        if (newVersionProduct.children && oldVersionProduct.children) {\r\n          this.recursiveFindChangesNew(newVersionProduct, oldVersionProduct);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  isCycle(parentProduct: ProductStructureCompare, code: string) {\r\n    if (parentProduct.code === code) return true;\r\n    if (parentProduct.parent) return this.isCycle(parentProduct.parent, code);\r\n  }\r\n\r\n  isCycleOnStructure(ancestorProduct: AncestorProductStructureCompare, code: string) {\r\n    if (ancestorProduct.nomenclature__code === code) {\r\n      return true;\r\n    } else {\r\n      if (!ancestorProduct.parent_id) {\r\n        return false;\r\n      }\r\n      const nextParent = this.ancestorsProducts.find(el => el.id === ancestorProduct.parent_id);\r\n      return this.isCycleOnStructure(nextParent, code);\r\n    }\r\n  }\r\n\r\n  markAsNew(productStructure: ProductStructureCompare) {\r\n    productStructure.children.forEach(child => {\r\n      child.isNew = true;\r\n      this.hasChanges = true;\r\n      if (child.children) {\r\n        this.markAsNew(child);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Upload Product Structure\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div *ngIf=\"!isLoading; else loading\" class=\"upload-product-structure\">\r\n    <div\r\n      *ngIf=\"error\"\r\n      class=\"upload-product-structure__error\"\r\n      [class.upload-product-structure__error_upload]=\"showErrorUpload\"\r\n    >\r\n      {{error}}\r\n    </div>\r\n    <div\r\n      *ngIf=\"!showErrorUpload\"\r\n      class=\"upload-product-structure__uploader\"\r\n    >\r\n      <pek-upload-file\r\n        (selectFile)=\"selectFile($event)\"\r\n        (removeFile)=\"removeFile()\"\r\n        [fileFormat]=\"'excel'\"\r\n      ></pek-upload-file>\r\n    </div>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n\r\n  <div *ngIf=\"!isLoading\">\r\n    <button\r\n      *ngIf=\"!showErrorUpload; else continueLoading\"\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Upload\"\r\n      (click)=\"previewStructure()\"\r\n      [disabled]=\"!fileToUpload || isLoading || showErrorUpload\"\r\n    ></button>\r\n  </div>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #loading>\r\n  <div class=\"upload-product-structure__text\">\r\n    <div class=\"upload-message\">\r\n      <p>The structure is being loaded.</p>\r\n      <p>Please don't close the window.</p>\r\n      <p>The window will close automatically after a successful download.</p>\r\n    </div>\r\n    <div class=\"upload-product-structure__spinner\">\r\n      <i class=\"pi pi-spin pi-spinner\"></i>\r\n      <p>Pending...</p>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #continueLoading>\r\n  <div>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-warning mr-2\"\r\n      label=\"Cancel Uploading\"\r\n      (click)=\"onCancel()\"\r\n    ></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Continue Uploading\"\r\n      (click)=\"onContinueUpdate()\"\r\n    ></button>\r\n  </div>\r\n</ng-template>\r\n","import {Nomenclature} from '@shared/models/nomenclature';\r\nimport {Locator} from '../../warehouse/models/locator';\r\nimport {SerialNumber} from '../../procurement/models/invoice';\r\n\r\nexport class Product {\r\n  readonly id: number;\r\n  root_id?: number;\r\n  quantity?: number;\r\n  required_quantity?: number;\r\n  nomenclature?: Nomenclature;\r\n  position?: number;\r\n  task_required_quantity?: number;\r\n  group_uid?: number;\r\n  countProducts?: number;\r\n  product?: Product;\r\n  products?: Product[];\r\n  serial_number?: SerialNumber;\r\n  is_scanned?: boolean;\r\n  is_scanned_root?: boolean;\r\n  checkedForGeneration?: boolean;\r\n  parent?: number;\r\n  lft?: number;\r\n  rght?: number;\r\n  locator?: Locator;\r\n  level?: number;\r\n  tree_id?: number;\r\n}\r\n\r\nexport class ProductFile {\r\n  readonly id: number;\r\n  file: string;\r\n  product_id: number;\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n\r\nimport {ProductStructureRouting} from './product-structure.routing';\r\nimport {\r\n  ProductStructureProductsListComponent\r\n} from './components/product-structure-products-list/product-structure-products-list.component';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport {\r\n  ProductStructureProductComponent\r\n} from './components/product-structure-product/product-structure-product.component';\r\nimport {MakeRootProductComponent} from './modals/make-root-product/make-root-product.component';\r\nimport {MakeProductionListComponent} from './modals/make-production-list/make-production-list.component';\r\nimport {TechnologiesComponent} from './components/technologies/technologies.component';\r\nimport {PrefixesComponent} from './components/prefixes/prefixes.component';\r\nimport {CreateEditTechnologyComponent} from './modals/create-edit-technology/create-edit-technology.component';\r\nimport {CreateEditPrefixComponent} from './modals/create-edit-prefix/create-edit-prefix.component';\r\nimport {\r\n  ProductStructureLayoutComponent\r\n} from './components/product-structure-layout/product-structure-layout.component';\r\nimport {LayoutModule} from '../layout/layout.module';\r\nimport {AddProductComponent} from './modals/add-product/add-product.component';\r\nimport {CreateEditRootProductComponent} from './modals/create-edit-root-product/create-edit-root-product.component';\r\nimport { EditProductComponent } from './modals/edit-product/edit-product.component';\r\nimport {DragDropModule} from '@angular/cdk/drag-drop';\r\nimport { UploadProductStructureComponent } from './modals/upload-product-structure/upload-product-structure.component';\r\nimport { ProductFilesComponent } from './modals/product-files/product-files.component';\r\nimport {CreateEditProductFormComponent} from './components/create-edit-product-form/create-edit-product-form.component';\r\nimport { ProductStructureCategoriesComponent } from './components/product-structure-categories/product-structure-categories.component';\r\nimport {\r\n  CreateEditProductStructureCategoryComponent\r\n} from './modals/create-edit-product-structure-category/create-edit-product-structure-category.component';\r\nimport {AddTechnicalEquipmentComponent} from './modals/add-technical-equipment/add-technical-equipment.component';\r\nimport { TechnicalEquipmentsTableComponent } from './components/create-edit-product-form/components/technical-equipments-table/technical-equipments-table.component';\r\nimport { EditTechnicalEquipmentComponent } from './components/create-edit-product-form/components/technical-equipments-table/edit-technical-equipment/edit-technical-equipment.component';\r\nimport { NomenclatureFilesComponent } from './components/create-edit-product-form/components/nomenclature-files/nomenclature-files.component';\r\nimport {CompareStructureComponent} from './modals/compare-structure/compare-structure.component';\r\nimport { SerialConfirmationComponent } from './modals/serial-confirmation/serial-confirmation.component';\r\nimport {CreateEditSerialTypeComponent} from './modals/create-edit-serial-type/create-edit-serial-type.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProductStructureProductsListComponent,\r\n    CreateEditRootProductComponent,\r\n    ProductStructureProductComponent,\r\n    MakeRootProductComponent,\r\n    MakeProductionListComponent,\r\n    TechnologiesComponent,\r\n    PrefixesComponent,\r\n    CreateEditTechnologyComponent,\r\n    CreateEditPrefixComponent,\r\n    ProductStructureLayoutComponent,\r\n    AddProductComponent,\r\n    EditProductComponent,\r\n    UploadProductStructureComponent,\r\n    ProductFilesComponent,\r\n    CreateEditProductFormComponent,\r\n    ProductStructureCategoriesComponent,\r\n    CreateEditProductStructureCategoryComponent,\r\n    AddTechnicalEquipmentComponent,\r\n    TechnicalEquipmentsTableComponent,\r\n    EditTechnicalEquipmentComponent,\r\n    NomenclatureFilesComponent,\r\n    CompareStructureComponent,\r\n    SerialConfirmationComponent,\r\n    CreateEditSerialTypeComponent,\r\n  ],\r\n  exports: [\r\n    CreateEditProductFormComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ProductStructureRouting,\r\n    SharedModule,\r\n    LayoutModule,\r\n    DragDropModule,\r\n  ]\r\n})\r\nexport class ProductStructureModule {\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {\r\n  ProductStructureProductsListComponent\r\n} from './components/product-structure-products-list/product-structure-products-list.component';\r\nimport {\r\n  ProductStructureProductComponent\r\n} from './components/product-structure-product/product-structure-product.component';\r\nimport {TechnologiesComponent} from './components/technologies/technologies.component';\r\nimport {PrefixesComponent} from './components/prefixes/prefixes.component';\r\nimport {\r\n  ProductStructureLayoutComponent\r\n} from './components/product-structure-layout/product-structure-layout.component';\r\nimport {\r\n  ProductStructureCategoriesComponent\r\n} from './components/product-structure-categories/product-structure-categories.component';\r\nimport {WarehouseSerialTypesComponent} from './components/warehouse-serial-types/warehouse-serial-types.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProductStructureLayoutComponent,\r\n    children: [\r\n      {path: '', redirectTo: 'products', pathMatch: 'full'},\r\n      {\r\n        path: 'products', children: [\r\n          {path: '', title: 'Products', component: ProductStructureProductsListComponent},\r\n          {path: 'structure/:id', title: 'Products', component: ProductStructureProductComponent}\r\n        ]\r\n      },\r\n      {path: 'technologies', title: 'Technologies', component: TechnologiesComponent},\r\n      {path: 'prefixes', title: 'Prefixes', component: PrefixesComponent},\r\n      {path: 'categories', title: 'Categories', component: ProductStructureCategoriesComponent},\r\n      {path: 'serial-types', title: 'Serial Number Types', component: WarehouseSerialTypesComponent},\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ProductStructureRouting {\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable, of} from 'rxjs';\r\nimport {Category} from '../models/category';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  CreateEditWarehouseCategoryComponent\r\n} from '../../warehouse/modals/create-edit-warehouse-category/create-edit-warehouse-category.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CategoriesService {\r\n  API_URL = environment.base_url + environment.product_structure_url;\r\n  readonly url = 'categories/';\r\n\r\n  categories: Category[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Category[]> {\r\n    if (this.categories) {\r\n      return of(this.categories);\r\n    }\r\n\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Category[] }>(this.API_URL + this.url + qString).pipe(map(response => {\r\n      let categories = response.data;\r\n\r\n      categories.forEach(category => {\r\n        if (!category.parent) category.lft = category.tree_id;\r\n      });\r\n\r\n      categories.sort((a, b) => a.lft - b.lft);\r\n      this.categories = categories;\r\n      return categories;\r\n    }));\r\n  }\r\n\r\n  create(category: Partial<Category>): Observable<Category> {\r\n    return this.httpClient.post<{ data: Category }>(this.API_URL + this.url, category).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartly(category: Partial<Category>): Observable<Category> {\r\n    return this.httpClient.patch<{ data: Category }>(this.API_URL + this.url + `${category.id}/`, category).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(category: Category): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${category.id}/`);\r\n  };\r\n\r\n  move(move: any, categoryId: number): Observable<Category> {\r\n    return this.httpClient.post<{ data: Category }>(this.API_URL + this.url + `${categoryId}/move/`, move).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createEditWarehouseCategoryModal(type: ModalActionType, category?: Category): Observable<Category> {\r\n    return this.dialog\r\n      .open<CreateEditWarehouseCategoryComponent>(CreateEditWarehouseCategoryComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, category},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {ProductPrefix} from '../models/prefix';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {\r\n  CreateEditTechnologyComponent,\r\n} from '../modals/create-edit-technology/create-edit-technology.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {CreateEditPrefixComponent} from '../modals/create-edit-prefix/create-edit-prefix.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PrefixService {\r\n  readonly API_URL = environment.base_url + environment.product_structure_url;\r\n  readonly url = 'xls_manufactured_prefixes/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(): Observable<ProductPrefix[]> {\r\n    return this.httpClient.get<{ data: ProductPrefix[] }>(this.API_URL + this.url).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(prefix: Partial<ProductPrefix>): Observable<ProductPrefix> {\r\n    return this.httpClient.post<{ data: ProductPrefix }>(this.API_URL + this.url, prefix).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(prefix: Partial<ProductPrefix>): Observable<ProductPrefix> {\r\n    return this.httpClient.patch<{ data: ProductPrefix }>(this.API_URL + this.url + `${prefix.id}/`, prefix).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${id}/`);\r\n  }\r\n\r\n  createEditPrefix(type: ModalActionType, prefix?: ProductPrefix): Observable<ProductPrefix> {\r\n    return this.dialog\r\n      .open<CreateEditPrefixComponent>(CreateEditPrefixComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, prefix},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {Observable, of} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  CreateEditProductStructureCategoryComponent\r\n} from '../modals/create-edit-product-structure-category/create-edit-product-structure-category.component';\r\nimport {ProductStructureCategory} from '../models/product-structure-category';\r\nimport {Product} from '../models/product';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ProductStructureCategoryService {\r\n\r\n  API_URL = environment.base_url + environment.product_structure_url;\r\n  readonly url = 'root_categories/';\r\n\r\n  rootCategories: ProductStructureCategory[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(): Observable<ProductStructureCategory[]> {\r\n    if (this.rootCategories) {\r\n      return of(this.rootCategories);\r\n    }\r\n\r\n    return this.httpClient.get<{ data: ProductStructureCategory[] }>(this.API_URL + 'root_categories/').pipe(map(response => {\r\n      let categories = response.data;\r\n\r\n      categories.forEach(category => {\r\n        if (!category.parent) category.lft = category.tree_id;\r\n      });\r\n\r\n      categories.sort((a, b) => a.lft - b.lft);\r\n      this.rootCategories = categories;\r\n      return categories;\r\n    }));\r\n  }\r\n\r\n  create(category: Partial<ProductStructureCategory>): Observable<ProductStructureCategory> {\r\n    return this.httpClient.post<{ data: ProductStructureCategory }>(this.API_URL + this.url, category).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartly(category: Partial<ProductStructureCategory>): Observable<ProductStructureCategory> {\r\n    return this.httpClient.patch<{ data: ProductStructureCategory }>(this.API_URL + this.url + `${category.id}/`, category).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(category: ProductStructureCategory): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${category.id}/`);\r\n  };\r\n\r\n  move(move: any, categoryId: number): Observable<ProductStructureCategory> {\r\n    return this.httpClient.post<{data: ProductStructureCategory}>(this.API_URL + this.url + `${categoryId}/move/`, move).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createEditCategory(type: ModalActionType, category?: ProductStructureCategory): Observable<ProductStructureCategory> {\r\n    return this.dialog\r\n      .open<CreateEditProductStructureCategoryComponent>(CreateEditProductStructureCategoryComponent, {\r\n        width: '42rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-picker',\r\n        data: {type, category},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {forkJoin, map, Observable} from 'rxjs';\r\nimport {Product, ProductFile} from '../models/product';\r\nimport {environment} from '@env/environment';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {AddProductComponent} from '../modals/add-product/add-product.component';\r\nimport {CreateEditRootProductComponent} from '../modals/create-edit-root-product/create-edit-root-product.component';\r\nimport {EditProductComponent} from '../modals/edit-product/edit-product.component';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {UploadProductStructureComponent} from '../modals/upload-product-structure/upload-product-structure.component';\r\nimport {ProductFilesComponent} from '../modals/product-files/product-files.component';\r\nimport {CompareStructureComponent} from '../modals/compare-structure/compare-structure.component';\r\nimport {ProductStructureCompareResult} from '../models/product-structure-compare-result';\r\nimport {CompareChangedCodeName} from '../models/compare-changed-code-name';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ProductService {\r\n\r\n  API_URL = environment.base_url + environment.product_structure_url;\r\n  private readonly url = 'products/';\r\n  private readonly;\r\n  formData = new FormData();\r\n\r\n\r\n  constructor(\r\n    private readonly httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(): Observable<Product[]> {\r\n    return this.httpClient.get<{ data: Product[] }>(this.API_URL + this.url).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  // TODO  all\r\n  getRoots(): Observable<Product[]> {\r\n    return this.httpClient.get<{ data: Product[] }>(this.API_URL + 'products_roots/all/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getTree(id: number): Observable<Product[]> {\r\n    return this.httpClient.get<{ data: Product[] }>(this.API_URL + 'product_tree/' + `${id}/`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartly(product: Partial<Product>) {\r\n    return this.httpClient.patch<{ data: Product }>(this.API_URL + this.url + product.id + '/', product).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${id}/`);\r\n  }\r\n\r\n  copyStructure(send: { nomenclature_id: number, parent_id: number, name: string }): Observable<Product[]> {\r\n    return this.httpClient.post<{ data: Product[] }>(this.API_URL + this.url + 'product_structure_copy/', send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  move(move: any, productId: number): Observable<Product> {\r\n    return this.httpClient.post<{ data: Product }>(this.API_URL + this.url + `${productId}/move/`, move).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getProductFiles(productId: number): Observable<ProductFile[]> {\r\n    return this.httpClient.get<{ data: ProductFile[] }>(this.API_URL + `product_files/${productId}/`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  severalUploadFiles(productId: number, files: File[]): Observable<ProductFile[]> {\r\n    const arrayFormData: FormData[] = [];\r\n\r\n    files.forEach(file => {\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n      arrayFormData.push(formData);\r\n    });\r\n\r\n    return forkJoin(...arrayFormData.map(formData => this.httpClient.post<{ data: ProductFile }>(this.API_URL + `product_files/${productId}/`, formData).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  removeProductFile(fileId: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + `file_delete/${fileId}/`, null);\r\n  }\r\n\r\n  downloadProductFile(fileId: number): Observable<Blob> {\r\n    return this.httpClient.get(this.API_URL + `file_download/${fileId}/`, {responseType: 'blob'});\r\n  }\r\n\r\n  uploadProductStructure(\r\n    data: {\r\n      file_xls: File,\r\n      root_product_id: number,\r\n      passed_codes?: string,\r\n      changed_names: { code: string, selected_name: string }[],\r\n    }): Observable<any> {\r\n    this.formData = new FormData();\r\n\r\n    this.createFormData(data);\r\n\r\n    return this.httpClient.post(this.API_URL + 'products/import_products/', this.formData).pipe(\r\n      map(response => response)\r\n    );\r\n  }\r\n\r\n  createFormData(obj, subKeyStr = '') {\r\n    for (const i in obj) {\r\n      const value = obj[i];\r\n      const subKeyStrTrans = subKeyStr ? subKeyStr + '[' + i + ']' : i;\r\n\r\n      if (typeof (value) === 'string' || typeof (value) === 'number' || typeof (value) === 'boolean') {\r\n        // @ts-ignore\r\n        this.formData.append(subKeyStrTrans, value);\r\n\r\n      } else if (typeof (value) === 'object') {\r\n        if (value instanceof File) {\r\n          this.formData.append(subKeyStrTrans, value);\r\n        } else {\r\n          this.createFormData(value, subKeyStrTrans);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  compare_structure(\r\n    data: {\r\n      file_xls: File,\r\n      root_product_id: number\r\n    }): Observable<{ data: ProductStructureCompareResult }> {\r\n    const formData = new FormData();\r\n\r\n    for (const key in data) {\r\n      formData.append(key, data[key]);\r\n    }\r\n\r\n    return this.httpClient.post<{ data: ProductStructureCompareResult }>(this.API_URL + 'products/prepare_structure_changes/', formData).pipe(\r\n      map(response => response)\r\n    );\r\n  }\r\n\r\n  makeRoot(productId: number, send: { category: number }): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + `${this.url}${productId}/copy_tree_to_root/`, send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  // TODO    \r\n  makeProductionList(send: any): Observable<any> {\r\n    return this.httpClient.post(environment.base_url + environment.production_url + 'list_creation_requests/', send);\r\n  }\r\n\r\n  addProduct(product: Partial<Product>): Observable<Product[]> {\r\n    return this.httpClient.post<{ data: Product[] }>(this.API_URL + this.url, product).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createEditRootProduct(type: ModalActionType, product?: Product): Observable<Nomenclature & Product[]> {\r\n    return this.dialog\r\n      .open<CreateEditRootProductComponent>(CreateEditRootProductComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, product},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  editProductModal(product: Product): Observable<{ nomenclature: Nomenclature, product: Product }> {\r\n    return this.dialog\r\n      .open<EditProductComponent>(EditProductComponent, {\r\n        width: '60rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: product,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  addProductModal(id: number): Observable<Product[]> {\r\n    return this.dialog\r\n      .open<AddProductComponent>(AddProductComponent, {\r\n        width: 'auto',\r\n        height: 'auto',\r\n        panelClass: 'modal-picker',\r\n        data: id,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  uploadProductStructureModal(productId: number, rootProductId): Observable<Product[]> {\r\n    return this.dialog\r\n      .open<UploadProductStructureComponent>(UploadProductStructureComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: {productId, rootProductId},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  showProductFiles(productId: number): Observable<void> {\r\n    return this.dialog\r\n      .open<ProductFilesComponent>(ProductFilesComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: productId,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n\r\n  openCompareStructureDialog(\r\n    newResult: any,\r\n    oldResult: any,\r\n    hasCyclingProduct: boolean,\r\n    hasChangedName: boolean,\r\n    changedNamesList: CompareChangedCodeName[]\r\n  ): Observable<boolean | { code: string, selected_name: string }[]> {\r\n    return this.dialog\r\n      .open<CompareStructureComponent>(CompareStructureComponent, {\r\n        width: '80rem',\r\n        height: 'auto',\r\n        data: {newResult, oldResult, hasCyclingProduct, hasChangedName, changedNamesList},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {SerialType} from '../models/serial-type';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {CreateEditSerialTypeComponent} from '../modals/create-edit-serial-type/create-edit-serial-type.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SerialTypeService {\r\n\r\n  API_URL = environment.base_url + environment.warehouse_url;\r\n  readonly url = 'serial_number_types/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<SerialType[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: SerialType[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(serialType: Partial<SerialType>): Observable<SerialType> {\r\n    return this.httpClient.post<{ data: SerialType }>(this.API_URL + this.url, serialType).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartly(serialType: Partial<SerialType>): Observable<SerialType> {\r\n    return this.httpClient.patch<{ data: SerialType }>(this.API_URL + this.url + serialType.id + '/', serialType).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(serialType: Partial<SerialType>): Observable<SerialType> {\r\n    return this.httpClient.put<{ data: SerialType }>(this.API_URL + this.url + serialType.id + '/', serialType).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(serialType: SerialType): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + serialType.id + '/');\r\n  }\r\n\r\n  createEditSerialTypeModal(type: ModalActionType, serialType?: SerialType): Observable<SerialType> {\r\n    return this.dialog\r\n      .open<CreateEditSerialTypeComponent>(CreateEditSerialTypeComponent, {\r\n        width: '65rem',\r\n        height: 'auto',\r\n        data: {type, serialType},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {TechnicalEquipment} from '../models/technical-equipment';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {AddTechnicalEquipmentComponent} from '../modals/add-technical-equipment/add-technical-equipment.component';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {\r\n  EditTechnicalEquipmentComponent\r\n} from '../components/create-edit-product-form/components/technical-equipments-table/edit-technical-equipment/edit-technical-equipment.component';\r\nimport {Technology} from '../models/technology';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TechnicalEquipmentService {\r\n  readonly API_URL = environment.base_url + environment.product_structure_url;\r\n  readonly url = 'technical_equipment/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) { }\r\n\r\n  get(query?: QuerySearch[]): Observable<TechnicalEquipment[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: TechnicalEquipment[] }>(this.API_URL + this.url + qString).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(technicalEquipment: Partial<TechnicalEquipment>): Observable<TechnicalEquipment> {\r\n    return this.httpClient.post<{ data: TechnicalEquipment }>(this.API_URL + this.url, technicalEquipment).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(technicalEquipment: Partial<TechnicalEquipment>): Observable<TechnicalEquipment> {\r\n    return this.httpClient.patch<{ data: TechnicalEquipment }>(this.API_URL + this.url + `${technicalEquipment.id}/`, technicalEquipment).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  bulk_update(nomenclatureId: number, technical_quipment: TechnicalEquipment[]): Observable<any> {\r\n    return this.httpClient.post<{ data: TechnicalEquipment }>(this.API_URL + 'nomenclatures/', technical_quipment).pipe(\r\n      map(response => response.data)\r\n    );\r\n  //  bulk_update_technical_equipments\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${id}/`);\r\n  }\r\n\r\n  openAddTechnicalEquipment(technologies: Technology[]): Observable<{ nomenclature_in_use: Nomenclature, quantity: number, technology: Technology }> {\r\n    return this.dialog\r\n      .open<AddTechnicalEquipmentComponent>(AddTechnicalEquipmentComponent, {\r\n        width: '110rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {technologies},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openEditTechnicalEquipment(technicalEquipment: TechnicalEquipment, technologies: Technology[]): Observable<{ nomenclature_in_use: Nomenclature, quantity: number, technology: Technology }> {\r\n    return this.dialog\r\n      .open<EditTechnicalEquipmentComponent>(EditTechnicalEquipmentComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {technicalEquipment: technicalEquipment, technologies},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable, of} from 'rxjs';\r\nimport {Technology} from '../models/technology';\r\nimport {map} from 'rxjs/operators';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  CreateEditTechnologyComponent,\r\n} from '../modals/create-edit-technology/create-edit-technology.component';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TechnologyService {\r\n\r\n  API_URL = environment.base_url + environment.product_structure_url;\r\n  readonly url = 'technologies/';\r\n\r\n  technologies: Technology[];\r\n\r\n  constructor(\r\n    private readonly httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(): Observable<Technology[]> {\r\n    if (this.technologies) {\r\n      return of(this.technologies);\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Technology[] }>(this.API_URL + this.url).pipe(\r\n      map(response => {\r\n        const technologies = response.data;\r\n        this.technologies = technologies;\r\n        return technologies;\r\n      }));\r\n  }\r\n\r\n  create(technology: Partial<Technology>): Observable<Technology> {\r\n    return this.httpClient.post<{ data: Technology }>(this.API_URL + this.url, technology).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(technology: Partial<Technology>): Observable<Technology> {\r\n    return this.httpClient.put<{ data: Technology }>(this.API_URL + this.url + `${technology.id}/`, technology).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(technology: Technology): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${technology.id}/`);\r\n  };\r\n\r\n  createEditTechnology(type: ModalActionType, technology?: Technology): Observable<Technology> {\r\n    return this.dialog\r\n      .open<CreateEditTechnologyComponent>(CreateEditTechnologyComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, technology},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {TreeService} from '@shared/services/tree.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {cloneDeep} from 'lodash-es';\r\nimport {PurchasingCategoryService} from '../../services/purchasing-category.service';\r\nimport {PurchaseCategory} from '../../models/purchase-category';\r\n\r\n@Component({\r\n  selector: 'pek-purchasing-categories',\r\n  templateUrl: './purchasing-categories.component.html',\r\n  styleUrls: ['./purchasing-categories.component.scss']\r\n})\r\nexport class PurchasingCategoriesComponent implements OnInit {\r\n  isLoading = true;\r\n  purchasingCategories: PurchaseCategory[] = [];\r\n  selectedNode: TreeNode<PurchaseCategory>;\r\n  categoriesTree: TreeNode<PurchaseCategory>[] = [];\r\n\r\n  expanseMap = {};\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Category',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditCategory()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveCategory()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  constructor(\r\n    private purchasingCategoryService: PurchasingCategoryService,\r\n    private readonly treeService: TreeService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getPurchasingCategory();\r\n  }\r\n\r\n  getPurchasingCategory() {\r\n    this.purchasingCategoryService.getAll().subscribe(categories => {\r\n      this.purchasingCategories = categories;\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.categoriesTree) {\r\n      this.treeService.mapExpansion(this.categoriesTree, this.expanseMap);\r\n    }\r\n\r\n    this.categoriesTree = this.treeService.createTree(this.purchasingCategories, this.expanseMap);\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  private onEditCategory() {\r\n    this.purchasingCategoryService.createEditCategory('edit', this.selectedNode.data).subscribe(category => {\r\n      if (category) {\r\n        const index = this.purchasingCategories.findIndex(s => s.id === category.id);\r\n        this.purchasingCategories[index] = category;\r\n        this.selectedNode = null;\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n  public onCreateCategory() {\r\n    this.purchasingCategoryService.createEditCategory('create').subscribe(category => {\r\n      if (category) {\r\n        this.purchasingCategories.push(category);\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n  private onRemoveCategory() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.purchasingCategoryService.delete(this.selectedNode.data.id).subscribe(() => {\r\n          const removeChildren = (id: number) => {\r\n            const ids: number[] = this.purchasingCategories.filter(p => p.parent === id).map(p => p.id);\r\n            this.purchasingCategories = [...this.purchasingCategories.filter(p => p.parent !== id)];\r\n\r\n            ids.forEach(id => {\r\n              removeChildren(id);\r\n            });\r\n          };\r\n\r\n          removeChildren(this.selectedNode.data.id);\r\n\r\n          const index = this.purchasingCategories.findIndex(p => p.id === this.selectedNode.data.id);\r\n          this.purchasingCategories.splice(index, 1);\r\n          this.selectedNode = null;\r\n          this.createTree();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Procurement Categories</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"New Category\"\r\n        (click)=\"onCreateCategory()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          #dt\r\n          [value]=\"categoriesTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedNode\"\r\n          [scrollable]=\"true\"\r\n          scrollHeight=\"calc(100vh - 19.2rem)\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedNode\">Choose the Category to edit</p>\r\n              <p-menubar class=\"ml-auto mr-2\" [model]=\"menuItems\" [class.disabled]=\"!selectedNode\"></p-menubar>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-down\"\r\n                label=\"Expand All\"\r\n                class=\"mr-2\"\r\n                (click)=\"onExpandAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-up\"\r\n                label=\"Collapse All\"\r\n                (click)=\"onCollapseAll()\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 35%; padding-left: 48px\">Name</th>\r\n              <th style=\"width: 35%\">Description</th>\r\n              <th style=\"width: 30%\" class=\"text-center\">Material</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr\r\n              [ttRow]=\"rowNode\"\r\n              [ttSelectableRow]=\"rowNode\"\r\n            >\r\n              <td style=\"width: 35%\">\r\n                <div class=\"table-toggle\">\r\n                  <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                  <span>{{rowData.name}}</span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 35%\">\r\n                {{rowData.description}}\r\n              </td>\r\n              <td style=\"width: 30%\" class=\"text-center\">\r\n                {{rowData.is_material ? 'Tangible' : 'Intangible'}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {OrderProduct} from '../../../procurement/models/order-product';\r\nimport {BehaviorSubject, iif, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {Router} from '@angular/router';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-purchasing-chain-creation-list',\r\n  templateUrl: './purchasing-chain-creation-list.component.html',\r\n  styleUrls: ['./purchasing-chain-creation-list.component.scss']\r\n})\r\nexport class PurchasingChainCreationListComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  isCanOrder = false;\r\n  isCanAddOrder = false;\r\n  isShowAll = false;\r\n\r\n  statuses = [\r\n    {label: 'ORDERED', value: 'ordered'},\r\n    {label: 'NOT ORDERED', value: 'not_ordered'},\r\n    {label: 'PARTLY ORDERED', value: 'partially_ordered'}\r\n  ];\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    nomenclature__name: [null],\r\n    categories_ids: [null],\r\n    request_date: [null],\r\n    status: ['not_ordered']\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProducts: OrderProduct[] = [];\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  name$: Subject<void> = new Subject<void>();\r\n\r\n  orderProducts$: Observable<OrderProduct[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      iif(() =>\r\n          !this.isShowAll,\r\n        this.orderProductService.getGroupedPurchasedForPagination(this.query).pipe(\r\n          tap(response => this.productsCount = response.count),\r\n          map(response => response.results.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          })),\r\n        ),\r\n        this.orderProductService.getGroupedPurchased(this.query).pipe(\r\n          tap(products => this.productsCount = products.length),\r\n          map(products => products.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          }))\r\n        )\r\n      ),\r\n    ),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly orderService: OrderService,\r\n    private readonly modalService: ModalService,\r\n    private readonly router: Router,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  setProductStatus(product: OrderProduct) {\r\n    let status: string;\r\n\r\n    if (product.ordered_quantity >= product.initial_quantity) {\r\n      status = 'A0';\r\n    } else if (product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0) {\r\n      status = 'A1';\r\n    } else {\r\n      status = 'A2';\r\n    }\r\n\r\n    return status;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProducts = [];\r\n\r\n    this.onCheckOrder();\r\n    this.onCheckAddOrder();\r\n    this.getIsCleanUnnecessary();\r\n    this.getIsDeleted();\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n      {name: 'is_purchased_only', value: true},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: true},)\r\n    }\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  getSmallDescription(description: string) {\r\n    if (description && description?.length > 40) return description.substring(0, 40) + '...';\r\n    else return description\r\n  }\r\n\r\n  onCheckOrder() {\r\n    this.isCanOrder = true;\r\n\r\n    this.selectedProducts.forEach(element => {\r\n      if (element.ordered_quantity >= element.initial_quantity) {\r\n        this.isCanOrder = false;\r\n      }\r\n    });\r\n\r\n    if (this.selectedProducts.length === 0) {\r\n      this.isCanOrder = false;\r\n    }\r\n  }\r\n\r\n  onCheckAddOrder() {\r\n    this.isCanAddOrder = this.selectedProducts.every(node => node.status !== 'A0');\r\n  }\r\n\r\n  getIsCleanUnnecessary() {\r\n    if (this.selectedProducts) {\r\n      return this.selectedProducts.every(node => node.status === 'A1');\r\n    }\r\n  }\r\n\r\n  getIsDeleted() {\r\n    if (this.selectedProducts) {\r\n      return this.selectedProducts.every(node => node.status === 'A2');\r\n    }\r\n  }\r\n\r\n  onCloseOrders() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        const partlyOrderedProducts = this.selectedProducts.filter(n => n.status === 'A1');\r\n\r\n        if (partlyOrderedProducts.length > 0) {\r\n\r\n          console.log(partlyOrderedProducts);\r\n          this.selectedProducts = [];\r\n          this.orderProductService.closeOrders(partlyOrderedProducts).subscribe(() => this.search$.next());\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onDeleteOrders() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        const notOrderedProducts = this.selectedProducts.filter(n => n.status === 'A2');\r\n\r\n        if (notOrderedProducts.length > 0) {\r\n          this.selectedProducts = [];\r\n          this.orderProductService.deleteSeveral(notOrderedProducts).subscribe(() => this.search$.next());\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreateChain() {\r\n    this.orderService.openCreateChainModal(this.selectedProducts, 'purchase').subscribe(order => {\r\n      if (order) {\r\n        this.router.navigate(['/purchasing/chains/order', order.id]);\r\n      }\r\n    });\r\n  }\r\n\r\n  onAddProductsToChain() {\r\n    this.orderService.openAddProductsToChainModal(this.selectedProducts, 'purchase').subscribe(order => {\r\n      if (order) {\r\n        this.search$.next();\r\n      }\r\n    });\r\n  }\r\n\r\n  onSelectCategories(ids: number[]) {\r\n    this.searchForm.get('categories_ids').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isShowAll = value;\r\n    this.search$.next()\r\n\r\n    if (!this.isShowAll) {\r\n      this.currentPage = 1\r\n    }\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Procurement Chain Creation</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        [disabled]=\"!selectedProducts || !isCanOrder\"\r\n        class=\"ml-auto mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Create Procurement Chain\"\r\n        (click)=\"onCreateChain()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder\"\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Add To Procurement Chain\"\r\n        (click)=\"onAddProductsToChain()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder || !getIsCleanUnnecessary()\"\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-check\"\r\n        label=\"Close Order\"\r\n        (click)=\"onCloseOrders()\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedProducts || selectedProducts.length === 0 || !isCanAddOrder || !getIsDeleted()\"\r\n        class=\"p-button-danger\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-times\"\r\n        label=\"Delete Order\"\r\n        (click)=\"onDeleteOrders()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form\r\n      [formGroup]=\"searchForm\"\r\n      class=\"form mb-3\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input\r\n              formControlName=\"nomenclature__name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n              type=\"text\"\r\n              pInputText\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Category</label>\r\n            <pek-multi-product-categories-picker (choiceCategories)=\"onSelectCategories($event)\"></pek-multi-product-categories-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Date</label>\r\n            <p-calendar\r\n              formControlName=\"request_date\"\r\n              dataType=\"date\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Status</label>\r\n            <p-dropdown\r\n              [options]=\"statuses\"\r\n              formControlName=\"status\"\r\n              optionValue=\"value\"\r\n              [showClear]=\"true\"\r\n              placeholder=\"Choose Status\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            ></p-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"multiple\"\r\n        dataKey=\"id\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 24.25rem)\"\r\n        [value]=\"orderProducts$ | async\"\r\n        [(selection)]=\"selectedProducts\"\r\n        (selectionChange)=\"onCheckOrder(); onCheckAddOrder();\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 4%\" class=\"text-center\">ID</th>\r\n            <th style=\"width: 10%\">Name</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Request Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Ordered Quantity</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Free Ordered Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">UOM</th>\r\n            <th style=\"width: 8%;\">Category</th>\r\n            <th style=\"width: 10%;\"> Description</th>\r\n            <th style=\"width: 6%;\" class=\"text-center\">Date</th>\r\n            <th style=\"width: 6%;\" class=\"text-center\">Request Type</th>\r\n            <th class=\"text-center\" style=\"width: 6%;\">Chains</th>\r\n            <th style=\"width: 9%;\">Root Lists</th>\r\n            <th style=\"width: 9%;\">Production Lists</th>\r\n            <th class=\"text-center\" style=\"width: 7%;\">Status</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"product\">\r\n            <td style=\"width: 3%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 4%\" class=\"text-center\">{{product.request_id}}</td>\r\n            <td style=\"width: 10%\">{{product.nomenclature.name}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{product.initial_quantity}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{product.ordered_quantity}}</td>\r\n            <td style=\"width: 7%\" class=\"text-center\">{{product.free_quantity_without_final_status ? product.free_quantity_without_final_status : 0}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              {{product.nomenclature.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs'}}\r\n            </td>\r\n            <td style=\"width: 8%;\">{{product.nomenclature.category?.name}}</td>\r\n            <td style=\"width: 10%;\">\r\n              <div class=\"word-break\">\r\n                {{getSmallDescription(product.nomenclature.description)}}\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{product.request_date |date:'dd/MM/yyyy'}}</td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              <ng-container *ngIf=\"product.request_type==1\">Auto</ng-container>\r\n              <ng-container *ngIf=\"product.request_type==0\">Manual</ng-container>\r\n            </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">\r\n              <ng-container *ngFor=\"let order of product.orders; let idx = index\">\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 1\"\r\n                   [routerLink]=\"['/procurement/chains/order/', order.id]\">\r\n                  {{order.id}}</a>\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 2\"\r\n                   [routerLink]=\"['/outsourcing/chains/order/', order.id]\">\r\n                  {{order.id}}<span *ngIf=\"idx !== product.orders.length - 1\">,</span></a>\r\n              </ng-container>\r\n            </td>\r\n\r\n            <td style=\"width: 9%;\">\r\n              <ng-container *ngFor=\"let list of product.root_production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.root_production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 9%;\">\r\n              <ng-container *ngFor=\"let list of product.production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 7%;\">\r\n              <ng-container *ngIf=\"product.ordered_quantity >= product.initial_quantity\">\r\n                <span class=\"badge badge_success\">ORDERED</span>\r\n              </ng-container>\r\n              <ng-container\r\n                *ngIf=\"product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0\"\r\n              >\r\n                <span class=\"badge badge_warning\">PARTLY ORDERED</span>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"product.ordered_quantity==0\">\r\n                <span class=\"badge badge_danger\">NOT ORDERED</span>\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"16\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n      <div\r\n        *ngIf=\"!isShowAll\"\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"productsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll(true)\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(false)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {Router} from '@angular/router';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {ListProduct} from '../../../warehouse/models/list-product';\r\nimport {BehaviorSubject, switchMap} from 'rxjs';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {Table} from 'primeng/table';\r\nimport {OrderStatusesTableComponent} from '@shared/components/order-statuses-table/order-statuses-table.component';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-purchasing-chains',\r\n  templateUrl: './purchasing-chains.component.html',\r\n  styleUrls: ['./purchasing-chains.component.scss']\r\n})\r\nexport class PurchasingChainsComponent implements OnInit {\r\n  @ViewChild('dt') dt: Table;\r\n  @ViewChild(OrderStatusesTableComponent)\r\n  orderStatusTableComponent: OrderStatusesTableComponent;\r\n\r\n  isShowStatuses = false;\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Chain',\r\n    items: [\r\n      {\r\n        label: 'Open Chain',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onGoToOderPage()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveChain()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    contains_nomenclature: [null],\r\n    supplier: [null],\r\n    order_root_list_id: [null],\r\n    active_status__in: [null],\r\n    created_after: [null],\r\n    created_before: [null],\r\n    root_production_list_products_root_categories: [null],\r\n    contains_nomenclatures_by_categories: [null],\r\n    contains_declined_payment: [null],\r\n    purchase_categories: [null]\r\n  });\r\n\r\n  orders: Order[] = [];\r\n  selectedOrder: Order;\r\n\r\n  isLoading = false;\r\n  isHideFilters = false;\r\n\r\n  nomenclaturesList: Nomenclature[] = [];\r\n  rootLists: any[] = [];\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  tableScrollHeight = '29.625rem';\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  firstPage: number = 0;\r\n  finalStatusSelected = false;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderService: OrderService,\r\n    private readonly router: Router,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.search$.pipe(\r\n      tap(() => this.prepareForSearch()),\r\n      switchMap(() => this.orderService.get(this.query)),\r\n      map(orders => this.orderService.modifyOrders(orders)),\r\n      tap(orders => this.orders = orders),\r\n      tap(() => this.generateNomenclaturesListAndRootLists()),\r\n      tap(() => this.isLoading = false),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  generateNomenclaturesListAndRootLists() {\r\n    this.orders.forEach(order => {\r\n      if (order.activeStatusDate) {\r\n        order.activeStatusDate = new Date(order.activeStatusDate);\r\n      }\r\n\r\n      order.order_products.forEach(orderProduct => {\r\n        if (!this.nomenclaturesList.includes(orderProduct.nomenclature)) {\r\n          this.nomenclaturesList.push(orderProduct.nomenclature);\r\n        }\r\n      });\r\n\r\n      order.root_production_list_products.forEach(root => this.rootLists.push(root));\r\n\r\n      this.rootLists = this.rootLists.map(root => {\r\n        return {\r\n          ...root,\r\n          fullName: `(${root.id}) ${root.nomenclature.code}~${root.nomenclature.name}`\r\n        };\r\n      });\r\n    });\r\n\r\n    this.nomenclaturesList = this.adapterService.removeDuplicates(this.nomenclaturesList, x => x.id);\r\n    this.rootLists = this.adapterService.removeDuplicates(this.rootLists, x => x.id);\r\n\r\n    this.nomenclaturesList.sort((a, b) => {\r\n      if (a.name < b.name) return -1;\r\n      if (a.name > b.name) return 1;\r\n      return 0;\r\n    });\r\n\r\n    this.rootLists.sort((a, b) => {\r\n      if (a.fullName < b.fullName) return -1;\r\n      if (a.fullName > b.fullName) return 1;\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  getRootLists(rootLists: ListProduct[]): { list: ListProduct, count?: number }[] {\r\n    const lists: { list: ListProduct, count?: number }[] = [];\r\n    rootLists.forEach((res: ListProduct) => {\r\n      const found = lists.find(el => el.list.nomenclature.name === res.nomenclature.name);\r\n      if (found) {\r\n        found.count++;\r\n      } else {\r\n        lists.push({list: res, count: 1});\r\n      }\r\n    });\r\n    return lists;\r\n  }\r\n\r\n  private onGoToOderPage() {\r\n    window.open('/purchasing/chains/order/' + this.selectedOrder?.id, '_blank');\r\n  }\r\n\r\n  onRemoveChain() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.orderService.delete(this.selectedOrder.id).subscribe(() => {\r\n          this.orders = this.orders.filter(x => x.id !== this.selectedOrder.id);\r\n          this.selectedOrder = null;\r\n\r\n          setTimeout(() => {\r\n            this.orderStatusTableComponent?.renderDates({first: this.firstPage});\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedOrder = null;\r\n    this.orders = [];\r\n\r\n    this.query = [\r\n      {name: 'accounting_type', value: 1},\r\n      {name: 'has_purchase_category', value: true},\r\n      {name: 'exclude_with_active_final_status', value:  !this.finalStatusSelected}\r\n    ];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    this.firstPage = 0;\r\n\r\n    this.orderStatusTableComponent?.renderDates({first: 0});\r\n    this.orders = this.orders.map(o => o);\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.searchForm.get('supplier').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectStatuses(ids: number[]) {\r\n    this.searchForm.get('active_status__in').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectRootCategories(ids: string) {\r\n    this.searchForm.get('root_production_list_products_root_categories').patchValue(ids);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategories(ids: number[]) {\r\n    this.searchForm.get('contains_nomenclatures_by_categories').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectPurchaseCategories(ids: number[]) {\r\n    this.searchForm.get('purchase_categories').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onCreatePurchaseChain() {\r\n    this.orderService.openCreateEmptyPurchaseChainModal().subscribe(order => {\r\n      if (order) {\r\n        this.router.navigate(['/purchasing/chains/order', order.id])\r\n      }\r\n    })\r\n  }\r\n\r\n  onToggleStatuses() {\r\n    this.isShowStatuses = !this.isShowStatuses;\r\n  }\r\n\r\n  onChangePage(page: number) {\r\n    this.firstPage = page;\r\n  }\r\n\r\n  onPage(evt: any) {\r\n    this.orderStatusTableComponent.renderDates(evt);\r\n  }\r\n\r\n  onSelectOrder() {\r\n    this.orderStatusTableComponent.selectedOrder = this.selectedOrder;\r\n  }\r\n\r\n  onSelectionOrder(order: Order) {\r\n    this.selectedOrder = order;\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.dt.paginator = value;\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Procurement Chains</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Create Procurement Chain\"\r\n        (click)=\"onCreatePurchaseChain()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n\r\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n      <div class=\"filters-visibility__header\">\r\n        <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n      </div>\r\n\r\n      <button\r\n        class=\"icon pi\"\r\n        [class.pi-angle-double-up]=\"!isHideFilters\"\r\n        [class.pi-angle-double-down]=\"isHideFilters\"\r\n        [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n        tooltipPosition=\"left\"\r\n      ></button>\r\n\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Nomenclature</label>\r\n              <p-dropdown\r\n                [filter]=\"true\"\r\n                [showClear]=\"true\"\r\n                [options]=\"nomenclaturesList\"\r\n                formControlName=\"contains_nomenclature\"\r\n                optionValue=\"id\"\r\n                optionLabel=\"name\"\r\n                placeholder=\"No Nomenclature Selected\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              ></p-dropdown>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Company</label>\r\n              <pek-company-picker (selectCompany)=\"onSelectCompany($event)\"></pek-company-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"row\">\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>Root List</label>\r\n                  <p-dropdown\r\n                    [filter]=\"true\"\r\n                    [showClear]=\"true\"\r\n                    [options]=\"rootLists\"\r\n                    formControlName=\"order_root_list_id\"\r\n                    (ngModelChange)=\"search$.next()\"\r\n                    optionValue=\"list.id\"\r\n                    optionLabel=\"fullName\"\r\n                    placeholder=\"No List Selected\"\r\n                  ></p-dropdown>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>Status</label>\r\n                  <pek-multi-statuses-picker\r\n                    (selectStatuses)=\"onSelectStatuses($event)\"\r\n                    (isFinalStatusSelected)=\"finalStatusSelected = $event\"\r\n                    [accountingType]=\"1\"\r\n                  ></pek-multi-statuses-picker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Purchase Categories</label>\r\n              <pek-multi-purchase-category-picker\r\n                (choiceCategories)=\"onSelectPurchaseCategories($event)\"></pek-multi-purchase-category-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"row\">\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>From</label>\r\n                  <p-calendar\r\n                    formControlName=\"created_after\"\r\n                    dataType=\"date\"\r\n                    [showButtonBar]=\"true\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                    (ngModelChange)=\"search$.next()\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>To</label>\r\n                  <p-calendar\r\n                    dataType=\"date\"\r\n                    formControlName=\"created_before\"\r\n                    [showButtonBar]=\"true\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                    (ngModelChange)=\"search$.next()\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Product Structure Categories</label>\r\n              <pek-multi-product-structure-categories-picker\r\n                (choiceCategories)=\"onSelectRootCategories($event)\"></pek-multi-product-structure-categories-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Warehouse Category</label>\r\n              <pek-multi-product-categories-picker\r\n                (choiceCategories)=\"onSelectCategories($event)\"></pek-multi-product-categories-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3 d-flex\">\r\n            <div class=\"form-group form-group_checkbox\">\r\n              <label>Declined</label>\r\n              <p-triStateCheckbox\r\n                formControlName=\"contains_declined_payment\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              ></p-triStateCheckbox>\r\n            </div>\r\n            <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"page__table\">\r\n      <div [ngClass]=\"{'d-none': !isShowStatuses}\">\r\n        <pek-order-statuses-table\r\n          [orders]=\"orders\"\r\n          [isLoading]=\"isLoading\"\r\n          (changePage)=\"onChangePage($event)\"\r\n          (selectOrder)=\"onSelectionOrder($event)\"\r\n        ></pek-order-statuses-table>\r\n      </div>\r\n\r\n      <div [ngClass]=\"{'d-none': isShowStatuses}\">\r\n        <p-table\r\n          #dt\r\n          [(first)]=\"firstPage\"\r\n          selectionMode=\"single\"\r\n          [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n          [scrollable]=\"true\"\r\n          dataKey=\"id\"\r\n          [paginator]=\"orders.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedOrder\"\r\n          [value]=\"orders\"\r\n          (onPage)=\"onPage($event)\"\r\n          (selectionChange)=\"onSelectOrder()\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"text-center\" style=\"width: 3%;\">#</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Date</th>\r\n              <th class=\"text-center\" style=\"width: 7%;\">Order ID</th>\r\n              <th class=\"text-center\" style=\"width: 15%;\">Supplier</th>\r\n              <th class=\"text-center\" style=\"width: 15%;\">Purchase category</th>\r\n              <th style=\"width: 15%;\">Comment</th>\r\n              <th style=\"width: 15%;\">Root Lists</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Status</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Completion</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"order\">\r\n              <td class=\"text-center\" style=\"width: 3%;\">{{i + 1}}</td>\r\n              <td class=\"text-center\" style=\"width: 10%;\">{{order.created | date:'dd/MM/yyyy'}}</td>\r\n              <td class=\"text-center\" style=\"width: 7%;\">{{order.id}}</td>\r\n              <td class=\"text-center\" style=\"width: 15%;\">{{order.supplier?.name}}</td>\r\n              <td class=\"text-center\" style=\"width: 15%;\">{{order.purchase_category?.name}}</td>\r\n              <td style=\"width: 15%;\">\r\n                <div class=\"word-break\">\r\n                  {{order.comment}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 15%;\">\r\n                <div class=\"word-break\"\r\n                     *ngFor=\"let item of getRootLists(order.root_production_list_products); let idx = index\">\r\n                  {{item.list.nomenclature.code}}~{{item.list.nomenclature.name}} ({{item.count}})\r\n                </div>\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 10%;\">{{order.status?.value}}</td>\r\n              <td class=\"text-center\" style=\"width: 10%;\">{{order?.activeStatusDate | date: 'dd/MM/yyyy'}}</td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"onShowAll(false)\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n        <div *ngIf=\"!dt.paginator && !isLoading && orders.length > 0\" class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"onShowAll(true)\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #actionButtons>\r\n  <div class=\"action-buttons\">\r\n    <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedOrder\"></p-menubar>\r\n    <button\r\n      class=\"ml-2\"\r\n      pButton\r\n      type=\"button\"\r\n      icon=\"pi pi-table\"\r\n      [label]=\"(isShowStatuses ? 'Close' : 'Open') +  ' Order Statuses'\"\r\n      (click)=\"onToggleStatuses()\"\r\n    ></button>\r\n  </div>\r\n</ng-template>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {NavigationLink} from '../../../layout/navigation-route';\r\n\r\n@Component({\r\n  selector: 'pek-purchasing-layout',\r\n  templateUrl: './purchasing-layout.component.html',\r\n  styleUrls: ['./purchasing-layout.component.scss']\r\n})\r\nexport class PurchasingLayoutComponent implements OnInit {\r\n  routes: NavigationLink[] = [\r\n    {label: 'Procurement Requests', commands: ['requests']},\r\n    {label: 'Procurement Chain Creation', commands: ['order-products']},\r\n    {label: 'Procurement Chains', commands: ['chains']},\r\n  ];\r\n\r\n  settingsRoutes: NavigationLink[] = [\r\n    {label: 'Procurement Categories', commands: ['categories']},\r\n    {label: 'Order Statuses', commands: ['statuses']},\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'General Procurement'\"\r\n  [routes]=\"routes\"\r\n  [settingsRoutes]=\"settingsRoutes\"\r\n></pek-header>\r\n<router-outlet></router-outlet>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {OrderPageComponent} from '@shared/components/order-page/order-page.component';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {MessageService} from 'primeng/api';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-purchasing-order-page',\r\n  templateUrl: './purchasing-order-page.component.html',\r\n  styleUrls: ['./purchasing-order-page.component.scss']\r\n})\r\nexport class PurchasingOrderPageComponent implements OnInit {\r\n  @ViewChild('orderPage') orderPage: OrderPageComponent;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    can_select_supplier: [false]\r\n  });\r\n  orderId: number;\r\n  isOrderLoading = true;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private messageService: MessageService,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly orderService: OrderService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('can_select_supplier').disable();\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.orderId = +id),\r\n    ).subscribe();\r\n  }\r\n\r\n  openOrderFiles() {\r\n    this.orderService.filesModal$.next();\r\n  }\r\n\r\n  editOrder() {\r\n    this.orderService.editOrderModal$.next();\r\n  }\r\n\r\n  loaded(order: Order) {\r\n    if (!order.can_select_supplier) {\r\n      this.form.get('can_select_supplier').enable();\r\n    } else {\r\n      this.form.get('can_select_supplier').setValue(true);\r\n      this.form.get('can_select_supplier').disable();\r\n    }\r\n    this.isOrderLoading = false;\r\n  }\r\n\r\n  tenderToggle($event: any) {\r\n    this.modalService.confirm('danger', 'confirm').subscribe(confirm => {\r\n      if (confirm) {\r\n        const isBlocked = this.orderPage.checkIfIsBlockedToTenderTransform();\r\n        if (isBlocked) {\r\n          this.messageService.add({severity: 'error', summary: `Existing Invoice or Proforma Invoices`,\r\n            detail: `Can't turn to tender with existing Invoice or Proforma Invoices!\\n Remove before turning to tender`});\r\n          this.form.get('can_select_supplier').setValue(false);\r\n        } else {\r\n\r\n          this.orderService.activateTenderSuppliers(this.orderId).subscribe(() => {\r\n            this.orderPage.clearSupplierRelatedFields();\r\n            this.form.get('can_select_supplier').setValue(true);\r\n            this.form.get('can_select_supplier').disable();\r\n          });\r\n        }\r\n      } else {\r\n        this.form.get('can_select_supplier').setValue(false);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"procurement-order-page\">\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <div class=\"page__title\">\r\n        <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>Order {{orderId}}</h1>\r\n      </div>\r\n      <div class=\"page__tools\">\r\n        <form class=\"align-items-center d-flex\" [formGroup]=\"form\">\r\n          <p-checkbox\r\n            inputId=\"binary\"\r\n            formControlName=\"can_select_supplier\"\r\n            [binary]=\"true\"\r\n            (onChange)=\"tenderToggle($event)\"\r\n          >\r\n          </p-checkbox>\r\n          <label class=\"capitalize ml-2 mr-3\">enable tender supplier required</label>\r\n        </form>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-file\"\r\n          label=\"Order Files\"\r\n          class=\"mr-2\"\r\n          (click)=\"openOrderFiles()\"\r\n          [disabled]=\"isOrderLoading\"\r\n        >\r\n        </button>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-pencil\"\r\n          label=\"Lead Date & Status\"\r\n          (click)=\"editOrder()\"\r\n          [disabled]=\"isOrderLoading\"\r\n        >\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <pek-order-page\r\n      #orderPage\r\n      [orderType]=\"'purchase'\"\r\n      (loaded)=\"loaded($event)\"\r\n      [orderId]=\"orderId\"\r\n    ></pek-order-page>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-purchasing-order-statuses',\r\n  templateUrl: './purchasing-order-statuses.component.html',\r\n  styleUrls: ['./purchasing-order-statuses.component.scss']\r\n})\r\nexport class PurchasingOrderStatusesComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"procurement-order-statuses\">\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <div class=\"page__title\">\r\n        <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>Order Statuses</h1>\r\n      </div>\r\n      <div class=\"page__tools\">\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <h2 class=\"mb-4\">Manual Statuses</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <pek-order-statuses [statusType]=\"1\"></pek-order-statuses>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Automatic Statuses</h2>\r\n\r\n    <div class=\"page__card\">\r\n      <pek-order-statuses [statusType]=\"1\" [isAutoStatus]=\"true\"></pek-order-statuses>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {OrderProduct} from '../../../procurement/models/order-product';\r\nimport {BehaviorSubject, iif, Observable, Subject, switchMap} from 'rxjs';\r\nimport {debounceTime, distinctUntilChanged, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-purchasing-requests',\r\n  templateUrl: './purchasing-requests.component.html',\r\n  styleUrls: ['./purchasing-requests.component.scss']\r\n})\r\nexport class PurchasingRequestsComponent implements OnInit {\r\n\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  statuses = [\r\n    {label: 'ORDERED', value: 'ordered'},\r\n    {label: 'NOT ORDERED', value: 'not_ordered'},\r\n    {label: 'PARTLY ORDERED', value: 'partially_ordered'}\r\n  ];\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    nomenclature__name: [null],\r\n    categories_ids: [null],\r\n    request_date: [null],\r\n    status: ['not_ordered']\r\n  });\r\n\r\n  isStartFirstPage = false;\r\n  isShowAll = false;\r\n\r\n  currentPage = 1;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  selectedProducts: OrderProduct[] = [];\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  name$: Subject<void> = new Subject<void>();\r\n\r\n  orderProducts$: Observable<OrderProduct[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      iif(() =>\r\n          !this.isShowAll,\r\n        this.orderProductService.getGroupedPurchasedForPagination(this.query).pipe(\r\n          tap(response => this.productsCount = response.count),\r\n          map(response => response.results.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          })),\r\n        ),\r\n        this.orderProductService.getGroupedPurchased(this.query).pipe(\r\n          tap(products => this.productsCount = products.length),\r\n          map(products => products.map(product => {\r\n            product.status = this.setProductStatus(product);\r\n            return product;\r\n          }))\r\n        )\r\n      ),\r\n    ),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  setProductStatus(product: OrderProduct) {\r\n    let status: string;\r\n\r\n    if (product.ordered_quantity >= product.initial_quantity) {\r\n      status = 'A0';\r\n    } else if (product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0) {\r\n      status = 'A1';\r\n    } else {\r\n      status = 'A2';\r\n    }\r\n\r\n    return status;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedProducts = [];\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n      {name: 'is_purchased_only', value: true},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: true},)\r\n    }\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  getSmallDescription(description: string) {\r\n    if (description && description?.length > 40) return description.substring(0, 40) + '...';\r\n    else return description;\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  onCreateRequest() {\r\n    this.orderProductService.openAddProductToOrderModal(true,null).subscribe(product => {\r\n      if (product) {\r\n        this.search$.next();\r\n      }\r\n    });\r\n  }\r\n\r\n  onSelectCategories(ids: number[]) {\r\n    this.searchForm.get('categories_ids').patchValue(ids?.join(',') || null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isShowAll = value;\r\n\r\n    if (!this.isShowAll) {\r\n      this.currentPage = 1\r\n    }\r\n\r\n    this.search$.next()\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Procurement Requests</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"New Request\"\r\n        (click)=\"onCreateRequest()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form\r\n      [formGroup]=\"searchForm\"\r\n      class=\"form mb-3\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input\r\n              formControlName=\"nomenclature__name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n              type=\"text\"\r\n              pInputText\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Category</label>\r\n            <pek-multi-product-categories-picker (choiceCategories)=\"onSelectCategories($event)\"></pek-multi-product-categories-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Date</label>\r\n            <p-calendar\r\n              formControlName=\"request_date\"\r\n              dataType=\"date\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Status</label>\r\n            <p-dropdown\r\n              [options]=\"statuses\"\r\n              formControlName=\"status\"\r\n              optionValue=\"value\"\r\n              [showClear]=\"true\"\r\n              placeholder=\"Choose Status\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            ></p-dropdown>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"multiple\"\r\n        dataKey=\"id\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 24.25rem)\"\r\n        [value]=\"orderProducts$ | async\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 4%\" class=\"text-center\">ID</th>\r\n            <th style=\"width: 10%\">Name</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Request Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">Ordered Quantity</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Free Ordered Quantity</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">UOM</th>\r\n            <th style=\"width: 8%;\">Category</th>\r\n            <th style=\"width: 10%;\"> Description</th>\r\n            <th style=\"width: 6%;\" class=\"text-center\">Date</th>\r\n            <th style=\"width: 6%;\" class=\"text-center\">Request Type</th>\r\n            <th class=\"text-center\" style=\"width: 6%;\">Chains</th>\r\n            <th style=\"width: 9%;\">Root Lists</th>\r\n            <th style=\"width: 9%;\">Production Lists</th>\r\n            <th class=\"text-center\" style=\"width: 7%;\">Status</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 4%\" class=\"text-center\">{{product.request_id}}</td>\r\n            <td style=\"width: 10%\">{{product.nomenclature.name}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{product.initial_quantity}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{product.ordered_quantity}}</td>\r\n            <td style=\"width: 7%\" class=\"text-center\">{{product.free_quantity_without_final_status ? product.free_quantity_without_final_status : 0}}</td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              {{product.nomenclature.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs'}}\r\n            </td>\r\n            <td style=\"width: 8%;\">{{product.nomenclature.category?.name}}</td>\r\n            <td style=\"width: 10%;\">\r\n              <div class=\"word-break\">\r\n                {{getSmallDescription(product.nomenclature.description)}}\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{product.request_date |date:'dd/MM/yyyy'}}</td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              <ng-container *ngIf=\"product.request_type==1\">Auto</ng-container>\r\n              <ng-container *ngIf=\"product.request_type==0\">Manual</ng-container>\r\n            </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">\r\n              <ng-container *ngFor=\"let order of product.orders; let idx = index\">\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 1\"\r\n                   [routerLink]=\"['/procurement/orders/products',order.id]\">\r\n                  {{order.id}}</a>\r\n                <a target=\"blank\" *ngIf=\"order.accounting_type == 2\"\r\n                   [routerLink]=\"['/outsource/outsource-chain/products',order.id]\">\r\n                  {{order.id}}<span *ngIf=\"idx !== product.orders.length - 1\">,</span></a>\r\n              </ng-container>\r\n            </td>\r\n\r\n            <td style=\"width: 9%;\">\r\n              <ng-container *ngFor=\"let list of product.root_production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.root_production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 9%;\">\r\n              <ng-container *ngFor=\"let list of product.production_list_products; let idx = index\">\r\n                {{list}}<span *ngIf=\"idx !== product.production_list_products.length - 1\">,</span>\r\n              </ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 7%;\">\r\n              <ng-container *ngIf=\"product.ordered_quantity >= product.initial_quantity\">\r\n                <span class=\"badge badge_success\">ORDERED</span>\r\n              </ng-container>\r\n              <ng-container\r\n                *ngIf=\"product.ordered_quantity < product.initial_quantity && product.ordered_quantity > 0\"\r\n              >\r\n                <span class=\"badge badge_warning\">PARTLY ORDERED</span>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"product.ordered_quantity==0\">\r\n                <span class=\"badge badge_danger\">NOT ORDERED</span>\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"16\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n      <div\r\n        *ngIf=\"!isShowAll\"\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"productsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll(true)\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(false)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {TreeService} from '@shared/services/tree.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {finalize} from 'rxjs/operators';\r\nimport {PurchaseCategory} from '../../models/purchase-category';\r\nimport {PurchasingCategoryService} from '../../services/purchasing-category.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-purchasing-category',\r\n  templateUrl: './create-edit-purchasing-category.component.html',\r\n  styleUrls: ['./create-edit-purchasing-category.component.scss']\r\n})\r\nexport class CreateEditPurchasingCategoryComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  types = [\r\n    {name: 'Tangible', value: true},\r\n    {name: 'Intangible', value: false}\r\n  ];\r\n\r\n  isLoading = true;\r\n  categories: PurchaseCategory[] = [];\r\n  selectedNode: TreeNode<PurchaseCategory>;\r\n  categoriesTree: TreeNode<PurchaseCategory>[] = [];\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    description: [''],\r\n    is_material: [null, Validators.required],\r\n    parent: [null],\r\n    is_for_root: [true]\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly treeService: TreeService,\r\n    private dialogRef: MatDialogRef<CreateEditPurchasingCategoryComponent>,\r\n    private purchasingCategoryService: PurchasingCategoryService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, category: PurchaseCategory }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getCategories();\r\n\r\n    if (this.data.type === 'edit') {\r\n      this.form.patchValue(<any>this.data.category);\r\n\r\n      if (this.data.category.parent) {\r\n        this.form.get('is_for_root').patchValue(false);\r\n      }\r\n    }\r\n  }\r\n\r\n  findNode() {\r\n    const find = (nodes: TreeNode<PurchaseCategory>[]) => {\r\n      const foundNode = nodes.find(n => n.data.id === this.data.category.id);\r\n\r\n      if (foundNode) {\r\n        this.selectedNode = foundNode;\r\n        return;\r\n      } else {\r\n        nodes.forEach(node => {\r\n          node.expanded = true;\r\n          if (node.children.length > 0) {\r\n            find(node.children);\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    find(this.categoriesTree);\r\n  }\r\n\r\n  getCategories() {\r\n    this.purchasingCategoryService.getAll().subscribe(categories => {\r\n      this.categories = categories;\r\n      this.createTree();\r\n\r\n      if (this.data.type === 'edit') {\r\n        this.findNode();\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.categoriesTree) {\r\n      this.treeService.mapExpansion(this.categoriesTree, {});\r\n    }\r\n\r\n    this.categoriesTree = this.treeService.createTree(this.categories, {});\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createCategory();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editCategory();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  onChange() {\r\n    this.selectedNode = null;\r\n    this.form.get('parent').patchValue(null);\r\n  }\r\n\r\n  editCategory() {\r\n    this.purchasingCategoryService.update(<any>this.form.value, this.data.category.id).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(category => this.dialogRef.close(category));\r\n  }\r\n\r\n  createCategory() {\r\n    const send = <any>this.form.value;\r\n\r\n    this.purchasingCategoryService.create(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(category => this.dialogRef.close(category));\r\n  }\r\n\r\n  onSelection() {\r\n    this.form.get('parent').patchValue(this.selectedNode?.data?.id || null);\r\n  }\r\n\r\n}\r\n","<div class=\"create-edit-purchasing-category\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      {{data.type}} Purchasing Category\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content>\r\n    <form [formGroup]=\"form\">\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Name*</label>\r\n        <input\r\n          pInputText\r\n          formControlName=\"name\"\r\n          class=\"form-control\"\r\n          type=\"text\"\r\n          id=\"name\"\r\n        />\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"name\">Type*</label>\r\n        <p-dropdown\r\n          [showClear]=\"true\"\r\n          [options]=\"types\"\r\n          formControlName=\"is_material\"\r\n          optionValue=\"value\"\r\n          optionLabel=\"name\"\r\n          placeholder=\"Choice Type\">\r\n        </p-dropdown>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label for=\"description\">Description</label>\r\n        <textarea\r\n          id=\"description\"\r\n          [rows]=\"2\"\r\n          pInputTextarea\r\n          [autoResize]=\"true\"\r\n          formControlName=\"description\"\r\n        ></textarea>\r\n      </div>\r\n\r\n      <div class=\"form-group box\">\r\n        <p-checkbox\r\n          inputId=\"root\"\r\n          formControlName=\"is_for_root\"\r\n          (onChange)=\"onChange()\"\r\n          [binary]=\"true\"\r\n        ></p-checkbox>\r\n        <label class=\"ml-2 mb-0\" for=\"root\">Is For Root</label>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"table mt-2\" *ngIf=\"!form.get('is_for_root')?.value\">\r\n      <p-treeTable\r\n        [value]=\"categoriesTree\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selectedNode\"\r\n        [scrollable]=\"true\"\r\n        (selectionChange)=\"onSelection()\"\r\n        scrollHeight=\"calc(100vh - 46.25rem)\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 50%; padding-left: 48px\">Name</th>\r\n            <th style=\"width: 50%\">Comment</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n          <tr\r\n            [ttRow]=\"rowNode\"\r\n            [ttSelectableRow]=\"rowNode\"\r\n          >\r\n            <td style=\"width: 50%\">\r\n              <div class=\"table-toggle\">\r\n                <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                <span>{{rowData.name}}</span>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 50%\">\r\n              {{rowData.comment}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-treeTable>\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      [label]=\"data.type\"\r\n      [loading]=\"isSaving\"\r\n      [disabled]=\"form.invalid || (!this.form.get('is_for_root').value) && !selectedNode\"\r\n      (click)=\"onSave()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {TreeService} from '@shared/services/tree.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {PurchasingCategoryService} from '../../services/purchasing-category.service';\r\nimport {PurchaseCategory} from '../../models/purchase-category';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {finalize} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-create-empty-purchase-chain',\r\n  templateUrl: './create-empty-purchase-chain.component.html',\r\n  styleUrls: ['./create-empty-purchase-chain.component.scss']\r\n})\r\nexport class CreateEmptyPurchaseChainComponent implements OnInit {\r\n  isSaving = false;\r\n  isLoading = true;\r\n\r\n  categories: PurchaseCategory[] = [];\r\n  selectedNode: TreeNode<PurchaseCategory>;\r\n  categoriesTree: TreeNode<PurchaseCategory>[] = [];\r\n\r\n  form = this.fb.group({\r\n    accounting_type: [1],\r\n    purchase_category: [<number>null, Validators.required],\r\n    supplier: [<number>null, Validators.required]\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly treeService: TreeService,\r\n    private dialogRef: MatDialogRef<CreateEmptyPurchaseChainComponent>,\r\n    private purchasingCategoryService: PurchasingCategoryService,\r\n    private readonly orderService: OrderService,\r\n    @Inject(MAT_DIALOG_DATA) public data: {}\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getCategories();\r\n  }\r\n\r\n  getCategories() {\r\n    this.purchasingCategoryService.getAll().subscribe(categories => {\r\n      this.categories = categories;\r\n      this.createTree();\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.categoriesTree) {\r\n      this.treeService.mapExpansion(this.categoriesTree, {});\r\n    }\r\n\r\n    this.categoriesTree = this.treeService.createTree(this.categories, {});\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.form.get('supplier').patchValue(id || null);\r\n  }\r\n\r\n  onSelection() {\r\n    this.form.get('purchase_category').patchValue(this.selectedNode?.data?.id || null);\r\n  }\r\n\r\n  onCreate() {\r\n    this.isSaving = true;\r\n    this.orderService.create(this.form.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(order => this.dialogRef.close(order));\r\n  }\r\n}\r\n","<div class=\"create-empty-purchasing-chain\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      Create Empty Procurement Chain\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content>\r\n    <form [formGroup]=\"form\">\r\n      <div class=\"form-group\">\r\n        <label>Supplier*</label>\r\n        <pek-company-picker (selectCompany)=\"onSelectCompany($event)\"></pek-company-picker>\r\n      </div>\r\n    </form>\r\n\r\n    <p class=\"mb-2 mt-2\">Parent Category*</p>\r\n\r\n    <div class=\"table mt-2\" *ngIf=\"!form.get('is_for_root')?.value\">\r\n      <p-treeTable\r\n        [value]=\"categoriesTree\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selectedNode\"\r\n        [scrollable]=\"true\"\r\n        (selectionChange)=\"onSelection()\"\r\n        scrollHeight=\"calc(100vh - 36.25rem)\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 50%; padding-left: 48px\">Name</th>\r\n            <th style=\"width: 50%\">Comment</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n          <tr\r\n            [ttRow]=\"rowNode\"\r\n            [ttSelectableRow]=\"rowNode\"\r\n          >\r\n            <td style=\"width: 50%\">\r\n              <div class=\"table-toggle\">\r\n                <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                <span>{{rowData.name}}</span>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 50%\">\r\n              {{rowData.comment}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-treeTable>\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Create\"\r\n      [loading]=\"isSaving\"\r\n      [disabled]=\"form.invalid\"\r\n      (click)=\"onCreate()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { PurchasingRouting } from './purchasing.routing';\r\nimport { PurchasingLayoutComponent } from './components/purchasing-layout/purchasing-layout.component';\r\nimport { PurchasingOrderStatusesComponent } from './components/purchasing-order-statuses/purchasing-order-statuses.component';\r\nimport { PurchasingChainsComponent } from './components/purchasing-chains/purchasing-chains.component';\r\nimport { PurchasingOrderPageComponent } from './components/purchasing-order-page/purchasing-order-page.component';\r\nimport {LayoutModule} from '../layout/layout.module';\r\nimport { PurchasingCategoriesComponent } from './components/purchasing-categories/purchasing-categories.component';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport { CreateEditPurchasingCategoryComponent } from './modals/create-edit-purchasing-category/create-edit-purchasing-category.component';\r\nimport { PurchasingChainCreationListComponent } from './components/purchasing-chain-creation-list/purchasing-chain-creation-list.component';\r\nimport { PurchasingRequestsComponent } from './components/purchasing-requests/purchasing-requests.component';\r\nimport {TriStateCheckboxModule} from 'primeng/tristatecheckbox';\r\nimport { CreateEmptyPurchaseChainComponent } from './modals/create-empty-purchase-chain/create-empty-purchase-chain.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PurchasingLayoutComponent,\r\n    PurchasingOrderStatusesComponent,\r\n    PurchasingChainsComponent,\r\n    PurchasingOrderPageComponent,\r\n    PurchasingCategoriesComponent,\r\n    CreateEditPurchasingCategoryComponent,\r\n    PurchasingChainCreationListComponent,\r\n    PurchasingRequestsComponent,\r\n    CreateEmptyPurchaseChainComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule,\r\n    PurchasingRouting,\r\n    LayoutModule,\r\n    TriStateCheckboxModule\r\n  ]\r\n})\r\nexport class PurchasingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {ProcurementLayoutComponent} from '../procurement/components/procurement-layout/procurement-layout.component';\r\nimport {ProcurementChainsComponent} from '../procurement/components/procurement-chains/procurement-chains.component';\r\nimport {\r\n  ProcurementOrderPageComponent\r\n} from '../procurement/components/procurement-order-page/procurement-order-page.component';\r\nimport {\r\n  AuxiliaryInvoicesTypesListComponent\r\n} from '../procurement/components/auxiliary-invoices-types-list/auxiliary-invoices-types-list.component';\r\nimport {\r\n  ProcurementChainCreationListComponent\r\n} from '../procurement/components/procurement-chain-creation-list/procurement-chain-creation-list.component';\r\nimport {\r\n  ProcurementOrderStatusesComponent\r\n} from '../procurement/components/procurement-order-statuses/procurement-order-statuses.component';\r\nimport {PurchasingLayoutComponent} from './components/purchasing-layout/purchasing-layout.component';\r\nimport {PurchasingChainsComponent} from './components/purchasing-chains/purchasing-chains.component';\r\nimport {PurchasingOrderPageComponent} from './components/purchasing-order-page/purchasing-order-page.component';\r\nimport {\r\n  PurchasingOrderStatusesComponent\r\n} from './components/purchasing-order-statuses/purchasing-order-statuses.component';\r\nimport {PurchasingCategoriesComponent} from './components/purchasing-categories/purchasing-categories.component';\r\nimport {\r\n  PurchasingChainCreationListComponent\r\n} from './components/purchasing-chain-creation-list/purchasing-chain-creation-list.component';\r\nimport {PurchasingRequestsComponent} from './components/purchasing-requests/purchasing-requests.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: PurchasingLayoutComponent,\r\n    children: [\r\n      {path: '', redirectTo: 'chains', pathMatch: 'full'},\r\n      {\r\n        path: 'chains',\r\n        children: [\r\n          {path: '', title: 'Procurement Chains', component: PurchasingChainsComponent},\r\n          {path: 'order/:id', title: 'Procurement Order', component: PurchasingOrderPageComponent},\r\n        ]\r\n      },\r\n      {path: 'order-products', title: 'Procurement Chain Creation', component: PurchasingChainCreationListComponent},\r\n      {path: 'statuses', title: 'Order Statuses', component: PurchasingOrderStatusesComponent},\r\n      {path: 'categories', title: 'Procurement Categories', component: PurchasingCategoriesComponent},\r\n      {path: 'requests', title: 'Procurement Requests', component: PurchasingRequestsComponent},\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PurchasingRouting { }\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Observable} from 'rxjs';\r\nimport {PurchaseCategory} from '../models/purchase-category';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {\r\n  CreateEditPurchasingCategoryComponent\r\n} from '../modals/create-edit-purchasing-category/create-edit-purchasing-category.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PurchasingCategoryService {\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'purchase_categories/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<PurchaseCategory[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: PurchaseCategory[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getAll(): Observable<PurchaseCategory[]> {\r\n    return this.httpClient.get<{ data: PurchaseCategory[] }>(this.API_URL + this.url + 'all/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(category: Partial<PurchaseCategory>): Observable<PurchaseCategory> {\r\n    return this.httpClient.post<{ data: PurchaseCategory }>(this.API_URL + this.url, category).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(category: Partial<PurchaseCategory>, id: number): Observable<PurchaseCategory> {\r\n    return this.httpClient.patch<{ data: PurchaseCategory }>(this.API_URL + this.url + `${id}/`, category).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${id}/`);\r\n  }\r\n\r\n  createEditCategory(type: ModalActionType, category?: PurchaseCategory): Observable<PurchaseCategory> {\r\n    return this.dialog\r\n      .open<CreateEditPurchasingCategoryComponent>(CreateEditPurchasingCategoryComponent, {\r\n        width: '54rem',\r\n        height: 'auto',\r\n        data: {type, category},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {QrCodes} from '../../qr-code';\r\n\r\n@Component({\r\n  selector: 'pek-print-qr-codes',\r\n  templateUrl: './print-qr-codes.component.html',\r\n  styleUrls: ['./print-qr-codes.component.scss']\r\n})\r\nexport class PrintQrCodesComponent implements OnInit {\r\n  @Input() qrCodes: QrCodes;\r\n  @Input() orderId: number;\r\n  @Input() invoiceId: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"print-qr-codes\">\r\n  <ul class=\"print-qr-codes__list\">\r\n    <li\r\n      *ngFor=\"let qrCode of qrCodes.without_serial\"\r\n      class=\"print-qr-codes__item\"\r\n    >\r\n      <pek-qr-code-item [qrCode]=\"qrCode\" [invoiceId]=\"invoiceId\" [orderId]=\"orderId\"></pek-qr-code-item>\r\n    </li>\r\n    <li\r\n      *ngFor=\"let qrCode of qrCodes.with_serial\"\r\n      class=\"print-qr-codes__item\"\r\n    >\r\n      <pek-qr-code-item [qrCode]=\"qrCode\" [orderId]=\"orderId\" [invoiceId]=\"invoiceId\"></pek-qr-code-item>\r\n    </li>\r\n  </ul>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {QrCode, QrCodes} from '../../qr-code';\r\n\r\n@Component({\r\n  selector: 'pek-qr-code-item',\r\n  templateUrl: './qr-code-item.component.html',\r\n  styleUrls: ['./qr-code-item.component.scss']\r\n})\r\nexport class QrCodeItemComponent implements OnInit {\r\n  @Input() qrCode: QrCode;\r\n  @Input() orderId: number;\r\n  @Input() invoiceId: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"qr-code-item\">\r\n  <img [src]=\"qrCode.qr_src\" [alt]=\"qrCode.name\">\r\n  <div class=\"qr-code-item__content\">\r\n    <p *ngIf=\"qrCode?.serial_number\">{{qrCode.serial_number}}</p>\r\n    <p>{{qrCode.code}}</p>\r\n    <p>{{qrCode.name}}</p>\r\n    <p *ngIf=\"invoiceId\">Invoice {{invoiceId}}</p>\r\n    <p *ngIf=\"orderId\">Order {{orderId}}</p>\r\n  </div>\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {QrCode, QrCodes} from '../../qr-code';\r\n\r\n@Component({\r\n  selector: 'pek-qr-code-modal',\r\n  templateUrl: './qr-code-modal.component.html',\r\n  styleUrls: ['./qr-code-modal.component.scss']\r\n})\r\nexport class QrCodeModalComponent implements OnInit {\r\n\r\n  qrCodes: QrCodes\r\n  qrCodesWithOutSerial: QrCode[] = [];\r\n  qrCodesWithSerial: QrCode[] = [];\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<QrCodeModalComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: {qrCodes: QrCodes, orderId: number, invoiceId: string}\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.qrCodes = this.data.qrCodes;\r\n    this.qrCodesWithOutSerial = this.qrCodes.without_serial;\r\n    this.qrCodesWithSerial = this.qrCodes.with_serial;\r\n  }\r\n\r\n  onPrint() {\r\n    window.print();\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">Generated QR-codes</h2>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    icon=\"pi pi-print\"\r\n    label=\"Print QR Codes\"\r\n    (click)=\"onPrint()\"\r\n  ></button>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"qr-code-modal mt-3\">\r\n    <div class=\"qr-code-modal__box\">\r\n      <h2>Generated QR-codes With Out Serial Numbers</h2>\r\n    </div>\r\n\r\n    <ul class=\"qr-code-modal__list\" *ngIf=\"qrCodes.without_serial.length > 0; else empty\">\r\n      <li\r\n        *ngFor=\"let qrCode of qrCodes.without_serial\"\r\n        class=\"qr-code-modal__item\"\r\n      >\r\n        <pek-qr-code-item [qrCode]=\"qrCode\" [orderId]=\"data?.orderId\" [invoiceId]=\"data?.invoiceId\"></pek-qr-code-item>\r\n      </li>\r\n    </ul>\r\n\r\n    <div class=\"qr-code-modal__box mt-5\">\r\n      <h2>Generated QR-codes With Serial Numbers</h2>\r\n    </div>\r\n\r\n    <ul class=\"qr-code-modal__list\" *ngIf=\"qrCodes.with_serial.length > 0; else empty\">\r\n      <li\r\n        *ngFor=\"let qrCode of qrCodes.with_serial\"\r\n        class=\"qr-code-modal__item\"\r\n      >\r\n        <pek-qr-code-item [qrCode]=\"qrCode\" [invoiceId]=\"data?.invoiceId\" [orderId]=\"data?.orderId\"></pek-qr-code-item>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n\r\n  <div class=\"qr-code-modal__print\">\r\n    <pek-print-qr-codes [qrCodes]=\"qrCodes\" [orderId]=\"data?.orderId\" [invoiceId]=\"data?.invoiceId\"></pek-print-qr-codes>\r\n  </div>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #empty>\r\n  <p class=\"empty\">No QR Codes</p>\r\n</ng-template>\r\n","import {AfterViewInit, Component, ElementRef, EventEmitter, OnDestroy, OnInit, Output, ViewChild} from '@angular/core';\r\nimport QrScanner from 'qr-scanner';\r\nimport {auditTime, Subject} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-qr-code-scanner',\r\n  templateUrl: './qr-code-scanner.component.html',\r\n  styleUrls: ['./qr-code-scanner.component.scss']\r\n})\r\nexport class QrCodeScannerComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @Output() scanned: EventEmitter<any> = new EventEmitter<any>();\r\n  @Output() cancel: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n  @ViewChild('scanner') video: ElementRef;\r\n\r\n  scanner: QrScanner;\r\n  isScanned = false;\r\n  isPending = true;\r\n\r\n  stream$ = new Subject<any>();\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.stream$.pipe(\r\n      auditTime(1000),\r\n    ).subscribe(data => {\r\n      this.scanned.next(data);\r\n    });\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    document.body.style.overflow = 'hidden';\r\n    document.querySelector<HTMLElement>('.layout').style.overflow = 'hidden';\r\n\r\n    setTimeout(() => this.initScanner());\r\n  }\r\n\r\n  initScanner() {\r\n    this.scanner = new QrScanner(this.video.nativeElement, result => this.setResult(result), {\r\n      highlightScanRegion: true,\r\n      highlightCodeOutline: true,\r\n    });\r\n\r\n    this.scanner.start().then();\r\n  }\r\n\r\n  setResult(result) {\r\n    try {\r\n      this.stream$.next(JSON.parse(result.data));\r\n    } catch (e) {\r\n      console.log('Not valid data found');\r\n    }\r\n  }\r\n\r\n  getFrame = () => {\r\n    const canvas = document.createElement('canvas');\r\n    canvas.width = this.video.nativeElement.videoWidth;\r\n    canvas.height = this.video.nativeElement.videoHeight;\r\n    canvas.getContext('2d', {willReadFrequently: true}).drawImage(this.video.nativeElement, 0, 0);\r\n    return canvas.toDataURL('image/png');\r\n  };\r\n\r\n  onCancel() {\r\n    this.cancel.emit(true)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    document.body.style.overflow = 'initial';\r\n    document.querySelector<HTMLElement>('.layout').style.overflow = 'initial';\r\n    this.scanner.stop();\r\n    this.scanner.destroy();\r\n    this.stream$.next(true);\r\n    this.stream$.complete();\r\n  }\r\n}\r\n","<div class=\"qr-code-scanner\">\r\n  <div class=\"qr-code-scanner__video\" *ngIf=\"!isScanned\">\r\n    <video id=\"qr-video\" #scanner></video>\r\n  </div>\r\n\r\n  <div class=\"qr-code-scanner__border qr-code-scanner__border_top-left\"></div>\r\n  <div class=\"qr-code-scanner__border qr-code-scanner__border_top-right\"></div>\r\n  <div class=\"qr-code-scanner__border qr-code-scanner__border_bottom-left\"></div>\r\n  <div class=\"qr-code-scanner__border qr-code-scanner__border_bottom-right\"></div>\r\n\r\n  <button class=\"qr-code-scanner__cancel-button\" (click)=\"onCancel()\">\r\n    Cancel\r\n  </button>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { QrCodeModalComponent } from './components/qr-code-modal/qr-code-modal.component';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport { PrintQrCodesComponent } from './components/print-qr-codes/print-qr-codes.component';\r\nimport { QrCodeItemComponent } from './components/qr-code-item/qr-code-item.component';\r\nimport { QrCodeScannerComponent } from './components/qr-code-scanner/qr-code-scanner.component';\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    QrCodeModalComponent,\r\n    PrintQrCodesComponent,\r\n    QrCodeItemComponent,\r\n    QrCodeScannerComponent\r\n  ],\r\n  exports: [\r\n    QrCodeScannerComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    SharedModule\r\n  ]\r\n})\r\nexport class QrCodeModule { }\r\n","import {Injectable} from '@angular/core';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {QrCodeModalComponent} from './components/qr-code-modal/qr-code-modal.component';\r\nimport {Observable} from 'rxjs';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {QrCodes} from './qr-code';\r\nimport {DomSanitizer} from '@angular/platform-browser';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class QrCodeService {\r\n\r\n  constructor(\r\n    private readonly dialog: MatDialog,\r\n    private readonly http: HttpClient,\r\n    private domSanitizer: DomSanitizer,\r\n  ) {\r\n  }\r\n\r\n  showQrCodeModal(qrCodes: QrCodes, orderId?: number, invoiceId?: string): Observable<void> {\r\n    return this.dialog\r\n      .open<QrCodeModalComponent>(QrCodeModalComponent, {\r\n        width: '80rem',\r\n        data: {qrCodes, orderId, invoiceId},\r\n        height: 'auto',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  generateQrCodes(send: any, orderId?: number, invoiceId?: string): Observable<QrCodes> {\r\n    return this.http.post<{ data: QrCodes }>(environment.base_url + 'warehouse/generate_qr_codes/', send).pipe(\r\n      map(response => response.data),\r\n      tap(qrCodes => {\r\n        qrCodes.without_serial.forEach(code => {\r\n          code.qr_src = this.domSanitizer.bypassSecurityTrustUrl('data:image/svg+xml;base64,' + code.qr_src);\r\n        });\r\n\r\n        const newQrCodesSerials = [];\r\n\r\n        qrCodes.with_serial.forEach(code => {\r\n          // @ts-ignore\r\n          code.qr_codes.forEach(c => {\r\n            c.qr_src = this.domSanitizer.bypassSecurityTrustUrl('data:image/svg+xml;base64,' + c.qr_src);\r\n            newQrCodesSerials.push(c)\r\n          })\r\n        });\r\n\r\n        qrCodes.with_serial = [...newQrCodesSerials];\r\n      }),\r\n      tap(qrCodes => this.showQrCodeModal(qrCodes, orderId, invoiceId))\r\n    );\r\n  }\r\n}\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {SalesStatus} from '../../models/sales-chain';\r\nimport {SalesStatusService} from '../../services/sales-status.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-sales-status',\r\n  templateUrl: './create-edit-sales-status.component.html',\r\n  styleUrls: ['./create-edit-sales-status.component.scss']\r\n})\r\nexport class CreateEditSalesStatusComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<CreateEditSalesStatusComponent>,\r\n    private readonly salesStatusService: SalesStatusService,\r\n      @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, status: SalesStatus }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.status.id));\r\n      this.form.patchValue(this.data.status);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createSalesStatus();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editSalesStatus();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createSalesStatus() {\r\n    const send = <Partial<SalesStatus>>this.form.value;\r\n    this.salesStatusService.create(send).subscribe({\r\n      next: status => this.dialogRef.close(status),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editSalesStatus() {\r\n    const send = <Partial<SalesStatus>>this.form.value;\r\n    this.salesStatusService.update(send).subscribe({\r\n      next: status => this.dialogRef.close(status),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Sales Status\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Observable, of} from 'rxjs';\r\nimport {SalesStatus} from '../models/sales-chain';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {CreateEditSalesStatusComponent} from '../modals/create-edit-sales-status/create-edit-sales-status.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SalesStatusService {\r\n\r\n  statuses: SalesStatus[];\r\n\r\n  API_URL = environment.base_url + environment.sales_url;\r\n  readonly url = 'status/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<SalesStatus[]> {\r\n    if (this.statuses) {\r\n      return of(this.statuses);\r\n    }\r\n\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: SalesStatus[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => {\r\n        const statuses = response.data;\r\n        this.statuses = statuses;\r\n        return statuses;\r\n      }));\r\n  }\r\n\r\n  create(status: Partial<SalesStatus>): Observable<SalesStatus> {\r\n    return this.httpClient.post<{ data: SalesStatus }>(this.API_URL + this.url, status).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(status: Partial<SalesStatus>): Observable<SalesStatus> {\r\n    return this.httpClient.put<{ data: SalesStatus }>(this.API_URL + this.url + status.id + '/', status).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(status: SalesStatus): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + status.id + '/');\r\n  }\r\n\r\n  changeOrder(status: SalesStatus, order: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + status.id + '/change_order/', {\r\n      new_order: order,\r\n    });\r\n  }\r\n\r\n  createEditSalesStatusModal(type: ModalActionType, status?: SalesStatus): Observable<SalesStatus> {\r\n    return this.dialog\r\n      .open<CreateEditSalesStatusComponent>(CreateEditSalesStatusComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, status},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\n\r\n@Component({\r\n  selector: 'pek-categories-tree-picker',\r\n  templateUrl: './categories-tree-picker.component.html',\r\n  styleUrls: ['./categories-tree-picker.component.scss']\r\n})\r\nexport class CategoriesTreePickerComponent implements OnInit, OnDestroy, OnChanges {\r\n  categoriesTree: TreeNode<Category>[] = [];\r\n  isLoadingCategories = true;\r\n  @Output() categorySelected: EventEmitter<Category> = new EventEmitter<Category>();\r\n  categories: Category[];\r\n  @Input() isModal = false;\r\n  @Input() currentCategoryId: number;\r\n\r\n  private destroy$ = new Subject();\r\n  selectedCategory: TreeNode<Category>;\r\n\r\n  constructor(\r\n    private readonly productCategoriesService: CategoriesService,\r\n  ) {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    this.findCategory()\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getCategories();\r\n  }\r\n\r\n  getCategories() {\r\n    this.productCategoriesService.get([{name: 'is_for_root', value: false}]).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n      this.createTree();\r\n      this.findCategory();\r\n      this.isLoadingCategories = false;\r\n    });\r\n  }\r\n\r\n  findCategory() {\r\n    if (this.currentCategoryId) {\r\n\r\n      const find = (nodes: TreeNode<Category>[]) => {\r\n        nodes.forEach(node => {\r\n          if (node.data.id === this.currentCategoryId) {\r\n            this.selectedCategory = node;\r\n            return;\r\n          } else {\r\n            find(node.children);\r\n          }\r\n        });\r\n      };\r\n      find(this.categoriesTree);\r\n    } else {\r\n      this.selectedCategory = null\r\n    }\r\n  }\r\n\r\n  createTree() {\r\n    const getChildren = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach(node => {\r\n        const children = this.categories.filter(c => c.parent === node.data.id);\r\n\r\n        if (children.length > 0) {\r\n          node.children = children.map(category => {\r\n            return {\r\n              label: category.name,\r\n              data: category,\r\n              children: []\r\n            };\r\n          });\r\n\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    const tree: TreeNode<Category>[] = this.categories.filter(c => !c.parent).map(category => {\r\n      return {\r\n        label: category.name,\r\n        data: <Category>category,\r\n        children: [],\r\n      };\r\n    });\r\n\r\n    getChildren(tree);\r\n    this.categoriesTree = [...tree];\r\n  }\r\n\r\n  onSelectCategory(node: TreeNode<Category>) {\r\n    if (node) {\r\n      this.categorySelected.emit(node.data);\r\n    } else {\r\n      this.categorySelected.emit(null);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<label>Categories</label>\r\n<div class=\"warehouse-items__tree-wrapper\" *ngIf=\"!isLoadingCategories; else spinner\">\r\n  <div class=\"warehouse-items__tree\" [class.modal]=\"isModal\">\r\n    <p-tree\r\n      [metaKeySelection]=\"false\"\r\n      [value]=\"categoriesTree\"\r\n      (selectionChange)=\"onSelectCategory($event)\"\r\n      [(selection)]=\"selectedCategory\"\r\n      selectionMode=\"single\"\r\n    >\r\n      <ng-template let-node pTemplate=\"default\">\r\n        {{node.data.name}}\r\n      </ng-template>\r\n    </p-tree>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"warehouse-items__spinner\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {AfterViewInit, Component, ElementRef, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-hover-detailed-info-component',\r\n  templateUrl: './hover-detailed-info-component.component.html',\r\n  styleUrls: ['./hover-detailed-info-component.component.scss']\r\n})\r\nexport class HoverDetailedInfoComponentComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('detailedContainer') detailedContainer: ElementRef;\r\n  parentContainer: HTMLElement;\r\n  element: HTMLElement;\r\n  @Input() moveLeft = 0;\r\n  interval;\r\n  intervalMain;\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngAfterViewInit(): void {\r\n    this.parentContainer = this.detailedContainer.nativeElement.parentElement.parentElement;\r\n    this.element = this.detailedContainer.nativeElement;\r\n    this.setPosition();\r\n    this.parentContainer.addEventListener(\"mouseenter\", (e) => {\r\n      this.interval = setInterval(() => {\r\n        this.setPosition();\r\n      }, );\r\n    });\r\n\r\n    this.parentContainer.addEventListener(\"mouseover\", (e) => {\r\n    });\r\n\r\n    this.parentContainer.addEventListener(\"mouseleave\", (e) => {\r\n      clearInterval(this.interval);\r\n    });\r\n  }\r\n\r\n  private setPosition() {\r\n    const top = this.parentContainer.getBoundingClientRect().top;\r\n    const right = this.parentContainer.getBoundingClientRect().right;\r\n    const parentHeight = this.parentContainer.getBoundingClientRect().height;\r\n    const elementHeight = this.element.getBoundingClientRect().height;\r\n    const topPosition = (top + (parentHeight / 2)) - (elementHeight / 2);\r\n    requestAnimationFrame(() => {\r\n      this.element.setAttribute('style', `top: ${topPosition}px; left: ${right - this.moveLeft}px;`);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    clearInterval(this.intervalMain);\r\n  }\r\n}\r\n","<section (mouseenter)=\"element.classList.add('show')\" (mouseleave)=\"element.classList.remove('show')\" #detailedContainer>\r\n  <ng-content></ng-content>\r\n</section>\r\n","import {\r\n  AfterViewInit,\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnInit,\r\n  Output,\r\n  Renderer2,\r\n  ViewChild\r\n} from '@angular/core';\r\nimport {NomenclatureImage} from '@shared/models/nomenclature';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {fromEventPattern, Observable, Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-images-slider',\r\n  templateUrl: './images-slider.component.html',\r\n  styleUrls: ['./images-slider.component.scss']\r\n})\r\nexport class ImagesSliderComponent implements OnInit, AfterViewInit {\r\n  @Output() choiceImages: EventEmitter<File[]> = new EventEmitter<File[]>();\r\n  @Output() removeImage: EventEmitter<number> = new EventEmitter<number>();\r\n\r\n  @Input() images: NomenclatureImage[] = [];\r\n  @Input() width: string;\r\n  @Input() height: string;\r\n\r\n  @ViewChild('inputFile') inputFile: ElementRef;\r\n  @ViewChild('slider') slider: ElementRef;\r\n  onPaste$: Observable<any>;\r\n  private destroy$ = new Subject();\r\n  isImagePasteOpened = false;\r\n  activeSlideIndex = 1;\r\n  isInit = false;\r\n\r\n  sliderWidth = 0;\r\n  offsetSlider = 0;\r\n\r\n  constructor(\r\n    private readonly modalService: ModalService,\r\n    private renderer: Renderer2\r\n  ) {\r\n    // this.createOnPastObservable(renderer);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // this.onPasteImage();\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    if (this.images.length > 0) {\r\n      this.sliderWidth = this.slider.nativeElement.offsetWidth;\r\n    }\r\n\r\n    setTimeout(() => this.isInit = true);\r\n  }\r\n\r\n  onSlideNext() {\r\n    if (this.activeSlideIndex === this.images.length) {\r\n      this.offsetSlider = 0;\r\n      this.activeSlideIndex = 1;\r\n    } else {\r\n      this.offsetSlider = this.sliderWidth * this.activeSlideIndex;\r\n      this.activeSlideIndex++;\r\n    }\r\n  }\r\n\r\n  onSlidePrev() {\r\n    if (this.activeSlideIndex === 1) {\r\n      this.offsetSlider = this.sliderWidth * (this.images.length - 1);\r\n      this.activeSlideIndex = this.images.length;\r\n    } else {\r\n      this.offsetSlider = (this.activeSlideIndex - 2) * this.sliderWidth;\r\n      this.activeSlideIndex--;\r\n    }\r\n  }\r\n\r\n  onImageManipulation($event: Event, files: EventTarget) {\r\n    // @ts-ignore\r\n    const newFiles: File[] = Array.from(files.files);\r\n\r\n    if (newFiles.length > 0) {\r\n      if (this.images.length === 0) {\r\n        this.activeSlideIndex = 1;\r\n        this.sliderWidth = this.slider.nativeElement.offsetWidth;\r\n      }\r\n\r\n      this.choiceImages.emit(newFiles);\r\n      this.inputFile.nativeElement.value = '';\r\n    }\r\n  }\r\n\r\n  onRemoveImage() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.removeImage.emit(this.activeSlideIndex - 1);\r\n        if (this.activeSlideIndex !== 1) {\r\n          this.onSlidePrev();\r\n          this.inputFile.nativeElement.value = '';\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onPasteImage() {\r\n    this.onPaste$.subscribe(event => {\r\n      if (!this.isImagePasteOpened) {\r\n        this.isImagePasteOpened = true;\r\n        const item = event.clipboardData.items[0];\r\n\r\n        if (item.type.indexOf('image') === 0) {\r\n          const blob = item.getAsFile();\r\n\r\n          const reader = new FileReader();\r\n          reader.onload = (event) => {\r\n\r\n            this.modalService.showPasteImageModal(event.target.result, blob).subscribe(confirm => {\r\n              this.isImagePasteOpened = false;\r\n              if (confirm) {\r\n\r\n                if (this.images.length === 0) {\r\n                  this.activeSlideIndex = 1;\r\n                  this.sliderWidth = this.slider.nativeElement.offsetWidth;\r\n                }\r\n\r\n                let send: File[] = [confirm];\r\n                this.choiceImages.emit(send);\r\n                this.inputFile.nativeElement.value = '';\r\n              }\r\n            });\r\n          };\r\n\r\n          reader.readAsDataURL(blob);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private createOnPastObservable(renderer: Renderer2) {\r\n    let removePastEventListener: () => void;\r\n    const createPastEventListener = (\r\n      handler: (e: Event) => boolean | void\r\n    ) => {\r\n      removePastEventListener = renderer.listen(\"document\", \"paste\", handler);\r\n    };\r\n\r\n    this.onPaste$ = fromEventPattern<Event>(createPastEventListener, () =>\r\n      removePastEventListener()\r\n    ).pipe(takeUntil(this.destroy$));\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.renderer.destroy();\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  onShowFullImage() {\r\n    this.modalService.showImageGallery(this.images, null, this.activeSlideIndex).subscribe();\r\n  }\r\n\r\n  fileAdded(file: File) {\r\n    this.choiceImages.emit([file]);\r\n  }\r\n}\r\n","<div class=\"images-slider\"\r\n     pekPasteScreenImage [trackMousePosition]=\"true\" (imageAdded)=\"fileAdded($event)\"\r\n     #slider>\r\n  <div class=\"images-slider__slider\"\r\n       [style.width]=\"width\"\r\n       [style.height]=\"height\"\r\n       *ngIf=\"images.length > 0; else noneImages\"\r\n  >\r\n    <div class=\"images-slider__wrapper\">\r\n      <div\r\n        class=\"images-slider__inner\"\r\n        [class.images-slider__inner_init]=\"isInit\"\r\n        [class.slides-none]=\"images.length === 0\"\r\n        [style.width]=\"sliderWidth * images.length + 'px'\"\r\n        [style.transform]=\"'translateX(-' + offsetSlider + 'px)'\"\r\n      >\r\n        <div\r\n          class=\"images-slider__slide\"\r\n          *ngFor=\"let image of images; let idx = index\"\r\n          (click)=\"onShowFullImage()\"\r\n        >\r\n          <img [src]=\"image.image\" [alt]=\"'Image ' + idx + 1\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <i\r\n      *ngIf=\"images.length > 1\"\r\n      class=\"pi pi-chevron-left images-slider__btn images-slider__btn_prev\"\r\n      (click)=\"onSlidePrev()\"\r\n    >\r\n    </i>\r\n    <i\r\n      *ngIf=\"images.length > 1\"\r\n      class=\"pi pi-chevron-right images-slider__btn images-slider__btn_next\"\r\n      (click)=\"onSlideNext()\"\r\n    ></i>\r\n  </div>\r\n\r\n  <div class=\"images-slider__bottom\">\r\n    <label for=\"file\" class=\"images-slider__file-picker\">\r\n      <input\r\n        #inputFile\r\n        id=\"file\"\r\n        multiple\r\n        type=\"file\"\r\n        (input)=\"onImageManipulation($event, $event.target)\" accept=\"image/*\"\r\n      >\r\n      <span>\r\n        <i class=\"pi pi-upload\"></i>\r\n        Choice Image\r\n      </span>\r\n    </label>\r\n\r\n    <div class=\"images-slider__count\" *ngIf=\"images.length > 1\">\r\n      {{activeSlideIndex}} / {{images.length}}\r\n    </div>\r\n\r\n    <button class=\"images-slider__remove\" (click)=\"onRemoveImage()\" *ngIf=\"images.length > 0\">\r\n      <i class=\"pi pi-times\"></i>\r\n      Remove Active Image\r\n    </button>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #noneImages>\r\n  <div [style.width]=\"width\" [style.height]=\"height\" class=\"images-slider__empty\">\r\n    <i class=\"pi pi-image\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {AfterViewInit, Component, EventEmitter, Input, OnDestroy, OnInit, Output, ViewChild} from '@angular/core';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {fromEvent, Subject, takeUntil} from 'rxjs';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-nomenclature-picker',\r\n  templateUrl: './nomenclature-picker.component.html',\r\n  styleUrls: ['./nomenclature-picker.component.scss']\r\n})\r\nexport class NomenclaturePickerComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n\r\n  @Output() selectProduct: EventEmitter<Nomenclature> = new EventEmitter<Nomenclature>();\r\n  @Input() nomenclatureType: ENomenclatureType;\r\n  @Input() paginationAbsolute = false;\r\n\r\n  countNomenclatures = 0;\r\n\r\n  isLoading = true;\r\n  isStartOnePage = false;\r\n  nomenclatures: Nomenclature[] = [];\r\n  selectedNomenclature: Nomenclature;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    page: [1],\r\n    name: [''],\r\n    code: [''],\r\n    type: [null],\r\n  });\r\n\r\n  queryKey = 'name:/code:/type:null';\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n    {name: 'paginated', value: true}\r\n  ];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => {\r\n      fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n        .pipe(\r\n          tap(() => this.selectedNomenclature = null),\r\n          map(() => this.searchBoxName.nativeElement.value),\r\n          debounceTime(350),\r\n        ).subscribe(() => {\r\n        this.searchNomenclatures();\r\n      });\r\n\r\n      fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n        .pipe(\r\n          tap(() => this.selectedNomenclature = null),\r\n          map(() => this.searchBoxCode.nativeElement.value),\r\n          debounceTime(350),\r\n        ).subscribe(() => {\r\n        this.searchNomenclatures();\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  getNomenclatures() {\r\n    this.nomenclatureService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatures = nomenclatures.results;\r\n      this.countNomenclatures = nomenclatures.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  searchNomenclatures() {\r\n    this.isLoading = true;\r\n    this.destroy$.next(true);\r\n    this.selectedNomenclature = null;\r\n    this.onSelectNomenclature();\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}/type:${this.searchForm.get('type').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.searchForm.get('page').value},\r\n      {name: 'paginated', value: true},\r\n    ];\r\n\r\n    if (this.searchForm.get('name').value) {\r\n      this.query.push({\r\n        name: 'name',\r\n        value: this.searchForm.get('name').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('code').value) {\r\n      this.query.push({\r\n        name: 'code',\r\n        value: this.searchForm.get('code').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('type').value !== null) {\r\n      this.query.push({\r\n        name: 'type',\r\n        value: this.searchForm.get('type').value\r\n      });\r\n    }\r\n\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  onSelectNomenclature() {\r\n    this.selectProduct.emit(this.selectedNomenclature);\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchNomenclatures();\r\n    }\r\n  }\r\n\r\n  selectNomenclatureType(type: ENomenclatureType) {\r\n    this.searchForm.get('type').patchValue(type);\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div\r\n  class=\"nomenclature-picker\"\r\n  [class.nomenclature-picker_paginator-absolute]=\"paginationAbsolute\"\r\n>\r\n  <div class=\"nomenclature-picker__form\">\r\n    <form [formGroup]=\"searchForm\">\r\n      <div class=\"form-box form-box_3\">\r\n        <div class=\"form-group\">\r\n          <label for=\"code\">Code</label>\r\n          <input type=\"text\" id=\"code\" pInputText formControlName=\"code\" #searchBoxCode>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label for=\"name\">Name</label>\r\n          <input type=\"text\" id=\"name\" pInputText formControlName=\"name\" #searchBoxName>\r\n        </div>\r\n        <div class=\"form-group\">\r\n          <label>Type</label>\r\n          <pek-nomenclature-type-picker\r\n            (choiceNomenclatureType)=\"selectNomenclatureType($event)\"\r\n          ></pek-nomenclature-type-picker>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n  <div class=\"table-pagination-preloader\">\r\n    <p-table\r\n      [value]=\"nomenclatures\"\r\n      [rows]=\"10\"\r\n      selectionMode=\"single\"\r\n      [(selection)]=\"selectedNomenclature\"\r\n      (selectionChange)=\"onSelectNomenclature()\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th class=\"text-center\" style=\"width: 7%\">#</th>\r\n          <th style=\"width: 22%\">Code</th>\r\n          <th style=\"width: 30%\">Name</th>\r\n          <th style=\"width: 10%\">UOM</th>\r\n          <th style=\"width: 15%;\">Technology</th>\r\n          <th style=\"width: 15%\" class=\"text-center\">Category</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n        <tr [pSelectableRow]=\"nomenclature\">\r\n          <td style=\"width: 7%\" class=\"text-center\">{{(this.searchForm.get('page').value - 1) * 10 + i + 1}}</td>\r\n          <td style=\"width: 22%\">{{nomenclature.code}}</td>\r\n          <td style=\"width: 30%\">{{nomenclature.name}}</td>\r\n          <td\r\n            style=\"width: 10%\">{{nomenclature.category?.unit_of_measure?.symbol ? nomenclature.category?.unit_of_measure?.symbol : 'Pcs' }}</td>\r\n          <td style=\"width: 15%\">\r\n            <div *ngFor=\"let technology of nomenclature.technologies\">\r\n              {{technology.name}}\r\n            </div>\r\n          </td>\r\n          <td style=\"width: 15%\" class=\"text-center\">{{nomenclature.category?.name}}</td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n\r\n    <div class=\"pagination-preloader\" *ngIf=\"isLoading\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n    </div>\r\n  </div>\r\n  <p-paginator\r\n    #paginator\r\n    [class.hide]=\"nomenclatures.length === 0\"\r\n    [rows]=\"10\"\r\n    [totalRecords]=\"countNomenclatures\"\r\n    (onPageChange)=\"paginate($event)\"\r\n  >\r\n  </p-paginator>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {ListProduct} from '../../../warehouse/models/list-product';\r\nimport {OrderMaterial, OrderProduct} from '../../../procurement/models/order-product';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {Invoice} from '../../../procurement/models/invoice';\r\nimport {InvoiceService} from '../../../procurement/services/invoice.service';\r\nimport {PaymentService} from '../../../payments/services/payment.service';\r\nimport {Payment} from '../../../payments/models/payment';\r\nimport {ServiceInvoiceService} from '@shared/services/service-invoice.service';\r\nimport {ServiceInvoicePayment} from '../../../payments/models/service-invoice-payment';\r\nimport {ServiceInvoicePaymentService} from '../../../payments/services/service-invoice-payment.service';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {environment} from '@env/environment';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {finalize} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {OrderSupplierConfirmation} from '../../../confirmation/models/order-supplier';\r\nimport {OrderSupplierService} from '../../../confirmation/services/order-supplier.service';\r\nimport {RequestService} from '../../../warehouse/services/request.service';\r\nimport {OrderTechnicalEquipment} from '../../../warehouse/models/order-technical-equipment';\r\nimport {OrderTechnicalEquipmentsService} from '../../../warehouse/services/order-technical-equipments.service';\r\nimport {PurchaseCategory} from '../../../purchasing/models/purchase-category';\r\nimport {PurchasingCategoryService} from '../../../purchasing/services/purchasing-category.service';\r\nimport {AlbumService} from '@shared/services/album.service';\r\nimport {forkJoin} from 'rxjs';\r\nimport {deepCopy} from 'deep-copy-ts';\r\n\r\nexport type OrderType = 'procurement' | 'outsourcing' | 'purchase' | 'manufacturing';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-order-page',\r\n  templateUrl: './order-page.component.html',\r\n  styleUrls: ['./order-page.component.scss']\r\n})\r\nexport class OrderPageComponent implements OnInit {\r\n  @Input() orderId: number;\r\n  @Input() orderType: OrderType;\r\n  @Output() loaded: EventEmitter<Order> = new EventEmitter<Order>();\r\n\r\n  isPurchaseOrderNonMaterial = false;\r\n\r\n  link = environment.link_url + 'dash/';\r\n\r\n  productMenuItems: MenuItem[] = [{\r\n    label: 'Selected Item',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditOrderProductQuantity(),\r\n      },\r\n      {\r\n        label: 'Date of Delivery',\r\n        icon: 'pi pi-calendar',\r\n        command: () => this.onEditOrderProductDeliveryDate(),\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveOrderProduct(),\r\n      }\r\n    ]\r\n  }];\r\n\r\n  proformaInvoiceMenuItems: MenuItem[] = [{\r\n    label: 'Selected Proforma Invoice',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onGoToProformaInvoicePage()\r\n      },\r\n      {\r\n        label: 'Files',\r\n        icon: 'pi pi pi-file',\r\n        command: () => this.openProformaInvoiceFilesModal()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveProformaInvoice()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  invoiceMenuItems: MenuItem[] = [{\r\n    label: 'Selected Invoice',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onGoToInvoicePage()\r\n      },\r\n      {\r\n        label: 'Files',\r\n        icon: 'pi pi pi-file',\r\n        command: () => this.openInvoiceFilesModal()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveInvoice()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  serviceInvoiceMenuItems: MenuItem[] = [{\r\n    label: 'Selected Auxiliary Invoice',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onGoToServiceInvoicePage()\r\n      },\r\n      {\r\n        label: 'Files',\r\n        icon: 'pi pi pi-file',\r\n        command: () => this.openServiceInvoiceFilesModal()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveServiceInvoice()\r\n      }\r\n    ]\r\n  }];\r\n\r\n\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  isSuppliersConfirmed = false;\r\n\r\n  isLoading = true;\r\n  isLoadingProducts = true;\r\n  isLoadingInvoices = true;\r\n  isLoadingPayments = true;\r\n  isLoadingServiceInvoices = true;\r\n  isLoadingServicePayments = true;\r\n  isLoadingFiles = true;\r\n  isLoadingTechnicalEquipments = true;\r\n  isLoadingPurchasingCategories = true;\r\n  isCancellation = false;\r\n\r\n  products: OrderProduct[] = [];\r\n  proformaInvoices: Invoice[] = [];\r\n  invoices: Invoice[] = [];\r\n  payments: Payment[] = [];\r\n  orderMaterials: OrderMaterial[] = [];\r\n  technicalEquipments: OrderTechnicalEquipment[] = [];\r\n  purchasingCategories: PurchaseCategory[] = [];\r\n  files: any[] = [];\r\n\r\n  serviceProformaInvoices: Invoice[] = [];\r\n  serviceInvoices: Invoice[] = [];\r\n  servicePayments: ServiceInvoicePayment[] = [];\r\n\r\n  selectedInvoice: Invoice;\r\n  selectedProduct: any;\r\n  selectedProformaInvoice: Invoice;\r\n  selectedPayment: Payment;\r\n  selectedServiceInvoice: Invoice;\r\n  selectedServicePayment: ServiceInvoicePayment;\r\n  selectedFile: any;\r\n\r\n  order: Order;\r\n  orderSupplierConfirmation: OrderSupplierConfirmation;\r\n  selectedPurchasingCategoryId: number;\r\n\r\n  isAlbumPrint = false;\r\n\r\n  constructor(\r\n    private readonly orderService: OrderService,\r\n    private readonly invoiceService: InvoiceService,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly serviceInvoiceService: ServiceInvoiceService,\r\n    private readonly paymentService: PaymentService,\r\n    private readonly modalService: ModalService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly servicePaymentService: ServiceInvoicePaymentService,\r\n    private readonly orderSupplierService: OrderSupplierService,\r\n    private readonly requestService: RequestService,\r\n    private readonly orderTechnicalEquipmentService: OrderTechnicalEquipmentsService,\r\n    private readonly purchasingCategoryService: PurchasingCategoryService,\r\n    public readonly albumService: AlbumService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getOrder();\r\n    this.getInvoices();\r\n    this.getPayments();\r\n    this.getServiceInvoices();\r\n    this.getServicePayments();\r\n    this.getFiles();\r\n\r\n    if (this.orderType === 'outsourcing') {\r\n      this.getOrderTechnicalEquipments();\r\n    }\r\n\r\n    this.orderService.filesModal$.pipe(\r\n      untilDestroyed(this),\r\n    ).subscribe(() => this.openOrderFilesModal());\r\n\r\n    this.orderService.editOrderModal$.pipe(\r\n      untilDestroyed(this),\r\n    ).subscribe(() => this.openEditOrderModal());\r\n  }\r\n\r\n  printAlbum() {\r\n    this.albumService.getNomenclaturesImages((<OrderProduct[]>this.selectedProduct).map(p => p.nomenclature));\r\n  }\r\n\r\n  togglePrintAlbumMode() {\r\n    this.selectedProduct = [];\r\n    this.isAlbumPrint = !this.isAlbumPrint;\r\n  }\r\n\r\n\r\n  getOrder() {\r\n    this.orderService.getById(this.orderId).subscribe(order => {\r\n      order.statuses.map(x => x.estimated_date_sort = new Date(x.estimated_date));\r\n      order.statuses.sort((a, b) => a.estimated_date_sort - b.estimated_date_sort || a.is_active - b.is_active);\r\n      this.order = order;\r\n      this.loaded.next(this.order);\r\n      this.isLoading = false;\r\n\r\n      this.getProducts();\r\n\r\n      if (!this.order.purchase_category?.is_material) {\r\n        this.isPurchaseOrderNonMaterial = true;\r\n      }\r\n\r\n      if (this.orderType === 'purchase') {\r\n        this.getPurchasingCategories();\r\n      }\r\n    });\r\n  }\r\n\r\n  getProducts() {\r\n    this.orderMaterials = [];\r\n    this.products = [];\r\n\r\n    this.orderProductService.get([\r\n      {name: 'order', value: this.orderId}\r\n    ]).subscribe(products => {\r\n      products.forEach((product, idx) => {\r\n\r\n        product.details = this.order.order_products[idx];\r\n        product.isReady = product.is_technology_ready ? product.is_technology_ready : false;\r\n\r\n        if (!this.products.find(p => p.nomenclature.id === product.nomenclature.id &&\r\n          p.current_technology?.id  === product.current_technology?.id\r\n          && p.request_type === product.request_type)) {\r\n          product.totalQuantity = products.filter(p =>\r\n            p.nomenclature.id === product.nomenclature.id &&\r\n            p.current_technology?.id  === product.current_technology?.id &&\r\n            p.request_type === product.request_type)\r\n            .reduce((sum, p) => sum + p.quantity, 0);\r\n\r\n          const rootLists = products\r\n            .filter(p => p.nomenclature.id === product.nomenclature.id && p.request_type === product.request_type &&\r\n              p.current_technology?.id  === product.current_technology?.id\r\n              && product.root_production_list_products.length > 0);\r\n          const rootProducts = [];\r\n          rootLists.forEach(roots => {\r\n            if (roots.root_production_list_products.length > 0) {\r\n              roots.root_production_list_products.forEach(el => {\r\n                rootProducts.push(el);\r\n              });\r\n            }\r\n          });\r\n          product.equal_order_products = deepCopy(products.filter(p =>\r\n            p.nomenclature.id === product.nomenclature.id &&\r\n            p.current_technology?.id  === product.current_technology?.id &&\r\n            p.request_type === product.request_type));\r\n\r\n          if (rootProducts) {\r\n            product.root_production_list_products = rootProducts;\r\n          }\r\n\r\n          this.products.push(product);\r\n        }\r\n      });\r\n      this.products = this.products.map(p => p);\r\n\r\n      if (this.orderType === 'outsourcing') {\r\n        const materials = [];\r\n\r\n        products.forEach(product => {\r\n          if (product.details?.task_materials.length > 0) {\r\n            product.details?.task_materials.forEach(m => {\r\n              let nomenclatureId: number;\r\n              let currentTechnology: string;\r\n              if (m.material_nomenclature) {\r\n                nomenclatureId = m.material_nomenclature.id;\r\n                currentTechnology = m.technology;\r\n              }\r\n              if (m.order_product_nomenclature) {\r\n                nomenclatureId = m.order_product_nomenclature.id;\r\n                currentTechnology = m.technology;\r\n              }\r\n              if (m.list_product) {\r\n                nomenclatureId = m.list_product.nomenclature.id;\r\n                currentTechnology = m.technology;\r\n              }\r\n              const inMaterials = materials.find(material => {\r\n                if (material.material_nomenclature) {\r\n                  return material.material_nomenclature.id === nomenclatureId && material.technology === currentTechnology;\r\n                }\r\n                if (material.order_product_nomenclature) {\r\n                  return material.order_product_nomenclature.id === nomenclatureId && material.technology === currentTechnology;\r\n                }\r\n                if (material.list_product) {\r\n                  return material.list_product.nomenclature.id === nomenclatureId && material.technology === currentTechnology;\r\n                }\r\n              });\r\n              if (inMaterials) {\r\n                inMaterials.allIds.push(m.id);\r\n                inMaterials.totalInitialQuantity += m.initial_quantity;\r\n                inMaterials.totalRequiredQuantity += m.required_quantity;\r\n              } else {\r\n                m.allIds = [m.id];\r\n                m.totalInitialQuantity = m.initial_quantity;\r\n                m.totalRequiredQuantity = m.required_quantity;\r\n                materials.push(m);\r\n              }\r\n            });\r\n          }\r\n        });\r\n\r\n        this.orderMaterials = materials.map(m => m);\r\n      }\r\n\r\n      this.isLoadingProducts = false;\r\n    });\r\n  }\r\n\r\n  getInvoices() {\r\n    this.invoiceService.get([{name: 'order', value: this.orderId}]).subscribe(invoices => {\r\n      this.invoices = invoices.filter(el => el.is_proforma === false);\r\n      this.proformaInvoices = invoices.filter(el => el.is_proforma === true);\r\n      this.isLoadingInvoices = false;\r\n    });\r\n  }\r\n\r\n  getPayments() {\r\n    this.paymentService.get([{name: 'order', value: this.orderId}]).subscribe(payments => {\r\n      this.payments = payments;\r\n\r\n      if (this.selectedPayment) this.selectedPayment = this.payments.find(p => p.id === this.selectedPayment.id);\r\n\r\n      this.isLoadingPayments = false;\r\n    });\r\n  }\r\n\r\n  getServiceInvoices() {\r\n    this.serviceInvoiceService.get([{name: 'order', value: this.orderId}]).subscribe(serviceInvoices => {\r\n      this.serviceInvoices = serviceInvoices.filter(el => el.is_proforma === false);\r\n      this.serviceProformaInvoices = serviceInvoices.filter(el => el.is_proforma === true);\r\n      this.isLoadingServiceInvoices = false;\r\n    });\r\n  }\r\n\r\n  getServicePayments() {\r\n    this.servicePaymentService.get([{name: 'order', value: this.orderId}]).subscribe(servicePayments => {\r\n      this.servicePayments = servicePayments;\r\n      this.isLoadingServicePayments = false;\r\n    });\r\n  }\r\n\r\n  getRootLists(products: OrderProduct[]): { list: ListProduct, count?: number }[] {\r\n    const lists: { list: ListProduct, count?: number }[] = [];\r\n\r\n    // root_production_list_products\r\n    products.forEach(prod => {\r\n      prod.root_production_list_products.forEach((res: ListProduct) => {\r\n        if (res) {\r\n          const found = lists.find(el => el.list.nomenclature.name === res.nomenclature.name);\r\n          if (found) {\r\n            found.count++;\r\n          } else {\r\n            lists.push({list: res, count: 1});\r\n          }\r\n        }\r\n\r\n      });\r\n    });\r\n\r\n    return lists;\r\n  }\r\n\r\n  getFiles() {\r\n    this.orderService.getFiles(+this.orderId).subscribe(files => {\r\n      this.files = files;\r\n      this.isLoadingFiles = false;\r\n    });\r\n  }\r\n\r\n  onEditOrderProductQuantity() {\r\n    this.orderProductService.editOrderProductQuantity(<OrderProduct>this.selectedProduct).subscribe(orderProduct => {\r\n      if (orderProduct) {\r\n        this.selectedProduct.totalQuantity = orderProduct.totalQuantity;\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditOrderProductDeliveryDate() {\r\n    this.orderProductService.editOrderProductDeliveryDate(this.selectedProduct).subscribe(orderProduct => {\r\n      if (orderProduct) {\r\n        this.selectedProduct.reception_date = orderProduct.reception_date;\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveOrderProduct() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        const deleteCall = [];\r\n        this.selectedProduct.equal_order_products.forEach(product => {\r\n          deleteCall.push(this.orderProductService.removeFromOrder(product));\r\n        });\r\n        forkJoin([...deleteCall]).subscribe(res => {\r\n          this.products = this.products.filter(p => p.id !== this.selectedProduct.id);\r\n          this.selectedProduct = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onAddProduct() {\r\n    if (this.orderType !== 'outsourcing') {\r\n      this.orderProductService.openAddProductToOrderModal(false, this.orderId).subscribe(product => {\r\n        if (product) {\r\n          this.getProducts();\r\n        }\r\n      });\r\n    } else {\r\n      this.orderProductService.openAddOutsourcingRequestModal(this.orderId).subscribe(product => {\r\n        if (product) {\r\n          this.getProducts();\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onCreateProformaInvoice() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.orderService.createProformaInvoice(this.orderId).subscribe(() => this.getInvoices());\r\n      }\r\n    });\r\n  }\r\n\r\n  onGoToProformaInvoicePage() {\r\n    window.open(`${this.link}accounting/invoices/products/${this.selectedProformaInvoice?.id}`);\r\n  }\r\n\r\n  openProformaInvoiceFilesModal() {\r\n    this.invoiceService.openInvoiceFilesModal(this.selectedProformaInvoice).subscribe();\r\n  }\r\n\r\n  onRemoveProformaInvoice() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.invoiceService.delete(this.selectedProformaInvoice.id).subscribe(() => {\r\n          this.selectedProformaInvoice = null;\r\n          this.getInvoices();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreateInvoice() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.orderService.createInvoice(this.orderId).subscribe(() => this.getInvoices());\r\n      }\r\n    });\r\n  }\r\n\r\n  onGoToInvoicePage() {\r\n    window.open(`${this.link}accounting/invoices/products/${this.selectedInvoice?.id}`);\r\n  }\r\n\r\n  openInvoiceFilesModal() {\r\n    this.invoiceService.openInvoiceFilesModal(this.selectedInvoice).subscribe();\r\n  }\r\n\r\n  onRemoveInvoice() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.invoiceService.delete(this.selectedInvoice.id).subscribe(() => {\r\n          this.selectedInvoice = null;\r\n          this.getInvoices();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreatePayment() {\r\n    this.paymentService.openCreateEditPaymentForm('create', null, this.order.supplier.id, this.orderId).subscribe(payment => {\r\n      if (payment) {\r\n        this.getPayments();\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditPayment() {\r\n    this.paymentService.openCreateEditPaymentForm('edit', this.selectedPayment).subscribe(payment => {\r\n      if (payment) {\r\n        this.getPayments();\r\n      }\r\n    });\r\n  }\r\n\r\n  onCreateServiceInvoice(isProforma: boolean) {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.serviceInvoiceService.create({\r\n          order: this.orderId,\r\n          supplier: this.order.supplier.id,\r\n          is_proforma: isProforma,\r\n        }).subscribe(invoice => {\r\n          this.getServiceInvoices();\r\n          window.open(`${this.link}accounting/invoices/service-invoice/${invoice.id}`);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveServiceInvoice() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.serviceInvoiceService.delete(this.selectedServiceInvoice?.id).subscribe(() => {\r\n          this.getServiceInvoices();\r\n          this.selectedServiceInvoice = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  openServiceInvoiceFilesModal() {\r\n    this.serviceInvoiceService.openInvoiceFilesModal(this.selectedServiceInvoice).subscribe();\r\n  }\r\n\r\n  onGoToServiceInvoicePage() {\r\n    window.open(`${this.link}accounting/invoices/service-invoice/${this.selectedServiceInvoice?.id}`);\r\n  }\r\n\r\n  onCreateServicePayment() {\r\n    this.servicePaymentService.openCreateEditServicePaymentForm('create', null, this.selectedServiceInvoice.supplier?.id, this.orderId).subscribe(confirm => {\r\n      if (confirm) {\r\n        this.getServicePayments();\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditServicePayment() {\r\n    this.servicePaymentService.openCreateEditServicePaymentForm('edit', this.selectedServicePayment).subscribe(payment => {\r\n      if (payment) {\r\n        this.getPayments();\r\n      }\r\n    });\r\n  }\r\n\r\n  getFileName(name) {\r\n    const nameArr = name.split('/');\r\n    return nameArr[nameArr.length - 1];\r\n  }\r\n\r\n  openOrderFilesModal() {\r\n    this.modalService.openAddFileToOrderModal(this.orderId).subscribe(confirm => {\r\n      this.getFiles();\r\n    });\r\n  }\r\n\r\n  openEditOrderModal() {\r\n    this.orderService.openEditOrderModal(this.order, this.orderType).subscribe(confirm => {\r\n      if (confirm) {\r\n        this.getOrder();\r\n      }\r\n    });\r\n  }\r\n\r\n  onDownloadFile(file: any) {\r\n    this.addition.add(file.id);\r\n    this.orderService.downloadFile(file.id).pipe(\r\n      finalize(() => this.addition.delete(file.id))\r\n    ).subscribe(response => {\r\n      const filename = this.getFileName(file.file);\r\n      this.adapterService.downloadFile(filename, response);\r\n    });\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.deletion.add(id);\r\n\r\n        this.orderService.deleteFile(id).pipe(\r\n          finalize(() => this.deletion.delete(id))\r\n        ).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id);\r\n          this.files.splice(index, 1);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onCancelOrderMaterials() {\r\n    this.modalService.confirm('danger', 'Confirm').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isCancellation = true;\r\n        this.requestService.cancel(this.orderId).pipe(\r\n          finalize(() => this.isCancellation = false)\r\n        ).subscribe(() => {\r\n          this.orderMaterials = [];\r\n          this.products = [];\r\n          this.selectedProduct = null;\r\n          this.isLoadingProducts = true;\r\n          this.getOrder();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  getOrderTechnicalEquipments() {\r\n    this.orderTechnicalEquipmentService.get([{name: 'order', value: this.orderId}]).subscribe(technicalEquipments => {\r\n      this.technicalEquipments = technicalEquipments;\r\n      this.isLoadingTechnicalEquipments = false;\r\n    });\r\n  }\r\n\r\n  getPurchasingCategories() {\r\n    this.purchasingCategoryService.get([{\r\n      name: 'is_material', value: true\r\n    }]).subscribe(categories => {\r\n      this.purchasingCategories = categories;\r\n      this.selectedPurchasingCategoryId = this.purchasingCategories.find(c => c.id === this.order.purchase_category?.id)?.id;\r\n      this.isLoadingPurchasingCategories = false;\r\n    });\r\n  }\r\n\r\n  onSelectPurchaseCategory() {\r\n    const send = {\r\n      purchase_category: this.selectedPurchasingCategoryId,\r\n      id: this.order.id\r\n    };\r\n\r\n    this.orderService.updatePartly(send).subscribe();\r\n  }\r\n\r\n  onAddMaterial() {\r\n    this.orderProductService.openAddPMaterialToOrder(this.selectedProduct.id).subscribe(request => {\r\n      if (request) {\r\n        this.getOrder();\r\n      }\r\n    });\r\n  }\r\n\r\n  public checkIfIsBlockedToTenderTransform(): boolean {\r\n    return this.proformaInvoices.length > 0 || this.invoices.length > 0;\r\n  }\r\n\r\n  public clearSupplierRelatedFields() {\r\n    this.order.supplier = null;\r\n    this.order.can_select_supplier = true;\r\n  }\r\n}\r\n","<div class=\"order-page\">\r\n  <div class=\"page__card order-page__info mb-4\">\r\n    <div *ngIf=\"!isLoading; else infoLoading\">\r\n      <div class=\"row\">\r\n        <div class=\"col-md-7\">\r\n          <h2>Order Information</h2>\r\n          <h4><span>Id:</span> {{order.id}}</h4>\r\n          <h4><span>Date:</span> {{order.created|date:'dd/MM/yyyy'}}</h4>\r\n          <h4><span>Statuses:</span></h4>\r\n          <div class=\"statuses\">\r\n            <p\r\n              [ngClass]=\"{'text-success': item.is_active}\"\r\n              class=\"status\"\r\n              *ngFor=\"let item of order.statuses\"\r\n            >\r\n              {{item.status.value}}: {{item.estimated_date | date:'dd/MM/yyyy'}}\r\n            </p>\r\n          </div>\r\n          <h4><span>Comment:</span> {{order.comment}}</h4>\r\n          <h4 *ngIf=\"orderType === 'purchase'\"><span>Type:</span> {{order.purchase_category?.is_material ? 'Tangible' : 'Intangible'}}</h4>\r\n          <div class=\"purchase-category\" *ngIf=\"orderType === 'purchase'\">\r\n            <h4>\r\n              <span>Purchase Category:</span>\r\n            </h4>\r\n            <div class=\"purchase-category-dropdown\">\r\n              <p-dropdown\r\n                *ngIf=\"!isLoadingPurchasingCategories; else spinner\"\r\n                [showClear]=\"true\"\r\n                [filter]=\"true\"\r\n                [options]=\"purchasingCategories\"\r\n                [(ngModel)]=\"selectedPurchasingCategoryId\"\r\n                (ngModelChange)=\"onSelectPurchaseCategory()\"\r\n                optionValue=\"id\"\r\n                optionLabel=\"name\"\r\n                placeholder=\"Choice Purchase Category\"\r\n              >\r\n              </p-dropdown>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-md-5\">\r\n          <div class=\"supplier\">\r\n            <h2>Supplier</h2>\r\n            <button\r\n              *ngIf=\"order.supplier\"\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-angle-double-right\"\r\n              label=\"Go To Supplier\"\r\n              [routerLink]=\"'/crm/business-partners/company-page/' + order.supplier.id\"\r\n            ></button>\r\n          </div>\r\n          <h4><span>Name:</span> {{order.supplier?.name}}</h4>\r\n          <h4>\r\n            <span>Category:</span>\r\n            <ng-container *ngFor=\"let item of order.supplier?.categories; let idx = index\">\r\n              <!--              {{categories[item]}}-->\r\n              <span *ngIf=\"idx !== order.supplier?.categories.length - 1\">,</span>\r\n            </ng-container>\r\n          </h4>\r\n          <h4><span>Address:</span> {{order.supplier?.address}}</h4>\r\n          <h4><span>Tax Number:</span> {{order.supplier?.tax_number}}</h4>\r\n          <h4><span>Register Number:</span> {{order.supplier?.registration_number}}</h4>\r\n          <h4><span>Nomenclature:</span> {{order.supplier?.supplier_nomenclature}}</h4>\r\n          <h4><span>Description:</span></h4>\r\n          <p>{{order.supplier?.comment}}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <ng-container *ngIf=\"orderType !== 'purchase' || (orderType === 'purchase' && !isPurchaseOrderNonMaterial)\">\r\n    <h2 class=\"mb-4\">Ordered Items</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #dt\r\n          scrollHeight=\"calc(100vh - 24rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"products.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedProduct\"\r\n          [value]=\"products\"\r\n          [selectionMode]=\"isAlbumPrint ? 'checkbox' : 'single'\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedProduct\">Choose the Item to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto\"\r\n                [model]=\"productMenuItems\"\r\n                [class.disabled]=\"!selectedProduct || isAlbumPrint\"></p-menubar>\r\n              <button\r\n                [loading]=\"albumService.loading$ | async\"\r\n                pButton\r\n                *ngIf=\"isAlbumPrint\"\r\n                class=\"p-button-success ml-2\"\r\n                type=\"button\"\r\n                label=\"Print Album\"\r\n                (click)=\"printAlbum()\"\r\n                [disabled]=\"selectedProduct?.length === 0\"\r\n              >\r\n              </button>\r\n              <button\r\n                pButton\r\n                [icon]=\"isAlbumPrint ? 'pi pi-times' : 'pi pi-images'\"\r\n                class=\"ml-2\"\r\n                type=\"button\"\r\n                [label]=\"(isAlbumPrint ? 'Close' : 'Open') + ' Album Print'\"\r\n                (click)=\"togglePrintAlbumMode()\"\r\n                [disabled]=\"isLoading\"\r\n              >\r\n              </button>\r\n              <button\r\n                (click)=\"onAddProduct()\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-2\"\r\n                label=\"Add Item\"\r\n                [disabled]=\"isLoadingProducts\"\r\n              >\r\n              </button>\r\n              <button\r\n                *ngIf=\"orderType === 'outsourcing'\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-2\"\r\n                label=\"Add Material\"\r\n                (click)=\"onAddMaterial()\"\r\n                [disabled]=\"!selectedProduct || isAlbumPrint\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-container *ngIf=\"orderType !== 'outsourcing'\">\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 3%\" class=\"text-center\">\r\n                  <div class=\"row-toggler\">\r\n                    <div class=\"toggle\">\r\n                      <p-tableHeaderCheckbox *ngIf=\"isAlbumPrint\"></p-tableHeaderCheckbox>\r\n                    </div>\r\n                    #\r\n                  </div>\r\n                </th>\r\n                <th style=\"width: 14%\">Code</th>\r\n                <th style=\"width: 18%\">Name</th>\r\n                <th style=\"width: 15%\">Description</th>\r\n                <th style=\"width: 12%\" class=\"text-center\">Ordered Quantity</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Date</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Delivery Date</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Request Type</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Root Lists</th>\r\n              </tr>\r\n            </ng-template>\r\n          </ng-container>\r\n          <ng-container *ngIf=\"orderType === 'outsourcing'\">\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 5%\" class=\"index-header text-center\">\r\n                  <div class=\"row-toggler\">\r\n                    <div class=\"toggle\">\r\n                      <p-tableHeaderCheckbox *ngIf=\"isAlbumPrint\"></p-tableHeaderCheckbox>\r\n                    </div>\r\n                    #\r\n                  </div>\r\n                </th>\r\n                <th style=\"width: 14%\">Code</th>\r\n                <th style=\"width: 14%\">Name</th>\r\n                <th style=\"width: 15%\">Description</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Technology</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Ordered Quantity</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Date</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Delivery Date</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Request Type</th>\r\n                <th style=\"width: 14%\" class=\"text-center\">Root Lists</th>\r\n              </tr>\r\n            </ng-template>\r\n          </ng-container>\r\n          <ng-container *ngIf=\"orderType !== 'outsourcing'\">\r\n            <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"product\">\r\n                <td style=\"width: 3%\" class=\"text-center\">\r\n                  <div class=\"row-toggler\">\r\n                    <div class=\"toggle\">\r\n                      <p-tableCheckbox *ngIf=\"isAlbumPrint\" [value]=\"product\"></p-tableCheckbox>\r\n                    </div>\r\n                    {{i + 1}}\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 14%\">{{product.nomenclature.code}}</td>\r\n                <td style=\"width: 18%\">{{product.nomenclature.name}}</td>\r\n                <td style=\"width: 15%\">\r\n                  <div class=\"word-break\">{{product.nomenclature.description}}</div>\r\n                </td>\r\n                <td style=\"width: 12%\" class=\"text-center\">\r\n                  {{product.totalQuantity}} {{product?.nomenclature?.category?.unit_of_measure?.symbol}}\r\n                </td>\r\n                <td style=\"width: 8%\" class=\"text-center\">{{product.request_date |date:'dd/MM/yyyy'}}</td>\r\n                <td style=\"width: 10%\" class=\"text-center\">{{product.reception_date |date:'dd/MM/yyyy'}}</td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"product.request_type == 1\">Auto</ng-container>\r\n                  <ng-container *ngIf=\"product.request_type == 0\">Manual</ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"word-break\">\r\n                  <div\r\n                    class=\"d-block\"\r\n                    *ngFor=\"let item of getRootLists(product.equal_order_products); let idx = index\"\r\n                  >\r\n                    {{item.list.nomenclature.code}}~{{item.list.nomenclature.name}} ({{item.count}})\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </ng-container>\r\n          <ng-container *ngIf=\"orderType === 'outsourcing'\">\r\n            <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"product\">\r\n                <td style=\"width: 3%\" class=\"text-center\">\r\n                  <div class=\"row-toggler\">\r\n                    <div class=\"toggle\">\r\n                      <p-tableCheckbox *ngIf=\"isAlbumPrint\" [value]=\"product\"></p-tableCheckbox>\r\n                    </div>\r\n                    {{i + 1}}\r\n                  </div>\r\n                </td>\r\n                <td style=\"width: 14%\">{{product.nomenclature.code}}</td>\r\n                <td style=\"width: 14%\">{{product.nomenclature.name}}</td>\r\n                <td style=\"width: 15%\">\r\n                  <div class=\"word-break\">{{product.nomenclature.description}}</div>\r\n                </td>\r\n                <td style=\"width: 8%\" class=\"text-center\">\r\n                  {{product.current_technology?.name}}\r\n                </td>\r\n                <td style=\"width: 8%\" class=\"text-center\">\r\n                  {{product.totalQuantity}} {{product?.nomenclature?.category?.unit_of_measure?.symbol}}\r\n                </td>\r\n                <td style=\"width: 8%\" class=\"text-center\">{{product.request_date |date:'dd/MM/yyyy'}}</td>\r\n                <td style=\"width: 8%\" class=\"text-center\">{{product.reception_date |date:'dd/MM/yyyy'}}</td>\r\n                <td style=\"width: 8%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"product.request_type == 1\">Auto</ng-container>\r\n                  <ng-container *ngIf=\"product.request_type == 0\">Manual</ng-container>\r\n                </td>\r\n                <td style=\"width: 14%\">\r\n                  <div\r\n                    class=\"d-block\"\r\n                    *ngFor=\"let item of getRootLists(product.equal_order_products); let idx = index\"\r\n                  >\r\n                    {{item.list.nomenclature.code}}~{{item.list.nomenclature.name}} ({{item.count}})\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </ng-container>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"10\">\r\n                <i *ngIf=\"isLoadingProducts\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingProducts\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"dt.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!dt.paginator && !isLoadingProducts && products.length > 0\" class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"dt.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n\r\n    <pek-order-tender-supplier *ngIf=\"order && orderType !== 'outsourcing' && order.can_select_supplier\"\r\n                               [isSuppliersConfirmed]=\"isSuppliersConfirmed\"\r\n                               [orderId]=\"order.id\">\r\n    </pek-order-tender-supplier>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"orderType === 'outsourcing'\">\r\n    <h2 class=\"mb-4\">\r\n      Parts/Materials List\r\n    </h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #mt\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 24rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"orderMaterials.length > 0\"\r\n          [rows]=\"10\"\r\n          [value]=\"orderMaterials\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                *ngIf=\"orderMaterials.length > 0\"\r\n                (click)=\"onCancelOrderMaterials()\"\r\n                pButton\r\n                [loading]=\"isCancellation\"\r\n                type=\"button\"\r\n                label=\"Cancelation\"\r\n                icon=\"pi pi-times\"\r\n                class=\"ml-auto p-button-danger p-button-icon\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 30%\">Code</th>\r\n              <th style=\"width: 25%\">Name</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Technology</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Required Quantity</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Status</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-material let-i=\"rowIndex\">\r\n            <tr>\r\n              <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n              <td style=\"width: 30%\">\r\n                <div *ngIf=\"material.material_nomenclature\">\r\n                  {{material.material_nomenclature.code}}\r\n                </div>\r\n                <div *ngIf=\"material.order_product_nomenclature\">\r\n                  {{material.order_product_nomenclature.code}}\r\n                </div>\r\n                <div *ngIf=\"material.list_product\">\r\n                  {{material.list_product.nomenclature.code}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 25%\">\r\n                <div *ngIf=\"material.material_nomenclature\">\r\n                  {{material.material_nomenclature.name}}\r\n                </div>\r\n                <div *ngIf=\"material.order_product_nomenclature\">\r\n                  {{material.order_product_nomenclature.name}}\r\n                </div>\r\n                <div *ngIf=\"material.list_product\">\r\n                  {{material.list_product.nomenclature.name}}\r\n                </div>\r\n              </td>\r\n\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                {{material.technology ? material.technology : null}}\r\n              </td>\r\n              <td style=\"width: 20%\" class=\"text-center\">{{material?.totalInitialQuantity}}</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <i *ngIf=\"material?.totalRequiredQuantity === 0\" class=\"pi pi-check-circle\"></i>\r\n                <i *ngIf=\"material?.totalRequiredQuantity > 0\" class=\"pi pi-times\"></i>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n                <i *ngIf=\"isLoadingProducts\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingProducts\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"mt.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!mt.paginator && !isLoadingProducts && orderMaterials.length > 0\" class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"mt.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">\r\n      Technical Equipments\r\n    </h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #et\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 24rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"technicalEquipments.length > 0\"\r\n          [rows]=\"10\"\r\n          [value]=\"technicalEquipments\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 25%\">Code</th>\r\n              <th style=\"width: 25%\">Name</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Locator</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Quantity</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Status</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-technicalEquipment let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"technicalEquipment\" class=\"table-row\">\r\n              <td class=\"text-center\">{{i + 1}}</td>\r\n              <td>{{technicalEquipment.nomenclature.code}}</td>\r\n              <td>{{technicalEquipment.nomenclature.name}}</td>\r\n              <td class=\"text-center\">\r\n                <span *ngFor=\"let locator of technicalEquipment.locators\">\r\n                  {{locator.name}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">{{technicalEquipment.max_initial_quantity}}</td>\r\n              <td class=\"text-center\"\r\n                  [class.text-danger]=\"!technicalEquipment.in_use || technicalEquipment.in_use && technicalEquipment.locators.length < 1\"\r\n                  [class.text-success]=\"technicalEquipment.in_use && technicalEquipment.locators.length > 0\"\r\n              >{{technicalEquipment.in_use && technicalEquipment.locators.length > 0 ? 'Received' : 'Not Received'}}</td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n                <i *ngIf=\"isLoadingTechnicalEquipments \" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingTechnicalEquipments \">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"et.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!et.paginator && !isLoadingTechnicalEquipments && technicalEquipments.length > 0\"\r\n           class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"et.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n\r\n    <pek-order-tender-supplier *ngIf=\"order && order.can_select_supplier\" [isSuppliersConfirmed]=\"isSuppliersConfirmed\"\r\n                               [orderId]=\"order.id\">\r\n    </pek-order-tender-supplier>\r\n  </ng-container>\r\n\r\n  <ng-container *ngIf=\"orderType !== 'purchase' || (orderType === 'purchase' && !isPurchaseOrderNonMaterial)\">\r\n    <h2 class=\"mb-4\">Proforma Invoices</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"proformaInvoices.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedProformaInvoice\"\r\n          [value]=\"proformaInvoices\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedProformaInvoice\">Choose the Proforma Invoice to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto\"\r\n                [model]=\"proformaInvoiceMenuItems\"\r\n                [class.disabled]=\"!selectedProformaInvoice\"></p-menubar>\r\n              <button\r\n                (click)=\"onCreateProformaInvoice()\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-2\"\r\n                label=\"Create Proforma Invoice\"\r\n                [disabled]=\"isLoadingInvoices\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Creation Date</th>\r\n              <th style=\"width: 28%\" class=\"text-center\">Proforma Number</th>\r\n              <th style=\"width: 32%\" class=\"text-center\">Supplier</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Total Price</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"invoice\">\r\n              <td class=\"text-center\">{{i + 1}}</td>\r\n              <td class=\"text-center\">\r\n                {{invoice.system_creation_date | date:'dd/MM/yyyy'}}\r\n                <i *ngIf=\"invoice.related_files\" class=\"pi pi-paperclip\"></i>\r\n              </td>\r\n              <td class=\"text-center\">{{invoice.self_proforma_serial_number}}</td>\r\n              <td class=\"text-center\">{{invoice.supplier?.name}}</td>\r\n              <td class=\"text-center\">{{invoice.total_price | moneyFormat}} {{invoice.currency?.symbol}} </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoadingInvoices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingInvoices\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Invoices</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"invoices.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedInvoice\"\r\n          [value]=\"invoices\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedInvoice\">Choose the Invoice to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto\"\r\n                [model]=\"invoiceMenuItems\"\r\n                [class.disabled]=\"!selectedInvoice\">\r\n              </p-menubar>\r\n              <button\r\n                (click)=\"onCreateInvoice()\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-2\"\r\n                label=\"Create Invoice\"\r\n                [disabled]=\"isLoadingInvoices\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Creation Date</th>\r\n              <th style=\"width: 28%\" class=\"text-center\">Invoice Number</th>\r\n              <th style=\"width: 32%\" class=\"text-center\">Supplier</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Total Price</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"invoice\">\r\n              <td class=\"text-center\">{{i + 1}}</td>\r\n              <td class=\"text-center\">\r\n                {{invoice.system_creation_date | date:'dd/MM/yyyy'}}\r\n                <i *ngIf=\"invoice.related_files\" class=\"pi pi-paperclip\"></i>\r\n              </td>\r\n              <td class=\"text-center\">{{invoice.self_serial_number}}</td>\r\n              <td class=\"text-center\">{{invoice.supplier?.name}}</td>\r\n              <td class=\"text-center\">{{invoice.total_price | moneyFormat}} {{invoice.currency?.symbol}} </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoadingInvoices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingInvoices\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Payments</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"payments.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedPayment\"\r\n          [value]=\"payments\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedPayment\">Choose the Payment to edit</p>\r\n              <button\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-pencil\"\r\n                class=\"ml-auto\"\r\n                label=\"Edit Payment\"\r\n                [disabled]=\"isLoadingInvoices || !selectedPayment\"\r\n                (click)=\"onEditPayment()\"\r\n              >\r\n              </button>\r\n              <button\r\n                (click)=\"onCreatePayment()\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-2\"\r\n                label=\"Create Payment\"\r\n                [disabled]=\"isLoadingInvoices\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Date</th>\r\n              <th style=\"width: 28%\" class=\"text-center\">Invoice</th>\r\n              <th style=\"width: 32%\" class=\"text-center\">Supplier</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Amount</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Converted Amount</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-payment let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"payment\">\r\n              <td class=\"text-center\">{{i + 1}}</td>\r\n              <td class=\"text-center\">\r\n                {{payment.payment_date | date:'dd/MM/yyyy'}}\r\n              </td>\r\n              <td class=\"text-center\">\r\n              <span *ngFor=\"let inv of payment.invoices; let idx = index\">\r\n                {{inv.self_serial_number}}\r\n                <span *ngIf=\"idx !== payment.invoices.length - 1\">,</span>\r\n              </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n              <span *ngFor=\"let inv of payment.invoices; let idx = index\">\r\n                {{inv.supplier?.name}}\r\n                <span *ngIf=\"idx !== payment.invoices.length - 1\">,</span>\r\n              </span>\r\n              </td>\r\n              <td class=\"text-center\">{{payment.amount | moneyFormat}} </td>\r\n              <td class=\"text-center\">{{payment.converted_amount | moneyFormat}} </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n                <i *ngIf=\"isLoadingPayments\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingPayments\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n  </ng-container>\r\n\r\n\r\n  <div [class.auxiliary-box]=\"orderType !== 'purchase' || (orderType === 'purchase' && !isPurchaseOrderNonMaterial)\">\r\n    <h2 class=\"mb-4\">Auxiliary Proforma Invoices</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"serviceProformaInvoices.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedServiceInvoice\"\r\n          [value]=\"serviceProformaInvoices\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedServiceInvoice || !selectedServiceInvoice?.is_proforma\">Choose the Auxiliary Proforma Invoice to\r\n                edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto\"\r\n                [model]=\"serviceInvoiceMenuItems\"\r\n                [class.disabled]=\"!selectedServiceInvoice || !selectedServiceInvoice?.is_proforma\">\r\n              </p-menubar>\r\n              <button\r\n                (click)=\"onCreateServiceInvoice(true)\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-2\"\r\n                label=\"Create Auxiliary Proforma Invoice\"\r\n                [disabled]=\"isLoadingServiceInvoices\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Creation Date</th>\r\n              <th style=\"width: 28%;\" class=\"text-center\">Proforma Number</th>\r\n              <th style=\"width: 32%\" class=\"text-center\">Company</th>\r\n              <th style=\"width: 20%;\" class=\"text-center\">Total Price</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-serviceInvoice let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"serviceInvoice\">\r\n              <td class=\"text-center\">{{i + 1}}</td>\r\n              <td class=\"text-center\">\r\n                {{serviceInvoice.system_creation_date|date:'dd/MM/yyyy'}}\r\n                <i *ngIf=\"serviceInvoice.related_files\" class=\"pi pi-paperclip\"></i>\r\n              </td>\r\n              <td class=\"text-center\">{{serviceInvoice.self_proforma_serial_number}}</td>\r\n              <td class=\"text-center\">{{serviceInvoice.supplier?.name}}</td>\r\n              <td class=\"text-center\">{{serviceInvoice.total_price | moneyFormat}} {{serviceInvoice.currency?.symbol}}\r\n                <ng-container *ngIf=\"serviceInvoice.currency.code! === 'EUR'\">\r\n                  ({{serviceInvoice.total_price_converted | moneyFormat}} )\r\n                </ng-container>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoadingServiceInvoices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingServiceInvoices\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Auxiliary Invoices</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"serviceInvoices.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedServiceInvoice\"\r\n          [value]=\"serviceInvoices\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedServiceInvoice || selectedServiceInvoice?.is_proforma\">Choose the Auxiliary Invoice to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto\"\r\n                [model]=\"serviceInvoiceMenuItems\"\r\n                [class.disabled]=\"!selectedServiceInvoice || selectedServiceInvoice?.is_proforma\">\r\n              </p-menubar>\r\n              <button\r\n                (click)=\"onCreateServiceInvoice(false)\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-2\"\r\n                label=\"Create Auxiliary Invoice\"\r\n                [disabled]=\"isLoadingServiceInvoices\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Creation Date</th>\r\n              <th style=\"width: 28%\" class=\"text-center\">Invoice</th>\r\n              <th style=\"width: 32%\" class=\"text-center\">Company</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Total Price</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-serviceInvoice let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"serviceInvoice\">\r\n              <td class=\"text-center\">{{i + 1}}</td>\r\n              <td class=\"text-center\">\r\n                {{serviceInvoice.system_creation_date | date:'dd/MM/yyyy'}}\r\n                <i *ngIf=\"serviceInvoice.related_files\" class=\"pi pi-paperclip\"></i>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                {{serviceInvoice.self_serial_number}}\r\n              </td>\r\n              <td class=\"text-center\">{{serviceInvoice.supplier?.name}}</td>\r\n              <td class=\"text-center\">{{serviceInvoice.total_price | moneyFormat}} {{serviceInvoice.currency?.symbol}}\r\n                <ng-container *ngIf=\"serviceInvoice.currency.code!=='EUR'\">\r\n                  ({{serviceInvoice.total_price_converted | moneyFormat}} )\r\n                </ng-container>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoadingServiceInvoices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingServiceInvoices\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Auxiliary Invoice Payments</h2>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"servicePayments.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedServicePayment\"\r\n          [value]=\"servicePayments\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedServicePayment\">Choose the Auxiliary Invoice Payment to edit</p>\r\n              <button\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-pencil\"\r\n                class=\"ml-auto\"\r\n                label=\"Edit Auxiliary Invoice Payment\"\r\n                [disabled]=\"isLoadingServicePayments || !selectedServicePayment\"\r\n                (click)=\"onEditServicePayment()\"\r\n              >\r\n              </button>\r\n              <button\r\n                (click)=\"onCreateServicePayment()\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-2\"\r\n                label=\"Create Auxiliary Invoice Payment\"\r\n                [disabled]=\"isLoadingServicePayments || !selectedServiceInvoice\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Date</th>\r\n              <th style=\"width: 28%\" class=\"text-center\">Invoice</th>\r\n              <th style=\"width: 32%\" class=\"text-center\">Supplier</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Amount</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Converted Amount</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-payment let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"payment\">\r\n              <td class=\"text-center\">{{i + 1}}</td>\r\n              <td class=\"text-center\">\r\n                {{payment.payment_date|date:'dd/MM/yyyy'}}\r\n              </td>\r\n              <td class=\"text-center\">\r\n              <span *ngFor=\"let inv of payment.service_invoices; let idx = index\">\r\n                {{inv.self_serial_number}}\r\n                <span *ngIf=\"idx !== payment.service_invoices.length - 1\">,</span>\r\n              </span>\r\n              </td>\r\n              <td class=\"text-center\"> <span *ngFor=\"let inv of payment.service_invoices; let idx = index\">\r\n              {{inv.supplier?.name}}\r\n                <span *ngIf=\"idx !== payment.service_invoices.length - 1\">,</span>\r\n            </span>\r\n              </td>\r\n              <td class=\"text-center\">{{payment.converted_amount | moneyFormat}} </td>\r\n              <td class=\"text-center\">{{payment.converted_amount | moneyFormat}} </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n                <i *ngIf=\"isLoadingServicePayments\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingServicePayments\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <h2 class=\"mb-4\">Files</h2>\r\n\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"files.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedFile\"\r\n        [value]=\"files\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <button\r\n              pButton type=\"button\"\r\n              icon=\"pi pi-plus\"\r\n              class=\"ml-auto\"\r\n              label=\"Add File\"\r\n              [disabled]=\"isLoadingFiles\"\r\n              (click)=\"openOrderFilesModal()\"\r\n            >\r\n            </button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n            <th style=\"width: 85%\">Name</th>\r\n            <th style=\"width: 10%;\" class=\"text-center\">Actions</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-file let-rowIndex=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\">{{rowIndex + 1}}</td>\r\n            <td>\r\n              <a [href]=\"link + file.file\">\r\n                {{getFileName(file.file)}}\r\n              </a>\r\n            </td>\r\n            <td class=\"text-center\">\r\n              <div class=\"d-flex justify-content-center\">\r\n                <button\r\n                  pButton\r\n                  (click)=\"onDownloadFile(file)\"\r\n                  [loading]=\"addition.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                  icon=\"pi pi-download\"\r\n                ></button>\r\n                <button\r\n                  pButton\r\n                  (click)=\"onRemoveFile(file.id)\"\r\n                  [loading]=\"deletion.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                  icon=\"pi pi-trash\"\r\n                ></button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoadingFiles\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoadingFiles\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </div>\r\n\r\n  <ng-template #infoLoading>\r\n    <div class=\"info-loading\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {OrderSupplier, OrderSupplierConfirmation} from '../../../../confirmation/models/order-supplier';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {OrderSupplierService} from '../../../../confirmation/services/order-supplier.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-order-tender-supplier',\r\n  templateUrl: './order-tender-supplier.component.html',\r\n  styleUrls: ['./order-tender-supplier.component.scss']\r\n})\r\nexport class OrderTenderSupplierComponent implements OnInit {\r\n\r\n  @Input() orderSupplierConfirmation: OrderSupplierConfirmation;\r\n\r\n  isLoadingSuppliers: boolean;\r\n\r\n  @Input() isSuppliersConfirmed: boolean;\r\n\r\n  orderSuppliers: OrderSupplier[];\r\n\r\n\r\n  @Output() selectionChange = new EventEmitter<OrderSupplier>();\r\n\r\n  selectedOrderSupplier: OrderSupplier;\r\n\r\n  orderSupplierMenuItems: MenuItem[] = [{\r\n    label: 'Selected Supplier',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditOrderSupplier()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveOrderSupplier()\r\n      }\r\n    ]\r\n  }];\r\n  @Input() orderId: number;\r\n\r\n  constructor(\r\n    private readonly orderSupplierService: OrderSupplierService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getOrderSuppliers();\r\n  }\r\n\r\n  onEditOrderSupplier() {\r\n    this.orderSupplierService.openEditSupplierModal(this.selectedOrderSupplier).subscribe(orderSupplier => {\r\n      if (orderSupplier) {\r\n        this.getOrderSuppliers();\r\n        this.selectedOrderSupplier = null;\r\n      }\r\n    });\r\n  }\r\n\r\n  getOrderSuppliers() {\r\n    this.orderSupplierService.getOrderSupplierListForOrder(this.orderId).subscribe(orderSuppliers => {\r\n      this.orderSuppliers = orderSuppliers;\r\n      this.isSuppliersConfirmed = orderSuppliers.some(c => c.confirm_status === 2);\r\n      this.isLoadingSuppliers = false;\r\n    });\r\n\r\n    this.orderSupplierService.getOrderSupplierConfirmation(this.orderId).subscribe(orderSuppliers => {\r\n      this.orderSupplierConfirmation = orderSuppliers[0];\r\n    });\r\n  }\r\n\r\n  openAddSupplier() {\r\n    this.orderSupplierService.openAddSupplierToOrderModal(this.orderSupplierConfirmation.id).subscribe(orderSupplier => {\r\n      if (orderSupplier) {\r\n        this.getOrderSuppliers();\r\n        this.selectedOrderSupplier = null;\r\n      }\r\n    });\r\n  }\r\n\r\n  onOrderSupplierConfirm() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.orderSupplierService.orderSupplierConfirm(this.orderSupplierConfirmation.id).subscribe();\r\n        this.selectedOrderSupplier = null;\r\n        this.orderSupplierConfirmation.sent_to_confirmation = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveOrderSupplier() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.orderSupplierService.deleteSupplier(this.selectedOrderSupplier.id).subscribe(() => {\r\n          this.getOrderSuppliers();\r\n          this.selectedOrderSupplier = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  getConfirmStatus(status: number) {\r\n    switch (status) {\r\n      case 0:\r\n        return 'Untached';\r\n      case 1:\r\n        return 'Declined';\r\n      case 2:\r\n        return 'Confirmed';\r\n    }\r\n  }\r\n}\r\n","<h2 class=\"mb-4\">\r\n    Suppliers\r\n    <span *ngIf=\"orderSupplierConfirmation?.sent_to_confirmation\">\r\n      (On The Confirmation)\r\n      </span>\r\n    <span *ngIf=\"!isLoadingSuppliers && !orderSupplierConfirmation?.sent_to_confirmation && isSuppliersConfirmed\">\r\n        (Confirmed)\r\n      </span>\r\n</h2>\r\n\r\n<div class=\"page__card mb-4\" >\r\n    <div class=\"page__table\">\r\n        <p-table\r\n                selectionMode=\"single\"\r\n                scrollHeight=\"calc(100vh - 18.8rem)\"\r\n                [scrollable]=\"true\"\r\n                [paginator]=\"orderSuppliers?.length > 0\"\r\n                [rows]=\"10\"\r\n                [(selection)]=\"selectedOrderSupplier\"\r\n                [value]=\"orderSuppliers\"\r\n        >\r\n            <ng-template pTemplate=\"caption\">\r\n                <div class=\"d-flex\">\r\n                    <p class=\"subtitle\" *ngIf=\"!selectedOrderSupplier\">Choose the Supplier to edit</p>\r\n                    <p-menubar\r\n                            class=\"ml-auto mr-2\"\r\n                            [model]=\"orderSupplierMenuItems\"\r\n                            [class.disabled]=\"!selectedOrderSupplier\">\r\n                    </p-menubar>\r\n                    <button\r\n                            (click)=\"openAddSupplier()\"\r\n                            [disabled]=\"isLoadingSuppliers || orderSupplierConfirmation?.sent_to_confirmation || isSuppliersConfirmed\"\r\n                            icon=\"pi pi-plus\"\r\n                            label=\"Add Supplier\"\r\n                            class=\"mr-2\"\r\n                            pButton\r\n                            type=\"button\"\r\n                    ></button>\r\n                    <button\r\n                            (click)=\"onOrderSupplierConfirm()\"\r\n                            [disabled]=\"isLoadingSuppliers || orderSupplierConfirmation?.sent_to_confirmation || isSuppliersConfirmed\"\r\n                            icon=\"pi pi-angle-double-right\"\r\n                            label=\"Send To Confirm\"\r\n                            pButton\r\n                            type=\"button\"\r\n                    ></button>\r\n                </div>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                    <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n                    <th style=\"width: 30%\" class=\"text-center\">Supplier</th>\r\n                    <th style=\"width: 10%\" class=\"text-center\">Price</th>\r\n                    <th style=\"width: 10%\" class=\"text-center\">Delivery Date</th>\r\n                    <th style=\"width: 35%\" class=\"text-center\">Comment</th>\r\n                    <th style=\"width: 10%\" class=\"text-center\">Confirm Status</th>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-item let-i=\"rowIndex\">\r\n                <tr\r\n                        [pSelectableRow]=\"(!isLoadingSuppliers && !orderSupplierConfirmation?.sent_to_confirmation && !isSuppliersConfirmed) ? item : null\">\r\n                    <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n                    <td style=\"width: 30%\" class=\"text-center\">{{item.supplier}}</td>\r\n                    <td style=\"width: 10%\" class=\"text-center\">{{item.price | moneyFormat}} </td>\r\n                    <td style=\"width: 10%\" class=\"text-center\">{{item.delivery_date | date: 'dd/MM/yyyy'}}</td>\r\n                    <td style=\"width: 35%\" class=\"text-center\">{{item.comment}}</td>\r\n                    <td style=\"width: 10%\" class=\"text-center\">{{getConfirmStatus(item.confirm_status)}}</td>\r\n                </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n                <tr>\r\n                    <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n                        <i *ngIf=\"isLoadingSuppliers\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                        <span *ngIf=\"!isLoadingSuppliers\">No Records Found</span>\r\n                    </td>\r\n                </tr>\r\n            </ng-template>\r\n        </p-table>\r\n    </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {Router} from '@angular/router';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Component({\r\n  selector: 'pek-order-statuses-chart',\r\n  templateUrl: './order-statuses-chart.component.html',\r\n  styleUrls: ['./order-statuses-chart.component.scss']\r\n})\r\nexport class OrderStatusesChartComponent implements OnInit, OnDestroy {\r\n\r\n  orders: Order[] = [];\r\n  queryParams: QuerySearch[];\r\n  constructor(\r\n    private readonly router: Router,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.queryParams = JSON.parse(localStorage.getItem('queryParamsForInWindowView'));\r\n    if (!this.queryParams) {\r\n      this.orders = JSON.parse(localStorage.getItem('orders'));\r\n\r\n      if (!this.orders || this.orders.length === 0) {\r\n        this.router.navigateByUrl('/');\r\n        return;\r\n      } else {\r\n        this.orders.forEach(o => {\r\n          o.statuses.forEach(s => {\r\n            s.estimated_date = new Date(s.estimated_date);\r\n          })\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    localStorage.removeItem('orders');\r\n  }\r\n}\r\n","<div class=\"order-statuses-chart\">\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"pt-2\"></div>\r\n      <pek-order-statuses-table\r\n        [isChart]=\"true\"\r\n        [orders]=\"orders\"\r\n        [isLoading]=\"false\"\r\n        [searchQueryParams]=\"queryParams\"\r\n      ></pek-order-statuses-table>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges, ViewChild} from '@angular/core';\r\nimport {ListProduct} from '../../../warehouse/models/list-product';\r\nimport {Order, Orders} from '../../../procurement/models/order';\r\nimport {Table} from 'primeng/table';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {BehaviorSubject, switchMap} from 'rxjs';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {deepCopy} from 'deep-copy-ts';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-order-statuses-table',\r\n  templateUrl: './order-statuses-table.component.html',\r\n  styleUrls: ['./order-statuses-table.component.scss']\r\n})\r\nexport class OrderStatusesTableComponent implements OnInit, OnChanges {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('st') st: Table;\r\n  @Output() changePage: EventEmitter<number> = new EventEmitter<number>();\r\n  @Output() selectOrder: EventEmitter<Order> = new EventEmitter<Order>();\r\n  @Input() isLoading = true;\r\n  @Input() orders: Order[] = [];\r\n  @Input() isChart: boolean = false;\r\n  @Input() isPaginatedOutside: boolean = false;\r\n  @Input() isPaginated = true;\r\n  @Input() searchQueryParams: QuerySearch[];\r\n  isShowAll = false;\r\n  dateWidth = '150px';\r\n  nomenclaturesList: Nomenclature[] = [];\r\n  rootLists: any[] = [];\r\n  dates: any = [];\r\n  first = 0;\r\n\r\n  isExpandChart = false;\r\n  selectedOrder: Order;\r\n\r\n  countOrders;\r\n  isStartOnePage;\r\n\r\n  query: QuerySearch[] = [];\r\n  searchForm: FormGroup = this.fb.group({\r\n    page: [1],\r\n  });\r\n\r\n  firstPage: number = 0;\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  constructor(\r\n    private readonly orderService: OrderService,\r\n    private readonly fb: FormBuilder,\r\n    private readonly adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (this.searchQueryParams) {\r\n\r\n    } else {\r\n      if ('orders' in changes) {\r\n        if (!this.isChart) {\r\n          this.modifyOrders();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.isChart) {\r\n      setTimeout(() => {\r\n        this.renderDates();\r\n      }, 0);\r\n    }\r\n\r\n\r\n\r\n    if (this.searchQueryParams) {\r\n      this.search$.pipe(\r\n        tap(() => this.prepareForSearch()),\r\n        switchMap(() => this.isShowAll ? this.orderService.getForPagination(this.query) : this.orderService.get(this.query)),\r\n        map(orders => {\r\n          if (!this.isShowAll) {\r\n            this.countOrders = (orders as Orders).count;\r\n          } else {\r\n            this.countOrders = (orders as Order[]).length;\r\n          }\r\n          if (this.isStartOnePage) {\r\n            this.paginator?.changePage(0);\r\n          }\r\n\r\n          this.isStartOnePage = false;\r\n          return this.orderService.modifyOrders(this.isShowAll ? (orders as Order[]) : (orders as Orders).results);\r\n        }),\r\n        tap(orders => this.orders = orders),\r\n        tap(() => this.generateNomenclaturesListAndRootLists()),\r\n        tap(() => this.collectOrderedProductsTechnologies()),\r\n        tap(() => {\r\n          this.isLoading = false;\r\n          this.renderDates();\r\n        }),\r\n        untilDestroyed(this)\r\n      ).subscribe();\r\n\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  generateNomenclaturesListAndRootLists() {\r\n    this.orders.forEach(order => {\r\n      if (order.activeStatusDate) {\r\n        order.activeStatusDate = new Date(order.activeStatusDate);\r\n      }\r\n\r\n      order.order_products.forEach(orderProduct => {\r\n        if (!this.nomenclaturesList.includes(orderProduct.nomenclature)) {\r\n          this.nomenclaturesList.push(orderProduct.nomenclature);\r\n        }\r\n      });\r\n\r\n      order.root_production_list_products.forEach(root => this.rootLists.push(root));\r\n\r\n      this.rootLists = this.rootLists.map(root => {\r\n        return {\r\n          ...root,\r\n          fullName: `(${root.id}) ${root.nomenclature.code}~${root.nomenclature.name}`\r\n        };\r\n      });\r\n    });\r\n\r\n    this.nomenclaturesList = this.adapterService.removeDuplicates(this.nomenclaturesList, x => x.id);\r\n    this.rootLists = this.adapterService.removeDuplicates(this.rootLists, x => x.id);\r\n\r\n    this.nomenclaturesList.sort((a, b) => {\r\n      if (a.name < b.name) return -1;\r\n      if (a.name > b.name) return 1;\r\n      return 0;\r\n    });\r\n\r\n    this.rootLists.sort((a, b) => {\r\n      if (a.fullName < b.fullName) return -1;\r\n      if (a.fullName > b.fullName) return 1;\r\n      return 0;\r\n    });\r\n  }\r\n\r\n  collectOrderedProductsTechnologies() {\r\n    this.orders.forEach(order => {\r\n      order.ordered_products_unique_technologies = [];\r\n      order.order_products?.forEach(product => {\r\n        const needToAdd = order.ordered_products_unique_technologies.findIndex(tech => tech.id === product?.current_technology.id) < 0;\r\n        if (needToAdd) {\r\n          order.ordered_products_unique_technologies.push(product?.current_technology);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  modifyOrders() {\r\n    // this.isShowAll = this.orders.length > 0;\r\n    this.orders.forEach(order => {\r\n      order.statuses.forEach((stat, index) => {\r\n        stat.estimated_date = new Date(stat.estimated_date);\r\n        if (order.dates.indexOf(stat.estimated_date) === -1) {\r\n          this.dates.push(stat.estimated_date);\r\n        }\r\n\r\n        if (stat.is_active === false) {\r\n          order.statuses.splice(index, 1);\r\n        }\r\n      });\r\n\r\n      if (order.statuses.length > 0) {\r\n        let start = order.statuses[0].estimated_date;\r\n\r\n        let end = order.statuses[order.statuses.length - 1].estimated_date;\r\n        let ins = start;\r\n        order.dates.push(ins);\r\n        while (ins < end) {\r\n          ins = this.addDays(ins, 1);\r\n          order.dates.push(ins);\r\n        }\r\n      }\r\n    });\r\n\r\n    this.renderDates();\r\n  }\r\n\r\n  renderDates(evt?) {\r\n    const page = evt?.first;\r\n\r\n    if (page >= 0) {\r\n      this.changePage.next(page);\r\n    }\r\n\r\n    this.dates = [];\r\n\r\n    let start = 0;\r\n    let end = 9;\r\n    if (evt) {\r\n      this.first = evt.first;\r\n      if (evt.first !== 0) {\r\n        start = evt.first - 1;\r\n        end = evt.first + 10 - 1;\r\n      }\r\n    }\r\n\r\n    if (this.st) {\r\n      if (this.st.filteredValue) {\r\n        this.st.filteredValue.forEach((order, idx) => {\r\n          if (idx >= start && idx <= end) {\r\n            order.statuses.forEach(status => {\r\n              status.estimated_date = new Date(status.estimated_date);\r\n              this.dates.push(new Date(status.estimated_date));\r\n            });\r\n          }\r\n        });\r\n      } else {\r\n        this.orders.forEach((order, idx) => {\r\n          if (idx >= start && idx <= end) {\r\n            order.statuses.forEach(status => {\r\n              status.estimated_date = new Date(status.estimated_date);\r\n              this.dates.push(new Date(status.estimated_date));\r\n            });\r\n          }\r\n        });\r\n      }\r\n    }\r\n\r\n    this.dates.sort((a, b) => a.getTime() - b.getTime());\r\n    const endDate = this.dates[this.dates.length - 1];\r\n    let ins = this.dates[0];\r\n\r\n    const allDates = [];\r\n    allDates.push(ins);\r\n\r\n    while (ins < endDate) {\r\n      ins = this.addDays(ins, 1);\r\n      allDates.push(ins);\r\n    }\r\n\r\n    this.dates = allDates;\r\n    let count = 0;\r\n    this.orders.forEach(o => {\r\n      o.statuses.forEach(s => {\r\n        count++;\r\n      });\r\n    });\r\n\r\n    console.log(this.orders);\r\n  }\r\n\r\n  addDays(date: string, days: number) {\r\n    const result = new Date(date);\r\n    result.setDate(result.getDate() + days);\r\n    return result;\r\n  }\r\n\r\n  getRootListsFilled(rootLists: ListProduct[]): { list: ListProduct, count?: number }[] {\r\n    const lists: { list: ListProduct, count?: number }[] = [];\r\n    rootLists.forEach((res: ListProduct) => {\r\n      const found = lists.find(el => el.list.nomenclature.name === res.nomenclature.name);\r\n      if (found) {\r\n        found.count++;\r\n      } else {\r\n        lists.push({list: res, count: 1});\r\n      }\r\n    });\r\n    return lists;\r\n  }\r\n\r\n  onSelectOrder() {\r\n    this.selectOrder.emit(this.selectedOrder);\r\n  }\r\n\r\n  showAllDates() {\r\n    this.dates = [];\r\n\r\n    if (this.st.filteredValue) {\r\n      this.st.filteredValue.forEach((order, idx) => {\r\n        order.statuses.forEach(status => {\r\n          this.dates.push(new Date(status.estimated_date));\r\n        });\r\n      });\r\n    } else {\r\n      this.orders.forEach((order, idx) => {\r\n        order.statuses.forEach(status => {\r\n          this.dates.push(new Date(status.estimated_date));\r\n        });\r\n      });\r\n    }\r\n\r\n    this.dates.sort((a, b) => a.getTime() - b.getTime());\r\n    const endDate = this.dates[this.dates.length - 1];\r\n    const startDate = this.dates[0];\r\n    let ins = startDate;\r\n    const allDates = [];\r\n    allDates.push(ins);\r\n    while (ins < endDate) {\r\n      ins = this.addDays(ins, 1);\r\n      allDates.push(ins);\r\n    }\r\n    this.dates = allDates;\r\n  }\r\n\r\n  onOpenChartInWindow() {\r\n    if (!this.isPaginatedOutside) {\r\n      localStorage.removeItem('queryParamsForInWindowView');\r\n    }\r\n    const orders = JSON.parse(JSON.stringify(this.orders));\r\n    console.log(orders);\r\n    this.orderService.openOrderStatusesChartWindow(orders);\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isPaginated = value;\r\n    if (!value) {\r\n      this.showAllDates();\r\n    } else {\r\n      this.renderDates({first: this.first});\r\n    }\r\n  }\r\n\r\n  private prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedOrder = null;\r\n    this.orders = [];\r\n    this.query = [];\r\n    this.query = deepCopy(this.searchQueryParams);\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push(\r\n        {name: 'paginated', value: true},\r\n        {name: 'page', value: this.searchForm.get('page').value},\r\n      );\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n    }\r\n    this.firstPage = 0;\r\n    this.renderDates({first: 0});\r\n    this.orders = this.orders.map(o => o);\r\n  }\r\n\r\n  onPage(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onShowPartialOnSelfPaginate() {\r\n    this.isShowAll = false;\r\n    this.search$.next();\r\n  }\r\n\r\n  onShowAllSelfPaginate() {\r\n    this.isShowAll = true;\r\n    this.search$.next();\r\n  }\r\n}\r\n","<div class=\"order-statuses-table\">\r\n  <div class=\"order-statuses-table__buttons\">\r\n    <p class=\"mr-2\">Chart Scale:</p>\r\n    <button\r\n      pButton\r\n      class=\"mr-2\"\r\n      label=\"100%\"\r\n      [disabled]=\"dateWidth === '150px'\"\r\n      (click)=\"dateWidth = '150px'\"\r\n    >\r\n    </button>\r\n    <button\r\n      class=\"mr-2\"\r\n      pButton\r\n      label=\"75%\"\r\n      [disabled]=\"dateWidth === '95px'\"\r\n      (click)=\"dateWidth = '95px'\"\r\n    >\r\n    </button>\r\n    <button\r\n      pButton\r\n      label=\"50%\"\r\n      [disabled]=\"dateWidth === '60px'\"\r\n      (click)=\"dateWidth = '60px'\"\r\n      class=\"mr-3\"\r\n    >\r\n    </button>\r\n\r\n    <p class=\"actions-text mr-2\">Actions:</p>\r\n\r\n    <button\r\n      [label]=\"(!isExpandChart ? 'Expand' : 'Collapse') + ' Chart'\"\r\n      pButton\r\n      class=\"mr-2\"\r\n      (click)=\"isExpandChart = !isExpandChart\"\r\n    ></button>\r\n\r\n    <button\r\n      *ngIf=\"!isChart\"\r\n      label=\"Open in new Window\"\r\n      pButton\r\n      [disabled]=\"isLoading\"\r\n      (click)=\"onOpenChartInWindow()\"\r\n    ></button>\r\n  </div>\r\n  <ng-template [ngIf]=\"!searchQueryParams\">\r\n    <p-table\r\n      #st\r\n      [value]=\"orders\"\r\n      selectionMode=\"single\"\r\n      rowGroupMode=\"rowspan\"\r\n      [scrollable]=\"true\"\r\n      scrollHeight=\"calc(100vh - 32.25rem)\"\r\n      [paginator]=\"!isPaginatedOutside && isPaginated\"\r\n      [(selection)]=\"selectedOrder\"\r\n      (onPage)=\"renderDates($event)\"\r\n      [rows]=\"10\"\r\n      [totalRecords]=\"countOrders ? countOrders : null\"\r\n      [(first)]=\"first\"\r\n      (selectionChange)=\"onSelectOrder()\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th\r\n            style=\"min-width: 50px\"\r\n            class=\"index-header text-center t-col-1\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n          >\r\n            #\r\n          </th>\r\n          <th\r\n            [class.row-hide]=\"isExpandChart\"\r\n            style=\"min-width: 150px\"\r\n            class=\"text-center t-col-2\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n          >\r\n            Date\r\n          </th>\r\n          <th\r\n            style=\"min-width: 150px\"\r\n            class=\"text-center t-col-3\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n            [class.t-col-3_exp]=\"isExpandChart\"\r\n            [class.th-status]=\"!isLoading && isExpandChart\"\r\n          >\r\n            <div [class.header-id]=\"!isLoading && isExpandChart\">Order ID</div>\r\n          </th>\r\n          <th\r\n            [class.row-hide]=\"isExpandChart\"\r\n            style=\"min-width: 150px\"\r\n            class=\"t-col-4\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n          >\r\n            Supplier\r\n          </th>\r\n          <th\r\n            [class.row-hide]=\"isExpandChart\"\r\n            style=\"min-width: 150px\"\r\n            class=\"t-col-5\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n          >\r\n            Root Lists\r\n          </th>\r\n          <th\r\n            [class.row-hide]=\"isExpandChart\"\r\n            style=\"min-width: 150px\"\r\n            class=\"text-center th-status t-col-6\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n          >\r\n            <div [class.header-status]=\"!isLoading\">Status</div>\r\n          </th>\r\n\r\n          <th\r\n            [class.date-title]=\"dateWidth === '60px'\"\r\n            class=\"text-center\" *ngFor=\"let date of dates\"\r\n            [style.minWidth]=\"dateWidth\"\r\n            [style.maxWidth]=\"dateWidth\"\r\n          >\r\n            {{date | date: 'dd/MM/yyyy'}}\r\n          </th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n        <tr\r\n          class=\"order-table-tr\"\r\n          [pSelectableRow]=\"order\"\r\n        >\r\n          <td\r\n            style=\"min-width: 50px\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n            class=\"text-center t-col-1\"\r\n\r\n          >\r\n            {{i + 1}}\r\n          </td>\r\n          <td\r\n            [class.row-hide]=\"isExpandChart\"\r\n            style=\"min-width: 150px\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n            class=\"text-center t-col-2\"\r\n          >\r\n            {{order.created|date:'dd/MM/yyyy'}}\r\n          </td>\r\n          <td\r\n            style=\"min-width: 150px\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n            class=\"text-center t-col-3\"\r\n            [class.td-status]=\"isExpandChart\"\r\n            [class.t-col-3_exp]=\"isExpandChart\"\r\n          >\r\n            <div class=\"status-expand\">\r\n              {{order.id}}\r\n            </div>\r\n          </td>\r\n          <td\r\n            [class.row-hide]=\"isExpandChart\"\r\n            style=\"min-width: 150px\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n            class=\"t-col-4\"\r\n          >\r\n            <div class=\"hide-text\" pTooltip=\"{{order.supplier?.name}}\">\r\n              {{order.supplier?.name}}</div>\r\n          </td>\r\n          <td\r\n            [class.row-hide]=\"isExpandChart\"\r\n            style=\"min-width: 150px\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            class=\"t-col-5\"\r\n            [frozen]=\"true\"\r\n          >\r\n            <div class=\"root-count-wrapper\">\r\n              <div class=\"fixed-row-container\" pTooltip=\"{{order.root_search_lists}}\">\r\n                <div class=\"hide-text\">\r\n                  <ng-container\r\n                    *ngFor=\"let list of getRootListsFilled(order.root_production_list_products); let idx = index\">\r\n                    {{list.list.nomenclature.name}} ({{list.count}})\r\n                  </ng-container>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </td>\r\n          <td\r\n            [class.row-hide]=\"isExpandChart\"\r\n            class=\"td-status t-col-6\"\r\n            style=\"min-width: 150px\"\r\n            pFrozenColumn\r\n            alignFrozen=\"left\"\r\n            [frozen]=\"true\"\r\n          >\r\n            <ng-container *ngIf=\"order.statuses.length === 0\">\r\n              <div class=\"hide-text text-center status\">New</div>\r\n            </ng-container>\r\n\r\n            <ng-container *ngIf=\"order.statuses.length > 0\">\r\n              <div\r\n                class=\"hide-text text-center status\"\r\n                *ngFor=\"let event of order.statuses,let i = index;\"\r\n                [ngClass]=\"{'text-success': event.is_active}\" pTooltip=\"{{event.status.value}}\"\r\n              >\r\n                {{event.status.value}}\r\n              </div>\r\n            </ng-container>\r\n          </td>\r\n\r\n          <td\r\n            *ngFor=\"let ev of dates\" class=\"td-status\"\r\n            [style.minWidth]=\"dateWidth\"\r\n            [style.maxWidth]=\"dateWidth\"\r\n          >\r\n            <div\r\n              class=\"status-row\"\r\n              *ngFor=\"let event of order.statuses; let i = index;\"\r\n              [ngClass]=\"{\r\n                  'background': (event.estimated_date >= ev && ev > order.statuses[i - 1]?.estimated_date && order.statuses[0].estimated_date < ev) || event?.estimated_date?.getTime() === ev?.getTime()\r\n                }\"\r\n              pTooltip=\"{{event.status.value}} : {{ev | date:'dd/MM/yyyy'}}\" tooltipPosition=\"left\"\r\n            >\r\n            </div>\r\n          </td>\r\n        </tr>\r\n\r\n      </ng-template>\r\n\r\n      <ng-template pTemplate=\"paginatorright\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"onShowAll(false)\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </ng-template>\r\n\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n    <div *ngIf=\"!st.paginator && !isLoading && !isPaginatedOutside && !isPaginated\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(true)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </ng-template>\r\n  <ng-template [ngIf]=\"searchQueryParams\">\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #st\r\n        [value]=\"orders\"\r\n        selectionMode=\"single\"\r\n        rowGroupMode=\"rowspan\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 34rem)\"\r\n        [paginator]=\"false\"\r\n        [(selection)]=\"selectedOrder\"\r\n        [rows]=\"10\"\r\n        [totalRecords]=\"countOrders\"\r\n        [(first)]=\"firstPage\"\r\n        (selectionChange)=\"onSelectOrder()\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th\r\n              style=\"min-width: 50px\"\r\n              class=\"index-header text-center t-col-1\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n            >\r\n              #\r\n            </th>\r\n            <th\r\n              [class.row-hide]=\"isExpandChart\"\r\n              style=\"min-width: 150px\"\r\n              class=\"text-center t-col-2\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n            >\r\n              Date\r\n            </th>\r\n            <th\r\n              style=\"min-width: 150px\"\r\n              class=\"text-center t-col-3\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n              [class.t-col-3_exp]=\"isExpandChart\"\r\n              [class.th-status]=\"!isLoading && isExpandChart\"\r\n            >\r\n              <div [class.header-id]=\"!isLoading && isExpandChart\">Order ID</div>\r\n            </th>\r\n            <th\r\n              [class.row-hide]=\"isExpandChart\"\r\n              style=\"min-width: 150px\"\r\n              class=\"t-col-4\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n            >\r\n              Supplier\r\n            </th>\r\n            <th\r\n              [class.row-hide]=\"isExpandChart\"\r\n              style=\"min-width: 150px\"\r\n              class=\"t-col-5\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n            >\r\n              Root Lists\r\n            </th>\r\n            <th\r\n              [class.row-hide]=\"isExpandChart\"\r\n              style=\"min-width: 150px\"\r\n              class=\"text-center th-status t-col-6\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n            >\r\n              <div [class.header-status]=\"!isLoading\">Status</div>\r\n            </th>\r\n\r\n            <th\r\n              [class.date-title]=\"dateWidth === '60px'\"\r\n              class=\"text-center\" *ngFor=\"let date of dates\"\r\n              [style.minWidth]=\"dateWidth\"\r\n              [style.maxWidth]=\"dateWidth\"\r\n            >\r\n              {{date | date: 'dd/MM/yyyy'}}\r\n            </th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n          <tr\r\n            class=\"order-table-tr\"\r\n            [pSelectableRow]=\"order\"\r\n          >\r\n            <td\r\n              style=\"min-width: 50px\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n              class=\"text-center t-col-1\"\r\n\r\n            >\r\n              {{i + 1}}\r\n            </td>\r\n            <td\r\n              [class.row-hide]=\"isExpandChart\"\r\n              style=\"min-width: 150px\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n              class=\"text-center t-col-2\"\r\n            >\r\n              {{order.created|date:'dd/MM/yyyy'}}\r\n            </td>\r\n            <td\r\n              style=\"min-width: 150px\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n              class=\"text-center t-col-3\"\r\n              [class.td-status]=\"isExpandChart\"\r\n              [class.t-col-3_exp]=\"isExpandChart\"\r\n            >\r\n              <div class=\"status-expand\">\r\n                {{order.id}}\r\n              </div>\r\n            </td>\r\n            <td\r\n              [class.row-hide]=\"isExpandChart\"\r\n              style=\"min-width: 150px\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n              class=\"t-col-4\"\r\n            >\r\n              <div class=\"hide-text\" pTooltip=\"{{order.supplier?.name}}\">\r\n                {{order.supplier?.name}}</div>\r\n            </td>\r\n            <td\r\n              [class.row-hide]=\"isExpandChart\"\r\n              style=\"min-width: 150px\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              class=\"t-col-5\"\r\n              [frozen]=\"true\"\r\n            >\r\n              <div class=\"root-count-wrapper\">\r\n                <div class=\"fixed-row-container\" pTooltip=\"{{order.root_search_lists}}\">\r\n                  <div class=\"hide-text\">\r\n                    <ng-container\r\n                      *ngFor=\"let list of getRootListsFilled(order.root_production_list_products); let idx = index\">\r\n                      {{list.list.nomenclature.name}} ({{list.count}})\r\n                    </ng-container>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td\r\n              [class.row-hide]=\"isExpandChart\"\r\n              class=\"td-status t-col-6\"\r\n              style=\"min-width: 150px\"\r\n              pFrozenColumn\r\n              alignFrozen=\"left\"\r\n              [frozen]=\"true\"\r\n            >\r\n              <ng-container *ngIf=\"order.statuses.length === 0\">\r\n                <div class=\"hide-text text-center status\">New</div>\r\n              </ng-container>\r\n\r\n              <ng-container *ngIf=\"order.statuses.length > 0\">\r\n                <div\r\n                  class=\"hide-text text-center status\"\r\n                  *ngFor=\"let event of order.statuses,let i = index;\"\r\n                  [ngClass]=\"{'text-success': event.is_active}\" pTooltip=\"{{event.status.value}}\"\r\n                >\r\n                  {{event.status.value}}\r\n                </div>\r\n              </ng-container>\r\n            </td>\r\n\r\n            <td\r\n              *ngFor=\"let ev of dates\" class=\"td-status\"\r\n              [style.minWidth]=\"dateWidth\"\r\n              [style.maxWidth]=\"dateWidth\"\r\n            >\r\n              <div\r\n                class=\"status-row\"\r\n                *ngFor=\"let event of order.statuses; let i = index;\"\r\n                [ngClass]=\"{\r\n                  'background': (event.estimated_date >= ev && ev > order.statuses[i - 1]?.estimated_date && order.statuses[0].estimated_date < ev) || event?.estimated_date?.getTime() === ev?.getTime()\r\n                }\"\r\n                pTooltip=\"{{event.status.value}} : {{ev | date:'dd/MM/yyyy'}}\" tooltipPosition=\"left\"\r\n              >\r\n              </div>\r\n            </td>\r\n          </tr>\r\n\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"onShowAll(false)\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            All\r\n          </p-button>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"paginator-wrapper\"\r\n      *ngIf=\"!isShowAll\"\r\n      [class.paginator-wrapper_hide]=\"orders.length === 0\"\r\n    >\r\n      <p-paginator\r\n        #paginator\r\n        [rows]=\"10\"\r\n        [totalRecords]=\"countOrders\"\r\n        (onPageChange)=\"onPage($event)\"\r\n      >\r\n      </p-paginator>\r\n      <p-button\r\n        (click)=\"onShowAllSelfPaginate()\"\r\n        class=\"paginator-all\"\r\n        type=\"button\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        All\r\n      </p-button>\r\n    </div>\r\n\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowPartialOnSelfPaginate()\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {Status} from '../../../procurement/models/status';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {StatusService} from '../../../procurement/services/status.service';\r\nimport {CdkDragDrop, moveItemInArray, transferArrayItem} from '@angular/cdk/drag-drop';\r\nimport {MenuItem} from 'primeng/api';\r\n\r\n@Component({\r\n  selector: 'pek-order-statuses',\r\n  templateUrl: './order-statuses.component.html',\r\n  styleUrls: ['./order-statuses.component.scss']\r\n})\r\nexport class OrderStatusesComponent implements OnInit {\r\n  @Input() isAutoStatus = false;\r\n  @Input() statusType: number;\r\n\r\n  isLoading = true;\r\n  statuses: Status[] = [];\r\n  selectedStatus: Status;\r\n\r\n  constructor(\r\n    private activatedRouter: ActivatedRoute,\r\n    private modalService: ModalService,\r\n    private statusesService: StatusService,\r\n  ) {\r\n  }\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Status',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.edit()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.delete()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  ngOnInit(): void {\r\n    this.getStatuses();\r\n  }\r\n\r\n  getStatuses() {\r\n    this.statusesService.get([\r\n      {name: 'is_auto_status', value: this.isAutoStatus},\r\n      {name: 'accounting_type', value: this.statusType}\r\n    ]).subscribe(statuses => {\r\n      this.statuses = statuses;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  create() {\r\n    this.statusesService.createEditStatusModal('create', this.statusType, this.isAutoStatus).subscribe(status => {\r\n      if (status) {\r\n        this.statuses.push(status);\r\n      }\r\n    });\r\n  }\r\n\r\n  edit() {\r\n    this.statusesService.createEditStatusModal('edit', this.statusType, this.isAutoStatus, this.selectedStatus).subscribe(status => {\r\n      if (status) {\r\n        const index = this.statuses.findIndex(s => s.id === status.id);\r\n        this.statuses[index] = status;\r\n        this.selectedStatus = this.statuses.find(s => s.id === status.id);\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  delete() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.statusesService.delete(this.selectedStatus.id).subscribe(() => {\r\n          const index = this.statuses.findIndex(s => s.id === this.selectedStatus.id);\r\n          this.statuses.splice(index, 1);\r\n          this.selectedStatus = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  drop(event: CdkDragDrop<any[]>) {\r\n    if (event.previousContainer === event.container) {\r\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\r\n    } else {\r\n      transferArrayItem(event.previousContainer.data,\r\n        event.container.data,\r\n        event.previousIndex,\r\n        event.currentIndex);\r\n    }\r\n\r\n    if (event.previousIndex !== event.currentIndex) {\r\n      const currentStatus = this.statuses[event.currentIndex];\r\n\r\n      if (event.currentIndex + 1 === this.statuses.length) {\r\n        currentStatus.sort_value = this.statuses[event.currentIndex - 1].sort_value + 1;\r\n      } else {\r\n        currentStatus.sort_value = this.statuses[event.currentIndex + 1].sort_value;\r\n      }\r\n\r\n      const toUpdate = {\r\n        id: currentStatus.id,\r\n        sort_value: currentStatus.sort_value,\r\n        value: currentStatus.value\r\n      };\r\n      // this.statusesService.update(toUpdate).subscribe(() => this.getStatuses());\r\n    }\r\n  }\r\n\r\n  setFinishStep(status: Status) {\r\n    const send = {\r\n      id: status.id,\r\n      value: status.value,\r\n      is_final: status.is_final,\r\n    };\r\n    this.updateStatus(send);\r\n  }\r\n\r\n  updateStatus(data: any): void {\r\n    this.statusesService.update(data).subscribe();\r\n  }\r\n\r\n  setActiveStatus(status: Status) {\r\n    const send = {\r\n      id: status.id,\r\n      value: status.value,\r\n      is_active: status.is_active,\r\n    };\r\n\r\n    this.updateStatus(send);\r\n  }\r\n\r\n  toggleLine(status) {\r\n    if (this.selectedStatus === status) {\r\n      this.selectedStatus = null;\r\n    } else {\r\n      this.selectedStatus = status;\r\n    }\r\n  }\r\n}\r\n","<div class=\"order-statuses\">\r\n  <div class=\"order-statuses-caption\">\r\n    <p class=\"subtitle\" *ngIf=\"!selectedStatus\">Choose the Status to edit</p>\r\n    <ng-container [ngSwitch]=\"isAutoStatus\">\r\n      <ng-container *ngSwitchCase=\"false\">\r\n        <p-menubar\r\n          [class.disabled]=\"!selectedStatus\"\r\n          class=\"ml-auto mr-2\"\r\n          [model]=\"menuItems\"\r\n        ></p-menubar>\r\n        <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Status\" (click)=\"create()\"></button>\r\n      </ng-container>\r\n      <ng-container *ngSwitchCase=\"true\">\r\n        <button\r\n          class=\"ml-auto\"\r\n          [disabled]=\"!selectedStatus\"\r\n          (click)=\"edit()\"\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-pencil\"\r\n          label=\"Edit Status\"\r\n        ></button>\r\n      </ng-container>\r\n    </ng-container>\r\n  </div>\r\n  <div class=\"order-statuses-header\">\r\n    <div class=\"table-col-header text-center\" style=\"width: 5%;\">#</div>\r\n    <div class=\"table-col-header\" [style.width.%]=\"35\">Name</div>\r\n    <div class=\"table-col-header\" style=\"width: 30%;\">\r\n      Description\r\n    </div>\r\n    <div class=\"table-col-header text-center\" [style.width.%]=\"isAutoStatus? 15 : 30\">Chain Finish Step</div>\r\n    <div class=\"table-col-header text-center\" *ngIf=\"isAutoStatus\" style=\"width: 15%\">Is Active</div>\r\n  </div>\r\n  <div class=\"order-statuses-body\" *ngIf=\"!isLoading; else spinner\">\r\n    <div\r\n      class=\"order-statuses-list order-statuses_dragging\"\r\n      cdkDropList\r\n      [cdkDropListData]=\"statuses\"\r\n      (cdkDropListDropped)=\"drop($event)\"\r\n    >\r\n      <ng-container *ngIf=\"!isLoading && statuses.length > 0; else empty\">\r\n        <div\r\n          class=\"order-statuses-line order-statuses-line_dragging\"\r\n          *ngFor=\"let status of statuses; let idx = index\"\r\n          cdkDrag\r\n          cdkDragBoundary=\".workloads_dragging\"\r\n          [class.active]=\"selectedStatus && selectedStatus.id === status.id\"\r\n          (click)=\"toggleLine(status)\"\r\n        >\r\n          <div class=\"example-custom-placeholder\" *cdkDragPlaceholder></div>\r\n          <div class=\"order-statuses-item\">\r\n            <div class=\"table-col text-center\" style=\"width: 5%;\">{{idx + 1}}</div>\r\n            <div class=\" table-col\" [style.width.%]=\"35\">\r\n              {{status.value}}\r\n            </div>\r\n            <div class=\" table-col\" style=\"width: 30%;\">\r\n              {{ status.description }}\r\n            </div>\r\n            <div class=\" table-col text-center\" [style.width.%]=\"isAutoStatus? 15 : 30\">\r\n              <p-checkbox\r\n                [(ngModel)]=\"status.is_final\"\r\n                [binary]=\"true\"\r\n                (onChange)=\"setFinishStep(status)\"\r\n              ></p-checkbox>\r\n            </div>\r\n            <div class=\" table-col text-center\" *ngIf=\"isAutoStatus\" style=\"width: 15%;\">\r\n              <p-checkbox\r\n                [(ngModel)]=\"status.is_active\"\r\n                [binary]=\"true\"\r\n                (onChange)=\"setActiveStatus(status)\"\r\n              ></p-checkbox>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #empty>\r\n  <div class=\"empty p-4\">\r\n    No Records Found\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"order-statuses-spinner p-4\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {BusinessTripService} from '../../../business-trips/services/business-trip.service';\r\n\r\n@Component({\r\n  selector: 'pek-upload-file-picker',\r\n  templateUrl: './upload-file-picker.component.html',\r\n  styleUrls: ['./upload-file-picker.component.scss']\r\n})\r\nexport class UploadFilePickerComponent implements OnInit {\r\n  @Input() files: File[] = [];\r\n  @Input() showLabel = true;\r\n  uploadedFiles: any[] = [];\r\n  @Output() fileChanged: EventEmitter<File[]> = new EventEmitter<File[]>();\r\n  constructor(\r\n    private businessService: BusinessTripService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  filesSelected(files: any) {\r\n    this.files = files.currentFiles;\r\n    this.fileChanged.emit(this.files);\r\n  }\r\n\r\n  removeFile(file: any) {\r\n  }\r\n\r\n  clearFiles() {\r\n    this.files = [];\r\n    this.fileChanged.emit(this.files);\r\n  }\r\n\r\n  onBasicUpload($event: any) {\r\n\r\n  }\r\n\r\n  takePhoto() {\r\n    this.businessService.takePhotoModal().subscribe(file => {\r\n      if (file) {\r\n        this.addPhotoToList(file);\r\n      }\r\n    });\r\n  }\r\n\r\n  addPhotoToList(file: File) {\r\n    let tempFiles = [...this.files, file];\r\n    this.files = null;\r\n    this.files = [...tempFiles];\r\n    tempFiles = null;\r\n    this.fileChanged.emit(this.files);\r\n  }\r\n}\r\n","<label *ngIf=\"showLabel\"> Files </label>\r\n<p-fileUpload\r\n  (onRemove)=\"removeFile($event)\"\r\n  (onClear)=\"clearFiles()\"\r\n  [files]=\"files\"\r\n  (onSelect)=\"filesSelected($event)\"\r\n  name=\"file[]\"\r\n  [customUpload]=\"true\"\r\n  [multiple]=\"true\"\r\n  (onUpload)=\"onBasicUpload($event)\"\r\n  [showUploadButton]=\"false\"\r\n>\r\n  <ng-template pTemplate=\"toolbar\">\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      icon=\"pi pi-camera\"\r\n      class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small ml-1 mb-2\"\r\n      (click)=\"takePhoto()\"\r\n    ></button>\r\n  </ng-template>\r\n</p-fileUpload>\r\n","import {Component, ElementRef, EventEmitter, Input, OnInit, Output, ViewChild} from '@angular/core';\r\n\r\ntype FileFormat = 'excel' | 'image' | 'all';\r\n\r\n@Component({\r\n  selector: 'pek-upload-file',\r\n  templateUrl: './upload-file.component.html',\r\n  styleUrls: ['./upload-file.component.scss']\r\n})\r\nexport class UploadFileComponent implements OnInit {\r\n  @Output() selectFile: EventEmitter<File[]> = new EventEmitter<File[]>();\r\n  @Output() removeFile: EventEmitter<void> = new EventEmitter<void>();\r\n  @Input() fileFormat: FileFormat = 'all';\r\n  @Input() multiple: boolean = false;\r\n  @ViewChild('addFileInput') addFileInput: ElementRef;\r\n\r\n  @Input() uploadFiles: File[] = [];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onDragOver(event: DragEvent) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  onDrop(event: DragEvent) {\r\n    event.preventDefault();\r\n    const files: File[] = Array.from(event.dataTransfer.files);\r\n    this.onSelectFile(files);\r\n  }\r\n\r\n  onChangeFile(files: FileList) {\r\n    const filesArr = Array.from(files);\r\n    this.onSelectFile(filesArr);\r\n  }\r\n\r\n  onSelectFile(files: File[]) {\r\n    if (this.multiple) {\r\n      this.uploadFiles = [...this.uploadFiles, ...files];\r\n    } else {\r\n      this.uploadFiles = [...files];\r\n    }\r\n\r\n    this.selectFile.emit(this.uploadFiles);\r\n    this.addFileInput.nativeElement.value = '';\r\n  }\r\n\r\n  onRemoveFile(idx: number) {\r\n    this.uploadFiles.splice(idx, 1);\r\n\r\n    if (this.multiple) {\r\n      this.selectFile.emit(this.uploadFiles);\r\n    } else {\r\n      this.removeFile.emit();\r\n    }\r\n  }\r\n\r\n  getFileSize(size: number) {\r\n    return Math.round(size / 1000);\r\n  }\r\n\r\n  getAcceptFileFormat() {\r\n    switch (this.fileFormat) {\r\n      case 'excel':\r\n        return '.xls, .xlsx';\r\n      default:\r\n        return '';\r\n    }\r\n  }\r\n}\r\n","<div\r\n  class=\"upload-file\"\r\n  [class.upload-file_upload-one]=\"uploadFiles.length > 0 && !multiple\"\r\n  [class.upload-file_upload-many]=\"uploadFiles.length > 0 && multiple\"\r\n>\r\n\r\n  <ng-container [ngSwitch]=\"multiple\">\r\n\r\n    <!--  Single Select-->\r\n    <label\r\n      *ngSwitchCase=\"false\"\r\n      class=\"upload-file__input\"\r\n      (dragover)=\"onDragOver($event)\"\r\n      (drop)=\"onDrop($event)\"\r\n    >\r\n      <div\r\n        *ngIf=\"uploadFiles.length === 0\"\r\n        class=\"upload-file__placeholder\"\r\n      >\r\n        <span>Select file</span>\r\n        <ng-container *ngIf=\"fileFormat !== 'all'\">\r\n          in <span>{{fileFormat}}</span> format\r\n        </ng-container>\r\n        or drag and drop it here\r\n      </div>\r\n      <input\r\n        #addFileInput\r\n        *ngIf=\"uploadFiles.length === 0\"\r\n        hidden\r\n        type=\"file\"\r\n        (change)=\"onChangeFile(addFileInput.files)\"\r\n        [accept]=\"getAcceptFileFormat()\"\r\n        [multiple]=\"false\"\r\n        [disabled]=\"uploadFiles.length > 0\"\r\n      >\r\n\r\n      <div\r\n        *ngIf=\"uploadFiles.length > 0\"\r\n        class=\"upload-file__upload-files\"\r\n      >\r\n        <div class=\"upload-file__upload-files-inner\">\r\n          <i class=\"pi pi-check-circle\"></i>\r\n          <p>{{uploadFiles[0].name}}</p>\r\n          <span>{{getFileSize(uploadFiles[0].size)}} </span>\r\n        </div>\r\n      </div>\r\n    </label>\r\n    <div class=\"upload-file__remove\" (click)=\"onRemoveFile(0)\" *ngIf=\"uploadFiles.length > 0 && !multiple\">\r\n      <i class=\"pi pi-times\"></i>\r\n    </div>\r\n\r\n    <!--  Multiple select-->\r\n    <label\r\n      *ngSwitchCase=\"true\"\r\n      class=\"upload-file__input\"\r\n      (dragover)=\"onDragOver($event)\"\r\n      (drop)=\"onDrop($event)\"\r\n    >\r\n      <div\r\n        class=\"upload-file__placeholder\"\r\n      >\r\n        <span>Select files</span>\r\n        <ng-container *ngIf=\"fileFormat !== 'all'\">\r\n          in <span>{{fileFormat}}</span> format\r\n        </ng-container>\r\n        or drag and drop it here\r\n      </div>\r\n      <input\r\n        #addFileInput\r\n        hidden\r\n        type=\"file\"\r\n        (change)=\"onChangeFile(addFileInput.files)\"\r\n        [accept]=\"getAcceptFileFormat()\"\r\n        [multiple]=\"true\"\r\n      >\r\n    </label>\r\n\r\n    <div class=\"upload-file__upload-files\" *ngIf=\"uploadFiles.length > 0 && multiple\">\r\n      <div class=\"upload-file__files\">\r\n        <div\r\n          class=\"upload-file__file\"\r\n          *ngFor=\"let file of uploadFiles; let idx = index\"\r\n        >\r\n          <div class=\"upload-file__upload-files-inner\">\r\n            <i class=\"pi pi-check-circle\"></i>\r\n            <p>{{file.name}}</p>\r\n            <span *ngIf=\"file?.size\">{{getFileSize(file.size)}} </span>\r\n          </div>\r\n\r\n          <div\r\n            class=\"upload-file__remove\"\r\n            (click)=\"onRemoveFile(idx)\"\r\n          >\r\n            <i class=\"pi pi-times\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n  </ng-container>\r\n</div>\r\n","import {Directive, EventEmitter, HostListener, Output} from '@angular/core';\r\n\r\n@Directive({\r\n  selector: '[appMiddleMouseClick]'\r\n})\r\nexport class MiddleMouseClickDirective {\r\n  // tslint:disable-next-line:no-output-rename\r\n  @Output('middleclick') middleclick = new EventEmitter();\r\n\r\n  constructor() {}\r\n\r\n  @HostListener('mouseup', ['$event'])\r\n  middleClickEvent(event) {\r\n    if (event.button === 1) {\r\n      this.middleclick.emit(event);\r\n    }\r\n  }\r\n}\r\n","import {Directive, ElementRef, EventEmitter, HostListener, Input, OnDestroy, Output, Renderer2} from '@angular/core';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {fromEventPattern, Observable, Subject, takeUntil} from 'rxjs';\r\n\r\n@Directive({\r\n  selector: '[pekPasteScreenImage]'\r\n})\r\nexport class PasteScreenImageDirective implements OnDestroy{\r\n  @Output() imageAdded: EventEmitter<File> = new EventEmitter<File>();\r\n  @Input() trackMousePosition = true;\r\n  isMouseOver = false;\r\n  private destroy$ = new Subject();\r\n  onPaste$: Observable<any>;\r\n  constructor(\r\n    private readonly modalService: ModalService,\r\n    private element: ElementRef,\r\n    private renderer: Renderer2\r\n  ) {\r\n    this.createOnPastObservable(renderer);\r\n    this.onPaste$.subscribe(event => {\r\n      if (!this.trackMousePosition || this.trackMousePosition && this.isMouseOver) {\r\n        const item = event.clipboardData.items[0];\r\n        if (item.type.indexOf('image') === 0) {\r\n          const blob = item.getAsFile();\r\n          const reader = new FileReader();\r\n          reader.onload = (event) => {\r\n            this.modalService.showPasteImageModal(event.target.result, blob).pipe(takeUntil(this.destroy$)).subscribe(file => {\r\n              if (file) {\r\n                this.imageAdded.emit(file);\r\n              }\r\n            });\r\n          };\r\n          reader.readAsDataURL(blob);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private createOnPastObservable(renderer: Renderer2) {\r\n    let removePastEventListener: () => void;\r\n    const createPastEventListener = (\r\n      handler: (e: Event) => boolean | void\r\n    ) => {\r\n      removePastEventListener = renderer.listen(\"document\", \"paste\", handler);\r\n    };\r\n\r\n    this.onPaste$ = fromEventPattern<Event>(createPastEventListener, () =>\r\n      removePastEventListener()\r\n    ).pipe(takeUntil(this.destroy$));\r\n  }\r\n\r\n  @HostListener('mouseenter') onMouseover() {\r\n    this.isMouseOver = true;\r\n  }\r\n\r\n  @HostListener('mouseleave') onMouseLeve() {\r\n    this.isMouseOver = false;\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.renderer.destroy();\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","import { Directive, Input, ElementRef, OnInit, OnDestroy } from '@angular/core';\r\nimport tippy from 'tippy.js';\r\n\r\n@Directive({\r\n  selector: '[pekTippy]'\r\n})\r\nexport class TippyDirective implements OnInit, OnDestroy {\r\n  @Input() content: string;\r\n\r\n  constructor(private elementRef: ElementRef) {}\r\n\r\n  ngOnInit() {\r\n    tippy(this.elementRef.nativeElement, {\r\n      content: this.content,\r\n      allowHTML: true,\r\n      interactive: true,\r\n      duration: 0,\r\n      placement: 'right',\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    // @ts-ignore\r\n    tippy(this.elementRef.nativeElement).destroy();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {ActivatedRouteSnapshot, CanActivate, RouterStateSnapshot, UrlTree} from '@angular/router';\r\nimport {Observable} from 'rxjs';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ExternalUriGuard implements CanActivate {\r\n  canActivate(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n    const {uri} = route.params;\r\n    // window.open(uri, '_blank');\r\n    window.open(uri, '_self');\r\n    return false;\r\n  }\r\n}\r\n","import { Component, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-in-icon',\r\n  templateUrl: './in-icon.component.html',\r\n  styleUrls: ['./in-icon.component.scss']\r\n})\r\nexport class InIconComponent implements OnInit {\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<svg xmlns=\"http://www.w3.org/2000/svg\" enable-background=\"new 0 0 24 24\" height=\"24px\" viewBox=\"0 0 24 24\" width=\"24px\"\r\n     fill=\"#fff\">\r\n  <g>\r\n    <rect fill=\"none\" height=\"24\" width=\"24\"/>\r\n  </g>\r\n  <g>\r\n    <path\r\n      d=\"M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z M20,19h-8v2h8c1.1,0,2-0.9,2-2V5c0-1.1-0.9-2-2-2h-8v2h8V19z\"/>\r\n  </g>\r\n</svg>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\n\r\nexport type Module = 'dashboard' | 'product-structure' | 'confirmation' | 'warehouse' | 'manufacturing-procurement'\r\n  | 'quality-control' | 'manufacturing' | 'contacts-events' | 'outsourcing' | 'purchasing' | 'sales'\r\n  | 'reports' | 'administration' | 'business-trip' | 'correspondents' | 'instruments';\r\n\r\n@Component({\r\n  selector: 'pek-module-icon',\r\n  templateUrl: './module-icon.component.html',\r\n  styleUrls: ['./module-icon.component.scss']\r\n})\r\nexport class ModuleIconComponent implements OnInit {\r\n  @Input() module: Module;\r\n  @Input() isActive: boolean = false;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"module-icon\" [class.module-icon_active]=\"isActive\" [ngSwitch]=\"module\">\r\n  <svg *ngSwitchCase=\"'product-structure'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M30.2 42v-6.25h-7.7v-20.5h-4.65v6.5H4V6h13.85v6.25H30.2V6H44v15.75H30.2v-6.5h-4.7v17.5h4.7v-6.5H44V42ZM7 9v9.75Zm26.2 20.25V39ZM33.2 9v9.75Zm0 9.75H41V9h-7.8Zm0 20.25H41v-9.75h-7.8ZM7 18.75h7.85V9H7Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'dashboard'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M25.5 19.5V6H42v13.5ZM6 25.5V6h16.5v19.5ZM25.5 42V22.5H42V42ZM6 42V28.5h16.5V42Zm3-19.5h10.5V9H9ZM28.5 39H39V25.5H28.5Zm0-22.5H39V9H28.5ZM9 39h10.5v-7.5H9Zm10.5-16.5Zm9-6Zm0 9Zm-9 6Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'confirmation'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M7 40q-1.3 0-2.15-.85Q4 38.3 4 37v-7.65q1.85-.4 3.075-1.875T8.3 24q0-2-1.225-3.5T4 18.65V11q0-1.3.85-2.15Q5.7 8 7 8h34q1.3 0 2.15.85Q44 9.7 44 11v7.65q-1.85.35-3.075 1.85T39.7 24q0 2 1.225 3.475T44 29.35V37q0 1.3-.85 2.15Q42.3 40 41 40Zm0-3h34v-5.45q-1.9-1.3-3.1-3.25-1.2-1.95-1.2-4.3 0-2.35 1.2-4.3 1.2-1.95 3.1-3.25V11H7v5.45q1.95 1.3 3.125 3.25T11.3 24q0 2.35-1.175 4.3Q8.95 30.25 7 31.55Zm17-3.15q.6 0 1.05-.45.45-.45.45-1.05 0-.6-.45-1.05-.45-.45-1.05-.45-.6 0-1.05.45-.45.45-.45 1.05 0 .6.45 1.05.45.45 1.05.45Zm0-8.35q.6 0 1.05-.45.45-.45.45-1.05 0-.6-.45-1.05-.45-.45-1.05-.45-.6 0-1.05.45-.45.45-.45 1.05 0 .6.45 1.05.45.45 1.05.45Zm0-8.35q.6 0 1.05-.45.45-.45.45-1.05 0-.6-.45-1.05-.45-.45-1.05-.45-.6 0-1.05.45-.45.45-.45 1.05 0 .6.45 1.05.45.45 1.05.45ZM24 24Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'warehouse'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M7 39h6V23h22v16h6V16L24 9.2 7 16Zm-3 3V14l20-8 20 8v28H32V26H16v16Zm14.5 0v-3h3v3Zm4-6v-3h3v3Zm4 6v-3h3v3ZM13 23h22Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'manufacturing-procurement'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M5 44q-1.2 0-2.1-.9Q2 42.2 2 41V18.05h3V41h30.45v3Zm6-6q-1.2 0-2.1-.9Q8 36.2 8 35V9.1h12.1V5q0-1.2.9-2.1.9-.9 2.1-.9h7.8q1.2 0 2.1.9.9.9.9 2.1v4.1H46V35q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h32V12.1H11V35ZM23.1 9.1h7.8V5h-7.8ZM11 35V12.1 35Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'quality-control'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M28.55 31.6h3v-6.2h6.15v-3h-6.15v-6.15h-3v6.15h-6.2v3h6.2Zm-16.9 9.2Q6.4 38.7 3.2 34.125 0 29.55 0 23.95q0-5.6 3.225-10.15Q6.45 9.25 11.65 7.15v3.4q-3.95 1.8-6.3 5.425Q3 19.6 3 23.95q0 4.4 2.35 8 2.35 3.6 6.3 5.45ZM30 41.95q-3.75 0-7.025-1.425-3.275-1.425-5.7-3.85-2.425-2.425-3.85-5.7Q12 27.7 12 23.95q0-3.75 1.425-7.025 1.425-3.275 3.85-5.7 2.425-2.425 5.7-3.85Q26.25 5.95 30 5.95q3.75 0 7.025 1.425 3.275 1.425 5.7 3.85 2.425 2.425 3.85 5.7Q48 20.2 48 23.95q0 3.75-1.425 7.025-1.425 3.275-3.85 5.7-2.425 2.425-5.7 3.85Q33.75 41.95 30 41.95Zm0-18Zm.05 15q6.2 0 10.575-4.375Q45 30.2 45 23.95q0-6.2-4.375-10.6Q36.25 8.95 30 8.95q-6.2 0-10.6 4.4-4.4 4.4-4.4 10.6 0 6.25 4.4 10.625t10.65 4.375Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'manufacturing'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M4 44V19.95L18 14v4l10-4.05V20h16v24Zm3-3h34V23H25v-4.6l-10 4v-3.95L7 22Zm15.5-5h3v-8h-3Zm-8 0h3v-8h-3Zm16 0h3v-8h-3ZM44 20h-9l2-16h5ZM7 41h34Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'contacts-events'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M9 44q-1.2 0-2.1-.9Q6 42.2 6 41V10q0-1.2.9-2.1Q7.8 7 9 7h3.25V4h3.25v3h17V4h3.25v3H39q1.2 0 2.1.9.9.9.9 2.1v31q0 1.2-.9 2.1-.9.9-2.1.9Zm0-3h30V19.5H9V41Zm0-24.5h30V10H9Zm0 0V10v6.5ZM24 28q-.85 0-1.425-.575Q22 26.85 22 26q0-.85.575-1.425Q23.15 24 24 24q.85 0 1.425.575Q26 25.15 26 26q0 .85-.575 1.425Q24.85 28 24 28Zm-8 0q-.85 0-1.425-.575Q14 26.85 14 26q0-.85.575-1.425Q15.15 24 16 24q.85 0 1.425.575Q18 25.15 18 26q0 .85-.575 1.425Q16.85 28 16 28Zm16 0q-.85 0-1.425-.575Q30 26.85 30 26q0-.85.575-1.425Q31.15 24 32 24q.85 0 1.425.575Q34 25.15 34 26q0 .85-.575 1.425Q32.85 28 32 28Zm-8 8q-.85 0-1.425-.575Q22 34.85 22 34q0-.85.575-1.425Q23.15 32 24 32q.85 0 1.425.575Q26 33.15 26 34q0 .85-.575 1.425Q24.85 36 24 36Zm-8 0q-.85 0-1.425-.575Q14 34.85 14 34q0-.85.575-1.425Q15.15 32 16 32q.85 0 1.425.575Q18 33.15 18 34q0 .85-.575 1.425Q16.85 36 16 36Zm16 0q-.85 0-1.425-.575Q30 34.85 30 34q0-.85.575-1.425Q31.15 32 32 32q.85 0 1.425.575Q34 33.15 34 34q0 .85-.575 1.425Q32.85 36 32 36Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'outsourcing'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M38.5 30.25v-16.1L28 6.8l-10.5 7.35v6.45h-3v-7.95L28 3l13.5 9.65v17.6ZM28 6.8ZM29 17h2v-2h-2Zm-4 0h2v-2h-2Zm4 4h2v-2h-2Zm-4 0h2v-2h-2Zm3.3 23.9-15.55-4.45v2.85H2V23.6h15.45l12.75 4.8q1.35.5 2.275 1.625.925 1.125.925 3.225h5.7q2.1 0 3.5 1.5T44 38.8v1.3ZM5 40.3h4.7V26.6H5Zm23.1 1.5 12.8-3.9q-.3-.95-.75-1.3-.45-.35-1.05-.35H28.75q-1.5 0-2.775-.2t-2.425-.55l-4.05-1.25 1.1-2.9 3.65 1.2q1.25.4 2.375.55 1.125.15 3.575.15 0-.6-.225-1.175-.225-.575-.775-.825L16.95 26.6h-4.2v10.7ZM9.7 33.45Zm20.5-.2Zm-20.5.2Zm3.05 0Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'purchasing'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M14.35 43.95q-1.5 0-2.55-1.05-1.05-1.05-1.05-2.55 0-1.5 1.05-2.55 1.05-1.05 2.55-1.05 1.45 0 2.525 1.05t1.075 2.55q0 1.5-1.05 2.55-1.05 1.05-2.55 1.05Zm20 0q-1.5 0-2.55-1.05-1.05-1.05-1.05-2.55 0-1.5 1.05-2.55 1.05-1.05 2.55-1.05 1.45 0 2.525 1.05t1.075 2.55q0 1.5-1.05 2.55-1.05 1.05-2.55 1.05Zm-22.6-33 5.5 11.4h14.4l6.25-11.4Zm-1.5-3H39.7q1.6 0 2.025.975.425.975-.275 2.175L34.7 23.25q-.5.85-1.4 1.475-.9.625-1.95.625H16.2l-2.8 5.2h24.55v3h-24.1q-2.1 0-3.025-1.4-.925-1.4.025-3.15l3.2-5.9L6.45 7h-3.9V4H8.4Zm7 14.4h14.4Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'sales'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M25.8 44q-.6 0-1.15-.175-.55-.175-1.05-.675L4.85 24.4q-.5-.5-.675-1.05Q4 22.8 4 22.2V7q0-1.3.85-2.15Q5.7 4 7 4h15.2q.6 0 1.2.175t1.1.675L43.15 23.5q1 1 1 2.225t-1 2.225l-15.2 15.2q-.4.4-.975.625Q26.4 44 25.8 44Zm.1-2.9 15.2-15.2L22.2 7H7v15.2ZM12.25 14.8q1.05 0 1.825-.775.775-.775.775-1.825 0-1.05-.775-1.825Q13.3 9.6 12.25 9.6q-1.05 0-1.825.775-.775.775-.775 1.825 0 1.05.775 1.825.775.775 1.825.775ZM7 7Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'reports'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M15.95 35.5h16.1v-3h-16.1Zm0-8.5h16.1v-3h-16.1ZM11 44q-1.2 0-2.1-.9Q8 42.2 8 41V7q0-1.2.9-2.1Q9.8 4 11 4h18.05L40 14.95V41q0 1.2-.9 2.1-.9.9-2.1.9Zm16.55-27.7V7H11v34h26V16.3ZM11 7v9.3V7v34V7Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'administration'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 48 48\">\r\n    <path\r\n      d=\"M24 44q-6.9-1.6-11.45-7.825Q8 29.95 8 21.9V9.95l16-6 16 6v13.5q-.7-.35-1.5-.625T37 22.45v-10.4l-13-4.8-13 4.8v9.85q0 3.8 1.225 7t3.125 5.625q1.9 2.425 4.2 4.025 2.3 1.6 4.45 2.3.3.6.9 1.35.6.75 1 1.15-.45.25-.95.375-.5.125-.95.275Zm10.55-9.5q1.3 0 2.2-.95.9-.95.9-2.25t-.9-2.2q-.9-.9-2.2-.9-1.3 0-2.25.9t-.95 2.2q0 1.3.95 2.25t2.25.95Zm-.05 6.25q1.65 0 3-.7t2.3-2q-1.3-.7-2.6-1.05-1.3-.35-2.7-.35-1.4 0-2.725.35-1.325.35-2.575 1.05.95 1.3 2.275 2t3.025.7Zm.15 3.25q-3.9 0-6.65-2.775-2.75-2.775-2.75-6.575 0-3.9 2.75-6.675t6.65-2.775q3.85 0 6.625 2.775t2.775 6.675q0 3.8-2.775 6.575Q38.5 44 34.65 44ZM24 24.05Z\"/>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'business-trip'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n    <g>\r\n    <path d=\"M19.78,9.44l-1.84-5A1.75,1.75,0,0,0,16.3,3.25H7.7A1.75,1.75,0,0,0,6.06,4.4l-1.84,5a1.76,1.76,0,0,0-1,1.56v4.5A1.73,1.73,0,0,0,4,16.94S4,17,4,17v2a1,1,0,0,0,1,1H6a1,1,0,0,0,1-1V17.25H17V19a1,1,0,0,0,1,1h1a1,1,0,0,0,1-1V17s0,0,0-.06a1.73,1.73,0,0,0,.76-1.44V11A1.76,1.76,0,0,0,19.78,9.44Zm-.53,6.06a.25.25,0,0,1-.25.25H5a.25.25,0,0,1-.25-.25V11A.25.25,0,0,1,5,10.75H19a.25.25,0,0,1,.25.25ZM7.47,4.91a.25.25,0,0,1,.23-.16h8.6a.25.25,0,0,1,.23.16l1.4,3.84H6.07Z\"/><circle cx=\"8\" cy=\"13.25\" r=\"1.5\"/><circle cx=\"16\" cy=\"13.25\" r=\"1.5\"/>\r\n    </g>\r\n  </svg>\r\n\r\n  <svg *ngSwitchCase=\"'instruments'\" xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><g id=\"database\"><path d=\"M19.48,4.54A19.17,19.17,0,0,0,12,2.75,19.17,19.17,0,0,0,4.52,4.54a1.74,1.74,0,0,0-1,1.59V17.87a1.74,1.74,0,0,0,1,1.59A19.17,19.17,0,0,0,12,21.25a19.17,19.17,0,0,0,7.48-1.79,1.74,1.74,0,0,0,1-1.59V6.13A1.74,1.74,0,0,0,19.48,4.54Zm-.48,8a17.76,17.76,0,0,1-7,1.72,17.76,17.76,0,0,1-7-1.72V8.68a18.64,18.64,0,0,0,7,1.57,18.64,18.64,0,0,0,7-1.57ZM5.15,5.9A17.56,17.56,0,0,1,12,4.25,17.67,17.67,0,0,1,18.86,5.9a.26.26,0,0,1,.14.23V7a17.76,17.76,0,0,1-7,1.72A17.76,17.76,0,0,1,5,7v-.9A.25.25,0,0,1,5.15,5.9Zm13.7,12.2A17.56,17.56,0,0,1,12,19.75,17.67,17.67,0,0,1,5.14,18.1.26.26,0,0,1,5,17.87V14.18a18.64,18.64,0,0,0,7,1.57,18.64,18.64,0,0,0,7-1.57v3.69A.25.25,0,0,1,18.85,18.1Z\"/></g></svg>\r\n\r\n  <svg *ngSwitchCase=\"'correspondents'\"  xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\"><g id=\"users\"><path d=\"M14,12.25A3.75,3.75,0,1,1,17.75,8.5,3.75,3.75,0,0,1,14,12.25Zm0-6A2.25,2.25,0,1,0,16.25,8.5,2.25,2.25,0,0,0,14,6.25Z\"/><path d=\"M21,19.25a.76.76,0,0,1-.75-.75c0-1.95-1.06-3.25-6.25-3.25s-6.25,1.3-6.25,3.25a.75.75,0,0,1-1.5,0c0-4.75,5.43-4.75,7.75-4.75s7.75,0,7.75,4.75A.76.76,0,0,1,21,19.25Z\"/><path d=\"M8.32,13.06H8a3,3,0,1,1,.58-6,.75.75,0,1,1-.15,1.49,1.46,1.46,0,0,0-1.09.34,1.47,1.47,0,0,0-.54,1,1.49,1.49,0,0,0,1.35,1.64,1.53,1.53,0,0,0,.93-.22.75.75,0,0,1,.79,1.28A3,3,0,0,1,8.32,13.06Z\"/><path d=\"M3,18.5a.76.76,0,0,1-.75-.75c0-2.7.72-4.5,4.25-4.5a.75.75,0,0,1,0,1.5c-2.35,0-2.75.75-2.75,3A.76.76,0,0,1,3,18.5Z\"/></g></svg>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-sort-icon',\r\n  templateUrl: './sort-icon.component.html',\r\n  styleUrls: ['./sort-icon.component.scss']\r\n})\r\nexport class SortIconComponent implements OnInit {\r\n  @Input() value: boolean;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<ng-container *ngIf=\"value !== null\">\r\n  <i\r\n    class=\"pi\"\r\n    [class.pi-sort-amount-down]=\"value === true\"\r\n    [class.pi-sort-amount-down-alt]=\"value === false\"\r\n  ></i>\r\n</ng-container>\r\n","import {\r\n  HttpContextToken,\r\n  HttpErrorResponse,\r\n  HttpEvent,\r\n  HttpHandler,\r\n  HttpInterceptor,\r\n  HttpRequest,\r\n  HttpResponse\r\n} from '@angular/common/http';\r\nimport {Injectable} from '@angular/core';\r\nimport {MessageService} from 'primeng/api';\r\nimport {Observable, Subject} from 'rxjs';\r\nimport {bufferTime, filter, tap} from 'rxjs/operators';\r\n\r\nclass Message {\r\n  severity: 'success' | 'error';\r\n  status: number;\r\n  text: string;\r\n}\r\n\r\nexport const IS_SCANNING_ENABLED = new HttpContextToken<boolean>(() => false);\r\n\r\n@Injectable()\r\nexport class ErrorInterceptor implements HttpInterceptor {\r\n\r\n  private message$ = new Subject<Message>();\r\n\r\n  constructor(\r\n    private messageService: MessageService\r\n  ) {\r\n    this.init();\r\n  }\r\n\r\n  init() {\r\n    this.message$.pipe(\r\n      bufferTime(1_000),\r\n      filter(messages => Boolean(messages.length)),\r\n    ).subscribe(messages => {\r\n      const succeededMessages = messages.filter(message => message.severity === 'success');\r\n      if (succeededMessages.length) {\r\n        this.messageService.add({\r\n          severity: 'success',\r\n          summary: `Succeeded operations: ${succeededMessages.length}`,\r\n          detail: this.getNotificationText(succeededMessages),\r\n        });\r\n      }\r\n      const failedMessages = messages.filter(message => message.severity === 'error');\r\n      if (failedMessages.length) {\r\n        this.messageService.add({\r\n          severity: 'error',\r\n          summary: `Failed operations: ${failedMessages.length}`,\r\n          detail: this.getNotificationText(failedMessages),\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  intercept(req: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\r\n    return next.handle(req).pipe(tap(\r\n      (event) => {\r\n        if (req.context.get(IS_SCANNING_ENABLED) === true) {\r\n          return;\r\n        }\r\n\r\n        if (event instanceof HttpResponse) {\r\n          if (req.method === 'PUT' || req.method === 'PATCH') {\r\n            this.message$.next({severity: 'success', status: event.status, text: 'Successfully Updated'});\r\n          }\r\n          if (req.method === 'POST') {\r\n\r\n            this.message$.next({severity: 'success', status: event.status, text: 'Successfully Created'});\r\n          }\r\n          if (req.method === 'DELETE') {\r\n            this.message$.next({severity: 'success', status: event.status, text: 'Successfully Deleted'});\r\n          }\r\n        }\r\n      },\r\n      (err) => {\r\n        if (req.context.get(IS_SCANNING_ENABLED) === true) {\r\n          return;\r\n        }\r\n\r\n        if (err instanceof HttpErrorResponse) {\r\n          if (err.status === 400 || err.status === 404 || err.status === 502 || err.status === 403) {\r\n            this.message$.next({severity: 'error', status: err.status, text: JSON.stringify(err.error.data)});\r\n          } else if (err.status === 500) {\r\n            this.message$.next({\r\n              severity: 'error',\r\n              status: err.status,\r\n              text: JSON.stringify('Unknown error. Contact the developer.')\r\n            });\r\n          }\r\n        }\r\n      }),\r\n    );\r\n  }\r\n\r\n  private getNotificationText(messages: Message[]) {\r\n    return messages\r\n      .map((message) => `${message.status}: ${message.text}`)\r\n      .join(';\\r\\n');\r\n  }\r\n}\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {PaymentFile} from '../../../payments/models/payment';\r\nimport {environment} from '@env/environment';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {PaymentService} from '../../../payments/services/payment.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {finalize} from 'rxjs';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\n\r\n@Component({\r\n  selector: 'pek-add-file-to-order',\r\n  templateUrl: './add-file-to-order.component.html',\r\n  styleUrls: ['./add-file-to-order.component.scss']\r\n})\r\nexport class AddFileToOrderComponent implements OnInit {\r\n\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  uploadFiles: File[] = [];\r\n  files: any[] = []\r\n  isLoading = true;\r\n  isPending = false;\r\n  link = environment.image_path;\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<AddFileToOrderComponent>,\r\n    private orderService: OrderService,\r\n    private adapterService: AdapterService,\r\n    private modalService: ModalService,\r\n    @Inject(MAT_DIALOG_DATA) public data: {orderId: number}\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getFiles()\r\n  }\r\n\r\n  getFiles() {\r\n    this.orderService.getFiles(this.data.orderId).subscribe(files => {\r\n      this.files = files;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getFileName(file: string) {\r\n    let name = file.split('/');\r\n    return name[name.length - 1];\r\n  }\r\n\r\n  onSelectFiles(files: File[]) {\r\n    this.uploadFiles = files;\r\n  }\r\n\r\n\r\n  onDownloadFile(file: PaymentFile) {\r\n    this.addition.add(file.id);\r\n    this.orderService.downloadFile(file.id).subscribe(response => {\r\n      const filename = this.getFileName(file.file);\r\n      this.adapterService.downloadFile(filename, response);\r\n      this.addition.clear();\r\n    });\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm =>{\r\n      if (confirm) {\r\n        this.deletion.add(id)\r\n\r\n        this.orderService.deleteFile(id).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id)\r\n          this.files.splice(index, 1)\r\n          this.deletion.clear()\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onUploadFiles() {\r\n    this.isPending = true;\r\n    this.orderService.severalUploadFiles(this.data.orderId, this.uploadFiles)\r\n      .pipe(\r\n        finalize(() => this.isPending = false)\r\n      )\r\n      .subscribe(files => this.dialogRef.close(files));\r\n  }\r\n\r\n  fileAdded(file: File) {\r\n    this.uploadFiles.push(file);\r\n  }\r\n}\r\n","<div pekPasteScreenImage (imageAdded)=\"fileAdded($event)\">\r\n  <div class=\"modal-header\">\r\n    <h2 class=\"modal-header__title\">\r\n      Order Files\r\n    </h2>\r\n  </div>\r\n\r\n  <mat-dialog-content >\r\n    <pek-upload-file\r\n      [uploadFiles]=\"uploadFiles\"\r\n      [multiple]=\"true\"\r\n      (selectFile)=\"onSelectFiles($event)\"\r\n    ></pek-upload-file>\r\n\r\n    <div class=\"product-files\">\r\n      <h3 class=\"product-files__caption\">Uploaded Files</h3>\r\n      <p-table\r\n        selectionMode=\"single\"\r\n        [value]=\"files\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 75%\">Name</th>\r\n            <th style=\"width: 20%\">Download</th>\r\n          </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"body\" let-file let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 75%\" class=\"word-break\">\r\n              <a [href]=\"link + file.file\">\r\n                {{getFileName(file.file)}}\r\n              </a>\r\n            </td>\r\n            <td style=\"width: 20%\">\r\n              <div class=\"d-flex\">\r\n                <button\r\n                  pButton\r\n                  (click)=\"onDownloadFile(file)\"\r\n                  [loading]=\"addition.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                  icon=\"pi pi-download\"\r\n                ></button>\r\n                <button\r\n                  pButton\r\n                  (click)=\"onRemoveFile(file.id)\"\r\n                  [loading]=\"deletion.has(file.id)\"\r\n                  type=\"button\"\r\n                  class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                  icon=\"pi pi-trash\"\r\n                ></button>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-2\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </mat-dialog-content>\r\n\r\n\r\n  <mat-dialog-actions class=\"justify-content-between\">\r\n    <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-success\"\r\n      label=\"Upload\"\r\n      [loading]=\"isPending\"\r\n      [disabled]=\"uploadFiles.length === 0\"\r\n      (click)=\"onUploadFiles()\"\r\n    ></button>\r\n  </mat-dialog-actions>\r\n\r\n</div>\r\n","import {Component, Inject, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {OrderProduct, OrderRequestType} from '../../../procurement/models/order-product';\r\nimport {OrderType} from '@shared/components/order-page/order-page.component';\r\nimport {BehaviorSubject, Observable, switchMap} from 'rxjs';\r\nimport {finalize, map, tap} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-add-products-to-chain',\r\n  templateUrl: './add-products-to-chain.component.html',\r\n  styleUrls: ['./add-products-to-chain.component.scss']\r\n})\r\nexport class AddProductsToChainComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  isSaving = false;\r\n  isStartFirstPage = false;\r\n\r\n  selectedOrder: Order;\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    with_free_product: [false]\r\n  });\r\n\r\n  currentPage = 1;\r\n\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n  isLoading = true;\r\n  productsCount = 0;\r\n\r\n  orders$: Observable<Order[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.orderService.getForPagination(this.query)),\r\n    tap(response => this.productsCount = response.count),\r\n    map(response => {\r\n      let orders = response.results;\r\n      if (this.searchForm.get('with_free_product').value) {\r\n        const requiredNomenclatureId = this.data.products[0].nomenclature.id;\r\n        orders.forEach(order => {\r\n          // requiredNomenclatureId\r\n          const nomenclatureOrderProducts = order.order_products?.filter(orderProduct =>\r\n            !orderProduct.is_subtracted_from_free_quantity && orderProduct.nomenclature.id == requiredNomenclatureId);\r\n          // OrderRequestType\r\n          nomenclatureOrderProducts.forEach(orderProduct => {\r\n            if (!order.freeNomenclatureQuantityAtChain) order.freeNomenclatureQuantityAtChain = 0;\r\n            if (orderProduct.request_type === OrderRequestType.MANUALLY) {\r\n              const quantity = orderProduct.sent_to_qc_quantity ? orderProduct.quantity - orderProduct.sent_to_qc_quantity : orderProduct.quantity;\r\n              order.freeNomenclatureQuantityAtChain += quantity;\r\n            }\r\n            if (orderProduct.request_type === OrderRequestType.AUTOMATICALLY) {\r\n              const quantity = orderProduct.sent_to_qc_quantity ? orderProduct.quantity - orderProduct.sent_to_qc_quantity : orderProduct.quantity;\r\n              if (orderProduct.initial_quantity < quantity) {\r\n                order.freeNomenclatureQuantityAtChain += quantity - orderProduct.initial_quantity;\r\n              }\r\n            }\r\n          });\r\n        });\r\n        orders = orders.filter(order => order.freeNomenclatureQuantityAtChain > 0);\r\n      }\r\n      return orders;\r\n    }),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderService: OrderService,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly adapterService: AdapterService,\r\n    private dialogRef: MatDialogRef<AddProductsToChainComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { products: OrderProduct[], orderType: OrderType }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log('this.data.products', this.data.products);\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedOrder = null;\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    if (this.data.orderType === 'procurement') {\r\n      this.query = [\r\n        {name: 'paginated', value: true},\r\n        {name: 'page', value: this.currentPage},\r\n        {name: 'exclude_with_active_final_status', value: true},\r\n        {name: 'accounting_type', value: 1},\r\n        {name: 'has_purchase_category', value: false},\r\n      ];\r\n    }\r\n\r\n    if (this.data.orderType === 'outsourcing') {\r\n      this.query = [\r\n        {name: 'paginated', value: true},\r\n        {name: 'page', value: this.currentPage},\r\n        {name: 'exclude_with_active_final_status', value: true},\r\n        {name: 'accounting_type', value: 2},\r\n      ];\r\n    }\r\n\r\n    if (this.data.orderType === 'purchase') {\r\n      this.query = [\r\n        {name: 'paginated', value: true},\r\n        {name: 'page', value: this.currentPage},\r\n        {name: 'exclude_with_active_final_status', value: true},\r\n        {name: 'accounting_type', value: 1},\r\n        {name: 'has_purchase_category', value: true},\r\n      ];\r\n    }\r\n\r\n    if (this.searchForm.get('with_free_product').value) {\r\n      this.query.push({name: 'with_free_product', value: this.data.products[0].nomenclature.id});\r\n      const catIndex = this.query.findIndex(el => el.name === 'has_purchase_category');\r\n      if (catIndex > -1) {\r\n        this.query.splice(catIndex, 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  onAdd() {\r\n    this.isSaving = true;\r\n\r\n    const send = this.data.products.map(p => {\r\n      return {\r\n        id: p.id,\r\n        order: this.selectedOrder.id,\r\n        is_subtracted_from_free_quantity: false\r\n      };\r\n    });\r\n\r\n\r\n    if (this.searchForm.get('with_free_product').value) {\r\n      send[0].is_subtracted_from_free_quantity = true;\r\n    }\r\n\r\n    this.orderProductService.addToOrder(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => this.dialogRef.close(true));\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Add To\r\n    <ng-container [ngSwitch]=\"data.orderType\">\r\n      <ng-container *ngSwitchCase=\"'procurement'\">Procurement</ng-container>\r\n      <ng-container *ngSwitchCase=\"'outsourcing'\">Outsourcing</ng-container>\r\n      <ng-container *ngSwitchCase=\"'purchase'\">Procurement</ng-container>\r\n    </ng-container>\r\n    Chain\r\n  </h2>\r\n  <div class=\"modal-header__tools\">\r\n    <form [formGroup]=\"searchForm\">\r\n      <div class=\"form-group\">\r\n        <p-checkbox\r\n          inputId=\"root\"\r\n          [disabled]=\"data.products.length > 1\"\r\n          formControlName=\"with_free_product\"\r\n          (ngModelChange)=\"this.search$.next()\"\r\n          [binary]=\"true\"\r\n        ></p-checkbox>\r\n        <label class=\"ml-2 mb-0\" for=\"root\">With Free Items</label>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</div>\r\n\r\n<div *ngFor=\"let product of data.products; let last=last\">\r\n  {{product.nomenclature.name}}\r\n  ({{product.initial_quantity}}\r\n  {{product.nomenclature.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs'}})\r\n  <span *ngIf=\"!last\">,</span><br>\r\n</div>\r\n\r\n<div class=\"mb-3\"></div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"table-pagination-preloader\">\r\n    <p-table\r\n      selectionMode=\"single\"\r\n      dataKey=\"id\"\r\n      [value]=\"orders$ | async\"\r\n      [(selection)]=\"selectedOrder\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 10%\" class=\"index-header text-center\">#</th>\r\n          <th [style.width.px]=\"this.searchForm.get('with_free_product').value ? 10 : 20\" class=\"text-center\">ID</th>\r\n          <th style=\"width: 20%\" class=\"text-center\">Date</th>\r\n          <th [style.width.px]=\"this.searchForm.get('with_free_product').value ? 40 : 50\" style=\"width: 40%\">Company</th>\r\n          <th *ngIf=\"this.searchForm.get('with_free_product').value\" style=\"width: 10%\">Free Quantity</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\" let-expanded=\"expanded\">\r\n        <tr [pSelectableRow]=\"order\" [pRowToggler]=\"order\" [pSelectableRowDisabled]=\"\r\n        this.searchForm.get('with_free_product').value && order?.freeNomenclatureQuantityAtChain < data.products[0].initial_quantity\">\r\n          <td style=\"width: 10%\" class=\"text-center\">{{(this.currentPage - 1) * 10 + i + 1}}</td>\r\n          <td [style.width.px]=\"this.searchForm.get('with_free_product').value ? 10 : 20\" class=\"text-center\">\r\n            <a *ngIf=\"order.accounting_type == 2\" [href]=\"'outsourcing/chains/order/' + order.id\"\r\n               target=\"_blank\">{{order.id}}\r\n            </a>\r\n            <a *ngIf=\"order.accounting_type == 1 && !order.purchase_category\" [href]=\"'procurement/chains/order/' + order.id\"\r\n               target=\"_blank\">{{order.id}}\r\n            </a>\r\n            <a *ngIf=\"order.purchase_category && order.accounting_type == 1\" [href]=\"'purchasing/chains/order/' + order.id\"\r\n               target=\"_blank\">{{order.id}}\r\n            </a>\r\n          </td>\r\n          <td style=\"width: 20%\" class=\"text-center\">{{order.created|date:'dd/MM/yyyy'}}</td>\r\n          <td [style.width.px]=\"this.searchForm.get('with_free_product').value ? 40 : 50\">{{order?.supplier?.name}}</td>\r\n          <td *ngIf=\"this.searchForm.get('with_free_product').value\" style=\"width: 15%\">{{order?.freeNomenclatureQuantityAtChain}}</td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n            <span>No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-table>\r\n    <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n    </div>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n\r\n  <div\r\n    class=\"paginator-wrapper\"\r\n    [class.paginator-wrapper_hide]=\"productsCount === 0\"\r\n  >\r\n    <p-paginator\r\n      #paginator\r\n      [rows]=\"10\"\r\n      [totalRecords]=\"productsCount\"\r\n      (onPageChange)=\"paginate($event)\"\r\n    >\r\n    </p-paginator>\r\n  </div>\r\n\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Add\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"!selectedOrder\"\r\n    (click)=\"onAdd()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, HostListener, Inject, OnDestroy, OnInit, ViewEncapsulation} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {AlbumItem} from '@shared/services/album.service';\r\nimport {DOCUMENT} from '@angular/common';\r\n\r\n@Component({\r\n  selector: 'pek-album',\r\n  templateUrl: './album.component.html',\r\n  styleUrls: ['./album.component.scss'],\r\n  encapsulation: ViewEncapsulation.None\r\n})\r\nexport class AlbumComponent implements OnInit, OnDestroy {\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AlbumComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public album: AlbumItem[],\r\n    @Inject(DOCUMENT) private document: Document\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.album);\r\n  }\r\n\r\n  print() {\r\n    this.document.documentElement.classList.remove('cdk-global-scrollblock');\r\n    this.document.documentElement.classList.add('print-album-page');\r\n    window.print();\r\n  }\r\n\r\n  @HostListener('window:afterprint', [])\r\n  onWindowAfterPrint() {\r\n    this.document.documentElement.classList.remove('print-album-page');\r\n    this.document.documentElement.classList.add('cdk-global-scrollblock');\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.document.documentElement.classList.remove('cdk-global-scrollblock');\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Album\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"album\">\r\n    <ul class=\"album__list\">\r\n      <li\r\n        *ngFor=\"let item of album; let idx = index\"\r\n        class=\"album__item pagebreak\"\r\n      >\r\n        <img\r\n          *ngIf=\"item.image; else imagePlug\"\r\n          [src]=\"item.image\"\r\n          [alt]=\"'Image ' + (idx + 1)\"\r\n        >\r\n        <div class=\"album__content\">\r\n          <p class=\"album__name\">{{item.nomenclature.name}}</p>\r\n          <p class=\"album__code\">\r\n            {{item.nomenclature.code}}\r\n            <span *ngIf=\"item.numeric\">({{item.numeric}})</span>\r\n          </p>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<ng-template #imagePlug>\r\n  <div class=\"image-plug\">\r\n    <i class=\"pi pi-image\"></i>\r\n  </div>\r\n</ng-template>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    (click)=\"print()\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Print Album\"\r\n    class=\"p-button-success\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'pek-choice-date',\r\n  templateUrl: './choice-date.component.html',\r\n  styleUrls: ['./choice-date.component.scss']\r\n})\r\nexport class ChoiceDateComponent implements OnInit {\r\n  date: Date = new Date();\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ChoiceDateComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: {title: string}\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onChoice() {\r\n    this.dialogRef.close(this.date);\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.title}}\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"calendar\">\r\n    <p-calendar selectionMode=\"single\" [inline]=\"true\" [(ngModel)]=\"date\"></p-calendar>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    (click)=\"onChoice()\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Choice\"\r\n    class=\"p-button-success\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {MatDialogRef} from '@angular/material/dialog';\r\n\r\n@Component({\r\n  selector: 'pek-choice-period-date',\r\n  templateUrl: './choice-period-date.component.html',\r\n  styleUrls: ['./choice-period-date.component.scss']\r\n})\r\nexport class ChoicePeriodDateComponent implements OnInit {\r\n\r\n  startDate: Date;\r\n  endDate: Date;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ChoicePeriodDateComponent>,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  showError() {\r\n    return Boolean(this.startDate && this.endDate && this.startDate.getTime() > this.endDate.getTime())\r\n  }\r\n\r\n  onChoice() {\r\n    const data = {\r\n      startDate: this.startDate,\r\n      endDate: this.endDate,\r\n    };\r\n    this.dialogRef.close(data);\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Choice Period\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"row\">\r\n    <div class=\"col-6\">\r\n      <div class=\"form-group mb-0\">\r\n        <label>Start Date</label>\r\n        <p-calendar\r\n          [(ngModel)]=\"startDate\"\r\n          dataType=\"date\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n          [maxDate]=\"endDate\"\r\n          placeholder=\"Choice Start Date\"\r\n        ></p-calendar>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-6\">\r\n      <div class=\"form-group mb-0\">\r\n        <label>End Date</label>\r\n        <p-calendar\r\n          [(ngModel)]=\"endDate\"\r\n          [minDate]=\"startDate\"\r\n          dataType=\"date\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n          placeholder=\"Choice Start Date\"\r\n        ></p-calendar>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    (click)=\"onChoice()\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Choice\"\r\n    class=\"p-button-success\"\r\n    [disabled]=\"showError() || !startDate || !endDate\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA} from '@angular/material/dialog';\r\n\r\nexport type ConfirmType = 'default' | 'success' | 'danger'\r\n\r\n@Component({\r\n  selector: 'pek-confirm',\r\n  templateUrl: './confirm.component.html',\r\n  styleUrls: ['./confirm.component.scss']\r\n})\r\nexport class ConfirmComponent implements OnInit {\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public modalData: { type: ConfirmType, btnConfirmText: string }) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<mat-dialog-content>\r\n  <div class=\"confirm\">\r\n    <div\r\n      class=\"confirm__icon\"\r\n      [class.confirm__icon_success]=\"modalData.type === 'success'\"\r\n      [class.confirm__icon_danger]=\"modalData.type === 'danger'\"\r\n      [ngSwitch]=\"modalData.type\"\r\n    >\r\n      <i *ngSwitchCase=\"'danger'\" class=\"pi pi-times-circle\"></i>\r\n      <i *ngSwitchCase=\"'default'\" class=\"pi fa-trash-alt\"></i>\r\n      <i *ngSwitchCase=\"'success'\" class=\"pi pi-check-circle\"></i>\r\n    </div>\r\n\r\n    <div class=\"confirm__text\">\r\n      Are you sure?\r\n    </div>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-secondary\"></button>\r\n  <ng-container [ngSwitch]=\"modalData.type\">\r\n    <button\r\n      *ngSwitchCase=\"'danger'\"\r\n      pButton\r\n      type=\"button\"\r\n      [label]=\"modalData.btnConfirmText ? modalData.btnConfirmText : 'Remove'\"\r\n      [mat-dialog-close]=\"true\"\r\n      class=\"p-button-danger\"\r\n    ></button>\r\n    <button\r\n      *ngSwitchCase=\"'success'\"\r\n      pButton\r\n      type=\"button\"\r\n      [label]=\"modalData.btnConfirmText ? modalData.btnConfirmText : 'Confirm'\"\r\n      [mat-dialog-close]=\"true\"\r\n      class=\"p-button-success\"\r\n    ></button>\r\n  </ng-container>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormArray, FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {OrderProduct} from '../../../procurement/models/order-product';\r\nimport {OrderType} from '@shared/components/order-page/order-page.component';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {finalize} from 'rxjs/operators';\r\nimport {PurchaseCategory} from '../../../purchasing/models/purchase-category';\r\nimport {PurchasingCategoryService} from '../../../purchasing/services/purchasing-category.service';\r\nimport {WarehouseProductService} from '../../../warehouse/services/warehouse-product.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-chain',\r\n  templateUrl: './create-chain.component.html',\r\n  styleUrls: ['./create-chain.component.scss']\r\n})\r\nexport class CreateChainComponent implements OnInit {\r\n  isSaving = false;\r\n  isLoadingCategories = true;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    supplier: [null, Validators.required],\r\n    order_products_id: this.fb.array([]),\r\n    can_select_supplier: [false]\r\n  });\r\n\r\n  selectedProducts = {};\r\n\r\n  purchasingCategories: PurchaseCategory[] = [];\r\n  selectedPurchasingCategoryId: number;\r\n  canSelectSupplier: boolean;\r\n\r\n  orderProducts: OrderProduct[] = [];\r\n\r\n  get products() {\r\n    return this.form.get('order_products_id') as FormArray;\r\n  }\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly orderService: OrderService,\r\n    private dialogRef: MatDialogRef<CreateChainComponent>,\r\n    private readonly purchasingCategoryService: PurchasingCategoryService,\r\n    private readonly  warehouseProductService: WarehouseProductService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { products: OrderProduct[], orderType: OrderType }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.orderProducts = this.data.products.map(p => p);\r\n\r\n    this.orderProducts.forEach(p => {\r\n      const product = this.fb.group({\r\n        id: p.id,\r\n        quantity: [p.initial_quantity, [Validators.required, Validators.min(1)]],\r\n      });\r\n\r\n      this.products.push(product);\r\n    });\r\n\r\n    if (this.data.orderType === 'purchase') {\r\n      this.getPurchasingCategories();\r\n    }\r\n  }\r\n\r\n  getPurchasingCategories() {\r\n    this.purchasingCategoryService.getAll().subscribe(categories => {\r\n      this.purchasingCategories = categories;\r\n      this.isLoadingCategories = false;\r\n    });\r\n  }\r\n\r\n  onCreate() {\r\n    this.isSaving = true;\r\n\r\n    const send = this.form.value;\r\n\r\n    if (this.data.orderType === 'purchase') {\r\n      Object.assign(send, {\r\n        purchase_category: this.selectedPurchasingCategoryId,\r\n        accounting_type: 1\r\n      });\r\n    }\r\n    console.log('send', send);\r\n    this.orderService.createChain(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(order => {\r\n      this.dialogRef.close(order);\r\n    });\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.form.get('supplier').patchValue(id);\r\n  }\r\n\r\n  addControl(evt: { data: FormGroup }) {\r\n    const formArray = [this.fb.group({id: [null, [Validators.required]], quantity: [1, [Validators.min(1)]]})];\r\n    evt.data.addControl('warehouse_products', this.fb.array(formArray));\r\n  }\r\n\r\n  removeControl(evt: { data: FormGroup }) {\r\n    evt.data.removeControl('warehouse_products');\r\n  }\r\n\r\n  addWarehouseControl(group: FormGroup) {\r\n    console.log(group);\r\n    const arr = group.get('warehouse_products') as FormArray;\r\n    arr.push(this.fb.group({id: [null, [Validators.required]], quantity: [1, [Validators.min(1)]]}));\r\n  }\r\n\r\n  removeWarehouseControl(group: FormGroup, i: number) {\r\n    const arr = group.get('warehouse_products') as FormArray;\r\n    arr.removeAt(i);\r\n  }\r\n\r\n  onSearchProductsToWarehouse(item: FormControl) {\r\n    this.warehouseProductService.openSearchInWarehouseModal().subscribe(product => {\r\n      this.selectedProducts[product.id] = product;\r\n      item.patchValue(product.id);\r\n    });\r\n  }\r\n\r\n  tenderToggle(value: any) {\r\n    this.canSelectSupplier = value.checked;\r\n    this.form.get('can_select_supplier').setValue(this.canSelectSupplier);\r\n    if (this.canSelectSupplier) {\r\n      this.form.get('supplier').setValue(null);\r\n      this.form.get('supplier').clearValidators();\r\n      this.form.get('supplier').updateValueAndValidity();\r\n      this.form.get('supplier').setErrors(null);\r\n      console.log('remove requirements', this.form);\r\n\r\n    } else {\r\n      this.form.get('supplier').addValidators(Validators.required);\r\n      this.form.get('supplier').updateValueAndValidity();\r\n    }\r\n    console.log('tenderToggle value', this.canSelectSupplier);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Create\r\n    <ng-container [ngSwitch]=\"data.orderType\">\r\n      <ng-container *ngSwitchCase=\"'procurement'\">Procurement</ng-container>\r\n      <ng-container *ngSwitchCase=\"'outsourcing'\">Outsourcing</ng-container>\r\n      <ng-container *ngSwitchCase=\"'purchase'\">Procurement</ng-container>\r\n    </ng-container>\r\n    Chain\r\n  </h2>\r\n</div>\r\n\r\n<div class=\"row\">\r\n  <div [class.col-4]=\"data.orderType === 'purchase'\" [class.col-6]=\"data.orderType !== 'purchase'\">\r\n    <div class=\"form-group\">\r\n      <label>Company*</label>\r\n      <pek-company-picker [isDisabled]=\"canSelectSupplier\" [currentCompanyId]=\"form.get('supplier').value\" (selectCompany)=\"onSelectCompany($event)\"></pek-company-picker>\r\n    </div>\r\n  </div>\r\n  <div class=\"col-4\" *ngIf=\"data.orderType === 'purchase'\">\r\n    <div class=\"form-group\">\r\n      <label>Purchase Category</label>\r\n      <p-dropdown\r\n        *ngIf=\"!isLoadingCategories else spinner\"\r\n        [showClear]=\"true\"\r\n        [options]=\"purchasingCategories\"\r\n        optionValue=\"id\"\r\n        optionLabel=\"name\"\r\n        [(ngModel)]=\"selectedPurchasingCategoryId\"\r\n        placeholder=\"Choice Purchase Category\"\r\n      >\r\n      </p-dropdown>\r\n    </div>\r\n  </div>\r\n  <div  [class.col-4]=\"data.orderType === 'purchase'\" [class.col-6]=\"data.orderType !== 'purchase'\">\r\n    <div class=\"form-group\">\r\n      <label class=\"capitalize\">enable tender supplier required</label>\r\n      <p-checkbox\r\n        class=\"mt-2\"\r\n        id=\"other\"\r\n        [value]=\"canSelectSupplier\"\r\n        [binary]=\"true\"\r\n        (onChange)=\"tenderToggle($event)\"\r\n      ></p-checkbox>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"mt-3\">\r\n    <div class=\"create-chain-table\">\r\n      <form [formGroup]=\"form\">\r\n        <p-table\r\n          selectionMode=\"single\"\r\n          dataKey=\"value.id\"\r\n          [value]=\"products.controls\"\r\n          rowExpandMode=\"multiple\"\r\n          (onRowExpand)=\"addControl($event)\"\r\n          (onRowCollapse)=\"removeControl($event)\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <ng-container *ngIf=\"data.orderType !== 'outsourcing'\">\r\n              <tr>\r\n                <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n                <th style=\"width: 20%\">Code</th>\r\n                <th style=\"width: 20%\">Name</th>\r\n                <th style=\"width: 15%\" class=\"text-center\">Request Quantity</th>\r\n                <th style=\"width: 15%\" class=\"text-center\">Ordered Quantity</th>\r\n                <th style=\"width: 25%\" class=\"text-center\">Quantity To Order</th>\r\n              </tr>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"data.orderType === 'outsourcing'\">\r\n              <tr>\r\n                <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n                <th style=\"width: 15%\">Code</th>\r\n                <th style=\"width: 15%\">Name</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Request Quantity</th>\r\n                <th style=\"width: 15%\" class=\"text-center\">Ordered Quantity</th>\r\n                <th style=\"width: 20%\" class=\"text-center\">Quantity To Order</th>\r\n                <th style=\"width: 20%\" class=\"text-center\">Our Material</th>\r\n              </tr>\r\n            </ng-container>\r\n          </ng-template>\r\n          <ng-template formArrayName=\"order_products_id\" let-product let-i=\"rowIndex\" pTemplate=\"body\">\r\n            <tr [formGroupName]=\"i\">\r\n              <td class=\"text-center\">{{i + 1}}</td>\r\n              <td>\r\n                <div class=\"word-break\">{{orderProducts[i].nomenclature.code}}</div>\r\n              </td>\r\n              <td>\r\n                <div class=\"word-break\">{{orderProducts[i].nomenclature.name}}</div>\r\n              </td>\r\n              <td class=\"text-center\">{{orderProducts[i].initial_quantity}}</td>\r\n              <td class=\"text-center\">{{orderProducts[i].ordered_quantity}}</td>\r\n              <td>\r\n                <div class=\"quantity\">\r\n                  <input pInputText min=\"1\" type=\"number\" formControlName=\"quantity\" class=\"form-control\">\r\n                </div>\r\n              </td>\r\n              <td *ngIf=\"data.orderType === 'outsourcing'\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                  <p-checkbox\r\n                    [pRowToggler]=\"product\"\r\n                    [binary]=\"true\"\r\n                  ></p-checkbox>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"rowexpansion\" let-array>\r\n            <tr [formGroup]=\"array\">\r\n              <td colspan=\"7\" formArrayName=\"warehouse_products\">\r\n                <div class=\"expand-row expand-row_header row\">\r\n                  <div class=\"col-8\">\r\n                    <div class=\"form-group\">\r\n                      <label>Warehouse Product</label>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-2\">\r\n                    <div class=\"form-group\">\r\n                      <label>Quantity</label>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-2\">\r\n                    <button\r\n                      class=\"row-action-button\"\r\n                      type=\"button\"\r\n                      pButton\r\n                      icon=\"pi pi-plus\"\r\n                      (click)=\"addWarehouseControl(array)\"\r\n                    ></button>\r\n                  </div>\r\n                </div>\r\n                <div\r\n                  class=\"expand-row expand-row_content row\"\r\n                  *ngFor=\"let item of array.get('warehouse_products')['controls']; let i=index\"\r\n                  [formGroupName]=\"i\"\r\n                >\r\n                  <div class=\"col-8\">\r\n                    <button\r\n                      class=\"search-button\"\r\n                      type=\"button\"\r\n                      label=\"Search In Warehouse\"\r\n                      pButton\r\n                      icon=\"pi pi-plus\"\r\n                      (click)=\"onSearchProductsToWarehouse(item.controls['id'])\"\r\n                    ></button>\r\n\r\n                    <p class=\"selected-product\" *ngIf=\"item.get('id').value\">\r\n                      ({{selectedProducts[item.controls['id'].value].nomenclature.code}})\r\n                      {{selectedProducts[item.controls['id'].value].nomenclature.name}}\r\n                    </p>\r\n                  </div>\r\n                  <div class=\"col-2\">\r\n                    <div class=\"form-group\">\r\n                      <input\r\n                        [class.disabled]=\"!item.get('id').value\"\r\n                        pInputText\r\n                        formControlName=\"quantity\"\r\n                        min=\"1\"\r\n                        type=\"number\"\r\n                        class=\"form-control\"\r\n                        style=\"text-align: center\"\r\n                      >\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-2\">\r\n                    <button\r\n                      *ngIf=\"i > 0\"\r\n                      class=\"row-action-button remove p-button-danger\"\r\n                      type=\"button\"\r\n                      pButton\r\n                      icon=\"pi pi-times\"\r\n                      (click)=\"removeWarehouseControl(array, i)\"\r\n                    ></button>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n                <span>No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Create\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onCreate()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {CompanyCategoryService} from '../../../crm/services/company-category.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {Status} from '../../../procurement/models/status';\r\nimport {StatusService} from '../../../procurement/services/status.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-status',\r\n  templateUrl: './create-edit-status.component.html',\r\n  styleUrls: ['./create-edit-status.component.scss']\r\n})\r\nexport class CreateEditStatusComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    value: ['', [Validators.required]],\r\n    accounting_type: [<number>null, [Validators.required]],\r\n    description: [''],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly statusService: StatusService,\r\n    private dialogRef: MatDialogRef<CreateEditStatusComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, statusType: number, isAutoStatus: boolean, status: Status }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.patchValue(<any>this.data.status);\r\n      this.form.addControl(<any>'id', this.fb.control(this.data.status.id));\r\n    }\r\n\r\n    this.form.get('accounting_type').patchValue(this.data.statusType);\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createStatus();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editStatus();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createStatus() {\r\n    const send = <any>this.form.value;\r\n    this.statusService.create(send).subscribe({\r\n      next: status => this.dialogRef.close(status),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editStatus() {\r\n    const send = <any>this.form.value;\r\n    this.statusService.update(send).subscribe({\r\n      next: status => this.dialogRef.close(status),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Status\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input\r\n        pInputText\r\n        formControlName=\"value\"\r\n        class=\"form-control\"\r\n        type=\"text\"\r\n        id=\"name\"\r\n      />\r\n    </div>\r\n\r\n    <div class=\"form-group\" *ngIf=\"!data.isAutoStatus\">\r\n      <label for=\"description\">Description</label>\r\n      <textarea\r\n        id=\"description\"\r\n        [rows]=\"2\"\r\n        pInputTextarea\r\n        [autoResize]=\"true\"\r\n        formControlName=\"description\"\r\n      ></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {FormArray, FormBuilder, Validators} from '@angular/forms';\r\nimport {Status} from '../../../procurement/models/status';\r\nimport {StatusService} from '../../../procurement/services/status.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {finalize} from 'rxjs/operators';\r\nimport {OrderType} from '@shared/components/order-page/order-page.component';\r\n\r\n@Component({\r\n  selector: 'pek-edit-order',\r\n  templateUrl: './edit-order.component.html',\r\n  styleUrls: ['./edit-order.component.scss']\r\n})\r\nexport class EditOrderComponent implements OnInit {\r\n  isSaving = false;\r\n  isLoadingStatuses = true;\r\n\r\n  form = this.fb.group({\r\n    promised_date: [null],\r\n    created: [<Date | string>null, Validators.required],\r\n    statuses: this.fb.array(<any[]>[]),\r\n    comment: [''],\r\n    supplier: [<number>null],\r\n  });\r\n\r\n  dropdownStatuses: Status[];\r\n\r\n  get statuses() {\r\n    return this.form.get('statuses') as FormArray;\r\n  }\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<EditOrderComponent>,\r\n    private readonly statusService: StatusService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly orderService: OrderService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { order: Order, orderType: OrderType }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getStatuses();\r\n    this.form.addControl(<any>'id', this.fb.control(this.data.order.id));\r\n\r\n    this.form.get('supplier').patchValue(this.data.order.supplier?.id);\r\n    this.form.get('created').patchValue(new Date(this.data.order.created));\r\n    this.form.get('comment').patchValue(this.data.order.comment);\r\n\r\n    this.data.order.statuses.map(status => this.fb.group({\r\n      id: [status.status.id, Validators.required],\r\n      is_active: status.is_active,\r\n      estimated_date: [new Date(status.estimated_date), Validators.required],\r\n      status: [status.status_id]\r\n    })).forEach(status => {\r\n      this.statuses.push(status);\r\n    });\r\n  }\r\n\r\n  getStatuses() {\r\n    let accountingType: number;\r\n\r\n    switch (this.data.orderType) {\r\n      case 'procurement':\r\n        accountingType = 4;\r\n        break;\r\n      case 'manufacturing': {\r\n        accountingType = 3;\r\n        break;\r\n      }\r\n      case 'outsourcing':\r\n        accountingType = 2;\r\n        break;\r\n      case 'purchase': {\r\n        accountingType = 1;\r\n        break;\r\n      }\r\n    }\r\n\r\n    this.statusService.get([\r\n      {name: 'accounting_type', value: accountingType}\r\n    ]).subscribe(statuses => {\r\n      this.dropdownStatuses = statuses;\r\n      this.isLoadingStatuses = false;\r\n    });\r\n  }\r\n\r\n  onChangeActiveStatus(idx: number) {\r\n    this.statuses.controls.forEach(status => status.get('is_active').patchValue(false));\r\n    this.statuses.at(idx).get('is_active').patchValue(true);\r\n  }\r\n\r\n  onRemoveStatus(idx: number) {\r\n    if (this.statuses.at(idx).get('is_active').value) {\r\n      this.statuses.at(idx - 1).get('is_active').patchValue(true);\r\n    }\r\n\r\n    this.statuses.removeAt(idx);\r\n  }\r\n\r\n  onAddStatus() {\r\n    this.statuses.push(\r\n      this.fb.group({\r\n        id: [null, Validators.required],\r\n        is_active: false,\r\n        estimated_date: [null, Validators.required],\r\n        status: [null]\r\n      })\r\n    );\r\n  }\r\n\r\n  onSave() {\r\n    const send = this.form.value;\r\n\r\n    send.created = this.adapterService.dateAdapter(new Date(send.created));\r\n    delete send.supplier;\r\n\r\n    send.statuses = this.statuses.controls.map(status => {\r\n      return {\r\n        is_active: status.get('is_active').value,\r\n        estimated_date: this.adapterService.dateAdapter(status.get('estimated_date').value),\r\n        status: status.get('id').value,\r\n      };\r\n    });\r\n\r\n    this.isSaving = true;\r\n\r\n    this.orderService.updatePartly(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => {\r\n      this.dialogRef.close(true);\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Change\r\n    <ng-container [ngSwitch]=\"data.orderType\">\r\n      <ng-container *ngSwitchCase=\"'procurement'\">Procurement</ng-container>\r\n      <ng-container *ngSwitchCase=\"'outsourcing'\">Outsourcing</ng-container>\r\n      <ng-container *ngSwitchCase=\"'manufacturing'\">Manufacturing</ng-container>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"data.orderType !== 'manufacturing'\">\r\n      Chain\r\n    </ng-container>\r\n    <ng-container *ngIf=\"data.orderType === 'manufacturing'\">\r\n      Order\r\n    </ng-container>\r\n  </h2>\r\n</div>\r\n\r\n<form [formGroup]=\"form\" class=\"statuses\">\r\n  <div class=\"row\">\r\n    <div class=\"col-6\">\r\n      <div class=\"form-group\">\r\n        <label>Supplier*</label>\r\n        <pek-company-picker\r\n          [isDisabled]=\"true\"\r\n          [currentCompanyId]=\"form.get('supplier').value\"\r\n        ></pek-company-picker>\r\n      </div>\r\n    </div>\r\n    <div class=\"col-6\">\r\n      <div class=\"form-group\">\r\n        <label>Creation Date*</label>\r\n        <p-calendar\r\n          [firstDayOfWeek]=\"1\"\r\n          [showButtonBar]=\"true\"\r\n          formControlName=\"created\"\r\n          inputId=\"basic\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n        ></p-calendar>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <label class=\"label-status\">Statuses</label>\r\n  <div formArrayName=\"statuses\" class=\"statuses-list\">\r\n    <div\r\n      class=\"row status-row\"\r\n      *ngFor=\"let status of statuses.controls; let idx = index\"\r\n      [formGroupName]=\"idx\"\r\n    >\r\n      <div class=\"col-5\">\r\n        <div class=\"form-group\">\r\n          <label>Status*</label>\r\n          <div class=\"statuses-picker\">\r\n            <p-dropdown\r\n              *ngIf=\"!isLoadingStatuses; else spinner\"\r\n              [options]=\"dropdownStatuses\"\r\n              placeholder=\"Select Status\"\r\n              optionLabel=\"value\"\r\n              optionValue=\"id\"\r\n              formControlName=\"id\"\r\n              [showClear]=\"true\"\r\n            >\r\n            </p-dropdown>\r\n          </div>\r\n\r\n          <ng-template #spinner>\r\n            <div class=\"spinner-input\">\r\n              <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n            </div>\r\n          </ng-template>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-5\">\r\n        <div class=\"form-group\">\r\n          <label>Date*</label>\r\n          <p-calendar\r\n            [firstDayOfWeek]=\"1\"\r\n            [showButtonBar]=\"true\"\r\n            formControlName=\"estimated_date\"\r\n            inputId=\"basic\"\r\n            dateFormat=\"dd/mm/yy\"\r\n            [readonlyInput]=\"true\"\r\n          ></p-calendar>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-2\">\r\n        <div class=\"d-flex\">\r\n          <div class=\"form-group\">\r\n            <label>Active</label>\r\n            <p-checkbox\r\n              formControlName=\"is_active\"\r\n              [binary]=\"true\"\r\n              (onChange)=\"onChangeActiveStatus(idx)\"\r\n            ></p-checkbox>\r\n          </div>\r\n          <div class=\"form-group\" *ngIf=\"statuses.controls.length > 1\">\r\n            <button class=\"remove-button\" (click)=\"onRemoveStatus(idx)\">\r\n              <i class=\"pi pi-times\"></i>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"add-button custom-button\">\r\n      <p-button\r\n        icon=\"pi pi-plus\"\r\n        (click)=\"onAddStatus()\"\r\n        type=\"button\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Add Status\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n  <div class=\"row\">\r\n    <div class=\"col-12\">\r\n      <div class=\"form-group\">\r\n        <label for=\"comment\">Comment*</label>\r\n        <textarea\r\n          id=\"comment\"\r\n          [rows]=\"3\"\r\n          pInputTextarea\r\n          [autoResize]=\"true\"\r\n          formControlName=\"comment\"\r\n        ></textarea>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <mat-dialog-content>\r\n\r\n  </mat-dialog-content>\r\n</form>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    [label]=\"'Edit'\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA} from '@angular/material/dialog';\r\nimport {NomenclatureImage} from '@shared/models/nomenclature';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\n\r\n@Component({\r\n  selector: 'pek-image-gallery',\r\n  templateUrl: './image-gallery.component.html',\r\n  styleUrls: ['./image-gallery.component.scss']\r\n})\r\nexport class ImageGalleryComponent implements OnInit {\r\n  images: NomenclatureImage[] = [];\r\n  offsetSlider = 0;\r\n  activeSlideIndex = 1;\r\n  galleryWidth = 1300;\r\n\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { images: NomenclatureImage[], nomenclatureId: number, activeIdx: number },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.nomenclatureId) {\r\n      this.loadingImages();\r\n      return;\r\n    }\r\n\r\n    if (this.data.images) {\r\n      this.images = this.data.images;\r\n      this.activeSlideIndex = this.data.activeIdx;\r\n\r\n      if (this.activeSlideIndex > 1) {\r\n        this.offsetSlider = this.galleryWidth * (this.activeSlideIndex - 1);\r\n      }\r\n\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  loadingImages() {\r\n    this.nomenclatureService.loadImages(this.data.nomenclatureId).subscribe(images => {\r\n      this.images = images;\r\n      this.isLoading = false;\r\n    });\r\n\r\n    this.activeSlideIndex = 1;\r\n  }\r\n\r\n  onSlideNext() {\r\n    if (this.activeSlideIndex === this.images.length) {\r\n      this.offsetSlider = 0;\r\n      this.activeSlideIndex = 1;\r\n    } else {\r\n      this.offsetSlider = this.galleryWidth * this.activeSlideIndex;\r\n      this.activeSlideIndex++;\r\n    }\r\n  }\r\n\r\n  onSlidePrev() {\r\n    if (this.activeSlideIndex === 1) {\r\n      this.offsetSlider = this.galleryWidth * (this.images.length - 1);\r\n      this.activeSlideIndex = this.images.length;\r\n    } else {\r\n      this.offsetSlider = (this.activeSlideIndex - 2) * this.galleryWidth;\r\n      this.activeSlideIndex--;\r\n    }\r\n  }\r\n}\r\n","<div class=\"image-gallery\" *ngIf=\"!isLoading && images.length > 0\">\r\n  <div class=\"image-gallery__wrapper\">\r\n    <div\r\n      class=\"image-gallery__inner\"\r\n      [style.width]=\"galleryWidth * images.length + 'px'\"\r\n      [style.transform]=\"'translateX(-' + offsetSlider + 'px)'\"\r\n    >\r\n      <div class=\"image-gallery__slide\" *ngFor=\"let image of images; let idx = index\">\r\n        <img [src]=\"image.image\" [alt]=\"'  ' + idx + 1\">\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <i\r\n    *ngIf=\"images.length > 1\"\r\n    class=\"pi pi-chevron-left image-gallery__btn image-gallery__btn_prev\"\r\n    (click)=\"onSlidePrev()\"\r\n  >\r\n  </i>\r\n  <i\r\n    *ngIf=\"images.length > 1\"\r\n    class=\"pi pi-chevron-right image-gallery__btn image-gallery__btn_next\"\r\n    (click)=\"onSlideNext()\"\r\n  >\r\n  </i>\r\n</div>\r\n\r\n<div class=\"image-gallery__none\" *ngIf=\"isLoading\">\r\n  <i class=\"pi pi-images\"></i>\r\n  <p>Images are loading...</p>\r\n</div>\r\n\r\n<div class=\"image-gallery__none\" *ngIf=\"!isLoading && images.length === 0\">\r\n  <i class=\"pi pi-images\"></i>\r\n  <p>There are no Images</p>\r\n</div>\r\n","import {AfterViewInit, Component, Inject, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {fromEvent, Subject, takeUntil} from 'rxjs';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\nimport {Category} from '../../../product-structure/models/category';\r\n\r\n@Component({\r\n  selector: 'pek-nomenclature-picker-modal',\r\n  templateUrl: './nomenclature-picker-modal.component.html',\r\n  styleUrls: ['./nomenclature-picker-modal.component.scss']\r\n})\r\nexport class NomenclaturePickerModalComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n\r\n  countNomenclatures = 0;\r\n\r\n  isLoading = true;\r\n  isStartOnePage = false;\r\n  nomenclatures: Nomenclature[] = [];\r\n  selectedNomenclature: Nomenclature;\r\n\r\n  nomenclatureType = ENomenclatureType;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    page: [1],\r\n    name: [''],\r\n    code: [''],\r\n    type: [null],\r\n    categories: [null],\r\n  });\r\n\r\n  queryKey = 'name:/code:/type:null/categories:null';\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n    {name: 'paginated', value: true},\r\n  ];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private dialogRef: MatDialogRef<NomenclaturePickerModalComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ENomenclatureType }\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    setTimeout(() => {\r\n      fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n        .pipe(\r\n          tap(() => this.selectedNomenclature = null),\r\n          map(() => this.searchBoxName.nativeElement.value),\r\n          debounceTime(350),\r\n        ).subscribe(() => {\r\n        this.searchNomenclatures();\r\n      });\r\n\r\n      fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n        .pipe(\r\n          tap(() => this.selectedNomenclature = null),\r\n          map(() => this.searchBoxCode.nativeElement.value),\r\n          debounceTime(350),\r\n        ).subscribe(() => {\r\n        this.searchNomenclatures();\r\n      });\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type !== null) {\r\n      this.searchForm.get('type').patchValue(this.data.type);\r\n\r\n      this.searchNomenclatures();\r\n      return;\r\n    }\r\n\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  getNomenclatures() {\r\n    this.nomenclatureService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatures = nomenclatures.results;\r\n      this.countNomenclatures = nomenclatures.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  searchNomenclatures() {\r\n    this.isLoading = true;\r\n    this.destroy$.next(true);\r\n    this.selectedNomenclature = null;\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}/type:${this.searchForm.get('type').value}/categories:${this.searchForm.get('categories').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.searchForm.get('page').value},\r\n      {name: 'paginated', value: true},\r\n    ];\r\n\r\n    if (this.searchForm.get('name').value) {\r\n      this.query.push({\r\n        name: 'name',\r\n        value: this.searchForm.get('name').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('code').value) {\r\n      this.query.push({\r\n        name: 'code',\r\n        value: this.searchForm.get('code').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('type').value !== null) {\r\n      this.query.push({\r\n        name: 'type',\r\n        value: this.searchForm.get('type').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('categories').value !== null) {\r\n      this.query.push({\r\n        name: 'categories',\r\n        value: this.searchForm.get('categories').value\r\n      });\r\n    }\r\n\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchNomenclatures();\r\n    }\r\n  }\r\n\r\n  selectNomenclatureType(type: ENomenclatureType) {\r\n    this.searchForm.get('type').patchValue(type);\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  onSelectNomenclature() {\r\n    this.dialogRef.close(this.selectedNomenclature);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    if (category) {\r\n      this.searchForm.get('categories').patchValue(category.id)\r\n    } else {\r\n      this.searchForm.get('categories').patchValue(null)\r\n    }\r\n\r\n    this.searchNomenclatures();\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">Choice Nomenclature</h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div\r\n    class=\"nomenclature-picker-modal\"\r\n  >\r\n    <div class=\"nomenclature-picker-modal__form\">\r\n      <form [formGroup]=\"searchForm\">\r\n        <div\r\n          class=\"form-box form-box_3\"\r\n        >\r\n          <div class=\"form-group\">\r\n            <label for=\"code\">Code</label>\r\n            <input type=\"text\" id=\"code\" pInputText formControlName=\"code\" #searchBoxCode>\r\n          </div>\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Name</label>\r\n            <input type=\"text\" id=\"name\" pInputText formControlName=\"name\" #searchBoxName>\r\n          </div>\r\n          <div class=\"form-group\" *ngIf=\"data.type === null\">\r\n            <label>Type</label>\r\n            <pek-nomenclature-type-picker\r\n              (choiceNomenclatureType)=\"selectNomenclatureType($event)\"\r\n            ></pek-nomenclature-type-picker>\r\n          </div>\r\n\r\n          <div class=\"form-group\" *ngIf=\"data.type === nomenclatureType.PURCHASED\">\r\n            <label>Category</label>\r\n            <pek-product-category-picker (choiceCategory)=\"onSelectCategory($event)\"></pek-product-category-picker>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        [value]=\"nomenclatures\"\r\n        [rows]=\"10\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selectedNomenclature\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 7%\">#</th>\r\n            <th style=\"width: 22%\">Code</th>\r\n            <th style=\"width: 30%\">Name</th>\r\n            <th style=\"width: 10%\">UOM</th>\r\n            <th style=\"width: 15%;\">Technology</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Category</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n          <tr\r\n            [pSelectableRow]=\"nomenclature\"\r\n            [pSelectableRowDisabled]=\"nomenclature.approved === '0' && nomenclature.type === '0'\"\r\n          >\r\n            <td style=\"width: 7%\" class=\"text-center\">{{(this.searchForm.get('page').value - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 22%\">{{nomenclature.code}}</td>\r\n            <td style=\"width: 30%\">\r\n              <span *ngIf=\"nomenclature.approved === '0' && nomenclature.type === '0'\" class=\"badge badge_warning\">NEW</span>\r\n              {{nomenclature.name}}\r\n            </td>\r\n            <td\r\n              style=\"width: 10%\">{{nomenclature.category?.unit_of_measure?.symbol ? nomenclature.category?.unit_of_measure?.symbol : 'Pcs' }}</td>\r\n            <td style=\"width: 15%\">\r\n              <div *ngFor=\"let technology of nomenclature.technologies\">\r\n                {{technology.name}}\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{nomenclature.category?.name}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n\r\n      <div class=\"pagination-preloader\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <p-paginator\r\n    #paginator\r\n    [class.hide]=\"nomenclatures.length === 0\"\r\n    [rows]=\"10\"\r\n    [totalRecords]=\"countNomenclatures\"\r\n    (onPageChange)=\"paginate($event)\"\r\n  >\r\n  </p-paginator>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [disabled]=\"!selectedNomenclature\"\r\n    [label]=\"'Choice'\"\r\n    (click)=\"onSelectNomenclature()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\n\r\n@Component({\r\n  selector: 'pek-paste-image',\r\n  templateUrl: './paste-image.component.html',\r\n  styleUrls: ['./paste-image.component.scss']\r\n})\r\nexport class PasteImageComponent implements OnInit {\r\n\r\n  form: FormGroup = this.fb.group({\r\n    name: [null]\r\n  });\r\n  file: File;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<PasteImageComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { imageSrc: string | ArrayBuffer, file: File }\r\n  ) {\r\n    this.file = data.file;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  acceptChanges() {\r\n    if (this.form.get('name').value) {\r\n      const name = this.form.get('name').value;\r\n      this.file = this.renameFile(this.file, name);\r\n    }\r\n    this.dialogRef.close(this.file);\r\n  }\r\n\r\n  renameFile(originalFile, newName): File {\r\n    const splited = originalFile.name.split('.');\r\n    const extension = splited[splited.length - 1];\r\n    return new File([originalFile], newName + '.' + extension, {\r\n      type: originalFile.type,\r\n      lastModified: originalFile.lastModified,\r\n    });\r\n  }\r\n}\r\n","<div class=\"paste-image\">\r\n  <img [src]=\"data.imageSrc\" alt=\"\">\r\n</div>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      label=\"Cancel\"\r\n      [mat-dialog-close]=\"false\"\r\n      class=\"p-button-danger mr-3\"\r\n    ></button>\r\n  <form\r\n    [formGroup]=\"form\"\r\n    class=\"mr-3\"\r\n  >\r\n    <input class=\"form-control\" placeholder=\"Change File Name\" formControlName=\"name\" pInputText>\r\n  </form>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      label=\"Paste Image\"\r\n      (click)=\"acceptChanges()\"\r\n      class=\"p-button-success\"\r\n    ></button>\r\n</mat-dialog-actions>\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { take } from 'rxjs/operators';\r\nimport {LocatorService} from '../../../../warehouse/services/locator.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ListService} from '../../../../warehouse/services/list.service';\r\n\r\n@Component({\r\n  selector: 'app-complete-list',\r\n  templateUrl: './complete-list.component.html',\r\n  styleUrls: ['./complete-list.component.scss']\r\n})\r\nexport class CompleteListComponent implements OnInit {\r\n\r\n  groupLocators = [];\r\n  locatorsMap = {};\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private locatorService: LocatorService,\r\n    private dialogRef: MatDialogRef<CompleteListComponent>,\r\n    fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: any,\r\n    private listService: ListService,\r\n    private adapterService:AdapterService) {\r\n    if(this.data.type=='edit'){\r\n      this.form = fb.group({\r\n        locator: [null, Validators.required]\r\n      });\r\n      this.locatorService.getAll().pipe(take(1)).subscribe(res => {\r\n\r\n        res.forEach(element => {\r\n          if (this.locatorsMap[element.warehouse.id]) {\r\n            this.locatorsMap[element.warehouse.id].items.push({ label: element.name + ' R:' + element.row + ' Col:' + element.column + ' Sh:' + element.shelf + ' Pl:' + element.place, value: element.id });\r\n          } else {\r\n            this.locatorsMap[element.warehouse.id] = {};\r\n            this.locatorsMap[element.warehouse.id].label = element.warehouse.name;\r\n            this.locatorsMap[element.warehouse.id].value = element.warehouse.id;\r\n            this.locatorsMap[element.warehouse.id].items = [];\r\n            this.locatorsMap[element.warehouse.id].items.push({ label: element.name + ' R:' + element.row + ' Col:' + element.column + ' Sh:' + element.shelf + ' Pl:' + element.place, value: element.id });\r\n          }\r\n        })\r\n        Object.keys(this.locatorsMap).forEach(id => {\r\n          this.groupLocators.push(this.locatorsMap[id])\r\n        })\r\n        this.groupLocators = this.groupLocators.filter(x => { return x.value == 5 || x.value == 6 || x.value == 7 })\r\n      })\r\n    }\r\n\r\n    if(this.data.type=='date'){\r\n      this.form = fb.group({\r\n        id: [this.data.entity.list, Validators.required],\r\n        completed: [new Date(this.data.entity.completed), Validators.required]\r\n      });\r\n    }\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  complete() {\r\n    this.listService.process(this.form.value, this.data.entity.id).subscribe(process => {\r\n      this.dialogRef.close(true)\r\n    })\r\n  }\r\n\r\n  setDate() {\r\n    let send = this.form.value;\r\n    send.completed = this.adapterService.dateTimeAdapter(this.form.value.completed);\r\n    this.listService.updatePartly(send).subscribe(process => {\r\n      this.dialogRef.close(true)\r\n    })\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    <span *ngIf=\"data.type==='edit'\">Set Locator</span>\r\n    <span *ngIf=\"data.type==='date'\">Set Date</span>\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content class=\"overflow-visible\">\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\" *ngIf=\"data.type==='edit'\">\r\n      <label for=\"locator\">Locator</label>\r\n      <p-dropdown formControlName=\"locator\" [options]=\"groupLocators\" id=\"locator\" [filter]=\"true\"\r\n                  placeholder=\"Select Locator\" [group]=\"true\">\r\n        <ng-template let-group pTemplate=\"group\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <span>{{group.label}}</span>\r\n          </div>\r\n        </ng-template>\r\n      </p-dropdown>\r\n    </div>\r\n    <div class=\"form-group\" *ngIf=\"data.type==='date'\">\r\n      <label for=\"completed\">Locator</label>\r\n      <p-calendar formControlName=\"completed\" dataType=\"date\" dateFormat=\"dd/mm/yy\" [readonlyInput]=\"true\"></p-calendar>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n<mat-dialog-actions class=\" d-flex justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n\r\n  <button\r\n    *ngIf=\"data.type==='edit'\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Complete\"\r\n    class=\"p-button-success\"\r\n    (click)=\"complete()\"\r\n  ></button>\r\n\r\n  <button\r\n    *ngIf=\"data.type==='date'\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Set Date\"\r\n    class=\"p-button-success\"\r\n    (click)=\"setDate()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, FormGroup} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {finalize, take} from 'rxjs/operators';\r\nimport {ListService} from '../../../../warehouse/services/list.service';\r\nimport {ListProductService} from '../../../../warehouse/services/list-product.service';\r\n\r\n@Component({\r\n  selector: 'app-list-products',\r\n  templateUrl: './list-products.component.html',\r\n  styleUrls: ['./list-products.component.scss']\r\n})\r\n\r\nexport class ListProductsComponent implements OnInit {\r\n\r\n  form: FormGroup;\r\n  isSerial = false;\r\n  isLoading = true;\r\n\r\n  errorStr = '';\r\n\r\n  serialsWarehouse: { id: number, label: string }[] = [];\r\n  serialsProduction: { id: number, label: string }[] = [];\r\n\r\n  constructor(\r\n    private readonly listService: ListService,\r\n    private dialogRef: MatDialogRef<ListProductsComponent>,\r\n    fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA)\r\n    public data: any,\r\n    private listProductService: ListProductService) {\r\n\r\n    console.log(this.data);\r\n    this.form = fb.group({\r\n      id: [data.entity.id],\r\n      isWarehouse: ['0'],\r\n      actual_quantity: [data.entity.actual_quantity],\r\n    });\r\n\r\n    if (this.data.entity.nomenclature.bulk_or_serial === '1') {\r\n      this.form.addControl('serial_product_ids', new FormControl([]));\r\n      this.form.addControl('root_serial_numbers_in_production', new FormControl([]));\r\n      // this.form.removeControl('actual_quantity');\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.entity.nomenclature.bulk_or_serial === '1') {\r\n      this.loadInfo();\r\n    }\r\n  }\r\n\r\n  edit() {\r\n    const send = this.form.value;\r\n\r\n    if (this.data.entity.nomenclature.bulk_or_serial === '1') {\r\n\r\n      if (send.isWarehouse === '0') {\r\n        delete send.root_serial_numbers_in_production;\r\n        send.actual_quantity = this.form.value.serial_product_ids.length;\r\n        send.serial_product_ids = this.form.get('serial_product_ids').value;\r\n      } else if (send.isWarehouse === '1') {\r\n        delete send.serial_product_ids;\r\n        delete send.actual_quantity;\r\n        send.root_serial_numbers_in_production = this.form.get('root_serial_numbers_in_production').value;\r\n        send.root_serial_numbers_in_production = send.root_serial_numbers_in_production.map(val => +val);\r\n      }\r\n    } else {\r\n      delete send.root_serial_numbers_in_production;\r\n    }\r\n    delete send.isWarehouse;\r\n\r\n    console.log(send);\r\n    this.listProductService.updatePartly(this.form.value).pipe(take(1)).subscribe(res => this.dialogRef.close(res));\r\n  }\r\n\r\n  loadInfo() {\r\n    this.listService.getNomenclatureInfo(this.data.entity.nomenclature.id).pipe(\r\n      finalize(() => {\r\n        this.isLoading = false;\r\n        this.isSerial = true;\r\n      })\r\n    ).subscribe({\r\n      next: (res) => {\r\n        if (res) {\r\n          console.log(res);\r\n          res.warehouse_products.forEach(item => {\r\n            this.serialsWarehouse.push(\r\n              {id: item.id, label: item.serial_number.type_with_number ? item.serial_number.type_with_number : item.serial_number.id}\r\n            );\r\n          });\r\n\r\n          res.serial_numbers_in_production.forEach(item => {\r\n            this.serialsProduction.push(\r\n              {id: item.id, label: item.type_with_number ? item.type_with_number : item.id}\r\n            );\r\n          });\r\n        }\r\n      },\r\n      error: (err) => {\r\n        this.errorStr = 'There are no warehouse products on stock and in production';\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    <span>Edit Actual Quantity</span>\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content class=\"overflow-visible\">\r\n  <form [formGroup]=\"form\" *ngIf=\"!errorStr\">\r\n    <div class=\"form-group\"\r\n         *ngIf=\"data.entity.available_serial_warehouse_products.length == 0 && data.entity.nomenclature.bulk_or_serial === '0'\">\r\n      <label>Actual Quantity</label>\r\n      <input formControlName=\"actual_quantity\" pInputText class=\"form-control\" type=\"number\">\r\n    </div>\r\n    <div *ngIf=\"(serialsWarehouse.length > 0 || serialsProduction.length > 0) && isSerial && !isLoading\">\r\n      <div class=\"d-flex mb-3\">\r\n        <div class=\"ol-6 mr-2\">\r\n          <input class=\"mr-2\" id=\"own\" type=\"radio\" value=\"0\" name=\"isWarehouse\" formControlName=\"isWarehouse\">\r\n          <label for=\"own\">Warehouses</label>\r\n        </div>\r\n        <div class=\"col-6\" *ngIf=\"data.entity.nomenclature.type === '1'\">\r\n          <input class=\"mr-2\" id=\"outsource\"  type=\"radio\" value=\"1\" name=\"isWarehouse\"\r\n                 formControlName=\"isWarehouse\">\r\n          <label for=\"outsource\">Production</label>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\" *ngIf=\"form.get('isWarehouse').value === '0'\">\r\n        <div *ngIf=\"serialsWarehouse.length > 0 && isSerial && !isLoading\">\r\n          <label>Warehouses Serial Numbers</label>\r\n          <p-multiSelect formControlName=\"serial_product_ids\" [options]=\"serialsWarehouse\"\r\n                         optionLabel=\"label\" optionValue=\"id\"></p-multiSelect>\r\n        </div>\r\n\r\n        <div *ngIf=\"serialsWarehouse.length === 0 && isSerial && !isLoading\" class=\"mb-2\">\r\n          <div class=\"empty\">Serial Numbers None</div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"form-group\" *ngIf=\"form.get('isWarehouse').value === '1'\">\r\n        <div *ngIf=\"serialsProduction.length > 0 && isSerial && !isLoading\">\r\n          <label>Production Serial Numbers</label>\r\n          <p-multiSelect formControlName=\"root_serial_numbers_in_production\" [options]=\"serialsProduction\"\r\n                         optionLabel=\"label\" optionValue=\"id\"></p-multiSelect>\r\n        </div>\r\n\r\n        <div *ngIf=\"serialsProduction.length === 0 && isSerial && !isLoading\" class=\"mb-2\">\r\n          <div class=\"empty\">Serial Numbers None</div>\r\n        </div>\r\n      </div>\r\n\r\n    </div>\r\n  </form>\r\n\r\n  <div *ngIf=\"errorStr\">\r\n    <div class=\"empty mb-2\">{{errorStr}}</div>\r\n  </div>\r\n</mat-dialog-content>\r\n<mat-dialog-actions class=\" d-flex justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n<!--  <div>-->\r\n<!--    <button (click)=\"edit()\" type=\"button\" class=\"btn btn-success ml-2\" [disabled]=\"errorStr\">Edit</button>-->\r\n<!--  </div>-->\r\n\r\n  <button\r\n    *ngIf=\"data.type==='edit'\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Edit\"\r\n    class=\"p-button-success\"\r\n    [disabled]=\"errorStr\"\r\n    (click)=\"edit()\"\r\n  ></button>\r\n\r\n\r\n</mat-dialog-actions>\r\n","import {Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {MatDialogRef} from '@angular/material/dialog';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {WarehouseProduct} from '../../../warehouse/models/warehouse-product';\r\nimport {environment} from '@env/environment';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {WarehouseProductService} from '../../../warehouse/services/warehouse-product.service';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {debounceTime} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-search',\r\n  templateUrl: './warehouse-search.component.html',\r\n  styleUrls: ['./warehouse-search.component.scss']\r\n})\r\nexport class WarehouseSearchComponent implements OnInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  selectedNode;\r\n  searchResult: WarehouseProduct[] = [];\r\n  tableScrollHeight = '29.75rem';\r\n  link = environment.link_url + 'dash/';\r\n  isLoading = false;\r\n  isShowAll = false;\r\n  countProducts: number;\r\n  isStartOnePage = false;\r\n  formChanged: Subject<void> = new Subject<void>();\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    code: [null],\r\n    warehouse: [null],\r\n    category: [null],\r\n    locator: [null],\r\n    type: [null],\r\n    page: [1],\r\n  });\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n    {name: 'paginated', value: true},\r\n    {name: 'at_area', value: false}\r\n  ];\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<WarehouseSearchComponent>,\r\n    private productService: WarehouseProductService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.formChanged.pipe(debounceTime(500), takeUntil(this.destroy$)).subscribe(() => {\r\n      this.searchProducts();\r\n    });\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    if (category) {\r\n      this.searchForm.get('category').patchValue(category.id);\r\n    } else {\r\n      this.searchForm.get('category').patchValue(null);\r\n    }\r\n  }\r\n\r\n  searchProducts() {\r\n    this.isLoading = true;\r\n    this.selectedNode = null;\r\n\r\n    this.query = [];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query = [\r\n        {name: 'paginated', value: 'true'},\r\n        // {name: 'type', value: '0'},\r\n        {name: 'page', value: this.searchForm.get('page').value},\r\n      ];\r\n    }\r\n\r\n    this.query.push({name: 'at_area', value: false});\r\n\r\n    if (this.searchForm.get('name').value) this.query.push({\r\n      name: 'name',\r\n      value: this.searchForm.get('name').value.replace(/\\+/g, '%2b')\r\n    });\r\n\r\n    if (this.searchForm.get('code').value) this.query.push({name: 'code', value: this.searchForm.get('code').value});\r\n\r\n    if (this.searchForm.get('type').value) this.query.push({name: 'type', value: this.searchForm.get('type').value});\r\n\r\n    if (this.searchForm.get('warehouse').value) this.query.push({\r\n      name: 'warehouse',\r\n      value: this.searchForm.get('warehouse').value\r\n    });\r\n\r\n    if (this.searchForm.get('locator').value) this.query.push({\r\n      name: 'locator',\r\n      value: this.searchForm.get('locator').value\r\n    });\r\n    console.log('this.searchForm.get(\\'locator\\').value', this.searchForm.get('locator').value);\r\n\r\n    if (this.searchForm.get('category').value) this.query.push({\r\n      name: 'category',\r\n      value: this.searchForm.get('category').value\r\n    });\r\n\r\n    if (!this.isShowAll) {\r\n      this.getProductForPagination();\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.getProducts();\r\n    }\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchProducts();\r\n    }\r\n  }\r\n\r\n  getProductForPagination() {\r\n    this.productService.getGroupedPagination(this.query).subscribe(response => {\r\n      response.results.forEach((product: any, idx) => {\r\n        if (!product.nomenclature) {\r\n          product.nomenclature = {\r\n            id: product.nomenclature_id,\r\n            code: product.code,\r\n            name: product.name,\r\n            type: product.type,\r\n            category: product.category,\r\n            description: product.description,\r\n          };\r\n        }\r\n\r\n        product.checkedForGeneration = false;\r\n        product.uid = idx;\r\n      });\r\n\r\n      this.searchResult = response.results;\r\n      this.countProducts = response.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.searchProducts();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.searchProducts();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  private getProducts() {\r\n    this.productService.getGrouped(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(response => {\r\n      response.forEach((product: any, idx) => {\r\n        if (!product.nomenclature) {\r\n          product.nomenclature = {\r\n            id: product.nomenclature_id,\r\n            code: product.code,\r\n            name: product.name,\r\n            type: product.type,\r\n            category: product.category,\r\n            description: product.description,\r\n          };\r\n        }\r\n\r\n        product.checkedForGeneration = false;\r\n        product.uid = idx;\r\n      });\r\n\r\n      this.searchResult = response;\r\n      this.countProducts = response.length;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  locatorSelected($event: number) {\r\n    this.searchForm.get('warehouse').setValue($event);\r\n  }\r\n\r\n  select() {\r\n    this.dialogRef.close(this.selectedNode);\r\n  }\r\n}\r\n","<mat-dialog-content>\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"warehouse-items\">\r\n        <i class=\"pi pi-times close-icon\" [mat-dialog-close]=\"false\"></i>\r\n        <div class=\"warehouse-items__left\">\r\n          <div class=\"form-group\">\r\n            <pek-categories-tree-picker (categorySelected)=\"onSelectCategory($event); formChanged.next()\"></pek-categories-tree-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-items__right\">\r\n          <div class=\"page__table\">\r\n            <div class=\"filters-visibility\">\r\n              <div class=\"filters-visibility__header\"></div>\r\n              <form\r\n                [formGroup]=\"searchForm\"\r\n                class=\"warehouse-items__form mb-3\"\r\n              >\r\n                <div class=\"row\">\r\n                  <div class=\"col-4\">\r\n                    <div class=\"form-group\">\r\n                      <label>Code</label>\r\n                      <input class=\"form-control\" (ngModelChange)=\"formChanged.next()\" formControlName=\"code\" pInputText>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-4\">\r\n                    <div class=\"form-group\">\r\n                      <label>Name</label>\r\n                      <input class=\"form-control\" (ngModelChange)=\"formChanged.next()\" formControlName=\"name\" pInputText>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-4\">\r\n                    <div class=\"row\">\r\n                      <div class=\"col-6\">\r\n                        <div class=\"form-group\">\r\n                          <label>Warehouses</label>\r\n                          <pek-warehouse-picker (selectWarehouse)=\"this.searchForm.get('warehouse').setValue($event); formChanged.next()\"></pek-warehouse-picker>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col-6\">\r\n                        <div class=\"form-group\">\r\n                          <label>Locator</label>\r\n                          <pek-locator-picker\r\n                            [warehouseId]=\"searchForm.get('warehouse').value\"\r\n                            [isAllLocators]=\"false\"\r\n                            [isDisabled]=\"true\"\r\n                            (selectLocator)=\"locatorSelected($event); formChanged.next()\"\r\n                          ></pek-locator-picker>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-4\">\r\n                        <div class=\"form-group\">\r\n                          <label>Type</label>\r\n                          <pek-nomenclature-type-picker\r\n                            [currentNomenclatureType]=\"this.searchForm.get('type').value\"\r\n                            (choiceNomenclatureType)=\"this.searchForm.get('type').setValue($event); formChanged.next()\"\r\n                          ></pek-nomenclature-type-picker>\r\n                        </div>\r\n                  </div>\r\n                  <div class=\"col-6\">\r\n                        <div class=\"form-group\">\r\n                        </div>\r\n                  </div>\r\n                  <div class=\"col-2\">\r\n                        <div class=\"form-group\">\r\n                          <label>&nbsp;</label>\r\n                          <button\r\n                            pButton\r\n                            type=\"button\"\r\n                            class=\"p-button-success\"\r\n                            [label]=\"'Select'\"\r\n                            [disabled]=\"!this.selectedNode\"\r\n                            (click)=\"select()\"\r\n                          ></button>\r\n                        </div>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </div>\r\n            <div class=\"table-pagination-preloader\">\r\n              <p-table\r\n                #dt\r\n                selectionMode=\"single\"\r\n                [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n                dataKey=\"uid\"\r\n                [scrollable]=\"true\"\r\n                [rows]=\"10\"\r\n                [(selection)]=\"selectedNode\"\r\n                [value]=\"searchResult\"\r\n              >\r\n                <ng-template pTemplate=\"header\">\r\n                  <tr>\r\n                    <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n                    <th style=\"width: 15%\">Code</th>\r\n                    <th style=\"width: 15%\">Name</th>\r\n                    <th class=\"text-center\" style=\"width: 10%\">Quantity</th>\r\n                    <th class=\"text-center\" style=\"width: 6%\">UOM</th>\r\n                    <th class=\"text-center\" style=\"width: 13%\">Category</th>\r\n                    <th class=\"text-center\" style=\"width: 12%\">Warehouse</th>\r\n                    <th class=\"text-center\" style=\"width: 14%\">Locator</th>\r\n                  </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n                  <tr [pSelectableRow]=\"product\" [pRowToggler]=\"product\">\r\n                    <td style=\"width: 5%\" class=\"text-center\">\r\n                      {{(this.searchForm.get('page').value - 1) * 10 + i + 1}}\r\n                    </td>\r\n                    <td style=\"width: 15%\">\r\n                      {{product.nomenclature.code}}\r\n                    </td>\r\n                    <td style=\"width: 15%\" class=\"in-use\">\r\n                      <b *ngIf=\"product.nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n                      <b *ngIf=\"product.nomenclature.has_technical_equipment\">(T)</b>\r\n                      {{product.nomenclature.name}}\r\n                      <span class=\"text-danger\" *ngIf=\"product.used_by_order && product.used_by_order.length > 0\">\r\n                      <b>In Use</b>\r\n\r\n                      <div class=\"in-use-info\">\r\n                        <p>In use by orders:</p>\r\n                        <div *ngFor=\"let order of product.used_by_order\">\r\n                          <a *ngIf=\"order.accounting_type === 3\" [href]=\"link + 'production/orders/order/' + order.order_id\"\r\n                             target=\"_blank\">{{order.order_id}}\r\n                          </a>\r\n                          <a *ngIf=\"order.accounting_type === 2\" [href]=\"link + 'outsource/outsource-chain/products/' + order.order_id\"\r\n                             target=\"_blank\">{{order.order_id}}\r\n                          </a>\r\n                        </div>\r\n                      </div>\r\n                    </span>\r\n                    </td>\r\n                    <td style=\"width: 10%\" class=\"text-center\">\r\n                      {{product.total_locator_quantity}}\r\n                    </td>\r\n                    <td style=\"width: 6%\" class=\"text-center\">\r\n                      <ng-container *ngIf=\"product.nomenclature.category || product.nomenclature.root_category\">\r\n                        <ng-container *ngIf=\"product.nomenclature.category\">\r\n                          {{product.nomenclature.category?.unit_of_measure?.symbol ? product.nomenclature.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                        </ng-container>\r\n                        <ng-container *ngIf=\"product.nomenclature.root_category\">\r\n                          {{product.nomenclature.root_category?.unit_of_measure?.symbol ? product.nomenclature.root_category?.unit_of_measure?.symbol : 'Pcs' }}\r\n                        </ng-container>\r\n                      </ng-container>\r\n\r\n                      <span *ngIf=\"!product.nomenclature.category && !product.nomenclature.root_category\">\r\n                    Pcs\r\n                  </span>\r\n                    </td>\r\n                    <td style=\"width: 13%\" class=\"text-center\">\r\n                      {{product.nomenclature.category?.name}}\r\n                      {{product.nomenclature.root_category?.name}}\r\n                    </td>\r\n                    <td style=\"width: 12%\" class=\"text-center\">\r\n                      <ng-container\r\n                        *ngIf=\"product.locator\">\r\n                        {{product.locator.warehouse.name}}\r\n                      </ng-container>\r\n                    </td>\r\n                    <td style=\"width: 14%\" class=\"text-center\">\r\n                      <ng-container *ngIf=\"product.locator\">\r\n                        {{product.locator.name}}\r\n                      </ng-container>\r\n                      <span class=\"d-block\" *ngIf=\"product.locator\"> R: {{product.locator.row}} Col:\r\n                        {{product.locator.column}} Sh: {{product.locator.shelf}} Pl:\r\n                        {{product.locator.place}}\r\n                  </span>\r\n                    </td>\r\n                  </tr>\r\n                </ng-template>\r\n                <ng-template pTemplate=\"emptymessage\">\r\n                  <tr>\r\n                    <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n                      <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                      <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                    </td>\r\n                  </tr>\r\n                </ng-template>\r\n              </p-table>\r\n              <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n                <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              </div>\r\n            </div>\r\n            <div\r\n              class=\"paginator-wrapper\"\r\n              *ngIf=\"!isShowAll\"\r\n              [class.paginator-wrapper_hide]=\"searchResult.length === 0\"\r\n            >\r\n              <p-paginator\r\n                #paginator\r\n                [rows]=\"10\"\r\n                [totalRecords]=\"countProducts\"\r\n                (onPageChange)=\"paginate($event)\">\r\n              </p-paginator>\r\n              <p-button\r\n                (click)=\"onShowAll()\"\r\n                class=\"paginator-all\"\r\n                type=\"button\"\r\n                styleClass=\"p-button-text\"\r\n              >\r\n                All\r\n              </p-button>\r\n            </div>\r\n            <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n              <p-button\r\n                type=\"button\"\r\n                (click)=\"onShowPartial()\"\r\n                styleClass=\"p-button-text\"\r\n              >\r\n                Return pagination\r\n              </p-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</mat-dialog-content>\r\n","import {Category} from '../../product-structure/models/category';\r\nimport {Technology} from '../../product-structure/models/technology';\r\nimport {TechnicalEquipment} from '../../product-structure/models/technical-equipment';\r\n\r\nexport class Nomenclature {\r\n  readonly id?: number;\r\n  code?: string;\r\n  name?: string;\r\n  status?: string;\r\n  parent?: number | Nomenclature;\r\n  technologies?: Technology[];\r\n  images?: NomenclatureImage[];\r\n  category?: Category;\r\n  // category?: any;\r\n  description?: string;\r\n  type?: ENomenclatureType;\r\n  approved?: ENomenclatureApproval;\r\n  fullName?: string;\r\n  // purchase_category?: PurchasingCategory;\r\n  accounting_number?: string;\r\n  is_fixed_asset?: boolean;\r\n  is_non_ressivable?: boolean;\r\n  has_technical_equipment?: boolean;\r\n  technical_equipments?: TechnicalEquipment[];\r\n  deleted_technical_equipments_ids?: number[];\r\n  qc_protocol?: number;\r\n  bulk_or_serial?: '1' | '0';\r\n  tasks?: Task[];\r\n  root_category?: Category;\r\n  price?: any\r\n}\r\n\r\nexport class NomenclatureImage {\r\n  readonly id: number;\r\n  image: string | ArrayBuffer;\r\n  file?: File;\r\n}\r\n\r\nexport class NomenclatureFile {\r\n  readonly id: number;\r\n  file: string;\r\n  nomenclature: number;\r\n}\r\n\r\n\r\nexport class Nomenclatures {\r\n  count: number;\r\n  next: string;\r\n  previous: string;\r\n  results: Nomenclature[];\r\n}\r\n\r\nexport class NewNomenclature {\r\n  readonly id: number;\r\n  name: string;\r\n  parents?: NomenclatureParent[];\r\n}\r\n\r\nexport class NomenclatureParent {\r\n  readonly id: number;\r\n  name: string;\r\n}\r\n\r\nexport enum ENomenclatureType {\r\n  PURCHASED = '0',\r\n  ASSEMBLY = '1',\r\n  MANUFACTURED = '2'\r\n}\r\n\r\nexport enum ENomenclatureApproval {\r\n  NEW = '0',\r\n  APPROVED = '1',\r\n  DECLINED = '2'\r\n}\r\n\r\nexport enum ENomenclatureBulk {\r\n  BULK = '0',\r\n  SERIAL = '1',\r\n}\r\n","import {Nomenclature} from '@shared/models/nomenclature';\r\nimport {Product} from '../../product-structure/models/product';\r\nimport {Employee} from '@shared/models/employee';\r\nimport {SerialNumber} from '../../procurement/models/invoice';\r\nimport {Machine} from '../../manufacturing/models/machine';\r\nimport {PlanningStatus} from '../../manufacturing/enums/planning-status.enum';\r\nimport {ListProductProduction} from '../../manufacturing/models/list-product-production';\r\n\r\nexport type TechnologyName = string;\r\nexport type TaskStatus = string;\r\nexport type Color = string;\r\n\r\nexport enum TTCDisplayType {\r\n  MINUTES = '0',\r\n  HOURS = '1',\r\n  DAYS = '2'\r\n}\r\n\r\nexport class RootTask {\r\n  readonly id: number;\r\n  quantity: number;\r\n  nomenclature: Nomenclature;\r\n}\r\n\r\n// export enum PlanningStatus {\r\n//   WAITING_CONFIRMATION = '0',\r\n//   REQUIRES_PLANNING = '1',\r\n//   PLANNED = '2',\r\n//   ON_STOCK = '3',\r\n// }\r\n\r\n\r\nexport class TasksResponse {\r\n  prev: string;\r\n  next: string;\r\n  count: number;\r\n  results: Task[];\r\n}\r\n\r\nexport class Task {\r\n  readonly id: number;\r\n  family_id?: number;\r\n  name: number;\r\n  product_name: string;\r\n  created: string;\r\n  updated: string;\r\n\r\n  /**    */\r\n  duration?: number;\r\n  start_date: Date;\r\n  end_date: Date;\r\n  unconfirmed_end_date?: Date;\r\n  is_grouped?: boolean;\r\n  is_locked: boolean;\r\n  is_planned: boolean;\r\n  technologyUid?: number;\r\n  is_added_manually: boolean;\r\n  change_request?: boolean;\r\n  groupId?: string;\r\n  uiGroupId?: number;\r\n  uiParent?: number;\r\n  next_task: number;\r\n  previous_task: number;\r\n  technology?: TechnologyName;\r\n  availability: number | null;\r\n  depends_on: number | null;\r\n  status: TaskStatus;\r\n  employees?: Executor[];\r\n  machines?: ExecutionMachine[];\r\n  planning_status?: PlanningStatus;\r\n  list_product: Product;\r\n  required_quantity?: number;\r\n  parent_task?: number;\r\n  serials?: SerialNumber[];\r\n  root_nomenclature?: Nomenclature;\r\n  serial_numbers?: SerialNumber[];\r\n  reserved_on_stock_serial_numbers?: SerialNumber[];\r\n  reserved_in_production_serial_numbers?: SerialNumber[];\r\n  serial_products?: any[];\r\n  label?: string;\r\n  ttc_display_type?: TTCDisplayType;\r\n  child?: Task[];\r\n  /** @deprecated */\r\n  tools?: any;\r\n  tasks?: Task[];\r\n  created_order?: any;\r\n  is_in_qc?: boolean;\r\n  is_in_qc_wh?: boolean;\r\n  /**\r\n   * Values:<br>\r\n   * \"0\" = \"Outsource\"<br>\r\n   * \"1\" = \"Own\"\r\n   */\r\n  production_type?: '0' | '1' | '2';\r\n  created_order_id?: number;\r\n\r\n  // ui/ux only props\r\n  isSaved?: boolean;\r\n  searchFieldEmployee?: number[];\r\n  use_technical_equipment?: boolean;\r\n  needs_technical_equipment?: boolean;\r\n  production_list_id: string;\r\n}\r\n\r\nexport class TaskSet extends Task {\r\n\r\n  static id = 0;\r\n\r\n  production: ListProductProduction;\r\n  id: number;\r\n  tasks: Task[] = [];\r\n\r\n  constructor(config?: Partial<TaskSet>) {\r\n    super();\r\n    if (config) Object.assign(this, config);\r\n    this.id = ++TaskSet.id;\r\n  }\r\n\r\n  apply() {\r\n    const props: Array<keyof Task> = ['availability', 'created_order_id', 'duration', 'employees', 'end_date', 'is_locked', 'machines', 'start_date', 'status'];\r\n\r\n    this.tasks.forEach(task => {\r\n      for (const prop of props) {\r\n        // @ts-ignore\r\n        task[prop] = this[prop];\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nexport class Tasks {\r\n  prev: string;\r\n  next: string;\r\n  count: number;\r\n  results: Task[];\r\n}\r\n\r\nexport class Executor {\r\n  duration: number;\r\n  id?: number;\r\n  employee: Employee;\r\n  task: number;\r\n  start?: Date;\r\n  end?: Date;\r\n}\r\n\r\nexport class ExecutionMachine {\r\n  duration: number;\r\n  id?: number;\r\n  machine: Machine;\r\n  task: number;\r\n  start?: Date;\r\n  end?: Date;\r\n}\r\n\r\n","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-accepted-type-picker',\r\n  templateUrl: './accepted-type-picker.component.html',\r\n  styleUrls: ['./accepted-type-picker.component.scss']\r\n})\r\nexport class AcceptedTypePickerComponent implements OnInit {\r\n  @Output() selectAcceptedType: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n\r\n  acceptedTypes: {name: string, value: boolean}[] = [\r\n    {name: 'Invoices', value: true},\r\n    {name: 'Orders', value: false}\r\n  ];\r\n\r\n  selectedValue: boolean;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onSelectAcceptedType() {\r\n    this.selectAcceptedType.next(this.selectedValue);\r\n  }\r\n\r\n}\r\n","<div class=\"accepted-type-picker\">\r\n  <p-dropdown\r\n    [(ngModel)]=\"selectedValue\"\r\n    (ngModelChange)=\"onSelectAcceptedType()\"\r\n    [options]=\"acceptedTypes\"\r\n    [showClear]=\"true\"\r\n    placeholder=\"Select Accepted\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"value\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\n\r\nexport enum EAccountingType {\r\n  OUTSOURCE = 2,\r\n  OWN = 3,\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-accounting-type-picker',\r\n  templateUrl: './accounting-type-picker.component.html',\r\n  styleUrls: ['./accounting-type-picker.component.scss']\r\n})\r\nexport class AccountingTypePickerComponent implements OnInit {\r\n  @Input() currentAccountingType: EAccountingType = null;\r\n  @Input() isDisabled = false;\r\n  @Output() choiceAccountingType: EventEmitter<EAccountingType> = new EventEmitter<EAccountingType>();\r\n\r\n  selectAccountingType: EAccountingType = null;\r\n\r\n  accountingTypes: { label: string, value: EAccountingType }[] = [\r\n    {label: 'Outsource production', value: EAccountingType.OUTSOURCE},\r\n    {label: 'Own production', value: EAccountingType.OWN},\r\n  ];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.setCurrentProductionType();\r\n  }\r\n\r\n  setCurrentProductionType() {\r\n    if (this.currentAccountingType !== null) {\r\n      this.selectAccountingType = this.currentAccountingType;\r\n    }\r\n  }\r\n\r\n  onSelectProductionType() {\r\n    this.choiceAccountingType.emit(this.selectAccountingType);\r\n  }\r\n\r\n}\r\n","<div class=\"accounting-type-picker\">\r\n  <p-dropdown\r\n    [options]=\"accountingTypes\"\r\n    optionLabel=\"label\"\r\n    optionValue=\"value\"\r\n    placeholder=\"Select Type\"\r\n    [disabled]=\"isDisabled\"\r\n    [showClear]=\"true\"\r\n    [(ngModel)]=\"selectAccountingType\"\r\n    (ngModelChange)=\"onSelectProductionType()\"\r\n  ></p-dropdown>\r\n</div>\r\n","import {\r\n  Component,\r\n  EventEmitter,\r\n  forwardRef,\r\n  Input,\r\n  OnChanges,\r\n  OnDestroy,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges\r\n} from '@angular/core';\r\nimport {AreaLocatorsService} from '@shared/services/area-locators.service';\r\nimport {take} from 'rxjs/operators';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Component({\r\n  selector: 'pek-area-locator-picker',\r\n  templateUrl: './area-locator-picker.component.html',\r\n  styleUrls: ['./area-locator-picker.component.scss'],\r\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => AreaLocatorPickerComponent), multi: false}]\r\n})\r\nexport class AreaLocatorPickerComponent implements OnInit, OnChanges, ControlValueAccessor, OnDestroy {\r\n  groupLocators = [];\r\n  @Output() valueChange = new EventEmitter<number>();\r\n  @Input() locator: number;\r\n  @Input() areaId: number = null;\r\n  @Input() current_locator_id: number;\r\n  @Input() isDisabled = false;\r\n  private destroy$ = new Subject();\r\n  constructor(\r\n    private areaLocatorService: AreaLocatorsService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadAreaLocators();\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    this.locator = null;\r\n    if ('areaId' in changes) {\r\n      if (this.areaId) {\r\n        this.groupLocators = [];\r\n        this.loadByAreaId();\r\n      } else {\r\n        this.groupLocators = [];\r\n        this.loadAreaLocators();\r\n      }\r\n    }\r\n  }\r\n\r\n  loadAreaLocators() {\r\n    this.areaLocatorService.get().pipe(take(1))\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(res => {\r\n      let map = {};\r\n      res.forEach(element => {\r\n        if (map[element.area.id]) {\r\n          if (this.current_locator_id) {\r\n            if (element.id !== this.current_locator_id) {\r\n              map[element.area.id].items.push({ label: element.name, value: element.id });\r\n            }\r\n          } else {\r\n            map[element.area.id].items.push({ label: element.name, value: element.id });\r\n          }\r\n        } else {\r\n          map[element.area.id] = {};\r\n          map[element.area.id].label = element.area.name;\r\n          map[element.area.id].value = element.area.id;\r\n          map[element.area.id].items = [];\r\n          if (this.current_locator_id) {\r\n            if (element.id !== this.current_locator_id) {\r\n              map[element.area.id].items.push({ label: element.name, value: element.id });\r\n            }\r\n          } else {\r\n            map[element.area.id].items.push({ label: element.name, value: element.id });\r\n          }\r\n        }\r\n      });\r\n\r\n      Object.keys(map).forEach(id => {\r\n        this.groupLocators.push(map[id]);\r\n      });\r\n    });\r\n  }\r\n\r\n  loadByAreaId() {\r\n    const query: QuerySearch[] = [{\r\n      name: 'area',\r\n      value: this.areaId\r\n    }]\r\n    this.areaLocatorService.get(query).pipe(take(1))\r\n      .pipe(takeUntil(this.destroy$))\r\n      .subscribe(res => {\r\n        this.groupLocators = res;\r\n      });\r\n  }\r\n\r\n\r\n  onChange(locator: number) {\r\n    this.setValue(locator);\r\n  }\r\n\r\n  private setValue(locator: number) {\r\n    this.locator = locator;\r\n    this.valueChange.emit(this.locator);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.valueChange.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    this.locator = obj;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<p-dropdown\r\n  *ngIf=\"!this.areaId\"\r\n  [filter]=\"true\"\r\n  [(ngModel)]=\"locator\"\r\n  [showClear]=\"true\"\r\n  [options]=\"groupLocators\"\r\n  [disabled]=\"isDisabled\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n  [group]=\"true\"\r\n  optionValue=\"value\"\r\n  optionLabel=\"label\"\r\n  [placeholder]=\"'Select Locator'\">\r\n</p-dropdown>\r\n<p-dropdown\r\n  *ngIf=\"this.areaId\"\r\n  [filter]=\"true\"\r\n  [showClear]=\"true\"\r\n  [(ngModel)]=\"locator\"\r\n  [options]=\"groupLocators\"\r\n  [disabled]=\"isDisabled\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n  [group]=\"false\"\r\n  optionValue=\"id\"\r\n  optionLabel=\"name\"\r\n  [placeholder]=\"'Select Locator'\">\r\n</p-dropdown>\r\n","import {Component, EventEmitter, forwardRef, Input, OnDestroy, OnInit, Output} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {CRMEmployee} from '../../../crm/models/crm-employee';\r\nimport {Area} from '../../../warehouse/models/area-locator';\r\nimport {AreasService} from '@shared/services/areas.service';\r\nimport {take, tap} from 'rxjs/operators';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-area-picker',\r\n  templateUrl: './area-picker.component.html',\r\n  styleUrls: ['./area-picker.component.scss'],\r\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => AreaPickerComponent), multi: false}]\r\n})\r\nexport class AreaPickerComponent implements OnInit, ControlValueAccessor, OnDestroy  {\r\n\r\n  @Output() valueChange = new EventEmitter<number>();\r\n  @Input() area: number;\r\n  @Input() isDisabled: boolean;\r\n  areas: Area[];\r\n  @Input() showClear = false;\r\n  isLoading = false;\r\n  private destroy$ = new Subject();\r\n  constructor(\r\n    private areasService: AreasService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.areasService.get().pipe(take(1),\r\n      tap(res => this.areas = res),\r\n      takeUntil(this.destroy$)).subscribe();\r\n  }\r\n\r\n  onChange(employee: number) {\r\n    this.setValue(employee);\r\n  }\r\n\r\n  private setValue(area: number) {\r\n    this.area = area;\r\n    this.valueChange.emit(this.area);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.valueChange.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    this.area = obj;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<p-dropdown\r\n  [filter]=\"true\"\r\n  [showClear]=\"showClear\"\r\n  [(ngModel)]=\"area\"\r\n  [options]=\"areas\"\r\n  [disabled]=\"isDisabled\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n  optionValue=\"id\"\r\n  optionLabel=\"name\"\r\n  [placeholder]=\"'Select Area'\">\r\n</p-dropdown>\r\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from '@angular/core';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {CompanyCategoryService} from '../../../crm/services/company-category.service';\r\nimport {forkJoin, Subject, takeUntil} from 'rxjs';\r\nimport {CompanyCategory} from '../../../crm/models/company-category';\r\nimport {debounceTime, tap} from 'rxjs/operators';\r\nimport {logMessages} from '@angular-devkit/build-angular/src/builders/browser-esbuild/esbuild';\r\n\r\n@Component({\r\n  selector: 'pek-company-categorized-multi-picker',\r\n  templateUrl: './company-categorized-multi-picker.component.html',\r\n  styleUrls: ['./company-categorized-multi-picker.component.scss']\r\n})\r\nexport class CompanyCategorizedMultiPickerComponent implements OnInit, OnDestroy {\r\n  nodes: any[];\r\n  companyCategories: CompanyCategory[] = [];\r\n  companies: Partial<Company>[] = [];\r\n  @Input() currentCompaniesIds: number[] = [];\r\n  @Output() selectCompanies: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  groupedCategories: TreeNode<Company & CompanyCategory>[] = [];\r\n\r\n  selectedNode: TreeNode[] = [];\r\n  selectedUniqueNodes: TreeNode[] = [];\r\n  isLoading = true;\r\n  private destroy$ = new Subject();\r\n  private dataCollected = new Subject();\r\n\r\n  constructor(\r\n    private readonly companyService: CompanyService,\r\n    private readonly companyCategoryService: CompanyCategoryService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getCategories();\r\n  }\r\n\r\n  formTree() {\r\n    this.companyCategories.forEach(category => {\r\n      const companiesOfCategory = this.companies.filter(company => company.categories.findIndex(id => id === category.id) > -1);\r\n      const preparedCategory: TreeNode = {\r\n        label: category.name,\r\n        data: {category: category, type: 'category'},\r\n        key: 'category' + category.id,\r\n        expandedIcon: 'pi pi-folder-open',\r\n        collapsedIcon: 'pi pi-folder',\r\n        children: []\r\n      }\r\n      if (companiesOfCategory.length > 0) {\r\n        companiesOfCategory\r\n          .sort((a, b) => {\r\n            return a.name.localeCompare(b.name);\r\n          }).forEach(company => {\r\n          const preparedCompany: TreeNode = {\r\n            label: company.name,\r\n            data: {company: company, type: 'company'},\r\n            key: 'company' + company.id,\r\n            children: [],\r\n          }\r\n          preparedCategory.children.push(preparedCompany);\r\n        });\r\n      }\r\n      this.groupedCategories.push(preparedCategory)\r\n    })\r\n    this.nodes = this.groupedCategories;\r\n    this.setSelectedNode();\r\n    this.isLoading = false;\r\n  }\r\n\r\n  setSelectedNode() {\r\n    const selectedCompanies: string[] = this.currentCompaniesIds.flatMap(id => 'company' + id?.toString()) as string[];\r\n\r\n    this.selectedNode = this.nodes.flatMap(n => n.children)\r\n      .filter(v => v?.key !== undefined && selectedCompanies.includes(v.key) &&\r\n        this.selectedNode.findIndex(node => node.key === v.key) < 0) as TreeNode[];\r\n\r\n    this.nodes.forEach(node => {\r\n      const childCount = (node as TreeNode).children.length;\r\n      let passedCount = 0;\r\n      (node as TreeNode).children.forEach(child => {\r\n        const isSelected = selectedCompanies.findIndex(id => id === (child as TreeNode).key) > -1;\r\n        if (isSelected) {\r\n          passedCount++;\r\n        }\r\n      });\r\n\r\n      if (childCount > 0 && childCount === passedCount) {\r\n        this.selectedNode.push(node as TreeNode);\r\n      }\r\n      if (childCount > 0 && passedCount > 0 && childCount > passedCount) {\r\n        (node as TreeNode).partialSelected = true;\r\n      }\r\n    });\r\n    this.selectedNode = [...this.selectedNode.filter(this.onlyUniqueByKey)];\r\n  }\r\n\r\n  getCategories() {\r\n    return this.companyCategoryService.get().pipe(tap(categories => {\r\n      this.companyCategories = categories;\r\n      this.dataCollected.next(true);\r\n    }), takeUntil(this.destroy$)).subscribe(() => {\r\n      this.getCompanies();\r\n    });\r\n  }\r\n\r\n  getCompanies() {\r\n    return this.companyService.getShorts().pipe(tap(companies => {\r\n      this.companies = companies;\r\n      this.dataCollected.next(true);\r\n      this.formTree();\r\n    }), takeUntil(this.destroy$)).subscribe();\r\n  }\r\n\r\n  selectionChanged() {\r\n    const selectedCompanies = this.selectedNode\r\n      .filter(node => node.data.type === 'company').map(node => node.data.company).filter(this.onlyUnique);\r\n    if (selectedCompanies?.length === 0) {\r\n      this.selectCompanies.emit(null);\r\n    } else {\r\n      this.selectCompanies.emit(selectedCompanies.map(c => c.id).join(','));\r\n    }\r\n  }\r\n\r\n  onlyUnique(value, index, self) {\r\n    return self.indexOf(value) === index;\r\n  }\r\n\r\n  onlyUniqueByKey(value, index, self) {\r\n    return self.findIndex(innerValue => innerValue.key === value.key) === index;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    console.log('Destroy');\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"company-categorized-multi-picker\">\r\n  <p-treeSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    selectionMode=\"checkbox\"\r\n    [metaKeySelection]=\"true\"\r\n    [filter]=\"true\"\r\n    [(ngModel)]=\"selectedNode\"\r\n    (ngModelChange)=\"selectionChanged()\" [options]=\"nodes\"\r\n    placeholder=\"Select Company\">\r\n    <ng-template pTemplate=\"value\" let-options>\r\n      <ng-template [ngIf]=\"selectedNode.length === 0\">\r\n        Select Company\r\n      </ng-template>\r\n      <ng-template ngFor [ngForOf]=\"options\" let-option let-last=last>\r\n        <ng-template [ngIf]=\"option.data.type === 'company'\">\r\n          {{option.data.company.name}} <span *ngIf=\"!last\">,</span>\r\n        </ng-template>\r\n      </ng-template>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"empty\">\r\n      Empty\r\n    </ng-template>\r\n  </p-treeSelect>\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CompanyCategoryModule} from '../../../crm/models/company-category';\r\nimport {CompanyCategoryService} from '../../../crm/services/company-category.service';\r\nimport {Technology} from '../../../product-structure/models/technology';\r\n\r\n@Component({\r\n  selector: 'pek-company-category-module-picker',\r\n  templateUrl: './company-category-module-picker.component.html',\r\n  styleUrls: ['./company-category-module-picker.component.scss']\r\n})\r\nexport class CompanyCategoryModulePickerComponent implements OnInit {\r\n  @Input() currentModulesIds: number[] = [];\r\n  @Output() selectModule: EventEmitter<CompanyCategoryModule[]> = new EventEmitter<CompanyCategoryModule[]>();\r\n\r\n  isLoading = true;\r\n  modules: CompanyCategoryModule[] = [];\r\n  selectedModules: CompanyCategoryModule[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly companyCategoryService: CompanyCategoryService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.companyCategoryService.getModules().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(modules => {\r\n      this.modules = modules;\r\n      this.findModules();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('currentModulesIds' in changes) {\r\n      this.selectedModules = [];\r\n      this.findModules();\r\n    }\r\n  }\r\n\r\n  onSelectModule(technologies: CompanyCategoryModule[]) {\r\n    this.selectModule.emit(technologies);\r\n  }\r\n\r\n  findModules() {\r\n    if (this.currentModulesIds.length > 0) {\r\n      this.currentModulesIds.forEach(id => {\r\n        const findModule = this.modules.find(t => t.id === id);\r\n        console.log(this.modules)\r\n        console.log(id);\r\n\r\n        console.log(findModule);\r\n\r\n        if (findModule) {\r\n          this.selectedModules.push(findModule);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"company-category-module-picker\">\r\n  <p-multiSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"modules\"\r\n    [(ngModel)]=\"selectedModules\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"Select Modules\"\r\n    (ngModelChange)=\"onSelectModule($event)\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, OnInit, Output} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CompanyCategory} from '../../../crm/models/company-category';\r\nimport {CompanyCategoryService} from '../../../crm/services/company-category.service';\r\n\r\n@Component({\r\n  selector: 'pek-company-category-picker',\r\n  templateUrl: './company-category-picker.component.html',\r\n  styleUrls: ['./company-category-picker.component.scss']\r\n})\r\nexport class CompanyCategoryPickerComponent implements OnInit {\r\n  @Output() selectCompanyCategory: EventEmitter<number> = new EventEmitter<number>();\r\n  isLoading = true;\r\n  categories: Partial<CompanyCategory>[] = [];\r\n  selectedCompanyCategoryId: number;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly companyCategoryService: CompanyCategoryService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.companyCategoryService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectCompanyCategory() {\r\n    this.selectCompanyCategory.emit(this.selectedCompanyCategoryId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"company-category-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"categories\"\r\n    placeholder=\"Select Company Category\"\r\n    [(ngModel)]=\"selectedCompanyCategoryId\"\r\n    (ngModelChange)=\"onSelectCompanyCategory()\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\n\r\n@Component({\r\n  selector: 'pek-company-picker',\r\n  templateUrl: './company-picker.component.html',\r\n  styleUrls: ['./company-picker.component.scss']\r\n})\r\nexport class CompanyPickerComponent implements OnInit, OnChanges {\r\n\r\n  @Output() selectCompany: EventEmitter<number> = new EventEmitter<number>();\r\n  @Output() selectCompanyFull: EventEmitter<Partial<Company>> = new EventEmitter<Partial<Company>>();\r\n  @Input() currentCompanyId: any;\r\n  @Input() currentCompany: Partial<Company>;\r\n  @Input() isDisabled: boolean = false\r\n  isLoading = true;\r\n  companies: Partial<Company>[] = [];\r\n  selectedCompanyId: number;\r\n\r\n  constructor(\r\n    private readonly companyService: CompanyService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.companyService.getShorts().pipe(\r\n    ).subscribe(companies => {\r\n      this.companies = companies;\r\n\r\n      if (this.currentCompanyId) {\r\n        this.selectedCompanyId = this.currentCompanyId;\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if ('currentCompanyId' in changes) {\r\n      this.selectedCompanyId = this.currentCompanyId;\r\n    }\r\n  }\r\n\r\n  onSelectCompany() {\r\n    this.currentCompany = this.companies.find(currency => currency.id === this.selectedCompanyId);\r\n    this.selectCompany.emit(this.selectedCompanyId);\r\n    this.selectCompanyFull.emit(this.currentCompany);\r\n  }\r\n}\r\n","<div class=\"company-picker\">\r\n  <p-dropdown\r\n    [filter]=\"true\"\r\n    *ngIf=\"!isLoading else spinner\"\r\n    [options]=\"companies\"\r\n    placeholder=\"Select Company\"\r\n    [(ngModel)]=\"selectedCompanyId\"\r\n    (ngModelChange)=\"onSelectCompany()\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n    [disabled]=\"isDisabled\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, forwardRef, Input, OnInit, Output} from '@angular/core';\r\nimport {take} from 'rxjs/operators';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {Country} from '@shared/models/country';\r\nimport {CountryService} from '@shared/services/country.service';\r\n\r\n@Component({\r\n  selector: 'pek-crm-company-picker',\r\n  templateUrl: './crm-company-picker.component.html',\r\n  styleUrls: ['./crm-company-picker.component.scss'],\r\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => CrmCompanyPickerComponent), multi: false}]\r\n})\r\nexport class CrmCompanyPickerComponent implements OnInit, ControlValueAccessor {\r\n\r\n  @Output() valueChange = new EventEmitter<Country>();\r\n  @Input() country: number;\r\n  @Input() selectedCountry: Country;\r\n  @Input() placeholder = 'Choose Country';\r\n  @Input() showClear: boolean = true;\r\n\r\n  countries: Country[];\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private countryService: CountryService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getAll();\r\n  }\r\n\r\n  getAll() {\r\n    this.countryService\r\n      .get()\r\n      .pipe(take(1))\r\n      .subscribe((res) => {\r\n        this.countries = res;\r\n        if (this.country) {\r\n          this.selectedCountry = this.countries.find(currency => currency.id === this.country);\r\n          console.log('this.selectedCountry', this.selectedCountry);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  onChange(value: number) {\r\n    this.setValue(value);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.valueChange.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    // okay\r\n  }\r\n\r\n  private setValue(value: number) {\r\n    this.country = value;\r\n    this.selectedCountry = this.countries.find(currency => currency.id === this.country);\r\n    this.valueChange.emit(this.selectedCountry);\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    this.country = obj;\r\n  }\r\n\r\n}\r\n","<p-dropdown\r\n  [filter]=\"true\"\r\n  [showClear]=\"true\"\r\n  [(ngModel)]=\"country\"\r\n  [options]=\"countries\"\r\n  [disabled]=\"isLoading\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n  optionValue=\"id\"\r\n  optionLabel=\"name\"\r\n  [placeholder]=\"placeholder\"\r\n>\r\n\r\n  <ng-template pTemplate=\"selectedItem\">\r\n    <div class=\"country-item country-item-value\" *ngIf=\"selectedCountry\">\r\n      <div>{{selectedCountry.name}}</div>\r\n    </div>\r\n  </ng-template>\r\n\r\n  <ng-template let-country pTemplate=\"item\">\r\n    <div class=\"country-item\">\r\n      <div>{{country.name}}</div>\r\n    </div>\r\n  </ng-template>\r\n</p-dropdown>\r\n","import {Component, EventEmitter, forwardRef, Input, OnInit, Output} from '@angular/core';\r\nimport {take} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {CRMEmployee} from '../../../crm/models/crm-employee';\r\nimport {CrmEmployeeService} from '../../../crm/services/crm-employee.service';\r\n\r\n@Component({\r\n  selector: 'pek-crm-single-employee-picker',\r\n  templateUrl: './crm-single-employee-picker.component.html',\r\n  styleUrls: ['./crm-single-employee-picker.component.scss'],\r\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => CrmSingleEmployeePickerComponent), multi: true}]\r\n})\r\nexport class CrmSingleEmployeePickerComponent implements OnInit, ControlValueAccessor {\r\n\r\n  @Output() valueChange = new EventEmitter<CRMEmployee>();\r\n  @Input() employee: number;\r\n  @Input() selectedEmployee: CRMEmployee;\r\n  @Input() placeholder = 'Choose Employee';\r\n  @Input() showProfession = false;\r\n  @Input() filters: QuerySearch[];\r\n  @Input() showClear: boolean;\r\n\r\n  employees: CRMEmployee[];\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private crmEmployeeService: CrmEmployeeService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getAll();\r\n  }\r\n\r\n  getAll() {\r\n    this.crmEmployeeService\r\n      .get(this.filters)\r\n      .pipe(take(1))\r\n      .subscribe((res) => {\r\n        this.employees = res;\r\n        if (this.employee) {\r\n          this.selectedEmployee = this.employees.find(currency => currency.id === this.employee);\r\n        }\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  onChange(employee: number) {\r\n    this.setValue(employee);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.valueChange.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    // okay\r\n  }\r\n\r\n  private setValue(employee: number) {\r\n    this.employee = employee;\r\n    this.selectedEmployee = this.employees.find(currency => currency.id === this.employee);\r\n    delete this.selectedEmployee.fullName;\r\n    this.valueChange.emit(this.selectedEmployee);\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    this.employee = obj;\r\n  }\r\n\r\n}\r\n","<p-dropdown\r\n  [filter]=\"true\"\r\n  [showClear]=\"showClear\"\r\n  [(ngModel)]=\"employee\"\r\n  [options]=\"employees\"\r\n  [disabled]=\"isLoading\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n  optionValue=\"id\"\r\n  optionLabel=\"first_name\"\r\n  [placeholder]=\"placeholder\">\r\n\r\n  <ng-template pTemplate=\"selectedItem\">\r\n    <div class=\"country-item country-item-value\" *ngIf=\"selectedEmployee\">\r\n      <div *ngIf=\"showProfession\" >{{selectedEmployee.first_name}}</div>\r\n      <div *ngIf=\"!showProfession\">{{selectedEmployee.first_name}} {{selectedEmployee.last_name}}</div>\r\n    </div>\r\n  </ng-template>\r\n\r\n  <ng-template let-employee pTemplate=\"item\">\r\n    <div class=\"country-item\">\r\n      <div *ngIf=\"showProfession\" >{{employee.first_name}} {{employee.last_name}} ({{employee.position ? employee.position.title : 'No position'}})</div>\r\n      <div *ngIf=\"!showProfession\">{{employee.first_name}} {{employee.last_name}}</div>\r\n    </div>\r\n  </ng-template>\r\n</p-dropdown>\r\n","import {\r\n  ChangeDetectionStrategy, ChangeDetectorRef,\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges\r\n} from '@angular/core';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\nimport {Country} from '@shared/models/country';\r\nimport {Region} from '@shared/models/region';\r\nimport {RegionService} from '@shared/services/region.service';\r\nimport {debounceTime} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-crm-multi-region-picker',\r\n  templateUrl: './crm-multi-region-picker.component.html',\r\n  styleUrls: ['./crm-multi-region-picker.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CrmMultiRegionPickerComponent implements OnInit, OnChanges {\r\n  @Output() choiceCategories: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  @Output() regionsSelected: EventEmitter<Region[]> = new EventEmitter<Region[]>();\r\n  @Input() isDisabled: boolean;\r\n  @Input() countrySelected: Country[] = [];\r\n  isLoading = false;\r\n  regions: Region[] = [];\r\n  regionsTree: TreeNode<Category>[] = [];\r\n\r\n  selectedRegions: TreeNode<Region>[] = [];\r\n  allSelectedCount = 0;\r\n\r\n  private destroy$ = new Subject();\r\n  recreateTree: Subject<void> = new Subject<void>();\r\n  panelOpened = false;\r\n\r\n  constructor(\r\n    private readonly productCategoriesService: CategoriesService,\r\n    private readonly regionService: RegionService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n        if ('countrySelected' in changes) {\r\n          this.recreateTree.next();\r\n        }\r\n    }\r\n\r\n  ngOnInit(): void {\r\n    this.recreateTree.pipe(debounceTime(200)).subscribe(() => {\r\n      this.loadRegions();\r\n    });\r\n  }\r\n\r\n  loadRegions() {\r\n    const countryIds = this.countrySelected.map(country => country.id);\r\n    this.regionService.get([{name: 'country_ids', value: countryIds}]).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(regions => {\r\n      this.selectedRegions = [];\r\n      this.regions = regions;\r\n\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    this.allSelectedCount = 0;\r\n    const getChildren = (nodes: TreeNode<Region>[]) => {\r\n      nodes.forEach(node => {\r\n        const children = this.regions.filter(c => c.country.id === node.data.id);\r\n\r\n        if (children.length > 0) {\r\n          node.children = children.map(region => {\r\n\r\n            return {\r\n              label: region.name,\r\n              data: region,\r\n              children: []\r\n            };\r\n          });\r\n          this.selectedRegions.push(...node.children);\r\n          this.allSelectedCount += node.children.length;\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    const tree: TreeNode<any>[] = [];\r\n\r\n    this.countrySelected.forEach(country => {\r\n      const hasChildren = this.regions.filter(c => c.country.id === country.id).length > 0;\r\n      if (hasChildren) {\r\n        tree.push({\r\n          label: country.name,\r\n          data: <Country>country,\r\n          expanded: true,\r\n          styleClass: 'country',\r\n          selectable: false,\r\n          children: [],\r\n        });\r\n      }\r\n    });\r\n\r\n    getChildren(tree);\r\n    this.regionsSelected.next(this.selectedRegions.map(c => c.data));\r\n    this.regionsTree = [...tree];\r\n  }\r\n\r\n  get isAllSelected() {\r\n    return this.selectedRegions?.length === this.allSelectedCount;\r\n  }\r\n\r\n  onChoiceCategories() {\r\n    if (!this.selectedRegions || this.selectedRegions.length === 0) {\r\n      this.regionsSelected.next(null)\r\n    } else {\r\n      this.regionsSelected.next(this.selectedRegions.filter(c => c.data.country).map(c => c.data));\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  showPanel() {\r\n    this.panelOpened = true;\r\n  }\r\n\r\n  hidePanel() {\r\n    this.panelOpened = false;\r\n  }\r\n\r\n  selectionAllChanged($event: any) {\r\n    if (this.selectedRegions?.length === this.allSelectedCount) {\r\n      // setTimeout(() => {\r\n        this.selectedRegions = null;\r\n        this.cdr.markForCheck();\r\n        this.cdr.detectChanges();\r\n      // });\r\n    } else {\r\n      this.loadRegions();\r\n    }\r\n    this.onChoiceCategories();\r\n    $event.stopPropagation(); $event.preventDefault();\r\n  }\r\n}\r\n","<div class=\"multi-categories-picker\" [class.show-checkbox]=\"panelOpened\">\r\n  <p-treeSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"regionsTree\"\r\n    selectionMode=\"checkbox\"\r\n    [(ngModel)]=\"selectedRegions\"\r\n    (onShow)=\"showPanel()\"\r\n    (onHide)=\"hidePanel()\"\r\n    [propagateSelectionUp]=\"false\"\r\n    [disabled]=\"isDisabled\"\r\n    [filter]=\"true\"\r\n    placeholder=\"Select Region\"\r\n    (ngModelChange)=\"onChoiceCategories()\"\r\n  >\r\n    <ng-template pTemplate=\"header\">\r\n      <p-checkbox\r\n        inputId=\"region\"\r\n        [ngModel]=\"isAllSelected\"\r\n        (click)=\"selectionAllChanged($event)\"\r\n        [binary]=\"true\"\r\n      ></p-checkbox>\r\n    </ng-template>\r\n  </p-treeSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n\r\n</div>\r\n","import {\r\n  ChangeDetectionStrategy, ChangeDetectorRef,\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges\r\n} from '@angular/core';\r\nimport {Region} from '@shared/models/region';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\nimport {RegionService} from '@shared/services/region.service';\r\nimport {debounceTime} from 'rxjs/operators';\r\nimport {SubRegion} from '@shared/models/sub-region';\r\nimport {SubRegionService} from '@shared/services/sub-region.service';\r\nimport {Country} from '@shared/models/country';\r\n\r\n@Component({\r\n  selector: 'pek-crm-multi-region-tree-picker',\r\n  templateUrl: './crm-multi-region-tree-picker.component.html',\r\n  styleUrls: ['./crm-multi-region-tree-picker.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CrmMultiRegionTreePickerComponent implements OnInit, OnChanges {\r\n  @Output() choiceCategories: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  @Output() subRegionsSelected: EventEmitter<SubRegion[]> = new EventEmitter<SubRegion[]>();\r\n  @Input() isDisabled: boolean;\r\n  @Input() regionsSelected: Region[] = [];\r\n  @Input() countriesSelected: Country[] = [];\r\n  isLoading = false;\r\n  subRegions: SubRegion[] = [];\r\n  regionsTree: TreeNode<SubRegion>[] = [];\r\n\r\n  selectedSubRegions: TreeNode<SubRegion>[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n  recreateTree: Subject<void> = new Subject<void>();\r\n  allSelectedCount = 0;\r\n  panelOpened = false;\r\n\r\n  constructor(\r\n    private readonly productCategoriesService: CategoriesService,\r\n    private readonly regionService: RegionService,\r\n    private readonly subRegionService: SubRegionService,\r\n    private cdr: ChangeDetectorRef\r\n  ) {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if ('regionsSelected' in changes) {\r\n      this.recreateTree.next();\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.recreateTree.pipe(debounceTime(200)).subscribe(() => {\r\n      this.loadRegions();\r\n    });\r\n  }\r\n\r\n  loadRegions() {\r\n    const regionIds = this.regionsSelected ? this.regionsSelected.map(country => country.id) : [];\r\n    this.subRegionService.get([{name: 'region_ids', value: regionIds}]).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(regions => {\r\n      this.selectedSubRegions = [];\r\n      this.subRegions = regions;\r\n\r\n      if (this.regionsSelected && this.regionsSelected.length > 0) {\r\n        this.createTree();\r\n      }\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  get isAllSelected() {\r\n    return this.selectedSubRegions?.length === this.allSelectedCount;\r\n  }\r\n\r\n  createTree() {\r\n    this.allSelectedCount = 0;\r\n    const countries = this.regionsSelected.filter((region, index, self) => self.findIndex(innerRegion => innerRegion.country.id === region.country.id) === index).map(region => region.country);\r\n    const treeCountries: TreeNode<any>[] = [];\r\n    countries.forEach(country => {\r\n      const countryNode = {\r\n        label: country.name,\r\n        data: <Country>country,\r\n        expanded: true,\r\n        styleClass: 'country',\r\n        selectable: false,\r\n        children: [],\r\n      }\r\n      treeCountries.push(countryNode);\r\n\r\n      const regions = this.regionsSelected.filter(c => c.country.id === country.id);\r\n      regions.forEach(region => {\r\n        const hasChildren = this.subRegions.filter(c => c.region === region.id).length > 0;\r\n        if (hasChildren) {\r\n          const regionNode = {\r\n            label: region.name,\r\n            data: <Region>region,\r\n            expanded: true,\r\n            styleClass: 'region',\r\n            selectable: false,\r\n            children: [],\r\n          };\r\n          countryNode.children.push(regionNode);\r\n\r\n          const regions = this.subRegions.filter(c => c.region === region.id);\r\n          regions.forEach(subRegion => {\r\n            const subRegionNode = {\r\n              label: subRegion.name,\r\n              data: <SubRegion>subRegion,\r\n              expanded: true,\r\n              styleClass: 'subRegion',\r\n              children: [],\r\n            };\r\n            this.selectedSubRegions.push(subRegionNode)\r\n            this.allSelectedCount++;\r\n            regionNode.children.push(subRegionNode);\r\n          });\r\n        }\r\n      });\r\n\r\n    });\r\n\r\n    this.subRegionsSelected.next(this.selectedSubRegions.map(c=> c.data));\r\n    this.regionsTree = [...treeCountries];\r\n  }\r\n\r\n  onChoiceCategories() {\r\n    if (!this.selectedSubRegions || this.selectedSubRegions.length === 0) {\r\n      this.subRegionsSelected.next(null)\r\n    } else {\r\n      this.subRegionsSelected.next(this.selectedSubRegions.filter(c => c.data.region).map(c=> c.data));\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n\r\n  showPanel() {\r\n    this.panelOpened = true;\r\n  }\r\n\r\n  hidePanel() {\r\n    this.panelOpened = false;\r\n  }\r\n\r\n  selectionAllChanged($event: any) {\r\n    if (this.selectedSubRegions?.length === this.allSelectedCount) {\r\n      // setTimeout(() => {\r\n        this.selectedSubRegions = null;\r\n        this.cdr.markForCheck();\r\n        this.cdr.detectChanges();\r\n      // });\r\n    } else {\r\n      this.loadRegions();\r\n    }\r\n    this.onChoiceCategories();\r\n    $event.stopPropagation(); $event.preventDefault();\r\n  }\r\n}\r\n","<div class=\"multi-categories-picker\" [class.show-checkbox]=\"panelOpened\">\r\n  <p-treeSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"regionsTree\"\r\n    selectionMode=\"checkbox\"\r\n    [(ngModel)]=\"selectedSubRegions\"\r\n    [disabled]=\"isDisabled\"\r\n    (onShow)=\"showPanel()\"\r\n    (onHide)=\"hidePanel()\"\r\n    [propagateSelectionUp]=\"false\"\r\n    placeholder=\"Select Sub Region\"\r\n    [filter]=\"true\"\r\n    (ngModelChange)=\"onChoiceCategories()\"\r\n  >\r\n    <ng-template pTemplate=\"header\">\r\n      <p-checkbox\r\n        inputId=\"subRegion\"\r\n        [ngModel]=\"isAllSelected\"\r\n        (click)=\"selectionAllChanged($event)\"\r\n        [binary]=\"true\"\r\n      ></p-checkbox>\r\n    </ng-template>\r\n  </p-treeSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, forwardRef, Input, OnInit, Output} from '@angular/core';\r\nimport {take} from 'rxjs/operators';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {CrmPositionsService} from '../../../crm/services/crm-positions.service';\r\nimport {CrmPosition} from '../../../business-trips/models/crm-position';\r\n\r\n@Component({\r\n  selector: 'app-crm-position-picker',\r\n  templateUrl: './crm-position-picker.component.html',\r\n  styleUrls: ['./crm-position-picker.component.scss'],\r\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => CrmPositionPickerComponent), multi: true}]\r\n})\r\nexport class CrmPositionPickerComponent implements OnInit, ControlValueAccessor {\r\n  @Output() valueChange = new EventEmitter<number>();\r\n  @Input() position: number;\r\n  @Input() isDisabled = false;\r\n\r\n  positions: CrmPosition[];\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private crmPositionService: CrmPositionsService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getAll();\r\n  }\r\n\r\n  getAll() {\r\n    this.crmPositionService\r\n      .get()\r\n      .pipe(take(1))\r\n      .subscribe((res) => {\r\n        this.positions = res;\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  onChange(position: number) {\r\n    this.setValue(position);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.valueChange.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    // okay\r\n  }\r\n\r\n  private setValue(position: number) {\r\n    this.position = position;\r\n    this.valueChange.emit(this.position);\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    this.position = obj;\r\n  }\r\n}\r\n","<p-dropdown\r\n  [filter]=\"true\"\r\n  [showClear]=\"true\"\r\n  [(ngModel)]=\"position\"\r\n  [options]=\"positions\"\r\n  [disabled]=\"isLoading || isDisabled\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n  optionValue=\"id\"\r\n  optionLabel=\"title\"\r\n  placeholder=\"Choose Position\">\r\n</p-dropdown>\r\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from '@angular/core';\r\nimport {forkJoin, Subject, takeUntil} from 'rxjs';\r\nimport {Country} from '@shared/models/country';\r\nimport {RegionService} from '@shared/services/region.service';\r\nimport {CountryService} from '@shared/services/country.service';\r\nimport {Region} from '@shared/models/region';\r\n\r\n@Component({\r\n  selector: 'pek-crm-tree-company-picker',\r\n  templateUrl: './crm-tree-company-picker.component.html',\r\n  styleUrls: ['./crm-tree-company-picker.component.scss']\r\n})\r\nexport class CrmTreeCompanyPickerComponent implements OnInit, OnDestroy {\r\n  @Input() selectedRegion: Region;\r\n  @Output() regionSelected: EventEmitter<Region> = new EventEmitter<Region>();\r\n  regions: Region[] = [];\r\n  countries: Country[] = [];\r\n  tree: any[];\r\n\r\n  selectedNode: any;\r\n  private destroy$ = new Subject();\r\n  constructor(\r\n    private readonly regionService: RegionService,\r\n    private readonly countryService: CountryService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.loadInfo();\r\n  }\r\n\r\n  loadInfo() {\r\n    this.selectedNode = null;\r\n    forkJoin({\r\n      regions: this.regionService.get(),\r\n      countries: this.countryService.get()\r\n    }).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(({regions, countries}) => {\r\n      this.regions = regions;\r\n      this.countries = countries;\r\n      this.tree = [];\r\n      this.createTree();\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    this.tree.push({\r\n      label: 'Not Country',\r\n      selectable: false,\r\n      data: {country: {name: 'Not Country'}},\r\n      children: this.regions.filter(r => !r.country).map(region => {\r\n        return {\r\n          label: region.name,\r\n          data: {region: region},\r\n          children: [],\r\n        };\r\n      })\r\n    });\r\n\r\n    this.countries.forEach(country => {\r\n      this.tree.push({\r\n        label: country.name + ' (' + country.alpha2_code + ')',\r\n        selectable: false,\r\n        data: {country: country},\r\n        children: this.regions.filter(r => r.country).filter(r => (r.country as Country).id === country.id).map(region => {\r\n          return {\r\n            label: region.name,\r\n            data: {region: region},\r\n            children: [],\r\n          };\r\n        })\r\n      });\r\n    });\r\n\r\n    if (this.selectedRegion) {\r\n      this.tree.forEach(country => {\r\n        country.children.forEach(region => {\r\n          if (region.data.region.id === this.selectedRegion.id) {\r\n            this.selectedNode = region;\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    this.tree = this.tree.map(n => n);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  changed($event: any) {\r\n    this.regionSelected.emit($event.data.region);\r\n  }\r\n}\r\n","<p-treeSelect\r\n  [(ngModel)]=\"selectedNode\"\r\n  [options]=\"tree\"\r\n  [filter]=\"true\"\r\n  (ngModelChange)=\"changed($event)\"\r\n  placeholder=\"Select Region\">\r\n  <ng-template pTemplate=\"value\" let-options>\r\n    <ng-template [ngIf]=\"!selectedNode\">\r\n      Select Company\r\n    </ng-template>\r\n    <ng-template [ngIf]=\"selectedNode\">\r\n      {{options.data.region.country ? options.data.region.country.name : 'Have No Country'}} - {{options.data.region.name}}\r\n    </ng-template>\r\n  </ng-template>\r\n</p-treeSelect>\r\n","import {Component, EventEmitter, forwardRef, Input, OnInit, Output} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {take} from 'rxjs/operators';\r\nimport {Currency} from '@shared/models/currency';\r\nimport {CurrenciesService} from '@shared/services/currencies.service';\r\n\r\n@Component({\r\n  selector: 'pek-currency-picker',\r\n  templateUrl: './currency-picker.component.html',\r\n  styleUrls: ['./currency-picker.component.scss'],\r\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => CurrencyPickerComponent), multi: true}]\r\n})\r\nexport class CurrencyPickerComponent implements OnInit, ControlValueAccessor {\r\n  @Output() valueChange = new EventEmitter<Currency>();\r\n  @Input() currency: string;\r\n  @Input() showClear: boolean;\r\n  @Input() isDisabled: boolean;\r\n\r\n  currencies: Currency[];\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private currencyService: CurrenciesService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getAll();\r\n  }\r\n\r\n  getAll() {\r\n    this.currencyService\r\n      .get()\r\n      .pipe(take(1))\r\n      .subscribe((res) => {\r\n        this.currencies = res;\r\n        this.isLoading = false;\r\n      });\r\n  }\r\n\r\n  onChange(value: string) {\r\n    this.setValue(value);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.valueChange.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    // okay\r\n  }\r\n\r\n  private setValue(value: string) {\r\n    this.currency = value;\r\n    this.valueChange.emit(this.currencies.find(currency => currency.code === this.currency));\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    this.currency = obj;\r\n  }\r\n}\r\n","<p-dropdown\r\n  [filter]=\"true\"\r\n  [showClear]=\"showClear\"\r\n  [(ngModel)]=\"currency\"\r\n  [options]=\"currencies\"\r\n  [disabled]=\"isLoading || isDisabled\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n  optionValue=\"code\"\r\n  optionLabel=\"name\"\r\n  placeholder=\"Choose Currency\">\r\n</p-dropdown>\r\n","import {\r\n  Component,\r\n  ElementRef,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Output,\r\n  SimpleChanges,\r\n  ViewChild\r\n} from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'pek-date-time-picker',\r\n  templateUrl: './date-time-picker.component.html',\r\n  styleUrls: ['./date-time-picker.component.scss']\r\n})\r\nexport class DateTimePickerComponent implements OnInit, OnChanges {\r\n  @Input() placeholder: string;\r\n  @Input() maxDate: Date;\r\n  @Input() minDate: Date;\r\n  @Output() setDate: EventEmitter<Date> = new EventEmitter<Date>();\r\n  @Output() clearDate: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n  @Output() select: EventEmitter<Date> = new EventEmitter<Date>();\r\n  @Output() close: EventEmitter<Date> = new EventEmitter<Date>();\r\n  @ViewChild('dateInput') dateInput: ElementRef;\r\n  inputValue = '';\r\n  @Input() date: Date;\r\n  @Input() currentDate: Date;\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.date) {\r\n      this.currentDate = this.date;\r\n      this.addDate(this.currentDate)\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    // this.onChange();\r\n  }\r\n\r\n  clickOutside() {\r\n    if (!this.currentDate) {\r\n      this.date = null;\r\n      this.currentDate = null;\r\n    } else {\r\n      this.date = this.currentDate;\r\n    }\r\n  }\r\n\r\n  setValue() {\r\n    this.currentDate = this.date;\r\n    this.setDate.emit(this.currentDate);\r\n  }\r\n\r\n  show() {\r\n    if (!this.date) {\r\n      this.addDate();\r\n    }\r\n  }\r\n\r\n  onSelect() {\r\n    console.log('this.date onSelect', this.date);\r\n    this.select.emit(this.date)\r\n  }\r\n\r\n  addDate(date = new Date()) {\r\n    let hour = date.getHours() + '';\r\n    let minutes = date.getMinutes() + '';\r\n\r\n    if (+hour < 10) {\r\n      hour = `0${hour}`;\r\n    }\r\n\r\n    if (+minutes < 10) {\r\n      minutes = `0${minutes}`;\r\n    }\r\n\r\n    this.inputValue = `${hour}:${minutes}`;\r\n  }\r\n\r\n  onChange() {\r\n    const date = new Date(this.date).setHours(0, 0, 0, 0);\r\n    const hours = +this.inputValue.substring(0, 2);\r\n    const minutes = +this.inputValue.substring(2, 4);\r\n    this.date = new Date(minutes * 60000 + hours * 3600000 + date);\r\n\r\n    this.onSelect();\r\n  }\r\n\r\n  clear() {\r\n    this.addDate();\r\n    this.currentDate = null;\r\n    this.clearDate.emit(true);\r\n  }\r\n\r\n  clearClick() {\r\n    this.clearDate.emit(true);\r\n  }\r\n\r\n  onClose() {\r\n    this.close.emit(this.currentDate);\r\n  }\r\n}\r\n","<div class=\"date-time-picker\">\r\n  <p-calendar\r\n    [maxDate]=\"maxDate\"\r\n    [minDate]=\"minDate\"\r\n    [showTime]=\"true\"\r\n    [showClear]=\"true\"\r\n    [showButtonBar]=\"true\"\r\n    [(ngModel)]=\"date\"\r\n    [readonlyInput]=\"true\"\r\n    [hideOnDateTimeSelect]=\"false\"\r\n    (onShow)=\"show()\"\r\n    (onClickOutside)=\"clickOutside()\"\r\n    (onClear)=\"clear()\"\r\n    (onClearClick)=\"clearClick()\"\r\n    (onSelect)=\"onSelect()\"\r\n    (onClose)=\"onClose()\"\r\n    #dateInput\r\n    dateFormat=\"dd/mm/yy\"\r\n    hourFormat=\"24\"\r\n    [placeholder]=\"placeholder\"\r\n  >\r\n    <p-footer>\r\n      <div class=\"date-time-picker__footer\">\r\n        <input\r\n          type=\"text\"\r\n          [class.disabled]=\"!date\"\r\n          [(ngModel)]=\"inputValue\"\r\n          mask=\"Hh:m0\"\r\n          [leadZeroDateTime]=\"true\"\r\n          (input)=\"onChange()\"\r\n        >\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          [disabled]=\"inputValue.length < 4 || !date\"\r\n          (click)=\"setValue(); dateInput.toggle()\"\r\n        >\r\n          Set Date\r\n        </button>\r\n      </div>\r\n    </p-footer>\r\n  </p-calendar>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from '@angular/core';\r\nimport {EmployeeService} from '@shared/services/employee.service';\r\nimport {Employee} from '@shared/models/employee';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-employee-picker',\r\n  templateUrl: './employee-picker.component.html',\r\n  styleUrls: ['./employee-picker.component.scss']\r\n})\r\nexport class EmployeePickerComponent implements OnInit, OnDestroy {\r\n  @Output() selectEmployee: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() isDisabled: boolean = false;\r\n\r\n  selectEmployeeId: number;\r\n  isLoading = true;\r\n\r\n  employees: Employee[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly employeeService: EmployeeService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getEmployees();\r\n  }\r\n\r\n  getEmployees() {\r\n    this.employeeService.getAll().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(employees => {\r\n      this.employees = employees;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectTechnology() {\r\n    this.selectEmployee.emit(this.selectEmployeeId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"employee-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"employees\"\r\n    placeholder=\"Select Employee\"\r\n    [(ngModel)]=\"selectEmployeeId\"\r\n    (ngModelChange)=\"onSelectTechnology()\"\r\n    optionLabel=\"fullName\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\nimport {EmployeePosition} from '@shared/models/employee-position';\r\nimport {EmployeePositionService} from '@shared/services/employee-position.service';\r\n\r\n@Component({\r\n  selector: 'pek-employee-position-picker',\r\n  templateUrl: './employee-position-picker.component.html',\r\n  styleUrls: ['./employee-position-picker.component.scss']\r\n})\r\nexport class EmployeePositionPickerComponent implements OnInit {\r\n\r\n  @Output() selectPosition: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() currentPositionId: number;\r\n  @Input() isDisabled: boolean = false\r\n  isLoading = true;\r\n  positions: EmployeePosition[] = [];\r\n  selectedPositionId: number;\r\n\r\n  constructor(\r\n    private readonly employeePositionService: EmployeePositionService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.employeePositionService.get().pipe(\r\n    ).subscribe(positions => {\r\n      this.positions = positions;\r\n\r\n      if (this.currentPositionId) {\r\n        this.selectedPositionId = this.currentPositionId;\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectCompany() {\r\n    this.selectPosition.emit(this.selectedPositionId);\r\n  }\r\n\r\n}\r\n","<div class=\"company-picker\">\r\n  <p-dropdown\r\n    [filter]=\"true\"\r\n    *ngIf=\"!isLoading else spinner\"\r\n    [options]=\"positions\"\r\n    placeholder=\"Select Position\"\r\n    [(ngModel)]=\"selectedPositionId\"\r\n    (ngModelChange)=\"onSelectCompany()\"\r\n    optionLabel=\"title\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n    [disabled]=\"isDisabled\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {LocatorService} from '../../../warehouse/services/locator.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {Product} from '../../../product-structure/models/product';\r\nimport {Locator} from '../../../warehouse/models/locator';\r\n\r\n@Component({\r\n  selector: 'pek-group-locator-picker',\r\n  templateUrl: './group-locator-picker.component.html',\r\n  styleUrls: ['./group-locator-picker.component.scss']\r\n})\r\nexport class GroupLocatorPickerComponent implements OnInit {\r\n  @Input() selectedLocatorId: number;\r\n  @Input() product: Product;\r\n  @Input() uniqueLocators: Locator[];\r\n  locators: Locator[];\r\n  @Output() selectLocator: EventEmitter<number> = new EventEmitter<number>();\r\n  @Output() selectLocatorFull: EventEmitter<Locator> = new EventEmitter<Locator>();\r\n  isLoading = true;\r\n  groupLocators = [];\r\n  locatorsMap = {};\r\n\r\n  selectLocatorId: number;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private locatorService: LocatorService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.selectedLocatorId) {\r\n      this.selectLocatorId = this.selectedLocatorId;\r\n    }\r\n\r\n    this.getLocators();\r\n  }\r\n\r\n  getLocators() {\r\n    this.locatorService.getAll().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(locators => {\r\n      this.locators = locators;\r\n      this.prepareLocators();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  prepareLocators(): void {\r\n    this.locators.forEach(element => {\r\n\r\n      let isUnique = false;\r\n      if (this.locatorsMap[element.warehouse.id]) {\r\n        const warehouseId = element.warehouse.id;\r\n        const locatorId = element.id;\r\n        if (this.uniqueLocators) {\r\n          const uniquesWarehouse = this.uniqueLocators.find(locator => {\r\n            return locator.warehouse.id === warehouseId;\r\n          });\r\n          if (uniquesWarehouse) {\r\n            isUnique = true;\r\n          }\r\n          const isExists = this.uniqueLocators.find(locator => {\r\n            return locator.warehouse.id === warehouseId && locator.id === locatorId\r\n          });\r\n\r\n          if (!isExists && uniquesWarehouse) return;\r\n        }\r\n\r\n        this.locatorsMap[element.warehouse.id].items.push({\r\n          label: element.name + ' R:' + element.row + ' Col:' + element.column + ' Sh:' + element.shelf + ' Pl:' + element.place,\r\n          value: element.id,\r\n          isUnique: isUnique\r\n        });\r\n      } else {\r\n        const warehouseId = element.warehouse.id;\r\n        const locatorId = element.id;\r\n        if (this.uniqueLocators) {\r\n          const uniquesWarehouse = this.uniqueLocators.find(locator => {\r\n            return locator.warehouse.id === warehouseId;\r\n          });\r\n          const isExists = this.uniqueLocators.find(locator => {\r\n            return locator.id === locatorId\r\n          });\r\n          if (uniquesWarehouse) {\r\n            isUnique = true;\r\n          }\r\n          if (!isExists && uniquesWarehouse) return;\r\n        }\r\n\r\n        this.locatorsMap[element.warehouse.id] = {};\r\n        this.locatorsMap[element.warehouse.id].label = element.warehouse.name;\r\n        this.locatorsMap[element.warehouse.id].value = warehouseId;\r\n        this.locatorsMap[element.warehouse.id].items = [];\r\n        this.locatorsMap[element.warehouse.id].items.push({\r\n          label: element.name + ' R:' + element.row + ' Col:' + element.column + ' Sh:' + element.shelf + ' Pl:' + element.place,\r\n          value: element.id,\r\n          isUnique: isUnique\r\n        });\r\n      }\r\n    });\r\n\r\n    Object.keys(this.locatorsMap).forEach(id => {\r\n      this.groupLocators.push(this.locatorsMap[id]);\r\n    });\r\n  }\r\n\r\n  onSelectLocator() {\r\n    this.selectLocator.emit(this.selectLocatorId);\r\n    this.selectLocatorFull.emit(this.locators.find(locator => locator.id === this.selectLocatorId));\r\n  }\r\n}\r\n","<div class=\"group-locator-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"groupLocators\"\r\n    placeholder=\"Select Locator\"\r\n    [(ngModel)]=\"selectLocatorId\"\r\n    (ngModelChange)=\"onSelectLocator()\"\r\n    [showClear]=\"true\"\r\n    [filter]=\"true\"\r\n    [group]=\"true\"\r\n  >\r\n    <ng-template let-group pTemplate=\"group\">\r\n      <div class=\"d-flex align-items-center\">\r\n        <span>{{group.label}}</span>\r\n      </div>\r\n    </ng-template>\r\n    <ng-template let-item pTemplate=\"item\">\r\n      <div class=\"country-item\">\r\n        <div [class.unique]=\"item.isUnique\">{{item.label}}</div>\r\n      </div>\r\n    </ng-template>\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {LocatorService} from '../../../warehouse/services/locator.service';\r\nimport {Subject} from 'rxjs';\r\nimport {Locator} from '../../../warehouse/models/locator';\r\n\r\n@Component({\r\n  selector: 'pek-locator-picker',\r\n  templateUrl: './locator-picker.component.html',\r\n  styleUrls: ['./locator-picker.component.scss']\r\n})\r\nexport class LocatorPickerComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Output() selectLocator: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() isAllLocators = true;\r\n  @Input() warehouseId: number = null;\r\n  @Input() isDisabled = false;\r\n\r\n  isLoading = false;\r\n  locators: Locator[] = [];\r\n\r\n  selectLocatorId: number;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private locatorService: LocatorService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    this.selectLocatorId = null;\r\n    if ('warehouseId' in changes) {\r\n      if (!this.isAllLocators && this.warehouseId) {\r\n        this.getLocatorsForWarehouse();\r\n      } else if (!this.warehouseId) {\r\n        this.locators = [];\r\n        this.isDisabled = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  getLocatorsForWarehouse() {\r\n    this.isLoading = true;\r\n    this.locatorService.get([{name: 'warehouse', value: this.warehouseId}]).subscribe(locators => {\r\n      this.locators = locators;\r\n      this.isDisabled = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectLocator() {\r\n    this.selectLocator.emit(this.selectLocatorId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"locator-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"locators\"\r\n    placeholder=\"Select Locator\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"id\"\r\n    [(ngModel)]=\"selectLocatorId\"\r\n    (ngModelChange)=\"onSelectLocator()\"\r\n    [showClear]=\"true\"\r\n    [disabled]=\"isDisabled\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-categories-picker',\r\n  templateUrl: './multi-categories-picker.component.html',\r\n  styleUrls: ['./multi-categories-picker.component.scss']\r\n})\r\nexport class MultiCategoriesPickerComponent implements OnInit {\r\n  @Output() choiceCategories: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  isLoading = true;\r\n  categories: Category[] = [];\r\n  categoriesTree: TreeNode<Category>[] = [];\r\n\r\n  selectedCategories: TreeNode<Category>[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly productCategoriesService: CategoriesService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.productCategoriesService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    const getChildren = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach(node => {\r\n        const children = this.categories.filter(c => c.parent === node.data.id);\r\n\r\n        if (children.length > 0) {\r\n          node.children = children.map(category => {\r\n            return {\r\n              label: category.name,\r\n              data: category,\r\n              children: []\r\n            };\r\n          });\r\n\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    const tree: TreeNode<Category>[] = this.categories.filter(c => !c.parent).map(category => {\r\n      return {\r\n        label: category.name,\r\n        data: <Category>category,\r\n        children: [],\r\n      };\r\n    });\r\n\r\n    getChildren(tree);\r\n\r\n    this.categoriesTree = [...tree];\r\n  }\r\n\r\n  onChoiceCategories() {\r\n    if (!this.selectedCategories || this.selectedCategories.length === 0) {\r\n      this.choiceCategories.next(null)\r\n    } else {\r\n      this.choiceCategories.next(this.selectedCategories.map(c => c.data.id).join(','))\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"multi-categories-picker\">\r\n  <p-treeSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"categoriesTree\"\r\n    selectionMode=\"checkbox\"\r\n    [(ngModel)]=\"selectedCategories\"\r\n    [showClear]=\"true\"\r\n    placeholder=\"Select Category\"\r\n    (ngModelChange)=\"onChoiceCategories()\"\r\n  ></p-treeSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\nimport {CompanyCategory} from '../../../crm/models/company-category';\r\nimport {CompanyCategoryService} from '../../../crm/services/company-category.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-company-category-picker',\r\n  templateUrl: './multi-company-category-picker.component.html',\r\n  styleUrls: ['./multi-company-category-picker.component.scss']\r\n})\r\nexport class MultiCompanyCategoryPickerComponent implements OnInit, OnChanges {\r\n  @Input() isDisabled = false;\r\n  @Output() selectCompanyCategories: EventEmitter<string> = new EventEmitter<string>();\r\n  @Output() selectCompanyCategoriesIds: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n  @Input() currentCompanyCategoriesIds: number[] = [];\r\n\r\n  isLoading = true;\r\n  companies: Partial<CompanyCategory>[] = [];\r\n  selectedCompanyCategories: Partial<CompanyCategory>[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly companyCategoryService: CompanyCategoryService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.companyCategoryService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.companies = categories;\r\n      this.findCompanyCategories();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('currentCompanyCategoriesIds' in changes) {\r\n      this.selectedCompanyCategories = [];\r\n      this.findCompanyCategories();\r\n    }\r\n  }\r\n\r\n  findCompanyCategories() {\r\n    if (this.currentCompanyCategoriesIds.length > 0) {\r\n      this.currentCompanyCategoriesIds.forEach(id => {\r\n        const findCompany = this.companies.find(t => t.id === id);\r\n\r\n        if (findCompany) {\r\n          this.selectedCompanyCategories.push(findCompany);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onSelectCompanyCategories() {\r\n    if (this.selectedCompanyCategories === null || this.selectedCompanyCategories?.length === 0) {\r\n      this.selectCompanyCategories.emit(null);\r\n      this.selectCompanyCategoriesIds.emit(null);\r\n    } else {\r\n      this.selectCompanyCategories.emit(this.selectedCompanyCategories.map(c => c.id).join(','));\r\n      this.selectCompanyCategoriesIds.emit(this.selectedCompanyCategories.map(c => c.id));\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"multi-company-category-picker\">\r\n  <p-multiSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"companies\"\r\n    [(ngModel)]=\"selectedCompanyCategories\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"Select Company Categories\"\r\n    (ngModelChange)=\"onSelectCompanyCategories()\"\r\n    [disabled]=\"isDisabled\"\r\n    [showClear]=\"true\"\r\n    [filter]=\"true\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-company-picker',\r\n  templateUrl: './multi-company-picker.component.html',\r\n  styleUrls: ['./multi-company-picker.component.scss']\r\n})\r\nexport class MultiCompanyPickerComponent implements OnInit, OnDestroy, OnChanges {\r\n  @Input() isDisabled = false;\r\n  @Input() currentCompaniesIds: number[] = [];\r\n  @Output() selectCompanies: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  isLoading = true;\r\n  companies: Partial<Company>[] = [];\r\n  selectedCompanies: Partial<Company>[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly companyService: CompanyService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.companyService.getShorts().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(companies => {\r\n      this.companies = companies;\r\n      this.findCompanies();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('currentCompaniesIds' in changes) {\r\n      this.selectedCompanies = [];\r\n      this.findCompanies();\r\n    }\r\n  }\r\n\r\n  findCompanies() {\r\n    if (this.currentCompaniesIds.length > 0) {\r\n      this.currentCompaniesIds.forEach(id => {\r\n        const findCompany = this.companies.find(t => t.id === id);\r\n\r\n        if (findCompany) {\r\n          this.selectedCompanies.push(findCompany);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onSelectCompanies() {\r\n    if (this.selectedCompanies === null || this.selectedCompanies?.length === 0) {\r\n      this.selectCompanies.emit(null);\r\n    } else {\r\n      this.selectCompanies.emit(this.selectedCompanies.map(c => c.id).join(','));\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"multi-company-picker\">\r\n  <p-multiSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"companies\"\r\n    [(ngModel)]=\"selectedCompanies\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"Select Companies\"\r\n    (ngModelChange)=\"onSelectCompanies()\"\r\n    [disabled]=\"isDisabled\"\r\n    [showClear]=\"true\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, forwardRef, Input, OnChanges, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {ControlValueAccessor, NG_VALUE_ACCESSOR} from '@angular/forms';\r\nimport {ContactPerson} from '@shared/models/contact-person';\r\nimport {ContactPersonService} from '../../../crm/services/contact-person.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-contacts-picker',\r\n  templateUrl: './multi-contacts-picker.component.html',\r\n  styleUrls: ['./multi-contacts-picker.component.scss'],\r\n  providers: [{provide: NG_VALUE_ACCESSOR, useExisting: forwardRef(() => MultiContactsPickerComponent), multi: true}]\r\n})\r\nexport class MultiContactsPickerComponent implements OnInit, ControlValueAccessor, OnChanges {\r\n\r\n  @Output() valueChange = new EventEmitter<number[]>();\r\n  @Output() valueChangeFull = new EventEmitter<ContactPerson[]>();\r\n  contacts: ContactPerson[];\r\n  @Input() contactsList: number[];\r\n  @Input() contactsListFull: ContactPerson[];\r\n  @Input() searchByCompany = false;\r\n  @Input() companyId: number;\r\n\r\n  constructor(\r\n    private contactPersonsService: ContactPersonService,\r\n  ) {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if ('companyId' in changes) {\r\n      if (this.companyId) {\r\n        this.search();\r\n      }\r\n    }\r\n    if ('contactsListFull' in changes) {\r\n      this.contactsList = this.contactsListFull.map(contact => contact.id)\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  search() {\r\n    if (!this.searchByCompany) {\r\n      this.getContactPersons(null);\r\n    }\r\n\r\n    if (this.searchByCompany && this.companyId) {\r\n      const query: [{ name: string; value: any }] = [{\r\n        name: 'company',\r\n        value: this.companyId\r\n      }];\r\n      this.getContactPersons(query);\r\n    }\r\n  }\r\n\r\n  getContactPersons(query: [{ name: string; value: any }]) {\r\n    this.contactPersonsService.getForce(query).subscribe(contacts => {\r\n      this.contacts = contacts;\r\n      if (this.contactsList) {\r\n        const selectedContacts = this.contacts\r\n          .filter(contact => this.contactsList\r\n            .findIndex(contListId => contListId === contact.id) >= 0).map(el => el.id);\r\n        this.setValue(selectedContacts);\r\n      }\r\n    });\r\n  }\r\n\r\n  onChange(contactPerson: number[]) {\r\n    this.setValue(contactPerson);\r\n  }\r\n\r\n  registerOnChange(fn: any): void {\r\n    this.valueChange.subscribe(fn);\r\n  }\r\n\r\n  registerOnTouched(fn: any): void {\r\n    // okay\r\n  }\r\n\r\n  private setValue(contactPerson: number[]) {\r\n    this.contactsList = contactPerson;\r\n    this.valueChange.emit(this.contactsList);\r\n    const foundContacts = this.contacts.filter(contact => contactPerson.findIndex(el => el === contact.id) > -1);\r\n    this.valueChangeFull.emit(foundContacts);\r\n  }\r\n\r\n  writeValue(obj: any): void {\r\n    this.contactsList = obj;\r\n  }\r\n}\r\n","<p-multiSelect\r\n  optionValue=\"id\"\r\n  optionLabel=\"first_name\"\r\n  [options]=\"contacts\"\r\n  [(ngModel)]=\"contactsList\"\r\n  (ngModelChange)=\"onChange($event)\"\r\n>\r\n  <ng-template let-contact pTemplate=\"item\">\r\n    <div class=\"contact-item\">\r\n      <div>{{contact.first_name}} {{contact.last_name}}</div>\r\n    </div>\r\n  </ng-template>\r\n</p-multiSelect>\r\n","import {Component, EventEmitter, Input, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Country} from '@shared/models/country';\r\nimport {CountryService} from '@shared/services/country.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-countries-picker',\r\n  templateUrl: './multi-countries-picker.component.html',\r\n  styleUrls: ['./multi-countries-picker.component.scss']\r\n})\r\nexport class MultiCountriesPickerComponent implements OnInit {\r\n  @Input() currentCountriesIds: number[] = [];\r\n  @Input() showClear: boolean = true;\r\n  @Output() selectCountries: EventEmitter<Country[]> = new EventEmitter<Country[]>();\r\n\r\n  isLoading = true;\r\n  countries: Country[] = [];\r\n  selectedCountries: Country[] = [];\r\n\r\n\r\n  constructor(\r\n    private countryService: CountryService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.countryService.get().pipe(\r\n    ).subscribe(countries => {\r\n      this.countries = countries;\r\n      this.findCountries();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('currentTechnologiesIds' in changes) {\r\n      this.selectedCountries = [];\r\n      this.findCountries();\r\n    }\r\n  }\r\n\r\n  onSelectCountries(countries: Country[]) {\r\n    if (countries) {\r\n      this.selectCountries.emit(countries);\r\n    } else {\r\n      this.selectCountries.emit(null);\r\n    }\r\n  }\r\n\r\n  findCountries() {\r\n    if (this.currentCountriesIds.length > 0) {\r\n      this.currentCountriesIds.forEach(id => {\r\n        const findTechnology = this.countries.find(t => t.id === id);\r\n\r\n        if (findTechnology) {\r\n          this.selectedCountries.push(findTechnology);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  panelShow($event: any) {\r\n    console.log('panelShow', $event);\r\n  }\r\n}\r\n","<div class=\"multi-countries-picker\">\r\n  <p-multiSelect\r\n    [showClear]=\"showClear\"\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"countries\"\r\n    [(ngModel)]=\"selectedCountries\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"Select Countries\"\r\n    (ngModelChange)=\"onSelectCountries($event)\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Locator} from '../../../warehouse/models/locator';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {LocatorService} from '../../../warehouse/services/locator.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-locator-picker',\r\n  templateUrl: './multi-locator-picker.component.html',\r\n  styleUrls: ['./multi-locator-picker.component.scss']\r\n})\r\nexport class MultiLocatorPickerComponent implements OnInit {\r\n  @Input() isDisabled = false;\r\n  @Input() currentWarehousesIds: number[] = [];\r\n  @Output() selectLocators: EventEmitter<Locator[]> = new EventEmitter<Locator[]>();\r\n\r\n  isLoading = false;\r\n  locators: Locator[] = [];\r\n  selectedLocators: Locator[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly locatorService: LocatorService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  getLocatorsForWarehouses() {\r\n    this.isDisabled = false;\r\n    this.isLoading = true;\r\n    this.locatorService.get([{name: 'warehouses', value: this.currentWarehousesIds}]).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(locators => {\r\n      this.locators = locators;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('currentWarehousesIds' in changes) {\r\n      this.selectedLocators = [];\r\n\r\n      if (this.currentWarehousesIds?.length > 0) {\r\n        this.getLocatorsForWarehouses();\r\n      } else {\r\n        this.locators = [];\r\n        this.isDisabled = true;\r\n      }\r\n    }\r\n  }\r\n\r\n  onSelectLocators(locators: Locator[]) {\r\n    this.selectLocators.emit(locators);\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"multi-locator-picker\">\r\n  <p-multiSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"locators\"\r\n    [(ngModel)]=\"selectedLocators\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"Select Locators\"\r\n    (ngModelChange)=\"onSelectLocators($event)\"\r\n    [disabled]=\"isDisabled\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-product-categories-picker',\r\n  templateUrl: './multi-product-categories-picker.component.html',\r\n  styleUrls: ['./multi-product-categories-picker.component.scss']\r\n})\r\nexport class MultiProductCategoriesPickerComponent implements OnInit {\r\n  @Output() choiceCategories: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n  @Output() choiceCategoryFolAllIds: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n  @Input() ignoredCategoryId: number;\r\n  @Input() currentCategoryId: number;\r\n\r\n  isLoading = true;\r\n  categories: Category[] = [];\r\n  categoriesTree: TreeNode<Category>[] = [];\r\n\r\n  selectedCategories: TreeNode<Category>[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly productCategoriesService: CategoriesService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.productCategoriesService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n\r\n      if (this.ignoredCategoryId) {\r\n        this.categories = this.categories.filter(c => c.id !== this.ignoredCategoryId);\r\n      }\r\n\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    const getChildren = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach(node => {\r\n        const children = this.categories.filter(c => c.parent === node.data.id);\r\n\r\n        if (children.length > 0) {\r\n          node.children = children.map(category => {\r\n            return {\r\n              label: category.name,\r\n              data: category,\r\n              children: []\r\n            };\r\n          });\r\n\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    const tree: TreeNode<Category>[] = this.categories.filter(c => !c.parent).map(category => {\r\n      return {\r\n        label: category.name,\r\n        data: <Category>category,\r\n        children: [],\r\n      };\r\n    });\r\n\r\n    getChildren(tree);\r\n\r\n    this.categoriesTree = [...tree];\r\n  }\r\n\r\n  onChoiceCategories() {\r\n    if (!this.selectedCategories) {\r\n      this.selectedCategories = [];\r\n    }\r\n\r\n    this.choiceCategories.emit(this.selectedCategories.map(n => n?.data?.id));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"product-category-picker\">\r\n  <p-treeSelect\r\n    selectionMode=\"checkbox\"\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"categoriesTree\"\r\n    [(ngModel)]=\"selectedCategories\"\r\n    [showClear]=\"true\"\r\n    placeholder=\"Select Category\"\r\n    (ngModelChange)=\"onChoiceCategories()\"\r\n  ></p-treeSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {ProductStructureCategory} from '../../../product-structure/models/product-structure-category';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {ProductStructureCategoryService} from '../../../product-structure/services/product-structure-category.service';\r\nimport {Category} from '../../../product-structure/models/category';\r\n\r\n@Component({\r\n  selector: 'pek-multi-product-structure-categories-picker',\r\n  templateUrl: './multi-product-structure-categories-picker.component.html',\r\n  styleUrls: ['./multi-product-structure-categories-picker.component.scss']\r\n})\r\nexport class MultiProductStructureCategoriesPickerComponent implements OnInit {\r\n  @Output() choiceCategories: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  isLoading = true;\r\n  categories: ProductStructureCategory[] = [];\r\n  categoriesTree: TreeNode<ProductStructureCategory>[] = [];\r\n\r\n  selectedCategories: TreeNode<ProductStructureCategory>[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly productStructureCategoryService: ProductStructureCategoryService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.productStructureCategoryService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    const getChildren = (nodes: TreeNode<ProductStructureCategory>[]) => {\r\n      nodes.forEach(node => {\r\n        const children = this.categories.filter(c => c.parent === node.data.id);\r\n\r\n        if (children.length > 0) {\r\n          node.children = children.map(category => {\r\n            return {\r\n              label: category.name,\r\n              data: category,\r\n              children: []\r\n            };\r\n          });\r\n\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    const tree: TreeNode<ProductStructureCategory>[] = this.categories.filter(c => !c.parent).map(category => {\r\n      return {\r\n        label: category.name,\r\n        data: <ProductStructureCategory>category,\r\n        children: [],\r\n      };\r\n    });\r\n\r\n    getChildren(tree);\r\n\r\n    this.categoriesTree = [...tree];\r\n  }\r\n\r\n  onChoiceCategories() {\r\n    if (!this.selectedCategories || this.selectedCategories.length === 0) {\r\n      this.choiceCategories.next(null)\r\n    } else {\r\n      this.choiceCategories.next(this.selectedCategories.map(c => c.data.id).join(','))\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"multi-product-structure-categories-picker\">\r\n  <p-treeSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"categoriesTree\"\r\n    selectionMode=\"checkbox\"\r\n    [(ngModel)]=\"selectedCategories\"\r\n    [showClear]=\"true\"\r\n    placeholder=\"Select Category\"\r\n    (ngModelChange)=\"onChoiceCategories()\"\r\n  ></p-treeSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\nimport {PurchaseCategory} from '../../../purchasing/models/purchase-category';\r\nimport {PurchasingCategoryService} from '../../../purchasing/services/purchasing-category.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-purchase-category-picker',\r\n  templateUrl: './multi-purchase-category-picker.component.html',\r\n  styleUrls: ['./multi-purchase-category-picker.component.scss']\r\n})\r\nexport class MultiPurchaseCategoryPickerComponent implements OnInit {\r\n  @Output() choiceCategories: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n  @Output() choiceCategoryFolAllIds: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n  @Input() ignoredCategoryId: number;\r\n  @Input() currentCategoryId: number;\r\n\r\n  isLoading = true;\r\n  categories: PurchaseCategory[] = [];\r\n  categoriesTree: TreeNode<PurchaseCategory>[] = [];\r\n\r\n  selectedCategories: TreeNode<PurchaseCategory>[] = [];\r\n\r\n  constructor(\r\n    private readonly purchaseCategoryService: PurchasingCategoryService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.purchaseCategoryService.get().subscribe(categories => {\r\n      this.categories = categories;\r\n\r\n      if (this.ignoredCategoryId) {\r\n        this.categories = this.categories.filter(c => c.id !== this.ignoredCategoryId);\r\n      }\r\n\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    const getChildren = (nodes: TreeNode<PurchaseCategory>[]) => {\r\n      nodes.forEach(node => {\r\n        const children = this.categories.filter(c => c.parent === node.data.id);\r\n\r\n        if (children.length > 0) {\r\n          node.children = children.map(category => {\r\n            return {\r\n              label: category.name,\r\n              data: category,\r\n              children: []\r\n            };\r\n          });\r\n\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    const tree: TreeNode<PurchaseCategory>[] = this.categories.filter(c => !c.parent).map(category => {\r\n      return {\r\n        label: category.name,\r\n        data: <PurchaseCategory>category,\r\n        children: [],\r\n      };\r\n    });\r\n\r\n    getChildren(tree);\r\n\r\n    this.categoriesTree = [...tree];\r\n  }\r\n\r\n  onChoiceCategories() {\r\n    if (!this.selectedCategories) {\r\n      this.selectedCategories = [];\r\n    }\r\n\r\n    this.choiceCategories.emit(this.selectedCategories.map(n => n?.data?.id));\r\n  }\r\n\r\n}\r\n","<div class=\"product-category-picker\">\r\n  <p-treeSelect\r\n    selectionMode=\"checkbox\"\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"categoriesTree\"\r\n    [(ngModel)]=\"selectedCategories\"\r\n    [showClear]=\"true\"\r\n    placeholder=\"Select Category\"\r\n    (ngModelChange)=\"onChoiceCategories()\"\r\n  ></p-treeSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {SalesStatus} from '../../../sales/models/sales-chain';\r\nimport {SalesStatusService} from '../../../sales/services/sales-status.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-sales-status-picker',\r\n  templateUrl: './multi-sales-status-picker.component.html',\r\n  styleUrls: ['./multi-sales-status-picker.component.scss']\r\n})\r\nexport class MultiSalesStatusPickerComponent implements OnInit {\r\n\r\n  @Input() isDisabled = false;\r\n  @Output() selectStatuses: EventEmitter<string> = new EventEmitter<string>();\r\n\r\n  isLoading = true;\r\n  companies: Partial<SalesStatus>[] = [];\r\n  selectedStatuses: Partial<SalesStatus>[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly salesStatusService: SalesStatusService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.salesStatusService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(statuses => {\r\n      this.companies = statuses;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectStatuses() {\r\n    if (this.selectedStatuses === null || this.selectedStatuses?.length === 0) {\r\n      this.selectStatuses.emit(null);\r\n    } else {\r\n      this.selectStatuses.emit(this.selectedStatuses.map(c => c.id).join(','));\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"multi-sales-status-picker\">\r\n  <p-multiSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"companies\"\r\n    [(ngModel)]=\"selectedStatuses\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"Select Sales Statuses\"\r\n    (ngModelChange)=\"onSelectStatuses()\"\r\n    [disabled]=\"isDisabled\"\r\n    [showClear]=\"true\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {Status} from '../../../procurement/models/status';\r\nimport {StatusService} from '../../../procurement/services/status.service';\r\n\r\n@Component({\r\n  selector: 'pek-multi-statuses-picker',\r\n  templateUrl: './multi-statuses-picker.component.html',\r\n  styleUrls: ['./multi-statuses-picker.component.scss']\r\n})\r\nexport class MultiStatusesPickerComponent implements OnInit {\r\n  @Output() selectStatuses: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n  @Output() isFinalStatusSelected: EventEmitter<boolean> = new EventEmitter<boolean>();\r\n  @Input() accountingType: number;\r\n\r\n  isLoading = true;\r\n  statuses: Status[] = [];\r\n  selectedStatuses: Status[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly statusService: StatusService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.statusService.get([\r\n      {name: 'accounting_type', value: this.accountingType}\r\n    ]).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(statuses => {\r\n      this.statuses = statuses;\r\n      console.log('statuses', this.statuses);\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectStatuses(statuses: Status[]) {\r\n    if (statuses) {\r\n      const isOnStockSelected = statuses.findIndex(status => status.is_final) > -1;\r\n      this.isFinalStatusSelected.emit(isOnStockSelected);\r\n      this.selectStatuses.emit(statuses.map(s => s.id));\r\n    } else {\r\n      this.isFinalStatusSelected.emit(false);\r\n      this.selectStatuses.emit(null);\r\n    }\r\n  }\r\n}\r\n","<div class=\"status-picker\">\r\n  <p-multiSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"statuses\"\r\n    [(ngModel)]=\"selectedStatuses\"\r\n    optionLabel=\"value\"\r\n    placeholder=\"Select Statuses\"\r\n    (ngModelChange)=\"onSelectStatuses($event)\"\r\n    [showClear]=\"true\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {TechnologyService} from '../../../product-structure/services/technology.service';\r\nimport {Technology} from '../../../product-structure/models/technology';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-multi-technology-picker',\r\n  templateUrl: './multi-technology-picker.component.html',\r\n  styleUrls: ['./multi-technology-picker.component.scss']\r\n})\r\nexport class MultiTechnologyPickerComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() currentTechnologiesIds: number[] = [];\r\n  @Output() selectTechnologies: EventEmitter<Technology[]> = new EventEmitter<Technology[]>();\r\n\r\n  isLoading = true;\r\n  technologies: Technology[] = [];\r\n  selectedTechnologies: Technology[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly technologyService: TechnologyService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.technologyService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(technologies => {\r\n      this.technologies = technologies;\r\n      this.findTechnologies();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('currentTechnologiesIds' in changes) {\r\n      this.selectedTechnologies = [];\r\n      this.findTechnologies();\r\n    }\r\n  }\r\n\r\n  onSelectTechnologies(technologies: Technology[]) {\r\n    if (technologies) {\r\n      this.selectTechnologies.emit(technologies);\r\n    } else {\r\n      this.selectTechnologies.emit(null);\r\n    }\r\n  }\r\n\r\n  findTechnologies() {\r\n    if (this.currentTechnologiesIds.length > 0) {\r\n      this.currentTechnologiesIds.forEach(id => {\r\n        const findTechnology = this.technologies.find(t => t.id === id);\r\n\r\n        if (findTechnology) {\r\n          this.selectedTechnologies.push(findTechnology);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"technology-picker\">\r\n  <p-multiSelect\r\n    [showClear]=\"true\"\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"technologies\"\r\n    [(ngModel)]=\"selectedTechnologies\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"Select Technologies\"\r\n    (ngModelChange)=\"onSelectTechnologies($event)\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Vehicle} from \"../../../business-trips/models/vehicle\";\r\nimport {VehicleService} from \"../../../business-trips/services/vehicle.service\";\r\n\r\n@Component({\r\n  selector: 'pek-multi-vehicle-picker',\r\n  templateUrl: './multi-vehicle-picker.component.html',\r\n  styleUrls: ['./multi-vehicle-picker.component.scss']\r\n})\r\nexport class MultiVehiclePickerComponent implements OnInit {\r\n  @Input() currentVehiclesIds: number[] = [];\r\n  @Output() selectVehicles: EventEmitter<Vehicle[]> = new EventEmitter<Vehicle[]>();\r\n\r\n  isLoading = true;\r\n  vehicles: Vehicle[] = [];\r\n  selectedVehicles: Vehicle[] = [];\r\n\r\n  constructor(\r\n    private vehicleService: VehicleService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.vehicleService.get().pipe(\r\n    ).subscribe(vehicles => {\r\n      this.vehicles = vehicles;\r\n      this.prepareVehicles();\r\n      this.findVehicles();\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  prepareVehicles() {\r\n    this.vehicles = this.vehicles.map((vehicle) => {\r\n      return {\r\n        ...vehicle,\r\n        displayLabel: vehicle.model + ' ' + vehicle.number\r\n      };\r\n    });\r\n  }\r\n\r\n  onSelectVehicles(vehicles: Vehicle[]) {\r\n    if (vehicles) {\r\n      this.selectVehicles.emit(vehicles);\r\n    } else {\r\n      this.selectVehicles.emit(null);\r\n    }\r\n  }\r\n\r\n  findVehicles() {\r\n    if (this.currentVehiclesIds.length > 0) {\r\n      this.currentVehiclesIds.forEach(id => {\r\n        const findVehicle = this.vehicles.find(v => v.id === id);\r\n\r\n        if (findVehicle) {\r\n          this.selectedVehicles.push(findVehicle);\r\n        }\r\n      });\r\n    }\r\n  }\r\n}\r\n","<div class=\"multi-vehicle-picker\">\r\n  <p-multiSelect\r\n    [showClear]=\"true\"\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"vehicles\"\r\n    [(ngModel)]=\"selectedVehicles\"\r\n    optionLabel=\"displayLabel\"\r\n    placeholder=\"Select Vehicles\"\r\n    (ngModelChange)=\"onSelectVehicles($event)\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {WarehouseService} from '../../../warehouse/services/warehouse.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {Warehouse} from '../../../warehouse/models/warehouse';\r\n\r\n@Component({\r\n  selector: 'pek-multi-warehouse-picker',\r\n  templateUrl: './multi-warehouse-picker.component.html',\r\n  styleUrls: ['./multi-warehouse-picker.component.scss']\r\n})\r\nexport class MultiWarehousePickerComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Input() currentWarehousesIds: number[] = [];\r\n  @Output() selectWarehouses: EventEmitter<Warehouse[]> = new EventEmitter<Warehouse[]>();\r\n\r\n  isLoading = true;\r\n  warehouses: Warehouse[] = [];\r\n  selectedWarehouses: Warehouse[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly warehouseService: WarehouseService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.warehouseService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(warehouses => {\r\n      this.warehouses = warehouses;\r\n      this.findWarehouses();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('currentWarehousesIds' in changes) {\r\n      this.selectedWarehouses = [];\r\n      this.findWarehouses();\r\n    }\r\n  }\r\n\r\n  onSelectWarehouses(warehouses: Warehouse[]) {\r\n    this.selectWarehouses.emit(warehouses);\r\n  }\r\n\r\n  findWarehouses() {\r\n    if (this.currentWarehousesIds?.length > 0) {\r\n      this.currentWarehousesIds.forEach(id => {\r\n        const findWarehouses = this.warehouses.find(t => t.id === id);\r\n\r\n        if (findWarehouses) {\r\n          this.selectedWarehouses.push(findWarehouses);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"multi-warehouse-picker\">\r\n  <p-multiSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"warehouses\"\r\n    [(ngModel)]=\"selectedWarehouses\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"Select Warehouses\"\r\n    (ngModelChange)=\"onSelectWarehouses($event)\"\r\n  ></p-multiSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {ENomenclatureType} from '@shared/models/nomenclature';\r\n\r\n@Component({\r\n  selector: 'pek-nomenclature-type-picker',\r\n  templateUrl: './nomenclature-type-picker.component.html',\r\n  styleUrls: ['./nomenclature-type-picker.component.scss']\r\n})\r\nexport class NomenclatureTypePickerComponent implements OnInit {\r\n  @Input() currentNomenclatureType: ENomenclatureType = null;\r\n  @Input() isDisabled = false;\r\n  @Output() choiceNomenclatureType: EventEmitter<ENomenclatureType> = new EventEmitter<ENomenclatureType>();\r\n  @Input() filteredNomenclatureTypes: ENomenclatureType[] = [];\r\n\r\n  selectNomenclatureType: ENomenclatureType = null;\r\n\r\n  nomenclatureTypes: { label: string, value: ENomenclatureType }[] = [\r\n    {label: 'Purchased', value: ENomenclatureType.PURCHASED},\r\n    {label: 'Assembly', value: ENomenclatureType.ASSEMBLY},\r\n    {label: 'Manufactured', value: ENomenclatureType.MANUFACTURED}\r\n  ];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n    if (this.filteredNomenclatureTypes.length > 0) {\r\n      let types = [];\r\n\r\n      this.filteredNomenclatureTypes.forEach(type => {\r\n        types = [...types, ...this.nomenclatureTypes.filter(t => t.value === type)];\r\n      });\r\n\r\n      this.nomenclatureTypes = types;\r\n    }\r\n\r\n    this.setCurrentNomenclatureType();\r\n  }\r\n\r\n  setCurrentNomenclatureType() {\r\n    if (this.currentNomenclatureType !== null) {\r\n      this.selectNomenclatureType = this.currentNomenclatureType;\r\n    }\r\n  }\r\n\r\n  onSelectNomenclatureType() {\r\n    this.choiceNomenclatureType.emit(this.selectNomenclatureType);\r\n  }\r\n}\r\n","<div class=\"nomenclature-type-picker\">\r\n  <p-dropdown\r\n    [options]=\"nomenclatureTypes\"\r\n    optionLabel=\"label\"\r\n    optionValue=\"value\"\r\n    placeholder=\"Select Type\"\r\n    [disabled]=\"isDisabled\"\r\n    [showClear]=\"true\"\r\n    [(ngModel)]=\"selectNomenclatureType\"\r\n    (ngModelChange)=\"onSelectNomenclatureType()\"\r\n  ></p-dropdown>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-product-category-picker',\r\n  templateUrl: './product-category-picker.component.html',\r\n  styleUrls: ['./product-category-picker.component.scss'],\r\n})\r\nexport class ProductCategoryPickerComponent implements OnInit, OnDestroy, OnChanges {\r\n  @Output() choiceCategory: EventEmitter<Category> = new EventEmitter<Category>();\r\n  @Output() choiceCategoryFolAllIds: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n  @Input() isAllIds = false;\r\n  @Input() ignoredCategoryId: number;\r\n  @Input() currentCategoryId: number;\r\n\r\n  isLoading = true;\r\n  categories: Category[] = [];\r\n  categoriesTree: TreeNode<Category>[] = [];\r\n\r\n  selectedCategory: TreeNode<Category> = null;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly productCategoriesService: CategoriesService,\r\n  ) {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    this.findCategory();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.productCategoriesService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n\r\n      if (this.ignoredCategoryId) {\r\n        this.categories = this.categories.filter(c => c.id !== this.ignoredCategoryId);\r\n      }\r\n\r\n      this.createTree();\r\n      this.findCategory();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  findCategory() {\r\n    if (this.currentCategoryId) {\r\n      const find = (nodes: TreeNode<Category>[]) => {\r\n        nodes.forEach(node => {\r\n          if (node.data.id === this.currentCategoryId) {\r\n            this.selectedCategory = node;\r\n            return;\r\n          } else if (node.children.length > 0) {\r\n            find(node.children);\r\n          }\r\n        });\r\n      };\r\n\r\n      find(this.categoriesTree);\r\n    } else {\r\n      this.selectedCategory = null;\r\n    }\r\n  }\r\n\r\n  createTree() {\r\n    const getChildren = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach(node => {\r\n        const children = this.categories.filter(c => c.parent === node.data.id);\r\n\r\n        if (children.length > 0) {\r\n          node.children = children.map(category => {\r\n            return {\r\n              label: category.name,\r\n              data: category,\r\n              children: []\r\n            };\r\n          });\r\n\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    const tree: TreeNode<Category>[] = this.categories.filter(c => !c.parent).map(category => {\r\n      return {\r\n        label: category.name,\r\n        data: <Category>category,\r\n        children: [],\r\n      };\r\n    });\r\n\r\n    getChildren(tree);\r\n\r\n    this.categoriesTree = [...tree];\r\n  }\r\n\r\n  onChoiceCategory() {\r\n    if (!this.isAllIds) {\r\n      this.choiceCategory.emit(this.selectedCategory?.data ? this.selectedCategory.data : null);\r\n    } else {\r\n      this.choiceProductForAllIds();\r\n    }\r\n  }\r\n\r\n  choiceProductForAllIds() {\r\n    if (!this.selectedCategory) {\r\n      this.choiceCategoryFolAllIds.emit(null);\r\n      return;\r\n    }\r\n\r\n    const ids = [];\r\n\r\n    ids.push(this.selectedCategory.data.id);\r\n\r\n    const find = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach(node => {\r\n        ids.push(node.data.id);\r\n\r\n        if (node.children.length > 0) {\r\n          find(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    find(this.selectedCategory.children);\r\n    this.choiceCategoryFolAllIds.emit(ids);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"product-category-picker\">\r\n  <p-treeSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"categoriesTree\"\r\n    [(ngModel)]=\"selectedCategory\"\r\n    [showClear]=\"true\"\r\n    placeholder=\"Select Category\"\r\n    (ngModelChange)=\"onChoiceCategory()\"\r\n  ></p-treeSelect>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {ListProduct} from '../../../warehouse/models/list-product';\r\nimport {BehaviorSubject, of, Subject, switchMap} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ListProductService} from '../../../warehouse/services/list-product.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {OrderProduct} from '../../../procurement/models/order-product';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-product-lists-nomenclature-picker',\r\n  templateUrl: './product-lists-nomenclature-picker.component.html',\r\n  styleUrls: ['./product-lists-nomenclature-picker.component.scss']\r\n})\r\nexport class ProductListsNomenclaturePickerComponent implements OnInit, OnDestroy, OnChanges {\r\n\r\n  @Output() selectRootList: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() isDisabled: boolean = false;\r\n\r\n  selectRootListId: number;\r\n  isLoading = true;\r\n\r\n  nomenclatureList: Nomenclature[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n  @Input() query: QuerySearch[];\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  constructor(\r\n    private readonly listProductService: OrderProductService,\r\n    private readonly adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.search$.pipe(\r\n      untilDestroyed(this),\r\n      switchMap(() => this.getProductLists())\r\n    ).subscribe(productsLists => {\r\n      productsLists.forEach(orderProduct => {\r\n        this.nomenclatureList.push(orderProduct.nomenclature);\r\n      });\r\n      this.nomenclatureList = this.adapterService.removeDuplicates(this.nomenclatureList, x => x.id);\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if ('query' in changes) {\r\n      if (this.query != changes['query'].previousValue || !changes['query'].firstChange) {\r\n        this.search$.next();\r\n      }\r\n    }\r\n  }\r\n\r\n  getProductLists() {\r\n    return this.query.length > 0 ? this.listProductService.getFiltered(this.query) : of([]);\r\n  }\r\n\r\n  onSelectNomenclature() {\r\n    this.selectRootList.emit(this.selectRootListId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"employee-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"nomenclatureList\"\r\n    [(ngModel)]=\"selectRootListId\"\r\n    (ngModelChange)=\"onSelectNomenclature()\"\r\n    optionValue=\"id\"\r\n    optionLabel=\"name\"\r\n    placeholder=\"No Nomenclature Selected\"\r\n    [showClear]=\"true\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnDestroy, OnInit, Output} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {ProductStructureCategoryService} from '../../../product-structure/services/product-structure-category.service';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {ProductStructureCategory} from '../../../product-structure/models/product-structure-category';\r\nimport {Category} from '../../../product-structure/models/category';\r\n\r\n@Component({\r\n  selector: 'pek-product-structure-category-picker',\r\n  templateUrl: './product-structure-category-picker.component.html',\r\n  styleUrls: ['./product-structure-category-picker.component.scss']\r\n})\r\nexport class ProductStructureCategoryPickerComponent implements OnInit, OnDestroy {\r\n  @Output() choiceCategory: EventEmitter<ProductStructureCategory> = new EventEmitter<ProductStructureCategory>();\r\n  @Output() choiceCategoryFolAllIds: EventEmitter<number[]> = new EventEmitter<number[]>();\r\n  @Input() isAllIds = false;\r\n  @Input() currentCategoryId: number;\r\n  @Input() ignoredCategoryId: number;\r\n  @Input() isDisabled = false;\r\n\r\n  isLoading = true;\r\n  categories: ProductStructureCategory[] = [];\r\n  categoriesTree: TreeNode<ProductStructureCategory>[] = [];\r\n\r\n  selectedCategory: TreeNode<ProductStructureCategory> = null;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly productStructureCategoryService: ProductStructureCategoryService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.productStructureCategoryService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n\r\n      if (this.ignoredCategoryId) {\r\n        this.categories = this.categories.filter(c => c.id !== this.ignoredCategoryId);\r\n      }\r\n\r\n      this.createTree();\r\n      this.findCategory();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  findCategory() {\r\n    const find = (nodes: TreeNode<ProductStructureCategory>[]) => {\r\n      nodes.forEach(node => {\r\n        if (node.data.id === this.currentCategoryId) {\r\n          this.selectedCategory = node;\r\n          return;\r\n        } else if (node.children.length > 0) {\r\n          find(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    find(this.categoriesTree);\r\n  }\r\n\r\n  createTree() {\r\n    const getChildren = (nodes: TreeNode<ProductStructureCategory>[]) => {\r\n      nodes.forEach(node => {\r\n        const children = this.categories.filter(c => c.parent === node.data.id);\r\n\r\n        if (children.length > 0) {\r\n          node.children = children.map(category => {\r\n            return {\r\n              label: category.name,\r\n              data: category,\r\n              children: []\r\n            };\r\n          });\r\n\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    const tree: TreeNode<ProductStructureCategory>[] = this.categories.filter(c => !c.parent).map(category => {\r\n      return {\r\n        label: category.name,\r\n        data: <ProductStructureCategory>category,\r\n        children: [],\r\n      };\r\n    });\r\n\r\n    getChildren(tree);\r\n\r\n    this.categoriesTree = [...tree];\r\n  }\r\n\r\n  onChoiceCategory() {\r\n    if (!this.isAllIds) {\r\n      this.choiceCategory.emit(this.selectedCategory?.data ? this.selectedCategory.data : null);\r\n    } else {\r\n      this.choiceProductForAllIds();\r\n    }\r\n  }\r\n\r\n  choiceProductForAllIds() {\r\n    if (!this.selectedCategory) {\r\n      this.choiceCategoryFolAllIds.emit(null);\r\n      return;\r\n    }\r\n\r\n    const ids = [];\r\n\r\n    ids.push(this.selectedCategory.data.id);\r\n\r\n    const find = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach(node => {\r\n        ids.push(node.data.id);\r\n\r\n        if (node.children.length > 0) {\r\n          find(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    find(this.selectedCategory.children);\r\n    this.choiceCategoryFolAllIds.emit(ids);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"product-root-category-picker\">\r\n<!--  <p-dropdown-->\r\n<!--    *ngIf=\"!isLoading; else spinner\"-->\r\n<!--    [showClear]=\"true\"-->\r\n<!--    [options]=\"categories\"-->\r\n<!--    optionLabel=\"name\"-->\r\n<!--    optionValue=\"id\"-->\r\n<!--    placeholder=\"Select Product Structure Category\"-->\r\n<!--    [(ngModel)]=\"selectCategoryId\"-->\r\n<!--    (ngModelChange)=\"onChangeCategory()\"-->\r\n<!--    [disabled]=\"isDisabled\"-->\r\n<!--  ></p-dropdown>-->\r\n\r\n  <p-treeSelect\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"categoriesTree\"\r\n    [(ngModel)]=\"selectedCategory\"\r\n    [showClear]=\"true\"\r\n    placeholder=\"Select Category\"\r\n    (ngModelChange)=\"onChoiceCategory()\"\r\n    [disabled]=\"isDisabled\"\r\n  ></p-treeSelect>\r\n\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</div>\r\n","import {Component, EventEmitter, Input, OnChanges, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\nimport {Region} from '@shared/models/region';\r\nimport {RegionService} from '@shared/services/region.service';\r\n\r\n@Component({\r\n  selector: 'pek-region-picker',\r\n  templateUrl: './region-picker.component.html',\r\n  styleUrls: ['./region-picker.component.scss']\r\n})\r\nexport class RegionPickerComponent implements OnInit, OnChanges {\r\n\r\n  @Output() selectRegion: EventEmitter<number> = new EventEmitter<number>();\r\n  @Output() selectRegionFull: EventEmitter<Partial<Region>> = new EventEmitter<Partial<Region>>();\r\n  @Input() countrySelected: number;\r\n  @Input() isDisabled: boolean;\r\n  isLoading = true;\r\n  regions: Partial<Region>[] = [];\r\n  @Input() selectedRegionId: number;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly regionService: RegionService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getRegions();\r\n  }\r\n\r\n  getRegions() {\r\n    this.regions = [];\r\n    let query;\r\n\r\n    if (this.countrySelected) {\r\n      query = [{\r\n          name: 'country_ids',\r\n          value: [this.countrySelected]\r\n        }];\r\n    }\r\n\r\n    this.regionService.get(query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(regions => {\r\n      this.regions = regions;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if ('countrySelected' in changes) {\r\n      this.getRegions();\r\n    }\r\n  }\r\n\r\n  onSelectRegion() {\r\n    this.selectRegion.emit(this.selectedRegionId);\r\n    const region = this.regions.find(region => region.id === this.selectedRegionId);\r\n    this.selectRegionFull.emit(region);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"region-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"regions\"\r\n    placeholder=\"Select Region\"\r\n    [(ngModel)]=\"selectedRegionId\"\r\n    (ngModelChange)=\"onSelectRegion()\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n    [disabled]=\"isDisabled\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {BehaviorSubject, of, Subject, switchMap, takeUntil} from 'rxjs';\r\nimport {ListProduct} from '../../../warehouse/models/list-product';\r\nimport {ListProductService} from '../../../warehouse/services/list-product.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-root-list-picker-by-order-type',\r\n  templateUrl: './root-list-picker-by-order-type.component.html',\r\n  styleUrls: ['./root-list-picker-by-order-type.component.scss']\r\n})\r\nexport class RootListPickerByOrderTypeComponent implements OnInit, OnDestroy, OnChanges {\r\n\r\n  @Output() selectRootList: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() isDisabled: boolean = false;\r\n\r\n  selectRootListId: number;\r\n  isLoading = true;\r\n\r\n  rootLists: ListProduct[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n  @Input() query: QuerySearch[] = [];\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  constructor(\r\n    private readonly listProductService: ListProductService,\r\n    private readonly adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.search$.pipe(\r\n      untilDestroyed(this),\r\n      switchMap(() => this.getProductLists())\r\n    ).subscribe(productsLists => {\r\n      let rootLists: ListProduct[] = [];\r\n      rootLists = productsLists.map(root => {\r\n        return {\r\n          ...root,\r\n          fullName: `(${root.id}) ${root.nomenclature.code}~${root.nomenclature.name}`\r\n        };\r\n      });\r\n      this.rootLists = this.adapterService.removeDuplicates(rootLists, x => x.id);\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if ('query' in changes) {\r\n      if (this.query != changes['query'].previousValue || !changes['query'].firstChange) {\r\n        this.search$.next();\r\n      }\r\n    }\r\n  }\r\n\r\n  getProductLists() {\r\n    return this.query.length > 0 ? this.listProductService.getFiltered(this.query) : of([]);\r\n  }\r\n\r\n  onSelectRootList() {\r\n    this.selectRootList.emit(this.selectRootListId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"employee-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"rootLists\"\r\n    [(ngModel)]=\"selectRootListId\"\r\n    (ngModelChange)=\"onSelectRootList()\"\r\n    optionValue=\"list\"\r\n    optionLabel=\"fullName\"\r\n    placeholder=\"No List Selected\"\r\n    [showClear]=\"true\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {List} from '../../../warehouse/models/list';\r\nimport {ListService} from '../../../warehouse/services/list.service';\r\n\r\n@Component({\r\n  selector: 'pek-root-list-picker',\r\n  templateUrl: './root-list-picker.component.html',\r\n  styleUrls: ['./root-list-picker.component.scss']\r\n})\r\nexport class RootListPickerComponent implements OnInit {\r\n  @Output() selectRootListId: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() currentListId: number;\r\n  @Input() accountingType: number;\r\n\r\n  selectedListId: number;\r\n\r\n  isLoading = true;\r\n  lists: List[] = [];\r\n\r\n  constructor(\r\n    private listService: ListService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.listService.get(\r\n      [{name: 'list_order_accounting_type', value: this.accountingType}]\r\n    ).pipe(\r\n    ).subscribe(lists => {\r\n      this.lists = lists;\r\n      this.lists.forEach(l => l.fullName = `(${l.id}) ${l.nomenclature.code}~${l.nomenclature.name}`);\r\n\r\n      if (this.selectedListId) {\r\n        this.selectedListId = this.currentListId;\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectList() {\r\n    this.selectRootListId.emit(this.selectedListId);\r\n  }\r\n\r\n}\r\n","<div class=\"root-list-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"lists\"\r\n    placeholder=\"Select Root List\"\r\n    [(ngModel)]=\"selectedListId\"\r\n    (ngModelChange)=\"onSelectList()\"\r\n    optionLabel=\"fullName\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {BehaviorSubject, switchMap} from 'rxjs';\r\nimport {Status} from '../../../procurement/models/status';\r\nimport {StatusService} from '../../../procurement/services/status.service';\r\nimport {tap} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-statuses-picker',\r\n  templateUrl: './statuses-picker.component.html',\r\n  styleUrls: ['./statuses-picker.component.scss']\r\n})\r\nexport class StatusesPickerComponent implements OnInit {\r\n  @Output() selectStatus: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() currentStatusId: number;\r\n  @Input() accountingType: number;\r\n  isLoading = true;\r\n  statuses: Status[] = [];\r\n  selectedStatusId: number;\r\n\r\n  get$ = new BehaviorSubject('');\r\n\r\n  constructor(\r\n    private readonly statusService: StatusService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.currentStatusId) {\r\n      this.selectedStatusId = this.currentStatusId;\r\n    }\r\n\r\n    this.get$.pipe(\r\n      switchMap(() => this.statusService.get([\r\n        {name: 'accounting_type', value: this.accountingType}\r\n      ])),\r\n      tap(statuses => this.statuses = statuses),\r\n      tap(() => this.isLoading = false)\r\n    ).subscribe();\r\n  }\r\n\r\n  onSelectStatus() {\r\n    this.selectStatus.emit(this.selectedStatusId);\r\n  }\r\n}\r\n","<div class=\"statuses-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"statuses\"\r\n    placeholder=\"Select Status\"\r\n    [(ngModel)]=\"selectedStatusId\"\r\n    (ngModelChange)=\"onSelectStatus()\"\r\n    optionLabel=\"value\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {RegionService} from '@shared/services/region.service';\r\nimport {SubRegion} from '@shared/models/sub-region';\r\nimport {SubRegionService} from '@shared/services/sub-region.service';\r\n\r\n@Component({\r\n  selector: 'pek-sub-region-picker',\r\n  templateUrl: './sub-region-picker.component.html',\r\n  styleUrls: ['./sub-region-picker.component.scss']\r\n})\r\nexport class SubRegionPickerComponent implements OnInit {\r\n  @Output() selectSubRegion: EventEmitter<number> = new EventEmitter<number>();\r\n  @Output() selectSubRegionFull: EventEmitter<Partial<SubRegion>> = new EventEmitter<Partial<SubRegion>>();\r\n  @Input() regionSelected: number;\r\n  @Input() isDisabled: boolean;\r\n  isLoading = true;\r\n  regions: Partial<SubRegion>[] = [];\r\n  @Input() selectedSubRegionId: number;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly subRegionService: SubRegionService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getRegions();\r\n  }\r\n\r\n  getRegions() {\r\n    this.regions = [];\r\n    let query;\r\n\r\n    if (this.regionSelected) {\r\n      query = [{\r\n        name: 'region',\r\n        value: this.regionSelected\r\n      }];\r\n    }\r\n\r\n    this.subRegionService.get(query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(regions => {\r\n      this.regions = regions;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if ('regionSelected' in changes) {\r\n      this.getRegions();\r\n    }\r\n  }\r\n\r\n  onSelectRegion() {\r\n    this.selectSubRegion.emit(this.selectedSubRegionId);\r\n    const region = this.regions.find(region => region.id === this.selectedSubRegionId);\r\n    this.selectSubRegionFull.emit(region);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"region-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"regions\"\r\n    placeholder=\"Select Region\"\r\n    [(ngModel)]=\"selectedSubRegionId\"\r\n    (ngModelChange)=\"onSelectRegion()\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n    [disabled]=\"isDisabled\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {Technology} from '../../../product-structure/models/technology';\r\nimport {TechnologyService} from '../../../product-structure/services/technology.service';\r\n\r\n@Component({\r\n  selector: 'pek-technology-picker',\r\n  templateUrl: './technology-picker.component.html',\r\n  styleUrls: ['./technology-picker.component.scss']\r\n})\r\nexport class TechnologyPickerComponent implements OnInit {\r\n  @Output() selectTechnology: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() isDisabled: boolean = false;\r\n  @Input() acceptedTechnologyIds: number[] = [];\r\n\r\n  @Input() selectTechnologyId: number;\r\n\r\n  isLoading = true;\r\n  technologies: Technology[] = [];\r\n  @Input() predefinedTechnologies: Technology[];\r\n\r\n  private destroy$ = new Subject();\r\n  @Input() showClear = true;\r\n\r\n  constructor(\r\n    private readonly technologyService: TechnologyService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.predefinedTechnologies) {\r\n      this.technologies = this.predefinedTechnologies;\r\n      this.isLoading = false;\r\n    } else {\r\n      this.getTechnologies();\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('acceptedTechnologyIds' in changes) {\r\n      this.filterTechnologies();\r\n    }\r\n  }\r\n\r\n  filterTechnologies() {\r\n    if (this.acceptedTechnologyIds.length > 0) {\r\n      let newTechnologies: Technology[] = [];\r\n\r\n      this.acceptedTechnologyIds.forEach(id => {\r\n        newTechnologies = [...newTechnologies, ...this.technologies.filter(w => w.id === id)];\r\n      });\r\n\r\n      this.technologies = [...newTechnologies];\r\n    }\r\n  }\r\n\r\n  getTechnologies() {\r\n    this.technologyService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(technologies => {\r\n      this.technologies = technologies;\r\n      this.filterTechnologies();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectTechnology() {\r\n    this.selectTechnology.emit(this.selectTechnologyId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n}\r\n","<div class=\"technology-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"technologies\"\r\n    placeholder=\"Select Technology\"\r\n    [(ngModel)]=\"selectTechnologyId\"\r\n    (ngModelChange)=\"onSelectTechnology()\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"showClear\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Warehouse} from '../../../warehouse/models/warehouse';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {UnitMeasureService} from '../../../warehouse/services/unit-measure.service';\r\nimport {UnitMeasure} from '../../../product-structure/models/unit-measure';\r\n\r\n@Component({\r\n  selector: 'pek-unit-measure-picker',\r\n  templateUrl: './unit-measure-picker.component.html',\r\n  styleUrls: ['./unit-measure-picker.component.scss']\r\n})\r\nexport class UnitMeasurePickerComponent implements OnInit {\r\n  @Input() currentMeasureUnitId: number;\r\n  @Output() selectMeasureUnit: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() isDisabled: boolean = false;\r\n\r\n  selectMeasureUnitId: number;\r\n\r\n  isLoading = true;\r\n  unitsMeasure: UnitMeasure[];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly measureUnitService: UnitMeasureService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getMeasureUnit();\r\n\r\n    if (this.currentMeasureUnitId) {\r\n      this.selectMeasureUnitId = this.currentMeasureUnitId;\r\n    }\r\n  }\r\n\r\n  getMeasureUnit() {\r\n    this.measureUnitService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(unitsMeasure => {\r\n      this.unitsMeasure = unitsMeasure;\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  onSelectWarehouse() {\r\n    this.selectMeasureUnit.emit(this.selectMeasureUnitId)\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"unit-measure-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"unitsMeasure\"\r\n    placeholder=\"Select Unit of Measure\"\r\n    [(ngModel)]=\"selectMeasureUnitId\"\r\n    (ngModelChange)=\"onSelectWarehouse()\"\r\n    optionLabel=\"label\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {UserProfile} from '../../../crm/models/user-profile';\r\nimport {UserProfileService} from '../../../crm/services/user-profile.service';\r\n\r\n@Component({\r\n  selector: 'pek-user-profile-picker',\r\n  templateUrl: './user-profile-picker.component.html',\r\n  styleUrls: ['./user-profile-picker.component.scss']\r\n})\r\nexport class UserProfilePickerComponent implements OnInit {\r\n  @Output() selectUserProfile: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() currentUserProfileId: number;\r\n  isLoading = true;\r\n  userProfiles: UserProfile[] = [];\r\n  selectedUserProfileId: number;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly userProfileService: UserProfileService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.userProfileService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(userProfiles => {\r\n      this.userProfiles = userProfiles;\r\n      console.log(this.currentUserProfileId);\r\n\r\n      if (this.currentUserProfileId) this.selectedUserProfileId = this.currentUserProfileId;\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectCompany() {\r\n    this.selectUserProfile.emit(this.selectedUserProfileId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"user-profile-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"userProfiles\"\r\n    placeholder=\"Select User Profile\"\r\n    [(ngModel)]=\"selectedUserProfileId\"\r\n    (ngModelChange)=\"onSelectCompany()\"\r\n    optionLabel=\"fullName\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, EventEmitter, Input, OnChanges, OnDestroy, OnInit, Output, SimpleChanges} from '@angular/core';\r\nimport {WarehouseService} from '../../../warehouse/services/warehouse.service';\r\nimport {Warehouse} from '../../../warehouse/models/warehouse';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-picker',\r\n  templateUrl: './warehouse-picker.component.html',\r\n  styleUrls: ['./warehouse-picker.component.scss']\r\n})\r\nexport class WarehousePickerComponent implements OnInit, OnChanges, OnDestroy {\r\n  @Output() selectWarehouse: EventEmitter<number> = new EventEmitter<number>();\r\n  @Input() isDisabled: boolean = false;\r\n  @Input() acceptedWarehouseIds: number[] = [];\r\n  @Input() selectedWarehouseId: number;\r\n\r\n  selectWarehouseId: number;\r\n\r\n  isLoading = true;\r\n  warehouses: Warehouse[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly warehouseService: WarehouseService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getWarehouses();\r\n\r\n    if (this.selectedWarehouseId) {\r\n      this.selectWarehouseId = this.selectedWarehouseId;\r\n    }\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if ('acceptedWarehouseIds' in changes) {\r\n      this.filterWarehouses();\r\n    }\r\n  }\r\n\r\n  filterWarehouses() {\r\n    if (this.acceptedWarehouseIds.length > 0) {\r\n      let newWarehouses: Warehouse[] = [];\r\n\r\n      this.acceptedWarehouseIds.forEach(id => {\r\n        newWarehouses = [...newWarehouses, ...this.warehouses.filter(w => w.id === id)];\r\n      });\r\n\r\n      this.warehouses = [...newWarehouses];\r\n    }\r\n  }\r\n\r\n  getWarehouses() {\r\n    this.warehouseService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(warehouses => {\r\n      this.warehouses = warehouses;\r\n      this.filterWarehouses();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelectWarehouse() {\r\n    this.selectWarehouse.emit(this.selectWarehouseId);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"warehouse-picker\">\r\n  <p-dropdown\r\n    *ngIf=\"!isLoading; else spinner\"\r\n    [options]=\"warehouses\"\r\n    placeholder=\"Select Warehouse\"\r\n    [(ngModel)]=\"selectWarehouseId\"\r\n    (ngModelChange)=\"onSelectWarehouse()\"\r\n    optionLabel=\"name\"\r\n    optionValue=\"id\"\r\n    [showClear]=\"true\"\r\n    [filter]=\"true\"\r\n  >\r\n  </p-dropdown>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'moneyFormat'\r\n})\r\nexport class MoneyFormatPipe implements PipeTransform {\r\n\r\n  transform(value: number, ...args: any[]): string {\r\n    return parseFloat(value as any).toFixed(2).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1 ').split('.').join(',');\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport {GlossaryItem} from '../../guide/guide-glossary/guide-glossary.component';\r\n\r\n@Pipe({\r\n  name: 'glossarySearch'\r\n})\r\nexport class SearchPipe implements PipeTransform {\r\n\r\n  transform(items: GlossaryItem[], search = ''): GlossaryItem[] {\r\n    if (!search.trim()) {\r\n      return items\r\n    }\r\n\r\n    return items.filter(i => i.title.toLowerCase().includes(search.toLowerCase()))\r\n  }\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {FormGroup} from '@angular/forms';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AdapterService {\r\n\r\n  constructor() {\r\n  }\r\n\r\n  removeDuplicates(data: any[], key: any) {\r\n    return [...new Map(data.map(x => [key(x), x])).values()];\r\n  }\r\n\r\n  isValidHttpUrl(string: string): boolean {\r\n    return string.includes('http:') || string.includes('https:');\r\n  }\r\n\r\n  dateAdapter(date: Date) {\r\n    if (date === null) {\r\n      return null;\r\n    } else {\r\n      return (date.getFullYear() + '-' +\r\n        ('0' + (date.getMonth() + 1)).slice(-2) + '-' +\r\n        ('0' + date.getDate()).slice(-2));\r\n    }\r\n  }\r\n\r\n  dateTimeAdapter(date: Date) {\r\n    if (date === null) {\r\n      return null;\r\n    } else {\r\n      return date.toISOString();\r\n    }\r\n  }\r\n\r\n  generateQueryKey(form: FormGroup) {\r\n    let queryKeyString = '';\r\n\r\n    for (const key in form.controls) {\r\n      queryKeyString += `${key}:${form.controls[key].value}/`\r\n    }\r\n\r\n    return queryKeyString.slice(0, -1);\r\n  }\r\n\r\n  downloadFile(filename: string, response: Blob) {\r\n    const dataType = response.type;\r\n    const binaryData = [];\r\n    binaryData.push(response);\r\n    const downloadLink = document.createElement('a');\r\n    downloadLink.href = window.URL.createObjectURL(new Blob(binaryData, {type: dataType}));\r\n    downloadLink.setAttribute('download', filename);\r\n    document.body.appendChild(downloadLink);\r\n    downloadLink.click();\r\n  }\r\n\r\n  msToTime(duration: any): string {\r\n    let minutes: any = parseInt(`${(duration / (1000 * 60)) % 60}`, 10);\r\n    let hours: any = parseInt(`${(duration / (1000 * 60 * 60)) % 24}`, 10) + 3;\r\n\r\n    hours = (hours < 10) ? '0' + hours : hours;\r\n    minutes = (minutes < 10) ? '0' + minutes : minutes;\r\n\r\n    return hours + ':' + minutes + ':' + '00';\r\n  }\r\n\r\n  timeToMinutesAdapter(time) {\r\n    if (typeof time === 'number') {\r\n      return time;\r\n    }\r\n\r\n    const timeIntervals = time.split(':');\r\n\r\n    if (timeIntervals.length === 1) {\r\n      return parseInt(time, 10);\r\n    }\r\n\r\n    const timeInterval = {\r\n      days: parseInt(timeIntervals[0], 10),\r\n      hours: parseInt(timeIntervals[1], 10),\r\n      minutes: parseInt(timeIntervals[2], 10)\r\n    };\r\n\r\n    let minutes = timeInterval.hours * 60 + timeInterval.minutes;\r\n\r\n    if (timeInterval.days > 0) {\r\n      minutes = minutes + timeInterval.days * 1440;\r\n    }\r\n\r\n    return minutes;\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {Nomenclature, NomenclatureImage} from '@shared/models/nomenclature';\r\nimport {BehaviorSubject} from 'rxjs';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {tap} from 'rxjs/operators';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {AlbumComponent} from '@shared/modals/album/album.component';\r\n\r\nexport class AlbumItem {\r\n  nomenclature: Nomenclature;\r\n  image: string;\r\n  numeric: number;\r\n}\r\n\r\nclass NewAlbumItem {\r\n  nomenclature: Nomenclature;\r\n  images: NomenclatureImage[];\r\n}\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AlbumService {\r\n  public loading$: BehaviorSubject<boolean> = new BehaviorSubject<boolean>(false)\r\n\r\n  album: AlbumItem[];\r\n\r\n  constructor(\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  getNomenclaturesImages(nomenclatures: Nomenclature[]): void {\r\n    this.loading$.next(true);\r\n\r\n    const newAlbum: NewAlbumItem[] = [];\r\n    nomenclatures.forEach(n => newAlbum.push({\r\n      nomenclature: n,\r\n      images: []\r\n    }));\r\n\r\n    this.nomenclatureService.getNomenclaturesImages(nomenclatures.map(n => n.id)).pipe(\r\n      tap(images => newAlbum.forEach((item, i) => item.images = images[i])),\r\n      tap(() => this.prepareForShow(newAlbum)),\r\n      tap(() => this.loading$.next(false)),\r\n      tap(() => this.showAlbumModal())\r\n    ).subscribe();\r\n  }\r\n\r\n  showAlbumModal() {\r\n    return this.dialog\r\n      .open<AlbumComponent>(AlbumComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: this.album,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  prepareForShow(newAlbum: NewAlbumItem[]): void {\r\n    this.album = [];\r\n\r\n    newAlbum.forEach(item => {\r\n      if (item.images.length === 0) {\r\n        this.album.push({\r\n          nomenclature: item.nomenclature,\r\n          image: null,\r\n          numeric: null,\r\n        });\r\n      } else {\r\n        item.images.forEach((img, idx) => {\r\n          this.album.push({\r\n            nomenclature: item.nomenclature,\r\n            image: <string>img.image,\r\n            numeric: item.images.length >= 2 ? idx + 1 : null\r\n          });\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {AreaLocator} from '../../warehouse/models/area-locator';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {map} from 'rxjs/operators';\r\nimport {Observable} from 'rxjs';\r\nimport {environment} from '@env/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AreaLocatorsService {\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'area_locators/';\r\n  constructor(private httpClient: HttpClient) {\r\n\r\n  }\r\n  get(query?: { name: string, value: any }[]): Observable<AreaLocator[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: AreaLocator[] }>(this.API_URL + this.url + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }))\r\n  }\r\n\r\n  create(entity) {\r\n    return this.httpClient.post<{ data: AreaLocator }>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: AreaLocator) {\r\n    return this.httpClient.put(this.API_URL + this.url + entity.id + '/', entity);\r\n  }\r\n\r\n  delete(entity: AreaLocator) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {Area, AreaLocator, AreaPaginated} from '../../warehouse/models/area-locator';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {map} from 'rxjs/operators';\r\nimport {Observable} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AreasService {\r\n\r\n  count: number = -1;\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'areas/';\r\n\r\n  constructor(private httpClient: HttpClient) {\r\n\r\n  }\r\n\r\n  get(): Observable<Area[]> {\r\n    return this.httpClient.get<{ data: Area[] }>(this.API_URL + this.url).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  get_paginated(query?: QuerySearch[]): Observable<AreaPaginated> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient\r\n      .get<{ data: AreaPaginated }>(this.API_URL + this.url + qString)\r\n      .pipe(\r\n        map((response) => {\r\n          return response.data;\r\n        })\r\n      );\r\n  }\r\n\r\n  getLocators(): Observable<AreaLocator[]> {\r\n    return this.httpClient.get<{ data: AreaLocator[] }>(this.API_URL + 'area_locators/').pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  getById(id): Observable<Area> {\r\n    return this.httpClient.get<{ data: Area }>(this.API_URL + this.url + id + '/').pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  create(entity) {\r\n    return this.httpClient.post<{ data: Area }>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: Area) {\r\n    return this.httpClient.put(this.API_URL + this.url + entity.id + '/', entity);\r\n  }\r\n\r\n  delete(entity: Area) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {Country} from '@shared/models/country';\r\nimport {Area} from '../../warehouse/models/area-locator';\r\nimport {Currency} from '@shared/models/currency';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CountryService {\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'countries/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Country[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Country[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(entity: Partial<Country>) {\r\n    return this.httpClient.post<{ data: Country }>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: Partial<Country>) {\r\n    return this.httpClient.put(this.API_URL + this.url + entity.id + '/', entity);\r\n  }\r\n\r\n  delete(entity: Partial<Country>) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from '@env/environment';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport {Currency} from '@shared/models/currency';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CurrenciesService {\r\n\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'currencies/';\r\n  constructor(private httpClient: HttpClient) {\r\n\r\n  }\r\n\r\n  get(query?: { name: string, value: any }[]): Observable<Currency[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{data:Currency[]}>(this.API_URL + this.url + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }))\r\n  }\r\n\r\n  create(entity) {\r\n    return this.httpClient.post<{data:Currency}>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: Currency, last: string) {\r\n    return this.httpClient.put(this.API_URL + this.url + last + '/', entity);\r\n  }\r\n\r\n  updatePartly(entity: Currency, last: string) {\r\n    return this.httpClient.patch(this.API_URL + this.url + last + '/', entity);\r\n  }\r\n\r\n  delete(entity: Currency) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.code + '/');\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {EmployeePosition} from '@shared/models/employee-position';\r\nimport {Observable} from 'rxjs';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {map} from 'rxjs/operators';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {Employee} from '@shared/models/employee';\r\nimport {\r\n  CreateEditEmployeeComponent\r\n} from '../../manufacturing/modals/create-edit-employee/create-edit-employee.component';\r\nimport {\r\n  CreateEditPositionComponent\r\n} from '../../manufacturing/modals/create-edit-position/create-edit-position.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EmployeePositionService {\r\n  API_URL = environment.base_url + environment.staff_url;\r\n  readonly url = 'positions/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: { name: string, value: any }[]): Observable<EmployeePosition[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: EmployeePosition[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(position: EmployeePosition): Observable<EmployeePosition> {\r\n    return this.httpClient.post<{ data: EmployeePosition }>(this.API_URL + this.url, position).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(position: EmployeePosition): Observable<EmployeePosition> {\r\n    return this.httpClient.put<{ data: EmployeePosition }>(this.API_URL + this.url + position.id + '/', position).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  createEditPositionModal(type: ModalActionType, position?: EmployeePosition): Observable<EmployeePosition> {\r\n    return this.dialog\r\n      .open<CreateEditPositionComponent>(CreateEditPositionComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, position},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms',\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {map} from 'rxjs/operators';\r\nimport {Observable, of} from 'rxjs';\r\nimport {Employee} from '@shared/models/employee';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  CreateEditEmployeeComponent\r\n} from '../../manufacturing/modals/create-edit-employee/create-edit-employee.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EmployeeService {\r\n\r\n  API_URL = environment.base_url + environment.staff_url;\r\n  readonly url = 'employees/';\r\n\r\n  employees: Employee[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Employee[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Employee[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getAll(): Observable<Employee[]> {\r\n    if (this.employees) {\r\n      return of(this.employees);\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Employee[] }>(this.API_URL + this.url).pipe(\r\n      map(response => {\r\n        const employees = response.data;\r\n        employees.forEach(e => e.fullName = `${e.first_name} ${e.last_name}`);\r\n        this.employees = employees;\r\n        return employees;\r\n      })\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  create(employee: Partial<Employee>): Observable<Employee> {\r\n    return this.httpClient.post<{ data: Employee }>(this.API_URL + this.url, employee).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(employee: Partial<Employee>): Observable<Employee> {\r\n    return this.httpClient.put<{ data: Employee }>(this.API_URL + this.url + employee.id + '/', employee).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createEditEmployeeModal(type: ModalActionType, employee?: Employee): Observable<Employee> {\r\n    return this.dialog\r\n      .open<CreateEditEmployeeComponent>(CreateEditEmployeeComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, employee},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms',\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {ConfirmComponent, ConfirmType} from '@shared/modals/confirm/confirm.component';\r\nimport {Observable} from 'rxjs';\r\nimport {GuideComponent} from '../../guide/guide/guide.component';\r\nimport {PasteImageComponent} from '@shared/modals/paste-image/paste-image.component';\r\nimport {ENomenclatureType, Nomenclature, NomenclatureImage} from '@shared/models/nomenclature';\r\nimport {ImageGalleryComponent} from '@shared/modals/image-gallery/image-gallery.component';\r\nimport {\r\n  NomenclaturePickerModalComponent\r\n} from '@shared/modals/nomenclature-picker-modal/nomenclature-picker-modal.component';\r\nimport {CompleteListComponent} from '@shared/modals/refactoring/complete-list/complete-list.component';\r\nimport {ListProductsComponent} from '@shared/modals/refactoring/list-products/list-products.component';\r\nimport {AddFileToOrderComponent} from '@shared/modals/add-file-to-order/add-file-to-order.component';\r\nimport {ChoiceDateComponent} from '@shared/modals/choice-date/choice-date.component';\r\nimport {ChoicePeriodDateComponent} from '@shared/modals/choice-period-date/choice-period-date.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ModalService {\r\n\r\n  constructor(\r\n    private dialog: MatDialog\r\n  ) {\r\n  }\r\n\r\n  confirm(type: ConfirmType = 'default', btnConfirmText: string = ''): Observable<boolean> {\r\n    return this.dialog\r\n      .open<ConfirmComponent>(ConfirmComponent, {\r\n        width: '25rem',\r\n        height: '22.5rem',\r\n        data: {type, btnConfirmText},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  showPasteImageModal(imageSrc: string | ArrayBuffer, file: File) {\r\n    return this.dialog\r\n      .open<PasteImageComponent>(PasteImageComponent, {\r\n        width: 'auto',\r\n        height: 'auto',\r\n        data: {imageSrc, file},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  showImageGallery(images?: NomenclatureImage[], nomenclatureId?: number, activeIdx = 1) {\r\n    return this.dialog\r\n      .open<ImageGalleryComponent>(ImageGalleryComponent, {\r\n        width: 'auto',\r\n        height: 'auto',\r\n        panelClass: 'gallery-modal',\r\n        data: {images, nomenclatureId, activeIdx},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  showBusinessGuide(): Observable<any> {\r\n    return this.dialog\r\n      .open<GuideComponent>(GuideComponent, {\r\n        width: '100%',\r\n        height: '77%',\r\n        autoFocus: false,\r\n        disableClose: false,\r\n        backdropClass: 'guide-modalbox',\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  choiceNomenclatureModal(type: ENomenclatureType = null): Observable<Nomenclature> {\r\n    return this.dialog\r\n      .open<NomenclaturePickerModalComponent>(NomenclaturePickerModalComponent, {\r\n        width: '90rem',\r\n        height: 'auto',\r\n        data: {type},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms',\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  completeList(entity) {\r\n    return this.dialog\r\n      .open<CompleteListComponent>(CompleteListComponent, {\r\n        width: '54rem',\r\n        data: {type: 'edit', entity: entity},\r\n        disableClose: false,\r\n        panelClass: 'modal-overflow-visible'\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  editListProduct(entity) {\r\n    return this.dialog\r\n      .open<ListProductsComponent>(ListProductsComponent, {\r\n        width: '54rem',\r\n        data: {type: 'edit', entity: entity},\r\n        disableClose: false,\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  openAddFileToOrderModal(orderId: number) {\r\n    return this.dialog\r\n      .open<AddFileToOrderComponent>(AddFileToOrderComponent, {\r\n        width: '54rem',\r\n        data: {orderId},\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  openChoiceDateDialog(title: string): Observable<Date> {\r\n    return this.dialog\r\n      .open<ChoiceDateComponent>(ChoiceDateComponent, {\r\n        width: '35rem',\r\n        data: {title},\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  openChoicePeriodDateDialog(): Observable<{ startDate: Date, endDate: Date }> {\r\n    return this.dialog\r\n      .open<ChoicePeriodDateComponent>(ChoicePeriodDateComponent, {\r\n        width: '35rem',\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {\r\n  ENomenclatureType,\r\n  NewNomenclature,\r\n  Nomenclature,\r\n  NomenclatureImage,\r\n  Nomenclatures\r\n} from '@shared/models/nomenclature';\r\nimport {map} from 'rxjs/operators';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {TechnicalEquipment} from '../../product-structure/models/technical-equipment';\r\nimport {Product} from '../../product-structure/models/product';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  SerialConfirmationComponent\r\n} from '../../product-structure/modals/serial-confirmation/serial-confirmation.component';\r\nimport {\r\n  CreateOutsourcingRequestComponent\r\n} from '../../outsourcing/modals/create-outsourcing-request/create-outsourcing-request.component';\r\nimport {\r\n  ManufacturingPickerProductComponent\r\n} from '../../manufacturing/modals/manufacturing-picker-product/manufacturing-picker-product.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NomenclatureService {\r\n  API_URL = environment.base_url + environment.product_structure_url;\r\n  readonly url = 'nomenclatures/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Nomenclature[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: Nomenclature[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getForPagination(query?: QuerySearch[]): Observable<Nomenclatures> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: Nomenclatures }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<Nomenclature> {\r\n    return this.httpClient.get<{ data: Nomenclature }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(nomenclature: Partial<Nomenclature>): Observable<Nomenclature> {\r\n    const formData = new FormData();\r\n\r\n    if (nomenclature.technologies && nomenclature.technologies.length > 0) {\r\n      nomenclature.technologies.forEach(technology => {\r\n        formData.append('technologies', technology.id + '');\r\n      });\r\n    }\r\n\r\n    for (const key in nomenclature) {\r\n      if (nomenclature[key] !== null && key !== 'technologies') {\r\n        formData.append(key, nomenclature[key]);\r\n      }\r\n    }\r\n\r\n    if (nomenclature.category === null) {\r\n      formData.append('category', '');\r\n    }\r\n\r\n    return this.httpClient.post<{ data: Nomenclature }>(this.API_URL + this.url, formData).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartly(nomenclature: Partial<Nomenclature>): Observable<Nomenclature> {\r\n    return this.httpClient.patch<{ data: Nomenclature }>(this.API_URL + this.url + `${nomenclature.id}/`, nomenclature).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(nomenclature: Partial<Nomenclature>): Observable<Nomenclature> {\r\n    const formData = new FormData();\r\n\r\n    if (nomenclature.technologies && nomenclature.technologies.length > 0) {\r\n      nomenclature.technologies.forEach(technology => {\r\n        formData.append('technologies', technology.id + '');\r\n      });\r\n    }\r\n\r\n    for (const key in nomenclature) {\r\n      if (nomenclature[key] !== null && key !== 'technologies') {\r\n        formData.append(key, nomenclature[key]);\r\n      }\r\n    }\r\n\r\n    if (nomenclature.category === null) {\r\n      formData.append('category', '');\r\n    }\r\n\r\n    return this.httpClient.put<{ data: Nomenclature }>(this.API_URL + this.url + `${nomenclature.id}/`, formData).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  searchWhereUsed(id: number): Observable<Nomenclature[]> {\r\n    return this.httpClient.get<{ data: Nomenclature[] }>(this.API_URL + this.url + id + '/used_in_list/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  // updateRoot(nomenclature: Partial<Nomenclature>): Observable<Nomenclature> {\r\n  //   const formData = new FormData();\r\n  //\r\n  //   if (nomenclature.technologies && nomenclature.technologies.length > 0) {\r\n  //     nomenclature.technologies.forEach(technology => {\r\n  //       formData.append('technologies', technology.id + '');\r\n  //     });\r\n  //   }\r\n  //\r\n  //   for (const key in nomenclature) {\r\n  //     if (nomenclature[key] !== null && key !== 'technologies') {\r\n  //       formData.append(key, nomenclature[key]);\r\n  //     }\r\n  //   }\r\n  //\r\n  //   if (nomenclature.category === null) {\r\n  //     formData.append('category', '');\r\n  //   }\r\n  //\r\n  //   return this.httpClient.put<{ data: Nomenclature }>(this.API_URL + this.url + `${nomenclature.id}/`, formData).pipe(\r\n  //     map(response => response.data)\r\n  //   );\r\n  // }\r\n\r\n  // Nomenclatures for confirmation\r\n  getNewNomenclatures(): Observable<NewNomenclature[]> {\r\n    return this.httpClient.get<{ data: NewNomenclature[] }>(this.API_URL + 'products_new_nomenclatures/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updateSeveralPartly(nomenclatures: Partial<Nomenclature>[]): Observable<Nomenclature[]> {\r\n    return forkJoin(...nomenclatures.map(nomenclature =>\r\n      this.httpClient.patch<{ data: Nomenclature }>(this.API_URL + this.url + nomenclature.id + '/', nomenclature).pipe(\r\n        map(response => response.data)\r\n      ))\r\n    );\r\n  }\r\n\r\n  uploadImage(send: any): Observable<NomenclatureImage> {\r\n    const formData = new FormData();\r\n\r\n    for (const key in send) {\r\n      if (send[key] !== null) {\r\n        formData.append(key, send[key]);\r\n      }\r\n    }\r\n\r\n    return this.httpClient.post<{ data: NomenclatureImage }>(this.API_URL + 'nomenclature_images/', formData).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  loadImages(id: number): Observable<NomenclatureImage[]> {\r\n    return this.httpClient.get<{ data: NomenclatureImage[] }>(this.API_URL + `nomenclature_images/?nomenclature=${id}`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getNomenclaturesImages(ids: number[]): Observable<NomenclatureImage[][]> {\r\n    return forkJoin(ids.map(id => this.httpClient.get<{ data: NomenclatureImage[] }>(this.API_URL + `nomenclature_images/?nomenclature=${id}`).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  uploadImagesSeveral(send: any[]): Observable<NomenclatureImage[]> {\r\n    const data = [];\r\n\r\n    send.forEach(s => {\r\n      const formData = new FormData();\r\n\r\n      for (const key in s) {\r\n        if (s[key] !== null) {\r\n          formData.append(key, s[key]);\r\n        }\r\n      }\r\n\r\n      data.push(formData);\r\n    });\r\n\r\n    return forkJoin(...data.map(d => this.httpClient.post<{ data: NomenclatureImage }>(this.API_URL + 'nomenclature_images/', d).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  removeImage(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + `nomenclature_images/${id}/`);\r\n  }\r\n\r\n  getWarehouseQuantity(id: number): Observable<any> {\r\n    return this.httpClient.get<{ data: Nomenclature[] }>(this.API_URL + this.url + `${id}/total_warehouse_quantity/`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  bulkCreateUpdateTechnicalEquipments(nomenclatureId: number, data): Observable<any> {\r\n    return this.httpClient.post<{ data: TechnicalEquipment }>(this.API_URL + this.url + nomenclatureId + '/bulk_update_technical_equipments/', data).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  showSerialConfirmationModal(product: Partial<Product>, warehouseQuantity: number) {\r\n    return this.dialog\r\n      .open<SerialConfirmationComponent>(SerialConfirmationComponent, {\r\n        width: '30rem',\r\n        height: 'auto',\r\n        disableClose: true,\r\n        data: {product, warehouseQuantity},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  assemblyManufacturedPickerDialog(type: ENomenclatureType): Observable<Product> {\r\n    return this.dialog\r\n      .open<ManufacturingPickerProductComponent>(ManufacturingPickerProductComponent, {\r\n        width: '70rem',\r\n        height: 'auto',\r\n        data: {type},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {\r\n  NewNomenclature,\r\n  Nomenclature,\r\n  NomenclatureFile,\r\n  NomenclatureImage,\r\n  Nomenclatures\r\n} from '@shared/models/nomenclature';\r\nimport {map} from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class NomenclaturesFileService {\r\n\r\n  API_URL = environment.base_url + environment.product_structure_url;\r\n  readonly url = 'nomenclature_files/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<NomenclatureFile[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: NomenclatureFile[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<NomenclatureFile> {\r\n    return this.httpClient.get<{ data: NomenclatureFile }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(send: { nomenclature: number, file: File }): Observable<NomenclatureFile> {\r\n    const formData = new FormData();\r\n\r\n    for (const key in send) {\r\n      if (send[key] !== null) {\r\n        formData.append(key, send[key]);\r\n      }\r\n    }\r\n\r\n    return this.httpClient.post<{ data: NomenclatureFile }>(this.API_URL + this.url, formData).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${id}/`);\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Observable} from 'rxjs';\r\nimport {Region} from '@shared/models/region';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {map} from 'rxjs/operators';\r\nimport {Country} from '@shared/models/country';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RegionService {\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'regions/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Region[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Region[] }>(this.API_URL + this.url + queryParams).pipe(\r\n        map(response => response.data)\r\n      );\r\n  }\r\n\r\n  create(entity: Partial<Region>) {\r\n    return this.httpClient.post<{ data: Country }>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: Partial<Region>) {\r\n    return this.httpClient.put(this.API_URL + this.url + entity.id + '/', entity);\r\n  }\r\n\r\n  delete(entity: Partial<Region>) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {Invoice, InvoiceFile} from '../../procurement/models/invoice';\r\nimport {map} from 'rxjs/operators';\r\nimport {InvoiceFilesComponent} from '../../procurement/modals/invoice-files/invoice-files.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  ServiceInvoiceFilesComponent\r\n} from '../../procurement/modals/service-invoice-files/service-invoice-files.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ServiceInvoiceService {\r\n\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'service_invoices/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n\r\n  }\r\n\r\n  get(query?: { name: string, value: any }[]): Observable<Invoice[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: Invoice[] }>(this.API_URL + this.url + 'all/' + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  create(invoice: Partial<any>): Observable<Invoice> {\r\n    return this.httpClient.post<{ data: Invoice }>(this.API_URL + this.url, invoice).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getFiles(invoiceId: number): Observable<InvoiceFile[]> {\r\n    return this.httpClient.get<{ data: InvoiceFile[] }>(this.API_URL + 'service_invoice_files/' + invoiceId + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  severalUploadFiles(invoiceId: number, files: File[]): Observable<InvoiceFile[]> {\r\n    const arrayFormData: FormData[] = [];\r\n\r\n    files.forEach(file => {\r\n      const formData = new FormData()\r\n      formData.append('file', file);\r\n      arrayFormData.push(formData)\r\n    })\r\n    return forkJoin(...arrayFormData.map(formData => this.httpClient.post<{data: InvoiceFile}>(this.API_URL + `service_invoice_files/${invoiceId}/`, formData).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  downloadFile(id: number): Observable<any> {\r\n    return this.httpClient.get(this.API_URL + 'service_invoice_file_download/' + id + '/', {responseType: 'blob'});\r\n  }\r\n\r\n  removeFile(fileId: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + 'service_invoice_file_delete/' + fileId + '/', null);\r\n  }\r\n\r\n  delete(id: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  openInvoiceFilesModal(invoice: Invoice): Observable<any> {\r\n    return this.dialog\r\n      .open<ServiceInvoiceFilesComponent>(ServiceInvoiceFilesComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: invoice,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {Country} from '@shared/models/country';\r\nimport {SubRegion} from '@shared/models/sub-region';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SubRegionService {\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'sub_regions/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<SubRegion[]> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: SubRegion[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(entity: Partial<SubRegion>) {\r\n    return this.httpClient.post<{ data: Country }>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: Partial<SubRegion>) {\r\n    return this.httpClient.put(this.API_URL + this.url + entity.id + '/', entity);\r\n  }\r\n\r\n  delete(entity: Partial<SubRegion>) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {forkJoin, from, Observable, of, Subject, toArray} from 'rxjs';\r\nimport {concatMap, map, tap} from 'rxjs/operators';\r\nimport {Task, TaskSet, TasksResponse} from '@shared/models/task';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  ManufacturingCreateOrderComponent\r\n} from '../../manufacturing/modals/manufacturing-create-order/manufacturing-create-order.component';\r\nimport {UITask} from '../../manufacturing/components/manufacturing-chart/manufacturing-chart.component';\r\nimport {\r\n  ManufacturingTaskEditComponent\r\n} from '../../manufacturing/modals/manufacturing-task-edit/manufacturing-task-edit.component';\r\nimport {\r\n  ManufacturingAddTechnologyComponent\r\n} from '../../manufacturing/modals/manufacturing-add-technology/manufacturing-add-technology.component';\r\nimport {\r\n  ManufacturingTasksEditComponent\r\n} from '../../manufacturing/modals/manufacturing-tasks-edit/manufacturing-tasks-edit.component';\r\nimport {\r\n  ManufacturingAddItemsComponent, NewItem\r\n} from '../../manufacturing/modals/manufacturing-add-items/manufacturing-add-items.component';\r\nimport { Tasks} from '@shared/models/task';\r\nimport {PlanningStatus} from '../../manufacturing/enums/planning-status.enum';\r\nimport {\r\n  ManufacturingSliceTasksComponent\r\n} from '../../manufacturing/components/manufacturing-slice-tasks/manufacturing-slice-tasks.component';\r\nimport {\r\n  ManufacturingSplitPlanComponent\r\n} from '../../manufacturing/modals/manufacturing-split-plan/manufacturing-split-plan.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TaskService {\r\n\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'tasks/';\r\n\r\n  delete$ = new Subject<TaskSet>();\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Task[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Task[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getTaskConfirmationList(): Observable<Task[]> {\r\n    return this.httpClient.get<{ data: Task[] }>(this.API_URL + this.url + 'confirmation_list/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  approvePlan(data: {planning_status: PlanningStatus, family_id: number}) {\r\n    return this.httpClient.post(this.API_URL + this.url + 'planning_confirmation/', data).pipe(\r\n      map(response => response)\r\n    );\r\n  }\r\n\r\n  approveDeclineEditDatesPlan(data: {planning_status?: PlanningStatus, family_id: number}) {\r\n    return this.httpClient.post(this.API_URL + this.url + 'confirmation_request_to_edit_date/', data).pipe(\r\n      map(response => response)\r\n    );\r\n  }\r\n\r\n  getTaskRequestToEditDate(): Observable<Task[]> {\r\n    return this.httpClient.get<{ data: Task[] }>(this.API_URL + this.url + 'list_of_requests_to_edit_date/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getForPagination(query?: QuerySearch[]): Observable<TasksResponse> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: TasksResponse }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(set: Pick<TaskSet, 'tasks'>, data): Observable<any> { // Partial<TaskSet>\r\n    return forkJoin(...set.tasks.map(task => this.httpClient.patch<{\r\n      data: any\r\n    }>(this.API_URL + this.url + task.id + '/', data)));\r\n  }\r\n\r\n  confirmEndDates(id: number, data: { is_unconfirmed_root_date: boolean } = null): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + `${id}/bulk_tasks_confirm_end_date/`, data);\r\n  }\r\n\r\n  sendToPlanningConfirmation(data: { family_id: number }): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + `send_to_planning_confirmation/`, data);\r\n  }\r\n\r\n  sendToPlanningCorrections(data: { family_id: number, change_request: boolean }): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + `request_to_edit_date/`, data);\r\n  }\r\n\r\n  delete(set: TaskSet): Observable<TaskSet> {\r\n    return forkJoin(...set.tasks.map(task => this.httpClient.delete<Task>(this.API_URL + this.url + task.id + '/'))).pipe(\r\n      map(() => set),\r\n      tap(() => this.delete$.next(set)),\r\n    );\r\n  }\r\n\r\n  getById(id): Observable<Task[]> {\r\n    return this.httpClient.get<{ data: Task[] }>(this.API_URL + this.url + `${id}/`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createOutsource(data): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + 'bulk_outsource_create/', data);\r\n  }\r\n\r\n  makeOrderDialog(tasks: Task[]): Observable<any> {\r\n    return this.dialog\r\n      .open(ManufacturingCreateOrderComponent, {\r\n        width: '60rem',\r\n        data: {tasks},\r\n        disableClose: false,\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  editTaskDialog(task: UITask, tasks: UITask[], rootTask: UITask) {\r\n    return this.dialog\r\n      .open<ManufacturingTaskEditComponent>(ManufacturingTaskEditComponent, {\r\n        width: '80rem',\r\n        data: {task, tasks, rootTask },\r\n        disableClose: false,\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  editTasksDialog(tasks: UITask[]) {\r\n    return this.dialog\r\n      .open<ManufacturingTasksEditComponent>(ManufacturingTasksEditComponent, {\r\n        width: '80rem',\r\n        data: { tasks },\r\n        disableClose: false,\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  addTechnologyToPlanModal(task: UITask) {\r\n    return this.dialog\r\n      .open<ManufacturingAddTechnologyComponent>(ManufacturingAddTechnologyComponent, {\r\n        width: '30rem',\r\n        data: {task},\r\n        disableClose: false,\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  addTechnologyToTask(id: number, send: any): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + `${id}/add_technology/`, send);\r\n  }\r\n\r\n  addTasks(parentTasks: Task[], rootId: string): Observable<Task[]> {\r\n    return of(parentTasks).pipe(\r\n      concatMap(parentTasks => this.addTasksDialog(parentTasks)),\r\n      concatMap(items => from(items)),\r\n      concatMap(item => this.httpClient.post(this.API_URL + this.url + item.taskId + '/add_position/', item.data)),\r\n      toArray(),\r\n      concatMap((tasks) => tasks.length > 0 ? this.httpClient.get<{ data: Task[] }>(this.API_URL + this.url + '?for_root_id__in=' + rootId) : []),\r\n      map(response => response.data),\r\n    );\r\n  }\r\n\r\n  addTasksDialog(parentTasks: Task[]): Observable<any[]> {\r\n    return this.dialog\r\n      .open<ManufacturingAddItemsComponent>(ManufacturingAddItemsComponent, {\r\n        width: '30rem',\r\n        data: { parentTasks },\r\n        disableClose: false,\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .pipe(\r\n        concatMap((value) =>\r\n          value\r\n            ? of(value)\r\n            : new Observable((subscriber) => subscriber.complete())\r\n        )\r\n      );\r\n  }\r\n\r\n  splitTasksDialog(task: Task) {\r\n    return this.dialog\r\n      .open<ManufacturingSplitPlanComponent>(ManufacturingSplitPlanComponent, {\r\n        width: '30rem',\r\n        data: { task },\r\n        disableClose: false,\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n  }\r\n\r\n  splitTasks(send: any, id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + `${id}/split/`, send);\r\n  }\r\n\r\n  deletePlan(id: number): Observable<Task> {\r\n    return this.httpClient.delete<Task>(this.API_URL + this.url + id + '/');\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {TreeNode} from 'primeng/api';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TreeService {\r\n\r\n  constructor() { }\r\n\r\n  createTree(items: any[], expanseMap?: any): TreeNode[] {\r\n    const prepareNodes: Partial<TreeNode>[] = [];\r\n\r\n    items.forEach(element => {\r\n      const ins = {data: element, expanded: false, children: []};\r\n\r\n      if (expanseMap) {\r\n        ins.expanded = expanseMap[element.id];\r\n      }\r\n      prepareNodes.push(ins);\r\n    });\r\n\r\n    const root: TreeNode[] = [];\r\n\r\n    const idMapping = prepareNodes.reduce((acc, el, i) => {\r\n      acc[el.data.id] = i;\r\n      return acc;\r\n    }, {});\r\n\r\n    prepareNodes.forEach(el => {\r\n      if (el.data.parent === null) {\r\n        root.push(el);\r\n        return;\r\n      }\r\n\r\n      const parentEl = prepareNodes[idMapping[el.data.parent]];\r\n      parentEl.children = [...(parentEl.children || []), el];\r\n\r\n      if (parentEl.children.length === 0) {\r\n        // delete parentEl.children;\r\n      }\r\n    });\r\n\r\n    return root;\r\n  }\r\n\r\n  mapExpansion(nodes: TreeNode[], expanseMap: any): void {\r\n    const createExpanseMap = (node: TreeNode) => {\r\n      if (node.expanded) {\r\n        expanseMap[node.data.id] = node.expanded;\r\n      } else {\r\n        expanseMap[node.data.id] = false;\r\n      }\r\n\r\n      if (node.children) {\r\n        node.children.forEach(element => {\r\n          createExpanseMap(element);\r\n        });\r\n      }\r\n    }\r\n\r\n    nodes.forEach(element => {\r\n      createExpanseMap(element);\r\n    });\r\n  }\r\n\r\n  findSelectedNode(selectedNode: TreeNode, tree: TreeNode[]): TreeNode {\r\n    let newSelectedNode: TreeNode;\r\n\r\n    if (selectedNode.parent) {\r\n      let parent = selectedNode.parent;\r\n      let parentIds = [];\r\n\r\n      while (parent) {\r\n        parentIds.push(parent.data.id);\r\n        parent = parent.parent;\r\n      }\r\n\r\n      parentIds = parentIds.reverse();\r\n      let node = tree.find(cat => cat.data.id === parentIds[0]);\r\n\r\n      let i = 1;\r\n      while (node.data.id !== parentIds[parentIds.length - 1]) {\r\n        node = node.children.find(t => t.data.id === parentIds[i]);\r\n        i++;\r\n      }\r\n\r\n      newSelectedNode = node.children.find(item => item.data.id === selectedNode.data.id);\r\n    } else {\r\n      newSelectedNode = tree.find(category => category.data.id === selectedNode.data.id);\r\n    }\r\n\r\n    return newSelectedNode;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ModuleIconComponent } from './icons/module-icon/module-icon.component';\r\nimport {ButtonModule} from 'primeng/button';\r\nimport {InputTextModule} from 'primeng/inputtext';\r\nimport {TreeTableModule} from 'primeng/treetable';\r\nimport {FormsModule, ReactiveFormsModule} from '@angular/forms';\r\nimport {MenubarModule} from 'primeng/menubar';\r\nimport { ConfirmComponent } from './modals/confirm/confirm.component';\r\nimport {MatDialogModule} from '@angular/material/dialog';\r\nimport {InputTextareaModule} from 'primeng/inputtextarea';\r\nimport {DropdownModule} from 'primeng/dropdown';\r\nimport {CheckboxModule} from 'primeng/checkbox';\r\nimport {TableModule} from 'primeng/table';\r\nimport {RadioButtonModule} from 'primeng/radiobutton';\r\nimport {TabViewModule} from 'primeng/tabview';\r\nimport {MoneyFormatPipe} from '@shared/pipes/money-format.pipe';\r\nimport {TieredMenuModule} from 'primeng/tieredmenu';\r\nimport { InIconComponent } from './icons/in-icon/in-icon.component';\r\nimport { NomenclaturePickerComponent } from './components/nomenclature-picker/nomenclature-picker.component';\r\nimport { ProductCategoryPickerComponent } from './pickers/product-category-picker/product-category-picker.component';\r\nimport {TreeSelectModule} from 'primeng/treeselect';\r\nimport {PaginatorModule} from 'primeng/paginator';\r\nimport { PasteImageComponent } from './modals/paste-image/paste-image.component';\r\nimport {ImagesSliderComponent} from '@shared/components/images-slider/images-slider.component';\r\nimport { ImageGalleryComponent } from './modals/image-gallery/image-gallery.component';\r\nimport {MultiSelectModule} from 'primeng/multiselect';\r\nimport {\r\n  MultiTechnologyPickerComponent\r\n} from '@shared/pickers/multi-technology-picker/multi-technology-picker.component';\r\nimport { UploadFileComponent } from './components/upload-file/upload-file.component';\r\nimport { WarehousePickerComponent } from './pickers/warehouse-picker/warehouse-picker.component';\r\nimport { LocatorPickerComponent } from './pickers/locator-picker/locator-picker.component';\r\nimport { NomenclatureTypePickerComponent } from './pickers/nomenclature-type-picker/nomenclature-type-picker.component';\r\nimport {\r\n  ProductStructureCategoryPickerComponent\r\n} from '@shared/pickers/product-structure-category-picker/product-structure-category-picker.component';\r\nimport { UnitMeasurePickerComponent } from './pickers/unit-measure-picker/unit-measure-picker.component';\r\nimport { AcceptedTypePickerComponent } from './pickers/accepted-type-picker/accepted-type-picker.component';\r\nimport {MultiWarehousePickerComponent} from '@shared/pickers/multi-warehouse-picker/multi-warehouse-picker.component';\r\nimport { MultiLocatorPickerComponent } from './pickers/multi-locator-picker/multi-locator-picker.component';\r\nimport { GroupLocatorPickerComponent } from './pickers/group-locator-picker/group-locator-picker.component';\r\nimport { TechnologyPickerComponent } from './pickers/technology-picker/technology-picker.component';\r\nimport { NomenclaturePickerModalComponent } from './modals/nomenclature-picker-modal/nomenclature-picker-modal.component';\r\nimport {CalendarModule} from 'primeng/calendar';\r\nimport { EmployeePickerComponent } from './pickers/employee-picker/employee-picker.component';\r\nimport {CompleteListComponent} from '@shared/modals/refactoring/complete-list/complete-list.component';\r\nimport {ListProductsComponent} from '@shared/modals/refactoring/list-products/list-products.component';\r\nimport {AccountingTypePickerComponent} from '@shared/pickers/accounting-type-picker/accounting-type-picker.component';\r\nimport { MultiCategoriesPickerComponent } from './pickers/multi-categories-picker/multi-categories-picker.component';\r\nimport { MultiProductStructureCategoriesPickerComponent } from './pickers/multi-product-structure-categories-picker/multi-product-structure-categories-picker.component';\r\nimport { MultiCompanyPickerComponent } from './pickers/multi-company-picker/multi-company-picker.component';\r\nimport { MultiSalesStatusPickerComponent } from './pickers/multi-sales-status-picker/multi-sales-status-picker.component';\r\nimport { MultiCompanyCategoryPickerComponent } from './pickers/multi-company-category-picker/multi-company-category-picker.component';\r\nimport { CompanyPickerComponent } from './pickers/company-picker/company-picker.component';\r\nimport { CompanyCategoryPickerComponent } from './pickers/company-category-picker/company-category-picker.component';\r\nimport { RegionPickerComponent } from './pickers/region-picker/region-picker.component';\r\nimport { CompanyCategoryModulePickerComponent } from './pickers/company-category-module-picker/company-category-module-picker.component';\r\nimport { UserProfilePickerComponent } from './pickers/user-profile-picker/user-profile-picker.component';\r\nimport { SortIconComponent } from './icons/sort-icon/sort-icon.component';\r\nimport { DateTimePickerComponent } from './pickers/date-time-picker/date-time-picker.component';\r\nimport {NgxMaskModule} from 'ngx-mask';\r\nimport { CategoriesTreePickerComponent } from './components/categories-tree-picker/categories-tree-picker.component';\r\nimport { CompanyCategorizedMultiPickerComponent } from './pickers/company-categorized-multi-picker/company-categorized-multi-picker.component';\r\nimport {CrmSingleEmployeePickerComponent} from '@shared/pickers/crm-employee-picker/crm-single-employee-picker.component';\r\nimport { MultiContactsPickerComponent } from './pickers/multi-contacts-picker/multi-contacts-picker.component';\r\nimport { UploadFilePickerComponent } from './components/upload-file-picker/upload-file-picker.component';\r\nimport {FileUploadModule} from 'primeng/fileupload';\r\nimport {CurrencyPickerComponent} from '@shared/pickers/currency-picker/currency-picker.component';\r\nimport { AreaPickerComponent } from './pickers/area-picker/area-picker.component';\r\nimport { AreaLocatorPickerComponent } from './pickers/area-locator-picker/area-locator-picker.component';\r\nimport { WarehouseSearchComponent } from './modals/warehouse-search/warehouse-search.component';\r\nimport { PasteScreenImageDirective } from './directives/paste-screen-image.directive';\r\nimport { OrderPageComponent } from './components/order-page/order-page.component';\r\nimport { AddFileToOrderComponent } from './modals/add-file-to-order/add-file-to-order.component';\r\nimport { EditOrderComponent } from './modals/edit-order/edit-order.component';\r\nimport {ProcurementModule} from '../procurement/procurement.module';\r\nimport {MultiStatusesPickerComponent} from '@shared/pickers/multi-statuses-picker/multi-statuses-picker.component';\r\nimport { StatusesPickerComponent } from './pickers/statuses-picker/statuses-picker.component';\r\nimport { OrderStatusesComponent } from './components/order-statuses/order-statuses.component';\r\nimport {DragDropModule} from '@angular/cdk/drag-drop';\r\nimport { CreateEditStatusComponent } from './modals/create-edit-status/create-edit-status.component';\r\nimport { CreateChainComponent } from './modals/create-chain/create-chain.component';\r\nimport { AddProductsToChainComponent } from './modals/add-products-to-chain/add-products-to-chain.component';\r\nimport { MultiProductCategoriesPickerComponent } from './pickers/multi-product-categories-picker/multi-product-categories-picker.component';\r\nimport { MultiPurchaseCategoryPickerComponent } from './pickers/multi-purchase-category-picker/multi-purchase-category-picker.component';\r\nimport { CrmCompanyPickerComponent } from './pickers/crm-company-picker/crm-company-picker.component';\r\nimport { CrmTreeCompanyPickerComponent } from './pickers/crm-tree-company-picker/crm-tree-company-picker.component';\r\nimport { SubRegionPickerComponent } from './pickers/sub-region-picker/sub-region-picker.component';\r\nimport { OrderStatusesTableComponent } from './components/order-statuses-table/order-statuses-table.component';\r\nimport { OrderStatusesChartComponent } from './components/order-statuses-chart/order-statuses-chart.component';\r\nimport { SearchPipe } from './pipes/search.pipe';\r\nimport { AlbumComponent } from './modals/album/album.component';\r\nimport { MultiCountriesPickerComponent } from './pickers/multi-countries-picker/multi-countries-picker.component';\r\nimport { CrmMultiRegionPickerComponent } from './pickers/crm-multi-region-picker/crm-multi-region-picker.component';\r\nimport { CrmMultiRegionTreePickerComponent } from './pickers/crm-multi-region-tree-picker/crm-multi-region-tree-picker.component';\r\nimport { HoverDetailedInfoComponentComponent } from './components/hover-detailed-info-component/hover-detailed-info-component.component';\r\nimport { RootListPickerByOrderTypeComponent } from './pickers/root-list-picker-by-order-type/root-list-picker-by-order-type.component';\r\nimport { ProductListsNomenclaturePickerComponent } from './pickers/product-lists-nomenclature-picker/product-lists-nomenclature-picker.component';\r\nimport {MiddleMouseClickDirective} from '@shared/directives/middle-mouse-click.directive';\r\nimport { OrderTenderSupplierComponent } from './components/order-page/order-tender-supplier/order-tender-supplier.component';\r\n\r\nimport { MultiVehiclePickerComponent } from './pickers/multi-vehicle-picker/multi-vehicle-picker.component';\r\n\r\nimport { TippyDirective } from './directives/tippy.directive';\r\nimport { ChoiceDateComponent } from './modals/choice-date/choice-date.component';\r\nimport { ChoicePeriodDateComponent } from './modals/choice-period-date/choice-period-date.component';\r\nimport { EmployeePositionPickerComponent } from './pickers/employee-position-picker/employee-position-picker.component';\r\nimport { RootListPickerComponent } from '@shared/pickers/root-list-picker/root-list-picker.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ModuleIconComponent,\r\n    ConfirmComponent,\r\n    ProductStructureCategoryPickerComponent,\r\n    MoneyFormatPipe,\r\n    InIconComponent,\r\n    NomenclaturePickerComponent,\r\n    ProductCategoryPickerComponent,\r\n    ImagesSliderComponent,\r\n    PasteImageComponent,\r\n    ImageGalleryComponent,\r\n    MultiTechnologyPickerComponent,\r\n    UploadFileComponent,\r\n    WarehousePickerComponent,\r\n    LocatorPickerComponent,\r\n    NomenclatureTypePickerComponent,\r\n    UnitMeasurePickerComponent,\r\n    AcceptedTypePickerComponent,\r\n    MultiWarehousePickerComponent,\r\n    MultiLocatorPickerComponent,\r\n    GroupLocatorPickerComponent,\r\n    TechnologyPickerComponent,\r\n    NomenclaturePickerModalComponent,\r\n    EmployeePickerComponent,\r\n    CompleteListComponent,\r\n    ListProductsComponent,\r\n    AccountingTypePickerComponent,\r\n    MultiCategoriesPickerComponent,\r\n    MultiProductStructureCategoriesPickerComponent,\r\n    MultiCompanyPickerComponent,\r\n    MultiSalesStatusPickerComponent,\r\n    MultiCompanyCategoryPickerComponent,\r\n    CompanyPickerComponent,\r\n    CompanyCategoryPickerComponent,\r\n    RegionPickerComponent,\r\n    CompanyCategoryModulePickerComponent,\r\n    UserProfilePickerComponent,\r\n    SortIconComponent,\r\n    DateTimePickerComponent,\r\n    CategoriesTreePickerComponent,\r\n    CompanyCategorizedMultiPickerComponent,\r\n    CrmSingleEmployeePickerComponent,\r\n    MultiContactsPickerComponent,\r\n    UploadFilePickerComponent,\r\n    CurrencyPickerComponent,\r\n    AreaPickerComponent,\r\n    AreaLocatorPickerComponent,\r\n    WarehouseSearchComponent,\r\n    PasteScreenImageDirective,\r\n    OrderPageComponent,\r\n    AddFileToOrderComponent,\r\n    EditOrderComponent,\r\n    MultiStatusesPickerComponent,\r\n    StatusesPickerComponent,\r\n    OrderStatusesComponent,\r\n    CreateEditStatusComponent,\r\n    CreateChainComponent,\r\n    AddProductsToChainComponent,\r\n    MultiProductCategoriesPickerComponent,\r\n    MultiPurchaseCategoryPickerComponent,\r\n    CrmCompanyPickerComponent,\r\n    CrmTreeCompanyPickerComponent,\r\n    SubRegionPickerComponent,\r\n    OrderStatusesTableComponent,\r\n    OrderStatusesChartComponent,\r\n    SearchPipe,\r\n    AlbumComponent,\r\n    MultiCountriesPickerComponent,\r\n    CrmMultiRegionPickerComponent,\r\n    CrmMultiRegionTreePickerComponent,\r\n    TippyDirective,\r\n    ChoiceDateComponent,\r\n    ChoicePeriodDateComponent,\r\n    EmployeePositionPickerComponent,\r\n    RootListPickerComponent,\r\n    HoverDetailedInfoComponentComponent,\r\n    MiddleMouseClickDirective,\r\n    OrderTenderSupplierComponent,\r\n    RootListPickerByOrderTypeComponent,\r\n    ProductListsNomenclaturePickerComponent,\r\n    MultiVehiclePickerComponent,\r\n  ],\r\n  exports: [\r\n    MultiStatusesPickerComponent,\r\n    ButtonModule,\r\n    InputTextModule,\r\n    TreeTableModule,\r\n    ReactiveFormsModule,\r\n    MenubarModule,\r\n    MatDialogModule,\r\n    InputTextareaModule,\r\n    DropdownModule,\r\n    FormsModule,\r\n    CheckboxModule,\r\n    ProductStructureCategoryPickerComponent,\r\n    TableModule,\r\n    RadioButtonModule,\r\n    ModuleIconComponent,\r\n    TabViewModule,\r\n    MoneyFormatPipe,\r\n    TieredMenuModule,\r\n    InIconComponent,\r\n    NomenclaturePickerComponent,\r\n    PaginatorModule,\r\n    ProductCategoryPickerComponent,\r\n    ImagesSliderComponent,\r\n    MultiTechnologyPickerComponent,\r\n    UploadFileComponent,\r\n    WarehousePickerComponent,\r\n    LocatorPickerComponent,\r\n    NomenclatureTypePickerComponent,\r\n    UnitMeasurePickerComponent,\r\n    AcceptedTypePickerComponent,\r\n    MultiWarehousePickerComponent,\r\n    MultiLocatorPickerComponent,\r\n    GroupLocatorPickerComponent,\r\n    TechnologyPickerComponent,\r\n    CalendarModule,\r\n    EmployeePickerComponent,\r\n    AccountingTypePickerComponent,\r\n    MultiCategoriesPickerComponent,\r\n    MultiProductStructureCategoriesPickerComponent,\r\n    MultiCompanyPickerComponent,\r\n    MultiSalesStatusPickerComponent,\r\n    MultiCompanyCategoryPickerComponent,\r\n    CompanyPickerComponent,\r\n    CompanyCategoryPickerComponent,\r\n    RegionPickerComponent,\r\n    CompanyCategoryModulePickerComponent,\r\n    UserProfilePickerComponent,\r\n    SortIconComponent,\r\n    NomenclaturePickerModalComponent,\r\n    DateTimePickerComponent,\r\n    CategoriesTreePickerComponent,\r\n    CompanyCategorizedMultiPickerComponent,\r\n    CrmSingleEmployeePickerComponent,\r\n    MultiContactsPickerComponent,\r\n    UploadFilePickerComponent,\r\n    CurrencyPickerComponent,\r\n    AreaPickerComponent,\r\n    AreaLocatorPickerComponent,\r\n    PasteScreenImageDirective,\r\n    MultiSelectModule,\r\n    OrderPageComponent,\r\n    OrderStatusesComponent,\r\n    MultiProductCategoriesPickerComponent,\r\n    MultiPurchaseCategoryPickerComponent,\r\n    CrmCompanyPickerComponent,\r\n    CrmTreeCompanyPickerComponent,\r\n    SubRegionPickerComponent,\r\n    OrderStatusesTableComponent,\r\n    SearchPipe,\r\n    MultiCountriesPickerComponent,\r\n    CrmMultiRegionPickerComponent,\r\n    CrmMultiRegionTreePickerComponent,\r\n    TippyDirective,\r\n    StatusesPickerComponent,\r\n    EmployeePositionPickerComponent,\r\n    RootListPickerComponent,\r\n    HoverDetailedInfoComponentComponent,\r\n    RootListPickerByOrderTypeComponent,\r\n    ProductListsNomenclaturePickerComponent,\r\n    MiddleMouseClickDirective,\r\n    MultiVehiclePickerComponent,\r\n  ],\r\n  imports: [\r\n    MultiSelectModule,\r\n    CommonModule,\r\n    ButtonModule,\r\n    InputTextModule,\r\n    TreeTableModule,\r\n    ReactiveFormsModule,\r\n    MenubarModule,\r\n    MatDialogModule,\r\n    InputTextareaModule,\r\n    DropdownModule,\r\n    FormsModule,\r\n    CheckboxModule,\r\n    TableModule,\r\n    RadioButtonModule,\r\n    TabViewModule,\r\n    TieredMenuModule,\r\n    TreeSelectModule,\r\n    PaginatorModule,\r\n    MultiSelectModule,\r\n    CalendarModule,\r\n    NgxMaskModule.forRoot(),\r\n    FileUploadModule,\r\n    DragDropModule,\r\n  ]\r\n})\r\nexport class SharedModule { }\r\n","import {Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {PhysicalInventoryService} from '../../../services/physical-inventory.service';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {debounceTime, map, switchMap, tap} from 'rxjs/operators';\r\nimport {finalize, fromEvent, Subject, takeUntil} from 'rxjs';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Product} from '../../../../product-structure/models/product';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {InventoryProduct, PhysicalInventory} from '../../../models/physical-inventory';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {QrCodeService} from '../../../../qr-code/qr-code.service';\r\nimport {SortEvent} from 'primeng/api';\r\nimport {Category} from '../../../../product-structure/models/category';\r\n\r\nexport class PreparedPhysicalInventory {\r\n  nomenclature: Nomenclature;\r\n  isSerializerProduct: boolean;\r\n  product: InventoryProduct[];\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-physical-inventory-products',\r\n  templateUrl: './physical-inventory-products.component.html',\r\n  styleUrls: ['./physical-inventory-products.component.scss']\r\n})\r\nexport class PhysicalInventoryProductsComponent implements OnInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n  @ViewChild('searchBoxDescription') searchBoxDescription;\r\n\r\n  isCompleting = false;\r\n  isCancelation = false;\r\n  isGenerating = false;\r\n\r\n  stopScanned$: Subject<any> = new Subject();\r\n  scanningEnd = false;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    code: [null],\r\n    description: [null],\r\n    warehouse: [null],\r\n    category: [null],\r\n    locator: [null],\r\n    type: [null],\r\n    found_row_id: [null],\r\n    accepted_by_invoices: [null],\r\n    order_by_code: [null],\r\n    order_by_name: [null],\r\n    order_by_initial_quantity: [null],\r\n    order_by_new_quantity: [null],\r\n    order_by_category: [null],\r\n    order_by_warehouse: [null],\r\n    order_by_locator: [null],\r\n    page: [1],\r\n  });\r\n\r\n  isShowAll = false;\r\n  warehousesIds: number[] = [];\r\n\r\n  selectedInventoryProducts: Product[] = [];\r\n  inventoryProducts: Product[] = [];\r\n\r\n  isLoadingCurrentInventory = true;\r\n  isLoadingInventoryList = true;\r\n\r\n  queryKey = 'name:null/code:null/description:null/type:null/accepted_by_invoices:null/warehouse:null/locator:null/category:null';\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'paginated', value: true},\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n  ];\r\n\r\n  isStartOnePage = false;\r\n  countProducts = 0;\r\n  inventoryId: number;\r\n  currentInventory: PhysicalInventory = null;\r\n\r\n  ignoringPagination = false;\r\n\r\n  // foundInventoryProductId\r\n  findItemId: number;\r\n\r\n  newQuantity$ = new Subject<InventoryProduct>();\r\n\r\n  private destroy$ = new Subject();\r\n  isScanned: boolean = false;\r\n  preparedProducts: Product[] = [];\r\n\r\n  constructor(\r\n    private readonly route: ActivatedRoute,\r\n    private readonly fb: FormBuilder,\r\n    private readonly modalService: ModalService,\r\n    private readonly physicalInventoryService: PhysicalInventoryService,\r\n    private readonly qrCodeService: QrCodeService,\r\n    private readonly router: Router,\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedInventoryProducts = []),\r\n        map(() => this.searchBoxName.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchProducts();\r\n    });\r\n\r\n    fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedInventoryProducts = []),\r\n        map(() => this.searchBoxCode.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchProducts();\r\n    });\r\n\r\n    fromEvent(this.searchBoxDescription.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedInventoryProducts = []),\r\n        map(() => this.searchBoxDescription.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchProducts();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.inventoryId = +id),\r\n      switchMap(() => this.physicalInventoryService.getById(this.inventoryId)),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(inventory => {\r\n      this.currentInventory = inventory;\r\n      this.warehousesIds = this.currentInventory.warehouses.map(w => w.id);\r\n      this.isLoadingCurrentInventory = false;\r\n    });\r\n\r\n    this.onChangeQuantity();\r\n    this.getInventoryProductsForPagination();\r\n  }\r\n\r\n  onChangeQuantity() {\r\n    this.newQuantity$.pipe(\r\n      tap(inventoryProduct => this.prepareForSave(inventoryProduct)),\r\n      debounceTime(350),\r\n      switchMap(inventoryProduct => this.physicalInventoryService.updateQuantityInventoryProduct(inventoryProduct)),\r\n    ).subscribe();\r\n  }\r\n\r\n  prepareForSave(inventoryProduct: InventoryProduct) {\r\n    if (inventoryProduct.new_quantity === null || inventoryProduct.new_quantity < 0) {\r\n      inventoryProduct.new_quantity = 0;\r\n    }\r\n  }\r\n\r\n  searchProducts() {\r\n    this.isLoadingInventoryList = true;\r\n    this.destroy$.next(true);\r\n    this.selectedInventoryProducts = [];\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}/description:${this.searchForm.get('description').value}/type:${this.searchForm.get('type').value}/accepted_by_invoices:${this.searchForm.get('accepted_by_invoices').value}/warehouse:${this.searchForm.get('warehouse').value}/locator:${this.searchForm.get('locator').value}/category:${this.searchForm.get('category').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query = [\r\n        {name: 'paginated', value: 'true'},\r\n        {name: 'page', value: this.searchForm.get('page').value},\r\n      ];\r\n    }\r\n\r\n    if (this.searchForm.get('code').value) {\r\n      this.query.push({name: 'code', value: this.searchForm.get('code').value});\r\n    }\r\n\r\n    if (this.searchForm.get('name').value) this.query.push({name: 'name', value: this.searchForm.get('name').value});\r\n\r\n    if (this.searchForm.get('description').value) this.query.push({\r\n      name: 'description',\r\n      value: this.searchForm.get('description').value\r\n    });\r\n\r\n    if (this.searchForm.get('warehouse').value) this.query.push({\r\n      name: 'warehouse',\r\n      value: this.searchForm.get('warehouse').value\r\n    });\r\n\r\n    if (this.searchForm.get('locator').value) this.query.push({\r\n      name: 'locator',\r\n      value: this.searchForm.get('locator').value\r\n    });\r\n\r\n    if (this.searchForm.get('type').value !== null) this.query.push({\r\n      name: 'type',\r\n      value: this.searchForm.get('type').value\r\n    });\r\n\r\n    if (this.searchForm.get('accepted_by_invoices').value !== null) this.query.push({\r\n      name: 'accepted_by_invoices',\r\n      value: this.searchForm.get('accepted_by_invoices').value\r\n    });\r\n\r\n    if (this.searchForm.get('found_row_id').value) {\r\n      this.query.push({\r\n        name: 'found_row_id',\r\n        value: this.searchForm.get('found_row_id').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('category').value) this.query.push({\r\n      name: 'category',\r\n      value: this.searchForm.get('category').value\r\n    });\r\n\r\n    const ordering = this.prepareSortingField();\r\n    if (ordering) {\r\n      this.query.push({\r\n        name: 'ordering',\r\n        value: ordering\r\n      });\r\n    }\r\n\r\n    if (!this.isShowAll) {\r\n      this.getInventoryProductsForPagination();\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.getInventoryProducts();\r\n    }\r\n  }\r\n\r\n  getInventoryProductsForPagination() {\r\n    const newInventoryProducts = [];\r\n\r\n    this.physicalInventoryService.getInventoryProductsListsForPagination(this.inventoryId, this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(inventoryLists => {\r\n\r\n      const preparedProducts = [];\r\n      inventoryLists.results.forEach(product => {\r\n        preparedProducts.push(...product.products)\r\n      });\r\n      this.preparedProducts = [...preparedProducts];\r\n      inventoryLists.results.forEach(list => {\r\n        list.products[0].countProducts = list.products.length;\r\n        list.products[0].products = [...list.products];\r\n        list.products[0].is_scanned_root = list.is_scanned;\r\n        list.products[0].root_id = list.id;\r\n        newInventoryProducts.push(list.products[0]);\r\n      });\r\n\r\n      if (this.searchForm.get('found_row_id').value) {\r\n        this.ignoringPagination = true;\r\n        this.searchForm.get('found_row_id').patchValue(null);\r\n        let page: number;\r\n\r\n        if (!inventoryLists.previous) {\r\n          page = 1;\r\n        } else if (!inventoryLists.next) {\r\n          page = Math.ceil(inventoryLists.count / 10);\r\n        } else {\r\n          page = parseInt(\r\n            inventoryLists.next\r\n              .split('?')\r\n              .find(s => s.includes('page'))\r\n              .split('&')\r\n              .find(s => s.includes('page'))\r\n              .replace(/[^0-9]/g, ''),\r\n            10) - 1;\r\n        }\r\n\r\n        this.searchForm.get('page').patchValue(page);\r\n        this.paginator.changePage(page - 1);\r\n        newInventoryProducts.sort((a, b) => a.root_id === this.findItemId ? -1 : 1);\r\n      }\r\n\r\n      this.findItemId = null;\r\n\r\n      this.inventoryProducts = [...newInventoryProducts];\r\n      this.countProducts = inventoryLists.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoadingInventoryList = false;\r\n    });\r\n  }\r\n\r\n  getInventoryProducts() {\r\n    const newInventoryProducts = [];\r\n\r\n    this.physicalInventoryService.getInventoryProducts(this.inventoryId, this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(inventoryLists => {\r\n      const preparedProducts = [];\r\n      inventoryLists.forEach(product => {\r\n        preparedProducts.push(...product.products)\r\n      });\r\n      this.preparedProducts = [...preparedProducts];\r\n      inventoryLists.forEach(list => {\r\n        list.products[0].countProducts = list.products.length;\r\n        list.products[0].products = [...list.products];\r\n        list.products[0].is_scanned_root = list.is_scanned;\r\n        list.products[0].root_id = list.id;\r\n        newInventoryProducts.push(list.products[0]);\r\n      });\r\n\r\n      this.inventoryProducts = [...newInventoryProducts];\r\n      this.countProducts = inventoryLists.length;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoadingInventoryList = false;\r\n    });\r\n  }\r\n\r\n  onSelectWarehouse(id: number) {\r\n    this.searchForm.get('warehouse').patchValue(id);\r\n    this.searchForm.get('locator').patchValue(null);\r\n    this.searchProducts();\r\n  }\r\n\r\n  onSelectLocator(id: number) {\r\n    this.searchForm.get('locator').patchValue(id);\r\n    this.searchProducts();\r\n  }\r\n\r\n  onSelectNomenclatureType(type: ENomenclatureType) {\r\n    this.searchForm.get('type').patchValue(type);\r\n    this.searchProducts();\r\n  }\r\n\r\n  onSelectAcceptedByInvoices(value: boolean) {\r\n    this.searchForm.get('accepted_by_invoices').patchValue(value);\r\n    this.searchProducts();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (this.ignoringPagination) {\r\n      this.ignoringPagination = false;\r\n      return;\r\n    }\r\n\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchProducts();\r\n    }\r\n  }\r\n\r\n  onComplete() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.physicalInventoryService.getChangedPhysicalInventoryProductsHaveBeenChanged(+this.inventoryId).subscribe((res: { data: InventoryProduct[] }) => {\r\n          if (res.data.length > 0) {\r\n            this.physicalInventoryService.changesInInventory(res.data).subscribe(res => {\r\n              if (res) {\r\n                this.completePhysicalInventory();\r\n              }\r\n            });\r\n          } else {\r\n            this.completePhysicalInventory();\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  completePhysicalInventory() {\r\n    this.isCompleting = true;\r\n    this.physicalInventoryService.completePhysicalInventory(+this.inventoryId).pipe(\r\n      finalize(() => this.isCompleting = false)\r\n    ).subscribe(() => {\r\n      this.router.navigateByUrl('/warehouse/physical-inventory').then();\r\n    });\r\n  }\r\n\r\n  onRemovePhysicalInventory() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isCancelation = true;\r\n        this.physicalInventoryService.removePhysicalInventory(+this.inventoryId).pipe(\r\n          finalize(() => this.isCancelation = false)\r\n        ).subscribe(() => {\r\n          this.router.navigateByUrl('/warehouse/physical-inventory').then();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.searchProducts();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.searchProducts();\r\n  }\r\n\r\n  onMoveProduct() {\r\n    this.physicalInventoryService.openPhysicalInventoryProductMoveModal(this.selectedInventoryProducts[0]).subscribe(res => {\r\n      if (res) {\r\n        this.searchProducts();\r\n      }\r\n    });\r\n  }\r\n\r\n  onOpenAddProductModal() {\r\n    this.physicalInventoryService.openAddProductToPhysicalInventory(this.inventoryId).subscribe(res => {\r\n      if (res) {\r\n        this.searchProducts();\r\n      }\r\n    });\r\n  }\r\n\r\n  onGenerateQrCodes() {\r\n    this.isGenerating = true;\r\n\r\n    const send = {\r\n      by_nomenclatures_list: [],\r\n    };\r\n\r\n    this.selectedInventoryProducts.forEach(p => {\r\n      if (p.product) {\r\n        send.by_nomenclatures_list.push({\r\n          nomenclature_id: p.product.nomenclature.id,\r\n          serial_number_ids:\r\n            p.product.nomenclature.bulk_or_serial === '1' ?\r\n              p.products.filter(product => product.serial_number).map(product => +product.serial_number.id) : [],\r\n          order_product_ids: [p.id],\r\n          invoice_product_ids: [],\r\n        });\r\n      } else {\r\n        send.by_nomenclatures_list.push({\r\n          nomenclature_id: p.nomenclature.id,\r\n          serial_number_ids: [],\r\n          order_product_ids: [],\r\n          invoice_product_ids: [],\r\n        });\r\n      }\r\n    });\r\n\r\n    this.qrCodeService.generateQrCodes(send).subscribe(() => this.isGenerating = false);\r\n  }\r\n\r\n  onStartScanning() {\r\n    this.isScanned = true;\r\n    this.findItemId = null;\r\n    this.scanningEnd = false;\r\n  }\r\n\r\n  onScanned(data: any) {\r\n    this.physicalInventoryService.scanPhysicalInventoryQrCode(this.inventoryId, data).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(response => {\r\n      if (!this.scanningEnd) {\r\n        if (response) {\r\n          this.scanningComplete(response);\r\n        } else {\r\n          this.scanningEnd = true;\r\n          this.isScanned = false;\r\n\r\n          setTimeout(() => {\r\n            alert('Not Found');\r\n          }, 1000);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  scanningComplete(data: { item_id_changed: number, list_id_changed: number }) {\r\n    const listId = data.item_id_changed;\r\n    const itemId = data.list_id_changed;\r\n\r\n    if (listId) {\r\n      this.findItemId = listId;\r\n      const findEl = this.inventoryProducts.find(p => p.root_id === this.findItemId);\r\n\r\n      if (findEl) {\r\n        if (findEl.nomenclature.bulk_or_serial === '1') {\r\n          findEl.is_scanned = true;\r\n          findEl.is_scanned_root = true;\r\n        } else {\r\n          findEl.is_scanned = true;\r\n          findEl.is_scanned_root = true;\r\n        }\r\n        const element = document.getElementById('product_row' + findEl.id);\r\n        element.scrollIntoView({ behavior: \"smooth\", block: \"center\" });\r\n      } else {\r\n        this.searchForm.get('found_row_id').patchValue(listId);\r\n        this.searchProducts();\r\n      }\r\n    }\r\n\r\n    this.scanningEnd = true;\r\n    this.isScanned = false;\r\n  }\r\n\r\n  onCancelScanned() {\r\n    this.scanningEnd = true;\r\n    this.isScanned = false;\r\n  }\r\n\r\n  getWarehouseLocators(warehouseId: number) {\r\n    // @ts-ignore\r\n    return this.currentInventory.locators.filter(loc => loc.warehouse === warehouseId).map(loc => loc.name);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.stopScanned$.next(true);\r\n    this.stopScanned$.complete();\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  prepareSortingField(): string {\r\n    let sorting = '';\r\n    if (this.searchForm.get('order_by_code').value !== null) {\r\n      if (this.searchForm.get('order_by_code').value) {\r\n        sorting += '-physicalinventoryproduct__nomenclature__code,';\r\n      } else {\r\n        sorting += 'physicalinventoryproduct__nomenclature__code,';\r\n      }\r\n    }\r\n\r\n    if (this.searchForm.get('order_by_name').value !== null) {\r\n      if (this.searchForm.get('order_by_name').value) {\r\n        sorting += '-physicalinventoryproduct__nomenclature__name,';\r\n      } else {\r\n        sorting += 'physicalinventoryproduct__nomenclature__name,';\r\n      }\r\n    }\r\n\r\n    if (this.searchForm.get('order_by_initial_quantity').value !== null) {\r\n      if (this.searchForm.get('order_by_initial_quantity').value) {\r\n        sorting += '-physicalinventoryproduct__initial_quantity,';\r\n      } else {\r\n        sorting += 'physicalinventoryproduct__initial_quantity,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_new_quantity').value !== null) {\r\n      if (this.searchForm.get('order_by_new_quantity').value) {\r\n        sorting += '-physicalinventoryproduct__new_quantity,';\r\n      } else {\r\n        sorting += 'physicalinventoryproduct__new_quantity,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_category').value !== null) {\r\n      if (this.searchForm.get('order_by_category').value) {\r\n        sorting += '-physicalinventoryproduct__nomenclature__category__name,';\r\n      } else {\r\n        sorting += 'physicalinventoryproduct__nomenclature__category__name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_warehouse').value !== null) {\r\n      if (this.searchForm.get('order_by_warehouse').value) {\r\n        sorting += '-physicalinventoryproduct__locator__warehouse__name,';\r\n      } else {\r\n        sorting += 'physicalinventoryproduct__locator__warehouse__name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_locator').value !== null) {\r\n      if (this.searchForm.get('order_by_locator').value) {\r\n        sorting += '-physicalinventoryproduct__locator__name,';\r\n      } else {\r\n        sorting += 'physicalinventoryproduct__locator__name,';\r\n      }\r\n    }\r\n\r\n    return sorting;\r\n  }\r\n\r\n  sorting(value: boolean, field: string) {\r\n    if (value === null) {\r\n      this.searchForm.get(field).patchValue(false);\r\n    } else if (value === false) {\r\n      this.searchForm.get(field).patchValue(true);\r\n    } else if (value === true) {\r\n      this.searchForm.get(field).patchValue(null);\r\n    }\r\n    this.searchProducts();\r\n  }\r\n\r\n  customSort(event: SortEvent) {\r\n    event.data.sort((data1, data2) => {\r\n      let value1 = data1[event.field];\r\n      let value2 = data2[event.field];\r\n      let result = null;\r\n\r\n      if (value1 == null && value2 != null)\r\n        result = -1;\r\n      else if (value1 != null && value2 == null)\r\n        result = 1;\r\n      else if (value1 == null && value2 == null)\r\n        result = 0;\r\n      else if (typeof value1 === 'string' && typeof value2 === 'string')\r\n        result = value1.localeCompare(value2);\r\n      else\r\n        result = (value1 < value2) ? -1 : (value1 > value2) ? 1 : 0;\r\n\r\n      return (event.order * result);\r\n    });\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    if (category) {\r\n      this.searchForm.get('category').patchValue(category.id);\r\n    } else {\r\n      this.searchForm.get('category').patchValue(null);\r\n    }\r\n    this.searchProducts();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>\r\n        Physical Inventory Products of Warehouses:\r\n        <ng-container *ngIf=\"isLoadingCurrentInventory\">...</ng-container>\r\n        <ng-container *ngIf=\"!isLoadingCurrentInventory\">\r\n          <ng-container *ngFor=\"let warehouse of currentInventory.warehouses; let idx = index\">\r\n            {{warehouse.name}}\r\n            locators(\r\n            <ng-container *ngFor=\"let locator of getWarehouseLocators(warehouse.id); let locatorIdx = index\">\r\n              {{locator}}<span *ngIf=\"locatorIdx !== getWarehouseLocators(warehouse.id).length - 1\">,</span>\r\n            </ng-container>\r\n            )\r\n            <span *ngIf=\"idx !== currentInventory.warehouses.length - 1\">,</span>\r\n          </ng-container>\r\n        </ng-container>\r\n        <div>Date Created {{ currentInventory?.system_creation_date | date:'dd/MM/yyyy'}}</div>\r\n      </h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Add Product\"\r\n        class=\"mr-2\"\r\n        (click)=\"onOpenAddProductModal()\"\r\n      >\r\n      </button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"mr-2 p-button-icon\"\r\n        icon=\"pi pi-check\"\r\n        label=\"Complete\"\r\n        (click)=\"onComplete()\"\r\n        [loading]=\"isCompleting\"\r\n        [disabled]=\"!currentInventory || (isLoadingCurrentInventory && currentInventory.status === '0')\">\r\n      </button>\r\n\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-times\"\r\n        label=\"Cancel Physical Inventory\"\r\n        class=\"p-button-danger p-button-icon\"\r\n        [loading]=\"isCancelation\"\r\n        (click)=\"onRemovePhysicalInventory()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"left-side\">\r\n      <div class=\"form-group\">\r\n        <pek-categories-tree-picker\r\n          [currentCategoryId]=\"searchForm.get('category').value\"\r\n          (categorySelected)=\"onSelectCategory($event)\"\r\n        >\r\n        </pek-categories-tree-picker>\r\n      </div>\r\n    </div>\r\n    <div class=\"right-side\">\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"physical-inventory-products__form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-4\">\r\n            <div class=\"form-group\">\r\n              <label>Code</label>\r\n              <input class=\"form-control\" formControlName=\"code\" pInputText #searchBoxCode>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"form-group\">\r\n              <label>Name</label>\r\n              <input class=\"form-control\" formControlName=\"name\" pInputText #searchBoxName>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"form-group\">\r\n              <label>Description</label>\r\n              <input class=\"form-control\" formControlName=\"description\" pInputText #searchBoxDescription>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"row\">\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>Warehouses</label>\r\n                  <pek-warehouse-picker\r\n                    [acceptedWarehouseIds]=\"warehousesIds\"\r\n                    (selectWarehouse)=\"onSelectWarehouse($event)\"\r\n                  ></pek-warehouse-picker>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>Locator</label>\r\n                  <pek-locator-picker\r\n                    (selectLocator)=\"onSelectLocator($event)\"\r\n                    [warehouseId]=\"searchForm.get('warehouse').value\"\r\n                    [isAllLocators]=\"false\"\r\n                    [isDisabled]=\"true\"\r\n                  ></pek-locator-picker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"row\">\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>Type</label>\r\n                  <pek-nomenclature-type-picker\r\n                    (choiceNomenclatureType)=\"onSelectNomenclatureType($event)\"\r\n                  ></pek-nomenclature-type-picker>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-6\">\r\n                <div class=\"form-group\">\r\n                  <label>Accepted Type</label>\r\n                  <pek-accepted-type-picker\r\n                    (selectAcceptedType)=onSelectAcceptedByInvoices($event)\r\n                  ></pek-accepted-type-picker>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4\">\r\n            <div class=\"action-buttons\">\r\n              <button\r\n                class=\"ml-auto mr-2 p-button-icon\"\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-camera\"\r\n                label=\"Scan QR Codes\"\r\n                (click)=\"onStartScanning()\"\r\n              >\r\n              </button>\r\n              <button\r\n                class=\"mr-2 p-button-icon\"\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-qrcode\"\r\n                label=\"Generate QR Codes\"\r\n                [loading]=\"isGenerating\"\r\n                (click)=\"onGenerateQrCodes()\"\r\n                [disabled]=\"selectedInventoryProducts.length === 0\"\r\n              >\r\n              </button>\r\n              <button\r\n                class=\"\"\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-double-right p-button-icon\"\r\n                label=\"Move product\"\r\n                [disabled]=\"selectedInventoryProducts.length === 0 || selectedInventoryProducts.length > 1\"\r\n                (click)=\"onMoveProduct()\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <div class=\"table-pagination-preloader\">\r\n        <p-table\r\n          #dt\r\n          selectionMode=\"multiple\"\r\n          scrollHeight=\"calc(100vh - 30.25rem)\"\r\n          [scrollable]=\"true\"\r\n          dataKey=\"id\"\r\n          groupRowsBy=\"nomenclature.id\"\r\n          rowGroupMode=\"rowspan\"\r\n          (sortFunction)=\"customSort($event)\"\r\n          [customSort]=\"true\"\r\n          [rows]=\"preparedProducts.length\"\r\n          [(selection)]=\"selectedInventoryProducts\"\r\n          [value]=\"preparedProducts\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 3%\">\r\n                <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n              </th>\r\n              <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n              <th style=\"width: 14%\"\r\n                  class=\"sort-label\"\r\n                  pSortableColumn=\"nomenclature.code\"\r\n                  (click)=\"sorting(searchForm.get('order_by_code').value, 'order_by_code')\">\r\n                Code\r\n                <pek-sort-icon [value]=\"searchForm.get('order_by_code').value\"></pek-sort-icon>\r\n              </th>\r\n              <th style=\"width: 10%\"\r\n                  pSortableColumn=\"nomenclature.name\"\r\n                  class=\"sort-label\"\r\n                  (click)=\"sorting(searchForm.get('order_by_name').value, 'order_by_name')\">\r\n                Name\r\n                <pek-sort-icon [value]=\"searchForm.get('order_by_name').value\"></pek-sort-icon>\r\n              </th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Technology</th>\r\n              <th style=\"width: 9%\" class=\"text-center sort-label\"\r\n                  pSortableColumn=\"initial_quantity\"\r\n                  (click)=\"sorting(searchForm.get('order_by_initial_quantity').value, 'order_by_initial_quantity')\"\r\n              >\r\n                Initial Quantity\r\n                <pek-sort-icon [value]=\"searchForm.get('order_by_initial_quantity').value\"></pek-sort-icon>\r\n              </th>\r\n              <th style=\"width: 11%\"\r\n                  class=\"text-center sort-label\"\r\n                  pSortableColumn=\"new_quantity\"\r\n                  (click)=\"sorting(searchForm.get('order_by_new_quantity').value, 'order_by_new_quantity')\"\r\n              >\r\n                Entered Quantity\r\n                <pek-sort-icon [value]=\"searchForm.get('order_by_new_quantity').value\"></pek-sort-icon>\r\n              </th>\r\n              <th style=\"width: 11%\" class=\"text-center sort-label\"\r\n                  pSortableColumn=\"nomenclature.category.name\"\r\n                  (click)=\"sorting(searchForm.get('order_by_category').value, 'order_by_category')\"\r\n              >\r\n                Category\r\n                <pek-sort-icon [value]=\"searchForm.get('order_by_category').value\"></pek-sort-icon>\r\n              </th>\r\n              <th style=\"width: 6%\" class=\"text-center\">UOM</th>\r\n              <th style=\"width: 11%\" class=\"text-center sort-label\"\r\n                  pSortableColumn=\"locator.warehouse.name\"\r\n                  (click)=\"sorting(searchForm.get('order_by_warehouse').value, 'order_by_warehouse')\"\r\n              >\r\n                Warehouse\r\n                <pek-sort-icon [value]=\"searchForm.get('order_by_warehouse').value\"></pek-sort-icon>\r\n              </th>\r\n              <th style=\"width: 14%\"\r\n                  class=\"sort-label\"\r\n                  pSortableColumn=\"locator.name\"\r\n                  (click)=\"sorting(searchForm.get('order_by_locator').value, 'order_by_locator')\"\r\n              >\r\n                Locator\r\n                <pek-sort-icon [value]=\"searchForm.get('order_by_locator').value\"></pek-sort-icon>\r\n              </th>\r\n            </tr>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"body\" let-inventoryProduct let-i=\"rowIndex\" let-rowgroup=\"rowgroup\"\r\n                       let-rowspan=\"rowspan\">\r\n            <tr\r\n              [class.qr-code-item-scanned]=\"inventoryProduct.is_scanned\"\r\n              [class.qr-code-item-found]=\"inventoryProduct.id === findItemId\"\r\n            >\r\n              <td [id]=\"'product_row' + inventoryProduct.id\" style=\"width: 3%\">\r\n                <p-tableCheckbox [value]=\"inventoryProduct\"></p-tableCheckbox>\r\n              </td>\r\n              <td style=\"width: 5%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">#</h3>\r\n                {{(this.searchForm.get('page').value - 1) * 10 + i + 1}}\r\n              </td>\r\n              <td style=\"width: 14%\" *ngIf=\"rowgroup\" [attr.rowspan]=\"rowspan\">\r\n                <h3 class=\"td-title\">Code</h3>\r\n                <ng-container *ngIf=\"inventoryProduct.product && !inventoryProduct.nomenclature\">\r\n                  {{inventoryProduct.product.nomenclature.code}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"inventoryProduct.nomenclature\">\r\n                  {{inventoryProduct.nomenclature.code}}\r\n                </ng-container>\r\n\r\n                <ng-container *ngIf=\"inventoryProduct.root_id === findItemId\">\r\n                  <span>(found)</span>\r\n                </ng-container>\r\n              </td>\r\n              <td style=\"width: 10%\" *ngIf=\"rowgroup\" [attr.rowspan]=\"rowspan\">\r\n                <h3 class=\"td-title\">Name</h3>\r\n                <b *ngIf=\"inventoryProduct.nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n                {{inventoryProduct.nomenclature.name}}\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Technology</h3>\r\n                <ng-container *ngIf=\"inventoryProduct.product\">\r\n                  {{inventoryProduct.product.current_technology?.name}}\r\n                </ng-container>\r\n\r\n                <ng-container *ngIf=\"!inventoryProduct.product && inventoryProduct.technology\">\r\n                  {{inventoryProduct.technology?.name}}\r\n                </ng-container>\r\n              </td>\r\n              <td style=\"width: 9%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Initial Quantity</h3>\r\n                <span>\r\n                  <span *ngIf=\"inventoryProduct.initial_quantity === inventoryProduct.current_available_quantity\">\r\n                  {{inventoryProduct.initial_quantity}}\r\n                </span>\r\n                <span *ngIf=\"inventoryProduct.initial_quantity !== inventoryProduct.current_available_quantity\">\r\n                  {{inventoryProduct.initial_quantity}} <span\r\n                  class=\"warning-quantity-less\">({{inventoryProduct.current_available_quantity}})</span>\r\n                </span>\r\n                </span>\r\n              </td>\r\n              <td pEditableColumn class=\"text-center\" style=\"width: 11%\">\r\n                <h3 class=\"td-title\">Entered Quantity</h3>\r\n                <p-cellEditor\r\n                  *ngIf=\"inventoryProduct.nomenclature.bulk_or_serial !== '1' && currentInventory && currentInventory.status === '0'\">\r\n                  <ng-template pTemplate=\"input\">\r\n                    <input\r\n                      pInputText\r\n                      style=\"width: 100%; text-align: center\"\r\n                      type=\"number\"\r\n                      step=\"1\"\r\n                      [(ngModel)]=\"inventoryProduct.new_quantity\"\r\n                      (ngModelChange)=\"newQuantity$.next(inventoryProduct)\"\r\n                    >\r\n                  </ng-template>\r\n                  <ng-template pTemplate=\"output\">\r\n                    {{inventoryProduct.new_quantity}}\r\n                  </ng-template>\r\n                </p-cellEditor>\r\n\r\n                <span *ngIf=\"currentInventory && currentInventory.status === '1'\">{{inventoryProduct.new_quantity}}</span>\r\n              </td>\r\n              <td style=\"width: 11%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Category</h3>\r\n                <ng-container *ngIf=\"inventoryProduct.product && !inventoryProduct.nomenclature\">\r\n                  {{inventoryProduct.product.nomenclature.category?.name}}\r\n                </ng-container>\r\n\r\n                <ng-container *ngIf=\"inventoryProduct.nomenclature\">\r\n                  {{inventoryProduct.nomenclature.category?.name}}\r\n                </ng-container>\r\n              </td>\r\n              <td style=\"width: 6%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">UOM</h3>\r\n                <ng-container *ngIf=\"inventoryProduct.product  && !inventoryProduct.nomenclature\">\r\n                  {{inventoryProduct.product.nomenclature.category?.unit_of_measure?.symbol ? inventoryProduct.product.nomenclature.category?.unit_of_measure?.symbol : 'Pcs' }}\r\n                </ng-container>\r\n\r\n                <ng-container *ngIf=\"inventoryProduct.nomenclature\">\r\n                  {{inventoryProduct.nomenclature.category?.unit_of_measure?.symbol ? inventoryProduct.nomenclature.category?.unit_of_measure?.symbol : 'Pcs' }}\r\n                </ng-container>\r\n              </td>\r\n              <td style=\"width: 11%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Warehouse</h3>\r\n                <ng-container *ngIf=\"inventoryProduct.locator; else productWarehouse\">\r\n                  {{inventoryProduct.locator.warehouse.name}}\r\n                </ng-container>\r\n              </td>\r\n              <td style=\"width: 14%\">\r\n                <h3 class=\"td-title\">Locator</h3>\r\n                <div *ngIf=\"inventoryProduct.locator; else productLocator\">\r\n                  {{inventoryProduct.locator.name}}\r\n\r\n                  <span class=\"d-block\">\r\n                    R: {{inventoryProduct.locator.row}}\r\n                    Col: {{inventoryProduct.locator.column}}\r\n                    Sh: {{inventoryProduct.locator.shelf}}\r\n                    Pl: {{inventoryProduct.locator.place}}\r\n                  </span>\r\n                </div>\r\n              </td>\r\n\r\n              <ng-template #productLocator>\r\n                <div *ngIf=\"inventoryProduct.product.locator\">\r\n                  {{inventoryProduct.product.locator.name}}\r\n                  <span class=\"d-block\">\r\n                    R: {{inventoryProduct.product.locator.row}}\r\n                    Col: {{inventoryProduct.product.locator.column}}\r\n                    Sh: {{inventoryProduct.product.locator.shelf}}\r\n                    Pl: {{inventoryProduct.product.locator.place}}\r\n                  </span>\r\n                </div>\r\n              </ng-template>\r\n\r\n              <ng-template #productWarehouse>\r\n                {{inventoryProduct.product.locator.warehouse.name}}\r\n              </ng-template>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr >\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"11\">\r\n                <i *ngIf=\"isLoadingInventoryList\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingInventoryList\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoadingInventoryList\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"paginator-wrapper\"\r\n        *ngIf=\"!isShowAll\"\r\n        [class.paginator-wrapper_hide]=\"preparedProducts.length === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"countProducts\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll()\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n\r\n      <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"onShowPartial()\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<pek-qr-code-scanner\r\n  *ngIf=\"isScanned\"\r\n  (scanned)=\"onScanned($event)\"\r\n  (cancel)=\"onCancelScanned()\"\r\n></pek-qr-code-scanner>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {PhysicalInventory} from '../../models/physical-inventory';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {PhysicalInventoryService} from '../../services/physical-inventory.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-physical-inventory',\r\n  templateUrl: './physical-inventory.component.html',\r\n  styleUrls: ['./physical-inventory.component.scss']\r\n})\r\nexport class PhysicalInventoryComponent implements OnInit, OnDestroy {\r\n  isLoading = true;\r\n\r\n  physicalInventories: PhysicalInventory[] = [];\r\n  selectedPhysicalInventory: PhysicalInventory;\r\n  countPhysicalInventory = 0;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    page: [1]\r\n  });\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private readonly physicalInventoryService: PhysicalInventoryService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getPhysicalInventoryForPagination();\r\n  }\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n    {name: 'paginated', value: true}\r\n  ];\r\n\r\n  getPhysicalInventoryForPagination() {\r\n    this.physicalInventoryService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(physicalInventories => {\r\n      this.physicalInventories = physicalInventories.results;\r\n      this.countPhysicalInventory = physicalInventories.count;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  searchPhysicalInventory() {\r\n    this.isLoading = true;\r\n    this.selectedPhysicalInventory = null;\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.searchForm.get('page').value},\r\n      {name: 'paginated', value: true}\r\n    ];\r\n\r\n    this.getPhysicalInventoryForPagination();\r\n  }\r\n\r\n  onCreatePhysicalInventory() {\r\n    this.physicalInventoryService.openCreatePhysicalInventoryModal().subscribe(response => {\r\n      if (response) {\r\n        this.searchPhysicalInventory();\r\n      }\r\n    })\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    this.searchForm.get('page').patchValue(evt.page + 1);\r\n    this.searchPhysicalInventory();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Physical Inventory</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Create Physical Inventory\"\r\n        (click)=\"onCreatePhysicalInventory()\"\r\n      >\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__block\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"ml-auto\"\r\n        icon=\"pi pi-bars\"\r\n        label=\"Inventory Products\"\r\n        [routerLink]=\"[selectedPhysicalInventory?.id]\"\r\n        [disabled]=\"!selectedPhysicalInventory\"\r\n      ></button>\r\n    </div>\r\n    <div class=\"page__table\">\r\n      <div class=\"table-pagination-preloader\">\r\n        <p-table\r\n          #dt\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedPhysicalInventory\"\r\n          [value]=\"physicalInventories\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n              <th class=\"text-center\" style=\"width: 25%\">ID</th>\r\n              <th class=\"text-center\" style=\"width: 35%\">Date</th>\r\n              <th class=\"text-center\" style=\"width: 35%\">Status</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-physicalInventory let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"physicalInventory\">\r\n              <td style=\"width: 5%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">#</h3>\r\n                {{(this.searchForm.get('page').value - 1) * 10 + i + 1}}\r\n              </td>\r\n              <td style=\"width: 25%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">ID</h3>\r\n                {{physicalInventory.id}}\r\n              </td>\r\n              <td style=\"width: 35%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Date</h3>\r\n                {{physicalInventory?.system_creation_date | date:'dd/MM/yyyy'}}\r\n              </td>\r\n              <td style=\"width: 35%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Status</h3>\r\n                <span *ngIf=\"physicalInventory.status === '1'\">Completed</span>\r\n                <span *ngIf=\"physicalInventory.status === '0'\">In Progress</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"dt.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"paginator-wrapper\" *ngIf=\"physicalInventories.length > 0\">\r\n      <p-paginator\r\n        #paginator\r\n        [rows]=\"10\"\r\n        [totalRecords]=\"countPhysicalInventory\"\r\n        (onPageChange)=\"paginate($event)\">\r\n      </p-paginator>\r\n      <p-button\r\n        class=\"paginator-all\"\r\n        type=\"button\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        All\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {TreePrint} from '../production-list/production-list.component';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {ListProduct} from '../../../models/list-product';\r\n\r\n@Component({\r\n  selector: 'app-list-product-print-item',\r\n  templateUrl: './list-product-print-item.component.html',\r\n  styleUrls: ['./list-product-print-item.component.scss']\r\n})\r\nexport class ListProductPrintItemComponent implements OnInit {\r\n  @Input() product: TreeNode<Partial<ListProduct>>;\r\n  @Input() last: boolean;\r\n  statuses = {'Not processed': 'Not Processed', 'Completed': 'Completed', 'Deficit': 'Deficit', 'Reserved': 'Reserved'};\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<!--<section [class.pagebreak]=\"!last\" >-->\r\n<div class=\"list-product-print-item\" *ngIf=\"product.children.length > 0\">\r\n  <h2>Production List {{product.data.nomenclature.code}} ({{product.data.list}}) {{product.data.nomenclature.name}}</h2>\r\n\r\n  <div class=\"list-product-print-item__row\">\r\n    <div class=\"list-product-print-item__col\">#</div>\r\n    <div class=\"list-product-print-item__col\">Code</div>\r\n    <div class=\"list-product-print-item__col\">Name</div>\r\n    <div class=\"list-product-print-item__col\">UOM</div>\r\n    <div class=\"list-product-print-item__col\">Total Req Qty</div>\r\n    <div class=\"list-product-print-item__col\">Free Wh Qty</div>\r\n    <div class=\"list-product-print-item__col\">Locator</div>\r\n    <div class=\"list-product-print-item__col\">Status</div>\r\n  </div>\r\n\r\n  <div *ngFor=\"let product of product.children; let idx = index\" class=\"list-product-print-item__row\">\r\n    <div class=\"list-product-print-item__col list-product-print-item__col_body\">{{idx + 1}}</div>\r\n    <div class=\"list-product-print-item__col list-product-print-item__col_body\" [class.list-product-print-item__col_bold]=\"product.data?.has_children > 0\">{{product.data.nomenclature.code}}</div>\r\n    <div class=\"list-product-print-item__col list-product-print-item__col_body\">{{product.data.nomenclature.name}}</div>\r\n    <div class=\"list-product-print-item__col list-product-print-item__col_body\">{{product.data.nomenclature?.category?.unit_of_measure?.symbol ? product.data.nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}</div>\r\n    <div class=\"list-product-print-item__col list-product-print-item__col_body\">{{product.data.total_required_quantity}}</div>\r\n    <div class=\"list-product-print-item__col list-product-print-item__col_body\">{{product.data.warehouse_quantity}}</div>\r\n    <div class=\"list-product-print-item__col list-product-print-item__col_body\">{{product.data.available_on_locator}}</div>\r\n    <div class=\"list-product-print-item__col list-product-print-item__col_body\">{{statuses[product.data.status]}}</div>\r\n  </div>\r\n</div>\r\n\r\n<!--</section>-->\r\n","import {Component, HostListener, OnInit} from '@angular/core';\r\nimport {List} from '../../../models/list';\r\nimport {ListProduct} from '../../../models/list-product';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {ListService} from '../../../services/list.service';\r\nimport {filter, take, tap} from 'rxjs/operators';\r\nimport * as cloneDeep from 'lodash/cloneDeep';\r\nimport {Location} from '@angular/common';\r\nimport {MenuItem, MessageService, TreeNode} from 'primeng/api';\r\nimport {ListProductService} from '../../../services/list-product.service';\r\nimport {ScanResult} from '../../../../qr-code/models/scan-result';\r\nimport {AlbumService} from '@shared/services/album.service';\r\nimport {environment} from '@env/environment';\r\nimport {QrCodeService} from '../../../../qr-code/qr-code.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ENomenclatureType} from '@shared/models/nomenclature';\r\n\r\nexport class TreePrint {\r\n  data: ListProduct;\r\n  children: ListProduct[];\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-production-list',\r\n  templateUrl: './production-list.component.html',\r\n  styleUrls: ['./production-list.component.scss']\r\n})\r\n\r\nexport class ProductionListComponent implements OnInit {\r\n\r\n  expanseMap = {};\r\n\r\n  link = environment.link_url + 'dash/';\r\n  isGenerating = false;\r\n\r\n  selectedNodeMenuItems: MenuItem[] = [\r\n    {\r\n      label: 'Selected Production List',\r\n      items: [\r\n        {\r\n          label: 'Show Images',\r\n          icon: 'pi pi-images',\r\n          command: () => this.showImages(this.selectedNode),\r\n        },\r\n        {\r\n          label: 'Set Actual Quantity',\r\n          icon: 'pi pi-angle-double-right',\r\n          command: () => this.onSetActualQuantity(),\r\n        },\r\n        {\r\n          label: 'Cancel Actual Quantities',\r\n          icon: 'pi pi-times',\r\n          command: () => this.cancelQuantities(this.selectedNode),\r\n        },\r\n        {\r\n          label: 'Make Request',\r\n          icon: 'pi pi-caret-right',\r\n          command: () => this.makeDeficitOne(this.selectedNode),\r\n        },\r\n        {\r\n          label: 'Generate QR Codes',\r\n          icon: 'pi pi-caret-right',\r\n          command: () => this.onGenerateQrCodes(this.selectedNode),\r\n        },\r\n      ]\r\n    }\r\n  ];\r\n\r\n  selectedNodeTreeMenuItems: MenuItem[] = [\r\n    {\r\n      label: 'Selected Production List',\r\n      items: [\r\n        {\r\n          label: 'Show Images',\r\n          icon: 'pi pi-images',\r\n          command: () => this.showImages(this.selectedNodeTree.data),\r\n        },\r\n        {\r\n          label: 'Set Actual Quantity',\r\n          icon: 'pi pi-angle-double-right',\r\n          command: () => this.onSetActualQuantity(),\r\n          // command: () => this.editQuantity(this.selectedNodeTree.data),\r\n        },\r\n        {\r\n          label: 'Cancel Actual Quantities',\r\n          icon: 'pi pi-times',\r\n          command: () => this.onCancelActualQuantity(),\r\n        },\r\n        {\r\n          label: 'Make Request',\r\n          icon: 'pi pi-caret-right',\r\n          command: () => this.makeDeficitOne(this.selectedNodeTree.data),\r\n        },\r\n        {\r\n          label: 'Make Request For All',\r\n          icon: 'pi pi-caret-right',\r\n          command: () => this.makeRequestsNodeForAll(this.selectedNodeTree.data),\r\n        },\r\n        {\r\n          label: 'Generate QR Codes',\r\n          icon: 'pi pi-caret-right',\r\n          command: () => this.onGenerateQrCodes(this.selectedNodeTree.data),\r\n        },\r\n      ]\r\n    }\r\n  ];\r\n\r\n  mode: 'hierarchy' | 'list' = 'hierarchy';\r\n\r\n  addedTree = [];\r\n  isAlbumPrint = false;\r\n\r\n  isSetAllActualQuantities = false;\r\n  products: ListProduct[];\r\n  selectedNode;\r\n  selectedNodeTree: TreeNode<ListProduct> & TreeNode<ListProduct>[];\r\n  isLoading = true;\r\n  list: List = null;\r\n  listId = this.route.snapshot.paramMap.get('id');\r\n  statuses = {'Not processed': 'Not Processed', 'Completed': 'Completed', 'Deficit': 'Deficit', 'Reserved': 'Reserved'};\r\n  showComplete = false;\r\n  routerHandler$;\r\n\r\n  isOldList = false;\r\n\r\n  copyProducts: ListProduct[];\r\n  isLoadingTree = true;\r\n\r\n  tree: TreeNode<ListProduct>[] = [];\r\n\r\n  isShowPrint = false;\r\n  isShowPrintSeparated = false;\r\n\r\n  isLoadingListsForPrint = false;\r\n  productsForPrint: TreeNode<Partial<ListProduct>>[];\r\n\r\n  menuItems: MenuItem[] = [\r\n    {\r\n      label: 'Root Production List',\r\n      items: [\r\n        {\r\n          label: 'Print',\r\n          icon: 'pi pi-print',\r\n          command: () => this.printPage(),\r\n          disabled: true,\r\n        },\r\n        {\r\n          label: 'Print Separated By Assembly',\r\n          icon: 'pi pi-print',\r\n          command: () => this.printPage(true),\r\n          disabled: true,\r\n        },\r\n        {\r\n          label: 'Set Actual Quantities',\r\n          icon: 'pi pi-angle-double-right',\r\n          command: () => this.setQuantities(),\r\n        },\r\n        {\r\n          label: 'Make Requests',\r\n          icon: 'pi pi-caret-right',\r\n          command: () => this.makeDeficit(),\r\n        },\r\n        {\r\n          label: 'Make request for all',\r\n          icon: 'pi pi-caret-right',\r\n          command: () => this.makeRequestsForAll(),\r\n        },\r\n        {\r\n          label: 'Go To Plan',\r\n          icon: 'pi pi-angle-double-right',\r\n          command: () => this.goToPlan(),\r\n        },\r\n      ]\r\n    }\r\n  ];\r\n\r\n  foundRowsIds: number[] = [];\r\n  currentDisplayRowId: number;\r\n  isScanned = false;\r\n  scanningEnd = true;\r\n  elementsRowsIds: string[] = [];\r\n\r\n  listProducts: ListProduct[] = [];\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private modalService: ModalService,\r\n    private listService: ListService,\r\n    private listProductService: ListProductService,\r\n    private router: Router,\r\n    public _location: Location,\r\n    private messageService: MessageService,\r\n    public readonly albumService: AlbumService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly qrCodeService: QrCodeService,\r\n  ) {\r\n\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getList();\r\n    this.getListProducts();\r\n  }\r\n\r\n  createExpanseMap(node: TreeNode<ListProduct>) {\r\n    if (node.expanded) {\r\n      this.expanseMap[node.data.uid] = node.expanded;\r\n    } else {\r\n      this.expanseMap[node.data.uid] = false;\r\n    }\r\n    if (node.children) {\r\n      node.children.forEach(element => {\r\n        this.createExpanseMap(element);\r\n      });\r\n    }\r\n  }\r\n\r\n\r\n  getList() {\r\n    this.listService.getById(+this.listId).subscribe(list => this.list = list);\r\n  }\r\n\r\n  createListProductsGroups(lists: ListProduct[]): ListProduct[] {\r\n    const firstListProducts = lists.filter(p => p.task_sort_value === 1);\r\n\r\n    let groupId = 0;\r\n\r\n    firstListProducts.forEach(product => {\r\n      groupId++;\r\n\r\n      let currentProduct: ListProduct = product;\r\n\r\n      while (currentProduct?.next_technology_list_product) {\r\n        currentProduct.groupId = groupId;\r\n        currentProduct = lists.find(p => p.id === currentProduct.next_technology_list_product);\r\n      }\r\n\r\n      currentProduct.groupId = groupId;\r\n\r\n    });\r\n\r\n    lists.forEach(list => {\r\n      list.groupKey = '';\r\n\r\n      list.groupedProducts = lists.filter(p => p.groupId === list.groupId).sort((a, b) => a.task_sort_value - b.task_sort_value);\r\n\r\n      const filteredTasks = lists.filter(t => t.nomenclature.id === list.nomenclature.id && t.level === list.level);\r\n      const firstLists = filteredTasks.filter(p => p.task_sort_value === 1);\r\n\r\n      const newListProducts: ListProduct[] = [];\r\n\r\n      firstLists.forEach(firstList => {\r\n        const uiParent = firstList.id;\r\n\r\n        let currentListProduct = firstList;\r\n\r\n        while (currentListProduct?.next_technology_list_product) {\r\n          currentListProduct.uiParent = uiParent;\r\n          newListProducts.push(currentListProduct);\r\n          currentListProduct = lists.find(l => l.id === currentListProduct.next_technology_list_product);\r\n        }\r\n\r\n        currentListProduct.uiParent = uiParent;\r\n        newListProducts.push(currentListProduct);\r\n      });\r\n\r\n      newListProducts.filter(listProduct => listProduct.groupId === list.groupId).forEach(l => {\r\n        list.groupKey += `${l.technology?.id}/${l.status}/${l.nomenclature.id}/${l.level}/${lists.find(l => l.id === list.parent)?.nomenclature?.id}`;\r\n        const childrenListProducts = lists.filter(p => p.parent === list.uiParent);\r\n\r\n        childrenListProducts.forEach(l => {\r\n          list.groupKey += `${l.technology?.id}/${l.status}/${l.nomenclature.id}/${l.level}/${lists.find(l => l.id === list.parent)?.nomenclature?.id}`;\r\n        });\r\n      });\r\n    });\r\n\r\n\r\n    lists.forEach(list => {\r\n      list.ff = `${list.nomenclature.id}/${list.level}/${lists.find(l => l.id === list.parent)?.nomenclature?.id}`;\r\n      list.filteredProducts = lists.filter(p => p.groupKey === list.groupKey);\r\n    });\r\n\r\n    return lists;\r\n  }\r\n\r\n  sortingListProducts(lists: ListProduct[]) {\r\n    let nomenclaturesTypes = {'0': 3, '1': 1, '2': 2};\r\n    lists.sort((a, b) => nomenclaturesTypes[a.nomenclature.type] - nomenclaturesTypes[b.nomenclature.type] || a.nomenclature.id - b.nomenclature.id);\r\n  }\r\n\r\n  createListProductsTree(newListProducts: ListProduct[], lists: ListProduct[]) {\r\n    newListProducts.filter(l => l.level === 1).forEach(list => {\r\n      this.tree.push({\r\n        parent: null,\r\n        data: list,\r\n        children: [],\r\n        expanded: list.blockedExpand ? false : this.expanseMap[list.uid]\r\n      });\r\n    });\r\n\r\n    const fillTree = (nodes: TreeNode<ListProduct>[], level: number) => {\r\n      level++;\r\n\r\n      const parentNodes = nodes.filter(n => n.data.products?.find(p => p.nomenclature.type === ENomenclatureType.ASSEMBLY));\r\n\r\n      parentNodes.forEach(parentNode => {\r\n\r\n        if (!parentNode.data.blockedExpand) {\r\n          const filteredLists = lists.filter(l => parentNode.data.filteredProducts.map(p => p.id).includes(l.parent));\r\n\r\n          const newListProducts: ListProduct[] = [];\r\n\r\n          filteredLists.forEach(list => {\r\n            if (!newListProducts.find(p => p.groupId === list.groupId)) {\r\n\r\n              if (!newListProducts.find(l => l.groupKey === list.groupKey)) {\r\n\r\n                const totalActualQuantity = filteredLists\r\n                  .filter(p => p.actual_quantity > 0 && list.nomenclature.id === p.nomenclature.id)\r\n                  .reduce((sum, p) => sum += p.actual_quantity, 0);\r\n\r\n                const reservedQuantity = list.groupedProducts\r\n                  .filter(p => p.reserved_quantity > 0 && list.nomenclature.id === p.nomenclature.id)\r\n                  .reduce((sum, p) => sum += p.reserved_quantity, 0);\r\n\r\n                switch (list.groupedProducts[list.groupedProducts.length - 1].status) {\r\n                  case 'Deficit':\r\n                    list.status = 'Deficit';\r\n                    break;\r\n                  case 'Completed':\r\n                    list.status = 'Completed';\r\n                    break;\r\n                }\r\n\r\n                let totalCount = 0;\r\n                list.products.forEach(product => {\r\n\r\n                  parentNode.data.filteredProducts.forEach(p => {\r\n                    if (p.id === product.parent) {\r\n                      totalCount++;\r\n                    }\r\n                  });\r\n                });\r\n\r\n                if (list.technologies.length > 0) {\r\n                  totalCount = totalCount / list.technologies.length;\r\n                }\r\n\r\n                const newList = {\r\n                  ...list,\r\n                  total_required_quantity: (list.status !== 'Not processed' && totalActualQuantity ? totalActualQuantity : totalCount),\r\n                  actual_quantity: totalActualQuantity,\r\n                  reserved_quantity: reservedQuantity,\r\n                };\r\n\r\n                newListProducts.push(newList);\r\n              }\r\n            }\r\n          });\r\n\r\n          newListProducts.forEach(newListProduct => {\r\n            parentNode.children.push({\r\n              parent: parentNode,\r\n              data: newListProduct,\r\n              children: [],\r\n              expanded: newListProduct.blockedExpand ? false : this.expanseMap[newListProduct.uid]\r\n            });\r\n          });\r\n\r\n          const nomenclaturesTypes = {'0': 3, '1': 1, '2': 2};\r\n          parentNode.children.sort((a, b) => nomenclaturesTypes[a.data.nomenclature.type] - nomenclaturesTypes[b.data.nomenclature.type] || a.data.nomenclature.id - b.data.nomenclature.id);\r\n\r\n          if (parentNode.children.length > 0) {\r\n            fillTree(parentNode.children, level);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    fillTree(this.tree, 1);\r\n\r\n    this.tree = this.tree.map(l => l);\r\n  }\r\n\r\n  generateOldListProducts(listProducts: ListProduct[]) {\r\n    this.tree = [];\r\n    this.selectedNodeTree = null;\r\n\r\n    this.sortingListProducts(listProducts);\r\n\r\n    listProducts = listProducts.map(list => {\r\n      return {\r\n        ...list,\r\n        products: [],\r\n        technologies: [],\r\n        blockedExpand: Boolean(list.status === 'Completed' || list.status === 'Reserved'),\r\n        uid: list.id\r\n      };\r\n    });\r\n\r\n    const parentListProducts = listProducts.filter(l => l.level === 1);\r\n\r\n    parentListProducts.forEach(list => {\r\n      this.tree.push({\r\n        parent: null,\r\n        data: list,\r\n        children: [],\r\n        expanded: list.blockedExpand ? false : this.expanseMap[list.uid]\r\n      });\r\n    });\r\n\r\n    const fillTree = (nodes: TreeNode<ListProduct>[]) => {\r\n      nodes.forEach(node => {\r\n\r\n        const findListProducts = listProducts.filter(l => l.parent === node.data.id);\r\n\r\n        findListProducts.forEach(listProduct => {\r\n          node.children.push({\r\n            parent: null,\r\n            data: listProduct,\r\n            children: [],\r\n            expanded: listProduct.blockedExpand ? false : this.expanseMap[listProduct.uid]\r\n          });\r\n        });\r\n\r\n        const nomenclaturesTypes = {'0': 3, '1': 1, '2': 2};\r\n        node.children.sort((a, b) => nomenclaturesTypes[a.data.nomenclature.type] - nomenclaturesTypes[b.data.nomenclature.type] || a.data.nomenclature.id - b.data.nomenclature.id);\r\n\r\n        if (node.children.length > 0) {\r\n          fillTree(node.children);\r\n        }\r\n\r\n      });\r\n    };\r\n\r\n    fillTree(this.tree);\r\n\r\n    this.tree = this.tree.map(l => l);\r\n  }\r\n\r\n  generateListProducts(lists: ListProduct[]) {\r\n    this.tree = [];\r\n    this.selectedNodeTree = null;\r\n\r\n    lists.forEach(list => list.pureTotalRequiredQuantity = JSON.parse(JSON.stringify(list.total_required_quantity)));\r\n\r\n    lists = this.createListProductsGroups(lists);\r\n\r\n    const newListProducts: ListProduct[] = [];\r\n\r\n    let uid = 1;\r\n\r\n    lists.forEach(list => {\r\n      list.uid = uid;\r\n\r\n      uid++;\r\n\r\n      list.reserved_quantity = list.reserved_quantity ?? 0;\r\n      list.actual_quantity = list.actual_quantity ?? 0;\r\n\r\n      // const parentList = lists.find(l => list.id === l.parent);\r\n\r\n      list.products = lists.filter(l => l.nomenclature.id === list.nomenclature.id && l.level === list.level && list.ff === l.ff);\r\n\r\n      // list.products = list.products.filter(l => lists.find(t => t.nomenclature.id === ))\r\n\r\n      list.warehouseQuantities = this.adapterService.removeDuplicates(list.products, list => list.technology?.id)\r\n        .sort((a, b) => a.task_sort_value - b.task_sort_value)\r\n        .map(l => l.warehouse_quantity);\r\n\r\n      list.technologies = list.products.filter(l => l.technology).map(l => {\r\n        return {\r\n          ...l.technology,\r\n          task_sort_value: l.task_sort_value,\r\n        };\r\n      });\r\n\r\n      list.technologies = this.adapterService.removeDuplicates(list.technologies, x => x.name);\r\n      list.technologies.sort((a, b) => a.task_sort_value - b.task_sort_value);\r\n\r\n      list.blockedExpand = list.groupedProducts.some(p => p.status === 'Completed' || p.status === 'Reserved');\r\n      list.currentTechnology = list.groupedProducts.find(p => p.status === 'Completed')?.technology;\r\n\r\n      if (list.nomenclature.name === 'RC charger') {\r\n        console.log(list);\r\n      }\r\n\r\n      const findEl = list.groupedProducts.find(p => p.status === 'Completed');\r\n      list.warehouse_quantity = findEl ? findEl.warehouse_quantity : list.warehouse_quantity;\r\n\r\n      if (list.nomenclature.name === 'IntC Unit') {\r\n        console.log(list.warehouse_quantity);\r\n        console.log(list.warehouseQuantities);\r\n      }\r\n\r\n      // list.has_children = list.products.some(p => p.has_children);\r\n      list.groupedProductIds = list.products.map(p => p.id);\r\n\r\n      if (\r\n        !newListProducts.find(l => l.groupKey === list.groupKey) &&\r\n        lists\r\n          .filter(l => l.nomenclature.id === list.nomenclature.id)\r\n          .every(n => n.status === 'Not processed')\r\n      ) {\r\n        list.status = list.products.some(p => p.status === 'Deficit') ? 'Deficit' : list.status;\r\n        newListProducts.push(list);\r\n\r\n      } else if (lists.filter(l => l.nomenclature.id === list.nomenclature.id).some(n => n.status !== 'Not processed')) {\r\n        if (!newListProducts.find(p => list.groupKey === p.groupKey)) {\r\n\r\n          if (list.technologies.length === 0 && !newListProducts.find(l => l.nomenclature.id === list.nomenclature.id && l.level === list.level)) {\r\n            let totalQuantityDeficit = 0;\r\n            let totalQuantityCompleted = 0;\r\n\r\n            list.products.forEach(product => {\r\n              if (product.status === 'Completed') {\r\n                totalQuantityCompleted++;\r\n              } else if (product.status === 'Deficit') {\r\n                totalQuantityDeficit++;\r\n              }\r\n            });\r\n\r\n            const newListCompleted: ListProduct = {\r\n              ...list,\r\n              total_required_quantity: totalQuantityCompleted,\r\n              actual_quantity: totalQuantityCompleted,\r\n              reserved_quantity: totalQuantityCompleted,\r\n              status: 'Completed'\r\n            };\r\n\r\n            uid++;\r\n\r\n            const newListDeficit: ListProduct = {\r\n              ...list,\r\n              uid: uid,\r\n              total_required_quantity: totalQuantityDeficit,\r\n              actual_quantity: 0,\r\n              reserved_quantity: 0,\r\n              status: 'Deficit'\r\n            };\r\n\r\n            uid++;\r\n\r\n            const notProcessedCount = list.products.filter(p => p.status === 'Not processed').length;\r\n\r\n            const newListNotProcessed: ListProduct = {\r\n              ...list,\r\n              uid: uid,\r\n              total_required_quantity: notProcessedCount,\r\n              actual_quantity: 0,\r\n              reserved_quantity: 0,\r\n              status: 'Not processed'\r\n            };\r\n\r\n\r\n            if (totalQuantityCompleted > 0) {\r\n              newListProducts.push(newListCompleted);\r\n            }\r\n\r\n            if (((totalQuantityCompleted !== list.pureTotalRequiredQuantity && !notProcessedCount) || totalQuantityCompleted === 0) || (notProcessedCount && totalQuantityCompleted === 0)) {\r\n              newListProducts.push(newListDeficit);\r\n            }\r\n\r\n            if (notProcessedCount) {\r\n              newListProducts.push(newListNotProcessed);\r\n            }\r\n          } else if (list.technologies.length > 0) {\r\n            if (!newListProducts.find(p => p.groupId === list.groupId)) {\r\n\r\n              if (!newListProducts.find(l => l.groupKey === list.groupKey)) {\r\n\r\n                switch (list.groupedProducts[list.groupedProducts.length - 1].status) {\r\n                  case 'Deficit':\r\n                    list.status = 'Deficit';\r\n                    break;\r\n                  case 'Completed':\r\n                    list.status = 'Completed';\r\n                    break;\r\n                }\r\n\r\n                newListProducts.push(list);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    this.sortingListProducts(newListProducts);\r\n\r\n    newListProducts.forEach(list => {\r\n      list.filteredProducts = lists.filter(p => p.groupKey === list.groupKey);\r\n\r\n\r\n      if (list.level === 1 && list.technologies.length > 0) {\r\n\r\n        if ((list.status !== 'Not processed' && list.technologies.length > 0 && list.currentTechnology) || (list.status === 'Reserved' && list.technologies.length > 0)) {\r\n          list.total_required_quantity = list.actual_quantity = list.filteredProducts\r\n            .filter(p => p.actual_quantity > 0)\r\n            .reduce((sum, p) => sum += p.actual_quantity, 0);\r\n\r\n          list.reserved_quantity = list.filteredProducts\r\n            .filter(p => p.reserved_quantity > 0)\r\n            .reduce((sum, p) => sum += p.reserved_quantity, 0);\r\n\r\n        } else if (!list.currentTechnology) {\r\n          let count = 0;\r\n\r\n          const filteredGroupsIds = this.adapterService.removeDuplicates(list.filteredProducts, list => list.groupId)\r\n            .map(l => l.groupId);\r\n\r\n          const groupsIds = this.adapterService.removeDuplicates(list.products, list => list.groupId)\r\n            .map(l => l.groupId);\r\n\r\n          groupsIds.forEach(t => {\r\n            if (filteredGroupsIds.includes(t)) {\r\n              count++;\r\n            }\r\n          });\r\n\r\n          list.total_required_quantity = count;\r\n        }\r\n      }\r\n\r\n      list.required_quantity_per_one = list.pureTotalRequiredQuantity / this.list.sets_number;\r\n    });\r\n\r\n    this.createListProductsTree(newListProducts, lists);\r\n  }\r\n\r\n  getListProducts() {\r\n    this.tree = [];\r\n    this.isLoading = true;\r\n\r\n    this.listService.getListProducts(+this.listId).subscribe(lists => {\r\n\r\n      const firstListProduct: ListProduct = {...lists[0]};\r\n\r\n      if (firstListProduct.nomenclature.type === ENomenclatureType.PURCHASED && !firstListProduct.parent_technology_list_product) {\r\n        this.isOldList = true;\r\n      } else if (!firstListProduct.next_technology_list_product && !firstListProduct.parent_technology_list_product) {\r\n        this.isOldList = true;\r\n      }\r\n\r\n      this.listProducts = JSON.parse(JSON.stringify(lists));\r\n      const newLists = JSON.parse(JSON.stringify(lists));\r\n\r\n      if (this.isOldList) {\r\n        this.generateOldListProducts(newLists);\r\n      } else {\r\n        this.generateListProducts(newLists);\r\n      }\r\n\r\n\r\n      this.menuItems[0].items[0].disabled = false;\r\n      this.menuItems[0].items[1].disabled = false;\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  mapExpansion() {\r\n    this.tree.forEach(element => {\r\n      this.createExpanseMap(element);\r\n    });\r\n  }\r\n\r\n  togglePrintAlbumMode() {\r\n    this.isAlbumPrint = !this.isAlbumPrint;\r\n    this.selectedNodeTree = null;\r\n  }\r\n\r\n  printAlbum() {\r\n    this.albumService.getNomenclaturesImages((<any[]>this.selectedNodeTree).map(r => r.data?.nomenclature));\r\n  }\r\n\r\n  getAll() {\r\n    this.selectedNodeTree = null;\r\n    this.selectedNode = null;\r\n    this.tree = [];\r\n    this.addedTree = [];\r\n    this.copyProducts = [];\r\n\r\n    this.menuItems[0].items[0].disabled = true;\r\n    this.menuItems[0].items[1].disabled = true;\r\n\r\n    this.products = [];\r\n    this.isLoading = true;\r\n    this.isLoadingTree = true;\r\n    this.listService.getById(+this.listId).pipe(take(1)).subscribe(res => {\r\n      this.list = JSON.parse(JSON.stringify(res));\r\n    });\r\n\r\n    this.listProductService.get([{name: 'list', value: this.listId}]).pipe(take(1)).subscribe(res => {\r\n        this.products = res.filter(x => {\r\n          return x.level > 0;\r\n        });\r\n        this.isSetAllActualQuantities = this.products.every(product => product.status !== '0');\r\n        this.showComplete = true;\r\n        this.products.forEach(element => {\r\n          if (element.actual_quantity === null) {\r\n            this.showComplete = false;\r\n          }\r\n        });\r\n        let ss = {'0': 3, '1': 1, '2': 2};\r\n        this.products.sort((a, b) => ss[a.nomenclature.type] - ss[b.nomenclature.type]);\r\n\r\n        this.copyProducts = [...this.products];\r\n\r\n        this.getTree();\r\n\r\n        // this.menuItems[0].items[0].disabled = false;\r\n        // this.menuItems[0].items[1].disabled = false;\r\n\r\n        this.isLoading = false;\r\n      }\r\n    );\r\n  }\r\n\r\n  getTree() {\r\n    this.copyProducts.forEach(p => {\r\n      if (p.actual_quantity === null) {\r\n        p.actual_quantity = 0;\r\n      }\r\n    });\r\n\r\n    this.addedTree = this.copyProducts.map(p => {\r\n      return {\r\n        data: p,\r\n        children: [],\r\n        expanded: false,\r\n        parent: null,\r\n      };\r\n    });\r\n\r\n    const productIds = this.copyProducts.filter(p => p.has_children).map(p => p.list) as number[];\r\n\r\n    const get = (ids: number[]) => {\r\n      this.listProductService.getPartly(ids).subscribe(response => {\r\n        // @ts-ignore\r\n        const newProducts = response.flat();\r\n        newProducts.forEach(p => {\r\n          if (p.actual_quantity === null) {\r\n            p.actual_quantity = 0;\r\n          }\r\n        });\r\n\r\n        const newIds = newProducts.filter(p => p.has_children).map(p => p.list) as number[];\r\n\r\n        this.copyProducts = [...this.copyProducts, ...newProducts];\r\n\r\n        if (newIds.length > 0) {\r\n          get(newIds);\r\n        } else {\r\n          this.generateTree();\r\n          this.isLoadingTree = false;\r\n        }\r\n      });\r\n    };\r\n\r\n    if (productIds.length > 0) {\r\n      get(productIds);\r\n    } else {\r\n      this.tree = [...this.addedTree];\r\n      this.isLoadingTree = false;\r\n    }\r\n  }\r\n\r\n  generateTree() {\r\n    const sortType = {'0': 3, '1': 1, '2': 2};\r\n    this.copyProducts.sort((a, b) => sortType[a.nomenclature.type] - sortType[b.nomenclature.type]);\r\n    const getChildren = (nodes) => {\r\n      nodes.forEach(node => {\r\n        const children = this.copyProducts.filter(c => c.parent === node.data.id);\r\n        if (children.length > 0) {\r\n          node.children = children.map(product => {\r\n            return {\r\n              data: product,\r\n              children: [],\r\n              expanded: false,\r\n              parent: node,\r\n            };\r\n          });\r\n\r\n          getChildren(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    getChildren(this.addedTree);\r\n\r\n    this.tree = [...this.addedTree];\r\n  }\r\n\r\n  printPage(isShowPrintSeparated = false) {\r\n    this.productsForPrint = [];\r\n    this.productsForPrint.unshift({\r\n      data: {\r\n        nomenclature: {\r\n          name: this.list.nomenclature.name,\r\n          code: this.list.nomenclature.code\r\n        },\r\n        list: +this.listId\r\n      },\r\n      children: this.tree.filter(n => n.data.level === 1).map(n => {\r\n        return {\r\n          ...n,\r\n          children: []\r\n        };\r\n      })\r\n    });\r\n\r\n    const fillTree = (nodes: TreeNode<ListProduct>[]) => {\r\n      nodes.forEach(node => {\r\n        this.productsForPrint.push(node);\r\n\r\n        if (node.children.length > 0) {\r\n          fillTree(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    fillTree(this.tree);\r\n\r\n    this.isShowPrint = true;\r\n    this.isShowPrintSeparated = isShowPrintSeparated;\r\n\r\n\r\n    setTimeout(() => {\r\n      window.print();\r\n    });\r\n  }\r\n\r\n  @HostListener('window:afterprint', [])\r\n  onWindowAfterPrint() {\r\n    this.isShowPrint = false;\r\n    this.isShowPrintSeparated = false;\r\n  }\r\n\r\n  @HostListener('afterprint') printClosed() {\r\n    this.isShowPrintSeparated = false;\r\n    this.isShowPrint = false;\r\n  }\r\n\r\n\r\n  setQuantities() {\r\n    if (this.mode === 'list') {\r\n      this.listService.setQuantities(+this.listId).pipe(take(1)).subscribe(res => this.getListProducts());\r\n    } else {\r\n      if (!this.selectedNodeTree) {\r\n        this.listService.setQuantities(+this.listId).subscribe(() => {\r\n          this.getListProducts();\r\n        });\r\n      } else {\r\n        if (this.selectedNodeTree.data.list_url) {\r\n          // @ts-ignore\r\n          this.listService.setQuantities(this.selectedNodeTree.data.list).subscribe(() => {\r\n            this.getListProducts();\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  editQuantity(node) {\r\n    this.modalService.editListProduct(node).subscribe(response => {\r\n      console.log(response);\r\n      // if (node.list_url) {\r\n      //   this.getAll();\r\n      // } else {\r\n      if (response.actual_quantity === null) {\r\n        response.actual_quantity = 0;\r\n      }\r\n\r\n      const index = this.products.findIndex(p => p.id === response.id);\r\n      this.products[index] = response;\r\n\r\n      const find = (nodes) => {\r\n        nodes.forEach(n => {\r\n          if (n.data.id === response.id) {\r\n            n.data = response;\r\n          } else if (n.children.length > 0) {\r\n            find(n.children);\r\n          }\r\n        });\r\n      };\r\n\r\n      find(this.tree);\r\n      // }\r\n    });\r\n  }\r\n\r\n  process() {\r\n    this.modalService.completeList(this.list).subscribe(conf => {\r\n      if (conf) {\r\n        this._location.back();\r\n      }\r\n    });\r\n  }\r\n\r\n  makeDeficit() {\r\n    this.modalService.confirm('success').subscribe(res => {\r\n      if (res) {\r\n        this.listService.makeDeficit(this.list.id).subscribe(res => {\r\n          this.getListProducts();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  makeRequestsForAll() {\r\n    this.listService.makeRequestsForAll(this.list.id).pipe(\r\n      tap(() => this.getListProducts())\r\n    ).subscribe();\r\n  }\r\n\r\n  makeRequestsNodeForAll(node: ListProduct) {\r\n    this.listService.makeRequestsForAll(+node.list).pipe(\r\n      tap(() => this.getListProducts())\r\n    ).subscribe();\r\n  }\r\n\r\n  showImages(node) {\r\n    console.log(node);\r\n    this.modalService.showImageGallery([], node.nomenclature.id, 1).subscribe();\r\n  }\r\n\r\n  cancelQuantities(node) {\r\n    this.modalService.confirm('success').subscribe(res => {\r\n      if (res) {\r\n        const id = node.id;\r\n        this.listService.canceledActualQuantity(id).subscribe(response => {\r\n          // if (node.list_url) {\r\n          //   this.getAll();\r\n          //   node = null;\r\n          // } else {\r\n          if (response.actual_quantity === null) {\r\n            response.actual_quantity = 0;\r\n          }\r\n\r\n          const index = this.products.findIndex(p => p.id === response.id);\r\n          this.products[index] = response;\r\n\r\n          const find = (nodes) => {\r\n            nodes.forEach(n => {\r\n              if (n.data.id === response.id) {\r\n                n.data = response;\r\n              } else if (n.children.length > 0) {\r\n                find(n.children);\r\n              }\r\n            });\r\n          };\r\n\r\n          find(this.tree);\r\n          // }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  expandAll(): void {\r\n    const temp = cloneDeep(this.tree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.tree = temp;\r\n  }\r\n\r\n  collapseAll(): void {\r\n    const temp = cloneDeep(this.tree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n\r\n\r\n    this.tree = temp;\r\n    this.selectedNodeTree = null;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    if (node.data.status !== 'Completed') {\r\n      node.expanded = isExpand;\r\n      if (node.children && node.children?.length > 0) {\r\n        node.children.forEach(childNode => {\r\n          this.expandCollapseRecursive(childNode, isExpand);\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  selectMode(mode: any) {\r\n    this.mode = mode;\r\n    this.onSelectTreeNode();\r\n  }\r\n\r\n  makeDeficitOne(node: ListProduct) {\r\n    // /list_products/{id}/deficit_request/\r\n\r\n    console.log(node);\r\n\r\n    this.modalService.confirm('success').pipe(\r\n      filter(confirm => confirm)\r\n    ).subscribe(() => {\r\n      if (node.nomenclature.type === ENomenclatureType.ASSEMBLY) {\r\n        this.listService.makeDeficit(+node.list).subscribe(() => {\r\n          this.getListProducts();\r\n        });\r\n      } else if (node.nomenclature.type === ENomenclatureType.PURCHASED) {\r\n        const send: number[] = [];\r\n\r\n        node.filteredProducts.forEach(p => send.push(p.id));\r\n\r\n        this.listProductService.makeDeficit({ids: send}).pipe(\r\n          tap(() => this.getListProducts())\r\n        ).subscribe()\r\n      }\r\n    });\r\n\r\n\r\n  }\r\n\r\n  onSelectTreeNode() {\r\n    if (this.mode === 'list' && this.selectedNode) {\r\n      this.menuItems[0].items[2].disabled = !this.selectedNode?.list_url;\r\n    } else if (this.mode === 'hierarchy' && this.selectedNodeTree) {\r\n      this.menuItems[0].items[2].disabled = !this.selectedNodeTree?.data?.list_url || (this.selectedNodeTree?.data.status === '1' || this.selectedNodeTree.data.status === '3');\r\n    } else {\r\n      this.menuItems[0].items[2].disabled = false;\r\n    }\r\n\r\n    this.selectedNodeTreeMenuItems[0].items[3].disabled = this.selectedNodeTree.data.nomenclature.type === ENomenclatureType.MANUFACTURED;\r\n    this.selectedNodeTreeMenuItems[0].items[4].disabled = this.selectedNodeTree.data.nomenclature.type !== ENomenclatureType.ASSEMBLY;\r\n  }\r\n\r\n  scanForListProduct(data: ScanResult = null) {\r\n    this.expandAll();\r\n\r\n    requestAnimationFrame(() => {\r\n      this.elementsRowsIds = [];\r\n      const elements = document.querySelectorAll(`[id^=row-]`);\r\n      elements.forEach((element) => {\r\n        this.elementsRowsIds.push(element.id);\r\n      });\r\n    });\r\n\r\n    this.listService.getScanned(this.listId, data).subscribe(res => {\r\n      if (res.ids_found.length > 0) {\r\n        this.elementsRowsIds.forEach(elementId => {\r\n          const idArray = elementId.split('-');\r\n          const foundId = res.ids_found.find(el => el.toString() === idArray[1]);\r\n          if (foundId) {\r\n            this.foundRowsIds.push(foundId);\r\n          }\r\n        });\r\n        if (this.foundRowsIds.length > 0) {\r\n          this.currentDisplayRowId = this.foundRowsIds[0];\r\n          this.scrollToElement('row-' + this.currentDisplayRowId);\r\n        }\r\n      } else {\r\n        this.messageService.add({\r\n          severity: 'error',\r\n          summary: 'No matching found.',\r\n          detail: `No product lists was found with scanned QR code!`\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  scrollToElement(rowId: string): void {\r\n    const element = document.getElementById(rowId);\r\n    element.scrollIntoView({behavior: 'smooth', block: 'center'});\r\n  }\r\n\r\n  isFoundRow(productId: number): boolean {\r\n    return this.foundRowsIds.length > 0 && this.foundRowsIds.findIndex(id => id === productId) > -1;\r\n  }\r\n\r\n  onStartScanning() {\r\n    this.clearQrResults();\r\n    this.expandAll();\r\n\r\n    requestAnimationFrame(() => {\r\n      this.elementsRowsIds = [];\r\n      const elements = document.querySelectorAll(`[id^=row-]`);\r\n      elements.forEach((element) => {\r\n        this.elementsRowsIds.push(element.id);\r\n      });\r\n    });\r\n    this.isScanned = true;\r\n    this.scanningEnd = false;\r\n  }\r\n\r\n  onScanned(data: any) {\r\n    this.scanningEnd = true;\r\n    this.isScanned = false;\r\n    this.scanForListProduct(data);\r\n  }\r\n\r\n  onCancelScanned() {\r\n    this.scanningEnd = true;\r\n    this.isScanned = false;\r\n  }\r\n\r\n  goToNext() {\r\n    let currentIndex = this.foundRowsIds.findIndex(id => id === this.currentDisplayRowId);\r\n    if (currentIndex < this.foundRowsIds.length - 1) {\r\n      this.currentDisplayRowId = this.foundRowsIds[currentIndex + 1];\r\n    } else {\r\n      this.currentDisplayRowId = this.foundRowsIds[0];\r\n    }\r\n    this.scrollToElement('row-' + this.currentDisplayRowId);\r\n  }\r\n\r\n  goToPrev() {\r\n    let currentIndex = this.foundRowsIds.findIndex(id => id === this.currentDisplayRowId);\r\n    if (currentIndex > 0) {\r\n      this.currentDisplayRowId = this.foundRowsIds[currentIndex - 1];\r\n    } else {\r\n      this.currentDisplayRowId = this.foundRowsIds[this.foundRowsIds.length - 1];\r\n    }\r\n    this.scrollToElement('row-' + this.currentDisplayRowId);\r\n  }\r\n\r\n  clearQrResults() {\r\n    this.currentDisplayRowId = null;\r\n    this.foundRowsIds = [];\r\n  }\r\n\r\n  goToPlan() {\r\n    window.open(`manufacturing/plans/plan/${this.list.root_production_plans[0].id}`, '_blank');\r\n  }\r\n\r\n  onGenerateQrCodes(node) {\r\n    // this.isGenerating = true;\r\n    console.log('this.selectedNode', node);\r\n    const send = {\r\n      by_nomenclatures_list: [],\r\n    };\r\n\r\n    if (node.nomenclature.bulk_or_serial !== '1') {\r\n      send.by_nomenclatures_list.push({\r\n        nomenclature_id: node.nomenclature.id,\r\n        serial_number_ids: [],\r\n        order_product_ids: [],\r\n        invoice_product_ids: [],\r\n      });\r\n    } else {\r\n      let serialNumbers = [];\r\n      if (node.reserved_serial_numbers && node.reserved_serial_numbers.length) {\r\n        serialNumbers = [...node.reserved_serial_numbers.map(serial => serial.id)];\r\n      }\r\n      if (node.future_serial_numbers && node.future_serial_numbers.length) {\r\n        serialNumbers = [...node.future_serial_numbers.map(serial => serial.id)];\r\n      }\r\n      send.by_nomenclatures_list.push({\r\n        nomenclature_id: node.nomenclature.id,\r\n        serial_number_ids: serialNumbers,\r\n        order_product_ids: [],\r\n        invoice_product_ids: [],\r\n      });\r\n    }\r\n\r\n    this.qrCodeService.generateQrCodes(send).subscribe(() => this.isGenerating = false);\r\n  }\r\n\r\n  onSetActualQuantity() {\r\n    this.listService.setActualQuantityDialog({...this.selectedNodeTree.data}, this.selectedNodeTree.parent?.data, this.isOldList).subscribe(listProducts => {\r\n      if (listProducts) {\r\n        this.mapExpansion();\r\n\r\n        listProducts.forEach(listProduct => {\r\n          const index = this.listProducts.findIndex(l => l.id === listProduct.id);\r\n          this.listProducts[index] = {...listProduct};\r\n        });\r\n\r\n        const lists = JSON.parse(JSON.stringify(this.listProducts));\r\n\r\n        if (this.isOldList) {\r\n          this.generateOldListProducts(lists);\r\n        } else {\r\n          this.generateListProducts(lists);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  onCancelActualQuantity() {\r\n    this.modalService.confirm('success').pipe(\r\n      filter(confirm => confirm)\r\n    ).subscribe(() => {\r\n      this.mapExpansion();\r\n\r\n      this.isLoading = true;\r\n      this.tree = [];\r\n\r\n      const send = {\r\n        ids: [],\r\n      };\r\n\r\n      if (this.isOldList) {\r\n        send.ids = [this.selectedNodeTree.data.id];\r\n      } else {\r\n        const selectedListProduct = this.selectedNodeTree.data;\r\n\r\n        if (selectedListProduct.technologies.length === 0) {\r\n          send.ids = selectedListProduct.products.filter(p => p.status === selectedListProduct.status).map(p => p.id);\r\n        } else {\r\n          send.ids = selectedListProduct.filteredProducts.map(p => p.id);\r\n        }\r\n      }\r\n\r\n      this.listProductService\r\n        .cancelActualQuantity(send)\r\n        .subscribe(listProducts => {\r\n          listProducts.forEach(listProduct => {\r\n            const index = this.listProducts.findIndex(l => l.id === listProduct.id);\r\n            this.listProducts[index] = {...listProduct};\r\n          });\r\n\r\n          const lists = JSON.parse(JSON.stringify(this.listProducts));\r\n\r\n          this.generateListProducts(lists);\r\n        });\r\n\r\n      this.selectedNodeTree = null;\r\n    });\r\n  }\r\n\r\n  showSerialWarehouseQuantity(listProduct: ListProduct) {\r\n    return Boolean(listProduct.filteredProducts.find(l => l.status === 'Reserved') && listProduct.technologies.length === 1);\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <div class=\"header-wrapper\">\r\n        <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>\r\n          Production List\r\n          <ng-container *ngIf=\"list\">\r\n            ({{list.id}}) {{list.nomenclature.code}} ({{list.nomenclature.name}})\r\n          </ng-container>\r\n          <ng-container *ngIf=\"!list\">...</ng-container>\r\n        </h1>\r\n      </div>\r\n\r\n      <div class=\"colors\">\r\n        <div class=\"colors__color\">\r\n          <div class=\"colors__color-block colors__color-block_deficit\"></div>\r\n          <p>Deficit Accepted</p>\r\n        </div>\r\n        <div class=\"colors__color\">\r\n          <div class=\"colors__color-block colors__color-block_free-products\"></div>\r\n          <p>Free Warehouse Products</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        [loading]=\"albumService.loading$ | async\"\r\n        pButton\r\n        *ngIf=\"isAlbumPrint\"\r\n        class=\"p-button-success mr-2\"\r\n        type=\"button\"\r\n        icon=\"pi pi-print\"\r\n        label=\"Print Album\"\r\n        (click)=\"printAlbum()\"\r\n        [disabled]=\"selectedNodeTree?.length === 0\"\r\n      >\r\n      </button>\r\n      <button\r\n        pButton\r\n        [icon]=\"isAlbumPrint ? 'pi pi-times' : 'pi pi-images'\"\r\n        class=\"mr-2\"\r\n        type=\"button\"\r\n        [label]=\"(isAlbumPrint ? 'Close' : 'Open') + ' Album Print'\"\r\n        (click)=\"togglePrintAlbumMode()\"\r\n        [disabled]=\"isLoading\"\r\n      >\r\n      </button>\r\n\r\n      <p-menubar\r\n        class=\"production-list-bar ml-auto mr-2\"\r\n        [model]=\"menuItems\"\r\n      ></p-menubar>\r\n      <!--      <button-->\r\n      <!--        class=\"mr-2\"-->\r\n      <!--        pButton-->\r\n      <!--        type=\"button\"-->\r\n      <!--        icon=\"pi pi-print\"-->\r\n      <!--        label=\"Print\"-->\r\n      <!--        (click)=\"printPage()\"-->\r\n      <!--      ></button>-->\r\n      <!--      <button-->\r\n      <!--        (click)=\"setQuantities()\"-->\r\n      <!--        class=\"mr-2\"-->\r\n      <!--        pButton-->\r\n      <!--        type=\"button\"-->\r\n      <!--        icon=\"pi pi-angle-double-right\"-->\r\n      <!--        label=\"Set Actual Quantities\"-->\r\n      <!--        [disabled]=\"(selectedNodeTree && !selectedNodeTree.data.list_url) || list?.completed\"-->\r\n      <!--      ></button>-->\r\n      <!--      <button-->\r\n      <!--        class=\"mr-2\"-->\r\n      <!--        pButton-->\r\n      <!--        type=\"button\"-->\r\n      <!--        label=\"Make Requests\"-->\r\n      <!--        (click)=\"makeDeficit()\"-->\r\n      <!--        *ngIf=\"list && !list?.completed && !list?.is_deficit_requested && isSetAllActualQuantities\"-->\r\n      <!--      ></button>-->\r\n\r\n      <!--      <button-->\r\n      <!--        class=\"mr-2\"-->\r\n      <!--        pButton-->\r\n      <!--        type=\"button\"-->\r\n      <!--        label=\"Make request for all\"-->\r\n      <!--        (click)=\"makeRequestsForAll()\"-->\r\n      <!--        *ngIf=\"list && !list?.completed && !list?.is_deficit_requested && isSetAllActualQuantities\"-->\r\n      <!--      ></button>-->\r\n      <button\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-table\"\r\n        label=\"Hierarchy\"\r\n        [disabled]=\"mode === 'hierarchy'\"\r\n        (click)=\"selectMode('hierarchy')\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-list\"\r\n        label=\"List\"\r\n        [disabled]=\"mode === 'list'\"\r\n        (click)=\"selectMode('list')\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\" [class.locators]=\"!isAlbumPrint\">\r\n  <div class=\"page__card\">\r\n    <ng-container *ngIf=\"mode === 'list'\">\r\n      <p-table\r\n        #dt\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 21.5rem)\"\r\n        [value]=\"products\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selectedNode\"\r\n        (selectionChange)=\"onSelectTreeNode()\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex table-caption\">\r\n            <p-menubar\r\n              [class.disabled]=\"!selectedNode\"\r\n              class=\"production-list-bar ml-auto\"\r\n              [model]=\"selectedNodeMenuItems\"\r\n            ></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\" class=\"text-center\">#</th>\r\n            <th style=\"width: 16%\">\r\n              <button class=\"back\" (click)=\"_location.back()\">\r\n                <i class=\"pi pi-arrow-left\"></i>\r\n              </button>\r\n              Code\r\n            </th>\r\n            <th style=\"width: 8%\">Name</th>\r\n            <th style=\"width: 8%\">Technology</th>\r\n            <th style=\"width: 8%\" class=\"text-center\">Total Req Qty</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Req Qty Per One</th>\r\n            <th style=\"width: 8%\" class=\"text-center\">Free Wh Qty</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Reserved Qty</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Actual Qty</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">UOM</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Locator</th>\r\n            <th style=\"width: 10%\" class=\"d-print-none text-center\">Status</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr\r\n            [pSelectableRow]=\"product\"\r\n            [class.deficit]=\"(product.descendants_has_deficit_accepted || product.is_deficit_accepted) && product.total_required_quantity > product.actual_quantity\"\r\n            [class.free-products]=\"(product.has_free_warehouse_products || product.descendants_has_free_warehouse_products) && product.total_required_quantity > product.actual_quantity\"\r\n          >\r\n            <td style=\"width: 3%\" class=\"index-header text-center\">\r\n              <h3 class=\"td-title\">#</h3>\r\n              {{i + 1}}\r\n            </td>\r\n            <td style=\"width: 16%\" class=\"code-column\">\r\n              <h3 class=\"td-title\">Code</h3>\r\n              <a\r\n                *ngIf=\"product.list_url\"\r\n                class=\"list-parent\"\r\n                [routerLink]=\"['/warehouse/production-lists/', product.list]\"\r\n                [class.disabled]=\"product.list_url && (product.status == 1 || product.status == 3)\"\r\n              >\r\n                {{product.nomenclature?.code}}\r\n              </a>\r\n              <span\r\n                *ngIf=\"!product.list_url\">\r\n                {{product.nomenclature?.code}}\r\n              </span>\r\n            </td>\r\n            <td style=\"width: 16%\" class=\"serial-number-cont\">\r\n              <h3 class=\"td-title\">Name</h3>\r\n              <b *ngIf=\"product.nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n              ({{product.id}})\r\n              {{product.nomenclature?.name}}\r\n\r\n              <div *ngIf=\"product.reserved_serial_numbers.length > 0 || product.future_serial_numbers.length > 0\"\r\n                   class=\"serial-numbers\">\r\n                <div *ngFor=\"let serialNumber of product.reserved_serial_numbers\">\r\n                  {{serialNumber.type_with_number ? serialNumber.type_with_number : serialNumber.type_with_number.id}}\r\n                  (R)\r\n                </div>\r\n                <div *ngFor=\"let serialNumber of product.future_serial_numbers\">\r\n                  {{serialNumber.type_with_number ? serialNumber.type_with_number : serialNumber.id}} (F)\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td>\r\n              {{product.technology?.id}}\r\n            </td>\r\n            <td style=\"width: 8%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Total Req Qty</h3>\r\n              {{product.total_required_quantity}}\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Req Qty Per One</h3>\r\n              {{product.required_quantity_per_one}}\r\n            </td>\r\n            <td style=\"width: 8%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Free Wh Qty</h3>\r\n              {{product.warehouse_quantity}}\r\n            </td>\r\n            <td style=\"width: 7%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Reserved Qty</h3>\r\n              {{product.reserved_quantity}}\r\n            </td>\r\n            <td style=\"width: 7%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Actual Qty</h3>\r\n              {{product.actual_quantity}}\r\n            </td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">UOM</h3>\r\n              {{product.nomenclature.category?.unit_of_measure?.symbol ? product.nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Locator</h3>\r\n              {{product.available_on_locator}}\r\n            </td>\r\n            <td\r\n              style=\"width: 10%\"\r\n              class=\"d-print-none text-center\">\r\n              <h3 class=\"td-title\">Status</h3>\r\n              <span\r\n                class=\"badge\"\r\n                [ngClass]=\"{\r\n                'badge_secondary': product.status == 0,\r\n                'badge_success': product.status == 1,\r\n                'badge_danger': product.status == 2,\r\n                'badge_reserved': product.status == 3}\"\r\n              >\r\n                {{statuses[product.status]}}\r\n              </span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr class=\"tr-spinner\">\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"11\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"mode === 'hierarchy'\">\r\n      <p-treeTable\r\n        class=\"categories-tree\"\r\n        [dataKey]=\"isAlbumPrint ? 'id' : 'uid'\"\r\n        [value]=\"tree\"\r\n        [selectionMode]=\"isAlbumPrint ? 'checkbox' : 'single'\"\r\n        [(selection)]=\"selectedNodeTree\"\r\n        scrollHeight=\"calc(100vh - 19.125rem)\"\r\n        dataKey=\"uid\"\r\n        [scrollable]=\"true\"\r\n        (selectionChange)=\"onSelectTreeNode()\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex table-caption\">\r\n            <p-menubar\r\n              [class.disabled]=\"!selectedNodeTree || this.isAlbumPrint\"\r\n              class=\"production-list-bar ml-auto mr-2\"\r\n              [model]=\"selectedNodeTreeMenuItems\"\r\n            ></p-menubar>\r\n            <button\r\n              [disabled]=\"isLoadingTree\"\r\n              class=\"mr-2 p-button-icon\"\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-camera\"\r\n              label=\"Scan QR Codes\"\r\n              (click)=\"onStartScanning()\"\r\n            >\r\n            </button>\r\n            <button\r\n              class=\"mr-2\"\r\n              pButton\r\n              type=\"button\"\r\n              label=\"Expand All\"\r\n              icon=\"pi pi-angle-down\"\r\n              (click)=\"expandAll()\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              label=\"Collapse All\"\r\n              icon=\"pi pi-angle-up\"\r\n              (click)=\"collapseAll()\"\r\n            ></button>\r\n            <p *ngIf=\"this.foundRowsIds.length > 0\" class=\"d-flex align-items-center mr-2\">\r\n              Found {{foundRowsIds.length}} products\r\n            </p>\r\n            <button\r\n              pButton\r\n              *ngIf=\"this.foundRowsIds.length > 1\"\r\n              type=\"button\"\r\n              label=\"Go to previous\"\r\n              icon=\"pi pi-backward\"\r\n              class=\"p-button-secondary mr-2\"\r\n              (click)=\"goToPrev()\"\r\n            ></button>\r\n            <button\r\n              *ngIf=\"this.foundRowsIds.length > 1\"\r\n              pButton\r\n              type=\"button\"\r\n              label=\"Go to next\"\r\n              icon=\"pi pi-forward\"\r\n              class=\"p-button-secondary mr-2\"\r\n              (click)=\"goToNext()\"\r\n            ></button>\r\n            <button\r\n              *ngIf=\"this.foundRowsIds.length > 0\"\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-times-circle\"\r\n              class=\"p-button-danger\"\r\n              (click)=\"clearQrResults()\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 16%\">\r\n              <div class=\"row-checkbox\">\r\n                <div class=\"toggle\" *ngIf=\"isAlbumPrint\">\r\n                  <p-treeTableHeaderCheckbox></p-treeTableHeaderCheckbox>\r\n                </div>\r\n                <button class=\"back\" (click)=\"_location.back()\">\r\n                  <i class=\"pi pi-arrow-left\"></i>\r\n                </button>\r\n                Code\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 14%\">Name</th>\r\n            <th style=\"width: 6%\" class=\"text-center\">Technologies</th>\r\n            <th style=\"width: 6%\" class=\"text-center\">Current Technology</th>\r\n            <th style=\"width: 6%\" class=\"text-center\">Total Req Qty</th>\r\n            <th style=\"width: 8%\" class=\"text-center\">Req Qty Per One</th>\r\n            <th style=\"width: 8%\" class=\"text-center\">Free Wh Qty</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Reserved Qty</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Actual Qty</th>\r\n            <th style=\"width: 5%\" class=\"text-center\">UOM</th>\r\n            <th style=\"width: 9%\" class=\"text-center\">Locator</th>\r\n            <th style=\"width: 8%\" class=\"d-print-none text-center\">Status</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n          <tr\r\n            [ttRow]=\"rowNode\"\r\n            [ttSelectableRow]=\"rowNode\"\r\n            [ttSelectableRowDisabled]=\"isAlbumPrint\"\r\n            [class.deficit]=\"(rowData.descendants_has_deficit_accepted || rowData.is_deficit_accepted) && rowData.total_required_quantity > rowData.actual_quantity\"\r\n            [class.is-found-row]=\"isFoundRow(rowData.id)\"\r\n            [class.selected-for-change]=\"rowData.id === currentDisplayRowId\"\r\n            [id]=\"'row-' + rowData.id\"\r\n            [class.free-products]=\"(rowData.has_free_warehouse_products || rowData.descendants_has_free_warehouse_products) && rowData.total_required_quantity > rowData.actual_quantity\"\r\n          >\r\n            <td style=\"width: 16%\">\r\n              <h3 class=\"td-title\">Code</h3>\r\n              <div class=\"toggle-row\">\r\n                <div class=\"toggle\">\r\n                  <p-treeTableCheckbox *ngIf=\"isAlbumPrint\" [value]=\"rowNode\"></p-treeTableCheckbox>\r\n                </div>\r\n                <p-treeTableToggler\r\n                  [rowNode]=\"rowNode\"\r\n                  [class.disabled-toggler]=\"rowData.status === 'Completed' || rowData.status === 'Reserved' || rowData.blockedExpand\"></p-treeTableToggler>\r\n                <a\r\n                  [class.disabled]=\"(rowData.list_url && (rowData.status === 'Completed' || rowData.status === 'Reserved')) || rowData.blockedExpand\"\r\n                  *ngIf=\"rowData.nomenclature.type === '1'\"\r\n                  class=\"list-parent\"\r\n                  [routerLink]=\"['/warehouse/production-lists/', rowData.list]\"\r\n                >\r\n                  {{rowData.nomenclature.code}}\r\n                </a>\r\n                <span *ngIf=\"rowData.nomenclature.type !== '1'\">{{rowData.nomenclature.code}}</span>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 14%\" class=\"serial-number-cont\">\r\n              <h3 class=\"td-title\">Name</h3>\r\n              <b *ngIf=\"rowData.nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n              <!--              ({{rowData.id}}) -->\r\n              {{rowData.nomenclature.name}}\r\n\r\n              <div *ngIf=\"rowData.reserved_serial_numbers?.length > 0 || rowData.future_serial_numbers?.length > 0\"\r\n                   class=\"serial-numbers\">\r\n                <div *ngFor=\"let serialNumber of rowData.reserved_serial_numbers\">\r\n                  {{serialNumber.type_with_number}} (R)\r\n                </div>\r\n                <div *ngFor=\"let serialNumber of rowData.future_serial_numbers\">\r\n                  {{serialNumber.type_with_number}} (F)\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">\r\n              <span *ngFor=\"let technology of rowData?.technologies; let idx = index\">\r\n                {{technology?.name}}<ng-container *ngIf=\"idx !== rowData?.technologies.length - 1\">,</ng-container>\r\n              </span>\r\n            </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Current Technology</h3>\r\n              <ng-container *ngIf=\"rowData.blockedExpand\">\r\n                {{rowData.currentTechnology?.name}}\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Total Req Qty</h3>\r\n              {{rowData.total_required_quantity}}\r\n            </td>\r\n            <td style=\"width: 8%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Req Qty Per One</h3>\r\n              {{rowData.required_quantity_per_one}}\r\n            </td>\r\n            <td style=\"width: 8%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Free Wh Qty</h3>\r\n              <ng-container\r\n                *ngIf=\"(rowData.currentTechnology && rowData.blockedExpand) || rowData.technologies?.length === 0 || showSerialWarehouseQuantity(rowData)\">\r\n                {{rowData.warehouse_quantity}}\r\n              </ng-container>\r\n              <ng-container *ngIf=\"rowData.technologies?.length > 0 && !rowData.blockedExpand\">\r\n                <ng-container *ngFor=\"let quantity of rowData.warehouseQuantities; let idx = index\">\r\n                  {{quantity}}<ng-container *ngIf=\"idx !== rowData?.warehouseQuantities.length - 1\">,</ng-container>\r\n                </ng-container>\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 7%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Reserved Qty</h3>\r\n              {{rowData.reserved_quantity ? rowData.reserved_quantity : 0}}\r\n            </td>\r\n            <td style=\"width: 7%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Actual Qty</h3>\r\n              {{rowData.actual_quantity}}\r\n            </td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">UOM</h3>\r\n              {{rowData.nomenclature.category?.unit_of_measure?.symbol ? rowData.nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n            </td>\r\n            <td style=\"width: 9%\" class=\"text-center word-break\">\r\n              <h3 class=\"td-title\">Locator</h3>\r\n              {{rowData.available_on_locator}}\r\n            </td>\r\n            <td style=\"width: 8%\" class=\"d-print-none text-center\">\r\n              <h3 class=\"td-title\">Status</h3>\r\n              <span\r\n                class=\"badge\"\r\n                [ngClass]=\"{\r\n                'badge_secondary': rowData.status === 'Not processed',\r\n                'badge_success': rowData.status === 'Completed',\r\n                'badge_danger': rowData.status === 'Deficit',\r\n                'badge_reserved': rowData.status === 'Reserved'\r\n                }\"\r\n              >\r\n                {{statuses[rowData.status]}}\r\n              </span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\" let-columns>\r\n          <tr class=\"tr-spinner\">\r\n            <td class=\"text-center p-5\" [attr.colspan]=\"10\">\r\n              <i *ngIf=\"isLoadingTree\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoadingTree\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-treeTable>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"print-list-product\" *ngIf=\"isShowPrint\">\r\n  <div class=\"print-list-product__list\">\r\n    <ng-template ngFor [ngForOf]=\"productsForPrint\" let-product let-index=index let-last=last>\r\n      <div class=\"print-list-product__item\" [class.break]=\"isShowPrintSeparated\" *ngIf=\"product.children.length > 0\">\r\n        <app-list-product-print-item [product]=\"product\" [last]=\"last\"></app-list-product-print-item>\r\n      </div>\r\n    </ng-template>\r\n  </div>\r\n</div>\r\n\r\n<pek-qr-code-scanner\r\n  *ngIf=\"isScanned\"\r\n  (scanned)=\"onScanned($event)\"\r\n  (cancel)=\"onCancelScanned()\"\r\n></pek-qr-code-scanner>\r\n","import {AfterViewInit, Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {ListService} from '../../services/list.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {fromEvent, Subject, takeUntil} from 'rxjs';\r\nimport {List} from '../../models/list';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport * as cloneDeep from 'lodash/cloneDeep';\r\nimport {ProductStructureCategoryService} from '../../../product-structure/services/product-structure-category.service';\r\nimport {environment} from '@env/environment';\r\n\r\nexport enum ViewMode {\r\n  LIST = 0,\r\n  HIERARCHY = 1,\r\n}\r\n\r\nexport type ProductionListAccountingType = 'purchased' | 'own' | 'outsource';\r\nexport type ProductionListPositionType = 'assembly' | 'not assembly';\r\n\r\n@Component({\r\n  selector: 'pek-production-lists',\r\n  templateUrl: './production-lists.component.html',\r\n  styleUrls: ['./production-lists.component.scss']\r\n})\r\nexport class ProductionListsComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n\r\n  selectedOrderNode: TreeNode<List>;\r\n  selectedList: List;\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Production List',\r\n    items: [\r\n      {\r\n        label: 'Production List',\r\n        icon: 'pi pi-bars',\r\n        command: () => this.goToProductionList()\r\n      },\r\n      {\r\n        label: 'Set List Locator',\r\n        icon: 'pi pi-angle-double-right',\r\n        command: () => this.onSetListLocator()\r\n      },\r\n      {\r\n        label: 'Go To Plan',\r\n        icon: 'pi pi-angle-double-right',\r\n        command: () => this.goToPlan()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  menuItemsNode: MenuItem[] = [{\r\n    label: 'Selected Production List',\r\n    items: [\r\n      {\r\n        label: 'Production List',\r\n        icon: 'pi pi-bars',\r\n        command: () => this.goToProductionListNode()\r\n      },\r\n      {\r\n        label: 'Set List Locator',\r\n        icon: 'pi pi-angle-double-right',\r\n        command: () => this.onSetListLocatorNode()\r\n      },\r\n      {\r\n        label: 'Go To Plan',\r\n        icon: 'pi pi-angle-double-right',\r\n        command: () => this.goToPlanNode()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  link = environment.link_url + 'dash/';\r\n\r\n  expanseMap = {};\r\n\r\n  categories: TreeNode[];\r\n\r\n  isLoadingFullStatistic = false;\r\n  isShowFullStatistics = false;\r\n\r\n  isShowAll = false;\r\n  isStartOnePage = false;\r\n  isLoading = true;\r\n\r\n  tableScrollHeight = '29.625rem';\r\n  isHideFilters = false;\r\n\r\n  viewModeType = ViewMode;\r\n  viewMode: ViewMode = ViewMode.LIST;\r\n  queryKey = 'name:/code:/responsible_employee_id:null/date_created_after:null/date_created_before:null/category_ids:null/root_categories:null';\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    page: [1],\r\n    name: [''],\r\n    code: [''],\r\n    responsible_employee_id: [null],\r\n    date_created_after: [null],\r\n    date_created_before: [null],\r\n    category_ids: null,\r\n    root_categories: null,\r\n  });\r\n\r\n  productionCategorizedList: TreeNode<List>[];\r\n\r\n  fullOrderTree: TreeNode<List>[] = [];\r\n\r\n  orderTree: TreeNode[] = [];\r\n  lists: List[] = [];\r\n  count = 0;\r\n  fullStatisticList: List[] = [];\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'paginated', value: true},\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n  ];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private listService: ListService,\r\n    private readonly adapterService: AdapterService,\r\n    private productStructureCategoriesService: ProductStructureCategoryService,\r\n    private fb: FormBuilder,\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedList = null),\r\n        map(() => this.searchBoxName.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchLists();\r\n    });\r\n\r\n    fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedList = null),\r\n        map(() => this.searchBoxCode.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchLists();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getCategories();\r\n    this.getProductionListsForPagination();\r\n  }\r\n\r\n  makeUniqueProductionPlansList(): void {\r\n    this.lists.forEach(list => {\r\n      list.unique_root_production_plans = [];\r\n      list.root_production_plans.forEach(plan => {\r\n        if (plan.root_nomenclature) {\r\n          const nomenclatureId = plan.root_nomenclature.id;\r\n          const existingIndex =\r\n            list.unique_root_production_plans\r\n              .findIndex(unPlan => unPlan.root_nomenclature.id === nomenclatureId);\r\n\r\n          if (existingIndex < 0) {\r\n            list.unique_root_production_plans.push(plan);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getCategories() {\r\n    if (this.categories) {\r\n      this.mapExpansion();\r\n    }\r\n    this.productStructureCategoriesService.get().pipe(\r\n      tap((categories) => {\r\n        this.createTree(categories);\r\n      })).subscribe();\r\n  }\r\n\r\n  createTree(data) {\r\n    const dd = [];\r\n    data.forEach(element => {\r\n      const ins = {data: element, expanded: false};\r\n      if (this.expanseMap) {\r\n        ins.expanded = this.expanseMap[element.id];\r\n      }\r\n      dd.push(ins);\r\n    });\r\n    const root = [];\r\n    const idMapping = dd.reduce((acc, el, i) => {\r\n      acc[el.data.id] = i;\r\n      return acc;\r\n    }, {});\r\n    dd.forEach(el => {\r\n      // Handle the root element\r\n      if (el.data.parent === null) {\r\n        root.push(el);\r\n        return;\r\n      }\r\n      // Use our mapping to locate the parent element in our data array\r\n      const parentEl = dd[idMapping[el.data.parent]];\r\n      // Add our current el to its parent's `children` array\r\n      parentEl.children = [...(parentEl.children || []), el];\r\n      if (parentEl.children.length === 0) {\r\n        delete parentEl.children;\r\n      }\r\n\r\n    });\r\n    this.categories = root;\r\n    this.productionCategorizedList = cloneDeep(this.categories);\r\n  }\r\n\r\n  mapExpansion() {\r\n    this.categories.forEach(element => {\r\n      this.createExpanseMap(element);\r\n    });\r\n  }\r\n\r\n  createExpanseMap(node) {\r\n    if (node.expanded) {\r\n      this.expanseMap[node.data.id] = node.expanded;\r\n    } else {\r\n      this.expanseMap[node.data.id] = false;\r\n    }\r\n    if (node.children) {\r\n      node.children.forEach(element => {\r\n        this.createExpanseMap(element);\r\n      });\r\n    }\r\n  }\r\n\r\n  getProductionListsForPagination() {\r\n    this.lists = [];\r\n    this.orderTree = [];\r\n\r\n    this.listService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(lists => {\r\n      this.lists = lists.results;\r\n      this.count = lists.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n\r\n      this.makeUniqueProductionPlansList();\r\n      this.prepareTreeCategories();\r\n      this.fillCategorizedTree();\r\n\r\n      if (this.isShowFullStatistics) {\r\n        this.getFullStatistics();\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  prepareTreeCategories(): void {\r\n    this.orderTree = [];\r\n    const categoriesTemp: { id: number, level: number, parentId: number, name: string }[] = [];\r\n\r\n    this.lists.forEach(list => {\r\n      if (list.root_production_plans) {\r\n        list.root_production_plans.forEach(plan => {\r\n          if (plan.root_nomenclature && plan.root_nomenclature.root_category) {\r\n            const rootCatId = plan.root_nomenclature.root_category.id;\r\n            const rootCatName = plan.root_nomenclature.root_category.name;\r\n            const rootLevel = 1;\r\n\r\n            const catId = plan.root_nomenclature.id;\r\n            const catName = plan.root_nomenclature.name;\r\n            const catLevel = 2;\r\n\r\n            const rootExistsIndex = categoriesTemp.findIndex(cat => cat.id === rootCatId && rootLevel === cat.level);\r\n\r\n            if (rootExistsIndex < 0) {\r\n              categoriesTemp.push({\r\n                id: rootCatId,\r\n                level: rootLevel,\r\n                name: rootCatName,\r\n                parentId: null\r\n              });\r\n            }\r\n\r\n            const catExistsIndex = categoriesTemp.findIndex(cat => cat.id === catId && catLevel === cat.level);\r\n\r\n            if (catExistsIndex < 0) {\r\n              categoriesTemp.push({\r\n                id: catId,\r\n                level: catLevel,\r\n                name: catName,\r\n                parentId: rootCatId\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    const rootCategories = categoriesTemp.filter(cat => !cat.parentId);\r\n\r\n    rootCategories.forEach(cat => {\r\n      this.orderTree.push({\r\n        data: {\r\n          id: cat.id,\r\n          name: cat.name,\r\n          level: cat.level,\r\n          parentId: cat.parentId,\r\n          categories: 0\r\n        },\r\n        expanded: false,\r\n        children: []\r\n      });\r\n    });\r\n\r\n    this.orderTree.forEach(node => {\r\n      categoriesTemp.forEach(cat => {\r\n        if (cat.parentId === node.data.id) {\r\n          node.children.push({\r\n            data: {\r\n              id: cat.id,\r\n              name: cat.name,\r\n              level: cat.level,\r\n              parentId: cat.parentId,\r\n              categories: 0\r\n            },\r\n            expanded: false,\r\n            children: []\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    console.log(this.orderTree);\r\n\r\n    this.fillTree();\r\n  }\r\n\r\n  fillTree(): void {\r\n    this.lists.forEach(list => {\r\n      if (list.root_production_plans) {\r\n        list.root_production_plans.forEach(plan => {\r\n          this.orderTree.forEach(root => {\r\n            root.children.forEach(child => {\r\n              if (plan.root_nomenclature) {\r\n                const catId = plan.root_nomenclature.id;\r\n                if (child.data.id === catId) {\r\n                  const existingCatChildIndex = child.children.findIndex(cat => cat.data.id === plan.list_product.nomenclature.id);\r\n\r\n                  if (existingCatChildIndex < 0) {\r\n                    child.children.push({\r\n                      data: {\r\n                        id: plan.list_product.nomenclature.id,\r\n                        name: plan.list_product.nomenclature.name,\r\n                        level: 3,\r\n                        categories: 0\r\n                      },\r\n                      expanded: false,\r\n                      children: [{\r\n                        data: {list, plan, level: 4},\r\n                        expanded: false,\r\n                        children: []\r\n                      }]\r\n                    });\r\n                  } else {\r\n                    const existingOrderIndex =\r\n                      child.children[existingCatChildIndex]\r\n                        .children.findIndex(listData => listData.data.list.id === list.id);\r\n                    if (existingOrderIndex < 0) {\r\n                      child.children[existingCatChildIndex].children.push({\r\n                        data: {list, plan, level: 4},\r\n                        expanded: false,\r\n                        children: []\r\n                      });\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            });\r\n          });\r\n        });\r\n      }\r\n\r\n      if (list.root_production_plans && list.root_production_plans.length < 1) {\r\n        const noCategoryIndex = this.orderTree.findIndex(node => node.data.id === -1);\r\n\r\n        if (noCategoryIndex < 0) {\r\n          this.orderTree.push({\r\n            data: {\r\n              id: -1,\r\n              level: 1,\r\n              name: 'No Root List',\r\n              parentId: null\r\n            },\r\n            expanded: false,\r\n            children: [\r\n              {\r\n                data: {list, plan: null, level: 4},\r\n                expanded: false,\r\n                children: []\r\n              }]\r\n          });\r\n        } else {\r\n          const existingOrderIndex =\r\n            this.orderTree[noCategoryIndex]\r\n              .children.findIndex(orderData => orderData.data.order.id === list.id);\r\n          if (existingOrderIndex < 0) {\r\n            this.orderTree[noCategoryIndex].children.push(\r\n              {\r\n                data: {list, plan: null, level: 4},\r\n                expanded: false,\r\n                children: []\r\n              }\r\n            );\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    this.orderTree = [...this.orderTree];\r\n  }\r\n\r\n  expandCollapseAllOrders(isToExpand = true): void {\r\n    const temp = cloneDeep(this.orderTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.orderTree = temp;\r\n\r\n    const tempFull = cloneDeep(this.fullOrderTree);\r\n    tempFull.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.fullOrderTree = tempFull;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  getProductionLists() {\r\n    this.listService.get(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(lists => {\r\n      this.lists = lists;\r\n      this.count = lists.length;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n\r\n      this.makeUniqueProductionPlansList();\r\n      this.prepareTreeCategories();\r\n      this.fillCategorizedTree();\r\n\r\n      if (this.isShowFullStatistics) {\r\n        this.getFullStatistics();\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  fillCategorizedTree(): void {\r\n    const categoriesTemp: { id: number, level: number, parentId: number, name: string }[] = [];\r\n\r\n    this.lists.forEach(list => {\r\n      if (list.unique_root_production_plans) {\r\n        list.unique_root_production_plans.forEach(plan => {\r\n          if (plan.root_nomenclature && plan.root_nomenclature.root_category) {\r\n            const rootCatId = plan.root_nomenclature.root_category.id;\r\n            const rootCatName = plan.root_nomenclature.root_category.name;\r\n            const rootLevel = 1;\r\n\r\n            const catId = plan.root_nomenclature.id;\r\n            const catName = plan.root_nomenclature.name;\r\n            const catLevel = 2;\r\n\r\n            const rootExistsIndex = categoriesTemp.findIndex(cat => cat.id === rootCatId && rootLevel === cat.level);\r\n\r\n            if (rootExistsIndex < 0) {\r\n              categoriesTemp.push({\r\n                id: rootCatId,\r\n                level: rootLevel,\r\n                name: rootCatName,\r\n                parentId: null\r\n              });\r\n            }\r\n\r\n            const catExistsIndex = categoriesTemp.findIndex(cat => cat.id === catId && catLevel === cat.level);\r\n\r\n            if (catExistsIndex < 0) {\r\n              categoriesTemp.push({\r\n                id: catId,\r\n                level: catLevel,\r\n                name: catName,\r\n                parentId: rootCatId\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }\r\n\r\n      if (list.unique_root_production_plans.length < 1) {\r\n        const noCategoryIndex = this.productionCategorizedList.findIndex(nodeInner => nodeInner.data.id === -1);\r\n\r\n        if (noCategoryIndex < 0) {\r\n          this.productionCategorizedList.push({\r\n            data: {\r\n              id: -1,\r\n              // @ts-ignore\r\n              level: 1,\r\n              name: 'No Root List',\r\n              parentId: null\r\n            },\r\n            expanded: false,\r\n            children: [\r\n              {\r\n                // @ts-ignore\r\n                data: {list, plan: null, level: 4},\r\n                expanded: false,\r\n                children: []\r\n              }]\r\n          });\r\n        } else {\r\n          this.productionCategorizedList[noCategoryIndex].children.push(\r\n            {\r\n              // @ts-ignore\r\n              data: {list, plan: null, level: 4},\r\n              expanded: false,\r\n              children: []\r\n            }\r\n          );\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  searchLists() {\r\n    this.isLoading = true;\r\n    if (this.isShowFullStatistics) {\r\n      this.isLoadingFullStatistic = true;\r\n    }\r\n    this.destroy$.next(true);\r\n    this.selectedList = null;\r\n    this.selectedOrderNode = null;\r\n    this.fullStatisticList = [];\r\n    this.fullOrderTree = [];\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}/responsible_employee_id:${this.searchForm.get('responsible_employee_id').value}/date_created_after:${this.searchForm.get('date_created_after').value}/date_created_before:${this.searchForm.get('date_created_before').value}/category_ids:${this.searchForm.get('category_ids').value}/root_categories:${this.searchForm.get('root_categories').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query = [\r\n        {name: 'paginated', value: 'true'},\r\n        {name: 'page', value: this.searchForm.get('page').value},\r\n      ];\r\n    }\r\n\r\n    if (this.searchForm.get('name').value) {\r\n      this.query.push({name: 'name', value: this.searchForm.get('name').value});\r\n    }\r\n\r\n    if (this.searchForm.get('code').value) {\r\n      this.query.push({name: 'code', value: this.searchForm.get('code').value});\r\n    }\r\n\r\n    if (this.searchForm.get('responsible_employee_id').value) {\r\n      this.query.push({name: 'responsible_employee_id', value: this.searchForm.get('responsible_employee_id').value});\r\n    }\r\n\r\n    if (this.searchForm.get('root_categories').value) {\r\n      this.query.push({name: 'root_categories', value: this.searchForm.get('root_categories').value});\r\n    }\r\n\r\n    if (this.searchForm.get('date_created_after').value) {\r\n      this.query.push({\r\n        name: 'date_created_after',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('date_created_after').value)\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('date_created_before').value) {\r\n      this.query.push({\r\n        name: 'date_created_before',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('date_created_before').value)\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('category_ids').value) {\r\n      this.query.push({name: 'category_ids', value: this.searchForm.get('category_ids').value});\r\n    }\r\n\r\n    if (!this.isShowAll) {\r\n      this.getProductionListsForPagination();\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.getProductionLists();\r\n    }\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.setTableScrollHeight();\r\n    this.searchLists();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.setTableScrollHeight();\r\n    this.searchLists();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchLists();\r\n    }\r\n  }\r\n\r\n  onSelectProductStructureCategories(ids: string) {\r\n    this.searchForm.get('root_categories').patchValue(ids);\r\n    this.searchLists();\r\n  }\r\n\r\n  onSelectCategories(ids: string) {\r\n    this.searchForm.get('category_ids').patchValue(ids);\r\n    this.searchLists();\r\n  }\r\n\r\n  onSelectEmployee(id: number) {\r\n    this.searchForm.get('responsible_employee_id').patchValue(id);\r\n    this.searchLists();\r\n  }\r\n\r\n  onChoiceViewType(mode: ViewMode) {\r\n    this.viewMode = mode;\r\n    this.selectedList = null;\r\n    this.selectedOrderNode = null;\r\n  }\r\n\r\n  onSetListLocator() {\r\n    this.listService.openSetProductionListLocatorModal(this.selectedList.id).subscribe(list => {\r\n      if (list) {\r\n        const index = this.lists.findIndex(l => l.id === list.id);\r\n        // @ts-ignore\r\n        this.lists[index].locator = list?.locator;\r\n      }\r\n    });\r\n  }\r\n\r\n  onSetListLocatorNode() {\r\n    this.listService.openSetProductionListLocatorModal(this.selectedOrderNode.data?.list?.id).subscribe(list => {\r\n      if (list) {\r\n        const index = this.lists.findIndex(l => l.id === list.id);\r\n        // @ts-ignore\r\n        this.lists[index].locator = list?.locator;\r\n      }\r\n    });\r\n  }\r\n\r\n  setTableScrollHeight() {\r\n    if (this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '20.875rem';\r\n      return;\r\n    }\r\n\r\n    if (this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '18.75rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '27.5rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '29.625rem';\r\n      return;\r\n    }\r\n  }\r\n\r\n  toggleFilterVisibility() {\r\n    this.isHideFilters = !this.isHideFilters;\r\n\r\n    this.setTableScrollHeight();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  onShowStatisticsForChains(\r\n    id: number,\r\n    accountType: ProductionListAccountingType,\r\n    positionType: ProductionListPositionType = null\r\n  ) {\r\n    const send = {\r\n      accounting_type: accountType,\r\n      positions_type: positionType,\r\n    };\r\n    this.listService.showStatisticsForChainsModal(id, send).subscribe();\r\n  }\r\n\r\n  onShowFullStatistics() {\r\n    if (!this.isShowFullStatistics) {\r\n      this.isShowFullStatistics = true;\r\n      this.isLoadingFullStatistic = true;\r\n\r\n      if (this.lists.length === 0) {\r\n        this.isLoadingFullStatistic = false;\r\n        return;\r\n      }\r\n\r\n      this.listService.getFullStatistics(this.lists.map(l => l.id).join(',')).pipe(\r\n        tap(statistics => this.generateStatistic(statistics)),\r\n        tap(() => this.isLoadingFullStatistic = false),\r\n        takeUntil(this.destroy$)\r\n      ).subscribe();\r\n    } else {\r\n      this.isShowFullStatistics = false;\r\n      this.isLoadingFullStatistic = false;\r\n    }\r\n  }\r\n\r\n  getFullStatistics() {\r\n    this.isLoadingFullStatistic = true;\r\n    this.listService.getFullStatistics(this.lists.map(l => l.id).join(',')).pipe(\r\n      tap(statistics => this.generateStatistic(statistics)),\r\n      tap(() => this.isLoadingFullStatistic = false),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe();\r\n  }\r\n\r\n  goToPlan() {\r\n    window.open(`manufacturing/plans/plan/${this.selectedList.root_production_plans[0].id}`, '_blank');\r\n  }\r\n\r\n  goToPlanNode() {\r\n    window.open(`manufacturing/plans/plan/${this.selectedOrderNode.data.list.root_production_plans[0].id}`, '_blank');\r\n  }\r\n\r\n  generateStatistic(statistics: any[]) {\r\n    this.fullStatisticList = [...this.lists];\r\n    this.fullStatisticList.forEach(l => l.full_statistics = statistics.find(s => s.id === l.id));\r\n    this.fullOrderTree = [...this.orderTree];\r\n\r\n    this.fullOrderTree.forEach(n => {\r\n      n.children.forEach(n => {\r\n        n.children.forEach(n => {\r\n          n.children.forEach(n => {\r\n            n.data.list.full_statistics = statistics.find(s => s.id === n.data.list.id);\r\n          });\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  private goToProductionList() {\r\n    window.open(`/warehouse/production-lists/${this.selectedList?.id}`, '_blank');\r\n  }\r\n\r\n  private goToProductionListNode() {\r\n    window.open(`/warehouse/production-lists/${this.selectedOrderNode.data.list.id}`, '_blank');\r\n  }\r\n\r\n  expandCollapse(node, isToExpand) {\r\n    const temp = cloneDeep(this.orderTree);\r\n    temp.forEach(n => {\r\n      this.makeRow(n, node, isToExpand)\r\n    })\r\n    this.orderTree = temp;\r\n\r\n    const tempFull = cloneDeep(this.fullOrderTree);\r\n    tempFull.forEach(n => {\r\n      this.makeRow(n, node, isToExpand)\r\n    })\r\n    this.fullOrderTree = tempFull;\r\n  }\r\n\r\n  makeRow(node, dat, isExpanded) {\r\n    if (node.data?.id === dat.data?.id) {\r\n      this.expandCollapseRecursive(node, isExpanded);\r\n    } else {\r\n      if (node.children) {\r\n        node.children.forEach(element => {\r\n          this.makeRow(element, dat, isExpanded);\r\n        });\r\n      }\r\n    }\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <div class=\"header-wrapper\">\r\n        <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>Production Lists</h1>\r\n      </div>\r\n\r\n      <div class=\"colors\">\r\n        <div class=\"colors__color\">\r\n          <div class=\"colors__color-block colors__color-block_deficit\"></div>\r\n          <p>Deficit Accepted</p>\r\n        </div>\r\n        <div class=\"colors__color\">\r\n          <div class=\"colors__color-block colors__color-block_free-products\"></div>\r\n          <p>Free Warehouse Products</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-table\"\r\n        label=\"Hierarchy\"\r\n        [disabled]=\"viewMode === viewModeType.HIERARCHY\"\r\n        (click)=\"onChoiceViewType(viewModeType.HIERARCHY)\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-list\"\r\n        label=\"List\"\r\n        [disabled]=\"viewMode === viewModeType.LIST\"\r\n        (click)=\"onChoiceViewType(viewModeType.LIST)\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content locators\">\r\n  <div class=\"page__card\">\r\n\r\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n      <div class=\"filters-visibility__header\">\r\n        <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n      </div>\r\n\r\n      <button\r\n        class=\"icon pi\"\r\n        [class.pi-angle-double-up]=\"!isHideFilters\"\r\n        [class.pi-angle-double-down]=\"isHideFilters\"\r\n        (click)=\"toggleFilterVisibility()\"\r\n        [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n        tooltipPosition=\"left\"\r\n      ></button>\r\n\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Code</label>\r\n              <input class=\"form-control\" formControlName=\"code\" pInputText #searchBoxCode>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Name</label>\r\n              <input class=\"form-control\" formControlName=\"name\" pInputText #searchBoxName>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Product Structure Category</label>\r\n              <pek-multi-product-structure-categories-picker\r\n                (choiceCategories)=\"onSelectProductStructureCategories($event)\"\r\n              ></pek-multi-product-structure-categories-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Created Date From</label>\r\n              <p-calendar\r\n                formControlName=\"date_created_after\"\r\n                [showButtonBar]=\"true\"\r\n                (ngModelChange)=\"searchLists()\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Created Date To</label>\r\n              <p-calendar\r\n                formControlName=\"date_created_before\"\r\n                (ngModelChange)=\"searchLists()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n    <ng-container *ngIf=\"viewMode === viewModeType.LIST && !isShowFullStatistics\">\r\n      <div class=\"table-pagination-preloader table-list\">\r\n        <p-table\r\n          class=\"table\"\r\n          #dt\r\n          selectionMode=\"single\"\r\n          [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n          [scrollable]=\"true\"\r\n          dataKey=\"id\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedList\"\r\n          [value]=\"lists\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th rowspan=\"4\" style=\"width: 5%\" class=\"text-center\">#</th>\r\n              <th rowspan=\"4\" style=\"width: 20%\">Code</th>\r\n              <th rowspan=\"4\" style=\"width: 20%\">Name</th>\r\n              <th rowspan=\"4\" style=\"width: 10%\" class=\"text-center\">Date Of Creation</th>\r\n              <th rowspan=\"4\" style=\"width: 5%\" class=\"text-center\">Sets</th>\r\n              <th rowspan=\"4\" style=\"width: 10%\" class=\"bord-right\">Locator</th>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th colspan=\"6\" class=\"bord text-center dark-two bord-top\" style=\"width: 15%\">Total</th>\r\n              <th colspan=\"6\" class=\"bord text-center dark-two bord-top\" style=\"width: 15%\">Not Processed</th>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th colspan=\"3\" class=\"bord text-center dark-two\" style=\"width: 8%\">Nomenclature</th>\r\n              <th colspan=\"3\" class=\"bord text-center dark-two\" style=\"width: 7%\">Elements</th>\r\n              <th colspan=\"3\" class=\"bord text-center dark-two\" style=\"width: 8%\">Nomenclature</th>\r\n              <th colspan=\"3\" class=\"bord text-center dark-two\" style=\"width: 7%\">Elements</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-list let-i=\"rowIndex\">\r\n            <tr\r\n              [pSelectableRow]=\"list\"\r\n              [class.deficit]=\"list.descendants_has_deficit_accepted\"\r\n              [class.free-products]=\"list.descendants_has_free_warehouse_products\"\r\n            >\r\n              <td style=\"width: 5%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">#</h3>\r\n                {{(this.searchForm.get('page').value - 1) * 10 + i + 1}}\r\n              </td>\r\n              <td style=\"width: 20%\">\r\n                <h3 class=\"td-title\">Code</h3>\r\n                ({{list.id}}) {{list.nomenclature.code}}\r\n              </td>\r\n              <td style=\"width: 20%\">\r\n                <h3 class=\"td-title\">Name</h3>\r\n                {{list.nomenclature.name}}\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Date Of Creation</h3>\r\n                {{list.created|date:'dd/MM/yyyy HH:mm'}}\r\n              </td>\r\n              <td style=\"width: 5%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Sets</h3>\r\n                {{list.sets_number}}\r\n              </td>\r\n              <td style=\"width: 10%\">\r\n                <h3 class=\"td-title\">Locator</h3>\r\n                <ng-container *ngIf=\"list.locator\">\r\n                  {{list.locator.name + ' '}}<br>\r\n                  R: {{list.locator.row}}\r\n                  Col: {{list.locator.column}}\r\n                  Sh: {{list.locator.shelf}}\r\n                  Pl: {{list.locator.place}}\r\n                </ng-container>\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 8%\" colspan=\"3\">\r\n                <h3 class=\"td-title\">Nomenclature</h3>\r\n                {{list.statistics.total_products_count}}\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 7%\" colspan=\"3\">\r\n                <h3 class=\"td-title\">Elements</h3>\r\n                {{list.statistics.total_products_quantity}}\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 8%\" colspan=\"3\">\r\n                <h3 class=\"td-title\">Nomenclature</h3>\r\n                {{list.statistics.not_processed_products_count}}\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 7%\" colspan=\"3\">\r\n                <h3 class=\"td-title\">Elements</h3>\r\n                {{list.statistics.not_processed_products_quantity}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"16\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"viewMode === viewModeType.HIERARCHY && !isShowFullStatistics\">\r\n      <div class=\"table-pagination-preloader tree-table\">\r\n        <p-treeTable\r\n          [value]=\"orderTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedOrderNode\"\r\n          [scrollHeight]=\"'calc(91.5vh - ' + tableScrollHeight + ')'\"\r\n          [scrollable]=\"true\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th rowspan=\"4\" style=\"width: 20%; padding-left: 1.625rem;\">Code</th>\r\n              <th rowspan=\"4\" style=\"width: 15%\">Name</th>\r\n              <th rowspan=\"4\" style=\"width: 10%\" class=\"text-center\">Date Of Creation</th>\r\n              <th rowspan=\"4\" style=\"width: 10%\" class=\"text-center\">Sets</th>\r\n              <th rowspan=\"4\" style=\"width: 15%\" class=\"bord-right text-center\" >Locator</th>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th colspan=\"6\" class=\"bord text-center dark-two bord-top\" style=\"width: 15%\">Total</th>\r\n              <th colspan=\"6\" class=\"bord text-center dark-two bord-top\" style=\"width: 15%\">Not Processed</th>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th colspan=\"3\" class=\"bord text-center dark-two\" style=\"width: 8%\">Nomenclature</th>\r\n              <th colspan=\"3\" class=\"bord text-center dark-two\" style=\"width: 7%\">Elements</th>\r\n              <th colspan=\"3\" class=\"bord text-center dark-two\" style=\"width: 8%\">Nomenclature</th>\r\n              <th colspan=\"3\" class=\"bord text-center dark-two\" style=\"width: 7%\">Elements</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr [ttRow]=\"rowNode\"\r\n                [ttSelectableRow]=\"rowNode\"\r\n                *ngIf=\"!rowData.hideFromTable\"\r\n                [class.deficit]=\"rowData.level === 4 && rowData.list.descendants_has_deficit_accepted\"\r\n                [class.free-products]=\"rowData.level === 4 && rowData.list.descendants_has_free_warehouse_products\"\r\n            >\r\n              <td style=\"width: 20%\">\r\n                <div class=\"toggle-row\">\r\n                  <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                  <span class=\"text-overflow\">\r\n                    <span [class.bold]=\"rowData.level < 4\">\r\n                        {{rowData.name}}\r\n                    </span>\r\n                    <span *ngIf=\"rowData.level === 4\">\r\n                      ({{rowData.list.id}}) {{rowData.list.nomenclature.code}}\r\n                    </span>\r\n                  </span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 15%\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.nomenclature.name}}\r\n                </span>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.created|date:'dd/MM/yyyy HH:mm'}}\r\n                </span>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.sets_number}}\r\n                </span>\r\n              </td>\r\n              <td style=\"width: 15%\">\r\n                  <span *ngIf=\"rowData.level === 4\">\r\n                      <div *ngIf=\"rowData.list.locator\">\r\n                        {{rowData.list.locator.name + ' '}} R: {{rowData.list.locator.row}} Col:\r\n                        {{rowData.list.locator.column}} Sh: {{rowData.list.locator.shelf}} Pl:\r\n                        {{rowData.list.locator.place}}\r\n                      </div>\r\n                  </span>\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 8%\" colspan=\"3\">\r\n                <ng-container *ngIf=\"rowData.level === 4\">\r\n                  <h3 class=\"td-title\">Nomenclature</h3>\r\n                  {{rowData.list.statistics.total_products_count}}\r\n                </ng-container>\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 7%\" colspan=\"3\">\r\n                <ng-container *ngIf=\"rowData.level === 4\">\r\n                  <h3 class=\"td-title\">Elements</h3>\r\n                  {{rowData.list.statistics.total_products_quantity}}\r\n                </ng-container>\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 8%\" colspan=\"3\">\r\n                <ng-container *ngIf=\"rowData.level === 4\">\r\n                  <h3 class=\"td-title\">Nomenclature</h3>\r\n                  {{rowData.list.statistics.not_processed_products_count}}\r\n                </ng-container>\r\n              </td>\r\n              <td class=\"text-center\" style=\"width: 7%\" colspan=\"3\">\r\n                <ng-container *ngIf=\"rowData.level === 4\">\r\n                  <h3 class=\"td-title\">Elements</h3>\r\n                  {{rowData.list.statistics.not_processed_products_quantity}}\r\n                </ng-container>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"17\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n\r\n    <ng-container *ngIf=\"viewMode === viewModeType.LIST && this.isShowFullStatistics\">\r\n      <div class=\"table-pagination-preloader full-statistics\">\r\n        <div class=\"table-pagination-preloader\">\r\n          <p-table\r\n            [value]=\"fullStatisticList\"\r\n            selectionMode=\"single\"\r\n            [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedList\"\r\n          >\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th\r\n                  style=\"min-width: 50px; max-width: 50px; border-right: none !important;\"\r\n                  class=\"text-center bord-none frozen-col-1\"\r\n                  rowspan=\"3\"\r\n                  pFrozenColumn\r\n                  alignFrozen=\"left\"\r\n                  [frozen]=\"true\"\r\n                >\r\n                  #\r\n                </th>\r\n                <th\r\n                  class=\"bord-none frozen-col-2\"\r\n                  rowspan=\"3\"\r\n                  pFrozenColumn\r\n                  alignFrozen=\"left\"\r\n                  [frozen]=\"true\"\r\n                  style=\"min-width: 200px; border-right: none !important;\"\r\n                >\r\n                  Code\r\n                </th>\r\n                <th\r\n                  style=\"min-width: 200px; border-right: none !important;\"\r\n                  rowspan=\"3\"\r\n                  pFrozenColumn\r\n                  alignFrozen=\"left\"\r\n                  [frozen]=\"true\"\r\n                  class=\"frozen-col-3\"\r\n                >\r\n                  Name\r\n                </th>\r\n\r\n                <th\r\n                  style=\"min-width: 150px; border-right: none !important;\"\r\n                  rowspan=\"3\"\r\n                  pFrozenColumn\r\n                  alignFrozen=\"left\"\r\n                  [frozen]=\"true\"\r\n                  class=\"bord frozen-col-4 text-center\"\r\n                >\r\n                  Date of Creation\r\n                </th>\r\n\r\n                <th colspan=\"2\" class=\"text-center\">Total</th>\r\n                <th colspan=\"2\" class=\"text-center\">Not Processed</th>\r\n\r\n                <th colspan=\"4\" class=\"text-center\">Total Items\\Parts</th>\r\n                <th colspan=\"4\" class=\"text-center\">Deficit Items\\Parts</th>\r\n                <th colspan=\"2\" class=\"text-center\">Outsoursing Items\\Parts</th>\r\n                <th colspan=\"2\" class=\"text-center\">Own Production Items\\Parts</th>\r\n                <th colspan=\"2\" class=\"text-center\">Procurement Items\\Parts</th>\r\n                <th colspan=\"2\" class=\"text-center\">Total Assemblies</th>\r\n                <th colspan=\"2\" class=\"text-center\">Deficit assemblies</th>\r\n                <th colspan=\"2\" class=\"text-center\">Outsourse assemblies</th>\r\n                <th colspan=\"2\" class=\"text-center\">Own Production Assemblies\r\n                </th>\r\n                <th colspan=\"2\" class=\"text-center\" style=\"border-right: none !important;\">Not Collected Items\\Parts\r\n                </th>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th colspan=\"2\" class=\"text-center\">Purchased</th>\r\n                <th colspan=\"2\" class=\"text-center\">Manufactured</th>\r\n                <th colspan=\"2\" class=\"text-center\">Purchased</th>\r\n                <th colspan=\"2\" class=\"text-center\">Manufactured</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n                <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n                <th class=\"text-center\" rowspan=\"2\" style=\"border-right: none !important;\">Elements</th>\r\n              </tr>\r\n\r\n              <tr>\r\n                <th class=\"text-center\">Nomenclature</th>\r\n                <th class=\"text-center\">Elements</th>\r\n                <th class=\"text-center\">Nomenclature</th>\r\n                <th class=\"text-center\">Elements</th>\r\n                <th class=\"text-center\">Nomenclature</th>\r\n                <th class=\"text-center\">Elements</th>\r\n                <th class=\"text-center\">Nomenclature</th>\r\n                <th class=\"text-center\" style=\"border-right: 1px solid #dee2e6\">Elements</th>\r\n              </tr>\r\n            </ng-template>\r\n\r\n            <ng-template pTemplate=\"body\" let-list let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"list\">\r\n                <td\r\n                  pFrozenColumn\r\n                  alignFrozen=\"left\"\r\n                  [frozen]=\"true\"\r\n                  class=\"text-center frozen frozen-col-1\"\r\n                  style=\"min-width: 50px\"\r\n                >\r\n                  {{(this.searchForm.get('page').value - 1) * 10 + i + 1}}\r\n                </td>\r\n                <td\r\n                  class=\"frozen frozen-col-2\"\r\n                  style=\"min-width: 200px\"\r\n                  pFrozenColumn\r\n                  alignFrozen=\"left\"\r\n                  [frozen]=\"true\"\r\n                >\r\n                  {{list.nomenclature.code}}\r\n                </td>\r\n                <td\r\n                  class=\"frozen frozen-col-3\"\r\n                  style=\"min-width: 200px\"\r\n                  pFrozenColumn\r\n                  alignFrozen=\"left\"\r\n                  [frozen]=\"true\"\r\n                >\r\n                  {{list.nomenclature.name}}\r\n                </td>\r\n\r\n                <td\r\n                  class=\"td-bord frozen frozen-col-4 text-center\"\r\n                  style=\"min-width: 200px\"\r\n                  pFrozenColumn\r\n                  alignFrozen=\"left\"\r\n                  [frozen]=\"true\"\r\n                >\r\n                  {{list.created | date:'dd/MM/yyyy HH:mm'}}\r\n                </td>\r\n\r\n                <td class=\"text-center\">\r\n                  {{list.full_statistics.total_products_count}}\r\n                </td>\r\n                <td class=\"text-center\">\r\n                  {{list.full_statistics.total_products_quantity}}\r\n                </td>\r\n                <td class=\"text-center\">\r\n                  {{list.statistics.not_processed_products_count}}\r\n                </td>\r\n                <td class=\"text-center\">\r\n                  {{list.statistics.not_processed_products_quantity}}\r\n                </td>\r\n\r\n                <td class=\"text-center\">{{list.full_statistics.total_purchased_count}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.total_purchased_quantity}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.total_manufactured_count}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.total_manufactured_quantity}}</td>\r\n\r\n                <td class=\"text-center\">{{list.full_statistics.deficit_purchased_count}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.deficit_purchased_quantity}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.deficit_manufactured_count}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.deficit_manufactured_quantity}}</td>\r\n                <td class=\"text-center\">\r\n                  <a (click)=\"onShowStatisticsForChains(list.id, 'outsource', 'not assembly')\">\r\n                    {{list.full_statistics.not_assembly_outsource_production_count}}\r\n                  </a>\r\n                </td>\r\n                <td class=\"text-center\">{{list.full_statistics.not_assembly_outsource_production_quantity}}</td>\r\n                <td class=\"text-center\">\r\n                  <a (click)=\"onShowStatisticsForChains(list.id, 'own', 'not assembly')\">\r\n                    {{list.full_statistics.not_assembly_own_production_count}}\r\n                  </a>\r\n                </td>\r\n                <td class=\"text-center\">{{list.full_statistics.not_assembly_own_production_quantity}}</td>\r\n                <td class=\"text-center\">\r\n                  <a (click)=\"onShowStatisticsForChains(list.id, 'purchased')\">\r\n                    {{list.full_statistics.ordered_purchased_count}}\r\n                  </a>\r\n                </td>\r\n                <td class=\"text-center\">{{list.full_statistics.ordered_purchased_quantity}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.total_assembly_count}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.total_assembly_quantity}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.deficit_assembly_count}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.deficit_assembly_quantity}}</td>\r\n                <td class=\"text-center\">\r\n                  <a (click)=\"onShowStatisticsForChains(list.id, 'outsource', 'assembly')\">\r\n                    {{list.full_statistics.outsource_assembly_count}}\r\n                  </a>\r\n                </td>\r\n                <td class=\"text-center\">{{list.full_statistics.outsource_assembly_quantity}}</td>\r\n                <td class=\"text-center\">\r\n                  <a (click)=\"onShowStatisticsForChains(list.id, 'own', 'assembly')\">\r\n                    {{list.full_statistics.own_production_assembly_count}}\r\n                  </a>\r\n                </td>\r\n                <td class=\"text-center\">{{list.full_statistics.own_production_assembly_quantity}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.total_not_collected_products_count}}</td>\r\n                <td class=\"text-center\">{{list.full_statistics.total_not_collected_products_quantity}}</td>\r\n              </tr>\r\n            </ng-template>\r\n\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"32\">\r\n                  <span>No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </p-table>\r\n          <div class=\"pagination-preloader pagination-preloader_bord pagination-preloader-full\"\r\n               *ngIf=\"isLoadingFullStatistic\">\r\n            <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"viewMode === viewModeType.HIERARCHY && isShowFullStatistics\">\r\n      <div class=\"table-pagination-preloader tree-table-statistics tree-table\">\r\n        <p-treeTable\r\n          [value]=\"fullOrderTree\"\r\n          selectionMode=\"single\"\r\n          [scrollHeight]=\"'calc(88vh - ' + tableScrollHeight + ')'\"\r\n          [scrollable]=\"true\"\r\n          [(selection)]=\"selectedOrderNode\"\r\n        >\r\n          <ng-template pTemplate=\"colgroup\" let-columns>\r\n            <colgroup>\r\n              <col style=\"width:300px\">\r\n              <col style=\"width:250px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n              <col style=\"width:150px\">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th rowspan=\"3\" style=\"padding-left: 1.625rem; border-right: none !important\" class=\"tree-frozen-col-1\">Code</th>\r\n              <th rowspan=\"3\" class=\"tree-frozen-col-2\" style=\"border-right: none !important\">Name</th>\r\n              <th rowspan=\"3\" class=\"tree-frozen-col-3\" style=\"border-right: none !important\">Date Of Creation</th>\r\n\r\n              <th colspan=\"2\" class=\"text-center\">Total</th>\r\n              <th colspan=\"2\" class=\"text-center\">Not Processed</th>\r\n\r\n              <th colspan=\"4\" class=\"text-center\">Total Items\\Parts</th>\r\n              <th colspan=\"4\" class=\"text-center\">Deficit Items\\Parts</th>\r\n              <th colspan=\"2\" class=\"text-center\">Outsoursing Items\\Parts</th>\r\n              <th colspan=\"2\" class=\"text-center\">Own Production Items\\Parts</th>\r\n              <th colspan=\"2\" class=\"text-center\">Procurement Items\\Parts</th>\r\n              <th colspan=\"2\" class=\"text-center\">Total Assemblies</th>\r\n              <th colspan=\"2\" class=\"text-center\">Deficit assemblies</th>\r\n              <th colspan=\"2\" class=\"text-center\">Outsourse assemblies</th>\r\n              <th colspan=\"2\" class=\"text-center\" style=\"border-right: none !important;\">Own Production Assemblies\r\n              </th>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n              <th colspan=\"2\" class=\"text-center\">Purchased</th>\r\n              <th colspan=\"2\" class=\"text-center\">Manufactured</th>\r\n              <th colspan=\"2\" class=\"text-center\">Purchased</th>\r\n              <th colspan=\"2\" class=\"text-center\">Manufactured</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Elements</th>\r\n              <th class=\"text-center\" rowspan=\"2\">Nomenclature</th>\r\n              <th class=\"text-center\" rowspan=\"2\" style=\"border-right: none !important;\">Elements</th>\r\n            </tr>\r\n\r\n            <tr>\r\n              <th class=\"text-center\">Nomenclature</th>\r\n              <th class=\"text-center\">Elements</th>\r\n              <th class=\"text-center\">Nomenclature</th>\r\n              <th class=\"text-center\">Elements</th>\r\n              <th class=\"text-center\">Nomenclature</th>\r\n              <th class=\"text-center\">Elements</th>\r\n              <th class=\"text-center\">Nomenclature</th>\r\n              <th class=\"text-center\">Elements</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr\r\n              [ttRow]=\"rowNode\"\r\n              [ttSelectableRow]=\"rowNode\"\r\n              *ngIf=\"!rowData.hideFromTable\"\r\n            >\r\n              <td class=\"tree-frozen-col-1 tree-td\">\r\n                  <div class=\"toggle-row\">\r\n                    <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                    <span class=\"text-overflow\">\r\n                    <span [class.bold]=\"rowData.level < 4\">\r\n                      {{rowData.name}}\r\n                  </span>\r\n                    <span *ngIf=\"rowData.level === 4\">\r\n                    ({{rowData.list.id}}) {{rowData.list.nomenclature.code}}\r\n                  </span>\r\n                    </span>\r\n                  </div>\r\n              </td>\r\n              <td class=\"tree-frozen-col-2 tree-td\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.nomenclature.name}}\r\n                </span>\r\n              </td>\r\n              <td class=\"tree-frozen-col-3 tree-td\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.created | date:'dd/MM/yyyy HH:mm'}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                  <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.total_products_count}}\r\n                  </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.total_products_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.statistics.not_processed_products_count}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.statistics.not_processed_products_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.total_purchased_count}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.total_purchased_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.total_manufactured_count}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.total_manufactured_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.deficit_purchased_count}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.deficit_purchased_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.deficit_manufactured_count}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.deficit_manufactured_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                  <a (click)=\"onShowStatisticsForChains(rowData.list.id, 'outsource', 'not assembly')\">\r\n                    {{rowData.list.full_statistics.not_assembly_outsource_production_count}}\r\n                  </a>\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.not_assembly_outsource_production_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    <a (click)=\"onShowStatisticsForChains(rowData.list.id, 'own', 'not assembly')\">\r\n                    {{rowData.list.full_statistics.not_assembly_own_production_count}}\r\n                  </a>\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.not_assembly_own_production_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    <a (click)=\"onShowStatisticsForChains(rowData.list.id, 'purchased')\">\r\n                    {{rowData.list.full_statistics.ordered_purchased_count}}\r\n                  </a>\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.ordered_purchased_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.total_assembly_count}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.total_assembly_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.deficit_assembly_count}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.deficit_assembly_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    <a (click)=\"onShowStatisticsForChains(rowData.list.id, 'outsource', 'assembly')\">\r\n                    {{rowData.list.full_statistics.outsource_assembly_count}}\r\n                  </a>\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.outsource_assembly_quantity}}\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    <a (click)=\"onShowStatisticsForChains(rowData.list.id, 'own', 'assembly')\">\r\n                    {{rowData.list.full_statistics.own_production_assembly_count}}\r\n                  </a>\r\n                </span>\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                    {{rowData.list.full_statistics.own_production_assembly_quantity}}\r\n                </span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"32\">\r\n                <span>No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoadingFullStatistic\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <div\r\n      class=\"paginator-wrapper\"\r\n      *ngIf=\"!isShowAll\"\r\n      [class.hide]=\"lists.length === 0 || (isShowFullStatistics && isLoadingFullStatistic)\"\r\n    >\r\n      <p-paginator\r\n        #paginator\r\n        [rows]=\"10\"\r\n        [totalRecords]=\"count\"\r\n        (onPageChange)=\"paginate($event)\"\r\n      >\r\n      </p-paginator>\r\n      <p-button\r\n        (click)=\"onShowAll()\"\r\n        class=\"paginator-all\"\r\n        type=\"button\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        All\r\n      </p-button>\r\n    </div>\r\n\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowPartial()\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #actionButtons>\r\n  <div class=\"action-buttons\">\r\n    <ng-container *ngIf=\"viewMode === viewModeType.HIERARCHY\">\r\n      <button\r\n        [disabled]=\"!selectedOrderNode || selectedOrderNode?.children.length === 0\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-down\"\r\n        label=\"Expand\"\r\n        class=\"ml-auto mr-2\"\r\n        (click)=\"expandCollapse(selectedOrderNode, true)\"\r\n      ></button>\r\n      <button\r\n        [disabled]=\"!selectedOrderNode || selectedOrderNode?.children.length === 0\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-up\"\r\n        class=\"mr-2\"\r\n        label=\"Collapse\"\r\n        (click)=\"expandCollapse(selectedOrderNode, false)\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-down\"\r\n        label=\"Expand All\"\r\n        class=\"mr-2\"\r\n        (click)=\"expandCollapseAllOrders()\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-up\"\r\n        class=\"mr-2\"\r\n        label=\"Collapse All\"\r\n        (click)=\"expandCollapseAllOrders(false)\"\r\n      ></button>\r\n      <button\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-chart-bar\"\r\n        [label]=\"(isShowFullStatistics ? 'Hide ' : 'Show') + ' Full Statistic'\"\r\n        (click)=\"onShowFullStatistics()\"\r\n        [disabled]=\"isLoading || isLoadingFullStatistic\"\r\n      >\r\n      </button>\r\n<!--      <a-->\r\n<!--        class=\"mr-2\"-->\r\n<!--        [class.disabled]=\"!selectedOrderNode\"-->\r\n<!--        [routerLink]=\"[selectedOrderNode?.data?.list?.id]\"-->\r\n<!--        target=\"_blank\"-->\r\n<!--        pButton-->\r\n<!--        type=\"button\"-->\r\n<!--        icon=\"pi pi-bars\"-->\r\n<!--        label=\"Production List\"-->\r\n<!--      >-->\r\n<!--      </a>-->\r\n<!--      <button-->\r\n<!--        class=\"mr-2\"-->\r\n<!--        pButton-->\r\n<!--        type=\"button\"-->\r\n<!--        icon=\"pi pi-angle-double-right\"-->\r\n<!--        label=\"Set List Locator\"-->\r\n<!--        (click)=\"onSetListLocatorNode()\"-->\r\n<!--        [disabled]=\"!selectedOrderNode\"-->\r\n<!--      >-->\r\n<!--      </button>-->\r\n<!--      <button-->\r\n<!--        class=\"mt-auto\"-->\r\n<!--        pButton-->\r\n<!--        type=\"button\"-->\r\n<!--        icon=\"pi pi-angle-double-right\"-->\r\n<!--        label=\"Go To Plan\"-->\r\n<!--        (click)=\"goToPlanNode()\"-->\r\n<!--        [disabled]=\"!selectedOrderNode\"-->\r\n<!--      >-->\r\n<!--      </button>-->\r\n\r\n      <p-menubar [model]=\"menuItemsNode\" [class.disabled]=\"!selectedOrderNode || selectedOrderNode.children.length > 0\"></p-menubar>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"viewMode === viewModeType.LIST\">\r\n      <button\r\n        class=\"ml-auto mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-chart-bar\"\r\n        [label]=\"(isShowFullStatistics ? 'Hide ' : 'Show') + ' Full Statistic'\"\r\n        (click)=\"onShowFullStatistics()\"\r\n        [disabled]=\"isLoading || isLoadingFullStatistic\"\r\n      >\r\n      </button>\r\n<!--      <a-->\r\n<!--        class=\"mr-2\"-->\r\n<!--        [class.disabled]=\"!selectedList\"-->\r\n<!--        [routerLink]=\"[selectedList?.id]\"-->\r\n<!--        target=\"_blank\"-->\r\n<!--        pButton-->\r\n<!--        type=\"button\"-->\r\n<!--        icon=\"pi pi-bars\"-->\r\n<!--        label=\"Production List\"-->\r\n<!--      >-->\r\n<!--      </a>-->\r\n<!--      <button-->\r\n<!--        class=\"mt-auto mr-2\"-->\r\n<!--        pButton-->\r\n<!--        type=\"button\"-->\r\n<!--        icon=\"pi pi-angle-double-right\"-->\r\n<!--        label=\"Set List Locator\"-->\r\n<!--        (click)=\"onSetListLocator()\"-->\r\n<!--        [disabled]=\"!selectedList\"-->\r\n<!--      >-->\r\n<!--      </button>-->\r\n<!--      <button-->\r\n<!--        class=\"mt-auto\"-->\r\n<!--        pButton-->\r\n<!--        type=\"button\"-->\r\n<!--        icon=\"pi pi-angle-double-right\"-->\r\n<!--        label=\"Go To Plan\"-->\r\n<!--        (click)=\"goToPlan()\"-->\r\n<!--        [disabled]=\"!selectedList\"-->\r\n<!--      >-->\r\n<!--      </button>-->\r\n      <p-menubar [model]=\"menuItems\" [class.disabled]=\"!selectedList\"></p-menubar>\r\n    </ng-container>\r\n  </div>\r\n</ng-template>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {cloneDeep} from 'lodash-es';\r\nimport {finalize, Subject, takeUntil} from 'rxjs';\r\nimport {TreeService} from '@shared/services/tree.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-categories',\r\n  templateUrl: './warehouse-categories.component.html',\r\n  styleUrls: ['./warehouse-categories.component.scss']\r\n})\r\nexport class WarehouseCategoriesComponent implements OnInit, OnDestroy {\r\n\r\n  menuItems: MenuItem[] = [\r\n    {\r\n      label: 'Selected Category',\r\n      items: [\r\n        {\r\n          label: 'Edit',\r\n          icon: 'pi pi-pencil',\r\n          command: () => this.onEditCategory()\r\n        },\r\n        {\r\n          label: 'Remove',\r\n          icon: 'pi pi-trash',\r\n          command: () => this.onRemoveCategory()\r\n        }\r\n      ]\r\n    }\r\n  ];\r\n\r\n  isMovingUp = false;\r\n  isMovingDown = false;\r\n  isLoading = true;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  categoriesTree: TreeNode<Category>[];\r\n  selectedCategory: TreeNode<Category>;\r\n  categories: Category[] = [];\r\n  expanseMap = {};\r\n\r\n  constructor(\r\n    private categoriesService: CategoriesService,\r\n    private readonly treeService: TreeService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getCategories();\r\n  }\r\n\r\n  getCategories() {\r\n    this.categoriesService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(categories => {\r\n      this.categories = categories;\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onAddCategory() {\r\n    this.categoriesService.createEditWarehouseCategoryModal('create').subscribe(category => {\r\n      if (category) {\r\n        this.categories.unshift(category);\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditCategory() {\r\n    this.categoriesService.createEditWarehouseCategoryModal('edit', this.selectedCategory.data).subscribe(category => {\r\n      if (category) {\r\n        const index = this.categories.findIndex(t => t.id === this.selectedCategory.data.id);\r\n        this.categories[index] = category;\r\n        this.createTree();\r\n        this.selectedCategory = this.treeService.findSelectedNode(this.selectedCategory, this.categoriesTree);\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveCategory() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.categoriesService.delete(this.selectedCategory.data).subscribe(() => {\r\n          const index = this.categories.findIndex(t => t.id === this.selectedCategory.data.id);\r\n          this.categories.splice(index, 1);\r\n          this.selectedCategory = null;\r\n          this.createTree();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.categoriesTree) {\r\n      this.treeService.mapExpansion(this.categoriesTree, this.expanseMap);\r\n    }\r\n\r\n    this.categoriesTree = this.treeService.createTree(this.categories, this.expanseMap);\r\n  }\r\n\r\n  getMeasure(measure) {\r\n    if (measure != null) {\r\n      return measure.name + ' (' + measure.symbol + ')';\r\n    } else {\r\n      return '_';\r\n    }\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  down() {\r\n    const node = this.selectedCategory;\r\n\r\n    const index = this.findIndexToMove(node.data.id);\r\n\r\n    if ((index < node.parent?.children.length - 1 || (!node.parent && index < this.categoriesTree.length - 1)) && !this.isMovingDown) {\r\n      this.isMovingDown = true;\r\n      const move = {\r\n        parent: node.parent ? node.parent.children[index + 1].data.id : this.categoriesTree[index + 1].data.id,\r\n        move_to: 'right'\r\n      };\r\n      this.categoriesService.move(move, node.data.id).pipe(\r\n        finalize(() => this.isMovingDown = false)\r\n      ).subscribe(category => {\r\n        const index = this.categories.findIndex(c => c.id === node.data.id);\r\n        this.categories[index] = category;\r\n\r\n        this.productMoved(category, 'down');\r\n      });\r\n    }\r\n  }\r\n\r\n  up() {\r\n    const node = this.selectedCategory;\r\n    const index = this.findIndexToMove(node.data.id);\r\n\r\n    if (index > 0 && !this.isMovingUp) {\r\n      this.isMovingUp = true;\r\n      const move = {\r\n        parent: node.parent ? node.parent.children[index - 1].data.id : this.categoriesTree[index - 1].data.id,\r\n        move_to: 'left'\r\n      };\r\n      this.categoriesService.move(move, node.data.id).pipe(\r\n        finalize(() => this.isMovingUp = false)\r\n      ).subscribe(category => {\r\n        const index = this.categories.findIndex(c => c.id === node.data.id);\r\n        this.categories[index] = category;\r\n\r\n        this.productMoved(category, 'up');\r\n      });\r\n    }\r\n  }\r\n\r\n  findIndexToMove(selectedNodeId) {\r\n    let index;\r\n\r\n    const find = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach((node, i) => {\r\n        if (node.data.id === selectedNodeId) {\r\n          index = i;\r\n          return;\r\n        } else {\r\n          find(node.children);\r\n        }\r\n      });\r\n    };\r\n\r\n    find(this.categoriesTree);\r\n    return index;\r\n  }\r\n\r\n  productMoved(category: Category, direction: 'up' | 'down') {\r\n    let findedProduct: TreeNode<Category>;\r\n    let parentProduct: TreeNode<Category>;\r\n\r\n    const findProduct = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach(node => {\r\n        if (node.data.id === category.id) {\r\n          findedProduct = node;\r\n        } else {\r\n          if (node.children && node.children.length > 0) {\r\n            findProduct(node.children);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    const findParent = (nodes: TreeNode<Category>[]) => {\r\n      nodes.forEach(node => {\r\n        if (node.data.id === findedProduct.parent.data.id) {\r\n          parentProduct = node;\r\n        } else {\r\n          if (node.children && node.children.length > 0) {\r\n            findParent(node.children);\r\n          }\r\n        }\r\n      });\r\n    };\r\n\r\n    findProduct(this.categoriesTree);\r\n\r\n    if (findedProduct.parent) {\r\n      findParent(this.categoriesTree);\r\n    } else {\r\n      parentProduct = findedProduct;\r\n    }\r\n\r\n    if (findedProduct.parent) {\r\n      const index = parentProduct.children.findIndex(child => child.data.id === category.id);\r\n\r\n      if (direction === 'down') {\r\n        [parentProduct.children[index], parentProduct.children[index + 1]] = [parentProduct.children[index + 1], parentProduct.children[index]];\r\n      } else {\r\n        [parentProduct.children[index], parentProduct.children[index - 1]] = [parentProduct.children[index - 1], parentProduct.children[index]];\r\n      }\r\n    } else {\r\n      const index = this.categoriesTree.findIndex(node => node.data.id === category.id);\r\n\r\n      if (direction === 'down') {\r\n        [this.categoriesTree[index], this.categoriesTree[index + 1]] = [this.categoriesTree[index + 1], this.categoriesTree[index]];\r\n      } else {\r\n        [this.categoriesTree[index], this.categoriesTree[index - 1]] = [this.categoriesTree[index - 1], this.categoriesTree[index]];\r\n      }\r\n    }\r\n\r\n    this.categoriesTree = this.categoriesTree.map(node => node);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Warehouse Categories</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Category\" (click)=\"onAddCategory()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-treeTable\r\n        [value]=\"categoriesTree\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selectedCategory\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 19.2rem)\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex align-items-center\">\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-arrow-up\"\r\n              class=\"p-button-rounded mr-2\"\r\n              [disabled]=\"!selectedCategory\"\r\n              [loading]=\"isMovingUp\"\r\n              (click)=\"up()\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-arrow-down\"\r\n              class=\"p-button-rounded mr-2\"\r\n              [disabled]=\"!selectedCategory\"\r\n              [loading]=\"isMovingDown\"\r\n              (click)=\"down()\"\r\n            ></button>\r\n            <p class=\"ml-1 subtitle\" *ngIf=\"!selectedCategory\">Choose the Category to edit</p>\r\n            <p-menubar\r\n              class=\"product-structure-bar ml-auto mr-2\"\r\n              [model]=\"menuItems\"\r\n              [class.disabled]=\"!selectedCategory\"\r\n            ></p-menubar>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-angle-down\"\r\n              label=\"Expand All\"\r\n              class=\"mr-2\"\r\n              (click)=\"onExpandAll()\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-angle-up\"\r\n              label=\"Collapse All\"\r\n              (click)=\"onCollapseAll()\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"padding-left: 52px; width: 40%\">Name</th>\r\n            <th style=\"width: 35%\" class=\"text-center\">Unit of Measure</th>\r\n            <th style=\"width: 35%\">Description</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n          <tr [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\">\r\n            <td style=\"width: 40%\">\r\n              <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n              {{rowData.name}}\r\n            </td>\r\n            <td style=\"width: 35%\" class=\"text-center\">\r\n              {{getMeasure(rowData.unit_of_measure)}}\r\n            </td>\r\n            <td style=\"width: 35%\">\r\n              <ng-container>\r\n                {{rowData.description}}\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-treeTable>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {InvoiceProduct} from '../../../../../procurement/models/invoice-product';\r\nimport {map, switchMap, take, tap} from 'rxjs/operators';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {InvoiceProductService} from '../../../../../procurement/services/invoice-product.service';\r\nimport {InvoiceService} from '../../../../../procurement/services/invoice.service';\r\nimport {OrderTechnicalEquipment} from '../../../../models/order-technical-equipment';\r\nimport {TechnicalEquipmentsInUseService} from '../../../../services/technical-equipments-in-use.service';\r\nimport {OrderTechnicalEquipmentsService} from '../../../../services/order-technical-equipments.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-isolator-invoices',\r\n  templateUrl: './warehouse-isolator-invoices.component.html',\r\n  styleUrls: ['./warehouse-isolator-invoices.component.scss']\r\n})\r\nexport class WarehouseIsolatorInvoicesComponent implements OnInit, OnDestroy {\r\n  invoiceId: number;\r\n  isLoading = true;\r\n  invoiceProducts: InvoiceProduct[] = [];\r\n\r\n  orderId: number;\r\n  orderTechnicalEquipments: OrderTechnicalEquipment[] = [];\r\n  isLoadingTechnicalEquipment = true;\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly route: ActivatedRoute,\r\n    private readonly invoiceProductService: InvoiceProductService,\r\n    private readonly invoiceService: InvoiceService,\r\n    private orderTechnicalEquipmentsService: OrderTechnicalEquipmentsService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(invoiceId => {\r\n      this.invoiceId = +invoiceId;\r\n      this.loadInvoiceProducts();\r\n      this.getInvoiceInfo();\r\n    });\r\n  }\r\n\r\n  loadInvoiceProducts() {\r\n    this.invoiceProductService.get(\r\n      [\r\n        {name: 'invoice', value: this.invoiceId},\r\n        {name: 'not_passed_quantity__gt', value: 0}\r\n      ]\r\n    ).pipe(takeUntil(this.destroy$)).subscribe(invoiceProducts => {\r\n      this.invoiceProducts = invoiceProducts;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getInvoiceInfo() {\r\n    this.invoiceService.getById(this.invoiceId).subscribe(invoice => {\r\n      if (invoice.order.id) {\r\n        this.orderId = invoice.order.id;\r\n        this.getOrderTechnicalEquipments();\r\n      }\r\n    });\r\n  }\r\n\r\n  getOrderTechnicalEquipments() {\r\n    this.orderTechnicalEquipmentsService.get([\r\n      {name: 'order', value: this.orderId},\r\n      {name: 'not_passed_quantity__gt', value: 0},\r\n    ]).pipe(take(1), takeUntil(this.destroy$)).subscribe(technicalEquipments => {\r\n      this.orderTechnicalEquipments = technicalEquipments;\r\n      this.isLoadingTechnicalEquipment = false;\r\n    });\r\n  }\r\n\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Invoice Isolator Items</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"invoiceProducts.length > 0\"\r\n        [rows]=\"10\"\r\n        [value]=\"invoiceProducts\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"mt-1\"></div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 35%\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Passed</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Not Passed</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 35%\">{{product.nomenclature.name}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.quantity}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.passed_quantity}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.not_passed_quantity}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && invoiceProducts.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt2\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"orderTechnicalEquipments.length > 0\"\r\n        [rows]=\"10\"\r\n        [value]=\"orderTechnicalEquipments\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"mt-1\"></div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 35%\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Passed</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Not Passed</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 35%\">{{product.nomenclature.name}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.quantity}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.passed_quantity}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.not_passed_quantity}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt2.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt2.paginator && !isLoading && orderTechnicalEquipments.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt2.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {InvoiceProduct} from '../../../../../procurement/models/invoice-product';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {InvoiceProductService} from '../../../../../procurement/services/invoice-product.service';\r\nimport {map, switchMap, take} from 'rxjs/operators';\r\nimport {OrderProduct} from '../../../../../procurement/models/order-product';\r\nimport {OrderProductService} from '../../../../../procurement/services/order-product.service';\r\nimport {OrderTechnicalEquipment} from '../../../../models/order-technical-equipment';\r\nimport {OrderTechnicalEquipmentsService} from '../../../../services/order-technical-equipments.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-isolator-orders',\r\n  templateUrl: './warehouse-isolator-orders.component.html',\r\n  styleUrls: ['./warehouse-isolator-orders.component.scss']\r\n})\r\nexport class WarehouseIsolatorOrdersComponent implements OnInit, OnDestroy {\r\n\r\n  isLoading = true;\r\n  orderProducts: OrderProduct[] = [];\r\n  technicalEquipments: OrderTechnicalEquipment[] = [];\r\n  isLoadingTechnicalEquipment = true;\r\n  private destroy$ = new Subject();\r\n\r\n  orderId: number;\r\n\r\n  constructor(\r\n    private readonly route: ActivatedRoute,\r\n    private readonly orderProductService: OrderProductService,\r\n    private orderTechnicalEquipmentsService: OrderTechnicalEquipmentsService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(orderId => {\r\n      this.orderId = +orderId;\r\n      this.loadIsolatedProducts();\r\n      this.getOrderTechnicalEquipments();\r\n    });\r\n  }\r\n\r\n  loadIsolatedProducts() {\r\n    this.orderProductService.get(\r\n      [\r\n        {name: 'not_passed_quantity__gt', value: '0'},\r\n        {name: 'order', value: this.orderId}\r\n      ]\r\n    ).pipe(takeUntil(this.destroy$)).subscribe(orderProducts => {\r\n      this.orderProducts = orderProducts;\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  getOrderTechnicalEquipments() {\r\n    this.orderTechnicalEquipmentsService.get([\r\n      {name: 'order', value: this.orderId},\r\n      {name: 'not_passed_quantity__gt', value: 0},\r\n    ]).pipe(take(1), takeUntil(this.destroy$)).subscribe(technicalEquipments => {\r\n      this.technicalEquipments = technicalEquipments;\r\n      this.isLoadingTechnicalEquipment = false;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Order Isolator Items</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <h2 class=\"page__caption\">Ordered Items</h2>\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"orderProducts.length > 0\"\r\n        [rows]=\"10\"\r\n        [value]=\"orderProducts\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"mt-1\"></div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 35%\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Passed</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Not Passed</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 35%\">{{product.nomenclature.name}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.quantity}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.passed_quantity}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.not_passed_quantity}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && orderProducts.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <h2 class=\"page__caption\">Technical Equipment</h2>\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt2\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"technicalEquipments.length > 0\"\r\n        [rows]=\"10\"\r\n        [value]=\"technicalEquipments\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"mt-1\"></div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 35%\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Passed</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Not Passed</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 35%\">{{product.nomenclature.name}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.quantity}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.passed_quantity}}</td>\r\n            <td class=\"text-center\" style=\"width: 20%\">{{product.not_passed_quantity}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoadingTechnicalEquipment\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoadingTechnicalEquipment\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt2.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt2.paginator && !isLoadingTechnicalEquipment && technicalEquipments.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt2.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {Invoice} from '../../../procurement/models/invoice';\r\nimport {InvoiceService} from '../../../procurement/services/invoice.service';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-isolator',\r\n  templateUrl: './warehouse-isolator.component.html',\r\n  styleUrls: ['./warehouse-isolator.component.scss']\r\n})\r\nexport class WarehouseIsolatorComponent implements OnInit, OnDestroy {\r\n  isLoadingInvoices = true;\r\n  isLoadingOrders = true;\r\n\r\n  invoices: Invoice[] = [];\r\n  orders: Order[] = [];\r\n\r\n  selectedInvoice: Invoice;\r\n  selectedOrder: Order;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private invoiceService: InvoiceService,\r\n    private orderService: OrderService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getInvoices();\r\n    this.getOrders();\r\n  }\r\n\r\n  getInvoices() {\r\n    this.invoiceService.get([{name: 'contains_isolated_products', value: true}]).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(invoices => {\r\n      this.invoices = invoices;\r\n      this.isLoadingInvoices = false;\r\n    });\r\n  }\r\n\r\n  getOrders() {\r\n    this.orderService.get([{name: 'contains_isolated_products', value: true}]).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(orders => {\r\n      this.orders = orders;\r\n      this.isLoadingOrders = false;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Warehouse Isolator</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__tabs\">\r\n    <p-tabView class=\"custom-tabs\">\r\n      <p-tabPanel header=\"Invoices Isolator\" [selected]=\"true\">\r\n        <div class=\"page__table\">\r\n          <p-table\r\n            #dt\r\n            selectionMode=\"single\"\r\n            scrollHeight=\"calc(100vh - 18.8rem)\"\r\n            [scrollable]=\"true\"\r\n            [paginator]=\"invoices.length > 0\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedInvoice\"\r\n            [value]=\"invoices\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex\">\r\n                <p class=\"subtitle\" *ngIf=\"!selectedInvoice\">Choose the Invoice to view Items</p>\r\n                <button\r\n                  class=\"ml-auto\"\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi-bars\"\r\n                  label=\"Isolator Items\"\r\n                  [disabled]=\"!selectedInvoice\"\r\n                  [routerLink]=\"['invoices', selectedInvoice?.id]\"\r\n                ></button>\r\n              </div>\r\n            </ng-template>\r\n\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n                <th style=\"width: 20%\" class=\"text-center\">Date</th>\r\n                <th style=\"width: 25%\" class=\"text-center\">Invoice Number</th>\r\n                <th style=\"width: 25%\" class=\"text-center\">Order ID</th>\r\n                <th style=\"width: 25%\" class=\"text-center\">Supplier</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"invoice\">\r\n                <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n                <td style=\"width: 20%\" class=\"text-center\">{{invoice.system_creation_date | date:'dd/MM/yyyy'}}</td>\r\n                <td style=\"width: 25%\"\r\n                    class=\"text-center\">{{invoice.self_serial_number}} {{invoice.self_proforma_serial_number}}</td>\r\n                <td style=\"width: 25%\" class=\"text-center\">{{invoice.order?.id}}</td>\r\n                <td style=\"width: 25%\" class=\"text-center\">{{invoice.supplier?.name}}</td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                  <i *ngIf=\"isLoadingInvoices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingInvoices\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"paginatorright\">\r\n              <p-button\r\n                type=\"button\"\r\n                (click)=\"dt.paginator=false\"\r\n                styleClass=\"p-button-text\"\r\n              >All\r\n              </p-button>\r\n            </ng-template>\r\n          </p-table>\r\n        </div>\r\n        <div *ngIf=\"!dt.paginator && !isLoadingInvoices && invoices.length > 0\" class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=true\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </p-tabPanel>\r\n      <p-tabPanel header=\"Orders Isolator\">\r\n        <div class=\"page__table\">\r\n          <p-table\r\n            #st\r\n            selectionMode=\"single\"\r\n            scrollHeight=\"calc(100vh - 18.8rem)\"\r\n            [scrollable]=\"true\"\r\n            [paginator]=\"orders.length > 0\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedOrder\"\r\n            [value]=\"orders\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex\">\r\n                <p class=\"subtitle\" *ngIf=\"!selectedOrder\">Choose the Order to view Items</p>\r\n                <button\r\n                  class=\"ml-auto\"\r\n                  pButton\r\n                  type=\"button\"\r\n                  icon=\"pi pi-bars\"\r\n                  label=\"Isolator Items\"\r\n                  [disabled]=\"!selectedOrder\"\r\n                  [routerLink]=\"['orders', selectedOrder?.id]\"\r\n                ></button>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n                <th style=\"width: 20%\" class=\"text-center\">Date</th>\r\n                <th style=\"width: 25%\" class=\"text-center\">Order ID</th>\r\n                <th style=\"width: 25%\" class=\"text-center\">Root List</th>\r\n                <th style=\"width: 25%\" class=\"text-center\">Items Reception Date</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"order\">\r\n                <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n                <td style=\"width: 20%\" class=\"text-center\">{{order.created | date:'dd/MM/yyyy'}}</td>\r\n                <td style=\"width: 25%\" class=\"text-center\">{{order.id}}</td>\r\n                <td style=\"width: 25%\" class=\"text-center\">\r\n                  <ng-container *ngIf=\"order.root_production_list_products.length > 0\">\r\n                    {{order.root_production_list_products[0].nomenclature.code}}\r\n                    ~{{order.root_production_list_products[0].nomenclature.name}}\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 25%\" class=\"text-center\">{{order.items_reception_date | date: 'dd/MM/yyyy'}}</td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                  <i *ngIf=\"isLoadingOrders\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingOrders\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"paginatorright\">\r\n              <p-button\r\n                type=\"button\"\r\n                (click)=\"st.paginator=false\"\r\n                styleClass=\"p-button-text\"\r\n              >All\r\n              </p-button>\r\n            </ng-template>\r\n          </p-table>\r\n        </div>\r\n        <div *ngIf=\"!st.paginator && !isLoadingOrders && orders.length > 0\" class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"st.paginator=true\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </p-tabPanel>\r\n    </p-tabView>\r\n  </div>\r\n</div>\r\n","import {AfterViewInit, Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {WarehouseProduct} from '../../models/warehouse-product';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {fromEvent, Subject, takeUntil} from 'rxjs';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\nimport {WarehouseProductService} from '../../services/warehouse-product.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {environment} from '@env/environment';\r\nimport {QrCodeService} from '../../../qr-code/qr-code.service';\r\nimport {Technology} from '../../../product-structure/models/technology';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-items',\r\n  templateUrl: './warehouse-items.component.html',\r\n  styleUrls: ['./warehouse-items.component.scss', './warehouse-items.mobile.component.scss']\r\n})\r\nexport class WarehouseItemsComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n  @ViewChild('searchBoxDescription') searchBoxDescription;\r\n\r\n  tableScrollHeight = '29.75rem';\r\n\r\n  isHideFilters = false;\r\n  isShowAll = false;\r\n  isLoading = false;\r\n  isStartOnePage = false;\r\n\r\n  selectedProduct: WarehouseProduct;\r\n  products: WarehouseProduct[] = [];\r\n  countProducts: number = 0;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    code: [null],\r\n    description: [null],\r\n    warehouse: [null],\r\n    category: [null],\r\n    root_categories: [null],\r\n    locator: {value: null, disabled: true},\r\n    type: [null],\r\n    acceptedByInvoices: [null],\r\n    order_by_code: [null],\r\n    order_by_name: [null],\r\n    order_by_category: [null],\r\n    order_by_warehouse: [null],\r\n    order_by_locator: [null],\r\n    order_by_quantity: [null],\r\n    exclude_zero: [null],\r\n    exclude_empty: [null],\r\n    technologies: [null],\r\n    page: [1],\r\n  });\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n    {name: 'paginated', value: true},\r\n    {name: 'at_area', value: false}\r\n  ];\r\n\r\n  queryKey = 'name:null/code:null/description:null/type:null/acceptedByInvoices:null/warehouse:null/locator:null/category:null';\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  link = environment.link_url + 'dash/';\r\n  isGenerating = false;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly productCategoriesService: CategoriesService,\r\n    private readonly warehouseProductService: WarehouseProductService,\r\n    private readonly qrCodeService: QrCodeService,\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedProduct = null),\r\n        map(() => this.searchBoxName.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchProducts();\r\n    });\r\n\r\n    fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedProduct = null),\r\n        map(() => this.searchBoxCode.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchProducts();\r\n    });\r\n\r\n    fromEvent(this.searchBoxDescription.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedProduct = null),\r\n        map(() => this.searchBoxDescription.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchProducts();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    // this.getProductsForPagination();\r\n  }\r\n\r\n  getProductsForPagination() {\r\n    this.warehouseProductService.getGroupedPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(response => {\r\n      response.results.forEach((product: any, idx) => {\r\n        if (!product.nomenclature) {\r\n          product.nomenclature = {\r\n            id: product.nomenclature_id,\r\n            code: product.code,\r\n            name: product.name,\r\n            type: product.type,\r\n            category: product.category,\r\n            description: product.description,\r\n          };\r\n        }\r\n\r\n        product.checkedForGeneration = false;\r\n        product.uid = idx;\r\n      });\r\n\r\n      this.products = response.results;\r\n      this.countProducts = response.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getProducts() {\r\n    this.warehouseProductService.getGrouped(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(response => {\r\n      response.forEach((product: any, idx) => {\r\n        if (!product.nomenclature) {\r\n          product.nomenclature = {\r\n            id: product.nomenclature_id,\r\n            code: product.code,\r\n            name: product.name,\r\n            type: product.type,\r\n            category: product.category,\r\n            description: product.description,\r\n          };\r\n        }\r\n\r\n        product.checkedForGeneration = false;\r\n        product.uid = idx;\r\n      });\r\n\r\n      this.products = response;\r\n      this.countProducts = response.length;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  searchProducts() {\r\n    this.isLoading = true;\r\n    this.destroy$.next(true);\r\n    this.selectedProduct = null;\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}/description:${this.searchForm.get('description').value}/type:${this.searchForm.get('type').value}/acceptedByInvoices:${this.searchForm.get('acceptedByInvoices').value}/warehouse:${this.searchForm.get('warehouse').value}/locator:${this.searchForm.get('locator').value}/category:${this.searchForm.get('category').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query = [\r\n        {name: 'paginated', value: 'true'},\r\n        {name: 'page', value: this.searchForm.get('page').value},\r\n      ];\r\n    }\r\n\r\n    this.query.push({name: 'at_area', value: false});\r\n\r\n    if (this.searchForm.get('name').value) this.query.push({\r\n      name: 'name',\r\n      value: this.searchForm.get('name').value.replace(/\\+/g, '%2b')\r\n    });\r\n\r\n    if (this.searchForm.get('code').value) this.query.push(\r\n      {name: 'code', \r\n      value: this.searchForm.get('code').value.replace(/^\\s+/gm, '')\r\n    });\r\n\r\n    if (this.searchForm.get('description').value) this.query.push({\r\n      name: 'description',\r\n      value: this.searchForm.get('description').value\r\n    });\r\n\r\n    if (this.searchForm.get('type').value) this.query.push({name: 'type', value: this.searchForm.get('type').value});\r\n\r\n    if (this.searchForm.get('warehouse').value) this.query.push({\r\n      name: 'warehouse',\r\n      value: this.searchForm.get('warehouse').value\r\n    });\r\n\r\n    if (this.searchForm.get('locator').value) this.query.push({\r\n      name: 'locator',\r\n      value: this.searchForm.get('locator').value\r\n    });\r\n\r\n    if (this.searchForm.get('category').value) this.query.push({\r\n      name: 'category',\r\n      value: this.searchForm.get('category').value\r\n    });\r\n\r\n    if (this.searchForm.get('root_categories').value) this.query.push({\r\n      name: 'root_categories',\r\n      value: this.searchForm.get('root_categories').value\r\n    });\r\n\r\n    if (this.searchForm.get('acceptedByInvoices').value !== null) this.query.push({\r\n      name: 'accepted_by_invoices',\r\n      value: this.searchForm.get('acceptedByInvoices').value\r\n    });\r\n\r\n    if (this.searchForm.get('exclude_zero').value !== null) this.query.push({\r\n      name: 'exclude_zero',\r\n      value: this.searchForm.get('exclude_zero').value\r\n    });\r\n\r\n    if (this.searchForm.get('exclude_empty').value !== null) this.query.push({\r\n      name: 'exclude_empty',\r\n      value: this.searchForm.get('exclude_empty').value\r\n    });\r\n\r\n    if (this.searchForm.get('technologies').value !== null) this.query.push({\r\n      name: 'current_technologies',\r\n      value: this.searchForm.get('technologies').value\r\n    });\r\n\r\n    const ordering = this.prepareSortingField();\r\n    if (ordering) {\r\n      this.query.push({\r\n        name: 'ordering',\r\n        value: ordering\r\n      });\r\n    }\r\n\r\n    if (!this.isShowAll) {\r\n      this.getProductsForPagination();\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.getProducts();\r\n    }\r\n  }\r\n\r\n  onAddItem() {\r\n    this.warehouseProductService.openCreateEditWarehouseProductModal('create').subscribe(response => {\r\n      if (response) {\r\n        this.searchProducts();\r\n      }\r\n    });\r\n  }\r\n\r\n  selectWarehouse(warehouseId: number) {\r\n    let value = null;\r\n    if (warehouseId) value = warehouseId;\r\n    this.searchForm.get('warehouse').patchValue(value);\r\n    this.searchProducts();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchProducts();\r\n    }\r\n  }\r\n\r\n  onEditItem() {\r\n    this.warehouseProductService.openCreateEditWarehouseProductModal('edit', this.selectedProduct.nomenclature.id).subscribe(response => {\r\n      if (response) {\r\n        this.searchProducts();\r\n      }\r\n    });\r\n  }\r\n\r\n  onMoveProduct() {\r\n    this.warehouseProductService.openMoveWarehouseProductModal(this.selectedProduct).subscribe(response => {\r\n      if (response) {\r\n        this.searchProducts();\r\n      }\r\n    });\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.setTableScrollHeight();\r\n    this.searchProducts();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.setTableScrollHeight();\r\n    this.searchProducts();\r\n  }\r\n\r\n  onSelectLocator(id: number) {\r\n    this.searchForm.get('locator').patchValue(id);\r\n    this.searchProducts();\r\n  }\r\n\r\n  onSelectNomenclatureType(type: ENomenclatureType) {\r\n    this.searchForm.get('type').patchValue(type);\r\n    this.searchProducts();\r\n  }\r\n\r\n  onSelectAcceptedType(type: boolean) {\r\n    this.searchForm.get('acceptedByInvoices').patchValue(type);\r\n    this.searchProducts();\r\n  }\r\n\r\n\r\n  onSelectProductStructureCategory(ids: number[]) {\r\n    if (ids) {\r\n      this.searchForm.get('root_categories').patchValue(ids.join(','));\r\n    } else {\r\n      this.searchForm.get('root_categories').patchValue('');\r\n    }\r\n\r\n    this.searchProducts();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  toggleFilterVisibility() {\r\n    this.isHideFilters = !this.isHideFilters;\r\n\r\n    this.setTableScrollHeight();\r\n  }\r\n\r\n  onSelectCategory(category: Category) {\r\n    if (category) {\r\n      this.searchForm.get('category').patchValue(category.id);\r\n    } else {\r\n      this.searchForm.get('category').patchValue(null);\r\n    }\r\n\r\n    this.searchProducts();\r\n  }\r\n\r\n  setTableScrollHeight() {\r\n    if (this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '20.875rem';\r\n      return;\r\n    }\r\n\r\n    if (this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '18.25rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '27.5rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '29.75rem';\r\n      return;\r\n    }\r\n  }\r\n\r\n  showSerialsInfo() {\r\n    if (this.selectedProduct) {\r\n      this.warehouseProductService.openNomenclatureInfoModal(this.selectedProduct.extra_info, this.selectedProduct.nomenclature as Nomenclature).subscribe();\r\n    }\r\n  }\r\n\r\n  prepareSortingField(): string {\r\n    let sorting = '';\r\n    if (this.searchForm.get('order_by_code').value !== null) {\r\n      if (this.searchForm.get('order_by_code').value) {\r\n        sorting += '-nomenclature__code,';\r\n      } else {\r\n        sorting += 'nomenclature__code,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_name').value !== null) {\r\n      if (this.searchForm.get('order_by_name').value) {\r\n        sorting += '-nomenclature__name,';\r\n      } else {\r\n        sorting += 'nomenclature__name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_category').value !== null) {\r\n      if (this.searchForm.get('order_by_category').value) {\r\n        sorting += '-nomenclature__category__name,';\r\n      } else {\r\n        sorting += 'nomenclature__category__name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_warehouse').value !== null) {\r\n      if (this.searchForm.get('order_by_warehouse').value) {\r\n        sorting += '-locator__warehouse__name,';\r\n      } else {\r\n        sorting += 'locator__warehouse__name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_locator').value !== null) {\r\n      if (this.searchForm.get('order_by_locator').value) {\r\n        sorting += '-locator__name,';\r\n      } else {\r\n        sorting += 'locator__name,';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_quantity').value !== null) {\r\n      if (this.searchForm.get('order_by_quantity').value) {\r\n        sorting += '-total_locator_quantity,';\r\n      } else {\r\n        sorting += 'total_locator_quantity,';\r\n      }\r\n    }\r\n\r\n    return sorting;\r\n  }\r\n\r\n  showIsReserved(items: any[]) {\r\n    if (items) return items.some(i => i.reserved_by_opened_production_lists_quantity > 0)\r\n  }\r\n\r\n  sorting(value: boolean, field: string) {\r\n    this.resetAllSorting();\r\n    if (value === null) {\r\n      this.searchForm.get(field).patchValue(false);\r\n    } else if (value === false) {\r\n      this.searchForm.get(field).patchValue(true);\r\n    } else if (value === true) {\r\n      this.searchForm.get(field).patchValue(null);\r\n    }\r\n    this.searchProducts();\r\n  }\r\n\r\n  resetAllSorting() {\r\n    this.searchForm.get('order_by_code').setValue(null);\r\n    this.searchForm.get('order_by_name').setValue(null);\r\n    this.searchForm.get('order_by_category').setValue(null);\r\n    this.searchForm.get('order_by_warehouse').setValue(null);\r\n    this.searchForm.get('order_by_locator').setValue(null);\r\n    this.searchForm.get('order_by_quantity').setValue(null);\r\n  }\r\n\r\n  onGenerateQrCodes() {\r\n    // this.isGenerating = true;\r\n\r\n    const send = {\r\n      by_nomenclatures_list: [],\r\n    };\r\n\r\n    if (this.selectedProduct.nomenclature.bulk_or_serial !== '1') {\r\n      send.by_nomenclatures_list.push({\r\n        nomenclature_id: this.selectedProduct.nomenclature.id,\r\n        serial_number_ids: [],\r\n        order_product_ids: [],\r\n        invoice_product_ids: [],\r\n      });\r\n    } else {\r\n      send.by_nomenclatures_list.push({\r\n        nomenclature_id: this.selectedProduct.nomenclature.id,\r\n        serial_number_ids: this.selectedProduct.extra_info && this.selectedProduct.extra_info.length > 0 ? this.selectedProduct.extra_info.map(product => +product.serial_number_id) : [],\r\n        order_product_ids: [],\r\n        invoice_product_ids: [],\r\n      });\r\n    }\r\n\r\n    this.qrCodeService.generateQrCodes(send).subscribe(() => this.isGenerating = false);\r\n  }\r\n\r\n  isReservedDisable(): boolean {\r\n    return Boolean(this.selectedProduct[0]?.extra_info.reduce((sum, item) => sum += item.quantity, 0) === this.selectedProduct[0]?.extra_info.reduce((sum, item) => sum += item.reserved_by_opened_production_lists_quantity, 0));\r\n  }\r\n\r\n  onSelectedTechnologies(technologies: Technology[]) {\r\n    if (technologies) {\r\n      this.searchForm.get('technologies').patchValue(technologies.map(technology => technology.id));\r\n    } else {\r\n      this.searchForm.get('technologies').patchValue('');\r\n    }\r\n    this.searchProducts();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Warehouse Items</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        class=\"mr-2 p-button-icon\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-qrcode\"\r\n        label=\"Generate QR Codes\"\r\n        [loading]=\"isGenerating\"\r\n        (click)=\"onGenerateQrCodes()\"\r\n        [disabled]=\"!selectedProduct\"\r\n      >\r\n      </button>\r\n      <button\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-info-circle\"\r\n        label=\"Serial Info\"\r\n        [disabled]=\"!selectedProduct ||\r\n         selectedProduct?.nomenclature?.bulk_or_serial !== '1'\"\r\n        (click)=\"showSerialsInfo()\"\r\n      >\r\n      </button>\r\n      <button\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-double-right\"\r\n        label=\"Move\"\r\n        [disabled]=\"!selectedProduct ||\r\n         (!selectedProduct?.total_locator_quantity &&\r\n          !selectedProduct?.total_area_locator_quantity)\"\r\n        (click)=\"onMoveProduct()\"\r\n      >\r\n      </button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-pencil\"\r\n        class=\"mr-2\"\r\n        label=\"Edit Item\"\r\n        (click)=\"onEditItem()\"\r\n        [disabled]=\"!selectedProduct\"\r\n      ></button>\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Item\" (click)=\"onAddItem()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"warehouse-items\">\r\n      <div class=\"warehouse-items__left\">\r\n        <div class=\"form-group\">\r\n          <pek-categories-tree-picker\r\n            [currentCategoryId]=\"searchForm.get('category').value\"\r\n            (categorySelected)=\"onSelectCategory($event)\"\r\n          >\r\n          </pek-categories-tree-picker>\r\n        </div>\r\n      </div>\r\n      <div class=\"warehouse-items__right\">\r\n        <div class=\"page__table\">\r\n          <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n            <div class=\"filters-visibility__header\"></div>\r\n\r\n            <button\r\n              class=\"icon pi\"\r\n              [class.pi-angle-double-up]=\"!isHideFilters\"\r\n              [class.pi-angle-double-down]=\"isHideFilters\"\r\n              (click)=\"toggleFilterVisibility()\"\r\n              [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n              tooltipPosition=\"left\"\r\n            ></button>\r\n\r\n            <form\r\n              [formGroup]=\"searchForm\"\r\n              class=\"warehouse-items__form mb-3\"\r\n            >\r\n              <div class=\"row\">\r\n                <div class=\"col-4 warehouse-items__categories\">\r\n                  <div class=\"form-group\">\r\n                    <label>Categories</label>\r\n                    <pek-product-category-picker\r\n                      (choiceCategory)=\"onSelectCategory($event)\"\r\n                      [currentCategoryId]=\"searchForm.get('category').value\"\r\n                    ></pek-product-category-picker>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-3\">\r\n                  <div class=\"form-group\">\r\n                    <label>Code</label>\r\n                    <input class=\"form-control\" formControlName=\"code\" pInputText #searchBoxCode>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-3\">\r\n                  <div class=\"form-group\">\r\n                    <label>Name</label>\r\n                    <input class=\"form-control\" formControlName=\"name\" pInputText #searchBoxName>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-3\">\r\n                  <div class=\"form-group\">\r\n                    <label>Description</label>\r\n                    <input class=\"form-control\" formControlName=\"description\" pInputText #searchBoxDescription>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-1\">\r\n                  <div class=\"form-group\">\r\n                      <label>Exclude Zero's</label>\r\n                      <p-checkbox class=\"mt-1\" formControlName=\"exclude_zero\" [binary]=\"true\" (ngModelChange)=\"searchProducts()\"></p-checkbox>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-1\">\r\n                  <div class=\"form-group\">\r\n                    <label>Exclude Empty</label>\r\n                    <p-checkbox class=\"mt-1\" formControlName=\"exclude_empty\" [binary]=\"true\" (ngModelChange)=\"searchProducts()\"></p-checkbox>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-4\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-6\">\r\n                      <div class=\"form-group\">\r\n                        <label>Warehouses</label>\r\n                        <pek-warehouse-picker (selectWarehouse)=\"selectWarehouse($event)\"></pek-warehouse-picker>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-6\">\r\n                      <div class=\"form-group\">\r\n                        <label>Locator</label>\r\n                        <pek-locator-picker\r\n                          [warehouseId]=\"searchForm.get('warehouse').value\"\r\n                          [isAllLocators]=\"false\"\r\n                          [isDisabled]=\"true\"\r\n                          (selectLocator)=\"onSelectLocator($event)\"\r\n                        ></pek-locator-picker>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-4\">\r\n                  <div class=\"row\">\r\n                    <div class=\"col-6\">\r\n                      <div class=\"form-group\">\r\n                        <label>Type</label>\r\n                        <pek-nomenclature-type-picker\r\n                          (choiceNomenclatureType)=\"onSelectNomenclatureType($event)\"\r\n                        ></pek-nomenclature-type-picker>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"col-6\">\r\n                      <div class=\"form-group\">\r\n                        <label>Accepted Type</label>\r\n                        <pek-accepted-type-picker\r\n                          (selectAcceptedType)=\"onSelectAcceptedType($event)\"\r\n                        ></pek-accepted-type-picker>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-2\">\r\n                  <div class=\"form-group\">\r\n                    <label>Product Structure Category</label>\r\n                    <pek-product-structure-category-picker\r\n                      [isAllIds]=\"true\"\r\n                      (choiceCategoryFolAllIds)=\"onSelectProductStructureCategory($event)\"\r\n                    ></pek-product-structure-category-picker>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-2\">\r\n                  <div class=\"form-group\">\r\n                    <label>Technologies</label>\r\n                    <pek-multi-technology-picker\r\n                      (selectTechnologies)=\"onSelectedTechnologies($event)\"\r\n                    ></pek-multi-technology-picker>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </form>\r\n          </div>\r\n          <div class=\"table-pagination-preloader\">\r\n            <p-table\r\n              #dt\r\n              selectionMode=\"single\"\r\n              [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n              dataKey=\"uid\"\r\n              [scrollable]=\"true\"\r\n              [rows]=\"10\"\r\n              [(selection)]=\"selectedProduct\"\r\n              [value]=\"products\"\r\n            >\r\n              <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                  <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n                  <th style=\"width: 15%\"\r\n                      class=\"sort-label\"\r\n                      pSortableColumn=\"nomenclature.code\"\r\n                      (click)=\"sorting(searchForm.get('order_by_code').value, 'order_by_code')\">\r\n                    Code\r\n                    <pek-sort-icon [value]=\"searchForm.get('order_by_code').value\"></pek-sort-icon>\r\n                  </th>\r\n                  <th style=\"width: 15%\"\r\n                      pSortableColumn=\"nomenclature.name\"\r\n                      class=\"sort-label\"\r\n                      (click)=\"sorting(searchForm.get('order_by_name').value, 'order_by_name')\">\r\n                    Name\r\n                    <pek-sort-icon [value]=\"searchForm.get('order_by_name').value\"></pek-sort-icon>\r\n                  </th>\r\n                  <th class=\"text-center\" style=\"width: 10%\">Technology</th>\r\n                  <th class=\"text-center\" style=\"width: 10%\"\r\n                      pSortableColumn=\"nomenclature.total_locator_quantity\"\r\n                      (click)=\"sorting(searchForm.get('order_by_quantity').value, 'order_by_quantity')\">\r\n                    Quantity\r\n                    <pek-sort-icon [value]=\"searchForm.get('order_by_quantity').value\"></pek-sort-icon>\r\n                  </th>\r\n\r\n                  <th class=\"text-center\" style=\"width: 6%\">UOM</th>\r\n                  <th class=\"text-center sort-label\" style=\"width: 13%\"\r\n                      pSortableColumn=\"nomenclature.category.name\"\r\n                      (click)=\"sorting(searchForm.get('order_by_category').value, 'order_by_category')\">\r\n                    Category\r\n                    <pek-sort-icon [value]=\"searchForm.get('order_by_category').value\"></pek-sort-icon>\r\n                  </th>\r\n                  <th class=\"text-center sort-label\" style=\"width: 12%\"\r\n                      pSortableColumn=\"locator.warehouse.name\"\r\n                      (click)=\"sorting(searchForm.get('order_by_warehouse').value, 'order_by_warehouse')\">\r\n                    Warehouse\r\n                    <pek-sort-icon [value]=\"searchForm.get('order_by_warehouse').value\"></pek-sort-icon>\r\n                  </th>\r\n                  <th class=\"text-center\" style=\"width: 14%\"\r\n                      pSortableColumn=\"locator.name\"\r\n                      (click)=\"sorting(searchForm.get('order_by_locator').value, 'order_by_locator')\">\r\n                    Locator\r\n                    <pek-sort-icon [value]=\"searchForm.get('order_by_locator').value\"></pek-sort-icon>\r\n                  </th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n                <tr [pSelectableRow]=\"product\" [pRowToggler]=\"product\">\r\n                  <td style=\"width: 5%\" class=\"text-center\">\r\n                    <h3 class=\"td-title\">#</h3>\r\n                    {{(this.searchForm.get('page').value - 1) * 10 + i + 1}}\r\n                  </td>\r\n                  <td style=\"width: 15%\">\r\n                    <h3 class=\"td-title\">Code</h3>\r\n                    {{product.nomenclature.code}}\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"in-use\">\r\n                    <h3 class=\"td-title\">Name</h3>\r\n                    <b *ngIf=\"product.nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n                    <b *ngIf=\"product.nomenclature.has_technical_equipment\">(T)</b>\r\n                    <b *ngIf=\"showIsReserved(product.extra_info)\">(R)</b>\r\n                    {{product.nomenclature.name}}\r\n                    <span class=\"text-danger\" *ngIf=\"product.used_by_order && product.used_by_order.length > 0\">\r\n                      <b>In Use</b>\r\n\r\n                      <div class=\"in-use-info\">\r\n                        <p>In use by orders:</p>\r\n                        <div *ngFor=\"let order of product.used_by_order\">\r\n                          <a *ngIf=\"order.accounting_type === 3\" [href]=\"link + 'production/orders/order/' + order.order_id\"\r\n                              target=\"_blank\">{{order.order_id}}\r\n                          </a>\r\n                          <a *ngIf=\"order.accounting_type === 2\" [href]=\"link + 'outsource/outsource-chain/products/' + order.order_id\"\r\n                             target=\"_blank\">{{order.order_id}}\r\n                          </a>\r\n                        </div>\r\n                      </div>\r\n                    </span>\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    <h3 class=\"td-title\">Technology</h3>\r\n                    {{product.current_technology?.name}}\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    <h3 class=\"td-title\">Quantity</h3>\r\n                    {{product.total_locator_quantity}}\r\n                  </td>\r\n                  <td style=\"width: 6%\" class=\"text-center\">\r\n                    <h3 class=\"td-title\">Uom</h3>\r\n                    <ng-container *ngIf=\"product.nomenclature.category || product.nomenclature.root_category\">\r\n                      <ng-container *ngIf=\"product.nomenclature.category\">\r\n                        {{product.nomenclature.category?.unit_of_measure?.symbol ? product.nomenclature.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                      </ng-container>\r\n                      <ng-container *ngIf=\"product.nomenclature.root_category\">\r\n                        {{product.nomenclature.root_category?.unit_of_measure?.symbol ? product.nomenclature.root_category?.unit_of_measure?.symbol : 'Pcs' }}\r\n                      </ng-container>\r\n                    </ng-container>\r\n\r\n                    <span *ngIf=\"!product.nomenclature.category && !product.nomenclature.root_category\">\r\n                    Pcs\r\n                  </span>\r\n                  </td>\r\n                  <td style=\"width: 13%\" class=\"text-center\">\r\n                    <h3 class=\"td-title\">Category</h3>\r\n                    {{product.nomenclature.category?.name}}\r\n                    {{product.nomenclature.root_category?.name}}\r\n                  </td>\r\n                  <td style=\"width: 12%\" class=\"text-center\">\r\n                    <h3 class=\"td-title\">Warehouse</h3>\r\n                    <ng-container\r\n                      *ngIf=\"product.locator\">\r\n                      {{product.locator.warehouse.name}}\r\n                    </ng-container>\r\n                  </td>\r\n                  <td style=\"width: 14%\" class=\"text-center\">\r\n                    <h3 class=\"td-title\">Locator</h3>\r\n                    <ng-container *ngIf=\"product.locator\">\r\n                      {{product.locator.name}}\r\n                    </ng-container>\r\n                    <span class=\"d-block\" *ngIf=\"product.locator\"> R: {{product.locator.row}} Col:\r\n                      {{product.locator.column}} Sh: {{product.locator.shelf}} Pl:\r\n                      {{product.locator.place}}\r\n                  </span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\">\r\n                <tr>\r\n                  <td class=\"text-center tr-spinner p-4\" [attr.colspan]=\"10\">\r\n                    <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                    <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-table>\r\n            <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n              <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            </div>\r\n          </div>\r\n          <div\r\n            class=\"paginator-wrapper\"\r\n            *ngIf=\"!isShowAll\"\r\n            [class.paginator-wrapper_hide]=\"products.length === 0\"\r\n          >\r\n            <p-paginator\r\n              #paginator\r\n              [rows]=\"10\"\r\n              [totalRecords]=\"countProducts\"\r\n              (onPageChange)=\"paginate($event)\">\r\n            </p-paginator>\r\n            <p-button\r\n              (click)=\"onShowAll()\"\r\n              class=\"paginator-all\"\r\n              type=\"button\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              All\r\n            </p-button>\r\n          </div>\r\n          <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"onShowPartial()\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              Return pagination\r\n            </p-button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {NavigationLink} from '../../../layout/navigation-route';\r\nimport {environment} from '@env/environment';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-layout',\r\n  templateUrl: './warehouse-layout.component.html',\r\n  styleUrls: ['./warehouse-layout.component.scss']\r\n})\r\nexport class WarehouseLayoutComponent implements OnInit {\r\n\r\n  routes: NavigationLink[] = [\r\n    {label: 'Items', commands: ['items']},\r\n    {label: 'QC-Warehouse', commands: ['warehouse-qc']},\r\n    {label: 'Production Lists', commands: ['production-lists']},\r\n    {label: 'Production Requests', commands: ['production-requests']},\r\n    {label: 'Tool Requests', commands: ['tool-requests']},\r\n    {label: 'Shipment Requests', commands: [`${environment.link_url}dash/warehouse/shipping-requests`], isExternal: true},\r\n    {label: 'Where Used', commands: ['where-used']},\r\n    {label: 'Physical Inventory', commands: ['physical-inventory']},\r\n    {label: 'Isolator', commands: ['isolator']},\r\n  ]\r\n\r\n  settingsRoutes: NavigationLink[] = [\r\n    {label: 'Warehouses', commands: ['warehouses']},\r\n    {label: 'Categories', commands: ['categories']},\r\n    {label: 'Units of Measure', commands: ['measure']},\r\n  ]\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'Warehouse'\"\r\n  [routes]=\"routes\"\r\n  [settingsRoutes]=\"settingsRoutes\"\r\n></pek-header>\r\n\r\n<router-outlet></router-outlet>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {map, switchMap, tap} from 'rxjs/operators';\r\nimport {LocatorService} from '../../services/locator.service';\r\nimport {Locator} from '../../models/locator';\r\nimport {WarehouseService} from '../../services/warehouse.service';\r\nimport {Warehouse} from '../../models/warehouse';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-locators',\r\n  templateUrl: './warehouse-locators.component.html',\r\n  styleUrls: ['./warehouse-locators.component.scss']\r\n})\r\nexport class WarehouseLocatorsComponent implements OnInit, OnDestroy {\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Locator',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditLocator()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveLocator()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  warehouseId: number;\r\n  currentWarehouse: Warehouse;\r\n\r\n  locators: Locator[] = [];\r\n  selectedLocator: Locator;\r\n\r\n  isLoading = true;\r\n  isLoadingWarehouse = true;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly route: ActivatedRoute,\r\n    private locatorService: LocatorService,\r\n    private readonly warehouseService: WarehouseService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getLocators();\r\n    this.getCurrentWarehouse();\r\n  }\r\n\r\n  getLocators() {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.warehouseId = +id),\r\n      switchMap(() => this.locatorService.get([{name: 'warehouse', value: this.warehouseId}])),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(locators => {\r\n      this.locators = locators;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getCurrentWarehouse() {\r\n    this.warehouseService.getById(this.warehouseId).subscribe(warehouse => {\r\n      this.currentWarehouse = warehouse;\r\n      this.isLoadingWarehouse = false;\r\n    });\r\n  }\r\n\r\n  onAddLocator() {\r\n    this.locatorService.createEditLocatorModal('create').subscribe(locator => {\r\n      if (locator) {\r\n        this.locators.unshift(locator);\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditLocator() {\r\n    this.locatorService.createEditLocatorModal('edit', this.selectedLocator).subscribe(locator => {\r\n      if (locator) {\r\n        const index = this.locators.findIndex(t => t.id === this.selectedLocator.id);\r\n        this.locators[index] = locator;\r\n        this.selectedLocator = this.locators[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveLocator() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.locatorService.delete(this.selectedLocator).subscribe(() => {\r\n          const index = this.locators.findIndex(w => w.id === this.selectedLocator.id);\r\n          this.locators.splice(index, 1);\r\n            this.selectedLocator = null;\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Locators (Warehouse: {{isLoadingWarehouse ? '...' : currentWarehouse.name}})</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Locator\" (click)=\"onAddLocator()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"locators.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedLocator\"\r\n        [value]=\"locators\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedLocator\">Choose the Locator to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedLocator\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n            <th style=\"width: 20%\">Name</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Description</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Row</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Column</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Shelf</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Place</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-locator let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"locator\">\r\n            <td style=\"width: 5%\" class=\"text-center\">{{i + 1 }}</td>\r\n            <td style=\"width: 20%\">{{locator.name}}</td>\r\n            <td style=\"width: 20%;\" class=\"text-center\">{{locator.description}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{locator.row}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{locator.column}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{locator.shelf}}</td>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{locator.place}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && locators.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {ENomenclatureType} from '@shared/models/nomenclature';\r\nimport {AuthService} from '../../../auth/auth.service';\r\nimport {GroupedRequest} from '../../models/grouped-request';\r\nimport {OrderProductGroupedForPrint} from '../../../procurement/models/order-product';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-production-request-print-page',\r\n  templateUrl: './warehouse-production-request-print-page.component.html',\r\n  styleUrls: ['./warehouse-production-request-print-page.component.scss']\r\n})\r\nexport class WarehouseProductionRequestPrintPageComponent implements OnInit {\r\n  @Input() requests: GroupedRequest[] = [];\r\n  @Input() orderedProducts: OrderProductGroupedForPrint[];\r\n  @Input() rootList: any;\r\n  @Input() orderId: number;\r\n  @Input() technologies: string[];\r\n  currentDate = new Date();\r\n  @Input() currentReqDate: Date = null;\r\n\r\n  constructor(\r\n    public readonly auth: AuthService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  getType(type: ENomenclatureType) {\r\n    switch (type) {\r\n      case ENomenclatureType.ASSEMBLY:\r\n        return 'Assembly'\r\n      case ENomenclatureType.PURCHASED:\r\n        return 'Outsourcing'\r\n      case ENomenclatureType.MANUFACTURED:\r\n        return 'Own Production'\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"warehouse-production-request-print-page\" *ngIf=\"rootList && !orderedProducts\">\r\n  <div class=\"warehouse-production-request-print-page__header\">\r\n    <div>\r\n      <h2>Code</h2>\r\n      <p>{{rootList.nomenclature.code}}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Name</h2>\r\n      <p>{{rootList.nomenclature.name}}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Order ID</h2>\r\n      <p>{{orderId}}</p>\r\n    </div>\r\n    <div>\r\n      <h2></h2>\r\n      <p></p>\r\n    </div>\r\n    <div>\r\n      <h2>Production List Creation Date</h2>\r\n      <p>{{rootList.list.created | date: 'dd.MM.y' }}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Request Creation Date</h2>\r\n      <p>\r\n        <ng-container *ngIf=\"currentReqDate\">\r\n          {{currentReqDate | date: 'dd.MM.y' }}\r\n        </ng-container>\r\n      </p>\r\n    </div>\r\n    <div class=\"col-2\">\r\n      <h2>Technologies</h2>\r\n      <p>\r\n        <span *ngFor=\"let tech of technologies; let last=last\">\r\n          {{tech}} {{last ? '' : ','}}\r\n        </span>\r\n      </p>\r\n    </div>\r\n  </div>\r\n  <div class=\"warehouse-production-request-print-page__table\">\r\n    <div\r\n      *ngFor=\"let request of requests\"\r\n      class=\"warehouse-production-request-print-page__row\"\r\n    >\r\n      <div class=\"warehouse-production-request-print-page__box\">\r\n        <div class=\"warehouse-production-request-print-page__col\">\r\n          <h3>ID</h3>\r\n          <p>{{request.id}} <span *ngIf=\"request.ids?.length > 0\">L({{request.ids?.length + 1}})</span></p>\r\n        </div>\r\n        <div class=\"warehouse-production-request-print-page__col\">\r\n          <h3>Code</h3>\r\n          <div *ngIf=\"request.material_nomenclature\">\r\n            {{request.material_nomenclature.code}}\r\n          </div>\r\n          <div *ngIf=\"request.order_product_nomenclature\">\r\n            {{request.order_product_nomenclature.code}}\r\n          </div>\r\n          <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n            {{request.list_product.nomenclature.code}}\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-production-request-print-page__col\">\r\n          <h3>Name</h3>\r\n          <div *ngIf=\"request.material_nomenclature\">\r\n            <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n            {{request.material_nomenclature.name}}\r\n          </div>\r\n          <div *ngIf=\"request.order_product_nomenclature\">\r\n            <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n            {{request.order_product_nomenclature.name}}\r\n          </div>\r\n          <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n            <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n            {{request.list_product.nomenclature.name}}\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-production-request-print-page__col_half\">\r\n          <h3>Technology</h3>\r\n          <span *ngIf=\"request.technology\">{{request.technology}}</span>\r\n        </div>\r\n        <div class=\"warehouse-production-request-print-page__col_half\">\r\n          <h3>UOM</h3>\r\n          <div\r\n            *ngIf=\"request.material_nomenclature\">\r\n            {{request.material_nomenclature?.category?.unit_of_measure?.symbol ? request.material_nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n          </div>\r\n          <div\r\n            *ngIf=\"request.order_product_nomenclature\">\r\n            {{request.order_product_nomenclature?.category?.unit_of_measure?.symbol ? request.order_product_nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n          </div>\r\n          <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n            {{request.list_product.nomenclature?.category?.unit_of_measure?.symbol ? request.list_product.nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-production-request-print-page__col\">\r\n          <h3>Required Quantity</h3>\r\n          {{request.total_required_quantity}}\r\n        </div>\r\n        <div class=\"warehouse-production-request-print-page__col\">\r\n          <h3>Locator</h3>\r\n          <div *ngIf=\"request.locators\">\r\n            <div *ngFor=\"let locator of request.unique_locators; let last=last\">\r\n              {{locator.name}}<span *ngIf=\"!last\">,</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-production-request-print-page__col\">\r\n          <h3>Available Quantity</h3>\r\n          {{request.available_quantity_sum}}\r\n        </div>\r\n        <div class=\"warehouse-production-request-print-page__col\">\r\n          <h3>Type</h3>\r\n          <p>{{getType(request.list_product?.nomenclature?.type)}}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"warehouse-production-request-print-page__bottom\">\r\n    <div class=\"warehouse-production-request-print-page__column\">\r\n      <div class=\"warehouse-production-request-print-page__left\">\r\n        <div>\r\n          <h3>Sent</h3>\r\n          <p>{{auth.user.first_name}} {{auth.user.last_name}}</p>\r\n        </div>\r\n        <div>\r\n          <h3>Date</h3>\r\n          <p>{{currentDate | date: 'dd.MM.y'}}</p>\r\n        </div>\r\n        <div>\r\n          <h3>Signed</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"warehouse-production-request-print-page__right\">\r\n        <div>\r\n          <h3>Retrieved</h3>\r\n          <p></p>\r\n        </div>\r\n        <div>\r\n          <h3>Date</h3>\r\n          <p></p>\r\n        </div>\r\n        <div>\r\n          <h3>Signed</h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!--  Grouped By OrderProduct -->\r\n<div class=\"warehouse-production-request-print-page\" *ngIf=\"rootList && orderedProducts\">\r\n  <div class=\"warehouse-production-request-print-page__header\">\r\n    <div>\r\n      <h2>Code</h2>\r\n      <p>{{rootList.nomenclature.code}}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Name</h2>\r\n      <p>{{rootList.nomenclature.name}}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Order ID</h2>\r\n      <p>{{orderId}}</p>\r\n    </div>\r\n    <div>\r\n      <h2></h2>\r\n      <p></p>\r\n    </div>\r\n    <div>\r\n      <h2>Production List Creation Date</h2>\r\n      <p>{{rootList.list.created | date: 'dd.MM.y' }}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Request Creation Date</h2>\r\n      <p>\r\n        <ng-container *ngIf=\"currentReqDate\">\r\n          {{currentReqDate | date: 'dd.MM.y' }}\r\n        </ng-container>\r\n      </p>\r\n    </div>\r\n    <div class=\"col-2\">\r\n      <h2>Technologies</h2>\r\n      <p>\r\n        <span *ngFor=\"let tech of technologies; let last=last\">\r\n          {{tech}} {{last ? '' : ','}}\r\n        </span>\r\n      </p>\r\n    </div>\r\n  </div>\r\n  <div *ngFor=\"let orderProduct of orderedProducts; let lastGroup=last\" class=\"order-product-page\" [class.not-last-group]=\"!lastGroup\">\r\n        <h3 >{{orderProduct.nomenclature.code}} {{orderProduct.nomenclature.name}} {{orderProduct.current_technology?.name}} Quantity:  {{orderProduct.quantity}}</h3>\r\n    <div class=\"warehouse-production-request-print-page__table\">\r\n      <div\r\n        *ngFor=\"let request of orderProduct.children; let index=index\"\r\n        class=\"warehouse-production-request-print-page__row\">\r\n        <div class=\"warehouse-production-request-print-page__box\">\r\n          <div class=\"warehouse-production-request-print-page__col\">\r\n            <h3>ID</h3>\r\n            <p>{{request.id}} <span *ngIf=\"request.ids?.length > 0\">L({{request.ids?.length + 1}})</span></p>\r\n          </div>\r\n          <div class=\"warehouse-production-request-print-page__col\">\r\n            <h3>Code</h3>\r\n            <div *ngIf=\"request.material_nomenclature\">\r\n              {{request.material_nomenclature.code}}\r\n            </div>\r\n            <div *ngIf=\"request.order_product_nomenclature\">\r\n              {{request.order_product_nomenclature.code}}\r\n            </div>\r\n            <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n              {{request.list_product.nomenclature.code}}\r\n            </div>\r\n          </div>\r\n          <div class=\"warehouse-production-request-print-page__col\">\r\n            <h3>Name</h3>\r\n            <div *ngIf=\"request.material_nomenclature\">\r\n              <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n              {{request.material_nomenclature.name}}\r\n            </div>\r\n            <div *ngIf=\"request.order_product_nomenclature\">\r\n              <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n              {{request.order_product_nomenclature.name}}\r\n            </div>\r\n            <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n              <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n              {{request.list_product.nomenclature.name}}\r\n            </div>\r\n          </div>\r\n          <div class=\"warehouse-production-request-print-page__col_half\">\r\n            <h3>Technology</h3>\r\n            <span *ngIf=\"request.technology\">{{request.technology}}</span>\r\n          </div>\r\n          <div class=\"warehouse-production-request-print-page__col_half\">\r\n            <h3>UOM</h3>\r\n            <div\r\n              *ngIf=\"request.material_nomenclature\">\r\n              {{request.material_nomenclature?.category?.unit_of_measure?.symbol ? request.material_nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n            </div>\r\n            <div\r\n              *ngIf=\"request.order_product_nomenclature\">\r\n              {{request.order_product_nomenclature?.category?.unit_of_measure?.symbol ? request.order_product_nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n            </div>\r\n            <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n              {{request.list_product.nomenclature?.category?.unit_of_measure?.symbol ? request.list_product.nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n            </div>\r\n          </div>\r\n          <div class=\"warehouse-production-request-print-page__col\">\r\n            <h3>Required Quantity</h3>\r\n            {{request.total_required_quantity}}\r\n          </div>\r\n          <div class=\"warehouse-production-request-print-page__col\">\r\n            <h3>Locator</h3>\r\n            <div *ngIf=\"request.locators\">\r\n              <div *ngFor=\"let locator of request.unique_locators; let last=last\">\r\n                {{locator.name}}<span *ngIf=\"!last\">,</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"warehouse-production-request-print-page__col\">\r\n            <h3>Available Quantity</h3>\r\n            {{request.available_quantity_sum}}\r\n          </div>\r\n          <div class=\"warehouse-production-request-print-page__col\">\r\n            <h3>Type</h3>\r\n            <p>{{getType(request.list_product?.nomenclature?.type)}}</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"warehouse-production-request-print-page__bottom\">\r\n    <div class=\"warehouse-production-request-print-page__column\">\r\n      <div class=\"warehouse-production-request-print-page__left\">\r\n        <div>\r\n          <h3>Sent</h3>\r\n          <p>{{auth.user.first_name}} {{auth.user.last_name}}</p>\r\n        </div>\r\n        <div>\r\n          <h3>Date</h3>\r\n          <p>{{currentDate | date: 'dd.MM.y'}}</p>\r\n        </div>\r\n        <div>\r\n          <h3>Signed</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"warehouse-production-request-print-page__right\">\r\n        <div>\r\n          <h3>Retrieved</h3>\r\n          <p></p>\r\n        </div>\r\n        <div>\r\n          <h3>Date</h3>\r\n          <p></p>\r\n        </div>\r\n        <div>\r\n          <h3>Signed</h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, HostListener, Inject, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {AuthService} from '../../../auth/auth.service';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {RequestService} from '../../services/request.service';\r\nimport {Table} from 'primeng/table';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {List} from '../../models/list';\r\nimport * as cloneDeep from 'lodash/cloneDeep';\r\nimport {Task} from '@shared/models/task';\r\nimport {TaskService} from '@shared/services/task.service';\r\nimport {environment} from '@env/environment';\r\nimport {forkJoin, Subject, takeUntil} from 'rxjs';\r\nimport {OrderTechnicalEquipment} from '../../models/order-technical-equipment';\r\nimport {OrderTechnicalEquipmentsService} from '../../services/order-technical-equipments.service';\r\nimport {take, tap} from 'rxjs/operators';\r\nimport {Nomenclature, Nomenclatures} from '@shared/models/nomenclature';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {ScanResult} from '../../../qr-code/models/scan-result';\r\nimport {GroupedRequest} from '../../models/grouped-request';\r\nimport {AlbumService} from '@shared/services/album.service';\r\nimport {\r\n  OrderProduct,\r\n  OrderProductGroupedForPrint\r\n} from '../../../procurement/models/order-product';\r\nimport {DOCUMENT} from '@angular/common';\r\n\r\n\r\nenum ViewMode {\r\n  LIST = 0,\r\n  HIERARCHY = 1,\r\n  DETAILED_HIERARCHY = 2,\r\n}\r\n\r\nclass ProductRequestListOrder extends Order {\r\n  ordered_items_technologies?: string[];\r\n}\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-warehouse-production-request',\r\n  templateUrl: './warehouse-production-request.component.html',\r\n  styleUrls: ['./warehouse-production-request.component.scss']\r\n})\r\nexport class WarehouseProductionRequestComponent implements OnInit, OnDestroy {\r\n  link = environment.link_url + 'dash/';\r\n  viewModes = ViewMode;\r\n  viewMode: ViewMode = ViewMode.LIST;\r\n  @ViewChild('dt') dateTable: Table;\r\n  formGroupedOrderedProducts: Subject<void> = new Subject<void>();\r\n\r\n  isShowPrint = false;\r\n  isShowPrintGrouped = false;\r\n\r\n  destroy$ = new Subject();\r\n  lastScannedId: number;\r\n\r\n  isAlbumPrint = false;\r\n\r\n  requestNodeMenuItems: MenuItem[] = [{\r\n    label: 'Selected Request',\r\n    items: [\r\n      {\r\n        label: 'Show Images',\r\n        icon: 'pi pi-images',\r\n        command: () => this.showImages(this.selectedRequestNode.data.request)\r\n      },\r\n      {\r\n        label: 'Cancel',\r\n        icon: 'pi pi-times',\r\n        command: () => this.onCancelItem(this.selectedRequestNode.data.request)\r\n      }\r\n    ]\r\n  }];\r\n\r\n  requestMenuItems: MenuItem[] = [{\r\n    label: 'Selected Request',\r\n    items: [\r\n      {\r\n        label: 'Show Images',\r\n        icon: 'pi pi-images',\r\n        command: () => this.showImages(this.selectedRequest as GroupedRequest)\r\n      },\r\n      {\r\n        label: 'Cancel',\r\n        icon: 'pi pi-times',\r\n        command: () => this.onCancelItem(this.selectedRequest as GroupedRequest)\r\n      }\r\n    ]\r\n  }];\r\n\r\n  printMenuItems: MenuItem[] = [{\r\n    label: 'Print Options',\r\n    items: [\r\n      {\r\n        label: 'Print (default)',\r\n        icon: 'pi pi-print',\r\n        command: () => this.printPage()\r\n      },\r\n      {\r\n        label: 'Print Grouped by Order Product',\r\n        icon: 'pi pi-print',\r\n        command: () => this.printPageGrouped()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  rootList: any = null;\r\n  currentDate: Date = new Date();\r\n  selectedRequest: GroupedRequest | GroupedRequest[] | any;\r\n  currentReqDate: Date = null;\r\n\r\n  isLoading = true;\r\n  requests: GroupedRequest[] = [];\r\n  listRequests: GroupedRequest[] = [];\r\n  hierarchyRequests: GroupedRequest[] = [];\r\n  order: ProductRequestListOrder;\r\n  orderId = this.route.snapshot.paramMap.get('id');\r\n\r\n  requestTree: TreeNode[] = [];\r\n  selectedRequestNode: TreeNode;\r\n\r\n  detailedRequestTree: TreeNode[] = [];\r\n  selectedDetailedRequestNode: TreeNode;\r\n  orderedProductsForPrint: OrderProductGroupedForPrint[] = [];\r\n\r\n  technicalEquipments: OrderTechnicalEquipment[] = [];\r\n  isLoadingTree = true;\r\n  elementsRowsIds: any[] = [];\r\n  isScanned = false;\r\n  scanningEnd: boolean;\r\n  currentDisplayRowId: null;\r\n  foundRowsIds: any[] = [];\r\n  firstPage = 0;\r\n\r\n  constructor(\r\n    private requestsService: RequestService,\r\n    public readonly auth: AuthService,\r\n    private ordersService: OrderService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private readonly modalService: ModalService,\r\n    private readonly tasksService: TaskService,\r\n    private orderTechnicalEquipmentsService: OrderTechnicalEquipmentsService,\r\n    public readonly albumService: AlbumService,\r\n    @Inject(DOCUMENT) private document: Document,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getOrderInfo(+this.orderId);\r\n    this.getRequests();\r\n    this.getOrderTechnicalEquipments();\r\n    this.formGroupedOrderedProducts.pipe(untilDestroyed(this)).subscribe(() => {\r\n      if (this.hierarchyRequests.length > 0 && this.orderedProductsForPrint.length > 0) {\r\n        this.orderedProductsForPrint.forEach(el => {\r\n          el.children = this.hierarchyRequests.filter(child => child.for_order_product.id === el.id || child.for_order_ids.findIndex(child_ids => child_ids === el.id) >= 0);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  getOrderTechnicalEquipments() {\r\n    const query = [{name: 'order', value: +this.orderId}, {name: 'in_use', value: false}];\r\n    this.orderTechnicalEquipmentsService.get(query).pipe(take(1), untilDestroyed(this)).subscribe(technicalEquipments => {\r\n      this.technicalEquipments = technicalEquipments;\r\n    });\r\n  }\r\n\r\n  onCancel() {\r\n    this.modalService.confirm('danger', 'Confirm').subscribe(res => {\r\n      if (res) {\r\n        this.requestsService.cancel(+this.orderId).pipe(untilDestroyed(this)).subscribe();\r\n      }\r\n    });\r\n  }\r\n\r\n  getOrderInfo(orderId: number): void {\r\n    this.ordersService.getById(orderId).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).pipe(untilDestroyed(this)).subscribe(order => {\r\n      this.order = order;\r\n      this.order.ordered_items_technologies = [];\r\n      this.order.order_products.forEach(product => {\r\n        // console.log('this.order.order_products', this.order.order_products);\r\n        if (product.current_technology) {\r\n          const canAddTechnology = this.order.ordered_items_technologies\r\n            .findIndex(el => el === product.current_technology.name) < 0;\r\n          if (canAddTechnology) {\r\n            this.order.ordered_items_technologies.push(product.current_technology.name);\r\n          }\r\n        }\r\n\r\n        const productInList = this.orderedProductsForPrint.find(el => el.nomenclature.id === product.nomenclature.id &&\r\n          el.current_technology?.id === product.current_technology?.id);\r\n        if (productInList) {\r\n          productInList.quantity += product.quantity;\r\n        } else {\r\n          this.orderedProductsForPrint.push(product);\r\n        }\r\n      });\r\n      this.formGroupedOrderedProducts.next();\r\n      this.prepareDetailedCategoryTree();\r\n    });\r\n  }\r\n\r\n  prepareDetailedCategoryTree(): void {\r\n    const categoriesTemp: {\r\n      id: number,\r\n      level: number,\r\n      parentId: number,\r\n      name: string,\r\n      serialNumber: string,\r\n      planId?: number,\r\n      code?: number\r\n    }[] = [];\r\n\r\n    this.order.root_production_plans.forEach(plan => {\r\n      const isAdded = categoriesTemp.findIndex(el => el.id === plan.list_product.id);\r\n      const hasSerialNumber = plan.serial_numbers.length > 0;\r\n      let serialNumber;\r\n      if (hasSerialNumber) {\r\n        const planInfo = plan.serial_numbers[0];\r\n        serialNumber = planInfo.type_with_number ? planInfo.type_with_number : planInfo.id;\r\n      }\r\n      if (isAdded < 0) {\r\n        categoriesTemp.push({\r\n          name: plan.list_product.nomenclature.name,\r\n          code: plan.list_product.nomenclature.code,\r\n          serialNumber,\r\n          id: plan.list_product.id,\r\n          planId: plan.id,\r\n          level: 0,\r\n          parentId: null\r\n        });\r\n      }\r\n    });\r\n\r\n    this.detailedRequestTree = [];\r\n    categoriesTemp.forEach(cat => {\r\n      this.detailedRequestTree.push({\r\n        data: cat,\r\n        children: [{\r\n          data: {loading: 'Loading data ...'}\r\n        }],\r\n        expanded: false,\r\n        parent: null\r\n      });\r\n    });\r\n  }\r\n\r\n  changeView(view: ViewMode) {\r\n    this.selectedRequest = [];\r\n\r\n    this.selectedRequestNode = null;\r\n    this.viewMode = view;\r\n  }\r\n\r\n  getRequests() {\r\n    this.isLoading = true;\r\n    this.requests = [];\r\n    // this.requestTree = [];\r\n\r\n    this.requestsService.getByOrder(+this.orderId).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(requests => {\r\n      this.isLoading = false;\r\n      this.requests = requests;\r\n      this.listRequests = JSON.parse(JSON.stringify(this.requests));\r\n      this.hierarchyRequests = JSON.parse(JSON.stringify(this.requests));\r\n      this.listRequests.sort((a, b) => this.getCodeAndNameId(a).id - this.getCodeAndNameId(b).id).forEach(request => {\r\n        request.requests = this.listRequests\r\n          .filter(req => !req.material_nomenclature)\r\n          .filter(req => !req.reserved_serial_products || req.reserved_serial_products.length === 0)\r\n          .filter(req => {\r\n            return this.getSameRequests(req, request) && req.id !== request.id;\r\n          });\r\n\r\n        request.ids = request.requests.map(req => req.id);\r\n\r\n        request.all_reserved_serial_products = [];\r\n        request.unique_locators = [...request.locators];\r\n        if (request.is_reserved && request.requests\r\n          .every(req => req.is_reserved)) {\r\n          request.available_quantity_sum = request.requests.map(req => req.required_quantity)\r\n            .reduce((sum, quantity) => sum + quantity, request.required_quantity);\r\n        } else {\r\n          if (request.ids.length === 0) {\r\n            if (!request.is_reserved) {\r\n              request.available_quantity_sum = request.warehouse_quantity;\r\n            } else {\r\n              request.available_quantity_sum = request.required_quantity;\r\n            }\r\n          } else {\r\n            if (!request.is_reserved) {\r\n              request.available_quantity_sum = request.warehouse_quantity;\r\n            } else {\r\n              request.available_quantity_sum = request.requests\r\n                .find(req => !req.is_reserved).warehouse_quantity;\r\n            }\r\n          }\r\n        }\r\n        if (request.reserved_serial_products) {\r\n          request.all_reserved_serial_products.push(...request.reserved_serial_products.map(serial_number => serial_number.serial_number));\r\n        }\r\n        request.requests.forEach(req => {\r\n          if (req.reserved_serial_products?.length > 0) {\r\n            request.all_reserved_serial_products.push(...req.reserved_serial_products.map(serial_number => serial_number.serial_number));\r\n          }\r\n          request.unique_locators.push(...req.locators);\r\n        });\r\n        request.total_required_quantity = request.requests.reduce(\r\n          (accumulator, currentValue) => accumulator + currentValue.required_quantity, request.required_quantity\r\n        );\r\n        request.unique_locators = request.unique_locators.filter((locator, index, self) => self.findIndex(innerLocator => innerLocator.id === locator.id) === index);\r\n\r\n        request.ids.forEach(id => {\r\n          const index = this.listRequests.findIndex(req => req.id === id);\r\n          this.listRequests.splice(index, 1);\r\n        });\r\n      });\r\n\r\n      this.hierarchyRequests.sort((a, b) => this.getCodeAndNameId(a).id - this.getCodeAndNameId(b).id).forEach(hierRequest => {\r\n        hierRequest.requests = this.hierarchyRequests\r\n          .filter(req => !req.material_nomenclature)\r\n          .filter(req => req.for_order_product?.nomenclature.id === hierRequest.for_order_product?.nomenclature.id)\r\n          .filter(req => !req.reserved_serial_products || req.reserved_serial_products.length === 0)\r\n          .filter(req => {\r\n            return this.getSameRequests(req, hierRequest) && req.id !== hierRequest.id &&\r\n              (req.for_order_product?.nomenclature.id === hierRequest.for_order_product?.nomenclature.id ||\r\n                req.list_product?.nomenclature.id === hierRequest.list_product?.nomenclature.id);\r\n          });\r\n\r\n        hierRequest.ids = hierRequest.requests.map(req => req.id);\r\n        hierRequest.for_order_ids = [];\r\n        if (hierRequest.for_order_product.length > 0) {\r\n          hierRequest.for_order_ids.push(hierRequest.for_order_product.id);\r\n        }\r\n        hierRequest.for_order_ids.push(...hierRequest.requests.filter(req => req.for_order_product).map(req => req.for_order_product?.id));\r\n        if (hierRequest.is_reserved && hierRequest.requests\r\n          .every(req => req.is_reserved)) {\r\n          hierRequest.available_quantity_sum = hierRequest.requests.map(req => req.required_quantity)\r\n            .reduce((sum, quantity) => sum + quantity, hierRequest.required_quantity);\r\n        } else {\r\n          if (hierRequest.ids.length === 0) {\r\n            if (!hierRequest.is_reserved) {\r\n              hierRequest.available_quantity_sum = hierRequest.warehouse_quantity;\r\n            } else {\r\n              hierRequest.available_quantity_sum = hierRequest.required_quantity;\r\n            }\r\n          } else {\r\n            if (!hierRequest.is_reserved) {\r\n              hierRequest.available_quantity_sum = hierRequest.warehouse_quantity;\r\n            } else {\r\n              hierRequest.available_quantity_sum = hierRequest.requests\r\n                .find(req => !req.is_reserved).warehouse_quantity;\r\n            }\r\n          }\r\n        }\r\n\r\n        hierRequest.unique_locators = [...hierRequest.locators];\r\n        hierRequest.requests.forEach(req => {\r\n          hierRequest.unique_locators.push(...req.locators);\r\n        });\r\n\r\n        hierRequest.unique_locators = hierRequest.unique_locators.filter((locator, index, self) =>\r\n          self.findIndex(innerLocator => innerLocator.id === locator.id) === index);\r\n\r\n        hierRequest.total_required_quantity = hierRequest.requests.reduce(\r\n          (accumulator, currentValue) => accumulator + currentValue.required_quantity, hierRequest.required_quantity\r\n        );\r\n\r\n        hierRequest.ids.forEach(id => {\r\n          const index = this.hierarchyRequests.findIndex(req => req.id === id);\r\n          this.hierarchyRequests.splice(index, 1);\r\n        });\r\n      });\r\n      this.formGroupedOrderedProducts.next();\r\n\r\n      this.prepareTreeCategories();\r\n      if (this.listRequests.length > 0) {\r\n        const haveRootProduction = this.listRequests.find(el => el.root_production_list_products.length > 0);\r\n        this.rootList = haveRootProduction.root_production_list_products[0];\r\n        this.currentReqDate = haveRootProduction.created;\r\n      }\r\n      const material = this.listRequests.filter(el => el.material_nomenclature).sort((a, b) => {\r\n        return b.id - a.id;\r\n      });\r\n      const non_material = this.listRequests.filter(el => !el.material_nomenclature).sort((a, b) => {\r\n        return b.id - a.id;\r\n      });\r\n      this.listRequests = [...material, ...non_material];\r\n    });\r\n  }\r\n\r\n  getSameRequests(req: GroupedRequest, request: GroupedRequest): boolean {\r\n    let codeName = this.getCodeAndNameId(req);\r\n\r\n    let codeNameSecond = this.getCodeAndNameId(request);\r\n    return (codeName.code === codeNameSecond.code\r\n      && codeName.name === codeNameSecond.name\r\n      && (!req.reserved_serial_products || req.reserved_serial_products?.length === 0 || !req.material_nomenclature));\r\n  }\r\n\r\n  getCodeAndNameId(request: GroupedRequest): { name: string, code: string, id: number } {\r\n    let codeSecond = '';\r\n    let nameSecond = '';\r\n    let id;\r\n    if (request.order_product_nomenclature) {\r\n      codeSecond = request.order_product_nomenclature.code;\r\n      nameSecond = request.order_product_nomenclature.name;\r\n      id = request.order_product_nomenclature.id;\r\n    } else if (!request.material_nomenclature && !request.order_product_nomenclature) {\r\n      codeSecond = request.list_product.nomenclature.code;\r\n      nameSecond = request.list_product.nomenclature.name;\r\n      id = request.list_product.nomenclature.id;\r\n    }\r\n    return {code: codeSecond, name: nameSecond, id: id};\r\n  }\r\n\r\n  expandCollapseAllOrders(isToExpand = true): void {\r\n    const temp = cloneDeep(this.requestTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.requestTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  prepareTreeCategories(): void {\r\n    const categoriesTemp: { id: number, level: number, parentId: number, name: string, for_order_product?: any, listProduct?: any }[] = [];\r\n\r\n    this.hierarchyRequests.forEach(request => {\r\n      if (request.for_order_product) {\r\n        const parentProducts = request.for_order_product.nomenclature;\r\n        const isAdded = categoriesTemp.findIndex(el => el.id === parentProducts.id);\r\n        if (isAdded < 0) {\r\n          categoriesTemp.push({name: parentProducts.name, id: parentProducts.id, level: 0, parentId: null, for_order_product: request.for_order_product});\r\n        }\r\n      } else if (request.list_product) {\r\n        const parentProducts = request.list_product.list as List;\r\n        const isAdded = categoriesTemp.findIndex(el => el.id === parentProducts.nomenclature.id);\r\n        if (isAdded < 0) {\r\n          categoriesTemp.push({\r\n            name: parentProducts.nomenclature.name,\r\n            id: parentProducts.nomenclature.id,\r\n            level: 0,\r\n            parentId: null,\r\n            listProduct: request.list_product\r\n          });\r\n        }\r\n      }\r\n    });\r\n\r\n    this.requestTree = [];\r\n    categoriesTemp.forEach(cat => {\r\n      this.requestTree.push({\r\n        data: cat,\r\n        expanded: false,\r\n        parent: null\r\n      });\r\n    });\r\n\r\n    this.fillTree();\r\n  }\r\n\r\n  fillTree(): void {\r\n    this.requestTree = this.requestTree.map(node => {\r\n      return {\r\n        ...node,\r\n        children: []\r\n      };\r\n    });\r\n\r\n    this.hierarchyRequests.forEach(request => {\r\n      this.requestTree.forEach(node => {\r\n        let parentNomenclature;\r\n        if (request.for_order_product) {\r\n          parentNomenclature = request.for_order_product.nomenclature;\r\n        } else if (request.list_product) {\r\n          // @ts-ignore\r\n          parentNomenclature = request.list_product.list.nomenclature;\r\n        }\r\n\r\n        if (node.data.id === parentNomenclature.id) {\r\n          node.children.push({\r\n            data: {request, level: 4},\r\n            expanded: false,\r\n            children: []\r\n          });\r\n        }\r\n      });\r\n    });\r\n    this.requestTree.forEach(node => {\r\n      const materialChild = node.children.filter(child => child.data.request.material_nomenclature).sort((a, b) => {\r\n        return b.data.request.id - a.data.request.id;\r\n      });\r\n      const nonMaterialChild = node.children.filter(child => !child.data.request.material_nomenclature).sort((a, b) => {\r\n        return b.data.request.id - a.data.request.id;\r\n      });\r\n      node.children = [...materialChild, ...nonMaterialChild]\r\n    });\r\n  }\r\n\r\n  onNodeExpand($event: any) {\r\n    if ($event.node.data.level === 0 && $event.node.children.length === 1) {\r\n      this.loadPlanInfo($event.node);\r\n    }\r\n  }\r\n\r\n  loadPlanInfo(rowNode: any) {\r\n    const planId = rowNode.data.planId;\r\n    this.loadRootListTree(planId);\r\n  }\r\n\r\n  loadRootListTree(planId: number) {\r\n    this.tasksService.get([{name: 'for_root', value: planId}]).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(res => {\r\n      this.buildDetailedPlanTree(res, planId);\r\n    });\r\n  }\r\n\r\n  buildDetailedPlanTree(tasks: Task[], planId: number): void {\r\n    const planIndex = this.detailedRequestTree.findIndex(el => el.data.planId === planId);\r\n    this.detailedRequestTree[planIndex].children = [];\r\n    tasks.sort((a, b) => a.list_product.level - b.list_product.level);\r\n    tasks.filter(task => task.list_product.level !== 0).forEach(task => {\r\n      this.findLevelParent(task.list_product.level - 1, task);\r\n    });\r\n\r\n    // this.detailedRequestTree = [...this.detailedRequestTree];\r\n  }\r\n\r\n  findLevelParent(level: number, task: Task): void {\r\n    const temp = cloneDeep(this.detailedRequestTree);\r\n    temp.forEach(node => {\r\n      this.addToParentTree(node, level, task);\r\n    });\r\n    this.detailedRequestTree = temp;\r\n  }\r\n\r\n  addToParentTree(node: TreeNode, level: number, task: Task): void {\r\n    if (node.data.level === level && node.data.id === task.list_product.parent) {\r\n      const existingIndex = node.children.findIndex(el => el.data.id === task.list_product?.id);\r\n      if (existingIndex < 0) {\r\n        const foundInRequest = this.requests.find(el => el.list_product?.id === task.list_product?.id);\r\n\r\n        node.children.push({\r\n          data: {\r\n            id: task.list_product.id,\r\n            code: task.list_product.nomenclature.code,\r\n            name: task.list_product.nomenclature.name,\r\n            level: task.list_product.level,\r\n            request: foundInRequest\r\n          },\r\n          children: []\r\n        });\r\n      }\r\n    } else if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.addToParentTree(childNode, level, task);\r\n      });\r\n    }\r\n  }\r\n\r\n  onCancelItem(request: GroupedRequest) {\r\n    const requestId = request.id;\r\n    this.modalService.confirm('danger', 'Confirm').subscribe(res => {\r\n      if (res) {\r\n        const call = [];\r\n        const ids = request.ids ? request.ids : [];\r\n        const requestIds = [requestId, ...ids];\r\n        requestIds.forEach(id => {\r\n          call.push(this.requestsService.cancelRequest(id).pipe(tap(response  => {\r\n          })));\r\n        });\r\n\r\n        forkJoin([\r\n          ...call\r\n        ]).pipe(untilDestroyed(this)).subscribe((result) => {\r\n          if (result) {\r\n            let lastFreeValue = 0;\r\n            result.forEach((data, index) => {\r\n              if (data) {\r\n                let changeRequest = index === 0 ? request : request.requests.find(req => req.id === data.id);\r\n                changeRequest.required_quantity = data.required_quantity;\r\n                changeRequest.warehouse_quantity = data.warehouse_quantity;\r\n                if (!changeRequest.is_reserved) {\r\n                  if (data.warehouse_quantity > lastFreeValue) {\r\n                    lastFreeValue = data.warehouse_quantity;\r\n                  }\r\n                }\r\n              }\r\n            });\r\n\r\n            if (request.is_reserved && request.requests\r\n              .every(req => req.is_reserved)) {\r\n              request.available_quantity_sum = request.requests.map(req => req.warehouse_quantity)\r\n                .reduce((sum, quantity) => sum + quantity, request.warehouse_quantity);\r\n            } else {\r\n              if (request.ids.length === 0) {\r\n                request.available_quantity_sum = request.warehouse_quantity;\r\n              } else {\r\n                if (!request.is_reserved) {\r\n                  request.available_quantity_sum = lastFreeValue;\r\n                } else {\r\n                  request.available_quantity_sum = lastFreeValue;\r\n                }\r\n              }\r\n            }\r\n            request.total_required_quantity = request.requests.reduce(\r\n              (accumulator, currentValue) => accumulator + currentValue.required_quantity, request.required_quantity\r\n            );\r\n          }\r\n          this.selectedRequest = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  expandCollapseDetailedView(isToExpand = true): void {\r\n    const temp = cloneDeep(this.detailedRequestTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.detailedRequestTree = temp;\r\n  }\r\n\r\n  showImages(request: GroupedRequest) {\r\n    let nomenclature: Nomenclature;\r\n\r\n    if (request.material_nomenclature) {\r\n      nomenclature = request.material_nomenclature;\r\n    } else if (request.order_product_nomenclature) {\r\n      nomenclature = request.order_product_nomenclature;\r\n    } else if (!request.material_nomenclature && !request.order_product_nomenclature) {\r\n      nomenclature = request.list_product.nomenclature;\r\n    }\r\n    const nomenclatureId = nomenclature.id;\r\n    this.modalService.showImageGallery([], nomenclatureId, 1).pipe(untilDestroyed(this)).subscribe();\r\n  }\r\n\r\n  complete() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isLoading = false;\r\n        this.requestsService.complete(+this.orderId).pipe(untilDestroyed(this)).subscribe(() => this.router.navigate(['../'], {relativeTo: this.route}));\r\n      }\r\n    });\r\n  }\r\n\r\n  onGoProd(id: number) {\r\n    window.open(`${this.link}production/plan/tasks/` + id, '_blank');\r\n  }\r\n\r\n  goOrder(type, id) {\r\n    let link = '';\r\n\r\n    if (type == 1) {\r\n      link = `${this.link}procurement/orders/products/` + id;\r\n    }\r\n\r\n    if (type == 2) {\r\n      link = `${this.link}outsource/outsource-chain/products/` + id;\r\n    }\r\n\r\n    if (type == 3) {\r\n      link = `${this.link}production/orders/order/` + id;\r\n    }\r\n\r\n    window.open(link, '_blank');\r\n  }\r\n\r\n  goToOrder() {\r\n    let link = '';\r\n\r\n    if (this.order.accounting_type == 1) {\r\n      link = `${this.link}procurement/orders/products/` + this.order.id;\r\n    }\r\n\r\n    if (this.order.accounting_type == 2) {\r\n      link = `${this.link}outsource/outsource-chain/products/` + this.order.id;\r\n    }\r\n\r\n    if (this.order.accounting_type == 3) {\r\n      link = `${this.link}production/orders/order/` + this.order.id;\r\n    }\r\n\r\n    window.open(link, '_blank');\r\n  }\r\n\r\n  printPage() {\r\n    this.isShowPrint = true;\r\n    setTimeout(() => {\r\n      window.print();\r\n    });\r\n  }\r\n\r\n  printPageGrouped() {\r\n    this.isShowPrintGrouped = true;\r\n    setTimeout(() => {\r\n      window.print();\r\n    });\r\n  }\r\n\r\n  @HostListener(\"window:afterprint\", [])\r\n  onWindowAfterPrint() {\r\n    this.isShowPrintGrouped = false;\r\n    this.isShowPrint = false;\r\n  }\r\n\r\n  @HostListener('afterprint') printClosed() {\r\n    this.isShowPrintGrouped = false;\r\n    this.isShowPrint = false;\r\n  }\r\n\r\n  printAlbum() {\r\n    this.albumService.getNomenclaturesImages((<GroupedRequest[]>this.selectedRequest).map(r => {\r\n      if (r.material_nomenclature) {\r\n        return r.material_nomenclature;\r\n      } else if (r.order_product_nomenclature) {\r\n        return r.order_product_nomenclature;\r\n      } else if (!r.material_nomenclature && !r.order_product_nomenclature) {\r\n        return r.list_product?.nomenclature;\r\n      }\r\n    }));\r\n  }\r\n\r\n  togglePrintAlbumMode() {\r\n    this.selectedRequest = [];\r\n    this.isAlbumPrint = !this.isAlbumPrint;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  onStartScanning() {\r\n    this.clearQrResults();\r\n    this.expandCollapseAllOrders();\r\n\r\n    requestAnimationFrame(() => {\r\n      this.elementsRowsIds = [];\r\n      const elements = document.querySelectorAll(`[id^=row-]`);\r\n      elements.forEach((element) => {\r\n        this.elementsRowsIds.push(element.id);\r\n      });\r\n    });\r\n    this.isScanned = true;\r\n    this.scanningEnd = false;\r\n  }\r\n\r\n  clearQrResults() {\r\n    this.currentDisplayRowId = null;\r\n    this.foundRowsIds = [];\r\n  }\r\n\r\n  onScanned(data: any) {\r\n    this.scanningEnd = true;\r\n    this.isScanned = false;\r\n    this.scanForListProduct(data);\r\n  }\r\n\r\n  onCancelScanned() {\r\n    this.scanningEnd = true;\r\n    this.isScanned = false;\r\n  }\r\n\r\n  scanForListProduct(data: ScanResult = null) {\r\n    this.expandCollapseAllOrders();\r\n    this.lastScannedId = null;\r\n\r\n    requestAnimationFrame(() => {\r\n      this.elementsRowsIds = [];\r\n      const elements = document.querySelectorAll(`[id^=row-]`);\r\n      elements.forEach((element) => {\r\n        this.elementsRowsIds.push(element.id);\r\n      });\r\n    });\r\n\r\n    if (this.viewMode === ViewMode.HIERARCHY) {\r\n      this.expandCollapseAllOrders();\r\n    }\r\n\r\n    this.requestsService.sendDataProductionRequests(this.orderId, data).pipe(untilDestroyed(this)).subscribe(res => {\r\n      this.testFoundIdsOnScan(res);\r\n    });\r\n  }\r\n\r\n  testFoundIdsOnScan(res) {\r\n    const ids = res.map(el => el.item_id_changed);\r\n\r\n    let elementIndex;\r\n    this.listRequests.forEach((request, index) => {\r\n      const isMainIdChecked = ids.findIndex(id => id === request.id) > -1;\r\n      if (isMainIdChecked) {\r\n        request.is_scanned = true;\r\n        elementIndex = index;\r\n        this.lastScannedId = request.id;\r\n      }\r\n      request.requests.forEach(req => {\r\n        if (ids.findIndex(id => id === req.id) > -1) {\r\n          req.is_scanned = true;\r\n          elementIndex = index;\r\n          this.lastScannedId = request.id;\r\n        }\r\n      });\r\n    });\r\n\r\n    if (this.viewMode === ViewMode.LIST) {\r\n\r\n      if (elementIndex) {\r\n        this.firstPage = Math.floor(elementIndex / 10) * 10;\r\n      }\r\n    }\r\n\r\n    this.requestTree.forEach(node => {\r\n      node.children.forEach(child => {\r\n        const request = child.data.request;\r\n        const isMainIdChecked = ids.findIndex(id => id === request.id) > -1;\r\n        if (isMainIdChecked) {\r\n          request.is_scanned = true;\r\n          this.lastScannedId = request.id;\r\n        }\r\n        request.requests?.forEach(req => {\r\n          if (ids.findIndex(id => id === req.id) > -1) {\r\n            req.is_scanned = true;\r\n            this.lastScannedId = request.id;\r\n          }\r\n        });\r\n      });\r\n    });\r\n    if (this.viewMode === ViewMode.HIERARCHY) {\r\n\r\n      if (this.lastScannedId) {\r\n        this.scrollToElement('row-' + this.lastScannedId);\r\n      }\r\n    }\r\n  }\r\n\r\n  scrollToElement(rowId: string): void {\r\n    const element = document.getElementById(rowId);\r\n    element.scrollIntoView({behavior: 'smooth', block: 'center'});\r\n  }\r\n\r\n  isFullyScanned(request: any) {\r\n    if (request.requests?.length === 0) {\r\n      return request.is_scanned;\r\n    }\r\n    const mainScanned = request.is_scanned;\r\n    const allInnerScanned = !(request.requests?.findIndex(req => !req.is_scanned) > -1);\r\n    return mainScanned && allInnerScanned;\r\n  }\r\n\r\n  isPartlyScanned(request: any) {\r\n    if (request?.requests?.length === 0) {\r\n      return false;\r\n    }\r\n    const mainScanned = request.is_scanned;\r\n    const innerNeedScan = request.requests?.findIndex(req => !req.is_scanned) > -1;\r\n    return !this.isFullyScanned(request) && (mainScanned || !innerNeedScan);\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1 class=\"align-items-center d-flex\">\r\n        Requests for Order\r\n\r\n        <a\r\n          *ngIf=\"order?.accounting_type == 1\"\r\n          (click)=\"goOrder(1, order.id)\"\r\n          class=\"ml-2\"\r\n        >\r\n          {{orderId}}\r\n        </a>\r\n\r\n        <a *ngIf=\"order?.accounting_type == 2\"\r\n           (click)=\"goOrder(2, order.id)\"\r\n           class=\"ml-2\"\r\n        >\r\n          {{orderId}}\r\n        </a>\r\n\r\n        <a *ngIf=\"order?.accounting_type == 3\"\r\n           (click)=\"goOrder(3, order.id)\"\r\n           class=\"ml-2\"\r\n        >\r\n          {{orderId}}\r\n        </a>\r\n\r\n        <span *ngIf=\"order?.root_production_plans\" class=\"ml-2\">\r\n      <span *ngIf=\"order?.root_production_plans.length > 0\"\r\n            class=\"order-ids-container\">\r\n        <a (click)=\"onGoProd(order?.root_production_plans[0].id)\">\r\n          {{order?.root_production_plans[0].list_product.nomenclature.name}}\r\n        </a>\r\n        <div *ngIf=\"order?.root_production_plans.length > 1\" class=\"orders-ids\">\r\n          <div *ngFor=\"let root_plan of order.root_production_plans\">\r\n            <a (click)=\"onGoProd(root_plan.id)\">\r\n             {{root_plan.list_product.nomenclature.name}} ({{root_plan.id}})\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </span>\r\n    </span>\r\n        <div class=\"colors\">\r\n          <div class=\"colors__color\">\r\n            <div class=\"colors__color-block colors__color-block_scanned\"></div>\r\n            <p>Scanned</p>\r\n          </div>\r\n          <div class=\"colors__color\">\r\n            <div class=\"colors__color-block colors__color-block_partly-scanned\"></div>\r\n            <p>Partly Scanned</p>\r\n          </div>\r\n        </div>\r\n      </h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <p-menubar\r\n        class=\"ml-auto mr-2\"\r\n        [model]=\"printMenuItems\">\r\n      </p-menubar>\r\n      <button\r\n        [loading]=\"albumService.loading$ | async\"\r\n        pButton\r\n        *ngIf=\"isAlbumPrint\"\r\n        class=\"p-button-success mr-2\"\r\n        type=\"button\"\r\n        label=\"Print Album\"\r\n        (click)=\"printAlbum()\"\r\n        [disabled]=\"selectedRequest?.length === 0 || viewMode !== viewModes.LIST\"\r\n      >\r\n      </button>\r\n      <button\r\n        pButton\r\n        [icon]=\"isAlbumPrint ? 'pi pi-times' : 'pi pi-images'\"\r\n        class=\"mr-2\"\r\n        type=\"button\"\r\n        [label]=\"(isAlbumPrint ? 'Close' : 'Open') + ' Album Print'\"\r\n        (click)=\"togglePrintAlbumMode()\"\r\n        [disabled]=\"isLoading\"\r\n      >\r\n      </button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-check\"\r\n        label=\"Complete\"\r\n        (click)=\"complete()\"\r\n      ></button>\r\n\r\n      <button\r\n        pButton\r\n        class=\"p-button-danger ml-2\"\r\n        icon=\"pi pi-times\"\r\n        type=\"button\"\r\n        label=\"Cancelation\"\r\n        (click)=\"onCancel()\"\r\n      ></button>\r\n\r\n      <a\r\n        pButton\r\n        class=\"ml-2\"\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-double-right\"\r\n        [class.disabled]=\"!order || isAlbumPrint\"\r\n        label=\"Go to Order\"\r\n        (click)=\"goToOrder()\"\r\n      >\r\n      </a>\r\n\r\n      <!--      <a-->\r\n      <!--        pButton-->\r\n      <!--        class=\"ml-2\"-->\r\n      <!--        type=\"button\"-->\r\n      <!--        target=\"blank\"-->\r\n      <!--        *ngIf=\"order?.accounting_type == 1\"-->\r\n      <!--        [routerLink]=\"['/dash/procurement/orders/products', order.id]\"-->\r\n      <!--        label=\"Go to Order\"-->\r\n      <!--      >-->\r\n      <!--      </a>-->\r\n\r\n      <!--      <a-->\r\n      <!--        pButton-->\r\n      <!--        class=\"ml-2\"-->\r\n      <!--        type=\"button\"-->\r\n      <!--        target=\"blank\"-->\r\n      <!--        *ngIf=\"order?.accounting_type == 2\"-->\r\n      <!--        [routerLink]=\"['/dash/outsource/outsource-chain/products', order.id]\"-->\r\n      <!--        label=\"Go to Order\"-->\r\n      <!--      >-->\r\n      <!--      </a>-->\r\n\r\n      <!--      <a-->\r\n      <!--        pButton-->\r\n      <!--        class=\"ml-2\"-->\r\n      <!--        type=\"button\"-->\r\n      <!--        target=\"blank\"-->\r\n      <!--        *ngIf=\"order?.accounting_type == 3\"-->\r\n      <!--        [routerLink]=\"['/dash/production/orders/order', order.id]\"-->\r\n      <!--        label=\"Go to Order\"-->\r\n      <!--      >-->\r\n      <!--      </a>-->\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <ng-container *ngIf=\"viewMode === viewModes.LIST\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #dt\r\n          [paginator]=\"listRequests.length > 0\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"!dt.paginator\"\r\n          class=\"adaptive-table print-table\"\r\n          [rows]=\"10\"\r\n          [value]=\"listRequests\"\r\n          [(first)]=\"firstPage\"\r\n          [globalFilterFields]=\"['name']\"\r\n          dataKey=\"id\"\r\n          [selectionMode]=\"isAlbumPrint ? 'checkbox' : 'single'\"\r\n          [(selection)]=\"selectedRequest\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex table-caption\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedRequest && !isAlbumPrint\">Choose the Request to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto mr-2\"\r\n                [model]=\"requestMenuItems\"\r\n                [class.disabled]=\"!selectedRequest || isAlbumPrint\">\r\n              </p-menubar>\r\n\r\n              <button\r\n                class=\"mr-2 p-button-icon\"\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-camera\"\r\n                label=\"Scan QR Codes\"\r\n                (click)=\"onStartScanning()\"\r\n              >\r\n              </button>\r\n              <button\r\n                [disabled]=\"viewMode === viewModes.LIST\"\r\n                pButton\r\n                type=\"button\"\r\n                class=\"mr-2\"\r\n                label=\"List\"\r\n                icon=\"pi pi-list\"\r\n                (click)=\"changeView(viewModes.LIST)\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"mr-2\"\r\n                label=\"Hierarchy\"\r\n                icon=\"pi pi-table\"\r\n                (click)=\"changeView(viewModes.HIERARCHY)\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-th-large\"\r\n                label=\"Detailed Hierarchy\"\r\n                (click)=\"changeView(viewModes.DETAILED_HIERARCHY)\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"colgroup\">\r\n            <colgroup>\r\n              <col class=\"index-header\">\r\n            </colgroup>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"text-center\" style=\"width: 5%;\">\r\n                <div class=\"row-toggler\">\r\n                  <div class=\"toggle\">\r\n                    <p-tableHeaderCheckbox *ngIf=\"isAlbumPrint\"></p-tableHeaderCheckbox>\r\n                  </div>\r\n                  #\r\n                </div>\r\n              </th>\r\n              <th class=\"text-center\" style=\"width: 5%;\">ID</th>\r\n              <th style=\"width: 15%;\">Code</th>\r\n              <th style=\"width: 15%;\">Name</th>\r\n              <th style=\"width: 10%;\" class=\"text-center\">Serial Number</th>\r\n              <th style=\"width: 12%;\" class=\"text-center\">Technology</th>\r\n              <th class=\"text-center\" style=\"width: 14%;\">Required Quantity</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Locator</th>\r\n              <th class=\"text-center\" style=\"width: 4%;\">UOM</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Available Quantity</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-request let-i=\"rowIndex\">\r\n            <tr class=\"pagebreak\" [pSelectableRow]=\"request\"\r\n                [class.last-scanned]=\"request.id === lastScannedId\"\r\n                [class.partly-scanned]=\"isPartlyScanned(request)\"\r\n                [class.is-added-after-order-creation]=\"request.material_nomenclature\"\r\n                [class.qr-code-scanned]=\"isFullyScanned(request)\">\r\n              <td style=\"width: 5%;\" class=\"text-center\">\r\n                <div class=\"row-toggler\">\r\n                  <h3 class=\"td-title\">#</h3>\r\n                  <div class=\"toggle\">\r\n                    <p-tableCheckbox *ngIf=\"isAlbumPrint\" [value]=\"request\"></p-tableCheckbox>\r\n                  </div>\r\n                  {{i + 1}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 5%;\" class=\"text-center ids-container hovered-info\">\r\n                <h3 class=\"td-title\">ID</h3>\r\n                {{request.id}} <span *ngIf=\"request.ids?.length > 0\">L({{request.ids?.length + 1}})</span>\r\n\r\n                <pek-hover-detailed-info-component\r\n                  [moveLeft]=\"0\"\r\n                  *ngIf=\"request.ids?.length > 0\">\r\n                <span\r\n                  [class.is-fixed]=\"listRequests.length <= 10\"\r\n                  [class.is-absolute]=\"listRequests.length > 10\"\r\n                  [class.is-last]=\"listRequests.length - 10 <= i\"\r\n                  class=\"ids\">\r\n                  <div>\r\n                    {{request.id}}\r\n                  </div>\r\n                  <div *ngFor=\"let id of request.ids\">\r\n                    {{id}}\r\n                  </div>\r\n                </span>\r\n                </pek-hover-detailed-info-component>\r\n\r\n              </td>\r\n              <td style=\"width: 15%;\">\r\n                <h3 class=\"td-title\">Code</h3>\r\n                <div *ngIf=\"request.material_nomenclature\">\r\n                  {{request.material_nomenclature.code}}\r\n                </div>\r\n                <div *ngIf=\"request.order_product_nomenclature\">\r\n                  {{request.order_product_nomenclature.code}}\r\n                </div>\r\n                <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n                  {{request.list_product.nomenclature.code}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 15%;\" class=\"serial-numbers-container\">\r\n                <h3 class=\"td-title\">Name</h3>\r\n                <div *ngIf=\"request.material_nomenclature\">\r\n                  <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                  {{request.material_nomenclature.name}}\r\n                </div>\r\n                <div *ngIf=\"request.order_product_nomenclature\">\r\n                  <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                  {{request.order_product_nomenclature.name}}\r\n                </div>\r\n                <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n                  <b *ngIf=\"request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                  {{request.list_product.nomenclature.name}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Serial number</h3>\r\n                <span *ngIf=\"request.reserved_serial_products?.length === 1\">\r\n                {{request.reserved_serial_products[0].serial_number.type_with_number}}\r\n                </span>\r\n              </td>\r\n              <td style=\"width: 12%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Technology</h3>\r\n                <span *ngIf=\"request.technology\">{{request.technology}}</span>\r\n              </td>\r\n              <td style=\"width: 14%;\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Required Quantity</h3>\r\n                {{request.total_required_quantity}}\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Locator</h3>\r\n                <div *ngIf=\"request.locators\">\r\n                  <div *ngFor=\"let locator of request.unique_locators; let last=last\">\r\n                    {{locator.name}} <span *ngIf=\"!last\">,</span>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 4%\" class=\"text-center\">\r\n                <h3 class=\"td-title\">UOM</h3>\r\n                <div\r\n                  *ngIf=\"request.material_nomenclature\">\r\n                  {{request.material_nomenclature?.category?.unit_of_measure?.symbol ? request.material_nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                </div>\r\n                <div\r\n                  *ngIf=\"request.order_product_nomenclature\">\r\n                  {{request.order_product_nomenclature?.category?.unit_of_measure?.symbol ? request.order_product_nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                </div>\r\n                <div *ngIf=\"!request.material_nomenclature && !request.order_product_nomenclature\">\r\n                  {{request.list_product.nomenclature?.category?.unit_of_measure?.symbol ? request.list_product.nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 10%;\" class=\"text-center\">\r\n                <h3 class=\"td-title\">Available Quantity</h3>\r\n                {{request.available_quantity_sum}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr class=\"tr-spinner\">\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"dt.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!dt.paginator && !isLoading && listRequests.length > 0\" class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"dt.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"viewMode === viewModes.HIERARCHY\">\r\n      <p-treeTable\r\n        class=\"orders-tree\"\r\n        [value]=\"requestTree\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selectedRequestNode\"\r\n        scrollHeight=\"calc(100vh - 16.5rem)\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex table-caption\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedRequestNode\">Choose the Request to edit</p>\r\n            <p-menubar class=\"ml-auto mr-2\" [model]=\"requestNodeMenuItems\"\r\n                       [class.disabled]=\"!selectedRequestNode\"></p-menubar>\r\n            <button\r\n              class=\"mr-2 p-button-icon\"\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-camera\"\r\n              label=\"Scan QR Codes\"\r\n              (click)=\"onStartScanning()\"\r\n            >\r\n            </button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              class=\"mr-2\"\r\n              icon=\"pi pi-angle-down\"\r\n              label=\"Expand all\"\r\n              (click)=\"expandCollapseAllOrders()\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              class=\"mr-2\"\r\n              icon=\"pi pi-angle-up\"\r\n              label=\"Collapse all\"\r\n              (click)=\"expandCollapseAllOrders(false)\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              class=\"mr-2\"\r\n              icon=\"pi pi-list\"\r\n              label=\"List\"\r\n              (click)=\"changeView(viewModes.LIST)\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              class=\"mr-2\"\r\n              label=\"Hierarchy\"\r\n              icon=\"pi pi-table\"\r\n              (click)=\"changeView(viewModes.HIERARCHY)\"\r\n              [disabled]=\"viewMode === viewModes.HIERARCHY\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              label=\"Detailed Hierarchy\"\r\n              icon=\"pi pi-th-large\"\r\n              (click)=\"changeView(viewModes.DETAILED_HIERARCHY)\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 16%; padding-left: 3.3125rem\">ID</th>\r\n            <th style=\"width: 18%;\">Code</th>\r\n            <th style=\"width: 10%;\">Name</th>\r\n            <th style=\"width: 10%;\" class=\"text-center\">Serial Number</th>\r\n            <th style=\"width: 10%;\" class=\"text-center\">Technology</th>\r\n            <th class=\"text-center\" style=\"width: 10%;\">Required Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 4%;\">UOM</th>\r\n            <th class=\"text-center\" style=\"width: 10%;\">Locator</th>\r\n            <th class=\"text-center\" style=\"width: 12%;\">Available Quantity</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\" let-i=\"rowIndex\">\r\n          <tr\r\n            class=\"pagebreak\"\r\n            [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\" [ttSelectableRowDisabled]=\"rowData.level < 4\"\r\n            [class.last-scanned]=\"rowData.request?.id === lastScannedId\"\r\n            [id]=\"rowData.request ? 'row-' + rowData.request?.id : null\"\r\n            [class.partly-scanned]=\"rowData.request ? isPartlyScanned(rowData.request) : false\"\r\n            [class.qr-code-scanned]=\"rowData.request ? isFullyScanned(rowData.request) : false\"\r\n            [class.is-added-after-order-creation]=\"rowData.request?.material_nomenclature\"\r\n            [class.tr-toggler]=\"rowNode.node.children.length > 0\"\r\n          >\r\n            <td style=\"width: 16%;\" class=\"text-center ids-container\">\r\n              <h3 class=\"td-title\">ID</h3>\r\n              <div class=\"toggle-row hovered-info\">\r\n                <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                <span [class.bold]=\"rowData.level < 4\">\r\n                    {{rowData.name}}\r\n                  </span>\r\n                <span *ngIf=\"rowData.level === 4\">\r\n                     {{rowData.request.id}}\r\n                  <span *ngIf=\"rowData.request.ids?.length > 0\">L({{rowData.request.ids?.length + 1}})</span>\r\n\r\n                   <pek-hover-detailed-info-component\r\n                     [moveLeft]=\"0\"\r\n                     *ngIf=\"rowData.request.ids?.length > 0\">\r\n                                     <span class=\"ids\">\r\n                    <div>\r\n                      {{rowData.request.id}}\r\n                    </div>\r\n                    <div *ngFor=\"let id of rowData.request.ids\">\r\n                      {{id}}\r\n                    </div>\r\n                  </span>\r\n                  </pek-hover-detailed-info-component>\r\n                  </span>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 18%;\">\r\n              <h3 class=\"td-title\">Code</h3>\r\n              <div *ngIf=\"rowData.level === 4\">\r\n                <div *ngIf=\"rowData.request.material_nomenclature\">\r\n                  {{rowData.request.material_nomenclature.code}}\r\n                </div>\r\n                <div *ngIf=\"rowData.request.order_product_nomenclature\">\r\n                  {{rowData.request.order_product_nomenclature.code}}\r\n                </div>\r\n                <div *ngIf=\"!rowData.request.material_nomenclature && !rowData.request.order_product_nomenclature\">\r\n                  {{rowData.request.list_product.nomenclature.code}}\r\n                </div>\r\n              </div>\r\n\r\n            </td>\r\n            <td style=\"width: 10%;\" class=\"serial-numbers-container\">\r\n              <h3 class=\"td-title\">Name</h3>\r\n              <div *ngIf=\"rowData.level === 4\">\r\n                <div *ngIf=\"rowData.request.material_nomenclature\">\r\n                  <b *ngIf=\"rowData.request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                  {{rowData.request.material_nomenclature.name}}\r\n                </div>\r\n                <div *ngIf=\"rowData.request.order_product_nomenclature\">\r\n                  <b *ngIf=\"rowData.request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                  {{rowData.request.order_product_nomenclature.name}}\r\n                </div>\r\n                <div *ngIf=\"!rowData.request.material_nomenclature && !rowData.request.order_product_nomenclature\">\r\n                  <b *ngIf=\"rowData.request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                  {{rowData.request.list_product.nomenclature.name}}\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Serial Number</h3>\r\n              <div *ngIf=\"rowData.level === 4\">\r\n                <span *ngIf=\"rowData.request.reserved_serial_products?.length === 1\">\r\n                {{rowData.request.reserved_serial_products[0].serial_number.type_with_number}}\r\n                </span>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Technology</h3>\r\n              <div *ngIf=\"rowData.level === 4\">\r\n                <span *ngIf=\"rowData.request.technology\">{{rowData.request.technology}}</span>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 10%;\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Required Quantity</h3>\r\n              <div *ngIf=\"rowData.level === 4\">\r\n                {{rowData.request.total_required_quantity}}\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 14%;\" class=\"text-center\">\r\n              <h3 class=\"td-title\">UOM</h3>\r\n              <div *ngIf=\"rowData.level === 4\">\r\n                <div\r\n                  *ngIf=\"rowData.request.material_nomenclature\">\r\n                  {{rowData.request.material_nomenclature?.category?.unit_of_measure?.symbol ? rowData.request.material_nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                </div>\r\n                <div\r\n                  *ngIf=\"rowData.request.order_product_nomenclature\">\r\n                  {{rowData.request.order_product_nomenclature?.category?.unit_of_measure?.symbol ? rowData.request.order_product_nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                </div>\r\n                <div *ngIf=\"!rowData.request.material_nomenclature && !rowData.request.order_product_nomenclature\">\r\n                  {{rowData.request.list_product.nomenclature?.category?.unit_of_measure?.symbol ? rowData.request.list_product.nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Locator</h3>\r\n              <div *ngIf=\"rowData.level === 4\">\r\n                <div *ngIf=\"rowData.request.locators\">\r\n                  <div *ngFor=\"let locator of rowData.request.unique_locators; let last=last\">\r\n                    {{locator.name}}<span *ngIf=\"!last\">,</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td style=\"width: 12%;\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Available Quantity</h3>\r\n              <div *ngIf=\"rowData.level === 4\">\r\n                {{rowData.request.available_quantity_sum}}\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr class=\"tr-spinner\">\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"8\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-treeTable>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"viewMode === viewModes.DETAILED_HIERARCHY\">\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          class=\"orders-tree\"\r\n          [value]=\"detailedRequestTree\"\r\n          (onNodeExpand)=\"onNodeExpand($event)\"\r\n          scrollHeight=\"calc(100vh - 16.5rem)\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex table-caption\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"ml-auto mr-2\"\r\n                label=\"Expand all\"\r\n                icon=\"pi pi-angle-down\"\r\n                (click)=\"expandCollapseDetailedView()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"mr-2\"\r\n                label=\"Collapse all\"\r\n                icon=\"pi pi-angle-up\"\r\n                (click)=\"expandCollapseDetailedView(false)\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"mr-2\"\r\n                label=\"List\"\r\n                icon=\"pi pi-list\"\r\n                (click)=\"changeView(viewModes.LIST)\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"mr-2\"\r\n                label=\"Hierarchy\"\r\n                icon=\"pi pi-table\"\r\n                (click)=\"changeView(viewModes.HIERARCHY)\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                label=\"Detailed Hierarchy\"\r\n                icon=\"pi pi-th-large\"\r\n                [disabled]=\"viewMode === viewModes.DETAILED_HIERARCHY\"\r\n                (click)=\"changeView(viewModes.DETAILED_HIERARCHY)\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 16%; padding-left: 3.3125rem\">ID</th>\r\n              <th style=\"width: 18%;\">Code</th>\r\n              <th style=\"width: 20%;\">Name</th>\r\n              <th style=\"width: 10%;\" class=\"text-center\">Technology</th>\r\n              <th class=\"text-center\" style=\"width: 14%;\">Required Quantity</th>\r\n              <th class=\"text-center\" style=\"width: 10%;\">Locator</th>\r\n              <th class=\"text-center\" style=\"width: 12%;\">Available Quantity</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr\r\n              class=\"pagebreak\"\r\n              [ttRow]=\"rowNode\"\r\n              [class.in-plan]=\"rowData.request\"\r\n              [class.placeholder]=\"!rowData.request\"\r\n              [class.tr-toggler]=\"rowNode.node.children?.length > 0\"\r\n            >\r\n              <td style=\"width: 16%;\" class=\"text-center\">\r\n                <div class=\"toggle-row\">\r\n                  <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                  <span *ngIf=\"rowData.loading\" [class.bold]=\"!rowData.request\">\r\n                      {{rowData.loading}}\r\n                    </span>\r\n                  <span *ngIf=\"!rowData.request\" [class.bold]=\"!rowData.request\">\r\n                      {{rowData.id}}\r\n                    </span>\r\n                  <span *ngIf=\"rowData.request\">\r\n                     {{rowData.request.id}}\r\n                    </span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 18%;\">\r\n                   <span *ngIf=\"!rowData.request\" [class.bold]=\"!rowData.request\">\r\n                      {{rowData.code}}\r\n                  </span>\r\n                <div *ngIf=\"rowData.request\">\r\n                  <div *ngIf=\"rowData.request.material_nomenclature\">\r\n                    {{rowData.request.material_nomenclature.code}}\r\n                  </div>\r\n                  <div *ngIf=\"rowData.request.order_product_nomenclature\">\r\n                    {{rowData.request.order_product_nomenclature.code}}\r\n                  </div>\r\n                  <div *ngIf=\"!rowData.request.material_nomenclature && !rowData.request.order_product_nomenclature\">\r\n                    {{rowData.request.list_product.nomenclature.code}}\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 20%;\">\r\n                   <span *ngIf=\"!rowData.request\" [class.bold]=\"!rowData.request\">\r\n                      {{rowData.name}}\r\n                     {{rowData.serialNumber}}\r\n                  </span>\r\n                <div *ngIf=\"rowData.request\">\r\n                  <div *ngIf=\"rowData.request.material_nomenclature\">\r\n                    <b *ngIf=\"rowData.request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                    {{rowData.request.material_nomenclature.name}}\r\n                  </div>\r\n                  <div *ngIf=\"rowData.request.order_product_nomenclature\">\r\n                    <b *ngIf=\"rowData.request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                    {{rowData.request.order_product_nomenclature.name}}\r\n                  </div>\r\n                  <div *ngIf=\"!rowData.request.material_nomenclature && !rowData.request.order_product_nomenclature\">\r\n                    <b *ngIf=\"rowData.request?.list_product?.nomenclature?.bulk_or_serial === '1'\">(S)</b>\r\n                    {{rowData.request.list_product.nomenclature.name}}\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <div *ngIf=\"rowData.request\">\r\n                  <span *ngIf=\"rowData.request.technology\">{{rowData.request.technology}}</span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 14%;\" class=\"text-center\">\r\n                <div *ngIf=\"rowData.request\">\r\n                  {{rowData.request.required_quantity}}\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <div *ngIf=\"rowData.request\">\r\n                  <div *ngIf=\"rowData.request.locators\">\r\n                    <div *ngFor=\"let locator of rowData.request.locators\">\r\n                      {{locator.name}}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 12%;\" class=\"text-center\">\r\n                <div *ngIf=\"rowData.request\">\r\n                  {{rowData.request.available_quantity_sum}}\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr class=\"tr-spinner\">\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"9\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table selectionMode=\"single\" [value]=\"technicalEquipments\">\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"table-tools\" *ngIf=\"technicalEquipments\">\r\n            <h2 class=\"subtitle\">Technical Equipments</h2>\r\n            <div>\r\n            </div>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 35%\">Code</th>\r\n            <th style=\"width: 30%\">Name</th>\r\n            <th style=\"width: 30%\">Locator</th>\r\n            <th style=\"width: 30%\" class=\"text-center\">Quantity</th>\r\n            <!--              <th>Price Per Unit</th>-->\r\n            <!--              <th>Total Price</th>-->\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-technicalEquipment let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"technicalEquipment\" class=\"table-row\">\r\n            <td class=\"text-center\">{{i + 1}}</td>\r\n            <td>{{technicalEquipment.nomenclature.code}}</td>\r\n            <td>{{technicalEquipment.nomenclature.name}}</td>\r\n            <td>\r\n              <div *ngIf=\"technicalEquipment.locators.length > 0\">\r\n                <div *ngFor=\"let locator of technicalEquipment.locators; let last=last\">\r\n                  {{locator.name}}<span *ngIf=\"!last\">, </span>\r\n                </div>\r\n              </div>\r\n              <div *ngIf=\"technicalEquipment.locators.length < 1\">\r\n                <span *ngFor=\"let locator of technicalEquipment.available_locators; let last=last\">\r\n                  {{locator.name}}<span *ngIf=\"!last\">, </span>\r\n                </span>\r\n              </div>\r\n              <!--              {{technicalEquipment.warehouse_product ? technicalEquipment.warehouse_product.locator.name : ''}}-->\r\n            </td>\r\n            <td class=\"text-center\">{{technicalEquipment.max_initial_quantity}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td colspan=\"5\">\r\n              Choice ordered item\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\" let-columns>\r\n          <tr class=\"tr-spinner\">\r\n            <td class=\"text-center p-5\" [attr.colspan]=\"7\">\r\n              <i *ngIf=\"isLoading\" class=\"fas fa-circle-notch fa-spin fa-3x \"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"print-page\" *ngIf=\"isShowPrint\">\r\n  <div>\r\n    <pek-warehouse-production-request-print-page\r\n      [rootList]=\"rootList\"\r\n      [orderId]=\"+orderId\"\r\n      [requests]=\"listRequests\"\r\n      [currentReqDate]=\"currentReqDate\"\r\n      [technologies]=\"order?.ordered_items_technologies\"\r\n    ></pek-warehouse-production-request-print-page>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"print-page\" *ngIf=\"isShowPrintGrouped\">\r\n  <div>\r\n    <pek-warehouse-production-request-print-page\r\n      [rootList]=\"rootList\"\r\n      [orderedProducts]=\"orderedProductsForPrint\"\r\n      [orderId]=\"+orderId\"\r\n      [requests]=\"listRequests\"\r\n      [currentReqDate]=\"currentReqDate\"\r\n      [technologies]=\"order?.ordered_items_technologies\"\r\n    ></pek-warehouse-production-request-print-page>\r\n  </div>\r\n</div>\r\n\r\n<pek-qr-code-scanner\r\n  *ngIf=\"isScanned\"\r\n  (scanned)=\"onScanned($event)\"\r\n  (cancel)=\"onCancelScanned()\"\r\n></pek-qr-code-scanner>\r\n","import {Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ViewMode} from '../production-lists/production-lists.component';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {EAccountingType} from '@shared/pickers/accounting-type-picker/accounting-type-picker.component';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {environment} from '@env/environment';\r\nimport {\r\n  logExperimentalWarnings\r\n} from '@angular-devkit/build-angular/src/builders/browser-esbuild/experimental-warnings';\r\n\r\nclass ProductRequestListOrder extends Order {\r\n  ordered_items_technologies?: string[];\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-production-requests',\r\n  templateUrl: './warehouse-production-requests.component.html',\r\n  styleUrls: ['./warehouse-production-requests.component.scss']\r\n})\r\nexport class WarehouseProductionRequestsComponent implements OnInit, OnDestroy {\r\n  link = environment.link_url + 'dash/';\r\n\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  viewModeType = ViewMode;\r\n  viewMode: ViewMode = ViewMode.LIST;\r\n\r\n  isShowAll = false;\r\n  isStartOnePage = false;\r\n  count = 0;\r\n\r\n  tableScrollHeight = '29.625rem';\r\n  isHideFilters = false;\r\n\r\n  isLoading = true;\r\n  orders: ProductRequestListOrder[] = [];\r\n  selectedOrder: ProductRequestListOrder;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    page: 1,\r\n    created_after: [null],\r\n    created_before: [null],\r\n    closing_date_after: [null],\r\n    closing_date_before: [null],\r\n    category__in: [null],\r\n    root_categories: [null],\r\n    accounting_type: [null],\r\n    is_closed: [false],\r\n    is_production_requests_fully_completed: [null],\r\n  });\r\n\r\n  queryKey = 'created_after:null/created_before:null/closing_date_after:null/closing_date_before:null/category__in:null/root_categories:null/accounting_type:null/is_production_requests_fully_completed:null';\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'accounting_type__in', value: '2,3'},\r\n    {name: 'is_prepared', value: false},\r\n    {name: 'paginated', value: true},\r\n    {name: 'page', value: this.searchForm.get('page').value}\r\n  ];\r\n\r\n  requestsTypes = [\r\n    {name: 'Open Requests', value: false},\r\n    {name: 'Closed Requests', value: true},\r\n  ];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly orderService: OrderService,\r\n    private readonly fb: FormBuilder,\r\n    private adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getOrdersForPagination();\r\n  }\r\n\r\n  getOrdersForPagination() {\r\n    this.orderService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(orders => {\r\n      this.count = orders.count;\r\n      this.orders = orders.results;\r\n      this.prepareOrderItems();\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getOrders() {\r\n    this.orderService.get(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(orders => {\r\n      this.count = orders.length;\r\n      this.orders = orders;\r\n\r\n      this.prepareOrderItems();\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  prepareOrderItems() {\r\n    this.orders.forEach(order => {\r\n      order.ordered_items_technologies = [];\r\n      order.order_products.forEach(product => {\r\n        if (product.current_technology) {\r\n          const canAddTechnology = order.ordered_items_technologies\r\n            .findIndex(el => el === product.current_technology.name) < 0;\r\n          if (canAddTechnology) {\r\n            order.ordered_items_technologies.push(product.current_technology.name);\r\n          }\r\n        }\r\n      });\r\n\r\n      order.root_production_plans.forEach(plan => {\r\n        if (order.root_production_plans_display) {\r\n          const index = order.root_production_plans_display.findIndex(el =>\r\n            el.root_list.list_product.nomenclature.id === plan.list_product.nomenclature.id);\r\n          if (index >= 0) {\r\n            order.root_production_plans_display[index].list.push(plan);\r\n          } else {\r\n            order.root_production_plans_display.push({root_list: plan, list: [plan]});\r\n          }\r\n        } else {\r\n          order.root_production_plans_display = [\r\n            {root_list: plan, list: [plan]}\r\n          ];\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  searchProducts() {\r\n    this.isLoading = true;\r\n    this.destroy$.next(true);\r\n    this.selectedOrder = null;\r\n\r\n    const newQueryKey = `created_after:${this.searchForm.get('created_after').value}/created_before:${this.searchForm.get('created_before').value}/closing_date_after:${this.searchForm.get('closing_date_after').value}/closing_date_before:${this.searchForm.get('closing_date_before').value}/category__in:${this.searchForm.get('category__in').value}/root_categories:${this.searchForm.get('root_categories').value}/accounting_type:${this.searchForm.get('accounting_type').value}/is_production_requests_fully_completed:${this.searchForm.get('is_production_requests_fully_completed').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'accounting_type__in', value: '2,3'},\r\n      {name: 'is_prepared', value: false},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: 'true'});\r\n      this.query.push({name: 'page', value: this.searchForm.get('page').value});\r\n    }\r\n\r\n    if (this.searchForm.get('accounting_type').value !== null) {\r\n      this.query.push({name: 'accounting_type', value: this.searchForm.get('accounting_type').value});\r\n    }\r\n\r\n    if (this.searchForm.get('is_closed').value === false) {\r\n      this.query.push({name: 'is_prepared', value: false});\r\n    } else {\r\n      this.query.push({name: 'is_prepared', value: true});\r\n    }\r\n\r\n    if (this.searchForm.get('category__in').value) {\r\n      this.query.push({name: 'category__in', value: this.searchForm.get('category__in').value});\r\n    }\r\n\r\n    if (this.searchForm.get('root_categories').value) {\r\n      this.query.push({name: 'root_categories', value: this.searchForm.get('root_categories').value});\r\n    }\r\n\r\n    if (this.searchForm.get('root_categories').value) {\r\n      this.query.push({name: 'root_categories', value: this.searchForm.get('root_categories').value});\r\n    }\r\n\r\n    if (this.searchForm.get('root_categories').value) {\r\n      this.query.push({name: 'root_categories', value: this.searchForm.get('root_categories').value});\r\n    }\r\n\r\n    if (this.searchForm.get('created_after').value) {\r\n      this.query.push({\r\n        name: 'created_after',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('created_after').value)\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('created_before').value) {\r\n      this.query.push({\r\n        name: 'created_before',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('created_before').value)\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('closing_date_after').value) {\r\n      this.query.push({\r\n        name: 'closing_date_after',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('closing_date_after').value)\r\n      });\r\n      this.query.push({name: 'is_prepared', value: true});\r\n    }\r\n\r\n    if (this.searchForm.get('closing_date_before').value) {\r\n      this.query.push({\r\n        name: 'closing_date_before',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('closing_date_before').value)\r\n      });\r\n      this.query.push({name: 'is_prepared', value: true});\r\n    }\r\n\r\n    if (!this.isShowAll) {\r\n      this.getOrdersForPagination();\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.getOrders();\r\n    }\r\n  }\r\n\r\n  showProductionLists(plans: any[]): void {\r\n  }\r\n\r\n\r\n  getRootLists(rootLists: any[]): { list: any, count?: number }[] {\r\n    const lists: { list: any, count?: number }[] = [];\r\n\r\n    if (rootLists) {\r\n      rootLists.forEach((res: any) => {\r\n        if (res) {\r\n          const found = lists.find(el => el.list.root_nomenclature?.id === res.root_nomenclature?.id);\r\n          if (found) {\r\n            found.count++;\r\n          } else {\r\n            lists.push({list: res, count: 1});\r\n          }\r\n        }\r\n      });\r\n    }\r\n    return lists;\r\n  }\r\n\r\n  onChoiceViewType(mode: ViewMode) {\r\n    this.viewMode = mode;\r\n    this.selectedOrder = null;\r\n  }\r\n\r\n  setTableScrollHeight() {\r\n    if (this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '20.875rem';\r\n      return;\r\n    }\r\n\r\n    if (this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '18.75rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '27.5rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '29.625rem';\r\n      return;\r\n    }\r\n  }\r\n\r\n  toggleFilterVisibility() {\r\n    this.isHideFilters = !this.isHideFilters;\r\n    this.setTableScrollHeight();\r\n  }\r\n\r\n  onChoiceAccountingType(value: EAccountingType) {\r\n    this.searchForm.get('accounting_type').patchValue(value);\r\n    this.searchProducts();\r\n  }\r\n\r\n  onChoiceCategories(ids: string) {\r\n    this.searchForm.get('category__in').patchValue(ids);\r\n    this.searchProducts();\r\n  }\r\n\r\n  onChoiceProductStructureCategories(ids: string) {\r\n    this.searchForm.get('root_categories').patchValue(ids);\r\n    this.searchProducts();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchProducts();\r\n    }\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.setTableScrollHeight();\r\n    this.searchProducts();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.setTableScrollHeight();\r\n    this.searchProducts();\r\n  }\r\n\r\n  goProductionList(id: number) {\r\n    const link = `${this.link}production/plan/tasks/${id}`;\r\n    window.open(link, '_blank');\r\n  }\r\n\r\n\r\n  onGoProd(id: number) {\r\n    window.open(`${this.link}production/plan/tasks/` + id, '_blank');\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Production Requests</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        class=\"mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-table\"\r\n        label=\"Hierarchy\"\r\n        [disabled]=\"viewMode === viewModeType.HIERARCHY\"\r\n        (click)=\"onChoiceViewType(viewModeType.HIERARCHY)\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-list\"\r\n        label=\"List\"\r\n        [disabled]=\"viewMode === viewModeType.LIST\"\r\n        (click)=\"onChoiceViewType(viewModeType.LIST)\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n\r\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n      <div class=\"filters-visibility__header\">\r\n        <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n      </div>\r\n\r\n      <button\r\n        class=\"icon pi\"\r\n        [class.pi-angle-double-up]=\"!isHideFilters\"\r\n        [class.pi-angle-double-down]=\"isHideFilters\"\r\n        (click)=\"toggleFilterVisibility()\"\r\n        [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n        tooltipPosition=\"left\"\r\n      ></button>\r\n\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Type</label>\r\n              <pek-accounting-type-picker\r\n                (choiceAccountingType)=\"onChoiceAccountingType($event)\"\r\n              ></pek-accounting-type-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Categories</label>\r\n              <pek-multi-categories-picker\r\n                (choiceCategories)=\"onChoiceCategories($event)\"\r\n              ></pek-multi-categories-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Requests State</label>\r\n              <p-dropdown\r\n                [options]=\"requestsTypes\"\r\n                formControlName=\"is_closed\"\r\n                optionValue=\"value\"\r\n                optionLabel=\"name\"\r\n                placeholder=\"Select state\"\r\n                (ngModelChange)=\"searchProducts()\"\r\n              ></p-dropdown>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Product Structure Categories</label>\r\n              <pek-multi-product-structure-categories-picker\r\n                (choiceCategories)=\"onChoiceProductStructureCategories($event)\"\r\n              ></pek-multi-product-structure-categories-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Created Date From</label>\r\n              <p-calendar\r\n                formControlName=\"created_after\"\r\n                (ngModelChange)=\"searchProducts()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Created Date To</label>\r\n              <p-calendar\r\n                formControlName=\"created_before\"\r\n                (ngModelChange)=\"searchProducts()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Closing Date From</label>\r\n              <p-calendar\r\n                formControlName=\"closing_date_after\"\r\n                (ngModelChange)=\"searchProducts()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Closing Date To</label>\r\n              <p-calendar\r\n                formControlName=\"closing_date_before\"\r\n                (ngModelChange)=\"searchProducts()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <ng-container *ngIf=\"viewMode === viewModeType.LIST\">\r\n      <div class=\"page__table\">\r\n        <div class=\"table-pagination-preloader\">\r\n          <p-table\r\n            #dt\r\n            selectionMode=\"single\"\r\n            [scrollable]=\"true\"\r\n            [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n            dataKey=\"id\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedOrder\"\r\n            [value]=\"orders\"\r\n          >\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th class=\"text-center\" style=\"width: 5%;\">#</th>\r\n                <th class=\"text-center\" style=\"width: 5%;\">ID</th>\r\n                <th class=\"text-center\" style=\"width: 15%;\">Created Date</th>\r\n                <th class=\"text-center\" style=\"width: 15%;\">Closing Date</th>\r\n                <th style=\"width: 25%;\">Root Lists</th>\r\n                <th style=\"width: 25%;\">Technologies</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\" let-last='last'>\r\n              <tr [pSelectableRow]=\"order\">\r\n                <td class=\"text-center\" style=\"width: 5%;\">\r\n                  <h3 class=\"td-title\">#</h3>\r\n                  {{(this.searchForm.get('page').value - 1) * 10 + i + 1}}\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 5%;\">\r\n                  <h3 class=\"td-title\">ID</h3>\r\n                  <a [routerLink]=\"[order.id]\" target=\"_blank\">\r\n                    {{order.id}}\r\n                  </a>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 15%;\">\r\n                  <h3 class=\"td-title\">Created Date</h3>\r\n                  {{order.created | date:'dd/MM/yyyy HH:mm'}}\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 15%;\">\r\n                  <h3 class=\"td-title\">Closing Date</h3>\r\n                  {{order.production_requests_fully_completed | date:'dd/MM/yyyy HH:mm'}}\r\n                </td>\r\n                <td style=\"width: 25%;\">\r\n                  <div class=\"\">\r\n\r\n                  </div>\r\n                  <h3 class=\"td-title\">Root Lists</h3>\r\n                  <div class=\"root_product hovered-info\" *ngFor=\"let plan of order.root_production_plans_display\">\r\n                    <a (click)=\"goProductionList(plan.root_list.id)\">\r\n                      {{plan.root_list.list_product.nomenclature.name}} ({{plan.list.length}})\r\n\r\n                      <pek-hover-detailed-info-component\r\n                        [moveLeft]=\"0\"\r\n                        *ngIf=\"plan.list.length > 1\"\r\n                      >\r\n                        <div\r\n                             class=\"root_list_products\"\r\n                             [class.is-fixed]=\"orders.length <= 10\"\r\n                             [class.is-absolute]=\"orders.length > 10\"\r\n                             [class.is-last]=\"orders.length - 10 <= i\"\r\n                        >\r\n                          <div class=\"d-flex flex-column\">\r\n                            <a *ngFor=\"let list of plan.list\" (click)=\"goProductionList(list.id);\r\n                               $event.preventDefault();\r\n                                $event.stopPropagation()\">\r\n                              {{list.list_product.nomenclature.name}}\r\n                            </a>\r\n                          </div>\r\n                        </div>\r\n                      </pek-hover-detailed-info-component>\r\n\r\n                    </a>\r\n\r\n                  </div>\r\n                  <!--                  <div class=\"d-block\"-->\r\n                  <!--                       *ngFor=\"let item of getRootLists(order.root_production_plans); let idx = index\">-->\r\n\r\n                  <!--                    <ng-template [ngIf]=\"item.count === 1\">-->\r\n                  <!--                      <a-->\r\n                  <!--                        *ngIf=\"item.list.serial_numbers.length < 1\"-->\r\n                  <!--                        (click)=\"onGoProd(item.list.id)\"-->\r\n                  <!--                      >-->\r\n                  <!--                        {{item.list.list_product.nomenclature.code}}~{{item.list.list_product.nomenclature.name}}-->\r\n                  <!--                        ({{item.count}})-->\r\n                  <!--                      </a>-->\r\n\r\n                  <!--                      <ng-template *ngIf=\"item.list.serial_numbers.length >= 1\">-->\r\n                  <!--                        <a-->\r\n                  <!--                          *ngFor=\"let serial of item.list.serial_numbers\"-->\r\n                  <!--                          (click)=\"onGoProd(item.list.id)\"-->\r\n                  <!--                        >-->\r\n                  <!--                          {{item.list.list_product.nomenclature.code}}~{{item.list.list_product.nomenclature.name}}-->\r\n                  <!--                          ({{item.count}})-->\r\n                  <!--                        </a>-->\r\n                  <!--                      </ng-template>-->\r\n                  <!--                    </ng-template>-->\r\n\r\n                  <!--                    <ng-template [ngIf]=\"item.count > 1\">-->\r\n                  <!--                      <a (click)=\"showProductionLists(order.root_production_plans)\">-->\r\n                  <!--                        {{item.list.list_product.nomenclature.code}}~{{item.list.list_product.nomenclature.name}}-->\r\n                  <!--                        ({{item.count}})-->\r\n                  <!--                      </a>-->\r\n\r\n                  <!--                      <ng-template *ngIf=\"item.list.serial_numbers.length >= 1\">-->\r\n                  <!--                        <a (click)=\"showProductionLists(order.root_production_plans)\">-->\r\n                  <!--                          {{item.list.list_product.nomenclature.code}}~{{item.list.list_product.nomenclature.name}}-->\r\n                  <!--                          ({{item.count}})-->\r\n                  <!--                        </a>-->\r\n                  <!--                      </ng-template>-->\r\n                  <!--                    </ng-template>-->\r\n                  <!--                  </div>-->\r\n                </td>\r\n                <td style=\"width: 25%;\">\r\n                  <h3 class=\"td-title\">Technologies</h3>\r\n                  <span *ngFor=\"let tech of order.ordered_items_technologies; let last=last\">\r\n                    {{tech}}<span *ngIf=\"!last\">,</span>\r\n                  </span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center tr-spinner p-4\" [attr.colspan]=\"5\">\r\n                  <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"paginatorright\">\r\n              <p-button\r\n                type=\"button\"\r\n                (click)=\"dt.paginator=false\"\r\n                styleClass=\"p-button-text\"\r\n              >\r\n                All\r\n              </p-button>\r\n            </ng-template>\r\n          </p-table>\r\n          <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n            <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"paginator-wrapper\"\r\n          *ngIf=\"!isShowAll\"\r\n          [class.paginator-wrapper_hide]=\"orders.length === 0\"\r\n        >\r\n          <p-paginator\r\n            #paginator\r\n            [rows]=\"10\"\r\n            [totalRecords]=\"count\"\r\n            (onPageChange)=\"paginate($event)\"\r\n          >\r\n          </p-paginator>\r\n          <p-button\r\n            (click)=\"onShowAll()\"\r\n            class=\"paginator-all\"\r\n            type=\"button\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            All\r\n          </p-button>\r\n        </div>\r\n\r\n        <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"onShowPartial()\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </div>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"viewMode === viewModeType.HIERARCHY\">\r\n      In development\r\n    </ng-container>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #actionButtons>\r\n  <div class=\"action-buttons\">\r\n    <a\r\n      pButton\r\n      class=\"ml-auto\"\r\n      type=\"button\"\r\n      icon=\"pi pi-bars\"\r\n      label=\"Parts/Materials List\"\r\n      target=\"_blank\"\r\n      [class.disabled]=\"!selectedOrder\"\r\n      [routerLink]=\"[selectedOrder?.id]\"\r\n    ></a>\r\n  </div>\r\n</ng-template>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {EInvoiceProductQualityControl, InvoiceProduct} from '../../../../procurement/models/invoice-product';\r\nimport {InvoiceService} from '../../../../procurement/services/invoice.service';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {map, switchMap, tap} from 'rxjs/operators';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {QcListModalService} from '../../../services/qc-list-modal.service';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {WarehouseProduct} from '../../../models/warehouse-product';\r\nimport {OrderService} from '../../../../procurement/services/order.service';\r\nimport {TechnicalEquipmentsInUseService} from '../../../services/technical-equipments-in-use.service';\r\nimport {OrderTechnicalEquipment} from '../../../models/order-technical-equipment';\r\nimport {deepCopy} from 'deep-copy-ts';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-qc-invoice',\r\n  templateUrl: './warehouse-qc-invoice.component.html',\r\n  styleUrls: ['./warehouse-qc-invoice.component.scss']\r\n})\r\nexport class WarehouseQcInvoiceComponent implements OnInit, OnDestroy {\r\n  isLoading = true;\r\n\r\n  invoiceId: number;\r\n  invoiceProducts: InvoiceProduct[] = [];\r\n  selectedInvoiceProducts: InvoiceProduct[] = [];\r\n\r\n  orderTechnicalEquipments: OrderTechnicalEquipment[] = [];\r\n  selectedOrderTechnicalEquipment: OrderTechnicalEquipment[] = [];\r\n  orderId;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly invoiceService: InvoiceService,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly router: Router,\r\n    private readonly modalService: ModalService,\r\n    private qcListModalService: QcListModalService,\r\n    private readonly orderService: OrderService,\r\n    private technicalEquipmentsInUseService: TechnicalEquipmentsInUseService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getInvoices();\r\n\r\n\r\n    this.qcListModalService.notCompatibleItems$\r\n      .pipe(takeUntil(this.destroy$)).subscribe(items => {\r\n      items.forEach(item => {\r\n        const foundIndex = this.selectedInvoiceProducts.findIndex(product => product.id === item.id);\r\n        if (foundIndex > -1) {\r\n          this.selectedInvoiceProducts.splice(foundIndex, 1);\r\n          this.selectedInvoiceProducts = [...this.selectedInvoiceProducts];\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getInvoices() {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.invoiceId = +id),\r\n      switchMap(() => this.invoiceService.getProductsToAccept(this.invoiceId)),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(invoiceProducts => {\r\n      invoiceProducts.forEach(product => {\r\n        const technologyId = product.current_technology?.id;\r\n        const nomenclatureId = product.nomenclature.id;\r\n        const existing = this.invoiceProducts.find(el =>\r\n          el.nomenclature.id === nomenclatureId &&\r\n          el.current_technology?.id === technologyId);\r\n        if (existing) {\r\n          existing.totalQuantity = existing.totalQuantity += product.quantity;\r\n          existing.totalQuantityPassed = existing.totalQuantityPassed += product.passed_quantity;\r\n          existing.totalQuantityNotPassed = existing.totalQuantityNotPassed += product.not_passed_quantity;\r\n          // existing.totalSerialNumbers.push(...product.serial_numbers);\r\n          existing.invoiceProducts.push(product);\r\n        } else {\r\n          product.invoiceProducts = [deepCopy(product)];\r\n          product.totalQuantity = product.quantity;\r\n          product.totalQuantityPassed = product.passed_quantity;\r\n          product.totalQuantityNotPassed = product.not_passed_quantity;\r\n          // product.totalSerialNumbers = [...product.serial_numbers];\r\n          this.invoiceProducts.push(product);\r\n        }\r\n      });\r\n\r\n      // this.invoiceProducts = invoiceProducts;\r\n      this.isLoading = false;\r\n      this.getInvoiceInfo();\r\n    });\r\n  }\r\n\r\n  getInvoiceInfo() {\r\n    this.invoiceService.getById(this.invoiceId).subscribe(invoice => {\r\n      if (invoice.order.id) {\r\n        this.orderId = invoice.order.id;\r\n        this.loadTechnicalEquipments();\r\n      }\r\n    });\r\n  }\r\n\r\n  onAcceptToWarehouse() {\r\n    this.invoiceService.openAcceptToWarehouseModal(this.selectedInvoiceProducts, this.invoiceId).subscribe(response => {\r\n      if (response) {\r\n        this.selectedInvoiceProducts.forEach(product => {\r\n          this.invoiceProducts = this.invoiceProducts.filter(p => p.id !== product.id);\r\n        });\r\n\r\n        if (this.invoiceProducts.length === 0 && this.orderTechnicalEquipments.length === 0) {\r\n          this.router.navigate(['../../'], {relativeTo: this.route});\r\n        }\r\n\r\n        this.selectedInvoiceProducts = [];\r\n      }\r\n    });\r\n  }\r\n\r\n  onShowImages() {\r\n    this.modalService.showImageGallery([], this.selectedInvoiceProducts[0].nomenclature.id, 1).subscribe();\r\n  }\r\n\r\n  loadTechnicalEquipments() {\r\n    this.orderService.getTechnicalEquipmentToAccept(this.orderId).subscribe(technicalProducts => {\r\n      this.orderTechnicalEquipments = technicalProducts;\r\n      this.loadTechnicalEquipmentInUse();\r\n    });\r\n  }\r\n\r\n\r\n  loadTechnicalEquipmentInUse() {\r\n    const query = [{name: 'order_id', value: this.orderId}, {name: 'need_qc', value: true}]\r\n    this.technicalEquipmentsInUseService.get(query).subscribe(equipmentForQc => {\r\n      this.orderTechnicalEquipments.forEach(equipment => {\r\n        equipment.in_use_product_id = [];\r\n        const nomenclatureId = (equipment.nomenclature as Nomenclature).id;\r\n        let requiredQuantity = equipment.passed_quantity;\r\n        equipmentForQc.forEach(forQcEquipment => {\r\n          const canProcees = (forQcEquipment.warehouse_product as WarehouseProduct).nomenclature === nomenclatureId\r\n            && requiredQuantity > 0 && forQcEquipment.quantity > 0;\r\n          if (canProcees) {\r\n            const quantity = forQcEquipment.quantity;\r\n            if (quantity >= requiredQuantity) {\r\n              forQcEquipment.quantity -= requiredQuantity;\r\n              equipment.in_use_product_id.push({technicalEquipment: forQcEquipment, quantity: requiredQuantity, isolated_quantity: 0});\r\n\r\n              requiredQuantity = 0;\r\n            } else {\r\n              forQcEquipment.quantity -= quantity;\r\n              requiredQuantity -= quantity;\r\n              equipment.in_use_product_id.push({technicalEquipment: forQcEquipment, quantity: quantity, isolated_quantity: 0});\r\n            }\r\n          }\r\n        });\r\n\r\n        let isolateQuantity = equipment.not_passed_quantity;\r\n        equipmentForQc.forEach(forQcEquipment => {\r\n          const canProcees = (forQcEquipment.warehouse_product as WarehouseProduct).nomenclature === nomenclatureId\r\n            && isolateQuantity > 0 && forQcEquipment.quantity > 0;\r\n          if (canProcees) {\r\n            const quantity = forQcEquipment.quantity;\r\n            if (quantity >= isolateQuantity) {\r\n              forQcEquipment.quantity -= isolateQuantity;\r\n              equipment.in_use_product_id.push({technicalEquipment: forQcEquipment, quantity: 0, isolated_quantity: isolateQuantity});\r\n\r\n              isolateQuantity = 0;\r\n            } else {\r\n              forQcEquipment.quantity -= quantity;\r\n              isolateQuantity -= quantity;\r\n              equipment.in_use_product_id.push({technicalEquipment: forQcEquipment, quantity: 0, isolated_quantity: isolateQuantity});\r\n            }\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  onAcceptTechnicalEquipmentToWarehouse() {\r\n    this.orderService.openAcceptToWarehouseModalTechnicalEquipment(this.selectedOrderTechnicalEquipment, this.orderId).subscribe(response => {\r\n      if (response) {\r\n        this.selectedOrderTechnicalEquipment.forEach(product => {\r\n          this.orderTechnicalEquipments = this.orderTechnicalEquipments.filter(p => p.id !== product.id);\r\n        });\r\n\r\n        if (this.orderTechnicalEquipments.length === 0 && this.invoiceProducts.length === 0) {\r\n          this.router.navigate(['../../'], {relativeTo: this.route});\r\n        }\r\n\r\n        this.selectedOrderTechnicalEquipment = [];\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Invoice Items</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"invoiceProducts.length > 0\"\r\n        [(selection)]=\"selectedInvoiceProducts\"\r\n        [value]=\"invoiceProducts\"\r\n        [rows]=\"10\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"selectedInvoiceProducts.length === 0\">Choose the Invoice Products to Accept Warehouse</p>\r\n\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-images\"\r\n              label=\"Show Images\"\r\n              class=\"ml-auto mr-2\"\r\n              [disabled]=\"selectedInvoiceProducts.length > 1 || selectedInvoiceProducts.length === 0\"\r\n              (click)=\"onShowImages()\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-angle-double-right\"\r\n              label=\"Accept to warehouse\"\r\n              [disabled]=\"selectedInvoiceProducts.length === 0\"\r\n              (click)=\"onAcceptToWarehouse()\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\">\r\n              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 5%;\">#</th>\r\n            <th style=\"width: 17%;\">Code</th>\r\n            <th style=\"width: 20%;\">Name</th>\r\n            <th style=\"width: 20%;\" class=\"text-center\">Technology</th>\r\n            <th style=\"width: 20%;\" class=\"text-center\">Quantity</th>\r\n            <th style=\"width: 15%;\" class=\"text-center\">Passed</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\">\r\n              <p-tableCheckbox [value]=\"invoice\"></p-tableCheckbox>\r\n            </td>\r\n            <td style=\"width: 5%;\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 17%;\">{{invoice.nomenclature.code}}</td>\r\n            <td style=\"width: 20%;\">{{invoice.nomenclature.name}}</td>\r\n            <td style=\"width: 20%;\" class=\"text-center\">{{invoice.current_technology}}</td>\r\n            <td style=\"width: 20%;\" class=\"text-center\">{{invoice.totalQuantity}}</td>\r\n            <td style=\"width: 15%;\" class=\"text-center\">{{invoice.totalQuantityPassed}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && invoiceProducts.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt2\r\n        selectionMode=\"multiple\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"orderTechnicalEquipments.length > 0\"\r\n        [(selection)]=\"selectedOrderTechnicalEquipment\"\r\n        [value]=\"orderTechnicalEquipments\"\r\n        [rows]=\"10\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"selectedOrderTechnicalEquipment.length === 0\">Choose the Technical equipment to Accept Warehouse</p>\r\n\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-images\"\r\n              label=\"Show Images\"\r\n              class=\"ml-auto mr-2\"\r\n              [disabled]=\"selectedOrderTechnicalEquipment.length > 1 || selectedOrderTechnicalEquipment.length === 0\"\r\n              (click)=\"onShowImages()\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-angle-double-right\"\r\n              label=\"Accept to warehouse\"\r\n              [disabled]=\"selectedOrderTechnicalEquipment.length === 0\"\r\n              (click)=\"onAcceptTechnicalEquipmentToWarehouse()\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\">\r\n              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 5%;\">#</th>\r\n            <th style=\"width: 17%;\">Code</th>\r\n            <th style=\"width: 20%;\">Name</th>\r\n            <th style=\"width: 20%;\" class=\"text-center\">Quantity</th>\r\n            <th style=\"width: 15%;\" class=\"text-center\">Passed</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-orderTechnicalEquipments let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\">\r\n              <p-tableCheckbox [value]=\"orderTechnicalEquipments\"></p-tableCheckbox>\r\n            </td>\r\n            <td style=\"width: 5%;\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 17%;\">{{orderTechnicalEquipments.nomenclature.code}}</td>\r\n            <td style=\"width: 20%;\">{{orderTechnicalEquipments.nomenclature.name}}</td>\r\n            <td style=\"width: 20%;\" class=\"text-center\">{{orderTechnicalEquipments.quantity}}</td>\r\n            <td style=\"width: 15%;\" class=\"text-center\">{{orderTechnicalEquipments.passed_quantity}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt2.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt2.paginator && !isLoading && orderTechnicalEquipments.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt2.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {map, switchMap, tap} from 'rxjs/operators';\r\nimport {OrderProduct} from '../../../../procurement/models/order-product';\r\nimport {OrderService} from '../../../../procurement/services/order.service';\r\nimport {QcListModalService} from '../../../services/qc-list-modal.service';\r\nimport {OrderTechnicalEquipment} from '../../../models/order-technical-equipment';\r\nimport {TechnicalEquipmentsInUseService} from '../../../services/technical-equipments-in-use.service';\r\nimport {WarehouseProduct} from '../../../models/warehouse-product';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {deepCopy} from 'deep-copy-ts';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-qc-order',\r\n  templateUrl: './warehouse-qc-order.component.html',\r\n  styleUrls: ['./warehouse-qc-order.component.scss']\r\n})\r\nexport class WarehouseQcOrderComponent implements OnInit {\r\n\r\n  isLoading = true;\r\n\r\n  orderId: number;\r\n  orderProducts: OrderProduct[] = [];\r\n  selectedOrderProducts: OrderProduct[] = [];\r\n\r\n  orderTechnicalEquipments: OrderTechnicalEquipment[] = [];\r\n  selectedOrderTechnicalEquipment: OrderTechnicalEquipment[] = [];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly orderService: OrderService,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly router: Router,\r\n    private readonly modalService: ModalService,\r\n    private qcListModalService: QcListModalService,\r\n    private technicalEquipmentsInUseService: TechnicalEquipmentsInUseService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getInvoices();\r\n\r\n    this.qcListModalService.notCompatibleItems$\r\n      .pipe(takeUntil(this.destroy$)).subscribe(items => {\r\n      items.forEach(item => {\r\n        const foundIndex = this.selectedOrderProducts.findIndex(product => product.id === item.id);\r\n        if (foundIndex > -1) {\r\n          this.selectedOrderProducts.splice(foundIndex, 1);\r\n          this.selectedOrderProducts = [...this.selectedOrderProducts];\r\n        }\r\n      });\r\n    });\r\n\r\n    this.qcListModalService.notCompatibleTechnicalEquipments$\r\n      .pipe(takeUntil(this.destroy$)).subscribe(items => {\r\n      items.forEach(item => {\r\n        const foundIndex = this.selectedOrderTechnicalEquipment.findIndex(product => product.id === item.id);\r\n        if (foundIndex > -1) {\r\n          this.selectedOrderTechnicalEquipment.splice(foundIndex, 1);\r\n          this.selectedOrderTechnicalEquipment = [...this.selectedOrderTechnicalEquipment];\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  getInvoices() {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.orderId = +id),\r\n      switchMap(() => this.orderService.getProductsToAccept(this.orderId)),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(orderProducts => {\r\n      orderProducts.forEach(product => {\r\n        const technologyId = product.current_technology?.id;\r\n        const nomenclatureId = product.nomenclature.id;\r\n        const existing = this.orderProducts.find(el =>\r\n          el.nomenclature.id === nomenclatureId &&\r\n          el.current_technology?.id === technologyId);\r\n        if (existing) {\r\n          existing.totalQuantity = existing.totalQuantity += product.quantity;\r\n          existing.totalQuantityPassed = existing.totalQuantityPassed += product.passed_quantity;\r\n          existing.totalQuantityNotPassed = existing.totalQuantityNotPassed += product.not_passed_quantity;\r\n          // existing.totalSerialNumbers.push(...product.serial_numbers);\r\n          existing.orderProducts.push(product);\r\n        } else {\r\n          product.orderProducts = [deepCopy(product)];\r\n          product.totalQuantity = product.quantity;\r\n          product.totalQuantityPassed = product.passed_quantity;\r\n          product.totalQuantityNotPassed = product.not_passed_quantity;\r\n          // product.totalSerialNumbers = [...product.serial_numbers];\r\n          this.orderProducts.push(product);\r\n        }\r\n      });\r\n      this.orderProducts = [...this.orderProducts];\r\n\r\n      this.isLoading = false;\r\n      this.loadTechnicalEquipments();\r\n    });\r\n  }\r\n\r\n  loadTechnicalEquipments() {\r\n    this.orderService.getTechnicalEquipmentToAccept(this.orderId).subscribe(technicalProducts => {\r\n      this.orderTechnicalEquipments = technicalProducts;\r\n      this.loadTechnicalEquipmentInUse();\r\n    });\r\n  }\r\n\r\n  loadTechnicalEquipmentInUse() {\r\n    const query = [{name: 'order_id', value: this.orderId}, {name: 'need_qc', value: true}]\r\n    this.technicalEquipmentsInUseService.get(query).subscribe(equipmentForQc => {\r\n      this.orderTechnicalEquipments.forEach(equipment => {\r\n\r\n        equipment.in_use_product_id = [];\r\n        const nomenclatureId = (equipment.nomenclature as Nomenclature).id;\r\n        let requiredQuantity = equipment.passed_quantity;\r\n        equipmentForQc.forEach(forQcEquipment => {\r\n          const canProcees = (forQcEquipment.warehouse_product as WarehouseProduct).nomenclature === nomenclatureId\r\n            && requiredQuantity > 0 && forQcEquipment.quantity > 0;\r\n          if (canProcees) {\r\n            const quantity = forQcEquipment.quantity;\r\n            if (quantity >= requiredQuantity) {\r\n              forQcEquipment.quantity -= requiredQuantity;\r\n              equipment.in_use_product_id.push({technicalEquipment: forQcEquipment, quantity: requiredQuantity, isolated_quantity: 0});\r\n\r\n              requiredQuantity = 0;\r\n            } else {\r\n              forQcEquipment.quantity -= quantity;\r\n              requiredQuantity -= quantity;\r\n              equipment.in_use_product_id.push({technicalEquipment: forQcEquipment, quantity: quantity, isolated_quantity: 0});\r\n            }\r\n          }\r\n        });\r\n\r\n        let isolateQuantity = equipment.not_passed_quantity;\r\n        equipmentForQc.forEach(forQcEquipment => {\r\n          const canProcees = (forQcEquipment.warehouse_product as WarehouseProduct).nomenclature === nomenclatureId\r\n            && isolateQuantity > 0 && forQcEquipment.quantity > 0;\r\n          if (canProcees) {\r\n            const quantity = forQcEquipment.quantity;\r\n            if (quantity >= isolateQuantity) {\r\n              forQcEquipment.quantity -= isolateQuantity;\r\n              equipment.in_use_product_id.push({technicalEquipment: forQcEquipment, quantity: 0, isolated_quantity: isolateQuantity});\r\n\r\n              isolateQuantity = 0;\r\n            } else {\r\n              forQcEquipment.quantity -= quantity;\r\n              isolateQuantity -= quantity;\r\n              equipment.in_use_product_id.push({technicalEquipment: forQcEquipment, quantity: 0, isolated_quantity: isolateQuantity});\r\n            }\r\n          }\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  onAcceptToWarehouse() {\r\n    this.orderService.openAcceptToWarehouseModal(this.selectedOrderProducts, this.orderId).subscribe(response => {\r\n      if (response) {\r\n        this.selectedOrderProducts.forEach(product => {\r\n          this.orderProducts = this.orderProducts.filter(p => p.id !== product.id);\r\n        });\r\n\r\n        if (this.orderProducts.length === 0 && this.orderTechnicalEquipments.length === 0) {\r\n          this.router.navigate(['../../'], {relativeTo: this.route});\r\n        }\r\n\r\n        this.selectedOrderProducts = [];\r\n      }\r\n    });\r\n  }\r\n\r\n  onAcceptTechnicalEquipmentToWarehouse() {\r\n    this.orderService.openAcceptToWarehouseModalTechnicalEquipment(this.selectedOrderTechnicalEquipment, this.orderId).subscribe(response => {\r\n      if (response) {\r\n        this.selectedOrderTechnicalEquipment.forEach(product => {\r\n          this.orderTechnicalEquipments = this.orderTechnicalEquipments.filter(p => p.id !== product.id);\r\n        });\r\n\r\n        if (this.orderTechnicalEquipments.length === 0 && this.orderProducts.length === 0) {\r\n          this.router.navigate(['../../'], {relativeTo: this.route});\r\n        }\r\n\r\n        this.selectedOrderTechnicalEquipment = [];\r\n      }\r\n    });\r\n  }\r\n\r\n  onShowImages() {\r\n    this.modalService.showImageGallery([], this.selectedOrderProducts[0].nomenclature.id, 1).subscribe();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Order Items</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"multiple\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"orderProducts.length > 0\"\r\n        [(selection)]=\"selectedOrderProducts\"\r\n        [value]=\"orderProducts\"\r\n        [rows]=\"10\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"selectedOrderProducts.length === 0\">Choose the Order Products to Accept Warehouse</p>\r\n\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-images\"\r\n              label=\"Show Images\"\r\n              class=\"ml-auto mr-2\"\r\n              [disabled]=\"selectedOrderProducts.length > 1 || selectedOrderProducts.length === 0\"\r\n              (click)=\"onShowImages()\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-angle-double-right\"\r\n              label=\"Accept to warehouse\"\r\n              [disabled]=\"selectedOrderProducts.length === 0\"\r\n              (click)=\"onAcceptToWarehouse()\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\">\r\n              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 5%;\">#</th>\r\n            <th style=\"width: 17%;\">Code</th>\r\n            <th style=\"width: 20%;\">Name</th>\r\n            <th style=\"width: 20%;\" class=\"text-center\">Technology</th>\r\n            <th style=\"width: 20%;\" class=\"text-center\">Quantity</th>\r\n            <th style=\"width: 15%;\" class=\"text-center\">Passed</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\">\r\n              <p-tableCheckbox [value]=\"order\"></p-tableCheckbox>\r\n            </td>\r\n            <td style=\"width: 5%;\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 17%;\">{{order.nomenclature.code}}</td>\r\n            <td style=\"width: 20%;\">{{order.nomenclature.name}}</td>\r\n            <td style=\"width: 20%;\" class=\"text-center\">{{order.current_technology}}</td>\r\n            <td style=\"width: 20%;\" class=\"text-center\">{{order.totalQuantity}}</td>\r\n            <td style=\"width: 15%;\" class=\"text-center\">{{order.totalQuantityPassed}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && orderProducts.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt2\r\n        selectionMode=\"multiple\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"orderTechnicalEquipments.length > 0\"\r\n        [(selection)]=\"selectedOrderTechnicalEquipment\"\r\n        [value]=\"orderTechnicalEquipments\"\r\n        [rows]=\"10\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"selectedOrderTechnicalEquipment.length === 0\">Choose the Technical equipment to Accept Warehouse</p>\r\n\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-images\"\r\n              label=\"Show Images\"\r\n              class=\"ml-auto mr-2\"\r\n              [disabled]=\"selectedOrderTechnicalEquipment.length > 1 || selectedOrderTechnicalEquipment.length === 0\"\r\n              (click)=\"onShowImages()\"\r\n            ></button>\r\n            <button\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-angle-double-right\"\r\n              label=\"Accept to warehouse\"\r\n              [disabled]=\"selectedOrderTechnicalEquipment.length === 0\"\r\n              (click)=\"onAcceptTechnicalEquipmentToWarehouse()\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\">\r\n              <p-tableHeaderCheckbox></p-tableHeaderCheckbox>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 5%;\">#</th>\r\n            <th style=\"width: 17%;\">Code</th>\r\n            <th style=\"width: 20%;\">Name</th>\r\n            <th style=\"width: 20%;\" class=\"text-center\">Quantity</th>\r\n            <th style=\"width: 15%;\" class=\"text-center\">Passed</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-orderTechnicalEquipments let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 3%\">\r\n              <p-tableCheckbox [value]=\"orderTechnicalEquipments\"></p-tableCheckbox>\r\n            </td>\r\n            <td style=\"width: 5%;\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 17%;\">{{orderTechnicalEquipments.nomenclature.code}}</td>\r\n            <td style=\"width: 20%;\">{{orderTechnicalEquipments.nomenclature.name}}</td>\r\n            <td style=\"width: 20%;\" class=\"text-center\">{{orderTechnicalEquipments.quantity}}</td>\r\n            <td style=\"width: 15%;\" class=\"text-center\">{{orderTechnicalEquipments.passed_quantity}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt2.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt2.paginator && !isLoading && orderTechnicalEquipments.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt2.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {TreeNode} from 'primeng/api';\r\nimport {InvoiceService} from '../../../procurement/services/invoice.service';\r\nimport {Invoice} from '../../../procurement/models/invoice';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport * as cloneDeep from 'lodash/cloneDeep';\r\nimport {TreeService} from '@shared/services/tree.service';\r\nimport {OrderService} from '../../../procurement/services/order.service';\r\nimport {ProductStructureCategoryService} from '../../../product-structure/services/product-structure-category.service';\r\nimport {forkJoin} from 'rxjs';\r\n\r\ntype ViewType = 'list' | 'hierarchy'\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-qc',\r\n  templateUrl: './warehouse-qc.component.html',\r\n  styleUrls: ['./warehouse-qc.component.scss']\r\n})\r\nexport class WarehouseQcComponent implements OnInit {\r\n  isLoading = true;\r\n\r\n  categories: TreeNode[];\r\n\r\n  invoices: Invoice[] = [];\r\n  orders: Order[] = [];\r\n\r\n  invoiceTree: TreeNode<Invoice>[];\r\n\r\n  selectedInvoiceItem: Invoice;\r\n  selectedInvoicePurchaseItem: Invoice;\r\n  selectedOrderItem: Order;\r\n\r\n  invoiceManufacturedTree: TreeNode<Invoice>[];\r\n  invoicePurchasedTree: TreeNode<Invoice>[];\r\n\r\n  invoicesViewType: ViewType = 'hierarchy';\r\n  invoicesOrderType: ViewType = 'hierarchy';\r\n  invoicesPurchasedType: ViewType = 'hierarchy';\r\n\r\n  selectedInvoiceNode: TreeNode<Invoice>;\r\n  selectedOrderNode: TreeNode<Invoice>;\r\n  selectedPurchasedInvoiceNode: TreeNode;\r\n\r\n  ownProductionCategorizedList: TreeNode[];\r\n\r\n  invoicesList: Invoice[] = [];\r\n  ordersList: Order[] = [];\r\n  purchasedInvoicesList: Invoice[] = [];\r\n\r\n\r\n  constructor(\r\n    private readonly invoiceService: InvoiceService,\r\n    private readonly orderService: OrderService,\r\n    private readonly productStructureCategoryService: ProductStructureCategoryService,\r\n    private readonly treeService: TreeService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    forkJoin({\r\n      categories: this.productStructureCategoryService.get(),\r\n      invoices: this.invoiceService.get([\r\n        {name: 'completed', value: true},\r\n        {name: 'qc_completed', value: true},\r\n        {name: 'is_full_accepted', value: false}\r\n      ]),\r\n      orders: this.orderService.get([\r\n        {name: 'completed', value: true},\r\n        {name: 'qc_completed', value: true},\r\n        {name: 'is_full_accepted', value: false}\r\n      ])\r\n    }).subscribe(({categories, invoices, orders}) => {\r\n      this.categories = this.treeService.createTree(categories);\r\n\r\n      this.categories.unshift({\r\n        children: [],\r\n        data: {\r\n          name: 'Not Category',\r\n          id: -1,\r\n          level: 0,\r\n        },\r\n        expanded: false\r\n      })\r\n\r\n      this.ownProductionCategorizedList = cloneDeep(this.categories);\r\n\r\n      this.invoices = invoices;\r\n      this.makeUniqueProductionPlansInvoice(<Invoice[]>this.invoices);\r\n      this.resetProductPaymentTree();\r\n\r\n      this.orders = orders;\r\n      this.makeUniqueProductionPlansInvoice(<Order[]>this.orders);\r\n      this.fillOwnProductionWithData();\r\n\r\n      this.purchasedInvoicesList = this.invoices.filter(i => i.purchase_category);\r\n      this.invoicesList = this.invoices.filter(i => !i.purchase_category);\r\n      // console.log('this.invoicesList', this.invoicesList);\r\n      this.ordersList = this.orders.map(o => o);\r\n      // console.log('this.ordersList', this.ordersList);\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  makeUniqueProductionPlansInvoice(items: Invoice[] | Order[]): void {\r\n    items.forEach(item => {\r\n      item.unique_root_production_plans = [];\r\n      item.root_production_plans.forEach(plan => {\r\n        if (plan.root_nomenclature) {\r\n          const nomenclatureId = plan.root_nomenclature.id;\r\n          const existingIndex = item.unique_root_production_plans.findIndex(unPlan => unPlan.root_nomenclature.id === nomenclatureId);\r\n\r\n          if (existingIndex < 0) {\r\n            item.unique_root_production_plans.push(plan);\r\n          }\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private fillOwnProductionWithData() {\r\n    this.fillCategorizedTree();\r\n  }\r\n\r\n  fillCategorizedTree(): void {\r\n    const categoriesTemp: { id: number, level: number, parentId: number, name: string }[] = [];\r\n\r\n    this.orders.forEach(order => {\r\n      order.unique_root_production_plans.forEach(plan => {\r\n        if (plan.root_nomenclature && plan.root_nomenclature.root_category) {\r\n          const rootCatId = plan.root_nomenclature.root_category.id;\r\n          const rootCatName = plan.root_nomenclature.root_category.name;\r\n          const rootLevel = 1;\r\n\r\n          const catId = plan.root_nomenclature.id;\r\n          const catName = plan.root_nomenclature.name;\r\n          const catLevel = 2;\r\n\r\n          const rootExistsIndex = categoriesTemp.findIndex(cat => cat.id === rootCatId && rootLevel === cat.level);\r\n\r\n          if (rootExistsIndex < 0) {\r\n            categoriesTemp.push({\r\n              id: rootCatId,\r\n              level: rootLevel,\r\n              name: rootCatName,\r\n              parentId: null\r\n            });\r\n          }\r\n\r\n          const catExistsIndex = categoriesTemp.findIndex(cat => cat.id === catId && catLevel === cat.level);\r\n\r\n          if (catExistsIndex < 0) {\r\n            categoriesTemp.push({\r\n              id: catId,\r\n              level: catLevel,\r\n              name: catName,\r\n              parentId: rootCatId\r\n            });\r\n          }\r\n        } else if (plan.root_nomenclature && !plan.root_nomenclature.root_category) {\r\n          const rootCatId = -1;\r\n          const rootCatName = 'Not Category';\r\n          const rootLevel = 1;\r\n\r\n          const catId = plan.root_nomenclature.id;\r\n          const catName = plan.root_nomenclature.name;\r\n          const catLevel = 2;\r\n\r\n          const rootExistsIndex = categoriesTemp.findIndex(cat => cat.id === rootCatId && rootLevel === cat.level);\r\n\r\n          if (rootExistsIndex < 0) {\r\n            categoriesTemp.push({\r\n              id: rootCatId,\r\n              level: rootLevel,\r\n              name: rootCatName,\r\n              parentId: null\r\n            });\r\n          }\r\n\r\n          const catExistsIndex = categoriesTemp.findIndex(cat => cat.id === catId && catLevel === cat.level);\r\n\r\n          if (catExistsIndex < 0) {\r\n            categoriesTemp.push({\r\n              id: catId,\r\n              level: catLevel,\r\n              name: catName,\r\n              parentId: rootCatId\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      if (order.unique_root_production_plans.length < 1) {\r\n        const noCategoryIndex = this.ownProductionCategorizedList.findIndex(nodeInner => nodeInner.data.id === -1);\r\n\r\n        if (noCategoryIndex < 0) {\r\n          this.ownProductionCategorizedList.push({\r\n            data: {\r\n              id: -1,\r\n              level: 1,\r\n              name: 'No Root List',\r\n              parentId: null\r\n            },\r\n            expanded: false,\r\n            children: [\r\n              {\r\n                data: {order, plan: null, level: 4},\r\n                expanded: false,\r\n                children: []\r\n              }]\r\n          });\r\n        } else {\r\n          this.ownProductionCategorizedList[noCategoryIndex].children.push(\r\n            {\r\n              data: {order, plan: null, level: 4},\r\n              expanded: false,\r\n              children: []\r\n            }\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    const temp = cloneDeep(this.ownProductionCategorizedList);\r\n    temp.forEach(node => {\r\n      this.appendCategories(node, categoriesTemp);\r\n    });\r\n\r\n    temp.forEach(node => {\r\n      this.fillWithTheData(node, this.orders);\r\n    });\r\n\r\n    temp.forEach(node => {\r\n      this.removeUpdateEmptyCategories(node);\r\n    });\r\n\r\n    this.ownProductionCategorizedList = temp;\r\n  }\r\n\r\n  resetProductPaymentTree(): void {\r\n    const categories: { name: string, description: string, id: number, level?: number }[] = [];\r\n\r\n    this.invoices.forEach(invoice => {\r\n      const purchaseCategory = invoice.purchase_category;\r\n\r\n      if (purchaseCategory) {\r\n        const isAdded = categories.findIndex(el => el.id === purchaseCategory.id);\r\n        if (isAdded < 0) {\r\n          categories.push({\r\n            name: purchaseCategory.name,\r\n            id: purchaseCategory.id,\r\n            description: purchaseCategory.description\r\n          });\r\n        }\r\n      } else {\r\n        if (invoice.order.accounting_type === 1) {\r\n          const isAdded = categories.findIndex(el => el.id === -2);\r\n          if (isAdded < 0) {\r\n            categories.push({name: 'Production Lists Procurement', id: -2, description: '', level: 0});\r\n          }\r\n        }\r\n        if (invoice.order.accounting_type === 2) {\r\n          const isAdded = categories.findIndex(el => el.id === -1);\r\n          if (isAdded < 0) {\r\n            categories.push({name: 'Outsourcing', id: -1, description: '', level: 0});\r\n          }\r\n        }\r\n      }\r\n    });\r\n\r\n    this.invoiceTree = [];\r\n\r\n    categories.sort((a, b) => a.id - b.id);\r\n    categories.forEach(cat => {\r\n      this.invoiceTree.push({\r\n        data: <any>cat,\r\n        expanded: false,\r\n        parent: null\r\n      });\r\n    });\r\n\r\n    this.createPaymentTree();\r\n  }\r\n\r\n  createPaymentTree() {\r\n    this.invoiceTree = this.invoiceTree.map(node => {\r\n      return {\r\n        ...node,\r\n        children: []\r\n      };\r\n    });\r\n\r\n    this.invoiceTree.forEach(node => {\r\n      this.invoices.filter(invoice => invoice.purchase_category).forEach(invoice => {\r\n\r\n        const purchaseCategory = invoice.purchase_category;\r\n        if (purchaseCategory) {\r\n          if (purchaseCategory.id === node.data.id) {\r\n            node.children.push({\r\n              data: invoice,\r\n              expanded: false,\r\n              children: []\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      // Preparing Manufacturing Procurement\r\n      if (node.data.id === -2) {\r\n        const manProc = this.invoices.filter(invoice => !invoice.purchase_category && invoice.order.accounting_type === 1);\r\n        node.children = cloneDeep(this.categories);\r\n        this.prepareInnerTreeCategories(manProc, node);\r\n      }\r\n\r\n      // Preparing Outsourcing\r\n      if (node.data.id === -1) {\r\n        const outsourcing = this.invoices.filter(invoice => !invoice.purchase_category && invoice.order.accounting_type === 2);\r\n        node.children = cloneDeep(this.categories);\r\n        this.prepareInnerTreeCategories(outsourcing, node);\r\n      }\r\n    });\r\n\r\n    this.separatePurchasedAndManufactured();\r\n  }\r\n\r\n  prepareInnerTreeCategories(invoices: Invoice[], nodeInner: TreeNode): void {\r\n    const categoriesTemp: { id: number, level: number, parentId: number, name: string }[] = [];\r\n\r\n    invoices.forEach(order => {\r\n      order.unique_root_production_plans.forEach(plan => {\r\n        if (plan.root_nomenclature) {\r\n          const rootCatId = plan.root_nomenclature.root_category?.id;\r\n          const rootCatName = plan.root_nomenclature.root_category?.name;\r\n          const rootLevel = 1;\r\n\r\n          const catId = plan.root_nomenclature.id;\r\n          const catName = plan.root_nomenclature.name;\r\n          const catLevel = 2;\r\n\r\n          const rootExistsIndex = categoriesTemp.findIndex(cat => cat.id === rootCatId && rootLevel === cat.level);\r\n\r\n          if (rootExistsIndex < 0) {\r\n            categoriesTemp.push({\r\n              id: rootCatId,\r\n              level: rootLevel,\r\n              name: rootCatName,\r\n              parentId: null\r\n            });\r\n          }\r\n\r\n          const catExistsIndex = categoriesTemp.findIndex(cat => cat.id === catId && catLevel === cat.level);\r\n\r\n          if (catExistsIndex < 0) {\r\n            categoriesTemp.push({\r\n              id: catId,\r\n              level: catLevel,\r\n              name: catName,\r\n              parentId: rootCatId\r\n            });\r\n          }\r\n        } else {\r\n          const indexNoNomenclature = categoriesTemp.findIndex(cat => cat.id === -2);\r\n          if (indexNoNomenclature < 0) {\r\n            categoriesTemp.push({\r\n              id: -2,\r\n              level: 1,\r\n              name: 'No root nomenclature',\r\n              parentId: null\r\n            });\r\n          }\r\n        }\r\n      });\r\n\r\n      if (order.unique_root_production_plans.length < 1) {\r\n        const noCategoryIndex = nodeInner.children.findIndex(node => node.data.id === -1);\r\n\r\n        if (noCategoryIndex < 0) {\r\n          nodeInner.children.push({\r\n            data: {\r\n              id: -1,\r\n              level: 1,\r\n              name: 'No Root List',\r\n              parentId: null\r\n            },\r\n            expanded: false,\r\n            children: [\r\n              {\r\n                data: {order, plan: null, level: 4},\r\n                expanded: false,\r\n                children: []\r\n              }]\r\n          });\r\n        } else {\r\n          nodeInner.children[noCategoryIndex].children.push(\r\n            {\r\n              data: {order, plan: null, level: 4},\r\n              expanded: false,\r\n              children: []\r\n            }\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    const temp = cloneDeep(nodeInner.children);\r\n    temp.forEach(node => {\r\n      this.appendCategories(node, categoriesTemp);\r\n    });\r\n\r\n    temp.forEach(node => {\r\n      this.fillWithTheData(node, invoices);\r\n    });\r\n\r\n    temp.forEach(node => {\r\n      this.removeUpdateEmptyCategories(node);\r\n    });\r\n\r\n    nodeInner.children = temp;\r\n  }\r\n\r\n  separatePurchasedAndManufactured(): void {\r\n    this.invoicePurchasedTree = this.invoiceTree.filter(invoice => invoice.data.id >= 0);\r\n    this.invoiceManufacturedTree = this.invoiceTree.filter(invoice => invoice.data.id < 0);\r\n\r\n    console.log(this.invoiceTree);\r\n  }\r\n\r\n  appendCategories(node: TreeNode, categoriesTemp: { id: number, level: number, parentId: number, name: string }[]): void {\r\n    if (!node.children) {\r\n      node.children = [];\r\n    }\r\n\r\n    categoriesTemp.forEach(cat => {\r\n      if (cat.parentId === node.data.id) {\r\n        node.children.push({\r\n          data: {\r\n            id: cat.id,\r\n            name: cat.name,\r\n            level: cat.level,\r\n            parentId: cat.parentId,\r\n            isCategory: true,\r\n            categories: 0\r\n          },\r\n          expanded: false,\r\n          children: []\r\n        });\r\n      }\r\n    });\r\n\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.appendCategories(childNode, categoriesTemp);\r\n      });\r\n    }\r\n  }\r\n\r\n  fillWithTheData(node: TreeNode, orders): void {\r\n    if (!node.children) {\r\n      node.children = [];\r\n    }\r\n\r\n    if (node.data.isCategory) {\r\n      orders.forEach(order => {\r\n        order.unique_root_production_plans.forEach(plan => {\r\n          if (plan.root_nomenclature) {\r\n            const catId = plan.root_nomenclature.id;\r\n            if (node.data.id === catId) {\r\n              const existingCatChildIndex = node.children.findIndex(cat => cat.data.id === plan.list_product.nomenclature.id);\r\n\r\n              if (existingCatChildIndex < 0) {\r\n                node.children.push({\r\n                  data: {\r\n                    id: plan.list_product.nomenclature.id,\r\n                    name: plan.list_product.nomenclature.name,\r\n                    level: 3,\r\n                    categories: 0,\r\n                  },\r\n                  expanded: false,\r\n                  children: [{\r\n                    data: {order, plan, level: 4},\r\n                    expanded: false,\r\n                    children: []\r\n                  }]\r\n                });\r\n              } else {\r\n                node.children[existingCatChildIndex].children.push({\r\n                  data: {order, plan, level: 4},\r\n                  expanded: false,\r\n                  children: []\r\n                });\r\n              }\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.fillWithTheData(childNode, orders);\r\n      });\r\n    }\r\n  }\r\n\r\n  removeUpdateEmptyCategories(node: TreeNode): void {\r\n    if (!node.data.isCategory && !node.data.order) {\r\n      let hideFromTable = true;\r\n      const hasContent = node.children.filter(child => child.data.order).length > 0;\r\n      if (hasContent) {\r\n        hideFromTable = false;\r\n      }\r\n      node.children.forEach(childNode => {\r\n        checkForContent(childNode);\r\n      });\r\n\r\n      function checkForContent(childNode) {\r\n        if (hideFromTable) {\r\n          const hasContentInner = childNode.children.filter(child => child.data.order).length > 0;\r\n          if (hasContentInner) {\r\n            hideFromTable = false;\r\n          }\r\n        }\r\n        childNode.children.forEach(childNode2 => {\r\n          checkForContent(childNode2);\r\n        });\r\n      }\r\n\r\n      node.data.hideFromTable = hideFromTable;\r\n    }\r\n\r\n    node.data.categories = node.children.length;\r\n    if (node.children) {\r\n      node.children.forEach((childNode, indexChild) => {\r\n        this.removeUpdateEmptyCategories(childNode);\r\n      });\r\n    }\r\n  }\r\n\r\n  expandCollapseAllInvoices(isToExpand = true): void {\r\n    const temp = cloneDeep(this.invoiceManufacturedTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.invoiceManufacturedTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  expandCollapseAllOrders(isToExpand = true): void {\r\n    const temp = cloneDeep(this.ownProductionCategorizedList);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.ownProductionCategorizedList = temp;\r\n  }\r\n\r\n  expandCollapsePurchasedInvoices(isToExpand = true): void {\r\n    const temp = cloneDeep(this.invoicePurchasedTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.invoicePurchasedTree = temp;\r\n  }\r\n\r\n  onSelectInvoiceType(view: ViewType) {\r\n    this.invoicesViewType = view;\r\n  }\r\n\r\n  onSelectOrderType(view: ViewType) {\r\n    this.invoicesOrderType = view;\r\n  }\r\n\r\n  onSelectPurchaseType(view: ViewType) {\r\n    this.invoicesPurchasedType = view;\r\n  }\r\n\r\n  test() {\r\n    console.log(this.selectedInvoiceItem);\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>QC-Warehouse</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__tabs\">\r\n    <p-tabView class=\"custom-tabs\">\r\n      <p-tabPanel header=\"Production Lists Procurement and Outsourcing Invoices\" [selected]=\"true\">\r\n        <ng-container *ngIf=\"invoicesViewType === 'list'\">\r\n          <div class=\"page__table\">\r\n            <p-table\r\n              #dt\r\n              selectionMode=\"single\"\r\n              scrollHeight=\"calc(100vh - 18.8rem)\"\r\n              dataKey=\"id\"\r\n              [scrollable]=\"true\"\r\n              [paginator]=\"invoicesList.length > 0\"\r\n              [rows]=\"10\"\r\n              [(selection)]=\"selectedInvoiceItem\"\r\n              [value]=\"invoicesList\"\r\n            >\r\n              <ng-template pTemplate=\"caption\">\r\n                <div class=\"d-flex\">\r\n                  <p\r\n                    class=\"subtitle\"\r\n                    *ngIf=\"!selectedInvoiceItem\">\r\n                    Choose the Production Lists Procurement or Outsourcing Invoice to view Items\r\n                  </p>\r\n\r\n                  <a\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-bars\"\r\n                    label=\"Items\"\r\n                    class=\"ml-auto mr-2\"\r\n                    target=\"_blank\"\r\n                    [class.disabled]=\"!selectedInvoiceItem\"\r\n                    [routerLink]=\"['invoice', selectedInvoiceItem?.id]\"\r\n                  ></a>\r\n                  <button\r\n                    [disabled]=\"invoicesViewType === 'list'\"\r\n                    pButton\r\n                    type=\"button\"\r\n                    class=\"mr-2\"\r\n                    label=\"List\"\r\n                    icon=\"pi pi-list\"\r\n                    (click)=\"onSelectInvoiceType('list')\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    label=\"Hierarchy\"\r\n                    icon=\"pi pi-table\"\r\n                    (click)=\"onSelectInvoiceType('hierarchy')\"\r\n                  ></button>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                  <th style=\"width: 5%;\" class=\"text-center\">#</th>\r\n                  <th style=\"width: 25%\" class=\"text-center\">QC-Wh Started Date</th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Invoice Number</th>\r\n                  <th style=\"width: 15%\" class=\"text-center\">Supplier</th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n                  <th style=\"width: 15%\" class=\"text-center\">Items Reception Date</th>\r\n                  <th style=\"width: 20%\">Root List</th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n                <tr [pSelectableRow]=\"invoice\">\r\n                  <td style=\"width: 5%\" class=\"text-center\">\r\n                    {{i + 1}}\r\n                  </td>\r\n                  <td style=\"width: 25%\" class=\"text-center\">\r\n                    {{(invoice.order?.qc_wh_started_date ? invoice.order?.qc_wh_started_date : invoice.system_creation_date) | date:'dd/MM/yyyy HH:mm'}}\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    {{invoice.self_serial_number}} {{invoice.self_proforma_serial_number}}\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"text-center\">\r\n                    {{invoice.supplier?.name}}\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    {{invoice.order?.id}}\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"text-center\">\r\n                    {{invoice.items_reception_date | date: 'dd/MM/yyyy'}}\r\n                  </td>\r\n                  <td style=\"width: 20%\">\r\n                    <ng-container *ngIf=\"invoice.root_production_plans.length > 0\">\r\n                      {{invoice.root_production_plans[0].list_product.nomenclature.code}}\r\n                      ~{{invoice.root_production_plans[0].list_product.nomenclature.name}}\r\n                    </ng-container>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\">\r\n                <tr>\r\n                  <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n                    <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                    <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"paginatorright\">\r\n                <p-button\r\n                  type=\"button\"\r\n                  (click)=\"dt.paginator=false\"\r\n                  styleClass=\"p-button-text\"\r\n                >All\r\n                </p-button>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n          <div *ngIf=\"!dt.paginator && !isLoading && invoicesList.length > 0\" class=\"paginator-return-pagination\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"dt.paginator=true\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              Return pagination\r\n            </p-button>\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"invoicesViewType === 'hierarchy'\">\r\n          <div class=\"page__table\">\r\n            <p-treeTable\r\n              [value]=\"invoiceManufacturedTree\"\r\n              [scrollable]=\"true\"\r\n              selectionMode=\"single\"\r\n              scrollHeight=\"calc(100vh - 21.85rem)\"\r\n              [(selection)]=\"selectedInvoiceNode\"\r\n            >\r\n              <ng-template pTemplate=\"caption\">\r\n                <div class=\"d-flex\">\r\n                  <p\r\n                    class=\"subtitle\"\r\n                    *ngIf=\"!selectedInvoiceNode\">\r\n                    Choose the Production Lists Procurement or Outsourcing Invoice to view Items\r\n                  </p>\r\n                  <a\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-bars\"\r\n                    label=\"Items\"\r\n                    class=\"ml-auto mr-2\"\r\n                    target=\"_blank\"\r\n                    [class.disabled]=\"!selectedInvoiceNode\"\r\n                    [routerLink]=\"['invoice', selectedInvoiceNode?.data.order ? selectedInvoiceNode?.data.order.id : selectedInvoiceNode?.data.id]\"\r\n                    (click)=\"expandCollapseAllInvoices()\"\r\n                  ></a>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-angle-down\"\r\n                    label=\"Expand All\"\r\n                    class=\"mr-2\"\r\n                    (click)=\"expandCollapseAllInvoices()\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-angle-up\"\r\n                    class=\"mr-2\"\r\n                    label=\"Collapse All\"\r\n                    (click)=\"expandCollapseAllInvoices(false)\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    class=\"mr-2\"\r\n                    label=\"List\"\r\n                    icon=\"pi pi-list\"\r\n                    (click)=\"onSelectInvoiceType('list')\"\r\n                  ></button>\r\n                  <button\r\n                    [disabled]=\"invoicesViewType === 'hierarchy'\"\r\n                    pButton\r\n                    type=\"button\"\r\n                    label=\"Hierarchy\"\r\n                    icon=\"pi pi-table\"\r\n                    (click)=\"onSelectInvoiceType('hierarchy')\"\r\n                  ></button>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                  <th style=\"width: 30%; padding-left: 19px\">QC-Wh Started Date</th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Invoice Number</th>\r\n                  <th style=\"width: 15%\" class=\"text-center\">Supplier</th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n                  <th style=\"width: 15%\" class=\"text-center\">Items Reception Date</th>\r\n                  <th style=\"width: 20%\">Root List</th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template\r\n                pTemplate=\"body\"\r\n                let-invoiceNode\r\n                let-invoice=\"rowData\"\r\n              >\r\n                <tr\r\n                  [ttRow]=\"invoiceNode\"\r\n                  [ttSelectableRowDisabled]=\"!invoice.order && !invoice.level || invoice.level < 4\"\r\n                  [ttSelectableRow]=\"invoiceNode\"\r\n                  *ngIf=\"!invoice.hideFromTable\"\r\n                >\r\n                  <td style=\"width: 30%\" [class.text-center]=\"invoice.order\">\r\n                    <div class=\"table-toggle\">\r\n                      <p-treeTableToggler [rowNode]=\"invoiceNode\"></p-treeTableToggler>\r\n                      <ng-container *ngIf=\"!invoice.order\">\r\n                        <p [class.category-name]=\"invoice.level === 0 && invoice.hideFromTable !== false\">\r\n                          {{invoice.name}}\r\n                          <span *ngIf=\"invoice.description\">({{invoice.description}})</span>\r\n                          <i\r\n                            *ngIf=\"invoice.level < 4 && invoice.level > 0\"\r\n                            style=\"font-style: normal\"\r\n                          >\r\n                            ({{invoice.categories}})\r\n                          </i>\r\n                        </p>\r\n                      </ng-container>\r\n                      <ng-container *ngIf=\"invoice.level === 4\">\r\n                        <p>{{(invoice.order?.order?.qc_wh_started_date ? invoice.order?.order?.qc_wh_started_date :\r\n                          invoice.order.system_creation_date) | date:'dd/MM/yyyy HH:mm'}}</p>\r\n                      </ng-container>\r\n                    </div>\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    <span\r\n                      *ngIf=\"invoice.level === 4\"\r\n                      [class.text-warning]=\"invoice.order.unique_root_production_plans.length > 1\"\r\n                    >\r\n                    {{invoice.order.self_serial_number}} {{invoice.order.self_proforma_serial_number}}\r\n                    </span>\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"text-center\">\r\n                    <ng-container *ngIf=\"invoice.order\">\r\n                      {{invoice.supplier?.name}}\r\n                    </ng-container>\r\n                    <span *ngIf=\"invoice.level === 4\">\r\n                    {{invoice.order.supplier?.name}}\r\n                  </span>\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                  <span *ngIf=\"invoice.level === 4\">\r\n                    {{invoice.order.order?.id}}\r\n                  </span>\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"text-center\">\r\n                    <ng-container *ngIf=\"invoice.order\">\r\n                      {{invoice.order.items_reception_date | date: 'dd/MM/yyyy'}}\r\n                    </ng-container>\r\n                  </td>\r\n                  <td style=\"width: 20%\">\r\n                  <span *ngIf=\"invoice.level === 4 && invoice.plan\">\r\n                    {{invoice.plan.list_product.nomenclature.code}}~{{invoice.plan.list_product.nomenclature.name}}\r\n                  </span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\">\r\n                <tr>\r\n                  <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n                    <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                    <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-treeTable>\r\n          </div>\r\n        </ng-container>\r\n      </p-tabPanel>\r\n      <p-tabPanel header=\"Own Production Invoices\">\r\n        <ng-container *ngIf=\"invoicesOrderType === 'list'\">\r\n          <div class=\"page__table\">\r\n            <p-table\r\n              #ot\r\n              selectionMode=\"single\"\r\n              scrollHeight=\"calc(100vh - 18.8rem)\"\r\n              dataKey=\"id\"\r\n              [scrollable]=\"true\"\r\n              [paginator]=\"ordersList.length > 0\"\r\n              [rows]=\"10\"\r\n              [(selection)]=\"selectedOrderItem\"\r\n              [value]=\"ordersList\"\r\n            >\r\n              <ng-template pTemplate=\"caption\">\r\n                <div class=\"d-flex\">\r\n                  <p\r\n                    class=\"subtitle\"\r\n                    *ngIf=\"!selectedOrderItem\">\r\n                    hoose the Own Production Invoice to view Items\r\n                  </p>\r\n\r\n                  <a\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-bars\"\r\n                    label=\"Items\"\r\n                    class=\"ml-auto mr-2\"\r\n                    target=\"_blank\"\r\n                    [class.disabled]=\"!selectedOrderItem\"\r\n                    [routerLink]=\"['order', selectedOrderItem?.id]\"\r\n                  ></a>\r\n                  <button\r\n                    [disabled]=\"invoicesOrderType === 'list'\"\r\n                    pButton\r\n                    type=\"button\"\r\n                    class=\"mr-2\"\r\n                    label=\"List\"\r\n                    icon=\"pi pi-list\"\r\n                    (click)=\"onSelectOrderType('list')\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    label=\"Hierarchy\"\r\n                    icon=\"pi pi-table\"\r\n                    (click)=\"onSelectOrderType('hierarchy')\"\r\n                  ></button>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                  <th style=\"width: 5%;\" class=\"text-center\">#</th>\r\n                  <th style=\"width: 50%\" class=\"text-center\">\r\n                    QC-Wh Started Date\r\n                  </th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n                  <th style=\"width: 15%;\" class=\"text-center\">Items Reception Date</th>\r\n                  <th style=\"width: 20%;\">Root List</th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n                <tr [pSelectableRow]=\"order\">\r\n                  <td class=\"text-center\">{{i + 1}}</td>\r\n                  <td style=\"width: 50%\" class=\"text-center\">\r\n                    {{(order?.qc_wh_started_date ? order?.qc_wh_started_date : order?.created) | date:'dd/MM/yyyy HH:mm'}}\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    {{order.id}}\r\n                  </td>\r\n                  <td style=\"width: 15%;\" class=\"text-center\">\r\n                    {{order.items_reception_date | date: 'dd/MM/yyyy'}}\r\n                  </td>\r\n\r\n                  <td style=\"width: 20%;\">\r\n                    <div *ngFor=\"let root_plan of order.unique_root_production_plans\">\r\n                      {{root_plan.list_product.nomenclature.code}}~{{root_plan.list_product.nomenclature.name}}\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\">\r\n                <tr>\r\n                  <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n                    <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                    <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"paginatorright\">\r\n                <p-button\r\n                  type=\"button\"\r\n                  (click)=\"ot.paginator=false\"\r\n                  styleClass=\"p-button-text\"\r\n                >All\r\n                </p-button>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n          <div *ngIf=\"!ot.paginator && !isLoading && ordersList.length > 0\" class=\"paginator-return-pagination\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"ot.paginator=true\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              Return pagination\r\n            </p-button>\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"invoicesOrderType === 'hierarchy'\">\r\n          <div class=\"page__table\">\r\n            <p-treeTable\r\n              [value]=\"ownProductionCategorizedList\"\r\n              selectionMode=\"single\"\r\n              scrollHeight=\"calc(100vh - 21.85rem)\"\r\n              [(selection)]=\"selectedOrderNode\"\r\n              [scrollable]=\"true\"\r\n            >\r\n              <ng-template pTemplate=\"caption\">\r\n                <div class=\"d-flex\">\r\n                  <p\r\n                    class=\"subtitle\"\r\n                    *ngIf=\"!selectedOrderNode\">\r\n                    Choose the Own Production Invoice to view Items\r\n                  </p>\r\n\r\n                  <a\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-bars\"\r\n                    label=\"Items\"\r\n                    class=\"ml-auto mr-2\"\r\n                    target=\"_blank\"\r\n                    [class.disabled]=\"!selectedOrderNode\"\r\n                    [routerLink]=\"['order', selectedOrderNode?.data.order.id]\"\r\n                  ></a>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-angle-down\"\r\n                    label=\"Expand All\"\r\n                    class=\"mr-2\"\r\n                    (click)=\"expandCollapseAllOrders()\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-angle-up\"\r\n                    class=\"mr-2\"\r\n                    label=\"Collapse All\"\r\n                    (click)=\"expandCollapseAllOrders(false)\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    class=\"mr-2\"\r\n                    label=\"List\"\r\n                    icon=\"pi pi-list\"\r\n                    (click)=\"onSelectOrderType('list')\"\r\n                  ></button>\r\n                  <button\r\n                    [disabled]=\"invoicesOrderType === 'hierarchy'\"\r\n                    pButton\r\n                    type=\"button\"\r\n                    label=\"Hierarchy\"\r\n                    icon=\"pi pi-table\"\r\n                    (click)=\"onSelectOrderType('hierarchy')\"\r\n                  ></button>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                  <th style=\"width: 55%; padding-left: 19px\">\r\n                    QC-Wh started Date\r\n                  </th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n                  <th style=\"width: 15%;\" class=\"text-center\">Items Reception Date</th>\r\n                  <th style=\"width: 20%;\">Root List</th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n                <tr\r\n                  [ttRow]=\"rowNode\"\r\n                  [ttSelectableRow]=\"rowNode\"\r\n                  [ttSelectableRowDisabled]=\"rowData.level < 4\"\r\n                  *ngIf=\"!rowData.hideFromTable\"\r\n                >\r\n                  <td style=\"width: 55%\" class=\"text-center\">\r\n                    <div class=\"table-toggle\">\r\n                      <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                      <span [class.category-name]=\"!rowData.level\">\r\n                      {{rowData.name}}\r\n\r\n                        <i *ngIf=\"rowData.level < 4\" style=\"font-style: normal\">\r\n                        ({{rowData.categories}})\r\n                      </i>\r\n                    </span>\r\n                      <span *ngIf=\"rowData.order\">\r\n                      {{(rowData.order?.qc_wh_started_date ? rowData.order?.qc_wh_started_date : rowData.order?.created) | date:'dd/MM/yyyy HH:mm'}}\r\n                    </span>\r\n                    </div>\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                  <span\r\n                    *ngIf=\"rowData.order\"\r\n                    [class.text-warning]=\"rowData.order.unique_root_production_plans.length > 1\"\r\n                  >\r\n                    {{rowData.order.id}}\r\n                  </span>\r\n                  </td>\r\n                  <td style=\"width: 15%;\" class=\"text-center\">\r\n                    <ng-container *ngIf=\"rowData.order\">\r\n                      {{rowData.order.items_reception_date | date: 'dd/MM/yyyy'}}\r\n                    </ng-container>\r\n                  </td>\r\n                  <td style=\"width: 20%;\">\r\n                    <ng-container *ngIf=\"rowData.order && rowData.plan\">\r\n                      {{rowData.plan.list_product.nomenclature.code}}~{{rowData.plan.list_product.nomenclature.name}}\r\n                    </ng-container>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\">\r\n                <tr>\r\n                  <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n                    <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                    <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-treeTable>\r\n          </div>\r\n        </ng-container>\r\n      </p-tabPanel>\r\n      <p-tabPanel header=\"General Procurement Invoices\">\r\n        <ng-container *ngIf=\"invoicesPurchasedType === 'list'\">\r\n          <div class=\"page__table\">\r\n            <p-table\r\n              #pt\r\n              selectionMode=\"single\"\r\n              scrollHeight=\"calc(100vh - 18.8rem)\"\r\n              dataKey=\"id\"\r\n              [scrollable]=\"true\"\r\n              [paginator]=\"purchasedInvoicesList.length > 0\"\r\n              [rows]=\"10\"\r\n              [(selection)]=\"selectedInvoicePurchaseItem\"\r\n              [value]=\"purchasedInvoicesList\"\r\n            >\r\n              <ng-template pTemplate=\"caption\">\r\n                <div class=\"d-flex\">\r\n                  <p\r\n                    class=\"subtitle\"\r\n                    *ngIf=\"!selectedInvoicePurchaseItem\">\r\n                    Choose the General Procurement Invoice to view Items\r\n                  </p>\r\n\r\n                  <a\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-bars\"\r\n                    label=\"Items\"\r\n                    class=\"ml-auto mr-2\"\r\n                    target=\"_blank\"\r\n                    [class.disabled]=\"!selectedInvoicePurchaseItem\"\r\n                    [routerLink]=\"['invoice', selectedInvoicePurchaseItem?.id]\"\r\n                  ></a>\r\n                  <button\r\n                    [disabled]=\"invoicesPurchasedType=== 'list'\"\r\n                    pButton\r\n                    type=\"button\"\r\n                    class=\"mr-2\"\r\n                    label=\"List\"\r\n                    icon=\"pi pi-list\"\r\n                    (click)=\"onSelectPurchaseType('list')\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    label=\"Hierarchy\"\r\n                    icon=\"pi pi-table\"\r\n                    (click)=\"onSelectPurchaseType('hierarchy')\"\r\n                  ></button>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                  <th style=\"width: 5%;\" class=\"text-center\">#</th>\r\n                  <th style=\"width: 25%\" class=\"text-center\">QC-Wh Started Date</th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Invoice Number</th>\r\n                  <th style=\"width: 15%\" class=\"text-center\">Supplier</th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n                  <th style=\"width: 15%\" class=\"text-center\">Items Reception Date</th>\r\n                  <th style=\"width: 20%\">Root List</th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n                <tr [pSelectableRow]=\"invoice\">\r\n                  <td style=\"width: 5%\" class=\"text-center\">\r\n                    {{i + 1}}\r\n                  </td>\r\n                  <td style=\"width: 25%\" class=\"text-center\">\r\n                    {{(invoice.order?.qc_wh_started_date ? invoice.order?.qc_wh_started_date :\r\n                    invoice.system_creation_date) | date:'dd/MM/yyyy HH:mm'}}\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    {{invoice.self_serial_number}} {{invoice.self_proforma_serial_number}}\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"text-center\">\r\n                    {{invoice.supplier?.name}}\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    {{invoice.order?.id}}\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"text-center\">\r\n                    {{invoice.items_reception_date | date: 'dd/MM/yyyy'}}\r\n                  </td>\r\n                  <td style=\"width: 20%\">\r\n                    <ng-container *ngIf=\"invoice.root_production_plans.length > 0\">\r\n                      {{invoice.root_production_plans[0].list_product.nomenclature.code}}\r\n                      ~{{invoice.root_production_plans[0].list_product.nomenclature.name}}\r\n                    </ng-container>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\">\r\n                <tr>\r\n                  <td class=\"text-center p-4\" [attr.colspan]=\"7\">\r\n                    <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                    <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"paginatorright\">\r\n                <p-button\r\n                  type=\"button\"\r\n                  (click)=\"pt.paginator=false\"\r\n                  styleClass=\"p-button-text\"\r\n                >All\r\n                </p-button>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n          <div *ngIf=\"!pt.paginator && !isLoading && purchasedInvoicesList.length > 0\" class=\"paginator-return-pagination\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"pt.paginator=true\"\r\n              styleClass=\"p-button-text\"\r\n            >\r\n              Return pagination\r\n            </p-button>\r\n          </div>\r\n        </ng-container>\r\n        <ng-container *ngIf=\"invoicesPurchasedType === 'hierarchy'\">\r\n          <div class=\"page__table\">\r\n            <p-treeTable\r\n              [value]=\"invoicePurchasedTree\"\r\n              [scrollable]=\"true\"\r\n              selectionMode=\"single\"\r\n              scrollHeight=\"calc(100vh - 21.85rem)\"\r\n              [(selection)]=\"selectedPurchasedInvoiceNode\"\r\n            >\r\n              <ng-template pTemplate=\"caption\">\r\n                <div class=\"d-flex\">\r\n                  <p\r\n                    class=\"subtitle\"\r\n                    *ngIf=\"!selectedOrderNode\">\r\n                    Choose the General Procurement Invoice to view Items\r\n                  </p>\r\n\r\n                  <a\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-bars\"\r\n                    label=\"Items\"\r\n                    class=\"ml-auto mr-2\"\r\n                    target=\"_blank\"\r\n                    [class.disabled]=\"!selectedPurchasedInvoiceNode\"\r\n                    [routerLink]=\"['invoice', selectedPurchasedInvoiceNode?.data.invoice ? selectedPurchasedInvoiceNode?.data.invoice.id :selectedPurchasedInvoiceNode?.data.id]\"\r\n                  ></a>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    icon=\"pi pi-angle-down\"\r\n                    label=\"Expand All\"\r\n                    class=\"mr-2\"\r\n                    (click)=\"expandCollapsePurchasedInvoices()\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    class=\"mr-2\"\r\n                    icon=\"pi pi-angle-up\"\r\n                    label=\"Collapse All\"\r\n                    (click)=\"expandCollapsePurchasedInvoices(false)\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    type=\"button\"\r\n                    class=\"mr-2\"\r\n                    label=\"List\"\r\n                    icon=\"pi pi-list\"\r\n                    (click)=\"onSelectPurchaseType('list')\"\r\n                  ></button>\r\n                  <button\r\n                    [disabled]=\"invoicesPurchasedType === 'hierarchy'\"\r\n                    pButton\r\n                    type=\"button\"\r\n                    label=\"Hierarchy\"\r\n                    icon=\"pi pi-table\"\r\n                    (click)=\"onSelectPurchaseType('hierarchy')\"\r\n                  ></button>\r\n                </div>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"header\">\r\n                <tr>\r\n                  <th style=\"width: 30%; padding-left: 19px\">QC-Wh Started Date</th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Invoice Number</th>\r\n                  <th style=\"width: 15%\" class=\"text-center\">Supplier</th>\r\n                  <th style=\"width: 10%\" class=\"text-center\">Order ID</th>\r\n                  <th style=\"width: 15%\" class=\"text-center\">Items Reception Date</th>\r\n                  <th style=\"width: 20%\">Root List</th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-invoiceNode let-invoice=\"rowData\">\r\n                <tr\r\n                  [ttRow]=\"invoiceNode\"\r\n                  [ttSelectableRowDisabled]=\"!invoice.order && !invoice.level || invoice.level < 4\"\r\n                  [ttSelectableRow]=\"invoiceNode\"\r\n                >\r\n                  <td style=\"width: 30%\" [class.text-center]=\"invoice.order\">\r\n                    <div class=\"table-toggle\">\r\n                      <p-treeTableToggler [rowNode]=\"invoiceNode\"></p-treeTableToggler>\r\n                      <ng-container *ngIf=\"!invoice.order\">\r\n                        <p [class.category-name]=\"invoice.level === 0\">{{invoice.name}}\r\n                          <span *ngIf=\"invoice.description\">({{invoice.description}})</span>\r\n                          <i *ngIf=\"invoice.level < 4 && invoice.level > 0\" style=\"font-style: normal\">\r\n                            ({{invoice.categories}})\r\n                          </i>\r\n                        </p>\r\n                      </ng-container>\r\n                      <ng-container *ngIf=\"invoice.order\">\r\n                        <p class=\"category-name\">\r\n                          {{(invoice.order?.qc_wh_started_date ? invoice.order?.qc_wh_started_date :\r\n                          invoice.system_creation_date) | date:'dd/MM/yyyy HH:mm'}}\r\n                        </p>\r\n                      </ng-container>\r\n<!--                      <span *ngIf=\"invoice.level === 4\">-->\r\n<!--                      {{invoice.invoice.system_creation_date | date:'dd/MM/yyyy'}}-->\r\n<!--                    </span>-->\r\n                    </div>\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    <ng-container *ngIf=\"invoice.order\">\r\n                      {{invoice.self_serial_number}} {{invoice.self_proforma_serial_number}}\r\n                    </ng-container>\r\n                    <span\r\n                      *ngIf=\"invoice.level === 4\"\r\n                      [class.text-warning]=\"invoice.invoice.unique_root_production_plans.length > 1\"\r\n                    >\r\n                    {{invoice.invoice.self_serial_number}} {{invoice.invoice.self_proforma_serial_number}}\r\n                  </span>\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"text-center\">\r\n                    <ng-container *ngIf=\"invoice.order\">\r\n                      {{invoice.supplier?.name}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"invoice.level === 4\">\r\n                      {{invoice.invoice.supplier?.name}}\r\n                    </ng-container>\r\n                  </td>\r\n                  <td style=\"width: 10%\" class=\"text-center\">\r\n                    <ng-container *ngIf=\"invoice.order\">\r\n                      {{invoice.order?.id}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"invoice.level === 4\">\r\n                      {{invoice.invoice.order?.id}}\r\n                    </ng-container>\r\n                  </td>\r\n                  <td style=\"width: 15%\" class=\"text-center\">\r\n                    <ng-container *ngIf=\"invoice.order\">\r\n                      {{invoice.items_reception_date | date: 'dd/MM/yyyy'}}\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"invoice.level === 4\">\r\n                      {{invoice.invoice.items_reception_date | date: 'dd/MM/yyyy'}}\r\n                    </ng-container>\r\n                  </td>\r\n                  <td style=\"width: 20%\">\r\n                    <ng-container *ngIf=\"invoice.order\">\r\n                      <div *ngFor=\"let root_list of invoice.root_production_plans\">\r\n                        {{root_list.list_product.nomenclature.name}}\r\n                      </div>\r\n                    </ng-container>\r\n                    <ng-container *ngIf=\"invoice.level === 4 && invoice.plan\">\r\n                      {{invoice.plan.list_product.nomenclature.code}}~{{invoice.plan.list_product.nomenclature.name}}\r\n                    </ng-container>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\">\r\n                <tr>\r\n                  <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n                    <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                    <span *ngIf=\"!isLoading\">No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-treeTable>\r\n          </div>\r\n        </ng-container>\r\n      </p-tabPanel>\r\n    </p-tabView>\r\n  </div>\r\n</div>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {AuthService} from '../../../../auth/auth.service';\r\nimport {Locator} from '../../../models/locator';\r\nimport {DeliveryChain} from '../../../models/delivery-chain';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-shipping-request-print',\r\n  templateUrl: './warehouse-shipping-request-print.component.html',\r\n  styleUrls: ['./warehouse-shipping-request-print.component.scss']\r\n})\r\nexport class WarehouseShippingRequestPrintComponent implements OnInit {\r\n  @Input() items: any[] = [];\r\n  @Input() locators: Locator[] = [];\r\n  @Input() chain: DeliveryChain;\r\n\r\n  currentDate = new Date();\r\n\r\n  constructor(\r\n    public readonly auth: AuthService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  translateLocator(id: number) {\r\n    if (!this.locators) {\r\n      return id;\r\n    }\r\n    const locator = this.locators.find(loc => loc.id === id);\r\n    return `${locator.name} R:${locator.row} C:${locator.column} S:${locator.shelf} P:${locator.place}`;\r\n  }\r\n\r\n}\r\n","<div class=\"warehouse-shipping-request-print\" *ngIf=\"chain\">\r\n  <div class=\"warehouse-shipping-request-print__header\">\r\n    <h2>Delivery Note #{{chain?.serial_number}}</h2>\r\n    <div class=\"warehouse-shipping-request-print__header-row\">\r\n      <div class=\"warehouse-shipping-request-print__header-col\">\r\n        <h4>Pek Automotive d.o.o.</h4>\r\n        <p>\r\n          Idrijska cesta 42<br>\r\n          1360 Vrhnika<br>\r\n          Slovenija\r\n        </p>\r\n      </div>\r\n      <div class=\"warehouse-shipping-request-print__header-col\">\r\n        <h4>{{chain?.customer.name}}</h4>\r\n        <p>{{chain?.customer.address}}</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div class=\"warehouse-shipping-request-print__table\" *ngIf=\"items\">\r\n    <div\r\n      *ngFor=\"let item of items\"\r\n      class=\"warehouse-shipping-request-print__row\"\r\n    >\r\n      <div class=\"warehouse-shipping-request-print__box\">\r\n        <div class=\"warehouse-shipping-request-print__col\">\r\n          <h3>Serial number</h3>\r\n          <p>{{item.warehouse_product.serial_number?.type_with_number}}</p>\r\n        </div>\r\n        <div class=\"warehouse-shipping-request-print__col\">\r\n          <h3>Code</h3>\r\n          <p>{{item.warehouse_product.nomenclature.code}}</p>\r\n        </div>\r\n        <div class=\"warehouse-shipping-request-print__col\">\r\n          <h3>Name</h3>\r\n          <p>{{item.warehouse_product.nomenclature.name}}</p>\r\n        </div>\r\n        <div class=\"warehouse-shipping-request-print__col\">\r\n          <h3>Quantity</h3>\r\n          <p>{{item.quantity}}</p>\r\n        </div>\r\n        <div class=\"warehouse-shipping-request-print__col\">\r\n          <h3>Locator</h3>\r\n          <p>{{ translateLocator(item.warehouse_product.locator) }}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"warehouse-shipping-request-print__bottom\">\r\n    <div class=\"warehouse-shipping-request-print__column\">\r\n      <div class=\"warehouse-shipping-request-print__left\">\r\n        <div>\r\n          <h3>Sent</h3>\r\n          <p>{{auth.user.first_name}} {{auth.user.last_name}}</p>\r\n        </div>\r\n        <div>\r\n          <h3>Date</h3>\r\n          <p>{{currentDate | date: 'dd.MM.y'}}</p>\r\n        </div>\r\n        <div>\r\n          <h3>Signed</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"warehouse-shipping-request-print__right\">\r\n        <div>\r\n          <h3>Retrieved</h3>\r\n          <p></p>\r\n        </div>\r\n        <div>\r\n          <h3>Date</h3>\r\n          <p></p>\r\n        </div>\r\n        <div>\r\n          <h3>Signed</h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {DeliveryChain} from '../../../models/delivery-chain';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {DeliveryChainService} from '../../../services/delivery-chain.service';\r\nimport {finalize, map, tap} from 'rxjs/operators';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {environment} from '@env/environment.prod';\r\nimport {LocatorService} from '../../../services/locator.service';\r\nimport {Locator} from '../../../models/locator';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-shipping-request',\r\n  templateUrl: './warehouse-shipping-request.component.html',\r\n  styleUrls: ['./warehouse-shipping-request.component.scss']\r\n})\r\nexport class WarehouseShippingRequestComponent implements OnInit, OnDestroy {\r\n  isLoading = true;\r\n\r\n  chainId: number;\r\n  chain: DeliveryChain;\r\n  products: any[] = [];\r\n  locators: Locator[] = [];\r\n  link = environment.link_url + 'dash/';\r\n\r\n  isCompleting = false;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private deliveryService: DeliveryChainService,\r\n    private locatorService: LocatorService,\r\n    private modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.chainId = +id),\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(() => {\r\n      this.getDeliveryChain();\r\n      this.getItems();\r\n      this.getLocators();\r\n    });\r\n  }\r\n\r\n  getDeliveryChain() {\r\n    this.deliveryService.getById(this.chainId).subscribe(chain => {\r\n      this.chain = chain;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getLocators() {\r\n    this.locatorService.get().subscribe(locators => {\r\n      this.locators = locators;\r\n    });\r\n  }\r\n\r\n  getItems() {\r\n    this.deliveryService.getDeliveryItems(this.chainId).subscribe(products => {\r\n      this.products = products;\r\n    });\r\n  }\r\n\r\n  onGoToChainLink() {\r\n    window.open(`${this.link}delivery-chains/${this.chainId}`);\r\n  }\r\n\r\n  onComplete() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isCompleting = true;\r\n        this.deliveryService.complete(this.chainId).pipe(\r\n          finalize(() => this.isCompleting = false)\r\n        ).subscribe(() => {\r\n          this.router.navigate(['../'], {relativeTo: this.route});\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onPrint() {\r\n    window.print();\r\n  }\r\n\r\n  translateLocator(id: number) {\r\n    if (!this.locators) {\r\n      return id;\r\n    }\r\n    const locator = this.locators.find(loc => loc.id === id);\r\n    return `${locator.name} R:${locator.row} C:${locator.column} S:${locator.shelf} P:${locator.place}`;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>\r\n        Requests for Delivery Chain\r\n        <a\r\n          *ngIf=\"!isLoading\"\r\n          (click)=\"onGoToChainLink()\"\r\n        >\r\n          #{{chain?.serial_number}}\r\n        </a>\r\n        <ng-container *ngIf=\"isLoading\">...</ng-container>\r\n      </h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"p-button-icon mr-2\"\r\n        icon=\"pi pi-check\"\r\n        [label]=\"chain?.closed_at ? 'Already Completed' : 'Complete'\"\r\n        [loading]=\"isCompleting\"\r\n        (click)=\"onComplete()\"\r\n        [disabled]=\"isLoading || chain?.closed_at\"\r\n      ></button>\r\n\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"p-button-icon\"\r\n        icon=\"pi pi-print\"\r\n        label=\"Print Delivery Note\"\r\n        (click)=\"onPrint()\"\r\n        [disabled]=\"isLoading\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"products.length > 0\"\r\n        [rows]=\"10\"\r\n        [value]=\"products\"\r\n      >\r\n        <ng-template pTemplate=\"caption\"></ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%;\">#</th>\r\n            <th class=\"text-center\" style=\"width: 20%;\">Serial number</th>\r\n            <th style=\"width: 20%;\">Code</th>\r\n            <th style=\"width: 20%;\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 15%;\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 20%;\">Locator</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-item let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\">{{i + 1}}</td>\r\n            <td class=\"text-center\">{{item.warehouse_product.serial_number?.type_with_number}}</td>\r\n            <td>{{item.warehouse_product.nomenclature.code}}</td>\r\n            <td>{{item.warehouse_product.nomenclature.name}}</td>\r\n            <td class=\"text-center\">{{item.quantity}}</td>\r\n            <td class=\"text-center\">{{ translateLocator(item.warehouse_product.locator) }}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && products.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"print-page\">\r\n  <pek-warehouse-shipping-request-print\r\n    [chain]=\"chain\"\r\n    [items]=\"products\"\r\n    [locators]=\"locators\"\r\n  ></pek-warehouse-shipping-request-print>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {Company} from '../../../crm/models/company';\r\nimport {CompanyService} from '../../../crm/services/company.service';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {DeliveryChain} from '../../models/delivery-chain';\r\nimport {DeliveryChainService} from '../../services/delivery-chain.service';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {environment} from '@env/environment.prod';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-shipping-requests',\r\n  templateUrl: './warehouse-shipping-requests.component.html',\r\n  styleUrls: ['./warehouse-shipping-requests.component.scss']\r\n})\r\nexport class WarehouseShippingRequestsComponent implements OnInit {\r\n  link = environment.link_url + 'dash/';\r\n\r\n  isLoading = true;\r\n  isLoadingCustomers = true;\r\n\r\n  customers: Company[] = [];\r\n  chains: DeliveryChain[] = [];\r\n  selectedChain: DeliveryChain;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    created_after: [null],\r\n    created_before: [null],\r\n    customer_id: [null],\r\n    is_open: [null],\r\n  });\r\n\r\n  requestsTypes = [\r\n    {name: 'Open Requests', value: true},\r\n    {name: 'Closed Requests', value: false},\r\n  ];\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  constructor(\r\n    private readonly companyService: CompanyService,\r\n    private readonly deliveryService: DeliveryChainService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly fb: FormBuilder,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getChains();\r\n    this.getCustomers();\r\n  }\r\n\r\n  getChains() {\r\n    this.deliveryService.get(this.query).subscribe(chains => {\r\n      this.chains = chains;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  searchChains() {\r\n    this.isLoading = true;\r\n    this.chains = [];\r\n    this.query = [];\r\n\r\n    if (this.searchForm.get('is_open')?.value !== null) {\r\n      this.query.push({\r\n        name: 'is_open',\r\n        value: this.searchForm.get('is_open').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('customer_id')?.value) {\r\n      this.query.push({\r\n        name: 'customer_id',\r\n        value: this.searchForm.get('customer_id').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('created_before').value) {\r\n      this.query.push({\r\n        name: 'created_before',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('created_before').value)\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('created_after').value) {\r\n      this.query.push({\r\n        name: 'created_after',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('created_after').value)\r\n      });\r\n    }\r\n\r\n    this.getChains();\r\n  }\r\n\r\n  getCustomers() {\r\n    this.companyService.get([{name: 'has_delivery_chain', value: 'true'}])\r\n      .subscribe(customers => {\r\n        this.customers = customers;\r\n        this.isLoadingCustomers = false;\r\n      });\r\n  }\r\n\r\n  goToChain(id: number) {\r\n    window.open(`${this.link}delivery-chains/${id}`);\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Shipment Requests</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <form [formGroup]=\"searchForm\">\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Creation From</label>\r\n              <p-calendar\r\n                [showClear]=\"true\"\r\n                formControlName=\"created_after\"\r\n                (ngModelChange)=\"searchChains()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Creation To</label>\r\n              <p-calendar\r\n                [showClear]=\"true\"\r\n                formControlName=\"created_before\"\r\n                (ngModelChange)=\"searchChains()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Requests state</label>\r\n              <p-dropdown\r\n                (ngModelChange)=\"searchChains()\"\r\n                [showClear]=\"true\"\r\n                formControlName=\"is_open\"\r\n                [options]=\"requestsTypes\"\r\n                optionValue=\"value\"\r\n                optionLabel=\"name\"\r\n                placeholder=\"Choose Request State\"\r\n              >\r\n              </p-dropdown>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Customer</label>\r\n              <p-dropdown\r\n                (ngModelChange)=\"searchChains()\"\r\n                *ngIf=\"!isLoadingCustomers; else spinner\"\r\n                [showClear]=\"true\"\r\n                [filter]=\"true\"\r\n                formControlName=\"customer_id\"\r\n                [options]=\"customers\"\r\n                optionValue=\"id\"\r\n                optionLabel=\"name\"\r\n                placeholder=\"Choose Customer\"\r\n              >\r\n              </p-dropdown>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"chains.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedChain\"\r\n        [value]=\"chains\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <button\r\n              class=\"ml-auto mt-1\"\r\n              [routerLink]=\"[selectedChain?.id]\"\r\n              [disabled]=\"!selectedChain\"\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi pi-bars\"\r\n              label=\"Shipment Products\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%;\">#</th>\r\n            <th class=\"text-center\" style=\"width: 10%;\">Delivery ID</th>\r\n            <th class=\"text-center\" style=\"width: 20%;\">Sales Chain ID</th>\r\n            <th style=\"width: 25%;\">Customer</th>\r\n            <th class=\"text-center\" style=\"width: 20%;\">Created Date</th>\r\n            <th class=\"text-center\" style=\"width: 20%;\">Completion Date</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-chain let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"chain\">\r\n            <td class=\"text-center\" style=\"width: 5%;\">\r\n              {{i + 1}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 10%;\">\r\n              <a\r\n                (click)=\"goToChain(chain.id)\"\r\n              >\r\n                {{chain.serial_number}}\r\n              </a>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 20%\">\r\n              {{chain.id}}\r\n            </td>\r\n            <td style=\"width: 25%;\">\r\n              {{chain.customer.name}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 20%;\">\r\n              {{chain.created_at | date:'dd/MM/yyyy'}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 20%;\">\r\n              {{chain.closed_at | date:'dd/MM/yyyy'}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && chains.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Input, OnInit} from '@angular/core';\r\nimport {AuthService} from '../../../auth/auth.service';\r\nimport {GroupedToolRequest} from \"../../models/grouped-tool-request\";\r\nimport {ToolOrder} from \"../../models/tool-order\";\r\n\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-tool-request-print-page',\r\n  templateUrl: './warehouse-tool-request-print-page.component.html',\r\n  styleUrls: ['./warehouse-tool-request-print-page.component.scss']\r\n})\r\nexport class WarehouseToolRequestPrintPageComponent implements OnInit {\r\n  @Input() toolOrder: ToolOrder;\r\n  @Input() toolRequests: GroupedToolRequest[];\r\n  currentDate = new Date();\r\n\r\n  constructor(\r\n    public readonly auth: AuthService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<div class=\"warehouse-tool-request-print-page\" *ngIf=\"toolOrder\">\r\n  <div class=\"warehouse-tool-request-print-page__header\">\r\n    <div>\r\n      <h2>Area</h2>\r\n      <p>{{toolOrder.area_locator.area.name}}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Locator</h2>\r\n      <p>{{toolOrder.area_locator.name}}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Order ID</h2>\r\n      <p>{{toolOrder.id}}</p>\r\n    </div>\r\n    <div>\r\n      <h2>Creation Date</h2>\r\n      <p>{{toolOrder.created | date: 'dd.MM.y'}}</p>\r\n\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"warehouse-tool-request-print-page__table\">\r\n    <div\r\n      *ngFor=\"let request of toolRequests\"\r\n      class=\"warehouse-tool-request-print-page__row\"\r\n    >\r\n      <div class=\"warehouse-tool-request-print-page__box\">\r\n        <div class=\"warehouse-tool-request-print-page__col\" style=\"width: 10%\">\r\n          <h3>ID</h3>\r\n          <div *ngIf=\"request.id\">\r\n            <p>{{request.id}}</p>\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-tool-request-print-page__col\" style=\"width: 10%\">\r\n          <h3>Code</h3>\r\n          <div *ngIf=\"request.nomenclature.code\">\r\n            {{request.nomenclature.code}}\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-tool-request-print-page__col\" style=\"width: 30%\">\r\n          <h3>Name</h3>\r\n          <div *ngIf=\"request.nomenclature.name\">\r\n            {{request.nomenclature.name}}\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-tool-request-print-page__col\" style=\"width: 10%\">\r\n          <h3>Qty</h3>\r\n          <div *ngIf=\"request.required_quantity\">\r\n            {{request.required_quantity}}\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-tool-request-print-page__col\" style=\"width: 10%\">\r\n          <h3>Units</h3>\r\n          <div *ngIf=\"request.nomenclature.category.unit_of_measure.symbol\">\r\n            {{request.nomenclature.category.unit_of_measure.symbol}}\r\n          </div>\r\n        </div>\r\n        <div class=\"warehouse-tool-request-print-page__col\" style=\"width: 30%\">\r\n          <h3>Locator</h3>\r\n          <div *ngIf=\"request.nomenclature.locators\">\r\n            <div *ngFor=\"let locator of request.nomenclature.locators; let last=last\">\r\n              {{locator.name}}<span *ngIf=\"!last\">,</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"warehouse-tool-request-print-page__bottom\">\r\n    <div class=\"warehouse-tool-request-print-page__column\">\r\n      <div class=\"warehouse-tool-request-print-page__left\">\r\n        <div>\r\n          <h3>Sent</h3>\r\n          <p>{{auth.user.first_name}} {{auth.user.last_name}}</p>\r\n        </div>\r\n        <div>\r\n          <h3>Date</h3>\r\n          <p>{{currentDate | date: 'dd.MM.y'}}</p>\r\n        </div>\r\n        <div>\r\n          <h3>Signed</h3>\r\n        </div>\r\n      </div>\r\n      <div class=\"warehouse-tool-request-print-page__right\">\r\n        <div>\r\n          <h3>Retrieved</h3>\r\n          <p></p>\r\n        </div>\r\n        <div>\r\n          <h3>Date</h3>\r\n          <p></p>\r\n        </div>\r\n        <div>\r\n          <h3>Signed</h3>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {finalize, Subject} from 'rxjs';\r\nimport {ToolRequest} from '../../services/tool-request';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {ToolOrder} from '../../models/tool-order';\r\nimport {map, tap} from 'rxjs/operators';\r\nimport {ToolRequestService} from '../../services/tool-request.service';\r\nimport {ToolOrderService} from '../../services/tool-order.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {GroupedToolRequest} from \"../../models/grouped-tool-request\";\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-tool-request',\r\n  templateUrl: './warehouse-tool-request.component.html',\r\n  styleUrls: ['./warehouse-tool-request.component.scss']\r\n})\r\nexport class WarehouseToolRequestComponent implements OnInit, OnDestroy {\r\n  isLoading = true;\r\n  isCompleting = false;\r\n  requests: ToolRequest[] = [];\r\n  selectedRequest: ToolRequest;\r\n  isShowPrint = true;\r\n  toolRequests: GroupedToolRequest[] = [];\r\n  toolOrder: ToolOrder;\r\n\r\n  orderId: number;\r\n  order: ToolOrder;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private toolRequestService: ToolRequestService,\r\n    private toolOrderService: ToolOrderService,\r\n    private readonly modalService: ModalService,\r\n    private readonly router: Router,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.orderId = +id),\r\n      tap(() => this.getToolOrder()),\r\n      tap(() => this.getToolRequest()),\r\n    ).subscribe();\r\n  }\r\n\r\n  getToolOrder() {\r\n    this.toolOrderService.getById(this.orderId).subscribe(toolOrder => {\r\n      this.order = toolOrder;\r\n    });\r\n  }\r\n\r\n  getToolRequest() {\r\n    this.toolRequestService.get([\r\n      {name: 'tool_order', value: this.orderId},\r\n      {name: 'is_completed', value: false}\r\n    ]).subscribe(requests => {\r\n      this.requests = requests;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  printPage() {\r\n    this.isShowPrint = true;\r\n    this.toolRequests = [...this.requests];\r\n    this.toolOrder = Object.assign({}, this.order);\r\n    setTimeout(() => {\r\n      window.print();\r\n    });\r\n  }\r\n\r\n  onShowImages() {\r\n    this.modalService.showImageGallery([], this.selectedRequest.nomenclature.id, 1).subscribe();\r\n  }\r\n\r\n  onComplete() {\r\n    this.modalService.confirm('success').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.isCompleting = true;\r\n        this.toolOrderService.complete(this.orderId).pipe(\r\n          finalize(() => this.isCompleting = false)\r\n        ).subscribe(() => {\r\n          this.router.navigate(['/warehouse/tool-requests/']);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>\r\n        Tool Request\r\n        <ng-container *ngIf=\"order; else empty\">\r\n          Order ID: {{order.id}}\r\n          Area:  {{order.area_locator.area.name}}\r\n          Locator: {{order.area_locator.name}}\r\n        </ng-container>\r\n      </h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"p-button-icon\"\r\n        icon=\"pi pi-check\"\r\n        label=\"Complete\"\r\n        [loading]=\"isCompleting\"\r\n        (click)=\"onComplete()\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        icon=\"pi pi-print\"\r\n        class=\"mr-2\"\r\n        type=\"button\"\r\n        label=\"Print\"\r\n        (click)=\"printPage()\"\r\n        [disabled]=\"isLoading\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"requests.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedRequest\"\r\n        [value]=\"requests\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <button\r\n              class=\"ml-auto\"\r\n              pButton\r\n              type=\"button\"\r\n              icon=\"pi pi-images\"\r\n              label=\"Show Images\"\r\n              (click)=\"onShowImages()\"\r\n              [disabled]=\"!selectedRequest\"\r\n            ></button>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">\r\n              <h3 class=\"td-title\">#</h3>\r\n              #\r\n            </th>\r\n            <th style=\"width: 20%\">\r\n              <h3 class=\"td-title\">Code</h3>\r\n              Code\r\n            </th>\r\n            <th style=\"width: 25%\">\r\n              <h3 class=\"td-title\">Name</h3>\r\n              Name\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 10%\">\r\n              <h3 class=\"td-title\">Requested Quantity</h3>\r\n              Requested Quantity\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 10%\">\r\n              <h3 class=\"td-title\">UOM</h3>\r\n              UOM\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 30%\">\r\n              <h3 class=\"td-title\">Locator</h3>\r\n              Locator\r\n            </th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-request let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"request\">\r\n            <td class=\"text-center\" style=\"width: 5%\">\r\n              {{i + 1}}\r\n            </td>\r\n            <td style=\"width: 25%\">\r\n              {{request.nomenclature.code}}\r\n            </td>\r\n            <td style=\"width: 25%\">\r\n              {{request.nomenclature.name}}\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              {{request.required_quantity}}\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              {{request.nomenclature.category.unit_of_measure.symbol}}\r\n            </td>\r\n            <td style=\"width: 30%\" class=\"text-center\">\r\n\r\n              <div *ngIf=\"request.nomenclature.locators\">\r\n                <div *ngFor=\"let locator of request.nomenclature.locators; let last=last\">\r\n                  {{locator.name}} <span *ngIf=\"!last\">,</span>\r\n                </div>\r\n              </div>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr class=\"tr-spinner\">\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && requests.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"print-page\" *ngIf=\"isShowPrint\">\r\n  <div>\r\n    <pek-warehouse-tool-request-print-page\r\n      [toolOrder]=\"toolOrder\"\r\n      [toolRequests]=\"toolRequests\">\r\n    </pek-warehouse-tool-request-print-page>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #empty>\r\n  ...\r\n</ng-template>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {ToolOrderService} from '../../services/tool-order.service';\r\nimport {ToolOrder} from '../../models/tool-order';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-tool-requests',\r\n  templateUrl: './warehouse-tool-requests.component.html',\r\n  styleUrls: ['./warehouse-tool-requests.component.scss']\r\n})\r\nexport class WarehouseToolRequestsComponent implements OnInit, OnDestroy {\r\n  isLoading = true;\r\n  toolRequests: ToolOrder[] = [];\r\n  selectedRequest: ToolOrder;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  query: QuerySearch[] = [];\r\n\r\n  requestsTypes = [\r\n    {name: 'Open Requests', value: false},\r\n    {name: 'Closed Requests', value: true},\r\n  ];\r\n\r\n  constructor(\r\n    private toolRequestService: ToolOrderService,\r\n    private fb: FormBuilder,\r\n    private adapterService: AdapterService,\r\n  ) { }\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    order_by_area: [null],\r\n    order_by_locator: [null],\r\n    order_by_id: [null],\r\n    order_by_created: [null],\r\n    order_by_completed: [null],\r\n    is_completed: [null],\r\n    created_after: [null],\r\n    created_before: [null],\r\n    completed_after: [null],\r\n    completed_before: [null],\r\n  });\r\n\r\n  ngOnInit(): void {\r\n    this.getRequests();\r\n  }\r\n\r\n  getRequests() {\r\n    this.prepareQuery();\r\n    this.toolRequestService.get(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(toolRequests => {\r\n      this.toolRequests = toolRequests;\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  prepareQuery(): void {\r\n    this.query = [];\r\n    this.query = [{name: 'is_completed', value: false}];\r\n\r\n    this.prepareOrderingField();\r\n    const sorting = this.prepareSortingField();\r\n    if (sorting) {\r\n      this.query.push({name: 'ordering', value: sorting});\r\n    }\r\n  }\r\n\r\n  sorting(value: boolean, field: string) {\r\n    this.resetAllSorting();\r\n    if (value === null) {\r\n      this.searchForm.get(field).patchValue(false);\r\n    } else if (value === false) {\r\n      this.searchForm.get(field).patchValue(true);\r\n    } else if (value === true) {\r\n      this.searchForm.get(field).patchValue(null);\r\n    }\r\n    this.getRequests();\r\n  }\r\n\r\n  prepareOrderingField(): void {\r\n    if (this.searchForm.get('is_completed').value === false) {\r\n      this.query.push({name: 'is_completed', value: false});\r\n    } else if (this.searchForm.get('is_completed').value === true) {\r\n      this.query.push({name: 'is_completed', value: true});\r\n    }\r\n    if (this.searchForm.get('created_after').value) {\r\n      this.query.push({\r\n        name: 'created_after',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('created_after').value)\r\n      });\r\n    }\r\n    if (this.searchForm.get('created_before').value) {\r\n      this.query.push({\r\n        name: 'created_before',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('created_before').value)\r\n      });\r\n    }\r\n    if (this.searchForm.get('completed_after').value) {\r\n      this.query.push({\r\n        name: 'completed_after',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('completed_after').value)\r\n      });\r\n    }\r\n    if (this.searchForm.get('completed_before').value) {\r\n      this.query.push({\r\n        name: 'completed_before',\r\n        value: this.adapterService.dateAdapter(this.searchForm.get('completed_before').value)\r\n      });\r\n    }\r\n  }\r\n\r\n  prepareSortingField(): string {\r\n    let sorting = '';\r\n    if (this.searchForm.get('order_by_id').value !== null) {\r\n      if (this.searchForm.get('order_by_id').value) {\r\n        sorting += '-id';\r\n      } else {\r\n        sorting += 'id';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_area').value !== null) {\r\n      if (this.searchForm.get('order_by_area').value) {\r\n        sorting += '-area_locator__area__name';\r\n      } else {\r\n        sorting += 'area_locator__area__name';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_locator').value !== null) {\r\n      if (this.searchForm.get('order_by_locator').value) {\r\n        sorting += '-area_locator__name';\r\n      } else {\r\n        sorting += 'area_locator__name';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_created').value !== null) {\r\n      if (this.searchForm.get('order_by_created').value) {\r\n        sorting += '-created';\r\n      } else {\r\n        sorting += 'created';\r\n      }\r\n    }\r\n    if (this.searchForm.get('order_by_completed').value !== null) {\r\n      if (this.searchForm.get('order_by_completed').value) {\r\n        sorting += '-completed';\r\n      } else {\r\n        sorting += 'completed';\r\n      }\r\n    }\r\n    return sorting;\r\n  }\r\n\r\n  resetAllSorting() {\r\n    this.searchForm.get('order_by_area').setValue(null);\r\n    this.searchForm.get('order_by_locator').setValue(null);\r\n    this.searchForm.get('order_by_id').setValue(null);\r\n    this.searchForm.get('order_by_created').setValue(null);\r\n    this.searchForm.get('order_by_completed').setValue(null);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Tool Requests</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n\r\n    <div class=\"filters-visibility\">\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Created Date From</label>\r\n              <p-calendar\r\n                formControlName=\"created_after\"\r\n                (ngModelChange)=\"getRequests()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Created Date To</label>\r\n              <p-calendar\r\n                formControlName=\"created_before\"\r\n                (ngModelChange)=\"getRequests()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Completed Date From</label>\r\n              <p-calendar\r\n                formControlName=\"completed_after\"\r\n                (ngModelChange)=\"getRequests()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Completed Date To</label>\r\n              <p-calendar\r\n                formControlName=\"completed_before\"\r\n                (ngModelChange)=\"getRequests()\"\r\n                [showButtonBar]=\"true\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Requests State</label>\r\n              <p-dropdown\r\n                [options]=\"requestsTypes\"\r\n                formControlName=\"is_completed\"\r\n                optionValue=\"value\"\r\n                optionLabel=\"name\"\r\n                placeholder=\"Select state\"\r\n                (ngModelChange)=\"getRequests()\"\r\n              ></p-dropdown>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"page__table\">\r\n      <div class=\"page__block\">\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          class=\"ml-auto\"\r\n          icon=\"pi pi-bars\"\r\n          label=\"Nomenclatures\"\r\n          [routerLink]=\"[selectedRequest?.id]\"\r\n          [disabled]=\"!selectedRequest\"\r\n        ></button>\r\n      </div>\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"toolRequests.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedRequest\"\r\n        [value]=\"toolRequests\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th class=\"sort-label text-center\"\r\n                style=\"width: 5%\"\r\n                pSortableColumn=\"\"\r\n                (click)=\"sorting(searchForm.get('order_by_id').value, 'order_by_id')\"\r\n            >ID\r\n              <pek-sort-icon [value]=\"searchForm.get('order_by_id').value\"></pek-sort-icon>\r\n            </th>\r\n            <th style=\"width: 25%\"\r\n                class=\"sort-label text-center\"\r\n                pSortableColumn=\"\"\r\n                (click)=\"sorting(searchForm.get('order_by_area').value, 'order_by_area')\"\r\n            >Area\r\n              <pek-sort-icon [value]=\"searchForm.get('order_by_area').value\"></pek-sort-icon>\r\n            </th>\r\n            <th style=\"width: 25%\"\r\n                class=\"sort-label text-center\"\r\n                pSortableColumn=\"\"\r\n                (click)=\"sorting(searchForm.get('order_by_locator').value, 'order_by_locator')\"\r\n            >Locator\r\n              <pek-sort-icon [value]=\"searchForm.get('order_by_locator').value\"></pek-sort-icon>\r\n            </th>\r\n            <th style=\"width: 20%\"\r\n                class=\"sort-label text-center\"\r\n                pSortableColumn=\"\"\r\n                (click)=\"sorting(searchForm.get('order_by_created').value, 'order_by_created')\"\r\n            >Creation Date\r\n              <pek-sort-icon [value]=\"searchForm.get('order_by_created').value\"></pek-sort-icon>\r\n            </th>\r\n            <th style=\"width: 20%\"\r\n                class=\"sort-label text-center\"\r\n                pSortableColumn=\"\"\r\n                (click)=\"sorting(searchForm.get('order_by_completed').value, 'order_by_completed')\"\r\n            >Completion Date\r\n              <pek-sort-icon [value]=\"searchForm.get('order_by_completed').value\"></pek-sort-icon>\r\n            </th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"order\">\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">#</h3>\r\n              {{i + 1 }}\r\n            </td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">ID</h3>\r\n              {{order.id}}\r\n            </td>\r\n            <td style=\"width: 25%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Area</h3>\r\n              {{order.area_locator.area.name}}\r\n            </td>\r\n            <td style=\"width: 25%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Locator</h3>\r\n              {{order.area_locator.name}}\r\n            </td>\r\n            <td style=\"width: 20%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Creation Date</h3>\r\n              {{order.created | date:'dd/MM/yyyy HH:mm:ss'}}\r\n            </td>\r\n            <td style=\"width: 20%\" class=\"text-center\">\r\n              <h3 class=\"td-title\">Completion Date</h3>\r\n              {{order.completed | date:'dd/MM/yyyy HH:mm:ss'}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr class=\"tr-spinner\">\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && toolRequests.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {UnitMeasureService} from '../../services/unit-measure.service';\r\nimport {UnitMeasure} from '../../../product-structure/models/unit-measure';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-units-measure',\r\n  templateUrl: './warehouse-units-measure.component.html',\r\n  styleUrls: ['./warehouse-units-measure.component.scss']\r\n})\r\nexport class WarehouseUnitsMeasureComponent implements OnInit, OnDestroy  {\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Unit',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditUnit()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveUnit()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  isLoading = true;\r\n\r\n  unitsMeasure: UnitMeasure[] = [];\r\n  selectedUnitMeasure: UnitMeasure;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly unitMeasureService: UnitMeasureService,\r\n    private readonly modalService: ModalService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getUnitsMeasure();\r\n  }\r\n\r\n  getUnitsMeasure() {\r\n    this.unitMeasureService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(unitsMeasure => {\r\n      this.unitsMeasure = unitsMeasure;\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  onAddUnit() {\r\n    this.unitMeasureService.createEditUnitMeasureModal('create').subscribe(unitMeasure => {\r\n      if (unitMeasure) {\r\n        this.unitsMeasure.unshift(unitMeasure);\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditUnit() {\r\n    this.unitMeasureService.createEditUnitMeasureModal('edit', this.selectedUnitMeasure).subscribe(unitMeasure => {\r\n      if (unitMeasure) {\r\n        const index = this.unitsMeasure.findIndex(t => t.id === this.selectedUnitMeasure.id);\r\n        this.unitsMeasure[index] = unitMeasure;\r\n        this.selectedUnitMeasure = this.unitsMeasure[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveUnit() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.unitMeasureService.delete(this.selectedUnitMeasure).subscribe(() => {\r\n          const index = this.unitsMeasure.findIndex(w => w.id === this.selectedUnitMeasure.id);\r\n          this.unitsMeasure.splice(index, 1);\r\n          this.selectedUnitMeasure = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Units of Measure</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Unit\" (click)=\"onAddUnit()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"unitsMeasure.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedUnitMeasure\"\r\n        [value]=\"unitsMeasure\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedUnitMeasure\">Choose the Unit of Measure to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedUnitMeasure\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 45%\">Name</th>\r\n            <th style=\"width: 50%\" class=\"text-center\">Symbol</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-unit let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"unit\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 45%\">{{unit.name}}</td>\r\n            <td class=\"text-center\" style=\"width: 50%\">{{unit.symbol}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && unitsMeasure.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {Warehouse} from '../../models/warehouse';\r\nimport {WarehouseService} from '../../services/warehouse.service';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-warehouses',\r\n  templateUrl: './warehouse-warehouses.component.html',\r\n  styleUrls: ['./warehouse-warehouses.component.scss']\r\n})\r\nexport class WarehouseWarehousesComponent implements OnInit, OnDestroy {\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Warehouse',\r\n    items: [\r\n      {\r\n        label: 'Locators',\r\n        icon: 'pi pi-bars',\r\n        command: () => this.onGoToWarehouseLocators()\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditTechnology()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveTechnology()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  warehouses: Warehouse[] = [];\r\n  selectedWarehouse: Warehouse;\r\n  isLoading = true;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly warehouseService: WarehouseService,\r\n    private readonly router: Router,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getWarehouses();\r\n  }\r\n\r\n  getWarehouses() {\r\n    this.warehouseService.get().pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(warehouses => {\r\n      this.warehouses = warehouses;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onAddWarehouse() {\r\n    this.warehouseService.createEditWarehouseModal('create').subscribe(warehouse => {\r\n      if (warehouse) {\r\n        this.warehouses.unshift(warehouse);\r\n      }\r\n    });\r\n  }\r\n\r\n  onGoToWarehouseLocators() {\r\n    this.router.navigate([this.selectedWarehouse.id, 'locators'], {relativeTo: this.route});\r\n  }\r\n\r\n  onEditTechnology() {\r\n    this.warehouseService.createEditWarehouseModal('edit', this.selectedWarehouse).subscribe(warehouse => {\r\n      if (warehouse) {\r\n        const index = this.warehouses.findIndex(t => t.id === this.selectedWarehouse.id);\r\n        this.warehouses[index] = warehouse;\r\n        this.selectedWarehouse = this.warehouses[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveTechnology() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.warehouseService.delete(this.selectedWarehouse).subscribe(() => {\r\n          const index = this.warehouses.findIndex(w => w.id === this.selectedWarehouse.id);\r\n          this.warehouses.splice(index, 1);\r\n          this.selectedWarehouse = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Warehouses</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Warehouse\" (click)=\"onAddWarehouse()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"warehouses.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedWarehouse\"\r\n        [value]=\"warehouses\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedWarehouse\">Choose the Warehouse to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedWarehouse\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 45%\">Name</th>\r\n            <th style=\"width: 50%\">Description</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-warehouse let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"warehouse\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 45%\">{{warehouse.name}}</td>\r\n            <td style=\"width: 50%\">{{warehouse.description}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && warehouses.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {AfterViewInit, Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {fromEvent, Subject, takeUntil} from 'rxjs';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'pek-warehouse-where-used',\r\n  templateUrl: './warehouse-where-used.component.html',\r\n  styleUrls: ['./warehouse-where-used.component.scss']\r\n})\r\nexport class WarehouseWhereUsedComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n\r\n  isStartOnePage = false;\r\n  isLoadingNomenclatures = true;\r\n  isLoadingUsedNomenclatures = false;\r\n\r\n  nomenclatureList: Nomenclature[] = [];\r\n  usedNomenclatures: Nomenclature[] = [];\r\n\r\n  whereUsedNomenclature: Nomenclature;\r\n  selectedNomenclature: Nomenclature;\r\n\r\n  countNomenclatures = 0;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [''],\r\n    code: [''],\r\n    category: [''],\r\n    root_categories: [''],\r\n    page: [1]\r\n  });\r\n\r\n  queryKey = 'name:/code:/categories:/root_categories:';\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n    {name: 'paginated', value: true}\r\n  ];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private nomenclatureService: NomenclatureService,\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedNomenclature = null),\r\n        map(() => this.searchBoxName.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchNomenclatures();\r\n    });\r\n\r\n    fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedNomenclature = null),\r\n        map(() => this.searchBoxCode.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchNomenclatures();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  getNomenclatures() {\r\n    this.nomenclatureService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatureList = nomenclatures.results;\r\n      this.countNomenclatures = nomenclatures.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoadingNomenclatures = false;\r\n    });\r\n  }\r\n\r\n  getType(type: ENomenclatureType) {\r\n    switch (type) {\r\n      case ENomenclatureType.PURCHASED:\r\n        return 'Purchased';\r\n      case ENomenclatureType.ASSEMBLY:\r\n        return 'Assembly';\r\n      case ENomenclatureType.MANUFACTURED:\r\n        return 'Manufactured';\r\n    }\r\n  }\r\n\r\n  onSearchWhereUsed() {\r\n    if (this.selectedNomenclature) {\r\n      this.whereUsedNomenclature = this.selectedNomenclature;\r\n      this.isLoadingUsedNomenclatures = true;\r\n      this.usedNomenclatures = [];\r\n      this.destroy$.next(true);\r\n      this.nomenclatureService.searchWhereUsed(this.selectedNomenclature.id).pipe(\r\n        takeUntil(this.destroy$)\r\n      ).subscribe(usedNomenclatures => {\r\n        this.usedNomenclatures = usedNomenclatures;\r\n        this.isLoadingUsedNomenclatures = false;\r\n      });\r\n    } else {\r\n      this.whereUsedNomenclature = null;\r\n      this.usedNomenclatures = [];\r\n    }\r\n  }\r\n\r\n  searchNomenclatures() {\r\n    this.destroy$.next(true);\r\n    this.isLoadingNomenclatures = true;\r\n    this.selectedNomenclature = null;\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}/categories:${this.searchForm.get('category').value}/root_categories:${this.searchForm.get('root_categories').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.searchForm.get('page').value},\r\n      {name: 'paginated', value: true}\r\n    ];\r\n\r\n    if (this.searchForm.get('name').value !== '') {\r\n      this.query.push({name: 'name', value: this.searchForm.get('name').value});\r\n    }\r\n\r\n    if (this.searchForm.get('code').value !== '') {\r\n      this.query.push({name: 'code', value: encodeURIComponent(this.searchForm.get('code').value)});\r\n    }\r\n\r\n    if (this.searchForm.get('category').value) {\r\n      this.query.push({name: 'categories', value: this.searchForm.get('category').value});\r\n    }\r\n\r\n    if (this.searchForm.get('root_categories').value) this.query.push({\r\n      name: 'root_categories',\r\n      value: this.searchForm.get('root_categories').value\r\n    });\r\n\r\n    this.getNomenclatures();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchNomenclatures();\r\n    }\r\n  }\r\n\r\n  onSelectCategories(ids: string) {\r\n    this.searchForm.get('category').patchValue(ids);\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  onSelectRootCategory(ids: string) {\r\n    this.searchForm.get('root_categories').patchValue(ids);\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'warehouse'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Where Used</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"warehouse-items__form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Code</label>\r\n              <input class=\"form-control\" formControlName=\"code\" pInputText #searchBoxCode>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Name</label>\r\n              <input class=\"form-control\" formControlName=\"name\" pInputText #searchBoxName>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Category</label>\r\n              <pek-multi-categories-picker\r\n                (choiceCategories)=\"onSelectCategories($event)\"\r\n              ></pek-multi-categories-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Product Structure Category</label>\r\n<!--              <pek-product-structure-category-picker-->\r\n<!--                (choiceCategoryFolAllIds)=\"onSelectRootCategory($event)\"-->\r\n<!--                [isAllIds]=\"true\"-->\r\n<!--              ></pek-product-structure-category-picker>-->\r\n              <pek-multi-product-structure-categories-picker\r\n                (choiceCategories)=\"onSelectRootCategory($event)\"\r\n              ></pek-multi-product-structure-categories-picker>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <div class=\"table-pagination-preloader\">\r\n        <p-table\r\n          #dt\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 30.25rem)\"\r\n          [scrollable]=\"true\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedNomenclature\"\r\n          [value]=\"nomenclatureList\"\r\n          (selectionChange)=\"onSearchWhereUsed()\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n              <th style=\"width: 30%\">Code</th>\r\n              <th style=\"width: 35%\">Name</th>\r\n              <th style=\"width: 30%\">Category</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"nomenclature\">\r\n              <td style=\"width: 5%\" class=\"text-center\">{{(this.searchForm.get('page').value - 1) * 10 + i + 1}}</td>\r\n              <td style=\"width: 30%\">{{nomenclature.code}}</td>\r\n              <td style=\"width: 35%\">{{nomenclature.name}}</td>\r\n              <td style=\"width: 30%\">{{nomenclature.category?.name}}{{nomenclature.root_category?.name}}</td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n                <i *ngIf=\"isLoadingNomenclatures\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingNomenclatures\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n        <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoadingNomenclatures\">\r\n          <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"paginator-wrapper\"\r\n        [class.hide]=\"nomenclatureList.length === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"countNomenclatures\"\r\n          (onPageChange)=\"paginate($event)\">\r\n        </p-paginator>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        [value]=\"usedNomenclatures\"\r\n        scrollHeight=\"calc(100vh - 335px)\"\r\n        [paginator]=\"usedNomenclatures.length > 0\"\r\n        [rows]=\"10\"\r\n        selectionMode=\"single\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <h2 class=\"mt-1 mb-1\">\r\n            Where Used\r\n            <ng-container *ngIf=\"whereUsedNomenclature; else empty\">\r\n              {{whereUsedNomenclature.name}} ({{whereUsedNomenclature.code}})\r\n            </ng-container>\r\n          </h2>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 30%\">Code</th>\r\n            <th style=\"width: 35%\">Name</th>\r\n            <th style=\"width: 30%\">Type</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-usedNomenclature let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 30%\">\r\n              <a\r\n                target=\"_blank\"\r\n                [routerLink]=\"'/product-structure/products/structure/' + usedNomenclature.id\"\r\n              >\r\n                {{usedNomenclature.nomenclature.code}}\r\n              </a>\r\n            </td>\r\n            <td style=\"width: 35%\">{{usedNomenclature.nomenclature.name}}</td>\r\n            <td style=\"width: 30%\">{{getType(usedNomenclature.nomenclature.type)}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoadingUsedNomenclatures\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoadingUsedNomenclatures\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #empty>\r\n  <i>(Select the Nomenclature)</i>\r\n</ng-template>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {PhysicalInventoryService} from '../../services/physical-inventory.service';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-add-product-to-physical-inventory',\r\n  templateUrl: './add-product-to-physical-inventory.component.html',\r\n  styleUrls: ['./add-product-to-physical-inventory.component.scss']\r\n})\r\nexport class AddProductToPhysicalInventoryComponent implements OnInit {\r\n  isSaving = false;\r\n  isSelectProductMode = false;\r\n\r\n  nomenclatureType = ENomenclatureType;\r\n\r\n  selectedNomenclature: Nomenclature;\r\n  selectedNomenclatureTechnologiesIds: number[] = [];\r\n\r\n  form: FormGroup = this.fb.group({\r\n    locator_id: [null, Validators.required],\r\n    add_quantity: [1, [Validators.required, Validators.min(1)]],\r\n    nomenclature_id: [null, Validators.required],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<AddProductToPhysicalInventoryComponent>,\r\n    private readonly physicalInventoryService: PhysicalInventoryService,\r\n    @Inject(MAT_DIALOG_DATA) private inventoryId: number,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n\r\n  }\r\n\r\n  onSelectProductMode() {\r\n    this.dialogRef.updateSize('90rem', 'auto');\r\n    this.isSelectProductMode = true;\r\n  }\r\n\r\n  selectLocator(id: number) {\r\n    this.form.get('locator_id').patchValue(id);\r\n  }\r\n\r\n  onSelectNomenclature(nomenclature: Nomenclature) {\r\n    this.selectedNomenclature = nomenclature;\r\n\r\n    if (nomenclature) {\r\n      this.form.get('nomenclature_id').patchValue(nomenclature.id);\r\n      this.selectedNomenclatureTechnologiesIds = nomenclature.technologies.map(t => t.id);\r\n    } else {\r\n      this.form.get('nomenclature_id').patchValue(null);\r\n      this.selectedNomenclatureTechnologiesIds = [];\r\n    }\r\n\r\n    if (this.selectedNomenclatureTechnologiesIds.length > 0) {\r\n      this.form.addControl('current_technology_id', new FormControl(null, Validators.required));\r\n    } else {\r\n      this.form.removeControl('current_technology_id');\r\n    }\r\n  }\r\n\r\n  onReselectProduct() {\r\n    this.onSelectProductMode();\r\n    this.selectedNomenclature = null;\r\n    this.form.get('nomenclature_id').patchValue(null);\r\n    this.form.removeControl('current_technology_id');\r\n    this.selectedNomenclatureTechnologiesIds = [];\r\n  }\r\n\r\n  onChoiceProduct() {\r\n    this.dialogRef.updateSize('40rem', 'auto');\r\n    this.isSelectProductMode = false;\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n    const send = this.form.value;\r\n    this.physicalInventoryService.addProductToInventory(this.inventoryId, send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => this.dialogRef.close(true));\r\n  }\r\n\r\n  selectTechnology(id: number) {\r\n    this.form.get('current_technology_id').patchValue(id);\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Add product to Physical Inventory\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div *ngIf=\"!isSelectProductMode; else nomenclaturePicker\">\r\n    <form [formGroup]=\"form\">\r\n      <div class=\"form-group\">\r\n        <label>Move to*</label>\r\n\r\n        <pek-group-locator-picker\r\n          [selectedLocatorId]=\"this.form.get('locator_id').value\"\r\n          (selectLocator)=\"selectLocator($event)\"\r\n        ></pek-group-locator-picker>\r\n      </div>\r\n      <div class=\"form-group\">\r\n        <label>Quantity*</label>\r\n        <input type=\"number\" min=\"0\" id=\"name\" pInputText formControlName=\"add_quantity\">\r\n      </div>\r\n\r\n      <div\r\n        class=\"form-group\"\r\n        *ngIf=\"selectedNomenclature &&\r\n        selectedNomenclature.type !== nomenclatureType.PURCHASED &&\r\n        selectedNomenclatureTechnologiesIds.length > 0\"\r\n      >\r\n        <label>Technology*</label>\r\n        <pek-technology-picker\r\n          (selectTechnology)=\"selectTechnology($event)\"\r\n          [acceptedTechnologyIds]=\"selectedNomenclatureTechnologiesIds\"\r\n        ></pek-technology-picker>\r\n      </div>\r\n\r\n      <div class=\"form-group\">\r\n        <label>\r\n          Product*\r\n          <ng-container *ngIf=\"selectedNomenclature\">\r\n            : {{selectedNomenclature.code}} {{selectedNomenclature.name}}\r\n          </ng-container>\r\n        </label>\r\n\r\n        <div class=\"custom-button\" *ngIf=\"!selectedNomenclature\">\r\n          <p-button\r\n            icon=\"pi pi-plus\"\r\n            (click)=\"onSelectProductMode()\"\r\n            type=\"button\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Select Product\r\n          </p-button>\r\n        </div>\r\n\r\n        <div class=\"custom-button\" *ngIf=\"selectedNomenclature\">\r\n          <p-button\r\n            icon=\"pi pi-replay\"\r\n            (click)=\"onReselectProduct()\"\r\n            type=\"button\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Reselect Product\r\n          </p-button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions\r\n  class=\"justify-content-between\"\r\n  [class.buttons]=\"isSelectProductMode\"\r\n>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    *ngIf=\"!isSelectProductMode\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Add Product\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n\r\n  <button\r\n    *ngIf=\"isSelectProductMode\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Select Product\"\r\n    class=\"p-button-success\"\r\n    [disabled]=\"!selectedNomenclature\"\r\n    (click)=\"onChoiceProduct()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #nomenclaturePicker>\r\n  <pek-nomenclature-picker\r\n    (selectProduct)=\"onSelectNomenclature($event)\"\r\n    [paginationAbsolute]=\"true\"\r\n  ></pek-nomenclature-picker>\r\n</ng-template>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {LocatorService} from '../../services/locator.service';\r\nimport {Locator} from '../../models/locator';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-locator',\r\n  templateUrl: './create-edit-locator.component.html',\r\n  styleUrls: ['./create-edit-locator.component.scss']\r\n})\r\nexport class CreateEditLocatorComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', Validators.required],\r\n    warehouse: [0, Validators.required],\r\n    row: [0, [Validators.required, Validators.min(0)]],\r\n    shelf: [0, [Validators.required, Validators.min(0)]],\r\n    column: [0, [Validators.required, Validators.min(0)]],\r\n    place: [0, [Validators.required, Validators.min(0)]],\r\n    description: ['', Validators.required],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly locatorService: LocatorService,\r\n    private dialogRef: MatDialogRef<CreateEditLocatorComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, locator: Locator }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.locator.id));\r\n      this.form.patchValue(<any>this.data.locator);\r\n      this.form.get('warehouse').patchValue(this.data.locator.warehouse.id)\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createLocator();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editLocator();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createLocator() {\r\n    const send = <any>this.form.value;\r\n    this.locatorService.create(send).subscribe({\r\n      next: locator => this.dialogRef.close(locator),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editLocator() {\r\n    const send = <any>this.form.value;\r\n    this.locatorService.update(send).subscribe({\r\n      next: locator => this.dialogRef.close(locator),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectWarehouse(id: number) {\r\n    this.form.get('warehouse').patchValue(id);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Locator\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Warehouse*</label>\r\n      <pek-warehouse-picker\r\n        [selectedWarehouseId]=\"+form.get('warehouse').value\"\r\n        (selectWarehouse)=\"onSelectWarehouse($event)\"\r\n      ></pek-warehouse-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n\r\n    <div class=\"row\">\r\n      <div class=\"col-3\">\r\n        <div class=\"form-group\">\r\n          <label for=\"row\">Row*</label>\r\n          <input formControlName=\"row\" pInputText min=\"0\" class=\"form-control\" type=\"number\" id=\"row\" required=\"required\">\r\n        </div>\r\n      </div>\r\n      <div class=\"col-3\">\r\n        <div class=\"form-group\">\r\n          <label for=\"column\">Column*</label>\r\n          <input formControlName=\"column\" pInputText min=\"0\" class=\"form-control\" type=\"number\" id=\"column\" required=\"required\">\r\n        </div>\r\n      </div>\r\n      <div class=\"col-3\">\r\n        <div class=\"form-group\">\r\n          <label for=\"shelf\">Shelf*</label>\r\n          <input formControlName=\"shelf\" pInputText min=\"0\" class=\"form-control\" type=\"number\" id=\"shelf\" required=\"required\">\r\n        </div>\r\n      </div>\r\n      <div class=\"col-3\">\r\n        <div class=\"form-group\">\r\n          <label for=\"place\">Place*</label>\r\n          <input formControlName=\"place\" pInputText min=\"0\" class=\"form-control\" type=\"number\" id=\"place\" required=\"required\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description*</label>\r\n      <textarea id=\"description\" [rows]=\"2\" pInputTextarea [autoResize]=\"true\" formControlName=\"description\"></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {UnitMeasure} from '../../../product-structure/models/unit-measure';\r\nimport {UnitMeasureService} from '../../services/unit-measure.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-unit-measure',\r\n  templateUrl: './create-edit-unit-measure.component.html',\r\n  styleUrls: ['./create-edit-unit-measure.component.scss']\r\n})\r\nexport class CreateEditUnitMeasureComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    symbol: ['', [Validators.required]],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly unitMeasureService: UnitMeasureService,\r\n    private dialogRef: MatDialogRef<CreateEditUnitMeasureComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, unitMeasure: UnitMeasure }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.unitMeasure.id));\r\n      this.form.patchValue(this.data.unitMeasure);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createUnitMeasure();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editUnitMeasure();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createUnitMeasure() {\r\n    const send = <Partial<UnitMeasure>>this.form.value;\r\n    this.unitMeasureService.create(send).subscribe({\r\n      next: unitMeasure => this.dialogRef.close(unitMeasure),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editUnitMeasure() {\r\n    const send = <Partial<UnitMeasure>>this.form.value;\r\n    this.unitMeasureService.update(send).subscribe({\r\n      next: unitMeasure => this.dialogRef.close(unitMeasure),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Unit Measure\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"symbol\">Symbol*</label>\r\n      <input type=\"text\" id=\"symbol\" pInputText formControlName=\"symbol\">\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {WarehouseService} from '../../services/warehouse.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {Warehouse} from '../../models/warehouse';\r\nimport {Category} from '../../../product-structure/models/category';\r\nimport {CategoriesService} from '../../../product-structure/services/categories.service';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-warehouse-category',\r\n  templateUrl: './create-edit-warehouse-category.component.html',\r\n  styleUrls: ['./create-edit-warehouse-category.component.scss']\r\n})\r\nexport class CreateEditWarehouseCategoryComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', Validators.required],\r\n    description: ['', Validators.required],\r\n    unit_of_measure: [null, Validators.required],\r\n    parent: [null],\r\n    is_for_root: [true]\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly categoriesService: CategoriesService,\r\n    private dialogRef: MatDialogRef<CreateEditWarehouseCategoryComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, category: Category }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.category.id));\r\n      this.form.patchValue(<any>this.data.category);\r\n      this.form.get('unit_of_measure').patchValue(<any>this.data.category.unit_of_measure.id);\r\n\r\n      if (this.data.category.parent) {\r\n        this.form.get('parent').patchValue(this.data.category.parent);\r\n      } else {\r\n        this.form.get('is_for_root').patchValue(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createCategory();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editCategory();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createCategory() {\r\n    const send = <any>this.form.value;\r\n    this.categoriesService.create(send).subscribe({\r\n      next: category => this.dialogRef.close(category),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editCategory() {\r\n    const send = <Partial<Warehouse>>this.form.value;\r\n    this.categoriesService.updatePartly(send).subscribe({\r\n      next: category => this.dialogRef.close(category),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onChoiceCategory(category: Category) {\r\n    if (category) {\r\n      this.form.get('parent').patchValue(category.id);\r\n      this.form.get('is_for_root').patchValue(false);\r\n    } else {\r\n      this.form.get('parent').patchValue(null);\r\n      this.form.get('is_for_root').patchValue(true);\r\n    }\r\n  }\r\n\r\n  onSelectMeasureUnit(id: number) {\r\n    this.form.get('unit_of_measure').patchValue(<any>id);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Category\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Parent Category</label>\r\n      <pek-product-category-picker\r\n        [currentCategoryId]=\"form.get('parent').value\"\r\n        [ignoredCategoryId]=\"data.category?.id\"\r\n        (choiceCategory)=\"onChoiceCategory($event)\"\r\n      ></pek-product-category-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description*</label>\r\n      <textarea id=\"description\" [rows]=\"2\" pInputTextarea [autoResize]=\"true\" formControlName=\"description\"></textarea>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Unit of measure*</label>\r\n      <pek-unit-measure-picker\r\n        (selectMeasureUnit)=\"onSelectMeasureUnit($event)\"\r\n        [currentMeasureUnitId]=\"+form.get('unit_of_measure').value\"\r\n      ></pek-unit-measure-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {ENomenclatureType, Nomenclature, NomenclatureImage} from '@shared/models/nomenclature';\r\nimport {Product} from '../../../product-structure/models/product';\r\nimport {finalize, forkJoin, of} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-warehouse-product',\r\n  templateUrl: './create-edit-warehouse-product.component.html',\r\n  styleUrls: ['./create-edit-warehouse-product.component.scss']\r\n})\r\nexport class CreateEditWarehouseProductComponent implements OnInit {\r\n  isSaving = false;\r\n  isLoading = true;\r\n  nomenclatureType = ENomenclatureType;\r\n\r\n  selectionTypeMode = true;\r\n\r\n  product: Partial<Product> = {\r\n    nomenclature: null\r\n  };\r\n\r\n  newProduct: Partial<Product> = {\r\n    nomenclature: {\r\n      id: null,\r\n      category: null,\r\n      technologies: [],\r\n      images: [],\r\n      type: null,\r\n    }\r\n  };\r\n\r\n  isFormInvalid: boolean = false;\r\n  formValue: Partial<Product & Nomenclature>;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, nomenclatureId: number },\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private dialogRef: MatDialogRef<CreateEditWarehouseProductComponent>,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.dialogRef.updateSize('50rem', 'auto');\r\n      this.getProduct();\r\n    } else {\r\n      this.isLoading = false;\r\n    }\r\n  }\r\n\r\n  getProduct() {\r\n    this.nomenclatureService.getById(this.data.nomenclatureId).subscribe(nomenclature => {\r\n      this.product.nomenclature = nomenclature;\r\n\r\n      if (this.product.nomenclature.type !== ENomenclatureType.PURCHASED) {\r\n        this.dialogRef.updateSize('60rem', 'auto');\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onChangeFormValue(data: { invalid: boolean, formValue: Partial<Product & Nomenclature> }) {\r\n    this.formValue = data.formValue;\r\n    this.isFormInvalid = data.invalid;\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createWarehouseProduct();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editWarehouseProduct();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  onUploadImage(files: File[]) {\r\n    files.forEach(newFile => {\r\n      const send = {\r\n        nomenclature: this.product.nomenclature.id,\r\n        image: newFile,\r\n      };\r\n\r\n      this.nomenclatureService.uploadImage(send).subscribe(image => {\r\n        this.product.nomenclature.images.push(image);\r\n      });\r\n    });\r\n  }\r\n\r\n  onRemoveImage(index: number) {\r\n    this.nomenclatureService.removeImage(this.product.nomenclature.images[index].id).subscribe(() => {\r\n      this.product.nomenclature.images.splice(index, 1);\r\n    });\r\n  }\r\n\r\n  onNewProductRemoveImage(idx: number) {\r\n    this.newProduct.nomenclature.images.splice(idx, 1);\r\n  }\r\n\r\n  onNewProductUploadImage(files: File[]) {\r\n    files.forEach(file => {\r\n      const fileReader = new FileReader();\r\n\r\n      fileReader.onload = (fileLoadedEvent) => {\r\n        const srcData = fileLoadedEvent.target.result;\r\n\r\n        const newImage: NomenclatureImage = {\r\n          file,\r\n          image: srcData,\r\n          id: null\r\n        };\r\n\r\n        this.newProduct.nomenclature.images.push(newImage);\r\n      };\r\n\r\n      fileReader.readAsDataURL(file);\r\n    });\r\n  }\r\n\r\n  createWarehouseProduct() {\r\n    if (!this.isFormInvalid) {\r\n      this.isSaving = true;\r\n\r\n      const send: Partial<Nomenclature> = {\r\n        name: this.formValue.name,\r\n        code: this.formValue.code,\r\n        description: this.formValue.description,\r\n        type: this.formValue.type,\r\n      };\r\n\r\n      if (this.formValue.type === ENomenclatureType.PURCHASED) {\r\n        send.category = this.formValue.category;\r\n        send.bulk_or_serial = this.formValue.bulk_or_serial;\r\n        delete send.code;\r\n      } else {\r\n        send.technologies = [...this.formValue.technologies];\r\n        send.category = null;\r\n      }\r\n\r\n      this.nomenclatureService.create(send).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(nomenclature => {\r\n        this.isSaving = true;\r\n\r\n        const send = [];\r\n\r\n        if (this.newProduct.nomenclature.images.length > 0) {\r\n          this.newProduct.nomenclature.images.forEach(file => {\r\n            send.push({\r\n              nomenclature: nomenclature.id,\r\n              image: file.file,\r\n            });\r\n          });\r\n\r\n          this.nomenclatureService.uploadImagesSeveral(send).pipe(\r\n            finalize(() => this.isSaving = false)\r\n          ).subscribe(() => this.dialogRef.close(true));\r\n        } else {\r\n          this.dialogRef.close(true);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  editWarehouseProduct() {\r\n    if (!this.isFormInvalid) {\r\n      this.isSaving = true;\r\n\r\n      const send: Partial<Nomenclature> = {\r\n        id: this.product.nomenclature.id,\r\n        name: this.formValue.name,\r\n        code: this.formValue.code,\r\n        description: this.formValue.description,\r\n        type: this.formValue.type,\r\n      };\r\n      let createUpdateTechnicalEquipments;\r\n      if (this.product.nomenclature.type === ENomenclatureType.PURCHASED) {\r\n        send.category = this.formValue.category;\r\n        send.bulk_or_serial = this.formValue.bulk_or_serial;\r\n        delete send.code;\r\n      } else {\r\n        send.technologies = [...this.formValue.technologies];\r\n        send.category = null;\r\n        const technicalEquipments = this.formValue.technical_equipments;\r\n        createUpdateTechnicalEquipments = {\r\n          updated_created_technical_equipment: technicalEquipments.map(equipment => {\r\n            return {\r\n              id: equipment.id,\r\n              nomenclature_in_use: equipment.nomenclature_in_use.id,\r\n              quantity: equipment.quantity\r\n            };\r\n          }),\r\n          deleted_technical_equipment_ids: this.formValue.deleted_technical_equipments_ids,\r\n        };\r\n      }\r\n\r\n      forkJoin({\r\n        nomenclature: this.nomenclatureService.update(send),\r\n        technicalEquipment: this.product.nomenclature.type !== ENomenclatureType.PURCHASED ?\r\n          this.nomenclatureService.bulkCreateUpdateTechnicalEquipments(this.product.nomenclature.id, createUpdateTechnicalEquipments) :\r\n          of(true),\r\n      }).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(() => {\r\n        this.dialogRef.close(true);\r\n      });\r\n    }\r\n  }\r\n\r\n  choiceType(type: ENomenclatureType) {\r\n    this.newProduct.nomenclature.type = type;\r\n\r\n    if (this.newProduct.nomenclature.type !== ENomenclatureType.PURCHASED) {\r\n      this.dialogRef.updateSize('60rem', 'auto');\r\n    } else {\r\n      this.dialogRef.updateSize('50rem', 'auto');\r\n    }\r\n\r\n    this.selectionTypeMode = false;\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Item\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"create-edit-warehouse-product\">\r\n    <ng-container *ngIf=\"data.type === 'edit'\">\r\n      <ng-container *ngIf=\"!isLoading; else loading\">\r\n        <pek-create-edit-form\r\n          [isShowQuantity]=\"false\"\r\n          [product]=\"product\"\r\n          (formChange)=\"onChangeFormValue($event)\"\r\n          (uploadImage)=\"onUploadImage($event)\"\r\n          (removeImage)=\"onRemoveImage($event)\"\r\n        ></pek-create-edit-form>\r\n      </ng-container>\r\n    </ng-container>\r\n\r\n    <ng-container *ngIf=\"data.type === 'create'\">\r\n      <ng-container *ngIf=\"!selectionTypeMode; else selectionType\">\r\n        <pek-create-edit-form\r\n          type=\"create\"\r\n          [isShowQuantity]=\"false\"\r\n          [product]=\"newProduct\"\r\n          (formChange)=\"onChangeFormValue($event)\"\r\n          (uploadImage)=\"onNewProductUploadImage($event)\"\r\n          (removeImage)=\"onNewProductRemoveImage($event)\"\r\n        ></pek-create-edit-form>\r\n      </ng-container>\r\n    </ng-container>\r\n  </div>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <ng-container *ngIf=\"!isLoading\">\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      label=\"Cancel\"\r\n      [mat-dialog-close]=\"false\"\r\n      class=\"p-button-danger\"\r\n    ></button>\r\n    <button\r\n      *ngIf=\"data.type === 'edit' || (data.type === 'create' && !this.selectionTypeMode)\"\r\n      pButton\r\n      type=\"button\"\r\n      [label]=\"data.type\"\r\n      class=\"p-button-success\"\r\n      [disabled]=\"isFormInvalid\"\r\n      [loading]=\"isSaving\"\r\n      (click)=\"onSave()\"\r\n    ></button>\r\n  </ng-container>\r\n</mat-dialog-actions>\r\n\r\n<ng-template #loading>\r\n  <div class=\"loading\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 3.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #selectionType>\r\n  <div class=\"choice-type\">\r\n    <h3>Please select the type of new position</h3>\r\n\r\n    <div class=\"choice-type__buttons\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Purchased\"\r\n        (click)=\"choiceType(nomenclatureType.PURCHASED)\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Assembly\"\r\n        (click)=\"choiceType(nomenclatureType.ASSEMBLY)\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        label=\"Manufactured\"\r\n        (click)=\"choiceType(nomenclatureType.MANUFACTURED)\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</ng-template>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {WarehouseService} from '../../services/warehouse.service';\r\nimport {Warehouse} from '../../models/warehouse';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-warehouse',\r\n  templateUrl: './create-edit-warehouse.component.html',\r\n  styleUrls: ['./create-edit-warehouse.component.scss']\r\n})\r\nexport class CreateEditWarehouseComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    description: ['', Validators.required],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly warehouseService: WarehouseService,\r\n    private dialogRef: MatDialogRef<CreateEditWarehouseComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, warehouse: Warehouse }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.warehouse.id));\r\n      this.form.patchValue(this.data.warehouse);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createWarehouse();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editWarehouse();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createWarehouse() {\r\n    const send = <Partial<Warehouse>>this.form.value;\r\n    this.warehouseService.create(send).subscribe({\r\n      next: warehouse => this.dialogRef.close(warehouse),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editWarehouse() {\r\n    const send = <Partial<Warehouse>>this.form.value;\r\n    this.warehouseService.update(send).subscribe({\r\n      next: warehouse => this.dialogRef.close(warehouse),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Warehouse\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"description\">Description*</label>\r\n      <textarea id=\"description\" [rows]=\"2\" pInputTextarea [autoResize]=\"true\" formControlName=\"description\"></textarea>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Warehouse} from '../../models/warehouse';\r\nimport {Locator} from '../../models/locator';\r\nimport {PhysicalInventoryService} from '../../services/physical-inventory.service';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-create-physical-inventory',\r\n  templateUrl: './create-physical-inventory.component.html',\r\n  styleUrls: ['./create-physical-inventory.component.scss']\r\n})\r\nexport class CreatePhysicalInventoryComponent implements OnInit {\r\n  form: FormGroup = this.fb.group({\r\n    warehouses: [null, Validators.required],\r\n    locators: [null, Validators.required],\r\n  });\r\n\r\n  isSaving = false;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<CreatePhysicalInventoryComponent>,\r\n    private readonly physicalInventoryServices: PhysicalInventoryService,\r\n    @Inject(MAT_DIALOG_DATA) private data: any,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  selectWarehouses(warehouses: Warehouse[]) {\r\n    let value = null;\r\n    if (warehouses?.length > 0) value = warehouses.map(w => w.id);\r\n    this.form.get('warehouses').patchValue(value);\r\n  }\r\n\r\n  selectLocators(locators: Locator[]) {\r\n    let value = null;\r\n    if (locators?.length > 0) value = locators.map(w => w.id);\r\n    this.form.get('locators').patchValue(value);\r\n  }\r\n\r\n  onCreatePhysicalInventory() {\r\n    this.isSaving = true;\r\n    const locatorsIds = this.form.get('locators').value.splice(',').join(',');\r\n    this.physicalInventoryServices.createPhysicalInventory(locatorsIds).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => this.dialogRef.close(true));\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Create Physical Inventory\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Warehouses</label>\r\n      <pek-multi-warehouse-picker\r\n        (selectWarehouses)=\"selectWarehouses($event)\"\r\n        [currentWarehousesIds]=\"form.get('warehouses').value\"\r\n      ></pek-multi-warehouse-picker>\r\n    </div>\r\n\r\n    <div class=\"form-group\">\r\n      <label>Locator</label>\r\n      <pek-multi-locator-picker\r\n        [isDisabled]=\"true\"\r\n        [currentWarehousesIds]=\"form.get('warehouses').value\"\r\n        (selectLocators)=\"selectLocators($event)\"\r\n      >\r\n      </pek-multi-locator-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Create\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onCreatePhysicalInventory()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {PhysicalInventoryService} from '../../services/physical-inventory.service';\r\nimport {Product} from '../../../product-structure/models/product';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-move-physical-inventory-product',\r\n  templateUrl: './move-physical-inventory-product.component.html',\r\n  styleUrls: ['./move-physical-inventory-product.component.scss']\r\n})\r\nexport class MovePhysicalInventoryProductComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    new_locator_id: [null, Validators.required],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<MovePhysicalInventoryProductComponent>,\r\n    private readonly physicalInventoryService: PhysicalInventoryService,\r\n    @Inject(MAT_DIALOG_DATA) public data: Product,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  selectLocator(id: number) {\r\n    this.form.get('new_locator_id').patchValue(id);\r\n  }\r\n\r\n  onMoveProduct() {\r\n    this.isSaving = true;\r\n    this.physicalInventoryService.movePhysicalInventoryProduct(this.data.id, this.form.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => this.dialogRef.close(true));\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Move Product\r\n\r\n        <ng-container *ngIf=\"data.product; else productTitle\">\r\n          {{data.product.nomenclature.name}}\r\n        </ng-container>\r\n\r\n        <ng-template #productTitle>\r\n          {{data.nomenclature.name}}\r\n        </ng-template>\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <label class=\"current-locator\">\r\n      Current Locator: {{data.locator.name}}\r\n      R: {{data.locator.row}}\r\n      Col: {{data.locator.column}}\r\n      Sh: {{data.locator.shelf}}\r\n      Pl: {{data.locator.place}}\r\n    </label>\r\n    <div class=\"form-group\">\r\n      <label>Move to*</label>\r\n      <pek-group-locator-picker\r\n        [product]=\"data\"\r\n        (selectLocator)=\"selectLocator($event)\"\r\n      ></pek-group-locator-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Move\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onMoveProduct()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {WarehouseProductService} from '../../services/warehouse-product.service';\r\nimport {WarehouseProduct} from '../../models/warehouse-product';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-move-warehouse-product',\r\n  templateUrl: './move-warehouse-product.component.html',\r\n  styleUrls: ['./move-warehouse-product.component.scss']\r\n})\r\nexport class MoveWarehouseProductComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form: FormGroup;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<MoveWarehouseProductComponent>,\r\n    private readonly warehouseProductService: WarehouseProductService,\r\n    @Inject(MAT_DIALOG_DATA) public product: WarehouseProduct,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.product.serial_numbers) {\r\n      this.form = this.fb.group({\r\n        quantity: [0, [Validators.max(this.product.quantity ? this.product.quantity : this.product.total_locator_quantity), Validators.min(1), Validators.required]],\r\n        nomenclature: [this.product.nomenclature.id, Validators.required],\r\n        to_locator: [null, Validators.required],\r\n        from_locator: [this.product.locator.id, Validators.required],\r\n      });\r\n    } else {\r\n      this.form = this.fb.group({\r\n        quantity: [0, [Validators.max(this.product.quantity ? this.product.quantity : this.product.total_locator_quantity), Validators.min(1), Validators.required]],\r\n        to_locator: [null, Validators.required],\r\n      });\r\n    }\r\n  }\r\n\r\n  selectLocator(id: number) {\r\n    this.form.get('to_locator').patchValue(<any>id);\r\n  }\r\n\r\n  onMoveProduct() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n\r\n      if (this.product.serial_numbers) {\r\n        this.warehouseProductService.moveSerial(<Partial<WarehouseProduct>>this.form.value).pipe(\r\n          finalize(() => this.isSaving = false)\r\n        ).subscribe(() => this.dialogRef.close(true));\r\n      }\r\n      if (!this.product.serial_numbers) {\r\n        const send = [];\r\n        let totalQuantity = this.form.get('quantity').value;\r\n\r\n        this.product.extra_info.forEach(item => {\r\n          let actualQuantity = 0;\r\n\r\n          if (totalQuantity <= item.quantity && totalQuantity > 0) {\r\n            actualQuantity = item.quantity - (item.quantity - totalQuantity);\r\n            totalQuantity -= actualQuantity;\r\n          } else if (totalQuantity > 0) {\r\n            actualQuantity = item.quantity;\r\n            totalQuantity -= item.quantity;\r\n          }\r\n\r\n          send.push({\r\n            id: item.id,\r\n            to_locator: this.form.get('to_locator').value,\r\n            quantity: actualQuantity,\r\n          });\r\n        });\r\n\r\n        this.warehouseProductService.moveWarehouseSeveralBulk(<Partial<WarehouseProduct>[]>send).pipe(\r\n          finalize(() => this.isSaving = false)\r\n        ).subscribe(() => this.dialogRef.close(true));\r\n      }\r\n    }\r\n  }\r\n\r\n  onChangeQuantity(value: any) {\r\n    const maxQuantity = this.product.quantity ? this.product.quantity : this.product.total_locator_quantity;\r\n    if (value > maxQuantity) {\r\n      this.form.get('quantity').patchValue(maxQuantity);\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Move Items {{product.nomenclature.name}} ({{product.nomenclature.code}})\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Locator*</label>\r\n      <pek-group-locator-picker\r\n        [product]=\"product\"\r\n        (selectLocator)=\"selectLocator($event)\"\r\n      ></pek-group-locator-picker>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"quantity\">Quantity* (Max: {{product?.quantity ? product.quantity : product?.total_locator_quantity }})</label>\r\n      <input\r\n        type=\"number\"\r\n        id=\"quantity\"\r\n        pInputText\r\n        formControlName=\"quantity\"\r\n        class=\"form-control\"\r\n        (ngModelChange)=\"onChangeQuantity($event)\"\r\n      >\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Move\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onMoveProduct()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Router, UrlTree} from '@angular/router';\r\nimport {WarehouseProductExtraInfo} from '../../models/warehouse-product';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {environment} from '@env/environment';\r\n\r\n@Component({\r\n  selector: 'pek-nomenclature-serial-info',\r\n  templateUrl: './nomenclature-serial-info.component.html',\r\n  styleUrls: ['./nomenclature-serial-info.component.scss']\r\n})\r\nexport class NomenclatureSerialInfoComponent implements OnInit {\r\n\r\n  link = environment.link_url;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<NomenclatureSerialInfoComponent>,\r\n    private readonly router: Router,\r\n    @Inject(MAT_DIALOG_DATA) public data: {extraInfo: WarehouseProductExtraInfo[], nomenclature: Nomenclature},\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.data);\r\n    this.data.extraInfo = [...this.data.extraInfo]\r\n  }\r\n\r\n  protocolInfo(protocolId: number, serial: string, warehouseproductqcprotocol: number) {\r\n  }\r\n\r\n  goToOrder(orderType: number, orderId: number) {\r\n    let url: UrlTree = null;\r\n\r\n    switch (orderType) {\r\n      case 3: {\r\n        url = this.router.createUrlTree(['dash', 'production', 'orders', 'order', orderId]);\r\n        break;\r\n      }\r\n      case 2: {\r\n        url = this.router.createUrlTree(['dash', 'outsource', 'outsource-chain', 'products', orderId]);\r\n        break;\r\n      }\r\n      case 1: {\r\n        url = this.router.createUrlTree(['dash', 'procurement', 'orders', 'products', orderId]);\r\n        break;\r\n      }\r\n    }\r\n\r\n    if (url) window.open(this.link.slice(0, -1) + url.toString(), '_blank');\r\n  }\r\n\r\n  goToInvoice(invoiceId: number) {\r\n    const url = this.router.createUrlTree(['dash', 'accounting', 'invoices', 'products', invoiceId]);\r\n    window.open(url.toString(), '_blank');\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Serial Numbers Info\r\n  </h2>\r\n</div>\r\n\r\n<!--<mat-dialog-content>-->\r\n\r\n<div class=\"nomenclature-serial-info\">\r\n  <p-table\r\n    [rows]=\"10\"\r\n    rowExpandMode=\"single\"\r\n    dataKey=\"id\"\r\n    selectionMode=\"single\"\r\n    [value]=\"data.extraInfo\"\r\n    [paginator]=\"data.extraInfo.length > 10\"\r\n    scrollHeight=\"calc(100vh - 20rem)\"\r\n    [scrollable]=\"true\"\r\n  >\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th style=\"width: 10%\" class=\"index-header text-center\">#</th>\r\n        <th style=\"width: 15%\" class=\"text-center\">Invoice</th>\r\n        <th style=\"width: 15%\" class=\"text-center\">Order</th>\r\n        <th style=\"width: 20%\" class=\"text-center\">Protocol</th>\r\n        <th style=\"width: 40%\" class=\"text-center\">Serial Number</th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-info let-i=\"rowIndex\">\r\n      <tr [pRowToggler]=\"info\">\r\n        <td style=\"width: 10%\" class=\"text-center\">\r\n          <h3 class=\"td-title\">#</h3>\r\n          {{i + 1}}\r\n        </td>\r\n        <td style=\"width: 15%\" class=\"text-center\">\r\n          <h3 class=\"td-title\">Invoice</h3>\r\n          <a *ngIf=\"info?.invoice_id\" (click)=\"goToInvoice(info.invoice_id)\">{{info.invoice_id}}</a>\r\n          <div *ngIf=\"!info?.invoice_id\">None</div>\r\n        </td>\r\n        <td style=\"width: 15%\" class=\"text-center\">\r\n          <h3 class=\"td-title\">Order</h3>\r\n          <a *ngIf=\"info?.order_id\" (click)=\"goToOrder(info.order_accounting_type, info.order_id)\">{{info.order_id}}</a>\r\n          <div *ngIf=\"!info?.order_id\">None</div>\r\n        </td>\r\n        <td style=\"width: 20%\" class=\"text-center\">\r\n          <h3 class=\"td-title\">Protocol</h3>\r\n          <a\r\n            *ngIf=\"data?.nomenclature?.qc_protocol\"\r\n            (click)=\"protocolInfo(data.nomenclature.qc_protocol, info.serial_number_str, info.warehouseproductqcprotocol)\"\r\n          >\r\n            {{data.nomenclature.qc_protocol}}\r\n          </a>\r\n          <div *ngIf=\"!data?.nomenclature?.qc_protocol\">None</div>\r\n        </td>\r\n        <td style=\"width: 40%\" class=\"text-center\">\r\n          <h3 class=\"td-title\">Serial Number</h3>\r\n          <div *ngIf=\"info?.serial_number_str\">{{info.serial_number_str}}</div>\r\n          <div *ngIf=\"!info?.serial_number_str\">None</div>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n      <tr>\r\n        <td class=\"text-center p-3\" [attr.colspan]=\"5\">\r\n          <span>No Records Found</span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </p-table>\r\n  <!--</mat-dialog-content>-->\r\n</div>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {InventoryProduct} from '../../models/physical-inventory';\r\n\r\n@Component({\r\n  selector: 'pek-physical-inventory-products-changes',\r\n  templateUrl: './physical-inventory-products-changes.component.html',\r\n  styleUrls: ['./physical-inventory-products-changes.component.scss']\r\n})\r\nexport class PhysicalInventoryProductsChangesComponent implements OnInit {\r\n  nonScannedSerialNumbers: InventoryProduct[];\r\n  notMatchingQuantity: InventoryProduct[];\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<PhysicalInventoryProductsChangesComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: InventoryProduct[],\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    // console.log('this.data', this.data);\r\n    this.nonScannedSerialNumbers = this.data.filter(invProduct => invProduct.serial_number);\r\n    this.notMatchingQuantity = this.data.filter(invProduct => !invProduct.serial_number);\r\n  }\r\n\r\n  onAcceptChanges() {\r\n    this.dialogRef.close(true);\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Physical Inventory Before Completion Check\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <p-tabView>\r\n    <p-tabPanel header=\"Not Matching Quantity\">\r\n      <p-table\r\n        [rows]=\"10\"\r\n        [value]=\"notMatchingQuantity\"\r\n        [paginator]=\"notMatchingQuantity.length > 10\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 10%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 25%\" class=\"text-center\">Code</th>\r\n            <th style=\"width: 25%\" class=\"text-center\">Name</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Initial Quantity</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Current Quantity</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 25%\" class=\"text-center\">\r\n              {{product.nomenclature.code}}\r\n            </td>\r\n            <td style=\"width: 25%\">\r\n              <b *ngIf=\"product.nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n              {{product.nomenclature.name}}\r\n            </td>\r\n            <td style=\"width: 20%\" class=\"text-center\">\r\n              {{product.initial_quantity}}\r\n            </td>\r\n            <td style=\"width: 20%\" class=\"text-center\">\r\n              {{product.current_available_quantity}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-3\" [attr.colspan]=\"5\">\r\n              <span>No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </p-tabPanel>\r\n    <p-tabPanel header=\"With Serial Number Not Scanned\">\r\n      <p-table\r\n        [rows]=\"10\"\r\n        [value]=\"nonScannedSerialNumbers\"\r\n        [paginator]=\"nonScannedSerialNumbers.length > 10\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 10%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 25%\" class=\"text-center\">Code</th>\r\n            <th style=\"width: 25%\" class=\"text-center\">Name</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Initial Quantity</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Current Quantity</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 25%\" class=\"text-center\">\r\n              {{product.nomenclature.code}}\r\n            </td>\r\n            <td style=\"width: 25%\">\r\n              <b *ngIf=\"product.nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n              {{product.nomenclature.name}}\r\n            </td>\r\n            <td style=\"width: 20%\" class=\"text-center\">\r\n              {{product.initial_quantity}}\r\n            </td>\r\n            <td style=\"width: 20%\" class=\"text-center\">\r\n              {{product.current_available_quantity}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-3\" [attr.colspan]=\"5\">\r\n              <span>No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </p-tabPanel>\r\n  </p-tabView>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Complete\"\r\n    class=\"p-button-success\"\r\n    (click)=\"onAcceptChanges()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {\r\n  ProductionListAccountingType,\r\n  ProductionListPositionType\r\n} from '../../components/production-lists/production-lists.component';\r\nimport {ListService} from '../../services/list.service';\r\nimport {tap} from 'rxjs/operators';\r\nimport {Order} from '../../../procurement/models/order';\r\nimport {environment} from '@env/environment';\r\nimport {Table} from 'primeng/table';\r\n\r\nexport class OrderedProductInfo {\r\n  code: string;\r\n  name: string;\r\n  created: Date;\r\n  latest_order_status_date: string;\r\n  ordered_quantity: number;\r\n  technology: string;\r\n  order: {\r\n    id: string;\r\n    accounting_type: number;\r\n  }\r\n  orders: {\r\n    id: string;\r\n    accounting_type: number;\r\n  }[];\r\n  children?: OrderedProductInfo[];\r\n}\r\n\r\n@Component({\r\n  selector: 'pek-production-list-chains-statistics',\r\n  templateUrl: './production-list-chains-statistics.component.html',\r\n  styleUrls: ['./production-list-chains-statistics.component.scss']\r\n})\r\nexport class ProductionListChainsStatisticsComponent implements OnInit {\r\n  isLoading = true;\r\n  accountingType: string;\r\n  positionType: string;\r\n\r\n  link = environment.link_url + 'dash/';\r\n\r\n  orders: OrderedProductInfo[] = [];\r\n  isShowAll: boolean;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ProductionListChainsStatisticsComponent>,\r\n    private readonly listService: ListService,\r\n    @Inject(MAT_DIALOG_DATA) public data: {\r\n      id: number,\r\n      send: {\r\n        accounting_type: ProductionListAccountingType,\r\n        positions_type: ProductionListPositionType\r\n      }\r\n    },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getAccountingType();\r\n    this.getPositionType();\r\n    this.getStatistics();\r\n  }\r\n\r\n  getStatistics() {\r\n    if (this.data.send.accounting_type === 'purchased') {\r\n      delete this.data.send.positions_type;\r\n    }\r\n    this.listService.getChainsStatisticsForProductionList(this.data.id, this.data.send).pipe(\r\n      tap((orders: OrderedProductInfo[]) => {\r\n        orders.forEach(order => {\r\n          const isInList = this.orders.findIndex(el => el.code.trim() === order.code.trim() &&\r\n                                                 el.technology?.trim() === order.technology?.trim()) > -1;\r\n          if (!isInList) {\r\n            order.ordered_quantity = orders.filter(p => p.code.trim() === order.code.trim() &&\r\n              p.technology?.trim() === order.technology?.trim()).reduce((sum, p) => sum + p.ordered_quantity, 0);\r\n            order.orders = orders.filter(p => p.code.trim() === order.code.trim() &&\r\n              p.technology?.trim() === order.technology?.trim()).map(el => el.order);\r\n            order.orders = order.orders.filter(this.onlyUniqueById);\r\n            this.orders.push(order);\r\n          }\r\n        });\r\n        this.orders = [...this.orders];\r\n      }),\r\n      tap(() => this.isLoading = false)\r\n    ).subscribe();\r\n  }\r\n\r\n  onlyUniqueById(value, index, self) {\r\n    return self.findIndex(innerValue => innerValue?.id === value?.id) === index;\r\n  }\r\n\r\n  getPositionType() {\r\n    switch (this.data.send.positions_type) {\r\n      case 'assembly':\r\n        this.positionType = 'Assembly';\r\n        break;\r\n      case 'not assembly':\r\n        this.positionType = 'Items';\r\n        break;\r\n    }\r\n  }\r\n\r\n  getAccountingType() {\r\n    switch (this.data.send.accounting_type) {\r\n      case 'outsource':\r\n        this.accountingType = 'Outsource';\r\n        break;\r\n      case 'purchased':\r\n        this.accountingType = 'Purchased';\r\n        break;\r\n      case 'own':\r\n        this.accountingType = 'Own Production';\r\n        break;\r\n    }\r\n  }\r\n\r\n  goToOrder(order: Partial<Order>) {\r\n    let link: string;\r\n\r\n    switch (order.accounting_type) {\r\n      case 1:\r\n        link = '/procurement/chains/order/' + order.id;\r\n        break;\r\n      case 2:\r\n        link = '/outsourcing/chains/order/' + order.id;\r\n        break;\r\n      case 3:\r\n        link = `${this.link}production/orders/order/` + order.id;\r\n        break;\r\n    }\r\n\r\n    window.open(link, '_blank')\r\n  }\r\n\r\n  paginate($event: any, table: Table) {\r\n    console.log('event', $event);\r\n    console.log('table', table);\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Production List Statistics for {{accountingType}} {{positionType}}\r\n  </h2>\r\n</div>\r\n\r\n<div class=\"nomenclature-serial-info\">\r\n  <p-table\r\n    #table\r\n    [rows]=\"10\"\r\n    rowExpandMode=\"single\"\r\n    dataKey=\"id\"\r\n    selectionMode=\"single\"\r\n    [value]=\"orders\"\r\n    [paginator]=\"!isShowAll\"\r\n    scrollHeight=\"calc(100vh - 20rem)\"\r\n    [scrollable]=\"true\"\r\n  >\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th style=\"width: 3%\" class=\"index-header text-center\">#</th>\r\n        <th style=\"width: 20%\">Code</th>\r\n        <th style=\"width: 15%\">Name</th>\r\n        <th style=\"width: 10%\" class=\"text-center\">Technology</th>\r\n        <th style=\"width: 10%\" class=\"text-center\">Order</th>\r\n        <th style=\"width: 12%\" class=\"text-center\">Ordered Quantity</th>\r\n        <th style=\"width: 10%\" class=\"text-center\">Created</th>\r\n        <th style=\"width: 20%\" class=\"text-center\">Date of Receipt of the Position</th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-item let-i=\"rowIndex\">\r\n      <tr>\r\n        <td class=\"text-center\">\r\n          <h3 class=\"td-title\">#</h3>\r\n          {{i + 1}}\r\n        </td>\r\n        <td class=\"word-break\">\r\n          <h3 class=\"td-title\">Code</h3>\r\n          {{item.code}}\r\n        </td>\r\n        <td>\r\n          <h3 class=\"td-title\">Name</h3>\r\n          {{item.name}}\r\n        </td>\r\n        <td class=\"text-center\">\r\n          <h3 class=\"td-title\">Technology</h3>\r\n          {{item.technology}}\r\n        </td>\r\n        <td class=\"text-center\">\r\n          <h3 class=\"td-title\">Order</h3>\r\n          <div *ngFor=\"let order of item.orders\">\r\n            <a (click)=\"goToOrder(item.order)\">\r\n              {{item?.order?.id}}\r\n            </a>\r\n          </div>\r\n        </td>\r\n        <td class=\"text-center\">\r\n          <h3 class=\"td-title\">Ordered Quantity</h3>\r\n          {{item.ordered_quantity}}\r\n        </td>\r\n        <td class=\"text-center\">\r\n          <h3 class=\"td-title\">Created</h3>\r\n          {{item.created | date: 'dd/MM/yyyy'}}\r\n        </td>\r\n        <td class=\"text-center\">\r\n          <h3 class=\"td-title\">Date of Receipt of the Position</h3>\r\n          {{item.latest_order_status_date | date: 'dd/MM/yyyy'}}\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n      <tr>\r\n        <td class=\"text-center p-4\" [attr.colspan]=\"8\">\r\n          <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n          <span *ngIf=\"!isLoading\">No Records Found</span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </p-table>\r\n  <div\r\n    class=\"custom-paginator-wrapper\"\r\n    *ngIf=\"!isShowAll\"\r\n  >\r\n<!--    <p-paginator-->\r\n<!--      #paginator-->\r\n<!--      [rows]=\"10\"-->\r\n<!--      [totalRecords]=\"orders.length\"-->\r\n<!--      (onPageChange)=\"paginate($event, table)\"-->\r\n<!--    >-->\r\n<!--    </p-paginator>-->\r\n    <p-button\r\n      (click)=\"onShowAll()\"\r\n      class=\"paginator-all\"\r\n      type=\"button\"\r\n      styleClass=\"p-button-text\"\r\n    >\r\n      All\r\n    </p-button>\r\n  </div>\r\n\r\n  <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n    <p-button\r\n      type=\"button\"\r\n      (click)=\"onShowPartial()\"\r\n      styleClass=\"p-button-text\"\r\n    >\r\n      Return pagination\r\n    </p-button>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Close\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ListService} from '../../services/list.service';\r\nimport {ActualQuantityPayload, ListProduct, ListProductQuantity} from '../../models/list-product';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {ListProductService} from '../../services/list-product.service';\r\nimport {finalize} from 'rxjs/operators';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {forkJoin} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-production-list-set-actual-quantity-dialog',\r\n  templateUrl: './production-list-set-actual-quantity-dialog.component.html',\r\n  styleUrls: ['./production-list-set-actual-quantity-dialog.component.scss']\r\n})\r\nexport class ProductionListSetActualQuantityDialogComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  quantities: ListProductQuantity[] = [];\r\n\r\n  isSerial = false;\r\n  isLoading = false;\r\n\r\n  error: string = null;\r\n\r\n  listProducts: ListProduct[] = [];\r\n  listProduct: ListProduct;\r\n\r\n  products: ListProduct[] = [];\r\n  selected: any;\r\n\r\n  totalRequiredQuantity: number;\r\n\r\n  deficitQuantity: number = 0;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    id: [<number>null],\r\n    actual_quantity: [<number>null, [Validators.required, Validators.min(1)]],\r\n  });\r\n\r\n  serialsWarehouse: { id: number, label: string }[] = [];\r\n  serialsProduction: { id: number, label: string }[] = [];\r\n\r\n  constructor(\r\n    private readonly dialogRef: MatDialogRef<ProductionListSetActualQuantityDialogComponent>,\r\n    private readonly listService: ListService,\r\n    private readonly listProductService: ListProductService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly fb: FormBuilder,\r\n    @Inject(MAT_DIALOG_DATA) public data: { listProduct: ListProduct, parent: ListProduct, isOldList: boolean },\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    console.log(this.data.listProduct);\r\n\r\n    if (!this.data.isOldList) {\r\n      this.listProduct = Object.assign({}, this.data.listProduct);\r\n\r\n      this.totalRequiredQuantity = JSON.parse(JSON.stringify(this.data.listProduct.total_required_quantity));\r\n\r\n      this.deficitQuantity = this.totalRequiredQuantity;\r\n\r\n      if (this.listProduct.technologies.length === 0) {\r\n        this.products = this.data.listProduct.products.map(p => p);\r\n        this.form.get('id').patchValue(this.listProduct.id);\r\n        this.form.get('actual_quantity').patchValue(0);\r\n      } else {\r\n        this.generateListProducts();\r\n      }\r\n\r\n      if (this.listProduct.nomenclature.bulk_or_serial === '1') {\r\n        this.form.addControl('serial_product_ids', this.fb.control([]));\r\n        this.form.addControl('root_serial_numbers_in_production', this.fb.control([]));\r\n        this.form.addControl('ownProduction', this.fb.control(0));\r\n        this.loadSerialInfo();\r\n      }\r\n\r\n    } else {\r\n      this.listProduct = {...this.data.listProduct};\r\n      this.totalRequiredQuantity = JSON.parse(JSON.stringify(this.data.listProduct.total_required_quantity));\r\n      this.deficitQuantity = this.totalRequiredQuantity;\r\n      this.form.get('id').patchValue(this.listProduct.id);\r\n      this.form.get('actual_quantity').patchValue(0);\r\n\r\n      if (this.listProduct.nomenclature.bulk_or_serial === '1') {\r\n        this.form.addControl('serial_product_ids', this.fb.control([]));\r\n        this.form.addControl('root_serial_numbers_in_production', this.fb.control([]));\r\n        this.form.addControl('ownProduction', this.fb.control(0));\r\n        this.loadSerialInfo();\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  loadSerialInfo() {\r\n    this.isSerial = true;\r\n    this.isLoading = true;\r\n    this.listService.getNomenclatureInfo(this.data.listProduct.nomenclature.id).pipe(\r\n      finalize(() => this.isLoading = false),\r\n    ).subscribe({\r\n      next: response => {\r\n        if (response) {\r\n          response.warehouse_products.forEach(item => {\r\n            this.serialsWarehouse.push(\r\n              {\r\n                id: item.id,\r\n                label: item.serial_number.type_with_number ? item.serial_number.type_with_number : item.serial_number.id\r\n              }\r\n            );\r\n          });\r\n\r\n          response.serial_numbers_in_production.forEach(item => {\r\n            this.serialsProduction.push(\r\n              {id: item.id, label: item.type_with_number ? item.type_with_number : item.id}\r\n            );\r\n          });\r\n        }\r\n      },\r\n      error: () => {\r\n        this.error = 'There are no warehouse products on stock and in production';\r\n      }\r\n    });\r\n  }\r\n\r\n  generateListProducts() {\r\n    const products: ListProduct[] = this.data.listProduct.filteredProducts.map(p => p);\r\n    this.products = [...products];\r\n\r\n    const firstListProducts = this.listProduct.filteredProducts.filter(p => p.task_sort_value === 1);\r\n\r\n    let groupId = 0;\r\n\r\n    firstListProducts.forEach(product => {\r\n      groupId++;\r\n\r\n      let currentProduct: ListProduct = product;\r\n\r\n      while (currentProduct?.next_technology_list_product) {\r\n        currentProduct.groupId = groupId;\r\n        currentProduct = products.find(p => p.id === currentProduct.next_technology_list_product);\r\n      }\r\n\r\n      currentProduct.groupId = groupId;\r\n    });\r\n\r\n    const newProducts: ListProduct[] = [];\r\n\r\n    products.forEach(product => {\r\n      if (!newProducts.find(p => p.technology?.id === product.technology?.id && p.nomenclature.id === product.nomenclature.id)) {\r\n        product.children = products.filter(p => p.technology?.id === product.technology?.id);\r\n        newProducts.push(product);\r\n      }\r\n    });\r\n\r\n    newProducts.sort((a, b) => a.task_sort_value - b.task_sort_value);\r\n\r\n    newProducts.forEach(product => this.quantities.push({\r\n      products: product.children,\r\n      quantity: 0,\r\n    }));\r\n\r\n    this.listProducts = newProducts.map(p => p);\r\n\r\n    if (this.data.parent) {\r\n      const lastProducts = this.quantities[this.quantities.length - 1].products;\r\n\r\n      this.quantities.forEach((quantity, idx) => {\r\n        if (idx < this.quantities.length - 1) {\r\n          quantity.products.forEach((product, idx) => {\r\n            product.parent_technology_list_product = lastProducts[idx].parent_technology_list_product;\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  onEditQuantity(evt: any, listProduct: ListProduct) {\r\n    this.quantities.forEach(product => {\r\n      if (product.products.find(p => p.id === listProduct.id)) {\r\n        product.quantity = +evt.target.value;\r\n      }\r\n    });\r\n\r\n    const lastIndex = this.listProducts.length - 1;\r\n\r\n    let deficit = 0;\r\n\r\n    this.quantities.forEach((quantity, idx) => {\r\n      if (idx === lastIndex) {\r\n        deficit = this.totalRequiredQuantity - quantity.quantity;\r\n      }\r\n    });\r\n\r\n    if (deficit < 0) {\r\n      deficit = 0;\r\n    }\r\n\r\n    this.deficitQuantity = deficit;\r\n  }\r\n\r\n  onSave() {\r\n    if (this.data.listProduct.nomenclature.bulk_or_serial === '1') {\r\n      if (this.data.isOldList) {\r\n        this.saveOldProductionListSerial();\r\n      } else {\r\n        this.saveNewProductionListSerial();\r\n      }\r\n    } else {\r\n      if (this.data.isOldList) {\r\n        this.saveOldProductionList();\r\n      } else {\r\n        this.saveNewProductionList();\r\n      }\r\n    }\r\n\r\n  }\r\n\r\n  disabled() {\r\n    let disabled = false;\r\n\r\n    const selectedQuantity = this.quantities.reduce((sum, q) => sum += q.quantity, 0);\r\n    //\r\n    // if (this.data.listProduct.nomenclature.bulk_or_serial === '1') {\r\n    //   if (this.listProduct.technologies.length === 0) {\r\n    //     if (\r\n    //       this.form.get('ownProduction').value === 0 &&\r\n    //       this.form.get('serial_product_ids').value.length > this.data.listProduct.total_required_quantity\r\n    //     ) {\r\n    //       disabled = true;\r\n    //     } else if (\r\n    //       this.form.get('ownProduction').value === 1 &&\r\n    //       this.form.get('root_serial_numbers_in_production').value.length > this.data.listProduct.total_required_quantity\r\n    //     ) {\r\n    //       disabled = true;\r\n    //     }\r\n    //   } else {\r\n    //     if (\r\n    //       selectedQuantity > this.data.listProduct.total_required_quantity ||\r\n    //       (\r\n    //         this.form.get('ownProduction').value === 0 &&\r\n    //         this.form.get('serial_product_ids').value.length !== selectedQuantity\r\n    //       ) ||\r\n    //       (\r\n    //         this.form.get('ownProduction').value === 1 &&\r\n    //         this.form.get('root_serial_numbers_in_production').value.length !== selectedQuantity\r\n    //       )\r\n    //     ) {\r\n    //       disabled = true;\r\n    //     }\r\n    //   }\r\n    // } else {\r\n    if (this.data.listProduct.nomenclature.bulk_or_serial === '0') {\r\n      if (this.listProduct.technologies.length === 0) {\r\n        disabled = this.form.get('actual_quantity').value > this.data.listProduct.total_required_quantity;\r\n      } else {\r\n        disabled = selectedQuantity > this.data.listProduct.total_required_quantity;\r\n      }\r\n    } else {\r\n      if (\r\n        this.form.get('ownProduction').value === 0 &&\r\n        this.form.get('serial_product_ids').value.length > this.data.listProduct.total_required_quantity\r\n      ) {\r\n        disabled = true;\r\n      } else if (\r\n        this.form.get('ownProduction').value === 1 &&\r\n        this.form.get('root_serial_numbers_in_production').value.length > this.data.listProduct.total_required_quantity\r\n      ) {\r\n        disabled = true;\r\n      }\r\n    }\r\n\r\n    return disabled;\r\n  }\r\n\r\n  saveNewProductionList() {\r\n    this.isSaving = true;\r\n\r\n    const totalRequired = this.data.listProduct.pureTotalRequiredQuantity;\r\n    const total: number = this.quantities.reduce((sum, q) => sum += q.quantity, 0);\r\n\r\n    let send: ActualQuantityPayload[] = [];\r\n\r\n    if (this.listProduct.technologies.length === 0) {\r\n      this.products.forEach((listProduct, idx) => {\r\n        if (idx < this.form.get('actual_quantity').value) {\r\n          send.push({\r\n            id: listProduct.id,\r\n            actual_quantity: 1,\r\n          });\r\n        } else {\r\n          send.push({\r\n            id: listProduct.id,\r\n            actual_quantity: 0,\r\n          });\r\n        }\r\n      });\r\n    } else {\r\n      if (!this.data.parent) {\r\n        let groupId = 1;\r\n\r\n        if (total === 0) {\r\n          this.quantities.forEach(quantity => {\r\n            quantity.products.forEach(p => {\r\n              send.push({\r\n                id: p.id,\r\n                actual_quantity: 0,\r\n              });\r\n            });\r\n          });\r\n        } else if (total !== totalRequired) {\r\n          this.quantities.forEach(quantity => {\r\n            if (quantity.quantity > 0) {\r\n\r\n              let count = 0;\r\n\r\n              while (count < quantity.quantity) {\r\n                const findProduct = quantity.products.find(p => p.groupId === groupId);\r\n\r\n                send.push({\r\n                  id: findProduct.id,\r\n                  group: groupId,\r\n                  actual_quantity: 1,\r\n                });\r\n\r\n                groupId++;\r\n                count++;\r\n              }\r\n            }\r\n          });\r\n\r\n          const groupsIds: Set<number> = new Set<number>();\r\n          send.forEach(s => groupsIds.add(s.group));\r\n\r\n          this.quantities.forEach(quantity => {\r\n            quantity.products.forEach(product => {\r\n              if (!groupsIds.has(product.groupId)) {\r\n                send.push({\r\n                  id: product.id,\r\n                  group: product.groupId,\r\n                  actual_quantity: 0,\r\n                });\r\n              }\r\n            });\r\n          });\r\n        } else {\r\n          this.quantities.forEach(quantity => {\r\n            if (quantity.quantity === totalRequired) {\r\n              quantity.products.forEach(product => {\r\n                send.push({\r\n                  id: product.id,\r\n                  actual_quantity: 1,\r\n                });\r\n              });\r\n            } else if (quantity.quantity > 0) {\r\n              let count = 0;\r\n\r\n              while (count < quantity.quantity) {\r\n                const findProduct = quantity.products.find(p => p.groupId === groupId);\r\n\r\n                send.push({\r\n                  id: findProduct.id,\r\n                  group: groupId,\r\n                  actual_quantity: 1,\r\n                });\r\n\r\n                groupId++;\r\n                count++;\r\n              }\r\n            }\r\n          });\r\n        }\r\n      } else {\r\n\r\n        const groupsIdsArray: number[] = [];\r\n\r\n        this.quantities.forEach(quantity => {\r\n          quantity.products.forEach(product => {\r\n            if (this.data.parent.filteredProducts.map(p => p.id).includes(product.parent_technology_list_product)) {\r\n              groupsIdsArray.push(product.groupId);\r\n            }\r\n          });\r\n        });\r\n\r\n        let groupId = this.adapterService.removeDuplicates(groupsIdsArray, id => id).sort((a, b) => a)[0];\r\n\r\n        if (total === 0) {\r\n          this.quantities.forEach(quantity => {\r\n            quantity.products.forEach(product => {\r\n              if (this.data.parent.filteredProducts.map(p => p.id).includes(product.parent_technology_list_product)) {\r\n                send.push({\r\n                  id: product.id,\r\n                  actual_quantity: 0,\r\n                  group: product.groupId,\r\n                });\r\n              }\r\n            });\r\n          });\r\n        } else if (total !== totalRequired) {\r\n          this.quantities.forEach(quantity => {\r\n            if (quantity.quantity > 0) {\r\n\r\n              let count = 0;\r\n\r\n              while (count < quantity.quantity) {\r\n                const findProduct = quantity.products.find(p => p.groupId === groupId && this.data.parent.filteredProducts.map(p => p.id).includes(p.parent_technology_list_product));\r\n\r\n                send.push({\r\n                  id: findProduct.id,\r\n                  group: groupId,\r\n                  actual_quantity: 1,\r\n                });\r\n\r\n                groupId++;\r\n                count++;\r\n              }\r\n            }\r\n          });\r\n\r\n          const groupsIds: Set<number> = new Set<number>();\r\n          send.forEach(s => groupsIds.add(s.group));\r\n\r\n          this.quantities.forEach(quantity => {\r\n            quantity.products.forEach(product => {\r\n              if (!groupsIds.has(product.groupId) && this.data.parent.filteredProducts.map(p => p.id).includes(product.parent_technology_list_product)) {\r\n                send.push({\r\n                  id: product.id,\r\n                  group: product.groupId,\r\n                  actual_quantity: 0,\r\n                });\r\n              }\r\n            });\r\n          });\r\n        } else {\r\n          this.quantities.forEach(quantity => {\r\n            if (quantity.quantity === totalRequired) {\r\n              quantity.products.forEach(product => {\r\n                if (this.data.parent.filteredProducts.map(p => p.id).includes(product.parent_technology_list_product)) {\r\n                  send.push({\r\n                    id: product.id,\r\n                    group: product.groupId,\r\n                    actual_quantity: 1,\r\n                  });\r\n                }\r\n              });\r\n            } else if (quantity.quantity > 0) {\r\n              let count = 0;\r\n\r\n              while (count < quantity.quantity) {\r\n                const findProduct = quantity.products.find(p => p.groupId === groupId && this.data.parent.filteredProducts.map(p => p.id).includes(p.parent_technology_list_product));\r\n\r\n                send.push({\r\n                  id: findProduct.id,\r\n                  group: groupId,\r\n                  actual_quantity: 1,\r\n                });\r\n\r\n                groupId++;\r\n                count++;\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }\r\n\r\n      if (!this.data.parent) {\r\n        send.forEach(s => {\r\n          const newFindProduct = this.products.find(p => p.id === s.id);\r\n          const findProducts = this.products.filter(p => p.technology.id === newFindProduct.technology.id);\r\n\r\n          findProducts.forEach(findProduct => {\r\n            while (findProduct.next_technology_list_product) {\r\n              const product = this.products.find(p => p.id === findProduct.next_technology_list_product);\r\n\r\n              if (!send.find(t => t.id === product.id) && !send.find(t => t.id === product?.next_technology_list_product)) {\r\n                send.push({\r\n                  id: product.id,\r\n                  group: product.groupId,\r\n                  actual_quantity: 0,\r\n                });\r\n              }\r\n\r\n              findProduct = product;\r\n            }\r\n          });\r\n        });\r\n      } else {\r\n        const groups = this.adapterService.removeDuplicates(send, send => send.group)\r\n          .map(s => s.group);\r\n\r\n        send.forEach(s => {\r\n          const newFindProduct = this.products.find(p => p.id === s.id);\r\n          const findProducts = this.products.filter(p => p.technology.id === newFindProduct.technology.id);\r\n\r\n          findProducts.forEach(findProduct => {\r\n            while (findProduct.next_technology_list_product) {\r\n              const product = this.products.find(p => p.id === findProduct.next_technology_list_product);\r\n\r\n              if (!send.find(t => t.id === product.id) && groups.includes(product.groupId)) {\r\n                send.push({\r\n                  id: product.id,\r\n                  group: product.groupId,\r\n                  actual_quantity: 0,\r\n                });\r\n              }\r\n\r\n              findProduct = product;\r\n            }\r\n          });\r\n        });\r\n      }\r\n\r\n      send = send.map(s => {\r\n        return {\r\n          id: s.id,\r\n          actual_quantity: s.actual_quantity,\r\n        };\r\n      });\r\n    }\r\n\r\n    const notProcessedSend = {\r\n      ids: []\r\n    };\r\n\r\n    const processedIds = send.map(s => s.id);\r\n\r\n    this.products.forEach(p => {\r\n      if (!processedIds.includes(p.id) && p.status !== 'Not processed') {\r\n        notProcessedSend.ids.push(p.id);\r\n      }\r\n    });\r\n\r\n    if (notProcessedSend.ids.length > 0) {\r\n      forkJoin({\r\n        processedListProducts: this.listProductService.setActualQuantity(send),\r\n        notProcessedListProducts: this.listProductService.cancelActualQuantity(notProcessedSend)\r\n      }).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(({processedListProducts, notProcessedListProducts}) => {\r\n        const listProducts = [...processedListProducts, ...notProcessedListProducts];\r\n        this.dialogRef.close(listProducts);\r\n      });\r\n    } else {\r\n      this.listProductService.setActualQuantity(send).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(listProducts => this.dialogRef.close(listProducts));\r\n    }\r\n  }\r\n\r\n  saveOldProductionList() {\r\n    this.isSaving = true;\r\n\r\n    const send: ActualQuantityPayload[] = [{\r\n      id: this.listProduct.id,\r\n      actual_quantity: +this.form.get('actual_quantity').value,\r\n    }];\r\n\r\n    this.listProductService.setActualQuantity(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(listProducts => {\r\n      this.dialogRef.close(listProducts);\r\n    });\r\n  }\r\n\r\n  onSetDeficitQuantity() {\r\n    this.deficitQuantity = this.totalRequiredQuantity - +this.form.get('actual_quantity').value;\r\n\r\n    if (this.deficitQuantity < 0) {\r\n      this.deficitQuantity = 0;\r\n    }\r\n  }\r\n\r\n  private saveOldProductionListSerial() {\r\n    this.isSaving = true;\r\n\r\n    const send = this.form.value;\r\n\r\n    if (send.ownProduction === 0) {\r\n      delete send.root_serial_numbers_in_production;\r\n      send.actual_quantity = this.form.value.serial_product_ids.length;\r\n      send.serial_product_ids = this.form.get('serial_product_ids').value;\r\n    } else if (send.ownProduction === 1) {\r\n      delete send.serial_product_ids;\r\n      send.actual_quantity = this.form.value.root_serial_numbers_in_production.length;\r\n      send.root_serial_numbers_in_production = this.form.get('root_serial_numbers_in_production').value;\r\n      send.root_serial_numbers_in_production = send.root_serial_numbers_in_production.map(val => +val);\r\n    }\r\n\r\n    delete send.ownProduction;\r\n\r\n    this.listProductService.setActualQuantity([send]).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(listProducts => {\r\n      this.dialogRef.close(listProducts);\r\n    });\r\n  }\r\n\r\n  showError() {\r\n    let error = null;\r\n\r\n    const selectedQuantity = this.quantities.reduce((sum, q) => sum += q.quantity, 0);\r\n\r\n    if (this.data.listProduct.nomenclature.bulk_or_serial === '1') {\r\n      if (this.listProduct.technologies.length > 0) {\r\n        if (\r\n          (\r\n            this.form.get('ownProduction').value === 0 &&\r\n            this.form.get('serial_product_ids').value.length !== selectedQuantity\r\n          ) ||\r\n          (\r\n            this.form.get('ownProduction').value === 1 &&\r\n            this.form.get('root_serial_numbers_in_production').value.length !== selectedQuantity\r\n          )\r\n        ) {\r\n          error = `Select ${selectedQuantity} serial numbers`;\r\n        }\r\n      }\r\n    }\r\n\r\n    return error;\r\n  }\r\n\r\n  private saveNewProductionListSerial() {\r\n    this.isSaving = true;\r\n    const send = [];\r\n\r\n    if (this.form.get('ownProduction').value === 0) {\r\n      this.form.get('serial_product_ids').value.forEach((id, idx) => {\r\n\r\n        send.push({\r\n          id: this.listProduct.filteredProducts[idx].id,\r\n          actual_quantity: 1,\r\n          serial_product_ids: [id]\r\n        });\r\n      });\r\n\r\n      let quantity = send.length;\r\n\r\n      while (this.totalRequiredQuantity !== quantity) {\r\n        send.push({\r\n          id: this.listProduct.filteredProducts[quantity].id,\r\n          actual_quantity: 0,\r\n        });\r\n        quantity++;\r\n      }\r\n\r\n    } else {\r\n      this.form.get('root_serial_numbers_in_production').value.forEach((id, idx) => {\r\n        send.push({\r\n          id: this.listProduct.filteredProducts[idx].id,\r\n          actual_quantity: 1,\r\n          root_serial_numbers_in_production: [+id]\r\n        });\r\n      });\r\n\r\n      let quantity = send.length;\r\n\r\n      while (this.totalRequiredQuantity !== quantity) {\r\n        send.push({\r\n          id: this.listProduct.filteredProducts[quantity].id,\r\n          actual_quantity: 0,\r\n        });\r\n        quantity++;\r\n      }\r\n    }\r\n\r\n    console.log(send);\r\n\r\n    this.listProductService.setActualQuantity(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(listProducts => {\r\n      this.dialogRef.close(listProducts);\r\n    });\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Set Actual Quantity (Required Quantity: {{totalRequiredQuantity}})\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n\r\n      <ng-container *ngIf=\"this.listProduct.technologies.length === 0 && !isSerial\">\r\n        <div class=\"form-group\">\r\n          <label>Actual Quantity*</label>\r\n          <input\r\n            (ngModelChange)=\"onSetDeficitQuantity()\"\r\n            formControlName=\"actual_quantity\"\r\n            pInputText\r\n            class=\"form-control\"\r\n            type=\"number\"\r\n          >\r\n        </div>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"this.listProduct.technologies.length > 0 && !isSerial\">\r\n        <p-table\r\n          selectionMode=\"single\"\r\n          dataKey=\"id\"\r\n          rowExpandMode=\"multiple\"\r\n          [value]=\"listProducts\"\r\n        >\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n              <th style=\"width: 20%\">Code</th>\r\n              <th style=\"width: 20%\">Name</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Technology</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Free Wh Qty</th>\r\n              <th style=\"width: 15%\" class=\"text-center\">Reserved Qty</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template let-product let-i=\"rowIndex\" pTemplate=\"body\">\r\n            <tr\r\n              [pRowToggler]=\"product\"\r\n            >\r\n              <td>{{i + 1}}</td>\r\n              <td>{{product.nomenclature.code}}</td>\r\n              <td>{{product.nomenclature.name}}</td>\r\n              <td class=\"text-center\">{{product.technology?.name}}</td>\r\n              <td class=\"text-center\">{{product.warehouse_quantity}}</td>\r\n              <td class=\"text-center\">{{product.reserved_quantity}}</td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"rowexpansion\" let-product>\r\n            <tr>\r\n              <td colspan=\"7\">\r\n                <div class=\"form-group\">\r\n                  <label>Quantity*</label>\r\n                  <input\r\n                    pInputText\r\n                    min=\"1\"\r\n                    class=\"form-control\"\r\n                    type=\"number\"\r\n                    (input)=\"onEditQuantity($event, product)\"\r\n                  >\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n\r\n      </ng-container>\r\n      <p\r\n        class=\"deficit mt-3\"\r\n        *ngIf=\"!isSerial\"\r\n        [class.mb-3]=\"isSerial && listProduct.technologies.length > 0\"\r\n      >\r\n        Deficit Products Quantity: {{deficitQuantity}}\r\n      </p>\r\n\r\n    <ng-container *ngIf=\"isSerial\">\r\n      <div class=\"radio mt-2 mb-3\">\r\n        <p-radioButton\r\n          class=\"mr-3\"\r\n          name=\"ownProduction\"\r\n          label=\"Warehouses\"\r\n          [value]=\"0\"\r\n          formControlName=\"ownProduction\"\r\n        >\r\n        </p-radioButton>\r\n        <p-radioButton\r\n          class=\"\"\r\n          name=\"ownProduction\"\r\n          label=\"Production\"\r\n          [value]=\"1\"\r\n          formControlName=\"ownProduction\"\r\n        >\r\n        </p-radioButton>\r\n      </div>\r\n\r\n      <div class=\"form-group\" *ngIf=\"form.get('ownProduction').value === 0\">\r\n        <label>Warehouses Serial Numbers</label>\r\n        <p-multiSelect\r\n          placeholder=\"Select Warehouses Serial Numbers\"\r\n          *ngIf=\"!isLoading; else spinner\"\r\n          formControlName=\"serial_product_ids\"\r\n          [options]=\"serialsWarehouse\"\r\n          optionLabel=\"label\"\r\n          optionValue=\"id\"\r\n        >\r\n        </p-multiSelect>\r\n      </div>\r\n\r\n      <div class=\"form-group\" *ngIf=\"form.get('ownProduction').value === 1\">\r\n        <label>Production Serial Numbers</label>\r\n        <p-multiSelect\r\n          *ngIf=\"!isLoading; else spinner\"\r\n          placeholder=\"Select Production Serial Numbers\"\r\n          formControlName=\"root_serial_numbers_in_production\"\r\n          [options]=\"serialsProduction\"\r\n          optionLabel=\"label\"\r\n          optionValue=\"id\"\r\n        ></p-multiSelect>\r\n      </div>\r\n    </ng-container>\r\n\r\n<!--    <div class=\"error mt-3\" *ngIf=\"showError()\">-->\r\n<!--      {{showError()}}-->\r\n<!--    </div>-->\r\n  </form>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    [loading]=\"isSaving\"\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Set\"\r\n    class=\"p-button-success\"\r\n    (click)=\"onSave()\"\r\n    [disabled]=\"disabled()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {OrderTechnicalEquipment} from '../../models/order-technical-equipment';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {Locator} from '../../models/locator';\r\nimport {WarehouseProduct, WarehouseProducts} from '../../models/warehouse-product';\r\nimport {QcListModalService} from '../../services/qc-list-modal.service';\r\nimport {finalize} from 'rxjs';\r\nimport {OrderTechnicalEquipmentsService} from '../../services/order-technical-equipments.service';\r\n\r\n@Component({\r\n  selector: 'pek-qc-accept-technical-equipment',\r\n  templateUrl: './qc-accept-technical-equipment.component.html',\r\n  styleUrls: ['./qc-accept-technical-equipment.component.scss']\r\n})\r\nexport class QcAcceptTechnicalEquipmentComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    locator: [null, Validators.required]\r\n  });\r\n  items: OrderTechnicalEquipment[];\r\n  existingLocators: Locator[] = [];\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<QcAcceptTechnicalEquipmentComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: {items: OrderTechnicalEquipment[], id: number},\r\n    private qcListModalService: QcListModalService,\r\n    private orderTechnicalEquipmentsService: OrderTechnicalEquipmentsService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.items = this.data.items;\r\n    this.getExistingLocatorsAndWarehouses(this.items);\r\n  }\r\n\r\n  getExistingLocatorsAndWarehouses(items: OrderTechnicalEquipment[]): void {\r\n    this.existingLocators = null;\r\n    this.existingLocators = [];\r\n    items.forEach(item => {\r\n      item.in_use_product_id.forEach(in_use_prod => {\r\n        const locator = (in_use_prod.technicalEquipment.warehouse_product as WarehouseProduct).locator;\r\n        const foundLocator = this.existingLocators.find(locatorIn => locatorIn.id == locator.id);\r\n        if (!foundLocator) {\r\n          this.existingLocators.push(locator);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  onSelectLocator(locator: Locator) {\r\n    // find other locators on this warehouse\r\n    let unsupportedItemsForLocator: OrderTechnicalEquipment[] = [];\r\n    this.items.forEach(item => {\r\n      let isUnsupportedItem = false;\r\n\r\n      item.in_use_product_id.forEach(in_use_prod => {\r\n        const inLocator = (in_use_prod.technicalEquipment.warehouse_product as WarehouseProduct).locator;\r\n        const foundItem = inLocator.warehouse.id === locator.warehouse.id && inLocator.id !== locator.id;\r\n        if (foundItem) {\r\n          isUnsupportedItem = true;\r\n        }\r\n      });\r\n\r\n      if (isUnsupportedItem) {\r\n        unsupportedItemsForLocator.push(item);\r\n      }\r\n    });\r\n\r\n    if (unsupportedItemsForLocator.length > 0) {\r\n      this.qcListModalService.updateTechnicalEquipmentList(unsupportedItemsForLocator);\r\n    }\r\n\r\n    unsupportedItemsForLocator.forEach(item => {\r\n      const foundIndex = this.items.findIndex(product => product.id === item.id);\r\n      if (foundIndex > -1) {\r\n        this.items.splice(foundIndex, 1);\r\n      }\r\n    });\r\n    this.getExistingLocatorsAndWarehouses(this.items);\r\n    this.form.get('locator').patchValue(<any>locator.id);\r\n  }\r\n\r\n  onAccept() {\r\n    this.isSaving = true;\r\n\r\n    const send = this.items.map(item => {\r\n      return {\r\n        order_technical_equipment_id: item.id,\r\n        quantity: item.passed_quantity,\r\n        locator: this.form.get('locator').value,\r\n        warehouse_products_details: item.in_use_product_id.map(product => {\r\n          return {\r\n            id: product.technicalEquipment.id,\r\n            product_id: (product.technicalEquipment.warehouse_product as WarehouseProduct).id,\r\n            quantity: product.quantity,\r\n            isolated_quantity: product.isolated_quantity\r\n          }\r\n        })\r\n      }\r\n    });\r\n    this.orderTechnicalEquipmentsService.acceptSeveral(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => this.dialogRef.close(true));\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Accept Technical Equipment to Warehouse\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Locator*</label>\r\n      <pek-group-locator-picker\r\n        [uniqueLocators]=\"existingLocators\"\r\n        (selectLocatorFull)=\"onSelectLocator($event)\"\r\n      ></pek-group-locator-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Accept\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onAccept()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {InvoiceProduct} from '../../../procurement/models/invoice-product';\r\nimport {OrderProduct} from '../../../procurement/models/order-product';\r\nimport {InvoiceProductService} from '../../../procurement/services/invoice-product.service';\r\nimport {finalize} from 'rxjs';\r\nimport {OrderProductService} from '../../../procurement/services/order-product.service';\r\nimport {Locator} from '../../models/locator';\r\nimport {QcListModalService} from '../../services/qc-list-modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-qc-accept-to-warehouse',\r\n  templateUrl: './qc-accept-to-warehouse.component.html',\r\n  styleUrls: ['./qc-accept-to-warehouse.component.scss']\r\n})\r\nexport class QcAcceptToWarehouseComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    locator: [null, Validators.required]\r\n  });\r\n  items: InvoiceProduct[] | OrderProduct[];\r\n  existingLocators: Locator[] = [];\r\n\r\n  constructor(\r\n    private readonly invoiceProductService: InvoiceProductService,\r\n    private readonly orderProductService: OrderProductService,\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<QcAcceptToWarehouseComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { items: InvoiceProduct[] | OrderProduct[], id: number, type: 'invoice' | 'order' },\r\n    private qcListModalService: QcListModalService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.items = this.data.items;\r\n    this.getExistingLocatorsAndWarehouses(this.items);\r\n  }\r\n\r\n  onAccept() {\r\n    if (this.data.type === 'invoice') {\r\n      this.acceptInvoiceProducts();\r\n    }\r\n\r\n    if (this.data.type === 'order') {\r\n      this.acceptOrderProducts();\r\n    }\r\n  }\r\n\r\n  acceptOrderProducts() {\r\n    this.isSaving = true;\r\n    let send = [];\r\n    (this.items as OrderProduct[]).forEach(item => {\r\n      item.orderProducts.forEach(product => {\r\n        send.push({\r\n          order_product_id: product.id,\r\n          quantity: product.quantity - product.accepted_quantity,\r\n          locator: this.form.get('locator').value\r\n        });\r\n      });\r\n    });\r\n\r\n    this.orderProductService.acceptSeveral(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => this.dialogRef.close(true));\r\n  }\r\n\r\n  acceptInvoiceProducts() {\r\n    this.isSaving = true;\r\n    let send = [];\r\n    (this.items as InvoiceProduct[]).forEach(item => {\r\n      item.invoiceProducts.forEach(product => {\r\n        send.push({\r\n          invoice_product_id: product.id,\r\n          quantity: product.quantity - product.accepted_quantity,\r\n          locator: this.form.get('locator').value\r\n        });\r\n      });\r\n    });\r\n    this.invoiceProductService.acceptSeveral(send).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(() => this.dialogRef.close(true));\r\n  }\r\n\r\n  getExistingLocatorsAndWarehouses(items: InvoiceProduct[] | OrderProduct[]): void {\r\n    this.existingLocators = null;\r\n    this.existingLocators = [];\r\n    items.forEach(item => {\r\n      item.exists_on_locators.forEach(locator => {\r\n        const foundLocator = this.existingLocators.find(locatorIn => locatorIn.id == locator.id);\r\n        if (!foundLocator) {\r\n          this.existingLocators.push(locator);\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  onSelectLocator(locator: Locator) {\r\n    // find other locators on this warehouse\r\n    let unsupportedItemsForLocator: InvoiceProduct[] | OrderProduct[] = [];\r\n    this.items.forEach(item => {\r\n\r\n      const foundItem = item.exists_on_locators.find(inLocator => inLocator.warehouse.id === locator.warehouse.id && inLocator.id !== locator.id);\r\n      if (foundItem) {\r\n        unsupportedItemsForLocator.push(item);\r\n      }\r\n    });\r\n\r\n    if (unsupportedItemsForLocator.length > 0) {\r\n      this.qcListModalService.updateOrderInvoiceList(unsupportedItemsForLocator);\r\n    }\r\n    unsupportedItemsForLocator.forEach(item => {\r\n      const foundIndex = this.items.findIndex(product => product.id === item.id);\r\n      if (foundIndex > -1) {\r\n        this.items.splice(foundIndex, 1);\r\n      }\r\n    });\r\n    this.getExistingLocatorsAndWarehouses(this.items);\r\n    this.form.get('locator').patchValue(<any>locator.id);\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Accept Items to Warehouse\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Locator*</label>\r\n      <pek-group-locator-picker\r\n        [uniqueLocators]=\"existingLocators\"\r\n        (selectLocatorFull)=\"onSelectLocator($event)\"\r\n      ></pek-group-locator-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Accept\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onAccept()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {ListService} from '../../services/list.service';\r\nimport {finalize} from 'rxjs';\r\n\r\n@Component({\r\n  selector: 'pek-set-production-list-locator',\r\n  templateUrl: './set-production-list-locator.component.html',\r\n  styleUrls: ['./set-production-list-locator.component.scss']\r\n})\r\nexport class SetProductionListLocatorComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    id: [null, Validators.required],\r\n    locator: [null, Validators.required],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly dialogRef: MatDialogRef<SetProductionListLocatorComponent>,\r\n    private readonly listService: ListService,\r\n    @Inject(MAT_DIALOG_DATA) public listId: number,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('id').patchValue(<any>this.listId);\r\n  }\r\n\r\n  setLocator() {\r\n    this.isSaving = true;\r\n    this.listService.updatePartly(this.form.value).pipe(\r\n      finalize(() => this.isSaving = false)\r\n    ).subscribe(list => {\r\n      if (list) {\r\n        this.dialogRef.close(list);\r\n      }\r\n    });\r\n  }\r\n\r\n  selectLocator(id: number) {\r\n    this.form.get('locator').patchValue(<any>id);\r\n  }\r\n}\r\n","<div class=\"modal-header modal-header_vertical\">\r\n  <div class=\"add-product__header-wrapper\">\r\n    <div class=\"add-product__header\">\r\n      <h2 class=\"modal-header__title\">\r\n        Set Locator\r\n      </h2>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Locator*</label>\r\n      <pek-group-locator-picker\r\n        (selectLocator)=\"selectLocator($event)\"\r\n      ></pek-group-locator-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Cancel\"\r\n    [mat-dialog-close]=\"false\"\r\n    class=\"p-button-danger\"\r\n  ></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    label=\"Move\"\r\n    class=\"p-button-success\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"setLocator()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Nomenclature} from '@shared/models/nomenclature';\r\nimport {Locator} from './locator';\r\nimport {AreaLocator} from './area-locator';\r\n\r\nexport class WarehouseProduct {\r\n  readonly id: number;\r\n  quantity?: number;\r\n  total_quantity?: number;\r\n  total_area_locator_quantity?: number;\r\n  total_locator_quantity?: number;\r\n  name?: string;\r\n  code?: string;\r\n  fullName?: string;\r\n  nomenclature?: number & Nomenclature;\r\n  // serial_number?: string | SerialNumber;\r\n  serial_number?: any;\r\n  serial_numbers?: any;\r\n  locator?: Locator;\r\n  area_locator?: AreaLocator;\r\n  // invoice?: number | Invoice;\r\n  uid?: number;\r\n  uom?: string;\r\n  freeQuantity?: number;\r\n  extra_info: WarehouseProductExtraInfo[];\r\n  checkedForGeneration?: boolean;\r\n\r\n  used_by_order?: {order_id: number, accounting_type: number}[]\r\n}\r\n\r\nexport class WarehouseProducts {\r\n  prev: string;\r\n  next: string;\r\n  count: number;\r\n  results: WarehouseProduct[]\r\n}\r\n\r\nexport class WarehouseProductExtraInfo {\r\n  id: number;\r\n  is_reserved_for_sale: boolean;\r\n  quantity: number;\r\n  serial_number_str: string;\r\n  serial_number_id: number;\r\n  invoice_id: number;\r\n  order_id: number;\r\n  reserved_by_opened_production_lists_quantity: number;\r\n  warehouseproductqcprotocol: number;\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {DeliveryChain} from '../models/delivery-chain';\r\nimport {environment} from '@env/environment';\r\nimport {map} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DeliveryChainService {\r\n\r\n  API_URL = environment.base_url + environment.delivery_url;\r\n  readonly url = 'procurement-chains/';\r\n  readonly filesUrl = 'files/';\r\n\r\n  constructor(\r\n    private readonly httpClient: HttpClient\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<DeliveryChain[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: DeliveryChain[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id): Observable<DeliveryChain> {\r\n    return this.httpClient.get<{ data: DeliveryChain }>(this.API_URL + this.url + `${id}/`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getDeliveryItems(id: number): Observable<any[]> {\r\n    return this.httpClient.get<{ data: any[] }>(this.API_URL + this.url + id + '/items/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  complete(id: number): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + id + '/complete/', null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {ActualQuantityPayload, ListProduct} from '../models/list-product';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {map} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ListProductService {\r\n\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'list_products/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n  }\r\n\r\n  getPartly(ids: number[]): Observable<ListProduct[][]> {\r\n    return forkJoin(...ids.map(id => this.httpClient.get<{ data: ListProduct[] }>(this.API_URL + this.url + `?list=${id}`).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<ListProduct[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: ListProduct[] }>(this.API_URL + this.url + queryParams).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n\r\n\r\n  getFiltered(query?: QuerySearch[]): Observable<ListProduct[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: ListProduct[] }>(this.API_URL + this.url + 'minimal_product_lists/' + queryParams).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  updatePartly(listProduct: ListProduct): Observable<ListProduct> {\r\n    return this.httpClient.patch<{ data: ListProduct }>(this.API_URL + this.url + listProduct.id + '/', listProduct).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  setActualQuantity(send: ActualQuantityPayload[]): Observable<ListProduct[]> {\r\n    return this.httpClient.post<{ data: ListProduct[] }>(this.API_URL + this.url + `set_actual_quantities/`, send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  cancelActualQuantity(send: any): Observable<ListProduct[]> {\r\n    return this.httpClient.post<{ data: ListProduct[] }>(this.API_URL + this.url + `set_actual_quantities_null/`, send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  makeDeficit(send: any): Observable<any> {\r\n    return this.httpClient.post<{ data: ListProduct[] }>(this.API_URL + this.url + `bulk_deficit_request/`, send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {concat, Observable, toArray} from 'rxjs';\r\nimport {List, Lists} from '../models/list';\r\nimport {map} from 'rxjs/operators';\r\nimport {HttpClient, HttpContext} from '@angular/common/http';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  SetProductionListLocatorComponent\r\n} from '../modals/set-production-list-locator/set-production-list-locator.component';\r\nimport {ScanResult} from '../../qr-code/models/scan-result';\r\nimport {IS_SCANNING_ENABLED} from '@shared/interceptors/error-interceptor';\r\nimport {\r\n  ProductionListAccountingType,\r\n  ProductionListPositionType\r\n} from '../components/production-lists/production-lists.component';\r\nimport {\r\n  ProductionListChainsStatisticsComponent\r\n} from '../modals/production-list-chains-statistics/production-list-chains-statistics.component';\r\nimport {ListProduct} from '../models/list-product';\r\nimport {\r\n  ProductionListSetActualQuantityDialogComponent\r\n} from '../modals/production-list-set-actual-quantity-dialog/production-list-set-actual-quantity-dialog.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ListService {\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'lists/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<List[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: List[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getListProducts(id: number): Observable<ListProduct[]> {\r\n    return this.httpClient.get<{ data: ListProduct[] }>(this.API_URL + this.url + `${id}/with_descendant_list_products/`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getFullList(id: number): Observable<ListProduct[]> {\r\n    return this.httpClient.get<{ data: ListProduct[] }>(this.API_URL + this.url + `${id}/with_descendant_list_products/`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  setQuantities(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + id + '/set_actual_quantities/', null);\r\n  }\r\n\r\n  makeDeficit(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + id + '/deficit_request/', null);\r\n  }\r\n\r\n  makeRequestsForAll(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + id + '/bulk_deficit_request/', id);\r\n  }\r\n\r\n  makeDeficitOne(id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + `list_products/${id}/deficit_request/`, null);\r\n  }\r\n\r\n  makeProductionList(entity: Partial<List>): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + 'list_creation_requests/', entity).pipe(\r\n      map(response => response\r\n      ));\r\n  }\r\n\r\n  canceledActualQuantity(id: number): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + `list_products/${id}/set_actual_quantity_null/`, null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<List> {\r\n    return this.httpClient.get<{ data: List }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getForPagination(query?: QuerySearch[]): Observable<Lists> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Lists }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getProductionLists(): Observable<List[]> {\r\n    return this.httpClient.get<{ data: List[] }>(this.API_URL + 'list_creation_requests/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartly(list: Partial<List>): Observable<List> {\r\n    return this.httpClient.patch<{ data: List }>(this.API_URL + this.url + list.id + '/', list).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  process(list: Partial<List>, id: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + id + '/process/', list);\r\n  }\r\n\r\n  updateListSeveral(lists: List[]): Observable<any> {\r\n    return concat(...lists.map(list => this.httpClient.patch<{ data: List }>(this.API_URL + 'list_creation_requests/' + list.id + '/', list))).pipe(\r\n      toArray()\r\n    );\r\n  }\r\n\r\n  getNomenclatureInfo(id: number): Observable<any> {\r\n    return this.httpClient.get<{ data: any }>(environment.base_url + `product_structure/nomenclatures/${id}/available_on_stock/`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  openSetProductionListLocatorModal(id: number): Observable<List> {\r\n    return this.dialog\r\n      .open<SetProductionListLocatorComponent>(SetProductionListLocatorComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: id,\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  getScanned(listId, scanData: ScanResult): Observable<{ ids_found: number[] }> {\r\n    return this.httpClient.post<{ data: { ids_found: number[] } }>(this.API_URL + this.url + listId + '/scan_list_product/', scanData, {\r\n      context: new HttpContext().set(IS_SCANNING_ENABLED, true)\r\n    }).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  getChainsStatisticsForProductionList(id: number, send: any): Observable<any> {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + `${id}/ordered_products_info/`, send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getFullStatistics(ids: string): Observable<any[]> {\r\n    return this.httpClient.get<{ data: any[] }>(this.API_URL + this.url + `full_statistic/?ids=${ids}`).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  showStatisticsForChainsModal(\r\n    id: number,\r\n    send: {\r\n      accounting_type: ProductionListAccountingType,\r\n      positions_type: ProductionListPositionType\r\n    }\r\n  ): Observable<any> {\r\n    return this.dialog\r\n      .open<ProductionListChainsStatisticsComponent>(ProductionListChainsStatisticsComponent, {\r\n        width: '90rem',\r\n        height: 'auto',\r\n        panelClass: '',\r\n        data: {id, send},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  setActualQuantityDialog(listProduct: ListProduct, parent: ListProduct, isOldList: boolean): Observable<ListProduct[]> {\r\n    return this.dialog\r\n      .open<ProductionListSetActualQuantityDialogComponent>(ProductionListSetActualQuantityDialogComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {listProduct, parent, isOldList},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {Observable, of} from 'rxjs';\r\nimport {Locator} from '../models/locator';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {map} from 'rxjs/operators';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {CreateEditLocatorComponent} from '../modals/create-edit-locator/create-edit-locator.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class LocatorService {\r\n\r\n  API_URL = environment.base_url + environment.warehouse_url;\r\n  readonly url = 'locators/';\r\n\r\n  locators: Locator[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n\r\n  }\r\n\r\n  getAll(): Observable<Locator[]> {\r\n    if (this.locators) {\r\n      return of(this.locators);\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Locator[] }>(this.API_URL + this.url).pipe(\r\n      map(response => {\r\n        const locators = response.data;\r\n        this.locators = locators;\r\n        return locators;\r\n      })\r\n    );\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<Locator[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Locator[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(locator: Partial<Locator>): Observable<Locator> {\r\n    return this.httpClient.post<{ data: Locator }>(this.API_URL + this.url, locator).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(locator: Partial<Locator>): Observable<Locator> {\r\n    return this.httpClient.put<{ data: Locator }>(this.API_URL + this.url + `${locator.id}/`, locator).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(locator: Locator): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${locator.id}/`);\r\n  };\r\n\r\n  createEditLocatorModal(type: ModalActionType, locator?: Locator): Observable<Locator> {\r\n    return this.dialog\r\n      .open<CreateEditLocatorComponent>(CreateEditLocatorComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, locator},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {OrderTechnicalEquipment} from '../models/order-technical-equipment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class OrderTechnicalEquipmentsService {\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'order_technical_equipments/';\r\n\r\n  constructor(private httpClient: HttpClient) {\r\n\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<OrderTechnicalEquipment[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: OrderTechnicalEquipment[] }>(this.API_URL + this.url + qString).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  updatePartly(entity: OrderTechnicalEquipment) {\r\n    return this.httpClient.patch<{ data: OrderTechnicalEquipment }>(this.API_URL + this.url + entity.id + '/', entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  acceptSeveral(send: any[]): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + 'technical_equipment_to_warehouse/', send).pipe(\r\n      map(response => response)\r\n    );\r\n  }\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {\r\n  InventoryList,\r\n  InventoryLists,\r\n  InventoryProduct,\r\n  PhysicalInventories,\r\n  PhysicalInventory\r\n} from '../models/physical-inventory';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {HttpClient, HttpContext, HttpHeaders} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {\r\n  CreatePhysicalInventoryComponent\r\n} from '../modals/create-physical-inventory/create-physical-inventory.component';\r\nimport {\r\n  MovePhysicalInventoryProductComponent\r\n} from '../modals/move-physical-inventory-product/move-physical-inventory-product.component';\r\nimport {Product} from '../../product-structure/models/product';\r\nimport {\r\n  AddProductToPhysicalInventoryComponent\r\n} from '../modals/add-product-to-physical-inventory/add-product-to-physical-inventory.component';\r\nimport {IS_SCANNING_ENABLED} from '@shared/interceptors/error-interceptor';\r\nimport {\r\n  PhysicalInventoryProductsChangesComponent\r\n} from '../modals/physical-inventory-products-changes/physical-inventory-products-changes.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PhysicalInventoryService {\r\n\r\n  API_URL = environment.base_url + environment.warehouse_url;\r\n  readonly url = 'physical_inventory/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  getForPagination(query?: QuerySearch[]): Observable<PhysicalInventories> {\r\n    let queryParams = '';\r\n\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: PhysicalInventories }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<PhysicalInventory> {\r\n    return this.httpClient.get<{ data: PhysicalInventory }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getInventoryProducts(id: number, query?: QuerySearch[]): Observable<InventoryList[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: InventoryList[] }>(this.API_URL + 'physical_inventory_products_lists/?physical_inventory_id=' + id + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getInventoryProductsListsForPagination(id: number, query?: QuerySearch[]): Observable<InventoryLists> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: InventoryLists }>(this.API_URL + 'physical_inventory_products_lists/?physical_inventory_id=' + id + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createPhysicalInventory(locatorsIds: string): Observable<PhysicalInventory[]> {\r\n    return this.httpClient.post<{ data: PhysicalInventory[] }>(this.API_URL + this.url + '?locators_ids=' + locatorsIds, null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  completePhysicalInventory(inventoryId: number): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + inventoryId + '/complete_physical_inventory/', null);\r\n  }\r\n\r\n  removePhysicalInventory(inventoryId: number): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + inventoryId + '/');\r\n  }\r\n\r\n  updateQuantityInventoryProduct(inventoryProduct: InventoryProduct): Observable<InventoryProduct> {\r\n    const send = {\r\n      is_scanned: inventoryProduct.is_scanned,\r\n      new_quantity: inventoryProduct.new_quantity\r\n    };\r\n    return this.httpClient.put<{ data: InventoryProduct }>(this.API_URL + 'physical_inventory_products/' + inventoryProduct.id + '/', send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  movePhysicalInventoryProduct(id: number, send: { new_locator_id: number }): Observable<InventoryProduct> {\r\n    return this.httpClient.post<{ data: InventoryProduct }>(this.API_URL + 'physical_inventory_products/' + id + '/move_to_locator/', send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  addProductToInventory(inventoryId: number, send: any): Observable<InventoryProduct> {\r\n    return this.httpClient.post<{ data: InventoryProduct }>(this.API_URL + this.url + inventoryId + '/add_to_inventory/', send).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  openCreatePhysicalInventoryModal(): Observable<any> {\r\n    return this.dialog\r\n      .open<CreatePhysicalInventoryComponent>(CreatePhysicalInventoryComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openPhysicalInventoryProductMoveModal(product: Product): Observable<any> {\r\n    return this.dialog\r\n      .open<MovePhysicalInventoryProductComponent>(MovePhysicalInventoryProductComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: product,\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  scanPhysicalInventoryQrCode(id: number, data: any) {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + this.url + `${id}/scan_inventory_item/`, data, {\r\n      context: new HttpContext().set(IS_SCANNING_ENABLED, true)\r\n    }).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n\r\n  openAddProductToPhysicalInventory(inventoryId: number): Observable<any> {\r\n    return this.dialog\r\n      .open<AddProductToPhysicalInventoryComponent>(AddProductToPhysicalInventoryComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: inventoryId,\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n\r\n  changesInInventory(inventoryProducts: InventoryProduct[]): Observable<any> {\r\n    return this.dialog\r\n      .open<PhysicalInventoryProductsChangesComponent>(PhysicalInventoryProductsChangesComponent, {\r\n        width: '60rem',\r\n        height: 'auto',\r\n        data: inventoryProducts,\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  getChangedPhysicalInventoryProductsHaveBeenChanged(id: number) {\r\n    const query = '?physical_inventory_id=' + id;\r\n    return this.httpClient.get(this.API_URL + 'physical_inventory_products/' + 'get_physical_inventory_products_to_notify_about/' + query);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {Subject} from 'rxjs';\r\nimport {InvoiceProduct} from '../../procurement/models/invoice-product';\r\nimport {OrderProduct} from '../../procurement/models/order-product';\r\nimport {OrderTechnicalEquipment} from '../models/order-technical-equipment';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class QcListModalService {\r\n  notCompatibleItems$ = new Subject<InvoiceProduct[] | OrderProduct[]>();\r\n  notCompatibleTechnicalEquipments$ = new Subject<OrderTechnicalEquipment[]>();\r\n\r\n  constructor() { }\r\n\r\n  updateOrderInvoiceList(items: InvoiceProduct[] | OrderProduct[]): void {\r\n    this.notCompatibleItems$.next(items);\r\n  }\r\n\r\n  updateTechnicalEquipmentList(items: OrderTechnicalEquipment[]): void {\r\n    this.notCompatibleTechnicalEquipments$.next(items);\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\nimport {Request} from '../models/request';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {map} from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class RequestService {\r\n  API_URL = environment.base_url + environment.production_url;\r\n  API_URL_PROCUREMENT = environment.base_url + environment.procurement_url;\r\n\r\n  readonly url = 'production_requests/';\r\n\r\n  constructor(\r\n    private http: HttpClient\r\n  ) {\r\n  }\r\n\r\n  getByOrder(orderId: number): Observable<Request[]> {\r\n    return this.http.get<{ data: Request[] }>(this.API_URL + this.url + '?order=' + orderId).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  cancelRequest(id: number): Observable<any> {\r\n    return this.http.post<{ data: any }>(this.API_URL + this.url + `${id}/cancel/`, null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  cancel(id: number): Observable<any> {\r\n    return this.http.post<{ data: any }>(this.API_URL_PROCUREMENT + `orders/${id}/cancel_production_requests/`, null).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(data: any): Observable<any> {\r\n    return this.http.post<{ data: Request[] }>(this.API_URL + this.url, data).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  complete(id: number): Observable<any> {\r\n    return this.http.post(this.API_URL_PROCUREMENT + 'orders/' + id + '/' + 'complete/', id);\r\n  }\r\n\r\n  sendDataProductionRequests(id: string, data: any) {\r\n    return this.http.post<{ data: any }>(this.API_URL + `production_requests/${id}/scan_product_request_item/`, data)\r\n      .pipe(\r\n        map(response => {\r\n          return response.data;\r\n        }));\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {TechnicalEquipmentInUse} from '../models/technical-equipment-in-use';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class TechnicalEquipmentsInUseService {\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'order_technical_equipments_in_use/';\r\n\r\n  constructor(private httpClient: HttpClient) {\r\n\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<TechnicalEquipmentInUse[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: TechnicalEquipmentInUse[] }>(this.API_URL + this.url + qString).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ToolOrder, ToolOrderPaginated} from '../models/tool-order';\r\nimport {map} from 'rxjs/operators';\r\nimport {SerialType} from '../../product-structure/models/serial-type';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ToolOrderService {\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'tool_orders/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n  }\r\n\r\n\r\n  get(query?: QuerySearch[]): Observable<ToolOrder[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: ToolOrder[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(entity): Observable<ToolOrder> {\r\n    return this.httpClient.post<{ data: ToolOrder }>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: ToolOrder): Observable<ToolOrder> {\r\n    return this.httpClient.put<{ data: ToolOrder }>(this.API_URL + this.url + entity.id + '/', entity).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  get_paginated(query?: QuerySearch[]): Observable<ToolOrderPaginated> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: ToolOrderPaginated }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getById(id: number): Observable<ToolOrder> {\r\n    return this.httpClient.get<{ data: ToolOrder }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  complete(id: number): Observable<ToolOrder> {\r\n    return this.httpClient.post<{ data: ToolOrder }>(this.API_URL + this.url + id + '/complete/', null).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  delete(entity: ToolOrder) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ToolRequest} from './tool-request';\r\nimport {map} from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ToolRequestService {\r\n\r\n  API_URL = environment.base_url + environment.production_url;\r\n  readonly url = 'tool_requests/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<ToolRequest[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: ToolRequest[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(entity): Observable<ToolRequest> {\r\n    return this.httpClient.post<{ data: ToolRequest }>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: ToolRequest) {\r\n    return this.httpClient.put(this.API_URL + this.url + entity.id + '/', entity);\r\n  }\r\n\r\n  delete(entity: ToolRequest) {\r\n    return this.httpClient.delete(this.API_URL + this.url + entity.id + '/');\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {UnitMeasure} from '../../product-structure/models/unit-measure';\r\nimport {Observable, of} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {CreateEditUnitMeasureComponent} from '../modals/create-edit-unit-measure/create-edit-unit-measure.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UnitMeasureService {\r\n\r\n  API_URL = environment.base_url + environment.product_structure_url;\r\n  readonly url = 'units_of_measure/';\r\n\r\n  measureUnits: UnitMeasure[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(): Observable<UnitMeasure[]> {\r\n    if (this.measureUnits) {\r\n      return of(this.measureUnits);\r\n    }\r\n\r\n    return this.httpClient.get<{ data: UnitMeasure[] }>(this.API_URL + this.url + 'all/').pipe(\r\n      map(response => {\r\n        const measureUnits = response.data.map(m => {\r\n          return {\r\n            ...m,\r\n            label: `${m.name} (${m.symbol})`\r\n          };\r\n        });\r\n        this.measureUnits = measureUnits;\r\n\r\n        return measureUnits;\r\n      })\r\n    );\r\n  }\r\n\r\n  create(unitMeasure: Partial<UnitMeasure>): Observable<UnitMeasure> {\r\n    return this.httpClient.post<{ data: UnitMeasure }>(this.API_URL + this.url, unitMeasure).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(unitMeasure: Partial<UnitMeasure>): Observable<UnitMeasure> {\r\n    return this.httpClient.put<{ data: UnitMeasure }>(this.API_URL + this.url + `${unitMeasure.id}/`, unitMeasure).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(unitMeasure: UnitMeasure): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${unitMeasure.id}/`);\r\n  };\r\n\r\n  createEditUnitMeasureModal(type: ModalActionType, unitMeasure?: UnitMeasure): Observable<UnitMeasure> {\r\n    return this.dialog\r\n      .open<CreateEditUnitMeasureComponent>(CreateEditUnitMeasureComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, unitMeasure},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {forkJoin, Observable} from 'rxjs';\r\nimport {WarehouseProduct, WarehouseProductExtraInfo, WarehouseProducts} from '../models/warehouse-product';\r\nimport {map} from 'rxjs/operators';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {Technology} from '../../product-structure/models/technology';\r\nimport {\r\n  CreateEditWarehouseProductComponent\r\n} from '../modals/create-edit-warehouse-item/create-edit-warehouse-product.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {MoveWarehouseProductComponent} from '../modals/move-warehouse-product/move-warehouse-product.component';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {NomenclatureSerialInfoComponent} from '../modals/nomenclature-serial-info/nomenclature-serial-info.component';\r\nimport {\r\n  SearchProductInWarehouseComponent\r\n} from '../../outsourcing/modals/search-product-in-warehouse/search-product-in-warehouse.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WarehouseProductService {\r\n  API_URL = environment.base_url + environment.warehouse_url;\r\n  readonly url = 'products/';\r\n\r\n  constructor(\r\n    private readonly httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<WarehouseProduct[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: WarehouseProduct[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getReservations(): Observable<WarehouseProduct[]> {\r\n    return this.httpClient.get<{ data: WarehouseProduct[] }>(this.API_URL + 'warehouse_products_reservations/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  getGrouped(query?: { name: string, value: any }[]): Observable<WarehouseProduct[]> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: WarehouseProduct[] }>(this.API_URL + this.url + 'grouped_by_warehouse_locator/' + qString).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  getGroupedPagination(query?: { name: string, value: any }[]): Observable<WarehouseProducts> {\r\n    let qString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          qString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          qString += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: WarehouseProducts }>(this.API_URL + this.url + 'grouped_by_warehouse_locator/' + qString).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  severalUpdateReservations(ids: number[], send: { is_confirmed: boolean }): Observable<any> {\r\n    return forkJoin(...ids.map(id => this.httpClient.patch(this.API_URL + `warehouse_products_reservations/${id}/`, send)));\r\n  }\r\n\r\n  severalWriteOff(ids: number[]): Observable<WarehouseProduct[]> {\r\n    return forkJoin(...ids.map(id => this.httpClient.post<{ data: WarehouseProduct }>(this.API_URL + this.url + id + '/write_off/', null).pipe(\r\n      map(response => response.data)\r\n    )));\r\n  }\r\n\r\n  openCreateEditWarehouseProductModal(type: ModalActionType, nomenclatureId?: number): Observable<Technology> {\r\n    return this.dialog\r\n      .open<CreateEditWarehouseProductComponent>(CreateEditWarehouseProductComponent, {\r\n        width: 'auto',\r\n        height: 'auto',\r\n        data: {type, nomenclatureId},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openMoveWarehouseProductModal(product: WarehouseProduct) {\r\n    return this.dialog\r\n      .open<MoveWarehouseProductComponent>(MoveWarehouseProductComponent, {\r\n        width: '40rem',\r\n        height: 'auto',\r\n        data: product,\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  moveBulk(product: Partial<WarehouseProduct>): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + 'bulk_move_bulk_products/', product);\r\n  }\r\n\r\n  moveWarehouseSeveralBulk(product: Partial<WarehouseProduct>[]): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + this.url + 'bulk_product_bulk_move_by_ids/', product);\r\n  }\r\n\r\n  moveSerial(product: Partial<WarehouseProduct>): Observable<any> {\r\n    return this.httpClient.post(this.API_URL + 'bulk_move_serial_products/', product);\r\n  }\r\n\r\n  return_to_qc(entity) {\r\n    return this.httpClient.post(this.API_URL + this.url + 'return_to_qc/', entity).pipe(map(response => {\r\n      return response;\r\n    }));\r\n  }\r\n\r\n  write_off_confirmation(entity) {\r\n    return this.httpClient.post(this.API_URL + this.url + 'send_to_write_off_confirmation/', entity).pipe(map(response => {\r\n      return response;\r\n    }));\r\n  }\r\n\r\n  openNomenclatureInfoModal(extraInfo: WarehouseProductExtraInfo[], nomenclature: Nomenclature): any {\r\n    return this.dialog\r\n      .open<NomenclatureSerialInfoComponent>(NomenclatureSerialInfoComponent, {\r\n        width: '650px',\r\n        height: 'auto',\r\n        data: {extraInfo, nomenclature},\r\n        disableClose: true,\r\n        autoFocus: false,\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n\r\n  openSearchInWarehouseModal(): Observable<WarehouseProduct>{\r\n    return this.dialog\r\n      .open<SearchProductInWarehouseComponent>(SearchProductInWarehouseComponent, {\r\n        width: '80%',\r\n        maxHeight: '80%',\r\n        panelClass: 'modal-picker',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {Observable, of} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {environment} from '@env/environment';\r\nimport {Warehouse} from '../models/warehouse';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {CreateEditWarehouseComponent} from '../modals/create-edit-warehouse/create-edit-warehouse.component';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class WarehouseService {\r\n\r\n  API_URL = environment.base_url + environment.warehouse_url;\r\n  readonly url = 'warehouses/';\r\n\r\n  warehouses: Warehouse[];\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(): Observable<Warehouse[]> {\r\n    if (this.warehouses) {\r\n      return of(this.warehouses);\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Warehouse[] }>(this.API_URL + this.url).pipe(\r\n      map(response => {\r\n        const warehouses = response.data;\r\n        this.warehouses = warehouses;\r\n        return warehouses;\r\n      }));\r\n  }\r\n\r\n  getById(id: number): Observable<Warehouse> {\r\n    if (this.warehouses) {\r\n      return of(this.warehouses.find(w => w.id === id));\r\n    }\r\n\r\n    return this.httpClient.get<{ data: Warehouse }>(this.API_URL + this.url + id + '/').pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  create(warehouse: Partial<Warehouse>): Observable<Warehouse> {\r\n    return this.httpClient.post<{ data: Warehouse }>(this.API_URL + this.url, warehouse).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  update(warehouse: Partial<Warehouse>): Observable<Warehouse> {\r\n    return this.httpClient.put<{ data: Warehouse }>(this.API_URL + this.url + `${warehouse.id}/`, warehouse).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  delete(warehouse: Warehouse): Observable<any> {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${warehouse.id}/`);\r\n  };\r\n\r\n  createEditWarehouseModal(type: ModalActionType, warehouse?: Warehouse): Observable<Warehouse> {\r\n    return this.dialog\r\n      .open<CreateEditWarehouseComponent>(CreateEditWarehouseComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, warehouse},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n\r\nimport {WarehouseRouting} from './warehouse.routing';\r\nimport {WarehouseItemsComponent} from './components/warehouse-items/warehouse-items.component';\r\nimport {WarehouseLayoutComponent} from './components/warehouse-layout/warehouse-layout.component';\r\nimport {LayoutModule} from '../layout/layout.module';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport { WarehouseWarehousesComponent } from './components/warehouse-warehouses/warehouse-warehouses.component';\r\nimport {TreeModule} from 'primeng/tree';\r\nimport { WarehouseLocatorsComponent } from './components/warehouse-locators/warehouse-locators.component';\r\nimport {WarehouseUnitsMeasureComponent} from './components/warehouse-units-measure/warehouse-units-measure.component';\r\nimport { WarehouseSerialTypesComponent } from '../product-structure/components/warehouse-serial-types/warehouse-serial-types.component';\r\nimport { WarehouseCategoriesComponent } from './components/warehouse-categories/warehouse-categories.component';\r\nimport { WarehouseWhereUsedComponent } from './components/warehouse-where-used/warehouse-where-used.component';\r\nimport { PhysicalInventoryComponent } from './components/physical-inventory/physical-inventory.component';\r\nimport { PhysicalInventoryProductsComponent } from './components/physical-inventory/physical-inventory-products/physical-inventory-products.component';\r\nimport { WarehouseToolRequestsComponent } from './components/warehouse-tool-requests/warehouse-tool-requests.component';\r\nimport { WarehouseToolRequestComponent } from './components/warehouse-tool-request/warehouse-tool-request.component';\r\nimport { WarehouseProductionRequestsComponent } from './components/warehouse-production-requests/warehouse-production-requests.component';\r\nimport { WarehouseProductionRequestComponent } from './components/warehouse-production-request/warehouse-production-request.component';\r\nimport { CreatePhysicalInventoryComponent } from './modals/create-physical-inventory/create-physical-inventory.component';\r\nimport { MovePhysicalInventoryProductComponent } from './modals/move-physical-inventory-product/move-physical-inventory-product.component';\r\nimport { AddProductToPhysicalInventoryComponent } from './modals/add-product-to-physical-inventory/add-product-to-physical-inventory.component';\r\nimport { CreateEditWarehouseComponent } from './modals/create-edit-warehouse/create-edit-warehouse.component';\r\nimport { CreateEditLocatorComponent } from './modals/create-edit-locator/create-edit-locator.component';\r\nimport { CreateEditWarehouseCategoryComponent } from './modals/create-edit-warehouse-category/create-edit-warehouse-category.component';\r\nimport {CreateEditUnitMeasureComponent} from './modals/create-edit-unit-measure/create-edit-unit-measure.component';\r\nimport { CreateEditWarehouseProductComponent } from './modals/create-edit-warehouse-item/create-edit-warehouse-product.component';\r\nimport {ProductStructureModule} from '../product-structure/product-structure.module';\r\nimport { MoveWarehouseProductComponent } from './modals/move-warehouse-product/move-warehouse-product.component';\r\nimport { ProductionListsComponent } from './components/production-lists/production-lists.component';\r\nimport { ProductionListComponent } from './components/production-lists/production-list/production-list.component';\r\nimport { SetProductionListLocatorComponent } from './modals/set-production-list-locator/set-production-list-locator.component';\r\nimport {\r\n  ListProductPrintItemComponent\r\n} from './components/production-lists/list-product-print-item/list-product-print-item.component';\r\nimport { WarehouseQcComponent } from './components/warehouse-qc/warehouse-qc.component';\r\nimport { WarehouseQcInvoiceComponent } from './components/warehouse-qc/warehouse-qc-invoice/warehouse-qc-invoice.component';\r\nimport { QcAcceptToWarehouseComponent } from './modals/qc-accept-to-warehouse/qc-accept-to-warehouse.component';\r\nimport { WarehouseQcOrderComponent } from './components/warehouse-qc/warehouse-qc-order/warehouse-qc-order.component';\r\nimport {WarehouseIsolatorComponent} from './components/warehouse-isolator/warehouse-isolator.component';\r\nimport {\r\n  WarehouseIsolatorInvoicesComponent\r\n} from './components/warehouse-isolator/components/warehouse-isolator-invoices/warehouse-isolator-invoices.component';\r\nimport {\r\n  WarehouseIsolatorOrdersComponent\r\n} from './components/warehouse-isolator/components/warehouse-isolator-orders/warehouse-isolator-orders.component';\r\nimport { WarehouseProductionRequestPrintPageComponent } from './components/warehouse-production-request-print-page/warehouse-production-request-print-page.component';\r\nimport {\r\n  QcAcceptTechnicalEquipmentComponent\r\n} from './modals/qc-accept-technical-equipment/qc-accept-technical-equipment.component';\r\nimport { NomenclatureSerialInfoComponent } from './modals/nomenclature-serial-info/nomenclature-serial-info.component';\r\nimport {QrCodeModule} from '../qr-code/qr-code.module';\r\nimport { PhysicalInventoryProductsChangesComponent } from './modals/physical-inventory-products-changes/physical-inventory-products-changes.component';\r\nimport {RippleModule} from 'primeng/ripple';\r\nimport { WarehouseShippingRequestsComponent } from './components/warehouse-shipping-requests/warehouse-shipping-requests.component';\r\nimport { WarehouseShippingRequestComponent } from './components/warehouse-shipping-requests/warehouse-shipping-request/warehouse-shipping-request.component';\r\nimport { WarehouseShippingRequestPrintComponent } from './components/warehouse-shipping-requests/warehouse-shipping-request-print/warehouse-shipping-request-print.component';\r\nimport { ProductionListChainsStatisticsComponent } from './modals/production-list-chains-statistics/production-list-chains-statistics.component';\r\nimport { WarehouseToolRequestPrintPageComponent } from './components/warehouse-tool-request-print-page/warehouse-tool-request-print-page.component';\r\nimport { ProductionListSetActualQuantityDialogComponent } from './modals/production-list-set-actual-quantity-dialog/production-list-set-actual-quantity-dialog.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    WarehouseItemsComponent,\r\n    WarehouseLayoutComponent,\r\n    WarehouseWarehousesComponent,\r\n    WarehouseLocatorsComponent,\r\n    WarehouseUnitsMeasureComponent,\r\n    WarehouseSerialTypesComponent,\r\n    WarehouseIsolatorComponent,\r\n    WarehouseIsolatorInvoicesComponent,\r\n    WarehouseIsolatorOrdersComponent,\r\n    WarehouseCategoriesComponent,\r\n    WarehouseWhereUsedComponent,\r\n    PhysicalInventoryComponent,\r\n    PhysicalInventoryProductsComponent,\r\n    WarehouseToolRequestsComponent,\r\n    WarehouseToolRequestComponent,\r\n    WarehouseProductionRequestsComponent,\r\n    WarehouseProductionRequestComponent,\r\n    CreatePhysicalInventoryComponent,\r\n    MovePhysicalInventoryProductComponent,\r\n    AddProductToPhysicalInventoryComponent,\r\n    CreateEditWarehouseComponent,\r\n    CreateEditLocatorComponent,\r\n    CreateEditWarehouseCategoryComponent,\r\n    CreateEditUnitMeasureComponent,\r\n    CreateEditWarehouseProductComponent,\r\n    MoveWarehouseProductComponent,\r\n    ProductionListsComponent,\r\n    ProductionListComponent,\r\n    SetProductionListLocatorComponent,\r\n    ListProductPrintItemComponent,\r\n    WarehouseQcComponent,\r\n    WarehouseQcInvoiceComponent,\r\n    QcAcceptToWarehouseComponent,\r\n    QcAcceptTechnicalEquipmentComponent,\r\n    WarehouseQcOrderComponent,\r\n    WarehouseProductionRequestPrintPageComponent,\r\n    NomenclatureSerialInfoComponent,\r\n    PhysicalInventoryProductsChangesComponent,\r\n    WarehouseShippingRequestsComponent,\r\n    WarehouseShippingRequestComponent,\r\n    WarehouseShippingRequestPrintComponent,\r\n    ProductionListChainsStatisticsComponent,\r\n    WarehouseToolRequestPrintPageComponent,\r\n    ProductionListSetActualQuantityDialogComponent,\r\n  ],\r\n  exports: [\r\n    WarehouseCategoriesComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    WarehouseRouting,\r\n    LayoutModule,\r\n    SharedModule,\r\n    TreeModule,\r\n    ProductStructureModule,\r\n    QrCodeModule,\r\n    RippleModule,\r\n  ]\r\n})\r\nexport class WarehouseModule {\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {WarehouseItemsComponent} from './components/warehouse-items/warehouse-items.component';\r\nimport {WarehouseLayoutComponent} from './components/warehouse-layout/warehouse-layout.component';\r\nimport {WarehouseWarehousesComponent} from './components/warehouse-warehouses/warehouse-warehouses.component';\r\nimport {WarehouseLocatorsComponent} from './components/warehouse-locators/warehouse-locators.component';\r\nimport {WarehouseUnitsMeasureComponent} from './components/warehouse-units-measure/warehouse-units-measure.component';\r\n\r\n\r\nimport {WarehouseCategoriesComponent} from './components/warehouse-categories/warehouse-categories.component';\r\nimport {WarehouseWhereUsedComponent} from './components/warehouse-where-used/warehouse-where-used.component';\r\nimport {PhysicalInventoryComponent} from './components/physical-inventory/physical-inventory.component';\r\nimport {\r\n  PhysicalInventoryProductsComponent\r\n} from './components/physical-inventory/physical-inventory-products/physical-inventory-products.component';\r\nimport {WarehouseToolRequestsComponent} from './components/warehouse-tool-requests/warehouse-tool-requests.component';\r\nimport {WarehouseToolRequestComponent} from './components/warehouse-tool-request/warehouse-tool-request.component';\r\nimport {\r\n  WarehouseProductionRequestsComponent\r\n} from './components/warehouse-production-requests/warehouse-production-requests.component';\r\nimport {\r\n  WarehouseProductionRequestComponent\r\n} from './components/warehouse-production-request/warehouse-production-request.component';\r\nimport {ProductionListsComponent} from './components/production-lists/production-lists.component';\r\nimport {ProductionListComponent} from './components/production-lists/production-list/production-list.component';\r\nimport {WarehouseQcComponent} from './components/warehouse-qc/warehouse-qc.component';\r\nimport {\r\n  WarehouseQcInvoiceComponent\r\n} from './components/warehouse-qc/warehouse-qc-invoice/warehouse-qc-invoice.component';\r\nimport {WarehouseQcOrderComponent} from './components/warehouse-qc/warehouse-qc-order/warehouse-qc-order.component';\r\nimport {\r\n  WarehouseIsolatorInvoicesComponent\r\n} from './components/warehouse-isolator/components/warehouse-isolator-invoices/warehouse-isolator-invoices.component';\r\nimport {\r\n  WarehouseIsolatorOrdersComponent\r\n} from './components/warehouse-isolator/components/warehouse-isolator-orders/warehouse-isolator-orders.component';\r\nimport {WarehouseIsolatorComponent} from './components/warehouse-isolator/warehouse-isolator.component';\r\nimport {\r\n  WarehouseShippingRequestsComponent\r\n} from './components/warehouse-shipping-requests/warehouse-shipping-requests.component';\r\nimport {\r\n  WarehouseShippingRequestComponent\r\n} from './components/warehouse-shipping-requests/warehouse-shipping-request/warehouse-shipping-request.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '', component: WarehouseLayoutComponent, children: [\r\n      {path: '', redirectTo: 'items', pathMatch: 'full'},\r\n      {path: 'items', title: 'Warehouse Items', component: WarehouseItemsComponent},\r\n      {\r\n        path: 'warehouses',\r\n        children: [\r\n          {path: '', title: 'Warehouses', component: WarehouseWarehousesComponent},\r\n          {path: ':id/locators', title: 'Locators', component: WarehouseLocatorsComponent},\r\n        ]\r\n      },\r\n      {path: 'measure', title: 'Units of Measure', component: WarehouseUnitsMeasureComponent},\r\n      {path: 'categories', title: 'Warehouse Categories', component: WarehouseCategoriesComponent},\r\n      {path: 'where-used', title: 'Where Used', component: WarehouseWhereUsedComponent},\r\n      {\r\n        path: 'production-requests', children: [\r\n          {path: '', title: 'Production Requests', component: WarehouseProductionRequestsComponent},\r\n          {path: ':id', title: 'Production Request', component: WarehouseProductionRequestComponent}\r\n        ]\r\n      },\r\n      {\r\n        path: 'tool-requests', children: [\r\n          {path: '', title: 'Tool Requests', component: WarehouseToolRequestsComponent},\r\n          {path: ':id', title: 'Tool Request', component: WarehouseToolRequestComponent}\r\n        ]\r\n      },\r\n      {\r\n        path: 'physical-inventory', children: [\r\n          {path: '', title: 'Physical Inventory', component: PhysicalInventoryComponent},\r\n          {path: ':id', title: 'Physical Inventory Products', component: PhysicalInventoryProductsComponent},\r\n        ]\r\n      },\r\n      {\r\n        path: 'production-lists', children: [\r\n          {path: '', title: 'Production Lists', component: ProductionListsComponent},\r\n          {path: ':id', title: 'Production List', component: ProductionListComponent},\r\n        ]\r\n      },\r\n      {\r\n        path: 'warehouse-qc', children: [\r\n          {path: '', title: 'Warehouse QC', component: WarehouseQcComponent},\r\n          {path: 'invoice/:id', title: 'Warehouse QC Invoice', component: WarehouseQcInvoiceComponent},\r\n          {path: 'order/:id', title: 'Warehouse QC Order', component: WarehouseQcOrderComponent},\r\n        ]\r\n      },\r\n      {\r\n        path: 'isolator', children: [\r\n          {path: '', title: 'Isolator', component: WarehouseIsolatorComponent},\r\n          {path: 'invoices/:id', title: 'Isolator Invoices', component: WarehouseIsolatorInvoicesComponent},\r\n          {path: 'orders/:id', title: 'Isolator Orders', component: WarehouseIsolatorOrdersComponent}\r\n        ]\r\n      },\r\n      {\r\n        path: 'shipments-requests', children: [\r\n          {path: '', title: 'Shipments Requests', component: WarehouseShippingRequestsComponent},\r\n          {path: ':id', title: 'Shipment Request', component: WarehouseShippingRequestComponent},\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class WarehouseRouting {\r\n}\r\n","export const environment = {\r\n  production: true,\r\n  base_url: 'https://rwave.pekauto.com/api/',\r\n  product_structure_url: 'product_structure/',\r\n  warehouse_url: 'warehouse/',\r\n  production_url: 'production/',\r\n  business_partners_url: 'crm/',\r\n  procurement_url: 'procurement/',\r\n  accounting_url: 'accounting/',\r\n  delivery_url: 'delivery/',\r\n  users_url: 'users/',\r\n  staff_url: 'staff/',\r\n  sales_url: 'sales/',\r\n  business_trips_url: 'business-trips/',\r\n  image_path: 'https://rwave.pekauto.com',\r\n  // link_url: 'http://localhost:4201/'\r\n  link_url: 'https://rwave.pekauto.com/'\r\n};\r\n","export const environment = {\r\n  production: false,\r\n  /**   api  [Swagger]{@link http://erp.slopehelper.com/swagger/ } */\r\n  base_url: 'https://erp.slopehelper.com/api/',\r\n  product_structure_url: 'product_structure/',\r\n  warehouse_url: 'warehouse/',\r\n  production_url: 'production/',\r\n  business_partners_url: 'crm/',\r\n  procurement_url: 'procurement/',\r\n  accounting_url: 'accounting/',\r\n  delivery_url: 'delivery/',\r\n  users_url: 'users/',\r\n  staff_url: 'staff/',\r\n  sales_url: 'sales/',\r\n  business_trips_url: 'business-trips/',\r\n  image_path: 'http://localhost:8000',\r\n  link_url: 'https://pekauto.unitcode.ru/'\r\n};\r\n","import { enableProdMode } from '@angular/core';\r\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\r\n\r\nimport { AppModule } from './app/app.module';\r\nimport { environment } from './environments/environment';\r\n\r\nif (environment.production) {\r\n  enableProdMode();\r\n}\r\n\r\nplatformBrowserDynamic().bootstrapModule(AppModule)\r\n  .catch(err => console.error(err));\r\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"names":["environment","BusinessTripLocationTypes","map","UploadedDataViewerComponent","CreateBusinessTripComponent","TakePhotoModalComponent","Excel","formatDate","BusinessTripExpensesType","BusinessTripVehicleType","SPACE_BETWEEN","BusinessTripService","constructor","httpClient","dialog","adapterService","base_url","business_trips_url","get","query","qString","forEach","element","index","name","value","API_URL","url","pipe","response","data","getAll","getDetailed","id","getBtForExport","updateHotelInfo","hotelData","post","updateBusinessTripEmployee","updateBusinessTripVehicle","create","entity","update","patch","delete","download_hotel_file","responseType","download_expense_file","exportToExcel","businessTripData","workbook","Workbook","worksheet","firstName","lastName","startDate","trip_start","addWorksheet","totalIndex","totalDisplayedRows","columns","header","key","width","cols","idx","getColumn","alignment","vertical","horizontal","font","size","makeHeader","employee","first_name","last_name","addRow","firstCol","secondCol","position","title","custom_employee","makeGap","trip_end","test","start","end","startLocation","locations","find","location","type","FIRST","lastLocation","LAST","intermediateLocations","filter","INTERMEDIATE","country","address","location_meetings","meeting","meetingIndex","company","contacts","person","personIndex","purpose_short","purpose_full","hotels","length","hotel","residence_start","residence_end","vehicle","vehicle_type","WITHOUT","custom_vehicle","PRIVATE","RENT","COMPANY_CAR","model","number","start_mileage","end_mileage","initiator","ownEvidences","expenses","expense","OWN","is_verified","thirdCol","fourthCol","fifthCol","sixthCol","resExpense","custom_expense","description","sum","currency","code","ownSum","sumForCurrency","evidence","amount","push","expenseSum","corporateEvidences","CORPORATE","corporateSum","canceledEvidences","canceledSum","xlsx","writeBuffer","then","blob","Blob","window","URL","createObjectURL","a","document","createElement","body","appendChild","setAttribute","href","download","click","revokeObjectURL","remove","addSection","spaceAmount","spaceToPass","i","getRow","bold","viewBusinessTripFiles","files","open","height","panelClass","autoFocus","afterClosed","createChangeBusinessTrip","disableClose","takePhotoModal","canVerify","i0","factory","providedIn","ENomenclatureType","BehaviorSubject","Subject","switchMap","debounceTime","distinctUntilChanged","tap","UntilDestroy","untilDestroyed","MAT_DIALOG_DATA","product_r8","ManufacturingPickerProductComponent","fb","nomenclatureService","orderProductService","dialogRef","group","generateQueryKey","searchForm","search$","prepareForSearch","getForPagination","productsCount","count","results","paginateToFistPage","isLoading","ngOnInit","name$","next","subscribe","code$","patchValue","isStartFirstPage","paginator","changePage","selectedProduct","newQueryKey","queryKey","currentPage","controls","paginate","event","page","onAddProduct","close","selectors","viewQuery","ctx","iif","ctx_r5","OutsourcingChainCreationListComponent","orderService","modalService","router","label","nomenclature__name","nomenclature__code","request_date","technologies_ids","status","isShowAll","getGroupedOutsourceForPagination","product","setProductStatus","getGroupedOutsource","products","request_id","ordered_quantity","initial_quantity","selectedProducts","onCheckOrder","onCheckAddOrder","getIsCleanUnnecessary","getIsDeleted","Date","dateAdapter","getSmallDescription","substring","isCanOrder","isCanAddOrder","every","node","onCloseOrders","confirm","partlyOrderedProducts","n","closeOrders","onDeleteOrders","notOrderedProducts","deleteSeveral","onCreateChain","openCreateChainModal","order","navigate","onAddProductsToChain","openAddProductsToChainModal","onSelectTechnologies","technologies","t","join","onShowAll","OutsourcingRequestsComponent","onCreateRequest","openAddOutsourcingRequestModal","Validators","finalize","product_r7","product_r10","AddMaterialToOrderComponent","requestService","root_categories","category","required_quantity","required","min","for_order_product","material_nomenclature","technology","createForm","productId","onSelectCategory","clearCreatForm","onSelectProduct","onAddMaterial","isSaving","onSelectNomenclatureType","onSelectRootCategories","ids","product_r9","product_r12","CreateOutsourcingRequestComponent","current_technology","quantity","nomenclature","orderId","SearchProductInWarehouseComponent","warehouseProductService","warehouse","locator","getGroupedPagination","uid","uom","unit_of_measure","symbol","onPickProduct","onSelectWarehouse","onSelectLocator","ctx_r7","ctx_r9","ctx_r10","ctx_r11","ProcurementChainCreationListComponent","categories_ids","order_by_name","order_by_code","order_by_category","first_root_plan_name","first_product_list_name","getGroupedPurchasedForPagination","getGroupedPurchased","ordering","prepareSortingField","sorting","field","resetAllSorting","setValue","console","log","onSelectCategories","AddOrderProductToOrderComponent","isPurchased","addControl","control","onSelectRootCategory","PurchasingChainCreationListComponent","PurchasingRequestsComponent","openAddProductToOrderModal","EventEmitter","forkJoin","deepCopy","ctx_r30","_r22","ctx_r38","ctx_r46","ctx_r1","technicalEquipment_r129","ctx_r103","ctx_r2","ctx_r3","OrderPageComponent","invoiceService","serviceInvoiceService","paymentService","servicePaymentService","orderSupplierService","orderTechnicalEquipmentService","purchasingCategoryService","albumService","link_url","items","icon","command","onEditOrderProductQuantity","onEditOrderProductDeliveryDate","onRemoveOrderProduct","onGoToProformaInvoicePage","openProformaInvoiceFilesModal","onRemoveProformaInvoice","onGoToInvoicePage","openInvoiceFilesModal","onRemoveInvoice","onGoToServiceInvoicePage","openServiceInvoiceFilesModal","onRemoveServiceInvoice","Set","getOrder","getInvoices","getPayments","getServiceInvoices","getServicePayments","getFiles","orderType","getOrderTechnicalEquipments","filesModal$","openOrderFilesModal","editOrderModal$","openEditOrderModal","printAlbum","getNomenclaturesImages","p","togglePrintAlbumMode","isAlbumPrint","getById","statuses","x","estimated_date_sort","estimated_date","sort","b","is_active","loaded","getProducts","purchase_category","is_material","isPurchaseOrderNonMaterial","getPurchasingCategories","orderMaterials","details","order_products","isReady","is_technology_ready","request_type","totalQuantity","reduce","rootLists","root_production_list_products","rootProducts","roots","el","equal_order_products","materials","task_materials","m","nomenclatureId","currentTechnology","order_product_nomenclature","list_product","inMaterials","material","allIds","totalInitialQuantity","totalRequiredQuantity","isLoadingProducts","invoices","is_proforma","proformaInvoices","isLoadingInvoices","payments","selectedPayment","isLoadingPayments","serviceInvoices","serviceProformaInvoices","isLoadingServiceInvoices","servicePayments","isLoadingServicePayments","getRootLists","lists","prod","res","found","list","isLoadingFiles","editOrderProductQuantity","orderProduct","editOrderProductDeliveryDate","reception_date","deleteCall","removeFromOrder","onCreateProformaInvoice","createProformaInvoice","link","selectedProformaInvoice","onCreateInvoice","createInvoice","selectedInvoice","onCreatePayment","openCreateEditPaymentForm","supplier","payment","onEditPayment","onCreateServiceInvoice","isProforma","invoice","selectedServiceInvoice","onCreateServicePayment","openCreateEditServicePaymentForm","onEditServicePayment","selectedServicePayment","getFileName","nameArr","split","openAddFileToOrderModal","onDownloadFile","file","addition","add","downloadFile","filename","onRemoveFile","deletion","deleteFile","findIndex","f","splice","onCancelOrderMaterials","isCancellation","cancel","technicalEquipments","isLoadingTechnicalEquipments","categories","purchasingCategories","selectedPurchasingCategoryId","c","isLoadingPurchasingCategories","onSelectPurchaseCategory","send","updatePartly","openAddPMaterialToOrder","request","checkIfIsBlockedToTenderTransform","clearSupplierRelatedFields","can_select_supplier","inputs","outputs","decls","vars","consts","template","_r20","OrderRequestType","order_r13","AddProductsToChainComponent","with_free_product","orders","requiredNomenclatureId","nomenclatureOrderProducts","is_subtracted_from_free_quantity","freeNomenclatureQuantityAtChain","MANUALLY","sent_to_qc_quantity","AUTOMATICALLY","selectedOrder","catIndex","onAdd","addToOrder","take","cloneDeep","ctx_r36","rowData_r56","rowNode_r55","ctx_r4","last_r95","TreePrint","ProductionListComponent","route","listService","listProductService","_location","messageService","qrCodeService","showImages","selectedNode","onSetActualQuantity","cancelQuantities","makeDeficitOne","onGenerateQrCodes","selectedNodeTree","onCancelActualQuantity","makeRequestsNodeForAll","snapshot","paramMap","printPage","disabled","setQuantities","makeDeficit","makeRequestsForAll","goToPlan","getList","getListProducts","createExpanseMap","expanded","expanseMap","children","listId","createListProductsGroups","firstListProducts","task_sort_value","groupId","currentProduct","next_technology_list_product","groupKey","groupedProducts","filteredTasks","level","firstLists","newListProducts","firstList","uiParent","currentListProduct","l","listProduct","parent","childrenListProducts","ff","filteredProducts","sortingListProducts","nomenclaturesTypes","createListProductsTree","tree","blockedExpand","fillTree","nodes","parentNodes","ASSEMBLY","parentNode","filteredLists","includes","totalActualQuantity","actual_quantity","reservedQuantity","reserved_quantity","totalCount","newList","total_required_quantity","newListProduct","generateOldListProducts","listProducts","Boolean","parentListProducts","findListProducts","generateListProducts","pureTotalRequiredQuantity","JSON","parse","stringify","warehouseQuantities","removeDuplicates","warehouse_quantity","some","findEl","groupedProductIds","totalQuantityDeficit","totalQuantityCompleted","newListCompleted","newListDeficit","notProcessedCount","newListNotProcessed","filteredGroupsIds","groupsIds","required_quantity_per_one","sets_number","firstListProduct","PURCHASED","parent_technology_list_product","isOldList","newLists","menuItems","mapExpansion","r","addedTree","copyProducts","isLoadingTree","isSetAllActualQuantities","showComplete","ss","getTree","productIds","has_children","getPartly","newProducts","flat","newIds","generateTree","sortType","getChildren","isShowPrintSeparated","productsForPrint","unshift","isShowPrint","setTimeout","print","onWindowAfterPrint","printClosed","mode","list_url","editQuantity","editListProduct","process","completeList","conf","back","showImageGallery","canceledActualQuantity","expandAll","temp","expandCollapseRecursive","collapseAll","isExpand","childNode","selectMode","onSelectTreeNode","selectedNodeTreeMenuItems","MANUFACTURED","scanForListProduct","requestAnimationFrame","elementsRowsIds","elements","querySelectorAll","getScanned","ids_found","elementId","idArray","foundId","toString","foundRowsIds","currentDisplayRowId","scrollToElement","severity","summary","detail","rowId","getElementById","scrollIntoView","behavior","block","isFoundRow","onStartScanning","clearQrResults","isScanned","scanningEnd","onScanned","onCancelScanned","goToNext","currentIndex","goToPrev","root_production_plans","by_nomenclatures_list","bulk_or_serial","nomenclature_id","serial_number_ids","order_product_ids","invoice_product_ids","serialNumbers","reserved_serial_numbers","serial","future_serial_numbers","generateQrCodes","isGenerating","setActualQuantityDialog","selectedListProduct","cancelActualQuantity","showSerialWarehouseQuantity","hostBindings","Order","takeUntil","DOCUMENT","ctx_r16","ctx_r18","ctx_r20","ctx_r51","request_r47","rowData_r110","rowNode_r109","ctx_r6","ctx_r13","ctx_r14","ViewMode","ProductRequestListOrder","WarehouseProductionRequestComponent","requestsService","auth","ordersService","tasksService","orderTechnicalEquipmentsService","LIST","selectedRequestNode","onCancelItem","selectedRequest","printPageGrouped","getOrderInfo","getRequests","formGroupedOrderedProducts","hierarchyRequests","orderedProductsForPrint","child","for_order_ids","child_ids","onCancel","destroy$","ordered_items_technologies","canAddTechnology","productInList","prepareDetailedCategoryTree","categoriesTemp","plan","isAdded","hasSerialNumber","serial_numbers","serialNumber","planInfo","type_with_number","planId","parentId","detailedRequestTree","cat","loading","changeView","view","viewMode","requests","getByOrder","listRequests","getCodeAndNameId","req","reserved_serial_products","getSameRequests","all_reserved_serial_products","unique_locators","locators","is_reserved","available_quantity_sum","serial_number","accumulator","currentValue","self","innerLocator","hierRequest","prepareTreeCategories","haveRootProduction","rootList","currentReqDate","created","non_material","codeName","codeNameSecond","codeSecond","nameSecond","expandCollapseAllOrders","isToExpand","requestTree","parentProducts","parentNomenclature","materialChild","nonMaterialChild","onNodeExpand","$event","loadPlanInfo","rowNode","loadRootListTree","buildDetailedPlanTree","tasks","planIndex","task","findLevelParent","addToParentTree","existingIndex","foundInRequest","requestId","call","requestIds","cancelRequest","result","lastFreeValue","changeRequest","expandCollapseDetailedView","complete","relativeTo","onGoProd","goOrder","goToOrder","accounting_type","isShowPrintGrouped","ngOnDestroy","lastScannedId","HIERARCHY","sendDataProductionRequests","testFoundIdsOnScan","item_id_changed","elementIndex","isMainIdChecked","is_scanned","firstPage","Math","floor","isFullyScanned","mainScanned","allInnerScanned","isPartlyScanned","innerNeedScan"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}