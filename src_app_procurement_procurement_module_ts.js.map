{"version":3,"file":"src_app_procurement_procurement_module_ts.js","mappings":"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","sources":["./src/app/procurement/components/chains/chains.component.ts","./src/app/procurement/components/chains/chains.component.html","./src/app/procurement/components/procurement-layout/procurement-layout.component.ts","./src/app/procurement/components/procurement-layout/procurement-layout.component.html","./src/app/procurement/components/procurement-order-page/procurement-order-page.component.ts","./src/app/procurement/components/procurement-order-page/procurement-order-page.component.html","./src/app/procurement/pickers/statuses-picker/statuses-picker.component.ts","./src/app/procurement/pickers/statuses-picker/statuses-picker.component.html","./src/app/procurement/procurement.module.ts","./src/app/procurement/procurement.routing.ts","./src/app/procurement/services/status.service.ts"],"sourcesContent":["import {Component, OnInit} from '@angular/core';\nimport {FormBuilder, FormGroup} from '@angular/forms';\nimport {Nomenclature} from '@shared/models/nomenclature';\nimport {OrderService} from '../../services/order.service';\nimport {QuerySearch} from '@shared/models/other';\nimport {Order} from '../../models/order';\nimport {AdapterService} from '@shared/services/adapter.service';\nimport {ListProduct} from '../../../warehouse/models/list-product';\n\n@Component({\n  selector: 'pek-chains',\n  templateUrl: './chains.component.html',\n  styleUrls: ['./chains.component.scss']\n})\nexport class ChainsComponent implements OnInit {\n  searchForm: FormGroup = this.fb.group({\n    page: [1],\n    name: [''],\n    code: [''],\n    responsible_employee_id: [null],\n    date_created_after: [null],\n    date_created_before: [null],\n    category_ids: null,\n    root_categories: null,\n  });\n\n  orders: Order[] = [];\n  selectedOrder: Order;\n\n  isLoading = false;\n  isHideFilters = false;\n\n  nomenclaturesList: Nomenclature[] = [];\n  rootLists: any[] = [];\n\n  query: QuerySearch[] = [\n    {name: 'accounting_type', value: 1},\n    {name: 'has_purchase_category', value: false},\n    {name: 'exclude_with_active_final_status', value: true}\n  ];\n\n  tableScrollHeight = '29.625rem';\n\n  constructor(\n    private readonly fb: FormBuilder,\n    private readonly orderService: OrderService,\n    private readonly adapterService: AdapterService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.getOrders();\n  }\n\n  getOrders() {\n    this.isLoading = true;\n\n    this.orderService.get(this.query).subscribe(orders => {\n      this.orders = orders;\n\n      this.orders.map(x => {\n        x.created = new Date(x.created);\n        x.created_to = x.created;\n        x.status = x.statuses.filter(stat => stat.is_active)[0]?.status;\n        x.activeStatusDate = x.statuses.filter(stat => stat.is_active)[0]?.estimated_date;\n      });\n\n      this.generateNomenclaturesListAndRootLists();\n    });\n  }\n\n  generateNomenclaturesListAndRootLists() {\n    this.orders.forEach(order => {\n      if (order.activeStatusDate) {\n        order.activeStatusDate = new Date(order.activeStatusDate);\n      }\n\n      order.order_products.forEach(orderProduct => {\n        if (!this.nomenclaturesList.includes(orderProduct.nomenclature)) {\n          this.nomenclaturesList.push(orderProduct.nomenclature);\n        }\n      });\n\n      order.root_production_list_products.forEach(root => this.rootLists.push(root));\n\n      this.rootLists = this.rootLists.map(root => {\n        return {\n          ...root,\n          fullName: `(${root.id}) ${root.nomenclature.code}~${root.nomenclature.name}`\n        };\n      });\n    });\n\n    this.nomenclaturesList = this.adapterService.removeDuplicates(this.nomenclaturesList, x => x.id);\n    this.rootLists = this.adapterService.removeDuplicates(this.rootLists, x => x.id);\n\n    this.nomenclaturesList.sort((a, b) => {\n      if (a.name < b.name) return -1;\n      if (a.name > b.name) return 1;\n      return 0;\n    });\n\n    this.rootLists.sort((a, b) => {\n      if (a.fullName < b.fullName) return -1;\n      if (a.fullName > b.fullName) return 1;\n      return 0;\n    });\n  }\n\n  getRootLists(rootLists: ListProduct[]): {list: ListProduct, count?: number}[] {\n    const lists: {list: ListProduct, count?: number}[] = [];\n    rootLists.forEach((res: ListProduct) => {\n      const found = lists.find(el => el.list.nomenclature.name === res.nomenclature.name);\n      if (found) {\n        found.count++;\n      } else {\n        lists.push({list: res, count: 1});\n      }\n    });\n    return lists;\n  }\n}\n","<div class=\"page\">\n  <div class=\"page__header\">\n    <div class=\"page__title\">\n      <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\n      <h1>Procurement Chains</h1>\n    </div>\n    <div class=\"page__tools\">\n      <button\n        class=\"mr-2 p-button-warning\"\n      >\n      </button>\n    </div>\n  </div>\n</div>\n\n<div class=\"page__content\">\n  <div class=\"page__card\">\n\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\n      <div class=\"filters-visibility__header\">\n        <!--        <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>-->\n      </div>\n\n      <button\n        class=\"icon pi\"\n        [class.pi-angle-double-up]=\"!isHideFilters\"\n        [class.pi-angle-double-down]=\"isHideFilters\"\n      ></button>\n\n      <form\n        [formGroup]=\"searchForm\"\n        class=\"form mb-3\"\n      >\n        <div class=\"row\">\n          <div class=\"col-3\">\n            <div class=\"form-group\">\n              <label>Nomenclature</label>\n              <p-dropdown\n                [filter]=\"true\"\n                [showClear]=\"true\"\n                [options]=\"nomenclaturesList\"\n                optionValue=\"id\"\n                optionLabel=\"name\"\n                placeholder=\"No Nomenclature Selected\"\n              ></p-dropdown>\n            </div>\n          </div>\n          <div class=\"col-3\">\n            <div class=\"form-group\">\n              <label>Company</label>\n              <pek-company-picker></pek-company-picker>\n            </div>\n          </div>\n          <div class=\"col-3\">\n            <div class=\"form-group\">\n              <label>Root List</label>\n              <p-dropdown\n                [filter]=\"true\"\n                [showClear]=\"true\"\n                [options]=\"rootLists\"\n                optionValue=\"fullName\"\n                optionLabel=\"fullName\"\n                placeholder=\"No List Selected\"\n              ></p-dropdown>\n            </div>\n          </div>\n          <div class=\"col-3\">\n            <div class=\"form-group\">\n              <label>Status</label>\n              <pek-statuses-picker\n                [accountingType]=\"4\"\n              ></pek-statuses-picker>\n            </div>\n          </div>\n          <div class=\"col-3\">\n            <div class=\"form-group\">\n              <label>From</label>\n              <p-calendar\n                dataType=\"date\"\n                [showButtonBar]=\"true\"\n                dateFormat=\"dd/mm/yy\"\n                [readonlyInput]=\"true\"\n              >\n              </p-calendar>\n            </div>\n          </div>\n          <div class=\"col-3\">\n            <div class=\"form-group\">\n              <label>To</label>\n              <p-calendar\n                dataType=\"date\"\n                [showButtonBar]=\"true\"\n                dateFormat=\"dd/mm/yy\"\n                [readonlyInput]=\"true\"\n              >\n              </p-calendar>\n            </div>\n          </div>\n          <div class=\"col-3\">\n            <div class=\"form-group\">\n              <label>Product Structure Categories</label>\n              <pek-multi-product-structure-categories-picker></pek-multi-product-structure-categories-picker>\n            </div>\n          </div>\n<!--          <div class=\"col-3\">-->\n<!--            <div class=\"form-group\">-->\n<!--              <label>Warehouse Category</label>-->\n<!--            </div>-->\n<!--          </div>-->\n          <button [routerLink]=\"['order', selectedOrder?.id]\">Edit</button>\n        </div>\n      </form>\n    </div>\n\n    <div class=\"page__table\">\n      <p-table\n        #dt\n        selectionMode=\"single\"\n        [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\n        [scrollable]=\"true\"\n        dataKey=\"id\"\n        [paginator]=\"true\"\n        [rows]=\"10\"\n        [(selection)]=\"selectedOrder\"\n        [value]=\"orders\"\n        styleClass=\"p-datatable-gridlines\"\n      >\n        <ng-template pTemplate=\"header\">\n          <tr>\n            <th class=\"text-center\" style=\"width: 3%;\">#</th>\n            <th class=\"text-center\" style=\"width: 10%;\">Date</th>\n            <th class=\"text-center\" style=\"width: 7%;\">Order ID</th>\n            <th class=\"text-center\" style=\"width: 15%;\">Supplier</th>\n            <th class=\"text-center\" style=\"width: 15%;\">Supplier Nomenclature</th>\n            <th style=\"width: 15%;\">Comment</th>\n            <th style=\"width: 15%;\">Root Lists</th>\n            <th class=\"text-center\" style=\"width: 10%;\">Status</th>\n            <th class=\"text-center\" style=\"width: 10%;\">Completion</th>\n          </tr>\n        </ng-template>\n        <ng-template pTemplate=\"body\" let-order let-i=\"rowIndex\">\n          <tr [pSelectableRow]=\"order\">\n            <td class=\"text-center\" style=\"width: 3%;\">{{i + 1}}</td>\n            <td class=\"text-center\" style=\"width: 10%;\">{{order.created | date:'dd/MM/yyyy'}}</td>\n            <td class=\"text-center\" style=\"width: 7%;\">{{order.id}}</td>\n            <td class=\"text-center\" style=\"width: 15%;\">{{order.supplier?.name}}</td>\n            <td class=\"text-center\" style=\"width: 15%;\">{{order.supplier?.supplier_nomenclature}}</td>\n            <td style=\"width: 15%;\">\n              <div class=\"word-break\">\n                {{order.comment}}\n              </div>\n            </td>\n            <td style=\"width: 15%;\">\n              <div class=\"word-break\"\n                   *ngFor=\"let item of getRootLists(order.root_production_list_products); let idx = index\">\n                {{item.list.nomenclature.code}}~{{item.list.nomenclature.name}} ({{item.count}})\n              </div>\n            </td>\n            <td class=\"text-center\" style=\"width: 10%;\">{{order.status?.value}}</td>\n            <td class=\"text-center\" style=\"width: 10%;\">{{order?.activeStatusDate | date: 'dd/MM/yyyy'}}</td>\n          </tr>\n        </ng-template>\n        <ng-template pTemplate=\"emptymessage\">\n          <tr>\n            <td class=\"text-center p-4\" [attr.colspan]=\"9\">\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\n              <span *ngIf=\"!isLoading\">No Records Found</span>\n            </td>\n          </tr>\n        </ng-template>\n        <ng-template pTemplate=\"paginatorright\">\n          <p-button\n            type=\"button\"\n            (click)=\"dt.paginator=false\"\n            styleClass=\"p-button-text\"\n          >\n            All\n          </p-button>\n        </ng-template>\n      </p-table>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport {NavigationLink} from '../../../layout/navigation-route';\n\n@Component({\n  selector: 'pek-procurement-layout',\n  templateUrl: './procurement-layout.component.html',\n  styleUrls: ['./procurement-layout.component.scss']\n})\nexport class ProcurementLayoutComponent implements OnInit {\n\n  routes: NavigationLink[] = [\n    {label: 'Procurement Chains', commands: ['chains']},\n  ];\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n}\n","<pek-header\n  [module]=\"'Production Lists Procurement'\"\n  [routes]=\"routes\"\n  [settingsRoutes]=\"\"\n></pek-header>\n<router-outlet></router-outlet>\n","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute, Router} from '@angular/router';\nimport {map, switchMap, tap} from 'rxjs/operators';\nimport {takeUntil} from 'rxjs';\n\n@Component({\n  selector: 'pek-procurement-order-page',\n  templateUrl: './procurement-order-page.component.html',\n  styleUrls: ['./procurement-order-page.component.scss']\n})\nexport class ProcurementOrderPageComponent implements OnInit {\n  orderId: number;\n\n  constructor(\n    private readonly route: ActivatedRoute,\n  ) { }\n\n  ngOnInit(): void {\n    this.route.paramMap.pipe(\n      map(params => params.get('id')),\n      tap(id => this.orderId = +id),\n    ).subscribe()\n  }\n}\n","<div class=\"procurement-order-page\">\n  <div class=\"page\">\n    <div class=\"page__header\">\n      <div class=\"page__title\">\n        <pek-module-icon [module]=\"'manufacturing-procurement'\" [isActive]=\"true\"></pek-module-icon>\n        <h1>Order {{orderId}}</h1>\n      </div>\n      <div class=\"page__tools\">\n        <button\n          pButton\n          type=\"button\"\n          icon=\"pi pi-pencil\"\n          label=\"Order Files\"\n          class=\"mr-2\"\n        >\n        </button>\n        <button\n          pButton\n          type=\"button\"\n          icon=\"pi pi-pencil\"\n          label=\"Order Files\"\n        >\n        </button>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"page__content\">\n    <pek-order-page\n      [orderId]=\"orderId\"\n    ></pek-order-page>\n  </div>\n</div>\n","import {Component, EventEmitter, Input, OnInit, Output} from '@angular/core';\nimport {Subject, takeUntil} from 'rxjs';\nimport {Status} from '../../models/status';\nimport {StatusService} from '../../services/status.service';\n\n@Component({\n  selector: 'pek-statuses-picker',\n  templateUrl: './statuses-picker.component.html',\n  styleUrls: ['./statuses-picker.component.scss']\n})\nexport class StatusesPickerComponent implements OnInit {\n  @Output() selectStatuses: EventEmitter<number[]> = new EventEmitter<number[]>();\n  @Input() accountingType: number;\n\n  isLoading = true;\n  statuses: Status[] = [];\n  selectedStatuses: Status[] = [];\n\n  private destroy$ = new Subject();\n\n  constructor(\n    private readonly statusService: StatusService,\n  ) {\n  }\n\n  ngOnInit(): void {\n    this.statusService.get([\n      {name: 'accounting_type', value: this.accountingType}\n    ]).pipe(\n      takeUntil(this.destroy$)\n    ).subscribe(statuses => {\n      this.statuses = statuses;\n      this.isLoading = false;\n    });\n  }\n\n  onSelectStatuses(statuses: Status[]) {\n    if (statuses) {\n      this.selectStatuses.emit(statuses.map(s => s.id));\n    } else {\n      this.selectStatuses.emit(null);\n    }\n  }\n}\n","<div class=\"status-picker\">\n  <p-multiSelect\n    *ngIf=\"!isLoading; else spinner\"\n    [options]=\"statuses\"\n    [(ngModel)]=\"selectedStatuses\"\n    optionLabel=\"value\"\n    placeholder=\"Select Statuses\"\n    (ngModelChange)=\"onSelectStatuses($event)\"\n    [showClear]=\"true\"\n  ></p-multiSelect>\n\n  <ng-template #spinner>\n    <div class=\"spinner-input\">\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\n    </div>\n  </ng-template>\n</div>\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { ProcurementRouting } from './procurement.routing';\r\nimport { ChainsComponent } from './components/chains/chains.component';\r\nimport { ProcurementLayoutComponent } from './components/procurement-layout/procurement-layout.component';\r\nimport {LayoutModule} from '../layout/layout.module';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport { StatusesPickerComponent } from './pickers/statuses-picker/statuses-picker.component';\r\nimport {WarehouseModule} from '../warehouse/warehouse.module';\r\nimport { ProcurementOrderPageComponent } from './components/procurement-order-page/procurement-order-page.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ChainsComponent,\r\n    ProcurementLayoutComponent,\r\n    StatusesPickerComponent,\r\n    ProcurementOrderPageComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ProcurementRouting,\r\n    LayoutModule,\r\n    SharedModule,\r\n    WarehouseModule\r\n  ]\r\n})\r\nexport class ProcurementModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport {ProcurementLayoutComponent} from './components/procurement-layout/procurement-layout.component';\r\nimport {ChainsComponent} from './components/chains/chains.component';\r\nimport {ProcurementOrderPageComponent} from './components/procurement-order-page/procurement-order-page.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ProcurementLayoutComponent,\r\n    children: [\r\n      {path: '', redirectTo: 'chains', pathMatch: 'full'},\r\n      {\r\n        path: 'chains',\r\n        children: [\r\n          {path: '', title: 'Procurement Chains', component: ChainsComponent},\r\n          {path: 'order/:id', title: 'Procurement Order', component: ProcurementOrderPageComponent},\r\n        ]\r\n      },\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ProcurementRouting { }\r\n","import {Injectable} from '@angular/core';\nimport {environment} from '@env/environment';\nimport {HttpClient} from '@angular/common/http';\nimport {Observable} from 'rxjs';\nimport {QuerySearch} from '@shared/models/other';\nimport {map} from 'rxjs/operators';\nimport {Status} from '../models/status';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StatusService {\n  API_URL = environment.base_url + environment.procurement_url;\n  readonly url = 'statuses/';\n\n  constructor(\n    private httpClient: HttpClient\n  ) {\n  }\n\n  get(query?: QuerySearch[]): Observable<Status[]> {\n    let queryParams = '';\n\n    if (query) {\n      query.forEach((element, index) => {\n        if (index > 0) {\n          queryParams += '&' + element.name + '=' + element.value;\n        } else {\n          queryParams += '?' + element.name + '=' + element.value;\n        }\n      });\n    }\n\n    return this.httpClient.get<{ data: Status[] }>(this.API_URL + this.url + 'all/' + queryParams).pipe(\n      map(response => response.data)\n    );\n  }\n}\n"],"names":[],"sourceRoot":"webpack:///","x_google_ignoreList":[]}