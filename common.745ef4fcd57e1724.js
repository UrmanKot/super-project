"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[592],{4047:(m,c,o)=>{o.d(c,{c:()=>i});var i=(()=>{return(d=i||(i={})).INCOMING="0",d.OUTGOING="1",i;var d})()},5372:(m,c,o)=>{o.d(c,{v:()=>C});var i=o(4006),d=o(6319),g=o(5698),e=o(4650),_=o(2899);let C=(()=>{class l{constructor(t,a,r,n){this.fb=t,this.dialogRef=a,this.categoriesService=r,this.data=n,this.isSaving=!1,this.form=this.fb.group({name:["",i.kI.required],description:["",i.kI.required],type:[null],parent:[null]})}ngOnInit(){if(this.correspondentType=this.data.correspondentType,this.form.get("type").patchValue(this.correspondentType),"edit"===this.data.type){const t=this.data.category;this.form.addControl("id",new i.NI(t.id)),this.form.get("name").patchValue(t.name),this.form.get("description").patchValue(t.description),this.form.get("parent").patchValue(t.parent)}}onSelectCategory(t){t?this.form.get("parent").patchValue(t.id):this.form.get("parent").patchValue(null)}onSave(){"edit"===this.data.type?this.update():this.create()}create(){this.form.valid&&this.categoriesService.create(this.form.value).pipe((0,g.q)(1)).subscribe(t=>{this.dialogRef.close(t)})}update(){this.form.valid&&this.categoriesService.update(this.form.value).pipe((0,g.q)(1)).subscribe(t=>{this.dialogRef.close(t)})}}return l.\u0275fac=function(t){return new(t||l)(e.Y36(i.qu),e.Y36(d.so),e.Y36(_.n),e.Y36(d.WI))},l.\u0275cmp=e.Xpm({type:l,selectors:[["pek-create-edit-correspondnet-category"]],decls:21,vars:11,consts:[[1,"create-edit-product-structure-category"],[1,"modal-header"],[1,"modal-header__title"],[3,"formGroup"],[1,"form-group"],["for","name"],["type","text","id","name","pInputText","","formControlName","name"],["for","description"],["id","description","pInputTextarea","","formControlName","description",3,"rows","autoResize"],[3,"correspondentType","ignoredCategoryId","currentCategoryId","choiceCategory"],[1,"justify-content-between"],["pButton","","type","button","label","Cancel",1,"p-button-danger",3,"mat-dialog-close"],["pButton","","type","button",1,"p-button-success",3,"label","loading","disabled","click"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.qZA()(),e.TgZ(4,"mat-dialog-content")(5,"form",3)(6,"div",4)(7,"label",5),e._uU(8,"Name*"),e.qZA(),e._UZ(9,"input",6),e.qZA(),e.TgZ(10,"div",4)(11,"label",7),e._uU(12,"Description*"),e.qZA(),e._UZ(13,"textarea",8),e.qZA(),e.TgZ(14,"div",4)(15,"label"),e._uU(16,"Parent Category"),e.qZA(),e.TgZ(17,"pek-correspondnet-categories-picker",9),e.NdJ("choiceCategory",function(n){return a.onSelectCategory(n)}),e.qZA()()()(),e.TgZ(18,"mat-dialog-actions",10),e._UZ(19,"button",11),e.TgZ(20,"button",12),e.NdJ("click",function(){return a.onSave()}),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",a.data.type," Correspondents Category "),e.xp6(2),e.Q6J("formGroup",a.form),e.xp6(8),e.Q6J("rows",2)("autoResize",!0),e.xp6(4),e.Q6J("correspondentType",a.correspondentType)("ignoredCategoryId",null==a.data.category?null:a.data.category.id)("currentCategoryId",a.form.get("parent").value),e.xp6(2),e.Q6J("mat-dialog-close",!1),e.xp6(1),e.Q6J("label",a.data.type)("loading",a.isSaving)("disabled",a.form.invalid))},styles:[".create-edit-product-structure-category[_ngcontent-%COMP%]  .mat-dialog-content{overflow:initial!important}"]}),l})()},2899:(m,c,o)=>{o.d(c,{n:()=>h});var i=o(7579),d=o(4004),g=o(2340),e=o(5372),_=o(4650),C=o(529),l=o(6319);let h=(()=>{class t{constructor(r,n){this.httpClient=r,this.dialog=n,this.clearSelectedCategories$=new i.x,this.selectCategories$=new i.x,this.API_URL=g.N.base_url,this.url="correspondent/correspondents_categories/"}get(r){let n="";return r&&r.forEach((s,p)=>{n+=p>0?"&"+s.name+"="+s.value:"?"+s.name+"="+s.value}),this.httpClient.get(this.API_URL+this.url+n).pipe((0,d.U)(s=>{let p=s.data;return p.forEach(u=>{u.parent||(u.lft=u.tree_id)}),p=p.sort((u,f)=>u.lft-f.lft),p}))}getAll(r=1){return this.httpClient.get(this.API_URL+this.url+"?page="+r).pipe((0,d.U)(n=>n.data.results))}create(r){return this.httpClient.post(this.API_URL+this.url,r)}update(r){return this.httpClient.put(this.API_URL+this.url+r.id+"/",r)}delete(r){return this.httpClient.delete(this.API_URL+this.url+r.id+"/")}move(r,n){return this.httpClient.post(this.API_URL+this.url+r+"/move/",n).pipe((0,d.U)(s=>s))}createEditCategory(r,n,s){return this.dialog.open(e.v,{width:"42rem",height:"auto",panelClass:"modal-picker",data:{type:r,category:s,correspondentType:n},autoFocus:!1,enterAnimationDuration:"250ms"}).afterClosed()}}return t.\u0275fac=function(r){return new(r||t)(_.LFG(C.eN),_.LFG(l.uw))},t.\u0275prov=_.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);