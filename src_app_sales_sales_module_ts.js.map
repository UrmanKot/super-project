{"version":3,"file":"src_app_sales_sales_module_ts.js","mappings":"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","sources":["./src/app/sales/components/configs/nomenclature-price/nomenclature-price.component.ts","./src/app/sales/components/configs/nomenclature-price/nomenclature-price.component.html","./src/app/sales/components/regions/regions.component.ts","./src/app/sales/components/regions/regions.component.html","./src/app/sales/components/sales-chain-page/sales-chain-page.component.ts","./src/app/sales/components/sales-chain-page/sales-chain-page.component.html","./src/app/sales/components/sales-chains/sales-chains.component.ts","./src/app/sales/components/sales-chains/sales-chains.component.html","./src/app/sales/components/sales-layout/sales-layout.component.ts","./src/app/sales/components/sales-layout/sales-layout.component.html","./src/app/sales/components/sales-lists/sales-lists.component.ts","./src/app/sales/components/sales-lists/sales-lists.component.html","./src/app/sales/components/sales-prices/sales-prices.component.ts","./src/app/sales/components/sales-prices/sales-prices.component.html","./src/app/sales/components/sales-statuses/sales-statuses.component.ts","./src/app/sales/components/sales-statuses/sales-statuses.component.html","./src/app/sales/modals/create-edit-country/create-edit-country.component.ts","./src/app/sales/modals/create-edit-country/create-edit-country.component.html","./src/app/sales/modals/create-edit-region/create-edit-region.component.ts","./src/app/sales/modals/create-edit-region/create-edit-region.component.html","./src/app/sales/modals/create-edit-sub-region/create-edit-sub-region.component.ts","./src/app/sales/modals/create-edit-sub-region/create-edit-sub-region.component.html","./src/app/sales/modals/edit-event-modal/edit-event-modal.component.ts","./src/app/sales/modals/edit-event-modal/edit-event-modal.component.html","./src/app/sales/modals/edit-nomenclature-price-modal/edit-nomenclature-price-modal.component.ts","./src/app/sales/sales.module.ts","./src/app/sales/sales.routing.ts","./src/app/sales/services/country-region.service.ts","./src/app/sales/services/event-sales-chain.service.ts"],"sourcesContent":["import {AfterViewInit, Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {ENomenclatureType, Nomenclature} from '@shared/models/nomenclature';\r\nimport {fromEvent, Subject, Subscription, takeUntil} from 'rxjs';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\nimport {QuerySearch} from '@shared/models/other';\r\n\r\n@Component({\r\n  selector: 'pek-nomenclature-price',\r\n  templateUrl: './nomenclature-price.component.html',\r\n  styleUrls: ['./nomenclature-price.component.scss']\r\n})\r\nexport class NomenclaturePriceComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n\r\n  nomenclatureType = ENomenclatureType;\r\n\r\n  nomenclatures: Nomenclature[] = [];\r\n  selectedNomenclature: Nomenclature;\r\n\r\n  tableScrollHeight = '24.125rem';\r\n  isHideFilters = false;\r\n\r\n  isStartOnePage = false;\r\n  isShowAll = false;\r\n  isLoading = true;\r\n\r\n  count = 0;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    code: [null],\r\n    page: [1],\r\n    type_numbers: [null],\r\n    has_price: [null],\r\n  });\r\n\r\n  queryKey = 'name:null/code:null/type_numbers:null/has_price:null';\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n    {name: 'type_numbers', value: `${ENomenclatureType.MANUFACTURED},${ENomenclatureType.ASSEMBLY}`},\r\n    {name: 'paginated', value: true},\r\n    {name: 'order_by_price', value: true},\r\n  ];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedNomenclature = null),\r\n        map(() => this.searchBoxName.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchNomenclatures();\r\n    });\r\n\r\n    fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedNomenclature = null),\r\n        map(() => this.searchBoxCode.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchNomenclatures();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getNomenclaturesForPagination();\r\n  }\r\n\r\n  getNomenclaturesForPagination() {\r\n    this.nomenclatureService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatures = nomenclatures.results;\r\n      this.count = nomenclatures.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getNomenclatures() {\r\n    this.nomenclatureService.get(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatures = nomenclatures;\r\n\r\n      this.count = nomenclatures.length;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  searchNomenclatures() {\r\n    this.isLoading = true;\r\n    this.destroy$.next(true);\r\n    this.selectedNomenclature = null;\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}/type_numbers:${this.searchForm.get('type_numbers').value}/has_price:${this.searchForm.get('has_price').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'order_by_price', value: true},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: 'true'})\r\n      this.query.push({name: 'page', value: this.searchForm.get('page').value})\r\n    }\r\n\r\n    if (this.searchForm.get('name').value) {\r\n      this.query.push({name: 'name', value: this.searchForm.get('name').value})\r\n    }\r\n\r\n    if (this.searchForm.get('code').value) {\r\n      this.query.push({name: 'code', value: this.searchForm.get('code').value})\r\n    }\r\n\r\n    if (this.searchForm.get('has_price').value !== null) {\r\n      this.query.push({name: 'has_price', value: this.searchForm.get('has_price').value})\r\n    }\r\n\r\n    if (this.searchForm.get('type_numbers').value !== null) {\r\n      this.query.push({name: 'type_numbers', value: this.searchForm.get('type_numbers').value})\r\n    } else {\r\n      this.query.push({name: 'type_numbers', value: `${ENomenclatureType.MANUFACTURED},${ENomenclatureType.ASSEMBLY}`})\r\n    }\r\n\r\n    if (!this.isShowAll) {\r\n      this.getNomenclaturesForPagination();\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.getNomenclatures();\r\n    }\r\n  }\r\n\r\n  toggleFilterVisibility() {\r\n    this.isHideFilters = !this.isHideFilters;\r\n    this.setTableScrollHeight();\r\n  }\r\n\r\n  setTableScrollHeight() {\r\n    if (this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '20.875rem';\r\n      return;\r\n    }\r\n\r\n    if (this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '18.75rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '21.875rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '24.125rem';\r\n      return;\r\n    }\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.setTableScrollHeight();\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.setTableScrollHeight();\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchNomenclatures();\r\n    }\r\n  }\r\n\r\n  onChoiceNomenclatureType(type: ENomenclatureType) {\r\n    this.searchForm.get('type_numbers').patchValue(type);\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Nomenclature Price</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n      <div class=\"filters-visibility__header\">\r\n        <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n      </div>\r\n\r\n      <button\r\n        class=\"icon pi\"\r\n        [class.pi-angle-double-up]=\"!isHideFilters\"\r\n        [class.pi-angle-double-down]=\"isHideFilters\"\r\n        (click)=\"toggleFilterVisibility()\"\r\n        [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n        tooltipPosition=\"left\"\r\n      ></button>\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Code</label>\r\n              <input class=\"form-control\" formControlName=\"code\" pInputText #searchBoxCode>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Name</label>\r\n              <input class=\"form-control\" formControlName=\"name\" pInputText #searchBoxName>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Type</label>\r\n              <pek-nomenclature-type-picker\r\n                (choiceNomenclatureType)=\"onChoiceNomenclatureType($event)\"\r\n                [filteredNomenclatureTypes]=\"[nomenclatureType.MANUFACTURED, nomenclatureType.ASSEMBLY]\">\r\n              </pek-nomenclature-type-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <div class=\"actions\">\r\n                <div class=\"checkbox mr-auto\">\r\n                  <p-checkbox\r\n                    label=\"Has Price?\"\r\n                    [binary]=\"true\"\r\n                    formControlName=\"has_price\"\r\n                    (ngModelChange)=\"searchNomenclatures()\"\r\n                  ></p-checkbox>\r\n                </div>\r\n                <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        rowExpandMode=\"single\"\r\n        [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n        [scrollable]=\"true\"\r\n        dataKey=\"id\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedNomenclature\"\r\n        [value]=\"nomenclatures\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 20%\">Code</th>\r\n            <th style=\"width: 20%\">Name</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Price</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"nomenclature\">\r\n            <td style=\"width: 5%\" class=\"text-center\">{{(this.searchForm.get('page').value - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 20%\">{{nomenclature.code}}</td>\r\n            <td style=\"width: 20%\">{{nomenclature.name}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{nomenclature.price | number:'1.2-2'}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"paginator-wrapper\"\r\n      *ngIf=\"!isShowAll\"\r\n      [class.paginator-wrapper_hide]=\"nomenclatures.length === 0\"\r\n    >\r\n      <p-paginator\r\n        #paginator\r\n        [rows]=\"10\"\r\n        [totalRecords]=\"count\"\r\n        (onPageChange)=\"paginate($event)\"\r\n      >\r\n      </p-paginator>\r\n      <p-button\r\n        (click)=\"onShowAll()\"\r\n        class=\"paginator-all\"\r\n        type=\"button\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        All\r\n      </p-button>\r\n    </div>\r\n\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowPartial()\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #actionButtons>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      icon=\"pi pi-pencil\"\r\n      label=\"Edit Price\"\r\n      class=\"p-button-icon ml-auto\"\r\n      [disabled]=\"!selectedNomenclature\"\r\n    ></button>\r\n</ng-template>\r\n","import {Component, OnDestroy, OnInit} from '@angular/core';\r\nimport {MenuItem, TreeNode} from 'primeng/api';\r\nimport {RegionService} from '@shared/services/region.service';\r\nimport {CountryService} from '@shared/services/country.service';\r\nimport {forkJoin, Subject, takeUntil} from 'rxjs';\r\nimport {Region} from '@shared/models/region';\r\nimport {Country} from '@shared/models/country';\r\nimport {CountryRegionService} from '../../services/country-region.service';\r\nimport {SubRegionService} from '@shared/services/sub-region.service';\r\nimport {SubRegion} from '@shared/models/sub-region';\r\nimport {take} from 'rxjs/operators';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-regions',\r\n  templateUrl: './regions.component.html',\r\n  styleUrls: ['./regions.component.scss']\r\n})\r\nexport class RegionsComponent implements OnInit, OnDestroy {\r\n\r\n  tree: TreeNode[] = [];\r\n  selected: TreeNode;\r\n\r\n  regions: Region[] = [];\r\n  countries: Country[] = [];\r\n  subRegions: SubRegion[] = [];\r\n  expanseMapCountry = {};\r\n  expanseMapRegion = {};\r\n  expanseMapSubRegion = {};\r\n\r\n  isLoading = true;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  menuItemsCountry: MenuItem[] = [{\r\n    label: 'Selected Country',\r\n    items: [\r\n      {\r\n        label: 'Edit Country',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.editCountry()\r\n      },\r\n      {\r\n        label: 'Add Region',\r\n        icon: 'pi pi-plus',\r\n        command: () => this.addRegion()\r\n      },\r\n      {\r\n        label: 'Remove Country',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.deleteCountry()\r\n      },\r\n    ]\r\n  }];\r\n\r\n  menuItemsRegion: MenuItem[] = [{\r\n    label: 'Selected Region',\r\n    items: [\r\n      {\r\n        label: 'Edit Region',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.editRegion()\r\n      },\r\n      {\r\n        label: 'Add Sub Region',\r\n        icon: 'pi pi-plus',\r\n        command: () => this.addSubRegion()\r\n      },\r\n      {\r\n        label: 'Remove Region',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.deleteRegion()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  menuItemsSubRegion: MenuItem[] = [{\r\n    label: 'Selected Region',\r\n    items: [\r\n      {\r\n        label: 'Edit Sub Region',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.editSubRegion()\r\n      },\r\n      {\r\n        label: 'Remove Sub Region',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.deleteSubRegion()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  constructor(\r\n    private readonly regionService: RegionService,\r\n    private readonly countryService: CountryService,\r\n    private readonly subRegionService: SubRegionService,\r\n    private countryRegionService: CountryRegionService,\r\n    private modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.loadInfo();\r\n  }\r\n\r\n  loadInfo() {\r\n    this.isLoading = true;\r\n    this.selected = null;\r\n    this.tree = [];\r\n    forkJoin({\r\n      regions: this.regionService.get(),\r\n      countries: this.countryService.get(),\r\n      subRegion: this.subRegionService.get(),\r\n    }).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(({regions, countries, subRegion}) => {\r\n      this.regions = regions;\r\n      this.countries = countries;\r\n      this.subRegions = subRegion;\r\n\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.tree) {\r\n      this.mapExpansion();\r\n    }\r\n    const tree = [];\r\n    let expanded = false;\r\n    if (this.expanseMapCountry) {\r\n      expanded = this.expanseMapCountry[9_000_000];\r\n    }\r\n    tree.push({\r\n      data: {country: {name: 'Not Country', id: 9_000_000}},\r\n      expanded: expanded,\r\n      children: this.regions.filter(r => !r.country).map(region => {\r\n        let expanded = false;\r\n        if (this.expanseMapRegion) {\r\n          expanded = this.expanseMapRegion[region.id];\r\n        }\r\n        return {\r\n          data: {region: region},\r\n          expanded: expanded,\r\n          children: [],\r\n        };\r\n      })\r\n    });\r\n\r\n    this.countries.forEach(country => {\r\n      let expanded = false;\r\n      if (this.expanseMapCountry) {\r\n        expanded = this.expanseMapCountry[country.id];\r\n      }\r\n      tree.push({\r\n        data: {country: country},\r\n        expanded: expanded,\r\n        children: this.regions.filter(r => r.country).filter(r => (r.country as Country).id === country.id).map(region => {\r\n          let expanded = false;\r\n          if (this.expanseMapRegion) {\r\n            expanded = this.expanseMapRegion[region.id];\r\n          }\r\n          return {\r\n            data: {region: region},\r\n            expanded: expanded,\r\n            children: [],\r\n          };\r\n        })\r\n      });\r\n    });\r\n    tree.forEach(node => {\r\n      node.children.forEach(child => {\r\n        const regionSubRegions = this.subRegions.filter(el => el.region === child.data.region.id);\r\n\r\n        if (regionSubRegions.length > 0) {\r\n          child.children.push(\r\n            ...regionSubRegions.map(subRegion => {\r\n              let expanded = false;\r\n              if (this.expanseMapCountry) {\r\n                expanded = this.expanseMapSubRegion[subRegion.id];\r\n              }\r\n              return {\r\n                data: {subRegion: subRegion, countryRegionId: child.data.region.country.id},\r\n                children: [],\r\n                expanded: expanded,\r\n                parent: child\r\n              };\r\n            })\r\n          );\r\n        }\r\n      });\r\n    });\r\n    this.tree = tree.map(n => n);\r\n  }\r\n\r\n  mapExpansion() {\r\n    this.tree.forEach(element => {\r\n      this.createExpanseMap(element);\r\n    });\r\n  }\r\n\r\n  createExpanseMap(node) {\r\n    if (node.expanded) {\r\n      if (node.data.country) {\r\n        this.expanseMapCountry[node.data.country.id] = node.expanded;\r\n      } else if (node.data.region) {\r\n        this.expanseMapRegion[node.data.region.id] = node.expanded;\r\n      } else if (node.data.subRegion) {\r\n        this.expanseMapSubRegion[node.data.subRegion.id] = node.expanded;\r\n      }\r\n    } else {\r\n      if (node.data.country) {\r\n        this.expanseMapCountry[node.data.country.id] = false;\r\n      } else if (node.data.region) {\r\n        this.expanseMapRegion[node.data.region.id] = false;\r\n      } else if (node.data.subRegion) {\r\n        this.expanseMapSubRegion[node.data.subRegion.id] = false;\r\n      }\r\n    }\r\n    if (node.children) {\r\n      node.children.forEach(element => {\r\n        this.createExpanseMap(element);\r\n      });\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  createCountry() {\r\n    this.countryRegionService.createEditCountryModal().subscribe(res => {\r\n      if (res) {\r\n        this.loadInfo();\r\n      }\r\n    });\r\n  }\r\n\r\n  private editCountry() {\r\n    this.countryRegionService.createEditCountryModal(this.selected.data.country).subscribe(res => {\r\n      if (res) {\r\n        this.loadInfo();\r\n      }\r\n    });\r\n  }\r\n\r\n  private deleteCountry() {\r\n    this.modalService\r\n      .confirm('danger', 'Confirm')\r\n      .pipe(take(1), takeUntil(this.destroy$))\r\n      .subscribe((confirm) => {\r\n        if (confirm) {\r\n          this.countryService.delete(this.selected.data.country).subscribe(res => {\r\n            this.loadInfo();\r\n          });\r\n        }\r\n      });\r\n\r\n  }\r\n\r\n  private editRegion() {\r\n    this.countryRegionService.createEditRegionModal(this.selected.data.region).subscribe(res => {\r\n      if (res) {\r\n        this.loadInfo();\r\n      }\r\n    });\r\n  }\r\n\r\n  private deleteRegion() {\r\n    this.modalService\r\n      .confirm('danger', 'Confirm')\r\n      .pipe(take(1), takeUntil(this.destroy$))\r\n      .subscribe((confirm) => {\r\n        if (confirm) {\r\n          this.regionService.delete(this.selected.data.region).subscribe(res => {\r\n            this.loadInfo();\r\n          });\r\n        }\r\n      });\r\n\r\n  }\r\n\r\n  private addRegion() {\r\n    this.countryRegionService.createEditRegionModal(null, this.selected.data.country.id).subscribe(res => {\r\n      if (res) {\r\n        this.loadInfo();\r\n      }\r\n    });\r\n  }\r\n\r\n  private addSubRegion() {\r\n    this.countryRegionService.createEditSubRegionModal(this.selected.data.region.country?.id, null, this.selected.data.region.id).subscribe(res => {\r\n      if (res) {\r\n        this.loadInfo();\r\n      }\r\n    });\r\n  }\r\n\r\n  private editSubRegion() {\r\n    this.countryRegionService.createEditSubRegionModal(this.selected.data.countryRegionId, this.selected.data.subRegion, this.selected.data.subRegion.region).subscribe(res => {\r\n      if (res) {\r\n        this.loadInfo();\r\n      }\r\n    });\r\n  }\r\n\r\n  private deleteSubRegion() {\r\n    this.modalService\r\n      .confirm('danger', 'Confirm')\r\n      .pipe(take(1), takeUntil(this.destroy$))\r\n      .subscribe((confirm) => {\r\n        if (confirm) {\r\n          this.subRegionService.delete(this.selected.data.subRegion).subscribe(res => {\r\n            this.loadInfo();\r\n          });\r\n        }\r\n      });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Countries & Regions</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Create Country\"\r\n        (click)=\"createCountry()\"\r\n      >\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-treeTable\r\n        [value]=\"tree\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selected\"\r\n        [scrollable]=\"true\"\r\n\r\n        scrollHeight=\"calc(100vh - 19.2rem)\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"action-buttons\">\r\n            <p-menubar\r\n              *ngIf=\"selected && selected.data.region\"\r\n              class=\"ml-auto\"\r\n              [model]=\"menuItemsRegion\"\r\n              [class.disabled]=\"!selected\"></p-menubar>\r\n            <p-menubar\r\n              *ngIf=\"selected && selected.data.country\"\r\n              class=\"ml-auto\"\r\n              [model]=\"menuItemsCountry\"\r\n              [class.disabled]=\"!selected\"></p-menubar>\r\n            <p-menubar\r\n              *ngIf=\"selected && selected.data.subRegion\"\r\n              class=\"ml-auto\"\r\n              [model]=\"menuItemsSubRegion\"\r\n              [class.disabled]=\"!selected\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"padding-left: 52px; width: 60%\">Name</th>\r\n            <th style=\"width: 40%\">Code</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n          <tr [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\">\r\n            <td style=\"width: 60%\">\r\n              <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n              {{rowData.region?.name}}\r\n              {{rowData.country?.name}}\r\n              {{rowData.subRegion?.name}}\r\n            </td>\r\n            <td style=\"width: 40%\">\r\n              <ng-container>\r\n                {{rowData.country?.alpha2_code}}\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-treeTable>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {EventCompany} from \"../../../crm/models/event-company\";\r\nimport {SalesActivity, SalesChain, SalesFile, SalesReservation} from \"../../models/sales-chain\";\r\nimport {environment} from '@env/environment';\r\nimport {CompanyService} from \"../../../crm/services/company.service\";\r\nimport {finalize, map, tap} from \"rxjs/operators\";\r\nimport {Subject} from \"rxjs\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\nimport {InvoiceService} from \"../../../procurement/services/invoice.service\";\r\nimport {Invoice} from \"../../../procurement/models/invoice\";\r\nimport {SalesChainService} from \"../../services/sales-chain-service\";\r\nimport {SalesStatusService} from \"../../services/sales-status.service\";\r\nimport {MenuItem} from \"primeng/api\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {EventSalesChainService} from \"../../services/event-sales-chain.service\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {SalesFileService} from \"../../services/sales-file.service\";\r\nimport {DeliveryChainService} from \"../../../warehouse/services/delivery-chain.service\";\r\n\r\n@Component({\r\n  selector: 'pek-sales-chain-page',\r\n  templateUrl: './sales-chain-page.component.html',\r\n  styleUrls: ['./sales-chain-page.component.scss']\r\n})\r\nexport class SalesChainPageComponent implements OnInit {\r\n  isLoading = true;\r\n  saleChain: SalesChain;\r\n  selectedEvent: EventCompany;\r\n  statuses = {'0': 'Not Processed', '1': 'Completed', '2': 'Deficit', '3': 'Reserved'};\r\n  isLoadingReservation = true;\r\n\r\n  isCreatingOffer = false;\r\n  isCreateingDelivery = false;\r\n\r\n  isLoadingActivities = true;\r\n  isActivities = true;\r\n  isLoadingFiles = false;\r\n\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  invoices: Invoice[] = [];\r\n\r\n  offers: any[] = [];\r\n  selectedOffer: any = null;\r\n  isLoadingOffers = true;\r\n\r\n  destroy$ = new Subject();\r\n\r\n  saleChainId: number;\r\n\r\n  selectedSalesReservation: SalesReservation;\r\n\r\n  salesReservation: SalesReservation[] = [];\r\n  salesActivities: SalesActivity[] = [];\r\n\r\n  environment = environment;\r\n\r\n  files: SalesFile[] = []\r\n  selectedFile: SalesFile;\r\n\r\n  salesChainEvents: MenuItem[] = [{\r\n    label: 'Selected Event',\r\n    items: [\r\n      {\r\n        label: 'Confirm',\r\n        icon: 'pi pi-check',\r\n        command: () => this.onConfirmEvent(),\r\n        disabled: true\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditEvent()\r\n      },\r\n      {\r\n        label: 'Delete',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onDeleteEvent()\r\n      },\r\n\r\n    ]\r\n  }];\r\n\r\n  products: MenuItem[] = [{\r\n    label: 'Selected Product',\r\n    items: [\r\n      {\r\n        label: 'Delete',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onDeleteProduct()\r\n      }\r\n    ]\r\n  }]\r\n\r\n  offersMenu: MenuItem[] = [{\r\n    label: 'Selected Offer',\r\n    items: [\r\n      {\r\n        label: 'Generate PDF (BACKEND)',\r\n        icon: 'pi pi-file-pdf',\r\n        command: () => this.generatePdf()\r\n      },\r\n      {\r\n        label: 'Confirm Offer',\r\n        icon: 'pi pi-check',\r\n        command: () => this.confirmOffer()\r\n      },\r\n      {\r\n        label: 'Edit Prices',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.editOfferPrices()\r\n      },\r\n      {\r\n        label: 'Download (BACKEND)',\r\n        icon: 'pi pi-download',\r\n      },\r\n      {\r\n        label: 'Delete',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onDeleteOffer()\r\n      }\r\n    ]\r\n  }]\r\n\r\n  constructor(\r\n    private companyService: CompanyService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private invoiceService: InvoiceService,\r\n    private salesChainService: SalesChainService,\r\n    private salesStatus: SalesStatusService,\r\n    private modalService: ModalService,\r\n    private eventSalesChainService: EventSalesChainService,\r\n    private adapterService: AdapterService,\r\n    private salesFileService: SalesFileService,\r\n    private deliveryService: DeliveryChainService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.saleChainId = +id),\r\n    ).subscribe();\r\n\r\n    this.getAll()\r\n  }\r\n\r\n  getChain() {\r\n    if (this.isActivities) {\r\n      this.isLoadingActivities = true;\r\n      this.selectedEvent = null;\r\n      this.salesActivities = [];\r\n      this.isActivities = false;\r\n    }\r\n\r\n    this.salesChainService.getById(this.saleChainId).subscribe(saleChain => {\r\n      this.saleChain = saleChain;\r\n\r\n      this.salesActivities = saleChain.activities;\r\n      this.salesActivities.sort((a, b) => {\r\n        const dateA = new Date(a.event.start);\r\n        const dateB = new Date(b.event.start);\r\n        // @ts-ignore\r\n        return (dateB - dateA);\r\n      });\r\n      this.isLoading = false;\r\n      this.isLoadingActivities = false;\r\n    })\r\n  }\r\n\r\n  getAll() {\r\n    this.getChain();\r\n    this.getReservation()\r\n    this.getOffers()\r\n    this.getAllFile()\r\n  }\r\n\r\n  getName(name) {\r\n    let name_arr = name.split('/');\r\n    return name_arr[name_arr.length - 1];\r\n  }\r\n\r\n  getReservation() {\r\n    this.isLoadingReservation = true;\r\n    this.selectedSalesReservation = null;\r\n    this.salesReservation = [];\r\n    this.salesChainService.getReservation(this.saleChainId).subscribe(salesReservation => {\r\n      // @ts-ignore\r\n      this.salesReservation = salesReservation\r\n      this.isLoadingReservation = false;\r\n    })\r\n  }\r\n\r\n  getOffers(): void {\r\n    this.isLoadingOffers = true;\r\n    this.offers = [];\r\n    this.selectedOffer = null;\r\n    this.salesChainService.getOffers(this.saleChainId)\r\n      .subscribe(res => {\r\n        this.offers = res;\r\n        this.isLoadingOffers = false;\r\n      });\r\n  }\r\n\r\n  onEditEvent() {\r\n    this.eventSalesChainService.editCompanyToEvent(this.selectedEvent).subscribe(() => {\r\n      this.isActivities = true;\r\n      this.getChain()\r\n    })\r\n  }\r\n\r\n  editChainStatus() {\r\n    this.salesChainService.editSalesChainStatus(this.saleChain).subscribe(res => {\r\n      if (res) {\r\n        this.getChain()\r\n      }\r\n    })\r\n  }\r\n\r\n  onConfirmEvent() {\r\n    this.modalService.confirm('success')\r\n      .subscribe(confirm => {\r\n          if (confirm) {\r\n            this.eventSalesChainService.updateEvent(this.selectedEvent.id, {is_done: true} as EventCompany).subscribe(() => {\r\n              this.isActivities = true;\r\n              this.getChain()\r\n            })\r\n          }\r\n        }\r\n      )\r\n  }\r\n\r\n  onDeleteEvent() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.eventSalesChainService.deleteEvent(this.selectedEvent).subscribe(() => {\r\n          this.salesActivities = this.salesActivities.filter(a => a.id !== this.selectedEvent.id)\r\n          this.selectedEvent = null;\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  onSelectedEvent() {\r\n    if (this.selectedEvent) {\r\n      this.salesChainEvents[0].items[0].disabled = this.selectedEvent.is_done !== false\r\n    }\r\n  }\r\n\r\n  onDeleteProduct() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.salesChainService.deleteProduct(this.selectedSalesReservation.id).subscribe(() => {\r\n          this.getReservation();\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  onAddProduct() {\r\n    this.salesChainService.createChoiceProduct(this.selectedSalesReservation).subscribe()\r\n  }\r\n\r\n  getAllFile() {\r\n    this.isLoadingFiles = true;\r\n    this.files = [];\r\n    this.salesChainService.getFile().subscribe(files => {\r\n      this.files = files;\r\n      this.isLoadingFiles = false;\r\n    })\r\n  }\r\n\r\n  getFileName(file: string) {\r\n    let name = file.split('/');\r\n    return name[name.length - 1];\r\n  }\r\n\r\n  onAddFile() {\r\n    this.salesChainService.createSalesFileModal(this.saleChainId).subscribe(file => {\r\n      if (file) {\r\n        this.getAllFile();\r\n      }\r\n    })\r\n  }\r\n\r\n  onDownloadFile(file: SalesFile) {\r\n    this.addition.add(file.id)\r\n    this.salesChainService.downloadFile(file).subscribe(response => {\r\n      console.log(response)\r\n      const filename = this.getFileName(file.file)\r\n      this.adapterService.downloadFile(filename, response)\r\n      this.addition.clear()\r\n    })\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.deletion.add(id)\r\n\r\n        this.salesFileService.remove(id).subscribe(() => {\r\n          this.files = this.files.filter(i => i.id != id)\r\n          this.deletion.clear()\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  hasConfirmedOffer() {\r\n    return this.offers.some(value => value.is_confirmed);\r\n  }\r\n\r\n  onDeleteOffer() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.salesChainService.deleteOffer(this.saleChainId, this.selectedOffer.id).subscribe(() => {\r\n          this.getOffers();\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  onGenerateOffer() {\r\n    this.salesChainService.getGenerateOffer(this.saleChainId).subscribe(res => {\r\n      console.log(res)\r\n    })\r\n  }\r\n\r\n  generateOffer() {\r\n    this.isCreatingOffer = true;\r\n    this.salesChainService.generateOffer(this.saleChainId)\r\n      .pipe(\r\n        finalize(() => this.isCreatingOffer = false)\r\n      ).subscribe(res => {\r\n      this.getOffers();\r\n    });\r\n  }\r\n\r\n  onSelectOffer() {\r\n    this.offersMenu[0].items[0].disabled = this.selectedOffer && !this.selectedOffer.is_confirmed;\r\n    this.offersMenu[0].items[1].disabled = this.selectedOffer && this.selectedOffer.is_confirmed;\r\n  }\r\n\r\n  private generatePdf() {\r\n  }\r\n\r\n  confirmOffer() {\r\n    this.salesChainService.confirmOffer(this.selectedOffer.id)\r\n      .subscribe(res => {\r\n        this.getOffers();\r\n      });\r\n  }\r\n\r\n  createDeliveryChain() {\r\n    this.modalService.confirm('success').subscribe(res => {\r\n      if (res) {\r\n        this.isCreateingDelivery = true;\r\n        const data = {\r\n          sales_chain_id: Number(this.saleChainId),\r\n          status: {\r\n            id: 1,\r\n            name: 'new',\r\n          },\r\n        };\r\n        this.deliveryService.create(data).pipe(\r\n          finalize(() => this.isCreateingDelivery = false)\r\n        ).subscribe(res => {\r\n          this.getChain()\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  editOfferPrices() {\r\n    this.salesChainService.editOfferPriceDialog(this.selectedOffer, this.saleChainId).subscribe(res => {\r\n      if (res) {\r\n        this.getOffers();\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div class=\"company-page\">\r\n  <div class=\"page\">\r\n    <div class=\"page__header\">\r\n      <div class=\"page__title\">\r\n        <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n        <h1>Chain Card</h1>\r\n      </div>\r\n      <div class=\"page__tools\">\r\n        <a\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-angle-double-right\"\r\n          label=\"Company Card\"\r\n          [routerLink]=\"['/crm/business-partners/company-page', saleChain?.company?.id]\"\r\n          target=\"_blank\"\r\n          [class.disabled]=\"!saleChain?.company?.id\"\r\n          class=\"mr-2\"\r\n        >\r\n        </a>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          class=\"p-button-icon mr-2\"\r\n          icon=\"pi pi-pencil\"\r\n          label=\"Edit Status\"\r\n          [disabled]=\"isLoading\"\r\n          (click)=\"editChainStatus()\"\r\n        >\r\n        </button>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          class=\"p-button-icon\"\r\n          icon=\"pi pi-plus\"\r\n          (click)=\"createDeliveryChain()\"\r\n          label=\" Create Delivery Chain\"\r\n          [disabled]=\"isLoading || saleChain?.delivery_chain?.id\"\r\n          [loading]=\"isCreateingDelivery\"\r\n        >\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <h2 class=\"mb-4\">Chain Information</h2>\r\n\r\n    <div class=\"page__card company-information-card mb-4\">\r\n      <div class=\"company-information\" *ngIf=\"!isLoading else infoLoading\">\r\n        <div class=\"row\">\r\n          <div class=\"col-md-5\">\r\n\r\n            <h4>Company Name: <span>{{saleChain.company.name }}</span></h4>\r\n            <h4>Address: <span>{{ saleChain.company.address }}</span></h4>\r\n            <h4>Email: <span>{{ saleChain.company.email }}</span></h4>\r\n            <h4>Phone Number: <span>{{saleChain.company.phone_number }}</span></h4>\r\n            <h4>Website:\r\n              <span>\r\n                <a [href]=\"saleChain.company.website\" target=\"_blank\">{{saleChain.company.website}}</a>\r\n                </span>\r\n            </h4>\r\n            <h4>Tax Number: <span>{{saleChain.company.tax_number }}</span></h4>\r\n            <h4>Register Number: <span>{{saleChain.company.registration_number }}</span></h4>\r\n          </div>\r\n          <div class=\"col-md-7\">\r\n            <h4>Nomenclature: <span>{{ saleChain.company.supplier_nomenclature }}</span></h4>\r\n            <h4>Description <span>{{ saleChain.company.comment }}</span></h4>\r\n            <h4>\r\n              Country:\r\n              <span *ngIf=\"saleChain.company?.country\">{{saleChain.company?.country?.name}}</span>\r\n            </h4>\r\n            <h4>\r\n              Region:\r\n              <span *ngIf=\"saleChain.company?.region\">{{saleChain.company?.region?.name}}</span>\r\n            </h4>\r\n            <h4>\r\n              Status:\r\n              <span>{{saleChain.chain_status?.status.name}}\r\n                : {{saleChain.chain_status?.date | date:'dd/MM/yyyy'}} </span>\r\n            </h4>\r\n            <h4>Comment: <span>{{saleChain.company.comment }}</span></h4>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Events</h2>\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #dt\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"salesActivities.length > 0\"\r\n          [rows]=\"10\"\r\n          [value]=\"salesActivities\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedEvent\"\r\n          (selectionChange)=\"onSelectedEvent()\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedEvent\">Choose the Event to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto\"\r\n                [model]=\"salesChainEvents\"\r\n                [class.disabled]=\"!selectedEvent\">\r\n\r\n              </p-menubar>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n              <th style=\"width: 15%\">Event Name</th>\r\n              <th pSortableColumn=\"event.start\" style=\"width: 12%\">\r\n                Event Start\r\n                <p-sortIcon field=\"event.start\">\r\n                </p-sortIcon>\r\n              </th>\r\n              <th pSortableColumn=\"event.end\" style=\"width: 12%\">\r\n                Event End\r\n                <p-sortIcon field=\"event.end\">\r\n                </p-sortIcon>\r\n              </th>\r\n              <th style=\"width: 20%\">Event Description</th>\r\n              <th style=\"width: 11%\">Employee</th>\r\n              <th style=\"width: 15%\">Event Comment</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Is Done</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-activity let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"activity\">\r\n              <td style=\"width: 5%\" class=\"text-center\">{{ i + 1 }}</td>\r\n              <td style=\"width: 15%\">\r\n                {{ activity.event.event_type.name }}\r\n              </td>\r\n\r\n              <td\r\n                style=\"width: 12%\"\r\n              >\r\n                <a [routerLink]=\"[\r\n                    '/crm/events/',\r\n                    activity.event.id\r\n                  ]\">\r\n                  {{ activity.event.start | date: \"dd/MM/yyyy, HH:mm\" }}\r\n                </a>\r\n              </td>\r\n              <td style=\"width: 12%\">\r\n                {{ activity.event.end | date: \"dd/MM/yyyy, HH:mm\" }}\r\n              </td>\r\n              <td style=\"width: 20%\">\r\n                {{ activity.event.description }}\r\n              </td>\r\n\r\n              <td style=\"width: 11%\">\r\n                <ng-container *ngIf=\"activity.event.employee.length === 0\"\r\n                >Not Related\r\n                </ng-container>\r\n\r\n                <ng-container *ngIf=\"activity.event.employee.length > 0\">\r\n                    <span *ngFor=\"let employee of activity.event.employee\">\r\n                      {{ employee.first_name + \" \" + employee.last_name }} <br>\r\n                    </span>\r\n                </ng-container>\r\n              </td>\r\n\r\n              <td style=\"width: 15%\">\r\n                {{ activity.comment }}\r\n              </td>\r\n\r\n              <td class=\"text-center\" style=\"width: 10%\">\r\n                <div class=\"icons\">\r\n                  <i class=\"pi pi-check text-success\" *ngIf=\"activity.is_done; else notGrouped\"></i>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"8\">\r\n                <i *ngIf=\"isLoadingActivities\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingActivities\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"dt.paginator = false; dt.scrollable = true\"\r\n              pTooltip=\"Remove Pagination\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button\r\n            >\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!dt.paginator && !isLoadingActivities && salesActivities.length > 0\"\r\n           class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"dt.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"header d-flex align-items-center justify-content-between mb-4\">\r\n      <h2>Products</h2>\r\n      <div class=\"page__tools\">\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-plus\"\r\n          label=\"Create Offer\"\r\n          class=\"mr-2 p-button-icon\"\r\n          (click)=\"generateOffer()\"\r\n          [disabled]=\"isLoadingReservation || salesReservation?.length === 0\"\r\n          [loading]=\"isCreatingOffer\"\r\n        >\r\n        </button>\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          class=\"p-button-icon\"\r\n          icon=\"pi pi-plus\"\r\n          label=\"Add Product\"\r\n          [disabled]=\"hasConfirmedOffer() || isLoadingReservation || isLoadingOffers\"\r\n          (click)=\"onAddProduct()\"\r\n        >\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n          <p-table\r\n            #st\r\n            [scrollable]=\"true\"\r\n            [value]=\"salesReservation\"\r\n            [(selection)]=\"selectedSalesReservation\"\r\n            selectionMode=\"single\"\r\n            [rows]=\"10\"\r\n            [paginator]=\"!isLoadingReservation && salesReservation.length > 0\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex\">\r\n                <p class=\"subtitle\" *ngIf=\"!selectedSalesReservation\">Choose the Product to edit</p>\r\n                <p-menubar\r\n                  class=\"ml-auto\"\r\n                  [model]=\"products\"\r\n                  [class.disabled]=\"!selectedSalesReservation\">\r\n                </p-menubar>\r\n              </div>\r\n            </ng-template>\r\n\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Created</th>\r\n                <th style=\"width: 20%\">Name</th>\r\n                <th style=\"width: 15%\">Code</th>\r\n                <th style=\"width: 15%\">Serial number</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Delivery Date</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Status</th>\r\n                <th style=\"width: 10%\" class=\"text-center\">Price</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-reservation let-rowIndex=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"reservation\">\r\n                <td style=\"width: 5%\" class=\"text-center\">{{rowIndex + 1}}</td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  {{reservation.created_at | date: 'dd/MM/yyyy'}}\r\n                </td>\r\n                <td style=\"width: 20%\">\r\n                  <ng-container *ngIf=\"reservation.nomenclature\">\r\n                    {{reservation.nomenclature.name}}\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"reservation.warehouse_product\">\r\n                    {{reservation.warehouse_product.nomenclature.name}}\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"reservation.list_product\">\r\n                    {{reservation.list_product.nomenclature.name}}\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 15%\">\r\n                  <ng-container *ngIf=\"reservation.nomenclature\">\r\n                    {{reservation.nomenclature.code}}\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"reservation.warehouse_product\">\r\n                    {{reservation.warehouse_product.nomenclature.code}}\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"reservation.list_product\">\r\n                    {{reservation.list_product.nomenclature.code}}\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 15%\" class=\"\">\r\n                  <h4 class=\"title-hidden\">Serial Number</h4>\r\n                  <ng-container *ngIf=\"reservation.warehouse_product\">\r\n                    {{reservation.warehouse_product.serial_number?.type_with_number ?\r\n                    reservation.warehouse_product.serial_number?.type_with_number :\r\n                    reservation.warehouse_product.serial_number?.id}}\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <h4 class=\"title-hidden\">Delivery date</h4>\r\n                  <div *ngIf=\"reservation.warehouse_product; then availableNow else availableLater\"></div>\r\n                  <ng-template #availableNow>\r\n                    Available now\r\n                  </ng-template>\r\n                  <ng-template #availableLater>\r\n                    {{reservation.list_product?.delivery_date | date: 'dd/MM/yyyy'}}\r\n                  </ng-template>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <h4 class=\"title-hidden\">Status</h4>\r\n                  <ng-container *ngIf=\"reservation.warehouse_product\">\r\n                    Ready\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"reservation.list_product\">\r\n                    {{statuses[reservation.list_product.status]}}\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"!reservation.list_product && !reservation.warehouse_product\">\r\n                    N/A\r\n                  </ng-container>\r\n                </td>\r\n                <td style=\"width: 10%\" class=\"text-center\">\r\n                  <h4 class=\"title-hidden\">Price</h4>\r\n                  <ng-container *ngIf=\"reservation.nomenclature\">\r\n                    {{reservation.nomenclature.price | number:'1.2-2'}}\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"reservation.warehouse_product\">\r\n                    {{reservation.warehouse_product.nomenclature.price | number:'1.2-2'}}\r\n                  </ng-container>\r\n                  <ng-container *ngIf=\"reservation.list_product\">\r\n                    {{reservation.list_product.nomenclature.price | number:'1.2-2'}}\r\n                  </ng-container>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"8\">\r\n                  <i *ngIf=\"isLoadingReservation\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingReservation\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </p-table>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"header d-flex align-items-center justify-content-between mb-4\">\r\n      <h2>Offers</h2>\r\n      <div class=\"page__tools\">\r\n<!--        <button-->\r\n<!--          pButton-->\r\n<!--          type=\"button\"-->\r\n<!--          icon=\"pi pi-pencil\"-->\r\n<!--          label=\"Generate Offer\"-->\r\n<!--          class=\"mr-2\"-->\r\n<!--          (click)=\"onGenerateOffer()\"-->\r\n<!--        >-->\r\n<!--        </button>-->\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n          <p-table\r\n            class=\"adaptive-table\"\r\n            [value]=\"offers\"\r\n            [(selection)]=\"selectedOffer\"\r\n            selectionMode=\"single\"\r\n            [rows]=\"10\"\r\n            [paginator]=\"!isLoadingOffers && offers.length > 0\"\r\n            (selectionChange)=\"onSelectOffer()\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex\">\r\n                <p class=\"subtitle\" *ngIf=\"!selectedOffer\">Choose the Offer to edit</p>\r\n                <p-menubar\r\n                  class=\"ml-auto\"\r\n                  [model]=\"offersMenu\"\r\n                  [class.disabled]=\"!selectedOffer\">\r\n                </p-menubar>\r\n              </div>\r\n            </ng-template>\r\n\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n                <th style=\"width: 35%\" class=\"text-center\">Date</th>\r\n                <th style=\"width: 20%\" class=\"text-center\">Offer ID</th>\r\n                <th style=\"width: 20%\" class=\"text-center\">Confirmed</th>\r\n                <th style=\"width: 20%\" class=\"text-center\">Total</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-offer let-rowIndex=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"offer\">\r\n                <td style=\"width: 5%\" class=\"text-center\">{{rowIndex + 1}}</td>\r\n                <td style=\"width: 35%\" class=\"text-center\">\r\n                  {{ offer.created_at | date: 'dd/MM/yyyy' }}\r\n                </td>\r\n                <td style=\"width: 20%\" class=\"text-center\">\r\n                  {{ offer.id }}\r\n                </td>\r\n                <td style=\"width: 20%\" class=\"text-center\">\r\n                  <i *ngIf=\"offer.is_confirmed\" class=\"pi pi-check\" style=\"color: green;\"></i>\r\n                  <i *ngIf=\"!offer.is_confirmed\" class=\"pi pi-times\" style=\"color: red\"></i>\r\n                </td>\r\n                <td style=\"width: 20%\" class=\"text-center\">\r\n                  {{ offer.total | number:'1.2-2' }} \r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"8\">\r\n                  <i *ngIf=\"isLoadingOffers\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingOffers\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n          </p-table>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Files</h2>\r\n\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #mt\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"files.length > 0\"\r\n          [rows]=\"10\"\r\n          [value]=\"files\"\r\n          [(selection)]=\"selectedFile\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                (click)=\"onAddFile()\"\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-auto\"\r\n                label=\"Add File\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n              <th style=\"width: 85%\">Name</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Actions</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-file let-rowIndex=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"file\">\r\n              <td class=\"text-center\">{{ rowIndex + 1 }}</td>\r\n              <td>\r\n                {{ getName(file.file) }}\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                  <button\r\n                    pButton\r\n                    (click)=\"onDownloadFile(file)\"\r\n                    [loading]=\"addition.has(file.id)\"\r\n                    type=\"button\"\r\n                    class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                    icon=\"pi pi-download\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    (click)=\"onRemoveFile(file.id)\"\r\n                    [loading]=\"deletion.has(file.id)\"\r\n                    type=\"button\"\r\n                    class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                    icon=\"pi pi-trash\"\r\n                  ></button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n                <i *ngIf=\"isLoadingFiles\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingFiles\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<ng-template #infoLoading>\r\n  <div class=\"info-loading\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #notGrouped>\r\n  <i class=\"pi pi-times text-danger\"></i>\r\n</ng-template>\r\n\r\n","import {Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {SalesChain} from '../../models/sales-chain';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {SalesChainService} from '../../services/sales-chain-service';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {Subject, takeUntil} from 'rxjs';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {environment} from '@env/environment';\r\nimport {ActivatedRoute, Router} from '@angular/router';\r\nimport {Country} from \"@shared/models/country\";\r\n\r\n@Component({\r\n  selector: 'pek-sales-procurement-chains',\r\n  templateUrl: './sales-chains.component.html',\r\n  styleUrls: ['./sales-chains.component.scss']\r\n})\r\nexport class SalesChainsComponent implements OnInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  link = environment.link_url + 'dash/';\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Sales Chain',\r\n    items: [\r\n      {\r\n        label: 'Chain Page',\r\n        icon: 'pi pi-folder',\r\n        command: () => this.onGoToChainPage(this.selectedSalesChain)\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveChain()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  tableScrollHeight = '24.125rem';\r\n  isHideFilters = false;\r\n\r\n  isStartOnePage = false;\r\n  isShowAll = false;\r\n  isLoading = true;\r\n\r\n  salesChain: SalesChain[] = [];\r\n  selectedSalesChain: SalesChain;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    status_ids: [null],\r\n    company_ids: [null],\r\n    country_ids: [null],\r\n    regions_ids: [null],\r\n    order_by_name: [null],\r\n    order_by_date: [null],\r\n    order_by_status: [null],\r\n    company__categories__in: [null],\r\n    page: [1],\r\n  });\r\n\r\n  countChains = 0;\r\n\r\n  queryKey = 'company_ids:null/company__categories__in:null/status_ids:null';\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'paginated', value: 'true'},\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n  ];\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private salesChainService: SalesChainService,\r\n    private readonly modalService: ModalService,\r\n    private router: Router,\r\n    private readonly route: ActivatedRoute,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getSalesChainsForPagination();\r\n  }\r\n\r\n  createSaleChain() {\r\n    this.salesChainService.createEditSalesChainModal().subscribe(salesChain => {\r\n      if (salesChain) {\r\n        this.searchChains();\r\n      }\r\n    })\r\n  }\r\n\r\n  getSalesChainsForPagination() {\r\n    this.salesChainService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(sales => {\r\n      this.salesChain = sales.results;\r\n      this.countChains = sales.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getSalesChains() {\r\n    this.salesChainService.get(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(salesChains => {\r\n      this.salesChain = salesChains;\r\n      this.countChains = salesChains.length;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  searchChains() {\r\n    this.isLoading = true;\r\n    this.destroy$.next(true);\r\n    this.selectedSalesChain = null;\r\n\r\n    const newQueryKey = `'company_ids:${this.searchForm.get('company_ids').value}/company__categories__in:${this.searchForm.get('company__categories__in').value}/status_ids:${this.searchForm.get('status_ids').value}'`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query = [\r\n        {name: 'paginated', value: 'true'},\r\n        {name: 'page', value: this.searchForm.get('page').value},\r\n      ];\r\n    }\r\n\r\n    if (this.searchForm.get('company_ids').value) {\r\n      this.query.push({\r\n        name: 'company_ids',\r\n        value: this.searchForm.get('company_ids').value,\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('company__categories__in').value !== null) {\r\n      this.query.push({\r\n        name: 'company__categories__in',\r\n        value: this.searchForm.get('company__categories__in').value\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('status_ids').value) {\r\n      this.query.push({\r\n        name: 'status_ids',\r\n        value: this.searchForm.get('status_ids').value,\r\n      });\r\n    }\r\n\r\n    if (this.searchForm.get('country_ids').value) {\r\n      this.query.push({\r\n        name: 'country_ids',\r\n        value: this.searchForm.get('country_ids').value,\r\n      });\r\n    }\r\n\r\n    if (!this.isShowAll) {\r\n      this.getSalesChainsForPagination();\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.getSalesChains();\r\n    }\r\n  }\r\n\r\n  toggleFilterVisibility() {\r\n    this.isHideFilters = !this.isHideFilters;\r\n    this.setTableScrollHeight();\r\n  }\r\n\r\n  setTableScrollHeight() {\r\n    if (this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '20.875rem';\r\n      return;\r\n    }\r\n\r\n    if (this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '18.75rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '21.875rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '24.125rem';\r\n      return;\r\n    }\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.setTableScrollHeight();\r\n    this.searchChains();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.setTableScrollHeight();\r\n    this.searchChains();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchChains();\r\n    }\r\n  }\r\n\r\n  onSelectCompanies(ids: string) {\r\n    this.searchForm.get('company_ids').patchValue(ids);\r\n    this.searchChains();\r\n  }\r\n\r\n  onSelectStatuses(ids: string) {\r\n    this.searchForm.get('status_ids').patchValue(ids);\r\n    this.searchChains();\r\n  }\r\n\r\n  onSelectCompanyCategories(ids: string) {\r\n    this.searchForm.get('company__categories__in').patchValue(ids);\r\n    this.searchChains();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n\r\n  private onRemoveChain() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.salesChainService.delete(this.selectedSalesChain).subscribe(() => {\r\n          this.selectedSalesChain = null;\r\n          this.searchChains();\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  onGoToChainPage(salesChain: SalesChain) {\r\n    // Add product is missing in new version\r\n    window.open(`/sales/sales-procurement-chains/chain-page/${salesChain.id}`, '_blank')\r\n  }\r\n\r\n  onSelectCountries(countries: Country[]) {\r\n    this.searchForm.get('country_ids').patchValue(countries?.map(c => c.id).join(',') ?? null)\r\n    this.searchChains();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Sales Chains</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Create Sales Chain\"\r\n        (click)=\"createSaleChain()\"\r\n      >\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n      <div class=\"filters-visibility__header\">\r\n        <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n      </div>\r\n\r\n      <button\r\n        class=\"icon pi\"\r\n        [class.pi-angle-double-up]=\"!isHideFilters\"\r\n        [class.pi-angle-double-down]=\"isHideFilters\"\r\n        (click)=\"toggleFilterVisibility()\"\r\n        [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n        tooltipPosition=\"left\"\r\n      ></button>\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Companies</label>\r\n              <pek-multi-company-picker\r\n                (selectCompanies)=\"onSelectCompanies($event)\"\r\n              ></pek-multi-company-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Status</label>\r\n              <pek-multi-sales-status-picker\r\n                (selectStatuses)=\"onSelectStatuses($event)\"></pek-multi-sales-status-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Company Categories</label>\r\n              <pek-multi-company-category-picker\r\n                (selectCompanyCategories)=\"onSelectCompanyCategories($event)\"></pek-multi-company-category-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3 mb-2\">\r\n            <div class=\"form-group\">\r\n              <label>Countries</label>\r\n              <pek-multi-countries-picker (selectCountries)=\"onSelectCountries($event)\"></pek-multi-countries-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n          </div>\r\n          <div class=\"col-3\">\r\n          </div>\r\n          <div class=\"col-3\">\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <ng-container *ngTemplateOutlet=\"actionButtons\"></ng-container>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        rowExpandMode=\"single\"\r\n        [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n        [scrollable]=\"true\"\r\n        dataKey=\"id\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedSalesChain\"\r\n        [value]=\"salesChain\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center \" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 30%\">Company Name</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Created Date</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Status</th>\r\n            <th class=\"text-center\" style=\"width: 10%\">Status Date</th>\r\n            <th style=\"width: 20%\">Comment</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-chain let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"chain\" class=\"table-row\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{ i + 1 }}</td>\r\n\r\n            <td style=\"width: 30%\">\r\n              <a [href]=\"'/crm/business-partners/company-page/' + chain.company_id\">{{ chain.company}}</a>\r\n            </td>\r\n            <td style=\"width: 15%\" class=\"text-center\">\r\n              {{ chain.created_at | date: 'dd/MM/y'}}\r\n            </td>\r\n\r\n            <td class=\"text-center\" style=\"width: 20%\">\r\n              <ng-container *ngIf=\"chain.chain_status\">{{chain.chain_status.status.name}}</ng-container>\r\n              <ng-container *ngIf=\"!chain.chain_status\">\r\n                <span class=\"text-warning\">New</span>\r\n              </ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 10%\">\r\n              {{chain.chain_status?.date | date: 'dd/MM/y'}}\r\n            </td>\r\n            <td style=\"width: 20%\">\r\n              {{chain.comment}}\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"paginator-wrapper\"\r\n      *ngIf=\"!isShowAll\"\r\n      [class.paginator-wrapper_hide]=\"salesChain.length === 0\"\r\n    >\r\n      <p-paginator\r\n        #paginator\r\n        [rows]=\"10\"\r\n        [totalRecords]=\"countChains\"\r\n        (onPageChange)=\"paginate($event)\"\r\n      >\r\n      </p-paginator>\r\n      <p-button\r\n        (click)=\"onShowAll()\"\r\n        class=\"paginator-all\"\r\n        type=\"button\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        All\r\n      </p-button>\r\n    </div>\r\n\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowPartial()\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #actionButtons>\r\n  <div class=\"action-buttons\">\r\n    <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedSalesChain\"></p-menubar>\r\n  </div>\r\n</ng-template>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {NavigationLink} from '../../../layout/navigation-route';\r\nimport {environment} from '@env/environment';\r\n\r\n@Component({\r\n  selector: 'pek-sales-layout',\r\n  templateUrl: './sales-layout.component.html',\r\n  styleUrls: ['./sales-layout.component.scss']\r\n})\r\nexport class SalesLayoutComponent implements OnInit {\r\n\r\n  routes: NavigationLink[] = [\r\n    {label: 'Sales Chains', commands: ['sales-procurement-chains']},\r\n    {\r\n      label: 'Prices',\r\n      commands: ['nomenclature-price'],\r\n    },\r\n  ];\r\n\r\n  settingsRoutes: NavigationLink[] = [\r\n    {label: 'Statuses', commands: ['statuses']},\r\n    {label: 'Countries & Regions', commands: ['regions']},\r\n  ];\r\n\r\n  constructor() {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'Sales'\"\r\n  [routes]=\"routes\"\r\n  [settingsRoutes]=\"settingsRoutes\"\r\n></pek-header>\r\n<router-outlet></router-outlet>\r\n","import {AfterViewInit, Component, OnDestroy, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {Table} from 'primeng/table';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {finalize, fromEvent, Subject, takeUntil} from 'rxjs';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {debounceTime, map, tap} from 'rxjs/operators';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {ListService} from '../../../warehouse/services/list.service';\r\nimport {SalesChainService} from '../../services/sales-chain-service';\r\n\r\n@Component({\r\n  selector: 'pek-sales-lists',\r\n  templateUrl: './sales-lists.component.html',\r\n  styleUrls: ['./sales-lists.component.scss']\r\n})\r\nexport class SalesListsComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('dt') dt: Table;\r\n  @ViewChild('searchBoxName') searchBoxName;\r\n  @ViewChild('searchBoxCode') searchBoxCode;\r\n\r\n  private destroy$ = new Subject();\r\n\r\n  isSaving = false;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    code: [null],\r\n    page: [1]\r\n  });\r\n\r\n  tableScrollHeight = '24.125rem';\r\n  isHideFilters = false;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    nomenclature: [null, Validators.required],\r\n    quantity: [1, [Validators.required, Validators.min(1)]],\r\n    is_grouped: [false]\r\n  });\r\n\r\n  isStartOnePage = false;\r\n  isShowAll = false;\r\n\r\n  nomenclatures: Nomenclature[] = [];\r\n  selectedNomenclature: Nomenclature;\r\n  isLoading = true;\r\n  countNomenclatures = 0;\r\n\r\n  queryKey = 'name:null/code:null';\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'type', value: '1'},\r\n    {name: 'paginated', value: 'true'},\r\n    {name: 'page', value: this.searchForm.get('page').value},\r\n  ];\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n    private readonly listService: ListService,\r\n  ) {\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    fromEvent(this.searchBoxName.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedNomenclature = null),\r\n        map(() => this.searchBoxName.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchNomenclatures();\r\n    });\r\n\r\n    fromEvent(this.searchBoxCode.nativeElement, 'keyup')\r\n      .pipe(\r\n        tap(() => this.selectedNomenclature = null),\r\n        map(() => this.searchBoxCode.nativeElement.value),\r\n        debounceTime(350),\r\n      ).subscribe(() => {\r\n      this.searchNomenclatures();\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getNomenclaturesForPagination();\r\n  }\r\n\r\n  getNomenclatures() {\r\n    this.nomenclatureService.get(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatures = nomenclatures;\r\n\r\n      this.countNomenclatures = nomenclatures.length;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator?.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getNomenclaturesForPagination() {\r\n    this.nomenclatureService.getForPagination(this.query).pipe(\r\n      takeUntil(this.destroy$)\r\n    ).subscribe(nomenclatures => {\r\n      this.nomenclatures = nomenclatures.results;\r\n      this.countNomenclatures = nomenclatures.count;\r\n\r\n      if (this.isStartOnePage) {\r\n        this.paginator.changePage(0);\r\n      }\r\n\r\n      this.isStartOnePage = false;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  searchNomenclatures() {\r\n    this.isLoading = true;\r\n    this.destroy$.next(true);\r\n    this.selectedNomenclature = null;\r\n\r\n    const newQueryKey = `name:${this.searchForm.get('name').value}/code:${this.searchForm.get('code').value}`;\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.queryKey = newQueryKey;\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.isStartOnePage = true;\r\n    }\r\n\r\n    this.query = [];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query = [\r\n        {name: 'paginated', value: 'true'},\r\n        {name: 'page', value: this.searchForm.get('page').value},\r\n      ];\r\n    }\r\n\r\n    this.query.push({name: 'type', value: '1'});\r\n\r\n    if (this.searchForm.get('code').value) {\r\n      this.query.push({name: 'code', value: this.searchForm.get('code').value});\r\n    }\r\n\r\n    if (this.searchForm.get('name').value) this.query.push({name: 'name', value: this.searchForm.get('name').value});\r\n\r\n    if (!this.isShowAll) {\r\n      this.getNomenclaturesForPagination();\r\n    } else {\r\n      this.searchForm.get('page').patchValue(1);\r\n      this.getNomenclatures();\r\n    }\r\n  }\r\n\r\n  onShowAll() {\r\n    this.isShowAll = true;\r\n    this.setTableScrollHeight();\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  onShowPartial() {\r\n    this.isShowAll = false;\r\n    this.setTableScrollHeight();\r\n    this.searchNomenclatures();\r\n  }\r\n\r\n  paginate(evt: any) {\r\n    if (!this.isStartOnePage) {\r\n      this.searchForm.get('page').patchValue(evt.page + 1);\r\n      this.searchNomenclatures();\r\n    }\r\n  }\r\n\r\n  onSelectionChange() {\r\n    if (this.selectedNomenclature) {\r\n      this.form.get('nomenclature').patchValue(this.selectedNomenclature.id);\r\n    } else {\r\n      this.form.get('nomenclature').patchValue(null);\r\n    }\r\n  }\r\n\r\n  onMakeProductionList() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n      this.listService.makeProductionList(this.form.value).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe();\r\n    }\r\n  }\r\n\r\n  toggleFilterVisibility() {\r\n    this.isHideFilters = !this.isHideFilters;\r\n    this.setTableScrollHeight();\r\n  }\r\n\r\n  setTableScrollHeight() {\r\n    if (this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '20.875rem';\r\n      return;\r\n    }\r\n\r\n    if (this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '18.75rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && this.isShowAll) {\r\n      this.tableScrollHeight = '21.875rem';\r\n      return;\r\n    }\r\n\r\n    if (!this.isHideFilters && !this.isShowAll) {\r\n      this.tableScrollHeight = '24.125rem';\r\n      return;\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroy$.next(true);\r\n    this.destroy$.complete();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Make Production List</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-check\"\r\n        label=\"Make\"\r\n        class=\"p-button-success p-button-icon\"\r\n        [disabled]=\"this.form.invalid\"\r\n        [loading]=\"isSaving\"\r\n        (click)=\"onMakeProductionList()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"filters-visibility\" [class.filters-visibility_hide]=\"isHideFilters\">\r\n      <div class=\"filters-visibility__header\">\r\n      </div>\r\n\r\n      <button\r\n        class=\"icon pi\"\r\n        [class.pi-angle-double-up]=\"!isHideFilters\"\r\n        [class.pi-angle-double-down]=\"isHideFilters\"\r\n        (click)=\"toggleFilterVisibility()\"\r\n        [pTooltip]=\"isHideFilters ? 'Expand Filters' : 'Collapse Filters'\"\r\n        tooltipPosition=\"left\"\r\n      ></button>\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-3\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>Item Code</label>\r\n              <input class=\"form-control\" formControlName=\"code\" pInputText #searchBoxCode>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>Item Name</label>\r\n              <input class=\"form-control\" formControlName=\"name\" pInputText #searchBoxName>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        rowExpandMode=\"single\"\r\n        [scrollHeight]=\"'calc(100vh - ' + tableScrollHeight + ')'\"\r\n        [scrollable]=\"true\"\r\n        dataKey=\"id\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedNomenclature\"\r\n        [value]=\"nomenclatures\"\r\n        (selectionChange)=\"onSelectionChange()\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 30%\">Code</th>\r\n            <th style=\"width: 30%\">Name</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">UOM</th>\r\n            <th style=\"width: 25%\">Description</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"product\" [pRowToggler]=\"product\">\r\n            <td style=\"width: 5%\" class=\"text-center\">{{(this.searchForm.get('page').value - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 30%\">{{product.code}}</td>\r\n            <td style=\"width: 30%\">{{product.name}}</td>\r\n            <td style=\"width: 10%\" class=\"text-center\">Pcs</td>\r\n            <td style=\"width: 25%\">{{product.description}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"rowexpansion\">\r\n          <tr class=\"disabled\">\r\n            <td colspan=\"5\">\r\n              <form [formGroup]=\"form\">\r\n                <div class=\"row align-items-center\">\r\n                  <div class=\"col-6\">\r\n                    <div class=\"form-group\">\r\n                      <label for=\"quantity\">Number Of Sets</label>\r\n                      <input\r\n                        id=\"quantity\"\r\n                        min=\"1\"\r\n                        class=\"form-control\"\r\n                        type=\"number\"\r\n                        pInputText\r\n                        formControlName=\"quantity\"\r\n                      >\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-6 d-flex align-items-center\">\r\n                    <div class=\"form-group checkbox\">\r\n                      <p-checkbox\r\n                        label=\"Group Production Plan\"\r\n                        [binary]=\"true\"\r\n                        formControlName=\"is_grouped\">\r\n                      </p-checkbox>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"10\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"paginator-wrapper\"\r\n      *ngIf=\"!isShowAll\"\r\n      [class.paginator-wrapper_hide]=\"nomenclatures.length === 0\"\r\n    >\r\n      <p-paginator\r\n        #paginator\r\n        [rows]=\"10\"\r\n        [totalRecords]=\"countNomenclatures\"\r\n        (onPageChange)=\"paginate($event)\"\r\n      >\r\n      </p-paginator>\r\n      <p-button\r\n        (click)=\"onShowAll()\"\r\n        class=\"paginator-all\"\r\n        type=\"button\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        All\r\n      </p-button>\r\n    </div>\r\n\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowPartial()\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from \"primeng/paginator\";\r\nimport {Table} from \"primeng/table\";\r\nimport {ENomenclatureType, Nomenclature} from \"@shared/models/nomenclature\";\r\nimport {BehaviorSubject, iif, Observable, Subject, switchMap} from \"rxjs\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {debounceTime, distinctUntilChanged, filter, map, tap} from \"rxjs/operators\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {NomenclatureService} from \"@shared/services/nomenclature.service\";\r\nimport {B} from \"@angular/cdk/keycodes\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-sales-prices',\r\n  templateUrl: './sales-prices.component.html',\r\n  styleUrls: ['./sales-prices.component.scss']\r\n})\r\nexport class SalesPricesComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n  @ViewChild('dt') dt: Table;\r\n\r\n  isLoading = true;\r\n  isShowAll = false;\r\n\r\n  count = 0;\r\n  currentPage = 1;\r\n  isStartFirstPage = false;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [''],\r\n    code: [''],\r\n    has_price: [null],\r\n    type: [null],\r\n  });\r\n\r\n  nomenclatureTypes = [\r\n    {label: 'Assembly', value: ENomenclatureType.ASSEMBLY},\r\n    {label: 'Manufactured', value: ENomenclatureType.MANUFACTURED}\r\n  ];\r\n\r\n  query: QuerySearch[] = [\r\n    {name: 'paginated', value: true},\r\n    {name: 'page', value: this.currentPage},\r\n    {name: 'order_by_price', value: true},\r\n  ];\r\n\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  selectedNomenclature: Nomenclature;\r\n\r\n  nomenclatures$: Observable<Nomenclature[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      iif(() =>\r\n          !this.isShowAll,\r\n        this.nomenclatureService.getForPagination(this.query).pipe(\r\n          tap(response => this.count = response.count),\r\n          map(response => response.results),\r\n        ),\r\n        this.nomenclatureService.get(this.query).pipe(\r\n          tap(nomenclatures => this.count = nomenclatures.length),\r\n        ),\r\n      ),\r\n    ),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly nomenclatureService: NomenclatureService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedNomenclature = null;\r\n\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n      {name: 'order_by_price', value: true},\r\n    ];\r\n\r\n    if (!this.searchForm.get('type').value) {\r\n      this.query.push({\r\n        name: 'type_numbers',\r\n        value: `${ENomenclatureType.MANUFACTURED},${ENomenclatureType.ASSEMBLY}`,\r\n      });\r\n    } else {\r\n      this.query.push({\r\n        name: 'type',\r\n        value: this.searchForm.get('type').value,\r\n      });\r\n    }\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: true});\r\n    }\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value && key !== 'type') {\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isShowAll = value;\r\n\r\n    if (!this.isShowAll) {\r\n      this.currentPage = 1;\r\n    }\r\n\r\n    this.search$.next();\r\n  }\r\n\r\n  onEditNomenclaturePrice() {\r\n    this.nomenclatureService.editNomenclaturePriceDialog(this.selectedNomenclature).pipe(\r\n      filter(Boolean)\r\n    ).subscribe(() => this.search$.next())\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Nomenclature Price</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form class=\"form mb-3\" [formGroup]=\"searchForm\">\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label for=\"code\">Code</label>\r\n            <input\r\n              id=\"code\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"code\"\r\n              (ngModelChange)=\"code$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Name</label>\r\n            <input\r\n              id=\"name\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Type</label>\r\n            <p-dropdown\r\n              [options]=\"nomenclatureTypes\"\r\n              optionValue=\"value\"\r\n              optionLabel=\"label\"\r\n              [showClear]=\"true\"\r\n              placeholder=\"Choice Type\"\r\n              formControlName=\"type\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            ></p-dropdown>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label for=\"has_price\">Has Price?</label>\r\n            <p-triStateCheckbox\r\n              formControlName=\"has_price\"\r\n              inputId=\"has_price\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-triStateCheckbox>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3 edit-price\">\r\n          <button\r\n            (click)=\"onEditNomenclaturePrice()\"\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-pencil\"\r\n            [disabled]=\"!selectedNomenclature\"\r\n            label=\"Edit Price\"\r\n          >\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        #dt\r\n        [value]=\"nomenclatures$ | async\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        selectionMode=\"single\"\r\n        [(selection)]=\"selectedNomenclature\"\r\n        scrollHeight=\"calc(100vh - 19rem)\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 20%\">Code</th>\r\n            <th style=\"width: 20%\">Name</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Price</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"nomenclature\">\r\n            <td style=\"width: 5%\" class=\"text-center\">{{(currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 20%\">{{nomenclature.code}}</td>\r\n            <td style=\"width: 20%\">{{nomenclature.name}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{nomenclature.price | number:'1.2-2'}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"6\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"paginator-wrapper\"\r\n      *ngIf=\"!isShowAll\"\r\n      [class.paginator-wrapper_hide]=\"count === 0\"\r\n    >\r\n      <p-paginator\r\n        #paginator\r\n        [rows]=\"10\"\r\n        [totalRecords]=\"count\"\r\n        (onPageChange)=\"paginate($event)\"\r\n      >\r\n      </p-paginator>\r\n      <p-button\r\n        (click)=\"onShowAll(true)\"\r\n        class=\"paginator-all\"\r\n        type=\"button\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        All\r\n      </p-button>\r\n    </div>\r\n\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(false)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {SalesChainStatus, SalesStatus} from '../../models/sales-chain';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {SalesStatusService} from '../../services/sales-status.service';\r\nimport {CdkDragDrop, moveItemInArray, transferArrayItem} from '@angular/cdk/drag-drop';\r\nimport {ModalService} from '@shared/services/modal.service';\r\n\r\n@Component({\r\n  selector: 'pek-sales-statuses',\r\n  templateUrl: './sales-statuses.component.html',\r\n  styleUrls: ['./sales-statuses.component.scss']\r\n})\r\nexport class SalesStatusesComponent implements OnInit {\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Sales Status',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditSalesStatus()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveSalesStatus()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  isLoading = true;\r\n  statuses: SalesChainStatus[] = [];\r\n  selectedSalesStatus: SalesChainStatus;\r\n\r\n  constructor(\r\n    private readonly salesStatusService: SalesStatusService,\r\n    private readonly modalService: ModalService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.salesStatusService.get().subscribe(statuses => {\r\n      this.statuses = statuses;\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  drop(event: CdkDragDrop<any[]>) {\r\n    if (event.previousContainer === event.container) {\r\n      moveItemInArray(event.container.data, event.previousIndex, event.currentIndex);\r\n    } else {\r\n      transferArrayItem(event.previousContainer.data,\r\n        event.container.data,\r\n        event.previousIndex,\r\n        event.currentIndex);\r\n    }\r\n\r\n    if (event.previousIndex !== event.currentIndex) {\r\n      const currentStatus = this.statuses[event.currentIndex];\r\n\r\n      const newOrder = this.statuses.findIndex(s => s.id === currentStatus.id);\r\n      this.salesStatusService.changeOrder(currentStatus, newOrder).subscribe();\r\n    }\r\n  }\r\n\r\n  onAddSalesStatus() {\r\n    this.salesStatusService.createEditSalesStatusModal('create').subscribe(status => {\r\n      if (status) {\r\n        this.statuses.push(status);\r\n      }\r\n    });\r\n  }\r\n\r\n  toggleLine(status) {\r\n    if (this.selectedSalesStatus === status) {\r\n      this.selectedSalesStatus = null;\r\n    } else {\r\n      this.selectedSalesStatus = status;\r\n    }\r\n  }\r\n\r\n  onEditSalesStatus() {\r\n    this.salesStatusService.createEditSalesStatusModal('edit', this.selectedSalesStatus).subscribe(status => {\r\n      if (status) {\r\n        const index = this.statuses.findIndex(t => t.id === this.selectedSalesStatus.id);\r\n        this.statuses[index] = status;\r\n        this.selectedSalesStatus = this.statuses[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveSalesStatus() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.salesStatusService.delete(this.selectedSalesStatus).subscribe(() => {\r\n          const index = this.statuses.findIndex(w => w.id === this.selectedSalesStatus.id);\r\n          this.statuses.splice(index, 1);\r\n          this.selectedSalesStatus = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'sales'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Statuses Types</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Status Type\" (click)=\"onAddSalesStatus()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"d-flex actions\">\r\n      <p class=\"subtitle\" *ngIf=\"!selectedSalesStatus\">Choose the Sales Status to edit</p>\r\n      <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedSalesStatus\"></p-menubar>\r\n    </div>\r\n    <div class=\"order-statuses\">\r\n      <div class=\"order-statuses-header\">\r\n        <div class=\"table-col text-center\" style=\"width: 5%;\">#</div>\r\n        <div class=\"table-col\" style=\"width: 95%;\">Name</div>\r\n      </div>\r\n      <div class=\"order-statuses-body\" *ngIf=\"!isLoading\">\r\n        <div class=\"order-statuses-list order-statuses_dragging\"\r\n             cdkDropList\r\n             [cdkDropListData]=\"statuses\"\r\n             (cdkDropListDropped)=\"drop($event)\"\r\n        >\r\n          <div\r\n            class=\"order-statuses-line order-statuses-line_dragging\"\r\n            *ngFor=\"let status of statuses; let idx = index\" cdkDrag\r\n            cdkDragBoundary=\".workloads_dragging\"\r\n            [class.active]=\"selectedSalesStatus && selectedSalesStatus.id === status.id\"\r\n            (click)=\"toggleLine(status)\"\r\n          >\r\n            <div class=\"example-custom-placeholder\" *cdkDragPlaceholder></div>\r\n            <div class=\"order-statuses-item\">\r\n              <div class=\"table-col text-center\" style=\"width: 5%;\">{{idx + 1}}</div>\r\n              <div class=\" table-col\" style=\"width: 80%;\">\r\n                {{status.name}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div *ngIf=\"isLoading\" class=\"p-4 order-statuses-loading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, MaxLengthValidator, MaxValidator, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Country} from '@shared/models/country';\r\nimport {CountryService} from '@shared/services/country.service';\r\nimport {finalize} from \"rxjs/operators\";\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-country',\r\n  templateUrl: './create-edit-country.component.html',\r\n  styleUrls: ['./create-edit-country.component.scss']\r\n})\r\nexport class CreateEditCountryComponent implements OnInit {\r\n\r\n  form = this.fb.group({\r\n    id: [null],\r\n    name: ['', [Validators.required]],\r\n    alpha2_code: ['', [Validators.required]],\r\n  });\r\n  isSaving = false;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<CreateEditCountryComponent>,\r\n    private readonly countryService: CountryService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { country: Country }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.country) {\r\n      this.form.patchValue(this.data.country);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n    if (this.form.value.id) {\r\n      this.countryService.update(this.form.value).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(() => {\r\n        this.dialogRef.close(true);\r\n      });\r\n    } else {\r\n      this.countryService.create(this.form.value).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(() => {\r\n        this.dialogRef.close(true);\r\n      });\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{form.get('id').value ? 'Edit' : 'Create'  }} Country\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"alpha2_code\">Code*</label>\r\n      <input type=\"text\" id=\"alpha2_code\" pInputText formControlName=\"alpha2_code\" maxlength=\"2\">\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"form.get('id').value ? 'Edit' : 'Create'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Region} from '@shared/models/region';\r\nimport {CountryService} from '@shared/services/country.service';\r\nimport {RegionService} from '@shared/services/region.service';\r\nimport {finalize} from \"rxjs/operators\";\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-region',\r\n  templateUrl: './create-edit-region.component.html',\r\n  styleUrls: ['./create-edit-region.component.scss']\r\n})\r\nexport class CreateEditRegionComponent implements OnInit {\r\n  form = this.fb.group({\r\n    id: [null],\r\n    name: ['', [Validators.required]],\r\n    country: [null],\r\n  });\r\n  isSaving = false;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<CreateEditRegionComponent>,\r\n    private readonly regionService: RegionService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { region: Region, selectedCountry: number }\r\n  ) {\r\n    if (this.data.region) {\r\n      this.form.get('id').setValue(this.data.region.id);\r\n      this.form.get('name').setValue(this.data.region.name);\r\n      if (this.data.region.country) {\r\n        this.form.get('country').setValue(this.data.region.country.id);\r\n      }\r\n    }\r\n\r\n    if (this.data.selectedCountry) {\r\n      this.form.get('country').setValue(this.data.selectedCountry);\r\n    }\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n    if (this.form.value.id) {\r\n      this.regionService.update(this.form.value).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(() => {\r\n        this.dialogRef.close(true);\r\n      });\r\n    } else {\r\n      this.regionService.create(this.form.value).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(() => {\r\n        this.dialogRef.close(true);\r\n      });\r\n    }\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{form.get('id').value ? 'Edit' : 'Create'  }} Region\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Country*</label>\r\n      <pek-crm-company-picker [country]=\"form.get('country').value\" (valueChange)=\"form.get('country').setValue($event.id)\"></pek-crm-company-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"form.get('id').value ? 'Edit' : 'Create'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from '@angular/forms';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {SubRegionService} from '@shared/services/sub-region.service';\r\nimport {SubRegion} from '@shared/models/sub-region';\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-sub-region',\r\n  templateUrl: './create-edit-sub-region.component.html',\r\n  styleUrls: ['./create-edit-sub-region.component.scss']\r\n})\r\nexport class CreateEditSubRegionComponent implements OnInit {\r\n  form = this.fb.group({\r\n    id: [null],\r\n    name: ['', [Validators.required]],\r\n    subRegion: [null],\r\n    region: [null],\r\n    country: [null],\r\n  });\r\n  isSaving: any;\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly subRegionService: SubRegionService,\r\n    private dialogRef: MatDialogRef<CreateEditSubRegionComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { countrySelected: number, subRegion: SubRegion, selectedRegion: number }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.subRegion) {\r\n      this.form.get('id').setValue(this.data.subRegion.id);\r\n      this.form.get('name').setValue(this.data.subRegion.name);\r\n      if (this.data.selectedRegion) {\r\n        this.form.get('region').setValue(this.data.selectedRegion);\r\n      }\r\n\r\n    }\r\n    if (this.data.selectedRegion) {\r\n      this.form.get('region').setValue(this.data.selectedRegion);\r\n    }\r\n\r\n\r\n    if (this.data.countrySelected) {\r\n      this.form.get('country').setValue(this.data.countrySelected);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    if (this.form.value.id) {\r\n      this.subRegionService.update(this.form.value).subscribe(() => {\r\n        this.dialogRef.close(true);\r\n      });\r\n    } else {\r\n      this.subRegionService.create(this.form.value).subscribe(() => {\r\n        this.dialogRef.close(true);\r\n      });\r\n    }\r\n  }\r\n\r\n  regionSelected(regionId: number) {\r\n      this.form.get('region').patchValue(regionId, { emitEvent: false });\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{form.get('id').value ? 'Edit' : 'Create'  }} Region\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Region*</label>\r\n      <pek-region-picker\r\n        [countrySelected]=\"form.get('country').value\"\r\n        [selectedRegionId]=\"form.get('region').value\"\r\n        (selectRegion)=\"regionSelected($event)\"></pek-region-picker>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"form.get('id').value ? 'Edit' : 'Create'\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {FormBuilder, Validators} from \"@angular/forms\";\r\nimport {EventSalesChainService} from \"../../services/event-sales-chain.service\";\r\nimport {EventCompany} from \"../../../crm/models/event-company\";\r\n\r\n@Component({\r\n  selector: 'pek-edit-event-modal',\r\n  templateUrl: './edit-event-modal.component.html',\r\n  styleUrls: ['./edit-event-modal.component.scss']\r\n})\r\nexport class EditEventModalComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    comment: ['', Validators.required]\r\n  })\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private eventSalesChainService: EventSalesChainService,\r\n    private dialogRef: MatDialogRef<EditEventModalComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, eventCompany: EventCompany }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.form.get('comment').patchValue(this.data.eventCompany.comment)\r\n  }\r\n\r\n  onSave() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n      const send = {\r\n        comment: this.form.get('comment').value\r\n      }\r\n      this.eventSalesChainService.updateComment(this.data.eventCompany.id, send).subscribe(res => this.dialogRef.close())\r\n    }\r\n\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Edit Event\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Comment*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"comment\">\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    label=\"Edit\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from '@angular/material/dialog';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\n\r\n@Component({\r\n  selector: 'pek-edit-nomenclature-price-modal',\r\n  templateUrl: './edit-nomenclature-price-modal.component.html',\r\n  styleUrls: ['./edit-nomenclature-price-modal.component.scss']\r\n})\r\nexport class EditNomenclaturePriceModalComponent implements OnInit {\r\n\r\n\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) private nomenclature: Nomenclature,\r\n    private dialogRef: MatDialogRef<EditNomenclaturePriceModalComponent>,\r\n    private nomenclatureService: NomenclatureService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  onSave() {\r\n    const data: Partial<Nomenclature> = {\r\n      id: this.nomenclature.id,\r\n      price: this.nomenclature.price,\r\n    }\r\n    this.nomenclatureService.updatePartly(data).subscribe();\r\n    this.dialogRef.close();\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { SalesRouting } from './sales.routing';\r\nimport { SalesListsComponent } from './components/sales-lists/sales-lists.component';\r\nimport { SalesLayoutComponent } from './components/sales-layout/sales-layout.component';\r\nimport {LayoutModule} from '../layout/layout.module';\r\nimport {SharedModule} from '@shared/shared.module';\r\nimport { SalesChainsComponent } from './components/sales-chains/sales-chains.component';\r\nimport { NomenclaturePriceComponent } from './components/configs/nomenclature-price/nomenclature-price.component';\r\nimport { SalesStatusesComponent } from './components/sales-statuses/sales-statuses.component';\r\nimport {DragDropModule} from '@angular/cdk/drag-drop';\r\nimport { CreateEditSalesStatusComponent } from './modals/create-edit-sales-status/create-edit-sales-status.component';\r\nimport { EditNomenclaturePriceModalComponent } from './modals/edit-nomenclature-price-modal/edit-nomenclature-price-modal.component';\r\nimport { CreateSalesChainComponent } from './modals/create-sales-chain/create-sales-chain.component';\r\nimport { RegionsComponent } from './components/regions/regions.component';\r\nimport { SalesChainPageComponent } from './components/sales-chain-page/sales-chain-page.component';\r\nimport { EditEventModalComponent } from './modals/edit-event-modal/edit-event-modal.component';\r\nimport { EditStatusesModalComponent } from './modals/edit-statuses-modal/edit-statuses-modal.component';\r\nimport { CreateChoiceProductModalComponent } from './modals/create-choice-product-modal/create-choice-product-modal.component';\r\nimport { CreateSalesFileModalComponent } from './modals/create-sales-file-modal/create-sales-file-modal.component';\r\nimport {MultiSelectModule} from \"primeng/multiselect\";\r\nimport { CreateEditCountryComponent } from './modals/create-edit-country/create-edit-country.component';\r\nimport { CreateEditRegionComponent } from './modals/create-edit-region/create-edit-region.component';\r\nimport { CreateEditSubRegionComponent } from './modals/create-edit-sub-region/create-edit-sub-region.component';\r\nimport { SalesPricesComponent } from './components/sales-prices/sales-prices.component';\r\nimport {TriStateCheckboxModule} from \"primeng/tristatecheckbox\";\r\nimport { EditNomenclaturePriceComponent } from './modals/edit-nomenclature-price/edit-nomenclature-price.component';\r\nimport { EditOfferPriceComponent } from './modals/edit-offer-price/edit-offer-price.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SalesListsComponent,\r\n    SalesLayoutComponent,\r\n    SalesChainsComponent,\r\n    NomenclaturePriceComponent,\r\n    SalesStatusesComponent,\r\n    CreateEditSalesStatusComponent,\r\n    EditNomenclaturePriceModalComponent,\r\n    CreateSalesChainComponent,\r\n    RegionsComponent,\r\n    SalesChainPageComponent,\r\n    EditEventModalComponent,\r\n    EditStatusesModalComponent,\r\n    CreateChoiceProductModalComponent,\r\n    CreateSalesFileModalComponent,\r\n    CreateEditCountryComponent,\r\n    CreateEditRegionComponent,\r\n    CreateEditSubRegionComponent,\r\n    SalesPricesComponent,\r\n    EditNomenclaturePriceComponent,\r\n    EditOfferPriceComponent,\r\n  ],\r\n    imports: [\r\n        CommonModule,\r\n        SalesRouting,\r\n        SharedModule,\r\n        LayoutModule,\r\n        DragDropModule,\r\n        MultiSelectModule,\r\n        TriStateCheckboxModule\r\n    ]\r\n})\r\nexport class SalesModule { }\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {SalesLayoutComponent} from './components/sales-layout/sales-layout.component';\r\nimport {NomenclaturePriceComponent} from './components/configs/nomenclature-price/nomenclature-price.component';\r\nimport {SalesStatusesComponent} from './components/sales-statuses/sales-statuses.component';\r\nimport {RegionsComponent} from './components/regions/regions.component';\r\nimport {SalesChainsComponent} from \"./components/sales-chains/sales-chains.component\";\r\nimport {SalesChainPageComponent} from \"./components/sales-chain-page/sales-chain-page.component\";\r\nimport {SalesPricesComponent} from \"./components/sales-prices/sales-prices.component\";\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SalesLayoutComponent,\r\n    children: [\r\n      {path: '', redirectTo: 'sales-procurement-chains', pathMatch: 'full'},\r\n      {\r\n        path: 'sales-procurement-chains',\r\n        children: [\r\n          {path: '', title: 'Sales Chains', component: SalesChainsComponent},\r\n          {path: 'chain-page/:id', title: 'Sales Chain', component: SalesChainPageComponent}\r\n        ]\r\n      },\r\n\r\n      {path: 'statuses', title: 'Statuses Type', component: SalesStatusesComponent},\r\n      {path: 'regions', title: 'Countries & Regions', component: RegionsComponent},\r\n      {path: 'nomenclature-price', title: 'Prices', component: SalesPricesComponent},\r\n      {\r\n        path: 'configs',\r\n        children: [\r\n          {path: '', redirectTo: 'nomenclature-price', pathMatch: 'full'},\r\n          {path: 'nomenclature-price', title: 'Nomenclature Price', component: NomenclaturePriceComponent}\r\n        ]\r\n      }\r\n    ]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class SalesRouting {\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport {CreateEditCountryComponent} from '../modals/create-edit-country/create-edit-country.component';\r\nimport {ModalActionType} from '@shared/models/modal-action';\r\nimport {SalesStatus} from '../models/sales-chain';\r\nimport {Observable} from 'rxjs';\r\nimport {CreateEditSalesStatusComponent} from '../modals/create-edit-sales-status/create-edit-sales-status.component';\r\nimport {MatDialog} from '@angular/material/dialog';\r\nimport {Country} from '@shared/models/country';\r\nimport {CreateEditRegionComponent} from '../modals/create-edit-region/create-edit-region.component';\r\nimport {Region} from '@shared/models/region';\r\nimport {CreateEditSubRegionComponent} from '../modals/create-edit-sub-region/create-edit-sub-region.component';\r\nimport {SubRegion} from '@shared/models/sub-region';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CountryRegionService {\r\n\r\n  constructor(\r\n    private readonly dialog: MatDialog,\r\n  ) { }\r\n\r\n  createEditCountryModal(country?: Country): Observable<boolean> {\r\n    return this.dialog\r\n      .open<CreateEditCountryComponent>(CreateEditCountryComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {country},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  createEditRegionModal(region?: Region, selectedCountry?: number): Observable<boolean> {\r\n    return this.dialog\r\n      .open<CreateEditRegionComponent>(CreateEditRegionComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {region, selectedCountry},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  createEditSubRegionModal(countrySelected: number = null, subRegion?: SubRegion, selectedRegion?: number): Observable<boolean> {\r\n    return this.dialog\r\n      .open<CreateEditSubRegionComponent>(CreateEditSubRegionComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {countrySelected, subRegion, selectedRegion},\r\n        panelClass: 'modal-overflow-visible',\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n\r\n","import {Injectable} from '@angular/core';\r\nimport {EventCompany} from \"../../crm/models/event-company\";\r\nimport {Observable} from \"rxjs\";\r\nimport {map} from \"rxjs/operators\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {environment} from \"@env/environment\";\r\nimport {EditEventModalComponent} from \"../modals/edit-event-modal/edit-event-modal.component\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EventSalesChainService {\r\n\r\n  API_URL = environment.base_url + environment.business_partners_url;\r\n  readonly url = 'event_companies/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n\r\n  }\r\n\r\n  updateEvent(eventId: number, person: EventCompany): Observable<EventCompany> {\r\n    return this.httpClient.patch<{ data: EventCompany }>(this.API_URL + this.url + eventId + '/', person).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  deleteEvent(person: EventCompany) {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${person.id}/`)\r\n  }\r\n\r\n  updateComment(eventId: number, person) {\r\n    return this.httpClient.patch(this.API_URL + this.url + `${eventId}/`, person)\r\n  }\r\n\r\n  editCompanyToEvent(eventCompany: EventCompany): Observable<any> {\r\n    return this.dialog\r\n      .open<EditEventModalComponent>(EditEventModalComponent, {\r\n        width: '800px',\r\n        data: {type: 'edit', eventCompany},\r\n        disableClose: true,\r\n      })\r\n      .afterClosed()\r\n      .pipe();\r\n  }\r\n}\r\n"],"names":["ENomenclatureType","BehaviorSubject","iif","Subject","switchMap","debounceTime","distinctUntilChanged","filter","map","tap","UntilDestroy","untilDestroyed","i0","ctx_r5","SalesPricesComponent","constructor","fb","adapterService","nomenclatureService","group","name","code","has_price","type","label","value","ASSEMBLY","MANUFACTURED","currentPage","generateQueryKey","searchForm","search$","pipe","prepareForSearch","isShowAll","getForPagination","query","response","count","results","get","nomenclatures","length","paginateToFistPage","isLoading","ngOnInit","name$","next","subscribe","code$","isStartFirstPage","paginator","changePage","selectedNomenclature","newQueryKey","queryKey","push","key","controls","paginate","event","page","onShowAll","onEditNomenclaturePrice","editNomenclaturePriceDialog","Boolean","selectors","viewQuery","ctx"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}