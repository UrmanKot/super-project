{"version":3,"file":"src_app_reports_reports_module_ts.js","mappings":"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","sources":["./src/app/reports/components/reports-accounting-categories/reports-accounting-categories.component.ts","./src/app/reports/components/reports-accounting-categories/reports-accounting-categories.component.html","./src/app/reports/components/reports-additional-expenses/reports-additional-expenses.component.ts","./src/app/reports/components/reports-additional-expenses/reports-additional-expenses.component.html","./src/app/reports/components/reports-company-accounting-number/reports-company-accounting-number.component.ts","./src/app/reports/components/reports-company-accounting-number/reports-company-accounting-number.component.html","./src/app/reports/components/reports-correlation/reports-correlation.component.ts","./src/app/reports/components/reports-correlation/reports-correlation.component.html","./src/app/reports/components/reports-cost-reports/reports-cost-reports.component.ts","./src/app/reports/components/reports-cost-reports/reports-cost-reports.component.html","./src/app/reports/components/reports-currencies/reports-currencies.component.ts","./src/app/reports/components/reports-currencies/reports-currencies.component.html","./src/app/reports/components/reports-filters/reports-filters.component.ts","./src/app/reports/components/reports-filters/reports-filters.component.html","./src/app/reports/components/reports-in/reports-in.component.ts","./src/app/reports/components/reports-in/reports-in.component.html","./src/app/reports/components/reports-invoice-page/reports-invoice-page.component.ts","./src/app/reports/components/reports-invoice-page/reports-invoice-page.component.html","./src/app/reports/components/reports-invoices/reports-invoices.component.ts","./src/app/reports/components/reports-invoices/reports-invoices.component.html","./src/app/reports/components/reports-item-card/reports-item-card.component.ts","./src/app/reports/components/reports-item-card/reports-item-card.component.html","./src/app/reports/components/reports-layout/reports-layout.component.ts","./src/app/reports/components/reports-layout/reports-layout.component.html","./src/app/reports/components/reports-new-cost-report/reports-new-cost-report.component.ts","./src/app/reports/components/reports-new-cost-report/reports-new-cost-report.component.html","./src/app/reports/components/reports-nomenclature-accounting-number/reports-nomenclature-accounting-number.component.ts","./src/app/reports/components/reports-nomenclature-accounting-number/reports-nomenclature-accounting-number.component.html","./src/app/reports/components/reports-old-cost-report/reports-old-cost-report.component.ts","./src/app/reports/components/reports-old-cost-report/reports-old-cost-report.component.html","./src/app/reports/components/reports-out/reports-out.component.ts","./src/app/reports/components/reports-out/reports-out.component.html","./src/app/reports/components/reports-payments-checker/reports-payments-checker.component.ts","./src/app/reports/components/reports-payments-checker/reports-payments-checker.component.html","./src/app/reports/components/reports-purchase-categories-accounting-number/reports-purchase-categories-accounting-number.component.ts","./src/app/reports/components/reports-purchase-categories-accounting-number/reports-purchase-categories-accounting-number.component.html","./src/app/reports/components/reports-service-invoice-page/reports-service-invoice-page.component.ts","./src/app/reports/components/reports-service-invoice-page/reports-service-invoice-page.component.html","./src/app/reports/components/reports-technologies-accounting-number/reports-technologies-accounting-number.component.ts","./src/app/reports/components/reports-technologies-accounting-number/reports-technologies-accounting-number.component.html","./src/app/reports/components/reports-warehouse-balance/reports-warehouse-balance.component.ts","./src/app/reports/components/reports-warehouse-balance/reports-warehouse-balance.component.html","./src/app/reports/components/reposts-auxiliary-invoices-accounting-number/reports-auxiliary-invoices-accounting-number.component.ts","./src/app/reports/components/reposts-auxiliary-invoices-accounting-number/reports-auxiliary-invoices-accounting-number.component.html","./src/app/reports/modals/accounting-category-picker/accounting-category-picker.component.ts","./src/app/reports/modals/accounting-category-picker/accounting-category-picker.component.html","./src/app/reports/modals/additional-expenses-modal/additional-expenses-modal.component.ts","./src/app/reports/modals/additional-expenses-modal/additional-expenses-modal.component.html","./src/app/reports/modals/create-edit-accounting-category/create-edit-accounting-category.component.ts","./src/app/reports/modals/create-edit-accounting-category/create-edit-accounting-category.component.html","./src/app/reports/modals/create-edit-additional-expenses/create-edit-additional-expenses.component.ts","./src/app/reports/modals/create-edit-additional-expenses/create-edit-additional-expenses.component.html","./src/app/reports/modals/create-edit-invoice-service/create-edit-invoice-service.component.ts","./src/app/reports/modals/create-edit-invoice-service/create-edit-invoice-service.component.html","./src/app/reports/modals/create-edit-report-filter/create-edit-report-filter.component.ts","./src/app/reports/modals/create-edit-report-filter/create-edit-report-filter.component.html","./src/app/reports/modals/reports-filters-modal/reports-filters-modal.component.ts","./src/app/reports/modals/reports-filters-modal/reports-filters-modal.component.html","./src/app/reports/reports.module.ts","./src/app/reports/reports.routing.ts","./src/app/reports/services/accounting-categories.service.ts","./src/app/reports/services/accounting-products.service.ts","./src/app/reports/services/additional-expense.service.ts","./src/app/reports/services/cost-reports.service.ts","./src/app/reports/services/payment-checker.service.ts","./src/app/reports/services/report-filter.service.ts","./src/app/reports/services/services.service.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport {AccountingCategoriesService} from \"../../services/accounting-categories.service\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {Currency} from \"@shared/models/currency\";\r\nimport {AccountingCategory} from \"../../models/accounting-category\";\r\nimport {MenuItem} from \"primeng/api\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-accounting-categories',\r\n  templateUrl: './reports-accounting-categories.component.html',\r\n  styleUrls: ['./reports-accounting-categories.component.scss']\r\n})\r\nexport class ReportsAccountingCategoriesComponent implements OnInit {\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Accounting Category',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditCategory()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveCategory()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  categories: AccountingCategory[] = [];\r\n  selectedCategory: AccountingCategory;\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private accountingCategoriesService: AccountingCategoriesService,\r\n    private readonly modalService: ModalService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getCategories();\r\n  }\r\n\r\n  getCategories() {\r\n    this.accountingCategoriesService.get().pipe(\r\n      untilDestroyed(this)\r\n    ).subscribe(currencies => {\r\n      this.categories = currencies;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onAddCategory() {\r\n    this.accountingCategoriesService.createEditCurrencyModal('create').subscribe(currency => {\r\n      if (currency) {\r\n        this.categories.unshift(currency);\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditCategory() {\r\n    this.accountingCategoriesService.createEditCurrencyModal('edit', this.selectedCategory).subscribe(currency => {\r\n      if (currency) {\r\n        const index = this.categories.findIndex(t => t.id === this.selectedCategory.id);\r\n        this.categories[index] = currency;\r\n        this.selectedCategory = this.categories[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveCategory() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.accountingCategoriesService.delete(this.selectedCategory).subscribe(() => {\r\n          const index = this.categories.findIndex(c => c.id === this.selectedCategory.id);\r\n          this.categories.splice(index, 1);\r\n          this.selectedCategory = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Accounting Categories</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Currency\" (click)=\"onAddCategory()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"categories.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedCategory\"\r\n        [value]=\"categories\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedCategory\">Choose the Accounting Category to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedCategory\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 70%\">Name</th>\r\n            <th style=\"width: 25%\">Accounting Number</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-currency let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"currency\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 70%\">{{currency.name}}</td>\r\n            <td style=\"width: 25%\">{{currency.accounting_number}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && categories.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {MenuItem} from \"primeng/api\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {AdditionalExpense} from \"../../models/additional-expense\";\r\nimport {AdditionalExpenseService} from \"../../services/additional-expense.service\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-additional-expenses',\r\n  templateUrl: './reports-additional-expenses.component.html',\r\n  styleUrls: ['./reports-additional-expenses.component.scss']\r\n})\r\nexport class ReportsAdditionalExpensesComponent implements OnInit {\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Additional Expenses',\r\n    items: [\r\n      // {\r\n      //   label: 'Edit',\r\n      //   icon: 'pi pi-pencil',\r\n      //   command: () => this.onEditAdditionalExpenses()\r\n      // },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveAdditionalExpenses()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  additionalExpenses: AdditionalExpense[] = [];\r\n  selectedAdditionalExpense: AdditionalExpense;\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private readonly currencyService: AdditionalExpenseService,\r\n    private readonly router: Router,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getAdditionalExpenses();\r\n  }\r\n\r\n  getAdditionalExpenses() {\r\n    this.currencyService.get().pipe(\r\n      untilDestroyed(this)\r\n    ).subscribe(additionalExpenses => {\r\n      this.additionalExpenses = additionalExpenses;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onAddAdditionalExpense() {\r\n    this.currencyService.createEditCurrencyModal('create').subscribe(additionalExpenses => {\r\n      if (additionalExpenses) {\r\n        this.additionalExpenses.unshift(additionalExpenses);\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditAdditionalExpenses() {\r\n    this.currencyService.createEditCurrencyModal('edit', this.selectedAdditionalExpense).subscribe(additionalExpenses => {\r\n      if (additionalExpenses) {\r\n        const index = this.additionalExpenses.findIndex(a => a.id === this.selectedAdditionalExpense.id);\r\n        this.additionalExpenses[index] = additionalExpenses;\r\n        this.selectedAdditionalExpense = this.additionalExpenses[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveAdditionalExpenses() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.currencyService.delete(this.selectedAdditionalExpense.name).subscribe(() => {\r\n          const index = this.additionalExpenses.findIndex(a => a.name === this.selectedAdditionalExpense.name);\r\n          this.additionalExpenses.splice(index, 1);\r\n          this.selectedAdditionalExpense = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Additional Expenses</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Additional Expenses\" (click)=\"onAddAdditionalExpense()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"additionalExpenses.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedAdditionalExpense\"\r\n        [value]=\"additionalExpenses\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedAdditionalExpense\">Choose the Additional Expense to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedAdditionalExpense\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 95%\">Name</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-additionalExpense let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"additionalExpense\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 95%\">{{additionalExpense.name}}</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && additionalExpenses.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {BehaviorSubject, iif, Observable, switchMap, tap} from 'rxjs';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {filter, map} from 'rxjs/operators';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {Company} from \"../../../crm/models/company\";\r\nimport {CompanyService} from \"../../../crm/services/company.service\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-company-accounting-number',\r\n  templateUrl: './reports-company-accounting-number.component.html',\r\n  styleUrls: ['./reports-company-accounting-number.component.scss']\r\n})\r\nexport class ReportsCompanyAccountingNumberComponent implements OnInit {\r\n\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    category_id: [null],\r\n  });\r\n\r\n  currentPage = 1;\r\n  isStartFirstPage = false;\r\n\r\n  isShowAll = false;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n  isLoading = true;\r\n\r\n  companiesCount = 0;\r\n\r\n  selectedCompany: Company = null;\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  companies$: Observable<Company[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      iif(() =>\r\n          !this.isShowAll,\r\n        this.companyService.getForPagination(this.query).pipe(\r\n          tap(response => this.companiesCount = response.count),\r\n          map(response => response.results)\r\n        ),\r\n        this.companyService.get(this.query).pipe(\r\n          tap(companies => this.companiesCount = companies.length)\r\n        )\r\n      )),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private companyService: CompanyService,\r\n    private adapterService: AdapterService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedCompany = null;\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n      {name: 'is_purchased_only', value: true},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: true},);\r\n    }\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  onSelectCompany(company: Partial<Company>) {\r\n    this.searchForm.get('name').patchValue(company?.name ?? null);\r\n    this.search$.next();\r\n  }\r\n\r\n  private paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isShowAll = value;\r\n\r\n    if (!this.isShowAll) {\r\n      this.currentPage = 1;\r\n    }\r\n\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCompanyCategory(id: number) {\r\n    this.searchForm.get('category_id').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onEditCompanyAccountingNumber() {\r\n    this.companyService.editCompanyAccountingNumberDialog(this.selectedCompany).pipe(\r\n      filter(company => !!company)\r\n    ).subscribe(() => this.search$.next());\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Company Accounting Number</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form class=\"form mb-3\">\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <pek-company-picker (selectCompanyFull)=\"onSelectCompany($event)\"></pek-company-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Category</label>\r\n            <pek-company-category-picker\r\n              (selectCompanyCategory)=\"onSelectCompanyCategory($event)\">\r\n            </pek-company-category-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n        </div>\r\n        <div class=\"col-3 edit-button\">\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-pencil\"\r\n            label=\"Edit Accounting Number\"\r\n            (click)=\"onEditCompanyAccountingNumber()\"\r\n            [disabled]=\"!selectedCompany\"\r\n          >\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        selectionMode=\"single\"\r\n        dataKey=\"id\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 24.25rem)\"\r\n        [value]=\"companies$| async\"\r\n        [(selection)]=\"selectedCompany\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 75%\">Name</th>\r\n            <th style=\"width: 20%\" class=\"text-center\">Accounting Number</th>\r\n          </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"body\" let-company let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"company\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{(currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 75%\">{{ company.name }}</td>\r\n            <td style=\"width: 20%\" class=\"text-center\">{{ company.accounting_number }}</td>\r\n          </tr>\r\n          <tr class=\"table-pagination-preloader\" *ngIf=\"isLoading\">\r\n            <div>\r\n              <i class=\"fas fa-circle-notch fa-spin fa-3x\"></i>\r\n            </div>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n      <div\r\n        *ngIf=\"!isShowAll\"\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"companiesCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"companiesCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll(true)\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(false)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {PurchaseCategory} from \"../../../purchasing/models/purchase-category\";\r\nimport {TreeNode} from \"primeng/api\";\r\nimport {PurchasingCategoryService} from \"../../../purchasing/services/purchasing-category.service\";\r\nimport {TreeService} from \"@shared/services/tree.service\";\r\nimport {cloneDeep} from 'lodash-es';\r\nimport {AccountingCategoriesService} from \"../../services/accounting-categories.service\";\r\nimport {finalize} from \"rxjs\";\r\nimport {AccountingTypeService} from \"../../services/accounting-type.service\";\r\nimport {AccountingType} from \"../../models/accounting-types\";\r\nimport {filter} from \"rxjs/operators\";\r\n\r\n@Component({\r\n  selector: 'pek-reports-correlation',\r\n  templateUrl: './reports-correlation.component.html',\r\n  styleUrls: ['./reports-correlation.component.scss']\r\n})\r\nexport class ReportsCorrelationComponent implements OnInit {\r\n  tabIndex = 0;\r\n\r\n  accountingTypes: AccountingType[] = [];\r\n  selectedAccountingType: AccountingType;\r\n  isLoadingAccountingTypes = true;\r\n\r\n\r\n  isLoading = true;\r\n  purchasingCategories: PurchaseCategory[] = [];\r\n  selectedNode: TreeNode<PurchaseCategory>;\r\n  categoriesTree: TreeNode<PurchaseCategory>[] = [];\r\n\r\n  isSavingCategory = false;\r\n\r\n  isSavingTypeCategory = false;\r\n\r\n  expanseMap = {};\r\n\r\n  constructor(\r\n    private purchasingCategoryService: PurchasingCategoryService,\r\n    private accountingTypesService: AccountingTypeService,\r\n    private readonly accountingCategoriesService: AccountingCategoriesService,\r\n    private readonly treeService: TreeService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getPurchasingCategory();\r\n    this.getAccountingTypes();\r\n  }\r\n\r\n  getAccountingTypes() {\r\n    this.accountingTypesService.getAccountingTypes().subscribe(accountingTypes => {\r\n      this.accountingTypes = accountingTypes;\r\n      this.accountingTypes = this.accountingTypes.filter(type => type.name !== 'Purchased');\r\n      this.isLoadingAccountingTypes = false;\r\n      this.selectedAccountingType = null;\r\n    });\r\n  }\r\n\r\n  getPurchasingCategory() {\r\n    this.purchasingCategoryService.getAll().subscribe(categories => {\r\n      this.purchasingCategories = categories;\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.categoriesTree) {\r\n      this.treeService.mapExpansion(this.categoriesTree, this.expanseMap);\r\n    }\r\n\r\n    this.categoriesTree = this.treeService.createTree(this.purchasingCategories, this.expanseMap);\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  onEditAccountingCategory() {\r\n    this.accountingCategoriesService.openAccountingCategoryPicker(<any>this.selectedNode.data.accounting_category).pipe(\r\n      filter(val => val !== false)\r\n    ).subscribe(category => {\r\n      this.isSavingCategory = true;\r\n\r\n      const send = {\r\n        accounting_category: category?.id ?? null\r\n      }\r\n\r\n      this.purchasingCategoryService.update(send, this.selectedNode.data.id).pipe(\r\n        finalize(() => this.isSavingCategory = false)\r\n      ).subscribe(newCategory => {\r\n        const index = this.purchasingCategories.findIndex(s => s.id === newCategory.id);\r\n        this.purchasingCategories[index].accounting_category = newCategory.accounting_category;\r\n        this.selectedNode = null;\r\n        this.createTree();\r\n      })\r\n\r\n    })\r\n  }\r\n\r\n  onEditAccountingTypeCategory() {\r\n    this.accountingCategoriesService.openAccountingCategoryPicker(<any>this.selectedAccountingType.accounting_category).pipe(\r\n      filter(val => val !== false)\r\n    ).subscribe(category => {\r\n      this.isSavingTypeCategory = true;\r\n\r\n      const send = {\r\n        accounting_category: category?.id ?? null,\r\n        id: this.selectedAccountingType.id\r\n      }\r\n\r\n      this.accountingTypesService.updateAccountingType(<any>send).pipe(\r\n        finalize(() => this.isSavingTypeCategory = false)\r\n      ).subscribe(type => {\r\n        const index = this.accountingTypes.findIndex(s => s.id === type.id);\r\n        this.accountingTypes[index].accounting_category = type.accounting_category;\r\n        this.selectedNode = null;\r\n        this.createTree();\r\n      })\r\n\r\n    })\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Correlation of Accounting Categories</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n\r\n  <p-tabView class=\"custom-tabs\" [(activeIndex)]=\"tabIndex\">\r\n    <p-tabPanel\r\n      [header]=\"'Reports Accounting Types'\"\r\n      [selected]=\"true\"\r\n    >\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #st\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"accountingTypes.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedAccountingType\"\r\n          [value]=\"accountingTypes\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"ml-auto p-button-icon\"\r\n                icon=\"pi pi-pencil\"\r\n                label=\"Edit Accounting Category\"\r\n                (click)=\"onEditAccountingTypeCategory()\"\r\n                [loading]=\"isSavingTypeCategory\"\r\n                [disabled]=\"!selectedAccountingType\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n              <th style=\"width: 45%\">Name</th>\r\n              <th style=\"width: 55%\">Accounting Category</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-accountingCategory let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"accountingCategory \">\r\n              <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n              <td style=\"width: 25%\">{{accountingCategory.name}}</td>\r\n              <td style=\"width: 35%\">{{accountingCategory.accounting_category?.name}}</td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoadingAccountingTypes\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingAccountingTypes\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"st.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!st.paginator && !isLoadingAccountingTypes && accountingTypes.length > 0\"\r\n           class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"st.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </p-tabPanel>\r\n    <p-tabPanel\r\n      [header]=\"'Procurement Categories'\"\r\n    >\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          #dt\r\n          [value]=\"categoriesTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedNode\"\r\n          [scrollable]=\"true\"\r\n          scrollHeight=\"calc(100vh - 22rem)\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-down\"\r\n                label=\"Expand All\"\r\n                class=\"ml-auto mr-2\"\r\n                (click)=\"onExpandAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-up\"\r\n                label=\"Collapse All\"\r\n                (click)=\"onCollapseAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"ml-2 p-button-icon\"\r\n                icon=\"pi pi-pencil\"\r\n                label=\"Edit Accounting Category\"\r\n                (click)=\"onEditAccountingCategory()\"\r\n                [loading]=\"isSavingCategory\"\r\n                [disabled]=\"!selectedNode\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 30%; padding-left: 48px\">Name</th>\r\n              <th style=\"width: 30%\">Description</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Material</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Accounting Category</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr\r\n              [ttRow]=\"rowNode\"\r\n              [ttSelectableRow]=\"rowNode\"\r\n            >\r\n              <td style=\"width: 30%\">\r\n                <div class=\"table-toggle\">\r\n                  <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                  <span>{{rowData.name}}</span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 30%\">\r\n                {{rowData.description}}\r\n              </td>\r\n              <td style=\"width: 20%\" class=\"text-center\">\r\n                {{rowData.is_material ? 'Tangible' : 'Intangible'}}\r\n              </td>\r\n              <td style=\"width: 20%\" class=\"text-center\">\r\n                {{rowData.accounting_category?.name}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </p-tabPanel>\r\n  </p-tabView>\r\n</div>\r\n\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {Paginator} from \"primeng/paginator\";\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {BehaviorSubject, iif, Observable, Subject, switchMap} from \"rxjs\";\r\nimport {debounceTime, distinctUntilChanged, filter, map, tap} from \"rxjs/operators\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {CostReportsService} from \"../../services/cost-reports.service\";\r\nimport {AccountingProduct} from \"../../models/accounting-product\";\r\nimport {MenuItem} from \"primeng/api\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-cost-reports',\r\n  templateUrl: './reports-cost-reports.component.html',\r\n  styleUrls: ['./reports-cost-reports.component.scss']\r\n})\r\nexport class ReportsCostReportsComponent implements OnInit {\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  currentPage = 1;\r\n  isStartFirstPage = false;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    list_product__nomenclature__name: [null],\r\n    name: [null],\r\n    list_product__nomenclature__code: [null],\r\n    code: [null],\r\n    warehouse: [null],\r\n    locator: [null]\r\n  });\r\n\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n\r\n  isShowAll = false;\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n  query: QuerySearch[] = [];\r\n  isLoading = true;\r\n\r\n  reportsCount = 0;\r\n  selectedReport: AccountingProduct = null;\r\n\r\n  reports$: Observable<AccountingProduct[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      iif(() =>\r\n          !this.isShowAll,\r\n        this.costReportsService.costReportsPagination(this.query).pipe(\r\n          tap(response => this.reportsCount = response.count),\r\n          map(response => response.results)\r\n        ),\r\n        this.costReportsService.costReports(this.query).pipe(\r\n          tap(companies => this.reportsCount = companies.length)\r\n        )\r\n      )),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private adapterService: AdapterService,\r\n    private costReportsService: CostReportsService,\r\n    private readonly router: Router,\r\n    private readonly route: ActivatedRoute,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.searchForm.get('name').patchValue(this.searchForm.get('list_product__nomenclature__name').value)),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.searchForm.get('code').patchValue(this.searchForm.get('list_product__nomenclature__code').value)),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedReport = null;\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n    ];\r\n\r\n    if (!this.isShowAll) {\r\n      this.query.push({name: 'paginated', value: true},);\r\n    }\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null && this.searchForm.controls[key].value !== '') {\r\n\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n\r\n      }\r\n    }\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onShowAll(value: boolean) {\r\n    this.isShowAll = value;\r\n\r\n    if (!this.isShowAll) {\r\n      this.currentPage = 1;\r\n    }\r\n\r\n    this.search$.next();\r\n  }\r\n\r\n  private paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  onSelectWarehouse(id: number) {\r\n    this.searchForm.get('warehouse').patchValue(id)\r\n    this.search$.next()\r\n  }\r\n\r\n  onSelectLocator(id: number) {\r\n    this.searchForm.get('locator').patchValue(id)\r\n    this.search$.next()\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Cost Reports</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form class=\"form mb-3\" [formGroup]=\"searchForm\">\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input type=\"text\" pInputText formControlName=\"list_product__nomenclature__name\" (ngModelChange)=\"name$.next()\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Code</label>\r\n            <input type=\"text\" pInputText formControlName=\"list_product__nomenclature__code\" (ngModelChange)=\"code$.next()\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n         <div class=\"form-group\">\r\n           <label>Warehouse</label>\r\n           <pek-warehouse-picker (selectWarehouse)=\"onSelectWarehouse($event)\"></pek-warehouse-picker>\r\n         </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Locator</label>\r\n            <pek-locator-picker\r\n              [warehouseId]=\"searchForm.get('warehouse').value\"\r\n              [isAllLocators]=\"false\"\r\n              [isDisabled]=\"true\"\r\n              (selectLocator)=\"onSelectLocator($event)\"\r\n            ></pek-locator-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Zero price</label>\r\n            <p-checkbox [binary]=\"true\" inputId=\"binary\"></p-checkbox>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-12 mt-1\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedReport\">Choose the Cost Reports to edit</p>\r\n            <a\r\n              pButton\r\n              type=\"button\"\r\n              class=\"ml-auto p-button-icon\"\r\n              icon=\"pi pi-angle-double-right\"\r\n              label=\"Cost Report\"\r\n              target=\"_blank\"\r\n              [routerLink]=\"selectedReport?.is_old_cost_report ? ('old/' + selectedReport?.list_product_id) : ('new/' + selectedReport?.task_id)\"\r\n              [class.disabled]=\"!selectedReport\"\r\n            ></a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        selectionMode=\"single\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        scrollHeight=\"calc(100vh - 24.25rem)\"\r\n        [value]=\"reports$| async\"\r\n        [(selection)]=\"selectedReport\"\r\n      >\r\n<!--        <ng-template pTemplate=\"caption\">-->\r\n<!--          <div class=\"d-flex\">-->\r\n<!--            <p class=\"subtitle\" *ngIf=\"!selectedReport\">Choose the Cost Reports to edit</p>-->\r\n<!--            <a-->\r\n<!--              pButton-->\r\n<!--              type=\"button\"-->\r\n<!--              class=\"ml-auto p-button-icon\"-->\r\n<!--              icon=\"pi pi-angle-double-right\"-->\r\n<!--              label=\"Cost Report\"-->\r\n<!--              target=\"_blank\"-->\r\n<!--              [class.disabled]=\"!selectedReport\"-->\r\n<!--            ></a>-->\r\n<!--          </div>-->\r\n<!--        </ng-template>-->\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"index-header text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 8%\" class=\"text-center\">ID</th>\r\n            <th style=\"width: 22%\">Code</th>\r\n            <th style=\"width: 40%\">Name</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Date</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Cost SUM</th>\r\n          </tr>\r\n        </ng-template>\r\n\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"product\">\r\n            <td style=\"width: 5%\" class=\"text-center\">{{(currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 8%\" class=\"text-center\">{{product.list_product_id}}</td>\r\n            <td style=\"width: 22%\">{{product.nomenclature.code}}\r\n              <b *ngIf=\"product.is_old_cost_report\">(old)</b>\r\n            </td>\r\n            <td style=\"width: 40%\">{{product.nomenclature.name}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{product.completed|date:'dd/MM/yyyy'}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{product.total_cost | moneyFormat}} </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"10\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n      <div\r\n        *ngIf=\"!isShowAll\"\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"reportsCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"reportsCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n        <p-button\r\n          (click)=\"onShowAll(true)\"\r\n          class=\"paginator-all\"\r\n          type=\"button\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          All\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n    <div *ngIf=\"isShowAll\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"onShowAll(false)\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {MenuItem} from \"primeng/api\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {CurrenciesService} from \"../../services/currencies.service\";\r\nimport {Currency} from \"@shared/models/currency\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-currencies',\r\n  templateUrl: './reports-currencies.component.html',\r\n  styleUrls: ['./reports-currencies.component.scss']\r\n})\r\nexport class ReportsCurrenciesComponent implements OnInit {\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Currency',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditCurrency()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveCurrency()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  currencies: Currency[] = [];\r\n  selectedCurrency: Currency;\r\n  isLoading = true;\r\n\r\n  constructor(\r\n    private readonly currencyService: CurrenciesService,\r\n    private readonly router: Router,\r\n    private readonly route: ActivatedRoute,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getCurrencies();\r\n  }\r\n\r\n  getCurrencies() {\r\n    this.currencyService.get().pipe(\r\n      untilDestroyed(this)\r\n    ).subscribe(currencies => {\r\n      this.currencies = currencies;\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onAddCurrency() {\r\n    this.currencyService.createEditCurrencyModal('create').subscribe(currency => {\r\n      if (currency) {\r\n        this.currencies.unshift(currency);\r\n      }\r\n    });\r\n  }\r\n\r\n  onEditCurrency() {\r\n    this.currencyService.createEditCurrencyModal('edit', this.selectedCurrency).subscribe(currency => {\r\n      if (currency) {\r\n        const index = this.currencies.findIndex(t => t.code === this.selectedCurrency.code);\r\n        this.currencies[index] = currency;\r\n        this.selectedCurrency = this.currencies[index];\r\n      }\r\n    });\r\n  }\r\n\r\n  onRemoveCurrency() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.currencyService.delete(this.selectedCurrency).subscribe(() => {\r\n          const index = this.currencies.findIndex(c => c.code === this.selectedCurrency.code);\r\n          this.currencies.splice(index, 1);\r\n          this.selectedCurrency = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Currencies</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button pButton type=\"button\" icon=\"pi pi-plus\" label=\"New Currency\" (click)=\"onAddCurrency()\"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"currencies.length > 0\"\r\n        [rows]=\"10\"\r\n        [(selection)]=\"selectedCurrency\"\r\n        [value]=\"currencies\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <p class=\"subtitle\" *ngIf=\"!selectedCurrency\">Choose the Currency to edit</p>\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedCurrency\"></p-menubar>\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th style=\"width: 30%\">Name</th>\r\n            <th style=\"width: 30%\">Code</th>\r\n            <th style=\"width: 15%\" class=\"text-center\">Symbol</th>\r\n            <th class=\"text-center\" style=\"width: 20%\">Active</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-currency let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"currency\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td style=\"width: 30%\">{{currency.name}}</td>\r\n            <td style=\"width: 30%\">{{currency.code}}</td>\r\n            <td style=\"width: 15%\" class=\"text-center\">{{currency.symbol}}</td>\r\n            <td style=\"width: 20%\" class=\"text-center\">\r\n              <span class=\"badge badge_success\" *ngIf=\"currency.is_active\">YES</span>\r\n              <span class=\"badge badge_danger\" *ngIf=\"!currency.is_active\">NO</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && currencies.length > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {InvoiceFilterService} from \"../../services/invoice-filter.service\";\r\nimport {InvoiceFilter} from \"../../models/invoice-filter\";\r\nimport {MenuItem} from \"primeng/api\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {ReportFilterService} from \"../../services/report-filter.service\";\r\nimport {ReportFilter} from \"../../models/report-filter\";\r\nimport {J} from \"@angular/cdk/keycodes\";\r\n\r\n@Component({\r\n  selector: 'pek-reports-filters',\r\n  templateUrl: './reports-filters.component.html',\r\n  styleUrls: ['./reports-filters.component.scss']\r\n})\r\nexport class ReportsFiltersComponent implements OnInit {\r\n  tabIndex = 0;\r\n\r\n  menuItemsInvoiceFilter: MenuItem[] = [{\r\n    label: 'Selected Invoice Filter',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditInvoiceFilter()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveInvoiceFilter()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  menuItemsReportFilter: MenuItem[] = [{\r\n    label: 'Selected Report Filter',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditReportFilter()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveReportFilter()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  invoiceFilters: InvoiceFilter[] = [];\r\n  selectedInvoiceFilter: InvoiceFilter;\r\n  isLoadingInvoiceFilters = true;\r\n\r\n  reportFilters: ReportFilter[] = [];\r\n  selectedReportsFilter: ReportFilter;\r\n  isLoadingReportFilters = true;\r\n\r\n  constructor(\r\n    private invoiceFilterService: InvoiceFilterService,\r\n    private reportFilterService: ReportFilterService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getInvoiceFilters();\r\n    this.getReportsFilters();\r\n  }\r\n\r\n  onCreate() {\r\n    this.tabIndex === 0 ? this.createInvoiceFilter() : this.createReportFilter();\r\n  }\r\n\r\n  getInvoiceFilters() {\r\n    this.isLoadingInvoiceFilters = true;\r\n    this.selectedInvoiceFilter = null;\r\n    this.invoiceFilters = [];\r\n\r\n    this.invoiceFilterService.getFilters().subscribe(filters => {\r\n      this.invoiceFilters = filters;\r\n      this.isLoadingInvoiceFilters = false;\r\n    });\r\n  }\r\n\r\n  private createInvoiceFilter() {\r\n    this.invoiceFilterService.createEditInvoiceFilter('create').subscribe(filter => {\r\n      if (filter) {\r\n        this.getInvoiceFilters();\r\n        // this.invoiceFilters.unshift(filter);\r\n      }\r\n    });\r\n  }\r\n\r\n  private onRemoveInvoiceFilter() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.invoiceFilterService.deleteFilter(this.selectedInvoiceFilter).subscribe(() => {\r\n          // const index = this.invoiceFilters.findIndex(id => id.id === this.selectedInvoiceFilter.id);\r\n          // this.invoiceFilters.splice(index, 1);\r\n          // this.selectedInvoiceFilter = null;\r\n          this.getInvoiceFilters();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  private onEditInvoiceFilter() {\r\n    this.invoiceFilterService.createEditInvoiceFilter('edit', this.selectedInvoiceFilter).subscribe(filter => {\r\n      if (filter) {\r\n        // const index = this.invoiceFilters.findIndex(i => i.id === this.selectedInvoiceFilter.id);\r\n        // this.invoiceFilters[index] = filter;\r\n        // this.selectedInvoiceFilter= this.invoiceFilters[index];\r\n        this.getInvoiceFilters();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n  getReportsFilters() {\r\n    this.isLoadingReportFilters = true;\r\n    this.selectedReportsFilter = null;\r\n    this.reportFilters = [];\r\n\r\n    this.reportFilterService.getFilters().subscribe(filters => {\r\n      this.reportFilters = filters.map(f => {\r\n        return {\r\n          ...f,\r\n          opened: false,\r\n        }\r\n      });\r\n      this.isLoadingReportFilters = false;\r\n    });\r\n  }\r\n\r\n\r\n  private createReportFilter() {\r\n    this.reportFilterService.createEditReportFilter('create').subscribe(filter => {\r\n      if (filter) {\r\n        this.getReportsFilters();\r\n        // this.reportFilters.unshift(filter);\r\n      }\r\n    });\r\n  }\r\n\r\n  private onEditReportFilter() {\r\n    this.reportFilterService.createEditReportFilter('edit', this.selectedReportsFilter).subscribe(filter => {\r\n      if (filter) {\r\n        // const index = this.reportFilters.findIndex(i => i.id === this.selectedReportsFilter.id);\r\n        // this.reportFilters[index] = filter;\r\n        // this.selectedReportsFilter = this.reportFilters[index];\r\n        this.getReportsFilters()\r\n      }\r\n    });\r\n  }\r\n\r\n  private onRemoveReportFilter() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.reportFilterService.deleteFilter(this.selectedReportsFilter).subscribe(() => {\r\n          // const index = this.reportFilters.findIndex(id => id.id === this.selectedReportsFilter.id);\r\n          // this.reportFilters.splice(index, 1);\r\n          // this.selectedReportsFilter = null;\r\n          this.getReportsFilters();\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  getCategories(ids: string) {\r\n    return ids.split(',').map(id => +id);\r\n  }\r\n\r\n  openFilter(filter: ReportFilter) {\r\n    const opened = JSON.parse(JSON.stringify(filter.opened));\r\n\r\n    this.reportFilters.forEach(f => f.opened = false);\r\n\r\n    if (!opened) {\r\n      filter.opened = true;\r\n    }\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Filters</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        [label]=\"tabIndex === 0 ? 'New Invoice Filter' : 'New Report Filter'\"\r\n        (click)=\"onCreate()\"\r\n      >\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n\r\n    <p-tabView class=\"custom-tabs\" [(activeIndex)]=\"tabIndex\">\r\n      <p-tabPanel\r\n        [header]=\"'Invoice Filters'\"\r\n        [selected]=\"true\">\r\n        <div class=\"page__table\">\r\n          <p-table\r\n            #dt\r\n            selectionMode=\"single\"\r\n            scrollHeight=\"calc(100vh - 18.8rem)\"\r\n            [scrollable]=\"true\"\r\n            [paginator]=\"invoiceFilters.length > 0\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedInvoiceFilter\"\r\n            [value]=\"invoiceFilters\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex\">\r\n                <p class=\"subtitle\" *ngIf=\"!selectedInvoiceFilter\">Choose the Invoice Filter to edit</p>\r\n                <p-menubar class=\"ml-auto\" [model]=\"menuItemsInvoiceFilter\"\r\n                           [class.disabled]=\"!selectedInvoiceFilter\"></p-menubar>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 3%\" class=\"text-center\">#</th>\r\n                <th style=\"width: 15%\">Name</th>\r\n                <th style=\"width: 14%\">Company</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Company Category</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Creation From</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Creation <br>To</th>\r\n                <th style=\"width: 9%\" class=\"text-center\">Invoice <br>Recieved From</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Invoice <br>Recieved To</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Items <br>Recieved From</th>\r\n                <th style=\"width: 7%\" class=\"text-center\">Items <br>Recieved To</th>\r\n                <th style=\"width: 5%\" class=\"text-center\">Related</th>\r\n                <th style=\"width: 5%\" class=\"text-center\">Payment</th>\r\n                <th style=\"width: 5%\" class=\"text-center\">Complete</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Type</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-filter let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"filter\">\r\n                <td style=\"width: 3%\" class=\"text-center\">{{i + 1}}</td>\r\n                <td style=\"width: 15%\">{{filter.name}}</td>\r\n                <td style=\"width: 14%\">{{filter.supplier ? filter.supplier.name : 'All companies'}}</td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  <span *ngIf=\"filter.supplier_category\">{{filter.supplier_category?.name}}</span>\r\n                  <span *ngIf=\"!filter.supplier_category\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  {{filter.system_creation_date_after | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.system_creation_date_after\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  {{filter.system_creation_date_before | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.system_creation_date_before\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 9%\">\r\n                  {{filter.invoice_reception_date_after | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.invoice_reception_date_after\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  {{filter.invoice_reception_date_before | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.invoice_reception_date_before\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 8%\">\r\n                  {{filter.items_reception_date_after | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.items_reception_date_after\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 7%\">\r\n                  {{filter.items_reception_date_before | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.items_reception_date_before\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 5%\">\r\n                  <i class=\"pi pi-check text-success\" *ngIf=\"filter.has_proformas === true\"></i>\r\n                  <i class=\"pi pi-times text-danger\" *ngIf=\"filter.has_proformas === false\"></i>\r\n                  <span *ngIf=\"filter.has_proformas === null\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 5%\">\r\n                  <i class=\"pi pi-check text-success\" *ngIf=\"filter.is_paid === true\"></i>\r\n                  <i class=\"pi pi-times text-danger\" *ngIf=\"filter.is_paid === false\"></i>\r\n                  <span *ngIf=\"filter.is_paid === null\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 5%\">\r\n                  <i class=\"pi pi-check text-success\" *ngIf=\"filter.completed === true\"></i>\r\n                  <i class=\"pi pi-times text-danger\" *ngIf=\"filter.completed === false\"></i>\r\n                  <span *ngIf=\"filter.completed === null\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  <span *ngIf=\"filter.type === '0'\">Invoices</span>\r\n                  <span *ngIf=\"filter.type === '1'\">Auxiliary Invoices</span>\r\n                  <span *ngIf=\"!filter.type\"></span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"14\">\r\n                  <i *ngIf=\"isLoadingInvoiceFilters\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingInvoiceFilters\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"paginatorright\">\r\n              <p-button\r\n                type=\"button\"\r\n                (click)=\"dt.paginator=false\"\r\n                styleClass=\"p-button-text\"\r\n              >All\r\n              </p-button>\r\n            </ng-template>\r\n          </p-table>\r\n        </div>\r\n        <div *ngIf=\"!dt.paginator && !isLoadingInvoiceFilters && invoiceFilters.length > 0\"\r\n             class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=true\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </p-tabPanel>\r\n\r\n      <p-tabPanel\r\n        [header]=\"'Reports Filters'\"\r\n        [selected]=\"false\"\r\n      >\r\n        <div class=\"page__table\">\r\n          <p-table\r\n            #rt\r\n            selectionMode=\"single\"\r\n            scrollHeight=\"calc(100vh - 18.8rem)\"\r\n            [scrollable]=\"true\"\r\n            [paginator]=\"reportFilters.length > 0\"\r\n            [rows]=\"10\"\r\n            [(selection)]=\"selectedReportsFilter\"\r\n            [value]=\"reportFilters\"\r\n          >\r\n            <ng-template pTemplate=\"caption\">\r\n              <div class=\"d-flex\">\r\n                <p class=\"subtitle\" *ngIf=\"!selectedReportsFilter\">Choose the Report Filter to edit</p>\r\n                <p-menubar class=\"ml-auto\" [model]=\"menuItemsReportFilter\"\r\n                           [class.disabled]=\"!selectedReportsFilter\"></p-menubar>\r\n              </div>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"header\">\r\n              <tr>\r\n                <th style=\"width: 3%\" class=\"text-center\">#</th>\r\n                <th style=\"width: 9%\">Filter Name</th>\r\n                <th style=\"width: 11%\">Nomenclature Name</th>\r\n                <th style=\"width: 11%\">Nomenclature Code</th>\r\n                <th style=\"width: 10%\">Company</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Company Category</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Warehouse category</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Creation From</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Creation <br>To</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Invoice <br>Recieved From</th>\r\n                <th style=\"width: 6%\" class=\"text-center\">Invoice <br>Recieved To</th>\r\n                <th style=\"width: 8%\" class=\"text-center\">Items <br>Recieved From</th>\r\n                <th style=\"width: 7%\" class=\"text-center\">Items <br>Recieved To</th>\r\n                <th style=\"width: 5%\" class=\"text-center\">Payment</th>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"body\" let-filter let-i=\"rowIndex\">\r\n              <tr [pSelectableRow]=\"filter\">\r\n                <td style=\"width: 3%\" class=\"text-center\">{{i + 1}}</td>\r\n                <td style=\"width: 9%\">{{filter.name}}</td>\r\n                <td style=\"width: 11%\">\r\n                  {{filter.nomenclature_name}}\r\n                  <span *ngIf=\"!filter.nomenclature_name\"></span>\r\n                </td>\r\n                <td style=\"width: 11%\">\r\n                  {{filter.nomenclature_code}}\r\n                  <span *ngIf=\"!filter.nomenclature_code\"></span>\r\n                </td>\r\n                <td style=\"width: 10%\">{{filter.supplier ? filter.supplier.name : 'All companies'}}</td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  <span *ngIf=\"filter.supplier_category\">{{filter.supplier_category?.name}}</span>\r\n                  <span *ngIf=\"!filter.supplier_category\"></span>\r\n                </td>\r\n                <td style=\"width: 8%\">\r\n                  <div class=\"d-flex justify-content-center filter-wh-category\">\r\n                    <span *ngIf=\"!filter.nomenclature_categories\"></span>\r\n                    <span *ngIf=\"filter.nomenclature_categories\">\r\n                      <button\r\n                        class=\"cat-eye\"\r\n                        (click)=\"openFilter(filter)\"\r\n                        pButton\r\n                        [icon]=\"!filter.opened ? 'pi pi-eye' : 'pi pi-eye-slash'\"\r\n                      ></button>\r\n\r\n                      <div class=\"category-opened\" *ngIf=\"filter.opened\">\r\n                        <pek-multi-product-categories-picker\r\n                          [isDisabled]=\"true\"\r\n                          [currentCategoryIds]=\"getCategories(filter.nomenclature_categories)\"\r\n                        ></pek-multi-product-categories-picker>\r\n                      </div>\r\n                    </span>\r\n                  </div>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  {{filter.system_creation_date_after | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.system_creation_date_after\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  {{filter.system_creation_date_before | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.system_creation_date_before\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 8%\">\r\n                  {{filter.invoice_reception_date_after | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.invoice_reception_date_after\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 6%\">\r\n                  {{filter.invoice_reception_date_before | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.invoice_reception_date_before\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 8%\">\r\n                  {{filter.items_reception_date_after | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.items_reception_date_after\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 7%\">\r\n                  {{filter.items_reception_date_before | date: 'dd/MM/y'}}\r\n                  <span *ngIf=\"!filter.items_reception_date_before\"></span>\r\n                </td>\r\n                <td class=\"text-center\" style=\"width: 5%\">\r\n                  <i class=\"pi pi-check text-success\" *ngIf=\"filter.is_paid === true\"></i>\r\n                  <i class=\"pi pi-times text-danger\" *ngIf=\"filter.is_paid === false\"></i>\r\n                  <span *ngIf=\"filter.is_paid === null\"></span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"emptymessage\">\r\n              <tr>\r\n                <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n                  <i *ngIf=\"isLoadingReportFilters\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                  <span *ngIf=\"!isLoadingReportFilters\">No Records Found</span>\r\n                </td>\r\n              </tr>\r\n            </ng-template>\r\n            <ng-template pTemplate=\"paginatorright\">\r\n              <p-button\r\n                type=\"button\"\r\n                (click)=\"rt.paginator=false\"\r\n                styleClass=\"p-button-text\"\r\n              >All\r\n              </p-button>\r\n            </ng-template>\r\n          </p-table>\r\n        </div>\r\n        <div *ngIf=\"!rt.paginator && !isLoadingReportFilters && reportFilters.length > 0\"\r\n             class=\"paginator-return-pagination\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"rt.paginator=true\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            Return pagination\r\n          </p-button>\r\n        </div>\r\n      </p-tabPanel>\r\n    </p-tabView>\r\n\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {BalanceProduct} from \"../../models/accounting-product\";\r\nimport {ColumnFilterService} from \"@shared/services/column-filter.service\";\r\nimport {AccountingProductsService} from \"../../services/accounting-products.service\";\r\nimport {Observable, of, startWith, Subject, switchMap} from \"rxjs\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {debounceTime, distinctUntilChanged, filter, tap} from \"rxjs/operators\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {Table} from \"primeng/table\";\r\nimport {\r\n  MultiProductCategoriesPickerComponent\r\n} from \"@shared/pickers/multi-product-categories-picker/multi-product-categories-picker.component\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-in',\r\n  templateUrl: './reports-in.component.html',\r\n  styleUrls: ['./reports-in.component.scss']\r\n})\r\nexport class ReportsInComponent implements OnInit {\r\n  @ViewChild(MultiProductCategoriesPickerComponent) picker: MultiProductCategoriesPickerComponent;\r\n\r\n  @ViewChild('dt') dt: Table;\r\n\r\n  isLoading = false;\r\n  balanceProducts: BalanceProduct[] = [];\r\n\r\n  query: QuerySearch[] = [];\r\n  count = 0;\r\n\r\n  supplierTotalCost = 0;\r\n  supplierTotalPrice = 0;\r\n\r\n  isGenerate = false;\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    code: [null],\r\n    supplier: [null],\r\n    supplier_category: [null],\r\n    categories: [null],\r\n    system_creation_date_after: [null],\r\n    system_creation_date_before: [null],\r\n    invoice_reception_date_after: [null],\r\n    invoice_reception_date_before: [null],\r\n    items_reception_date_after: [null],\r\n    items_reception_date_before: [null],\r\n    is_paid: [null],\r\n    purchase_categories: [null],\r\n    invoice_date_after: [null],\r\n    invoice_date_before: [null],\r\n    nomenclature_accounting_numbers: [null],\r\n    accounting_type: [null],\r\n    material_or_service: [null],\r\n  });\r\n\r\n  search$: Subject<void> = new Subject<void>();\r\n\r\n  name$: Subject<string> = new Subject<string>();\r\n  code$: Subject<string> = new Subject<string>();\r\n\r\n  balanceProducts$: Observable<BalanceProduct[]> = this.search$.pipe(\r\n    debounceTime(150),\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.query.length ? this.accountingProductService.in(this.query).pipe(\r\n        tap(products => this.countTotals(products)),\r\n        startWith([]),\r\n        untilDestroyed(this)\r\n      ) :\r\n      of([]).pipe(\r\n        tap(() => this.countTotals([]))\r\n      )),\r\n    untilDestroyed(this)\r\n  )\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    public columnFilterService: ColumnFilterService,\r\n    private accountingProductService: AccountingProductsService,\r\n    private readonly adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(250),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(250),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.balanceProducts$.pipe(\r\n      untilDestroyed(this)\r\n    ).subscribe()\r\n  }\r\n\r\n  clearFilters() {\r\n    this.searchForm.reset();\r\n    this.picker.fillSelected([])\r\n  }\r\n\r\n  countTotals(products: BalanceProduct[]) {\r\n    this.supplierTotalCost = 0;\r\n    this.supplierTotalPrice = 0;\r\n    products.forEach(el => {\r\n      if (el.accepted_by_invoices) {\r\n        el.date = new Date(el?.accepted_by_invoices[0]?.document_creation_date);\r\n        el?.accepted_by_invoices.sort((a, b) => new Date(a.document_creation_date).getTime() - new Date(b.document_creation_date).getTime());\r\n        el?.accepted_by_invoices.forEach(element => {\r\n          this.supplierTotalCost += element.supplier_total_cost;\r\n          // @ts-ignore\r\n          this.supplierTotalPrice += parseFloat(element.supplier_total_price);\r\n        });\r\n      }\r\n    });\r\n\r\n    const newProducts = [];\r\n\r\n    let uid = 0;\r\n\r\n    products.forEach(product => {\r\n      product.accepted_by_orders?.forEach(item => {\r\n        uid++;\r\n\r\n        newProducts.push({\r\n          id: uid,\r\n          name: product.name,\r\n          code: product.code,\r\n          totalQuantity: product.quantity,\r\n          category: product.category ? product.category.unit_of_measure?.symbol : 'Pcs',\r\n          order: item.order,\r\n          invoice: item.invoice,\r\n          current_technology: item.current_technology ? item.current_technology : 'None',\r\n          purchase_category: product.purchase_category ? product.purchase_category?.name : 'None',\r\n          supplier: item.supplier,\r\n          document_creation_date: item.document_creation_date,\r\n          quantity: item.quantity,\r\n          // @ts-ignore\r\n          supplier_unit_price: parseFloat(item.supplier_unit_price),\r\n          supplier_total_price: item.supplier_total_price,\r\n          // @ts-ignore\r\n          supplier_unit_cost: parseFloat(item.supplier_unit_cost),\r\n          supplier_total_cost: item.supplier_total_cost,\r\n          type: product.type,\r\n        })\r\n      })\r\n\r\n      product.accepted_by_invoices?.forEach(item => {\r\n        uid++;\r\n\r\n        newProducts.push({\r\n          id: uid,\r\n          name: product.name,\r\n          code: product.code,\r\n          totalQuantity: product.quantity,\r\n          category: product.category ? product.category.unit_of_measure?.symbol : 'Pcs',\r\n          order: item.order,\r\n          invoice: item.invoice,\r\n          current_technology: item.current_technology ? item.current_technology : 'None',\r\n          purchase_category: product.purchase_category ? product.purchase_category?.name : 'None',\r\n          supplier: item.supplier,\r\n          document_creation_date: item.document_creation_date,\r\n          quantity: item.quantity,\r\n          // @ts-ignore\r\n          supplier_unit_price: parseFloat(item.supplier_unit_price),\r\n          supplier_total_price: item.supplier_total_price,\r\n          // @ts-ignore\r\n          supplier_unit_cost: parseFloat(item.supplier_unit_cost),\r\n          supplier_total_cost: item.supplier_total_cost,\r\n          type: product.type,\r\n        })\r\n      })\r\n\r\n      product.accepted_by_physical_inventories?.forEach(item => {\r\n        uid++;\r\n\r\n        console.log(item)\r\n        newProducts.push({\r\n          id: uid,\r\n          name: product.name,\r\n          code: product.code,\r\n          totalQuantity: product.quantity,\r\n          category: product.category ? product.category.unit_of_measure?.symbol : 'Pcs',\r\n          order: item?.physical_inventory?.id,\r\n          invoice: '',\r\n          current_technology: item.current_technology ? item.current_technology : 'None',\r\n          purchase_category: product.purchase_category ? product.purchase_category?.name : 'None',\r\n          supplier: 'Physical Inventory',\r\n          document_creation_date: item?.physical_inventory?.system_creation_date,\r\n          quantity: item?.difference_quantity,\r\n          supplier_unit_price: parseFloat(item.unit_price),\r\n          supplier_total_price: parseFloat(item.total_price),\r\n          supplier_unit_cost: parseFloat(item.unit_cost),\r\n          supplier_total_cost: parseFloat(item.total_cost),\r\n          type: 'physical-inventory',\r\n        })\r\n      })\r\n    })\r\n\r\n    this.count = newProducts.length\r\n    newProducts.sort(function (a, b) {\r\n      return new Date(b.document_creation_date).getTime() - new Date(a.document_creation_date).getTime() || a.code.localeCompare(b.code);\r\n    });\r\n    this.balanceProducts = newProducts.map(p => p);\r\n    // this.balanceProducts = products.map(p => p)\r\n    this.isLoading = false;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.dt._first = 0;\r\n\r\n    this.balanceProducts = [];\r\n    this.isLoading = true;\r\n    this.count = 0;\r\n\r\n    this.query = [];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null && this.searchForm.controls[key].value !== '') {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  changeAccountingNumber(evt) {\r\n    const value = evt.target.value.replace(/\\s/g, '');\r\n\r\n    if (value) {\r\n      this.searchForm.get('nomenclature_accounting_numbers').patchValue(value);\r\n    } else {\r\n      this.searchForm.get('nomenclature_accounting_numbers').patchValue(null);\r\n    }\r\n\r\n    this.search$.next();\r\n  }\r\n\r\n  getPaidStatus(value) {\r\n    this.searchForm.get('is_paid').patchValue(value);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.searchForm.get('supplier').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategory(id: number) {\r\n    this.searchForm.get('supplier_category').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategories(ids: number[]) {\r\n    this.searchForm.get('categories').patchValue(ids?.join(',') ?? null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectPurchasedCategories(values: any[]) {\r\n    this.searchForm.get('accounting_type').patchValue(null);\r\n    this.searchForm.get('material_or_service').patchValue(null);\r\n\r\n    values.forEach(v => {\r\n      if (v === 'mp') {\r\n        this.searchForm.get('accounting_type').patchValue(1);\r\n      } else if (v === 'ou') {\r\n        this.searchForm.get('material_or_service').patchValue('material');\r\n      } else if (v === 'os') {\r\n        this.searchForm.get('material_or_service').patchValue('service');\r\n      }\r\n    });\r\n\r\n    if (values.find(v => v === 'ou') && values.find(v => v === 'os')) {\r\n      this.searchForm.get('material_or_service').patchValue('both');\r\n    }\r\n\r\n    values = values.filter(v => typeof (v) === 'number');\r\n    this.searchForm.get('purchase_categories').patchValue(values.join(','));\r\n\r\n    this.search$.next();\r\n  }\r\n\r\n  exportToExcel() {\r\n    this.isGenerate = true;\r\n    this.accountingProductService.exportToExcel(this.balanceProducts, 'in').then(() => {\r\n      this.isGenerate = false;\r\n    });\r\n  }\r\n\r\n  onApplyFilter() {\r\n    this.accountingProductService.openFilterModal().pipe(\r\n      filter(filter => !!filter)\r\n    ).subscribe(filter => {\r\n      const newFilter: any = {...filter};\r\n\r\n      if (newFilter.invoice_reception_date_after) {\r\n        newFilter.invoice_reception_date_after = new Date(newFilter.invoice_reception_date_after);\r\n      }\r\n\r\n      if (newFilter.invoice_reception_date_before) {\r\n        newFilter.invoice_reception_date_before = new Date(newFilter.invoice_reception_date_before);\r\n      }\r\n\r\n      if (newFilter.items_reception_date_after) {\r\n        newFilter.items_reception_date_after = new Date(newFilter.items_reception_date_after);\r\n      }\r\n\r\n      if (newFilter.items_reception_date_before) {\r\n        newFilter.items_reception_date_before = new Date(newFilter.items_reception_date_before);\r\n      }\r\n\r\n      if (newFilter.system_creation_date_after) {\r\n        newFilter.system_creation_date_after = new Date(newFilter.system_creation_date_after);\r\n      }\r\n\r\n      if (newFilter.system_creation_date_before) {\r\n        newFilter.system_creation_date_before = new Date(newFilter.system_creation_date_before);\r\n      }\r\n\r\n      newFilter.supplier = newFilter.supplier ? newFilter.supplier.id : null;\r\n      newFilter.supplier_category = newFilter.supplier_category ? +newFilter.supplier_category.id : null;\r\n      newFilter.categories = newFilter.nomenclature_categories.split(',').map(id => +id);\r\n\r\n      newFilter.code = newFilter.nomenclature_code;\r\n      newFilter.name = newFilter.nomenclature_name;\r\n\r\n      this.searchForm.patchValue(newFilter);\r\n\r\n      this.picker.fillSelected(newFilter.categories)\r\n    })\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>\r\n        In (Total Cost: <span *ngIf=\"!isLoading; else totalsLoading\">{{supplierTotalCost | moneyFormat}}</span> ,\r\n        Total Price: <span *ngIf=\"!isLoading; else totalsLoading\">{{supplierTotalPrice | moneyFormat}}</span> )\r\n      </h1>\r\n\r\n      <ng-template #totalsLoading>...</ng-template>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-double-right\"\r\n        label=\"Apply Filter\"\r\n        (click)=\"onApplyFilter()\"\r\n      ></button>\r\n\r\n      <button\r\n        class=\"p-button-danger ml-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-times\"\r\n        label=\"Clear Filter\"\r\n        (click)=\"clearFilters()\"\r\n      ></button>\r\n\r\n      <button\r\n        class=\"p-button-icon ml-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-file-excel\"\r\n        [loading]=\"isGenerate\"\r\n        label=\"Generate Report\"\r\n        [disabled]=\"!count\"\r\n        (click)=\"exportToExcel()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form\r\n      [formGroup]=\"searchForm\"\r\n      class=\"form mb-3\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input type=\"text\" pInputText formControlName=\"name\" (ngModelChange)=\"name$.next($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Code</label>\r\n            <input type=\"text\" pInputText formControlName=\"code\" (ngModelChange)=\"code$.next($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Company</label>\r\n            <pek-company-picker\r\n              [currentCompanyId]=\"searchForm.get('supplier').value\"\r\n              (selectCompany)=\"onSelectCompany($event)\"\r\n            ></pek-company-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Company Category</label>\r\n            <pek-company-category-picker\r\n              [selectedCategoryId]=\"searchForm.get('supplier_category').value\"\r\n              (selectCompanyCategory)=\"onSelectCategory($event)\"></pek-company-category-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Warehouse Category</label>\r\n            <pek-multi-product-categories-picker\r\n              [currentCategoryIds]=\"searchForm.get('categories').value\"\r\n              (choiceCategoryFolAllIds)=\"onSelectCategories($event)\"\r\n            ></pek-multi-product-categories-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Paid</label>\r\n            <pek-input-three-values\r\n              [filterValue]=\"columnFilterService.getFilterValue(searchForm.get('is_paid').value)\"\r\n              (changeValue)=\"getPaidStatus($event)\">\r\n            </pek-input-three-values>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Creation From</label>\r\n            <p-calendar\r\n              formControlName=\"system_creation_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Creation To</label>\r\n            <p-calendar\r\n              formControlName=\"system_creation_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Recieved From</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_reception_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Recieved To</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_reception_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Items Recieved From</label>\r\n            <p-calendar\r\n              formControlName=\"items_reception_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Items Recieved To</label>\r\n            <p-calendar\r\n              formControlName=\"items_reception_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Purchase Category</label>\r\n            <pek-multi-purchase-category-picker\r\n              [withReportFilters]=\"true\"\r\n              (choiceCategories)=\"onSelectPurchasedCategories($event)\"\r\n            ></pek-multi-purchase-category-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Nomenclature Accounting Number</label>\r\n            <input pInputText (input)=\"changeAccountingNumber($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Date From</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Date To</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"page__table report-table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"count > 0\"\r\n        [rows]=\"10\"\r\n        [value]=\"balanceProducts\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 3%\">#</th>\r\n            <th style=\"width: 10%\">Code</th>\r\n            <th style=\"width: 10%\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 4%\">UOM</th>\r\n            <th class=\"text-center\" style=\"width: 4%\">Order</th>\r\n            <th class=\"text-center\" style=\"width: 5%\">Invoice</th>\r\n            <th class=\"text-center\" style=\"width: 7%\">Technology</th>\r\n            <th style=\"width: 9%\">Supplier</th>\r\n            <th style=\"width: 8%\" class=\"text-center\">Purchase Category</th>\r\n            <th class=\"text-center\" style=\"width: 5%\">Date</th>\r\n            <th class=\"text-center\" style=\"width: 5%\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Unit Price</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Price</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Unit Cost</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Cost</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 3%;\">{{i + 1}}</td>\r\n            <td style=\"width: 10%;\">{{product.code}}</td>\r\n            <td style=\"width: 10%;\">{{product.name}}</td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">{{product.quantity}}</td>\r\n            <td class=\"text-center\"\r\n                style=\"width: 4%;\">{{product.category}}</td>\r\n            <td class=\"text-center\" style=\"width: 4%;\">\r\n\r\n              <a target=\"_blank\" *ngIf=\"product.type === '0'\"\r\n                 [routerLink]=\"['/procurement/chains/order/',product.order]\"\r\n                 rel=\"noopener noreferrer\">{{product.order}}</a>\r\n              <a target=\"_blank\" *ngIf=\"product.type === '2'\"\r\n                 [routerLink]=\"['/outsourcing/chains/order/',product.order]\"\r\n                 rel=\"noopener noreferrer\">{{product.order}}</a>\r\n              <a target=\"_blank\" *ngIf=\"product.type === 'physical-inventory'\"\r\n                 [routerLink]=\"['/warehouse/physical-inventory/',product.order]\"\r\n                 rel=\"noopener noreferrer\">{{product.order}}</a>\r\n\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%;\">\r\n\r\n              <a *ngIf=\"product.invoice\" target=\"_blank\" [routerLink]=\"['/reports/invoices/invoice/',product.invoice]\"\r\n                 rel=\"noopener noreferrer\">\r\n                {{product.invoice}}\r\n              </a>\r\n\r\n              <span *ngIf=\"!product.invoice\">None</span>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 7%;\">\r\n              {{product?.current_technology}}\r\n            </td>\r\n            <td style=\"width: 9%;\">\r\n              {{product.supplier}}\r\n            </td>\r\n            <td style=\"width: 8%;\" class=\"text-center\">\r\n              {{product.purchase_category}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%;\">\r\n              {{product.document_creation_date|date:'dd/MM/yyyy'}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%;\">\r\n             {{product.quantity}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              {{product.supplier_unit_price | moneyFormat}} \r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              {{product.supplier_total_price | moneyFormat}} \r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              {{product.supplier_unit_cost | moneyFormat}} \r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              {{product.supplier_total_cost | moneyFormat}} \r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && count > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {Invoice} from '../../../procurement/models/invoice';\r\nimport {debounceTime, filter, finalize, map, switchMap, tap} from 'rxjs/operators';\r\nimport {ActivatedRoute} from '@angular/router';\r\nimport {FormBuilder, FormGroup, Validators} from '@angular/forms';\r\nimport {InvoiceService} from '../../../procurement/services/invoice.service';\r\nimport {EInvoiceProductRMAStatus, InvoiceProduct} from '../../../procurement/models/invoice-product';\r\nimport {ServiceInvoiceProduct} from '../../models/service-invoice';\r\nimport {MenuItem} from 'primeng/api';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {ModalService} from '@shared/services/modal.service';\r\nimport {InvoiceProductService} from '../../../procurement/services/invoice-product.service';\r\nimport {ServicesService} from '../../services/services.service';\r\nimport {forkJoin} from 'rxjs';\r\nimport {InvoiceProductRmaFilesService} from '../../../procurement/services/invoice-product-rma-files.service';\r\nimport {environment} from '@env/environment';\r\n\r\n@Component({\r\n  selector: 'pek-reports-invoice-page',\r\n  templateUrl: './reports-invoice-page.component.html',\r\n  styleUrls: ['./reports-invoice-page.component.scss']\r\n})\r\nexport class ReportsInvoicePageComponent implements OnInit {\r\n\r\n  isCompletingOrCancellation = false;\r\n\r\n  invoiceProductsMenuItems: MenuItem[] = [{\r\n    label: 'Selected Invoice Item',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.editInvoiceProduct(),\r\n      },\r\n      {\r\n        label: 'Delivery Date',\r\n        icon: 'pi pi-calendar',\r\n        command: () => this.deliveryDate(),\r\n        disabled: true\r\n      },\r\n      {\r\n        label: 'Confirm the delivery of the item',\r\n        icon: 'pi pi-check',\r\n        command: () => this.confirmDelivery(),\r\n        disabled: true\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.deleteInvoiceProduct()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  invoiceServiceMenuItems: MenuItem[] = [{\r\n    label: 'Selected Invoice Service',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.editInvoiceService()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.removeInvoiceService()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  isPureTotalChanged = false;\r\n\r\n  files: any[] = [];\r\n  selectedFile: any;\r\n\r\n\r\n  isSaving = false;\r\n  isLoadingFiles = true;\r\n\r\n  invoice: Invoice = null;\r\n  related: Invoice[] = [];\r\n\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  invoiceProducts: InvoiceProduct[] = [];\r\n\r\n  selectedInvoiceProducts: InvoiceProduct[] = [];\r\n\r\n  invoiceServices: ServiceInvoiceProduct[] = [];\r\n  selectedService: ServiceInvoiceProduct;\r\n\r\n  isLoadingServices = true;\r\n  isLoadingInvoiceProducts = true;\r\n\r\n  isViewingMode = false;\r\n  haveSaved = false;\r\n\r\n  isLoadingRelated = true;\r\n  isLoading = false;\r\n\r\n  invoiceId: number;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    supplier_serial_number: [''],\r\n    supplier: [{value: null}, Validators.required],\r\n    total_price: [{value: 0, disabled: this.isViewingMode}, Validators.required],\r\n    pure_total_price: [{value: 0, disabled: false}],\r\n    id: [null, Validators.required],\r\n    currency: [null, Validators.required],\r\n    system_creation_date: [null, Validators.required],\r\n    invoice_date: [null],\r\n    items_reception_date: [null],\r\n    set_physical_characteristics: [null],\r\n    due_date: [null],\r\n    invoice_reception_date: [null],\r\n    weight: [null],\r\n    width: [null],\r\n    length: [null],\r\n    height: [null],\r\n    delivery_days: [null],\r\n    proformas: [[]],\r\n    exchange_rate: [1.0],\r\n  });\r\n\r\n  isAllocatingMode: boolean;\r\n  hasAllocatedProducts: boolean = false;\r\n\r\n  link = environment.image_path;\r\n\r\n  constructor(\r\n    private readonly route: ActivatedRoute,\r\n    private readonly fb: FormBuilder,\r\n    private invoiceService: InvoiceService,\r\n    private readonly adapterService: AdapterService,\r\n    private readonly modalService: ModalService,\r\n    private readonly invoiceProductService: InvoiceProductService,\r\n    private readonly servicesService: ServicesService,\r\n    private invoiceProductRmaFilesService: InvoiceProductRmaFilesService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.route.paramMap.pipe(\r\n      map(params => params.get('id')),\r\n      tap(id => this.invoiceId = +id),\r\n      tap(id => this.form.get('id').patchValue(+id)),\r\n      tap(() => this.getInvoice()),\r\n      tap(() => this.getFiles()),\r\n      tap(() => this.getInvoiceProducts()),\r\n      tap(() => this.getServices()),\r\n    ).subscribe();\r\n  }\r\n\r\n  getFiles() {\r\n    this.files = [];\r\n    this.isLoadingFiles = true;\r\n\r\n    this.invoiceService.getFiles(+this.invoiceId).subscribe(files => {\r\n      this.files = files;\r\n      this.isLoadingFiles = false;\r\n    });\r\n  }\r\n\r\n  getInvoice() {\r\n    this.isPureTotalChanged = false;\r\n    this.isLoading = true;\r\n    this.invoiceService.getById(this.invoiceId).subscribe(invoice => {\r\n      this.invoice = invoice;\r\n      this.invoice.total_price = (Math.round(this.invoice.total_price * 100) / 100);\r\n\r\n      if (invoice.supplier) {\r\n        this.invoiceService.get([{name: 'supplier', value: invoice.supplier?.id}, {\r\n          name: 'is_proforma',\r\n          value: !invoice.is_proforma\r\n        }]).subscribe(relatedInvoices => {\r\n          this.related = relatedInvoices;\r\n          this.isLoadingRelated = false;\r\n        });\r\n      } else {\r\n        this.isLoadingRelated = false;\r\n      }\r\n\r\n      if (this.invoice.invoice_date != null) {\r\n        this.invoice.invoice_date = new Date(this.invoice.invoice_date);\r\n      }\r\n      if (this.invoice.system_creation_date != null) {\r\n        this.invoice.system_creation_date = new Date(this.invoice.system_creation_date);\r\n      }\r\n      if (this.invoice.due_date != null) {\r\n        this.invoice.due_date = new Date(this.invoice.due_date);\r\n      }\r\n      if (this.invoice.invoice_reception_date != null) {\r\n        this.invoice.invoice_reception_date = new Date(this.invoice.invoice_reception_date);\r\n      }\r\n      if (this.invoice.items_reception_date != null) {\r\n        this.invoice.items_reception_date = new Date(this.invoice.items_reception_date);\r\n      }\r\n\r\n      if (!this.invoice.order) {\r\n        this.form.get('supplier').enable();\r\n      }\r\n\r\n      this.form.patchValue(this.invoice);\r\n\r\n      if (this.invoice.supplier) {\r\n        this.form.get('supplier').patchValue(this.invoice.supplier.id);\r\n      }\r\n\r\n      if (this.invoice.proformas) {\r\n        this.form.get('proformas').patchValue(this.invoice.proformas.map(x => x.id));\r\n      }\r\n      if (this.invoice.currency) {\r\n        this.form.get('currency').patchValue(this.invoice.currency.code);\r\n      }\r\n      if (this.invoice.delivery_days) {\r\n        this.haveSaved = true;\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  getServices() {\r\n    this.selectedService = null;\r\n    this.isLoadingServices = true;\r\n    this.invoiceServices = [];\r\n    this.servicesService.get([{name: 'invoice', value: this.invoiceId}]).subscribe(services => {\r\n      // @ts-ignore\r\n      this.invoiceServices = services;\r\n      this.invoiceServices = services;\r\n      if (this.invoice?.pure_total_price) {\r\n        this.form.get('pure_total_price').setValue((this.invoice.pure_total_price).toFixed(2));\r\n      }\r\n      this.isLoadingServices = false;\r\n    });\r\n  }\r\n\r\n  getInvoiceProducts() {\r\n    this.hasAllocatedProducts = false;\r\n    this.isLoadingInvoiceProducts = true;\r\n    this.selectedInvoiceProducts = [];\r\n    this.invoiceProducts = [];\r\n    this.invoiceProductService.get([{name: 'invoice', value: this.invoiceId}]).subscribe(products => {\r\n      const invoiceProducts: InvoiceProduct[] = [];\r\n      products.forEach(product => {\r\n        product.passed = null;\r\n\r\n        if (!invoiceProducts.find(p => p.nomenclature.id === product.nomenclature.id && p.current_technology === product.current_technology)) {\r\n\r\n          let passedProducts = [];\r\n          let notPassedProducts = [];\r\n          let notProcessedProducts = [];\r\n          let partlyProducts = [];\r\n\r\n          const filteredProducts = products.filter(p => p.nomenclature.id === product.nomenclature.id && p.current_technology === product.current_technology);\r\n          filteredProducts.forEach(prod => {\r\n            prod.notPassedQuantity = prod.quantity - prod.passed_quantity;\r\n          });\r\n\r\n          passedProducts = filteredProducts.filter(p => p.passed_quantity > 0 && !p.not_passed_quantity);\r\n          notPassedProducts = filteredProducts.filter(p => p.not_passed_quantity > 0 && !p.passed_quantity);\r\n          notProcessedProducts = filteredProducts.filter(p => !p.passed_quantity && !p.not_passed_quantity);\r\n          partlyProducts = filteredProducts.filter(p => p.passed_quantity && p.not_passed_quantity);\r\n\r\n          if (partlyProducts.length) {\r\n            partlyProducts.forEach(partlyProduct => {\r\n              const partlyPassedProduct = {...partlyProduct};\r\n              const partlyNotPassedProduct = {...partlyProduct};\r\n\r\n              partlyPassedProduct.equalInvoiceProducts = JSON.parse(JSON.stringify(passedProducts));\r\n              partlyPassedProduct.totalQuantity = partlyPassedProduct.passed_quantity;\r\n              partlyPassedProduct.totalFreeQuantity = partlyPassedProduct.order_product_free_quantity;\r\n              partlyPassedProduct.totalQuantityAllocated = partlyPassedProduct.allocated_quantity;\r\n\r\n              this.checkIfHasAllocatedProduct(partlyPassedProduct);\r\n\r\n              partlyPassedProduct.passed = 'passed';\r\n              partlyPassedProduct.rma_status = null;\r\n              partlyPassedProduct.rma_comment = '';\r\n              partlyPassedProduct.products = [partlyPassedProduct];\r\n              invoiceProducts.push(partlyPassedProduct);\r\n\r\n              partlyNotPassedProduct.equalInvoiceProducts = JSON.parse(JSON.stringify(notProcessedProducts));\r\n              partlyNotPassedProduct.totalQuantity = partlyNotPassedProduct.not_passed_quantity;\r\n              partlyNotPassedProduct.totalFreeQuantity = partlyNotPassedProduct.order_product_free_quantity;\r\n              partlyNotPassedProduct.totalQuantityAllocated = partlyNotPassedProduct.allocated_quantity;\r\n\r\n              this.checkIfHasAllocatedProduct(partlyNotPassedProduct);\r\n\r\n              partlyNotPassedProduct.passed = 'notPassed';\r\n              partlyNotPassedProduct.rma_status = partlyNotPassedProduct?.rma_status ?? '';\r\n              partlyNotPassedProduct.rma_comment = partlyNotPassedProduct?.rma_comment ?? '';\r\n\r\n              if (partlyNotPassedProduct.rma_status !== EInvoiceProductRMAStatus.RECEIVED) {\r\n                partlyNotPassedProduct.passed = 'notPassed';\r\n              }\r\n              partlyNotPassedProduct.products = [partlyNotPassedProduct];\r\n              invoiceProducts.push(partlyNotPassedProduct);\r\n            });\r\n          }\r\n\r\n          if (passedProducts.length) {\r\n            const passedProduct = {...product};\r\n\r\n            passedProduct.equalInvoiceProducts = JSON.parse(JSON.stringify(passedProducts));\r\n\r\n            passedProduct.totalQuantity = passedProducts.reduce((sum, p) => sum + p.passed_quantity, 0);\r\n            passedProduct.totalFreeQuantity = this.onlyUnique(notProcessedProducts, 'order_product_id').reduce((sum, p) => sum + p.order_product_free_quantity, 0);\r\n            passedProduct.totalQuantityAllocated = passedProducts.reduce((sum, p) => sum + p.allocated_quantity, 0);\r\n\r\n            this.checkIfHasAllocatedProduct(passedProduct);\r\n\r\n            passedProduct.passed = 'passed';\r\n            passedProduct.rma_status = null;\r\n            passedProduct.rma_comment = '';\r\n            passedProduct.products = [...passedProducts];\r\n            invoiceProducts.push(passedProduct);\r\n          }\r\n\r\n          if (notPassedProducts.length) {\r\n            const notPassedProduct = {...product};\r\n\r\n            notPassedProduct.equalInvoiceProducts = JSON.parse(JSON.stringify(notProcessedProducts));\r\n\r\n            notPassedProduct.totalQuantity = notPassedProducts.reduce((sum, p) => sum + p.not_passed_quantity, 0);\r\n            notPassedProduct.totalFreeQuantity = this.onlyUnique(notProcessedProducts, 'order_product_id').reduce((sum, p) => sum + p.order_product_free_quantity, 0);\r\n            notPassedProduct.passed = 'notPassed';\r\n            notPassedProduct.rma_status = notPassedProducts.find(p => p.rma_status)?.rma_status;\r\n            notPassedProduct.rma_comment = notPassedProducts.find(p => p.rma_comment)?.rma_comment ?? '';\r\n\r\n            if (notPassedProduct.rma_status !== EInvoiceProductRMAStatus.RECEIVED) {\r\n              notPassedProduct.passed = 'notPassed';\r\n            }\r\n\r\n            notPassedProduct.products = [...notPassedProducts];\r\n            invoiceProducts.push(notPassedProduct);\r\n          }\r\n\r\n          if (notProcessedProducts.length) {\r\n            const notProcessedProduct = {...product};\r\n\r\n            notProcessedProduct.totalQuantity = notProcessedProducts.reduce((sum, p) => sum + p.quantity, 0);\r\n            notProcessedProduct.totalFreeQuantity = this.onlyUnique(notProcessedProducts, 'order_product_id').reduce((sum, p) => sum + p.order_product_free_quantity, 0);\r\n            notProcessedProduct.totalQuantityAllocated = notProcessedProducts.reduce((sum, p) => sum + p.allocated_quantity, 0);\r\n            this.checkIfHasAllocatedProduct(notProcessedProduct);\r\n\r\n            notProcessedProduct.rma_status = notProcessedProducts.find(p => p.rma_status)?.rma_status;\r\n            notProcessedProduct.rma_comment = notProcessedProducts.find(p => p.rma_comment)?.rma_comment ?? '';\r\n\r\n            notProcessedProduct.equalInvoiceProducts = JSON.parse(JSON.stringify(notProcessedProducts));\r\n            notProcessedProduct.products = [...notProcessedProducts];\r\n            invoiceProducts.push(notProcessedProduct);\r\n          }\r\n        }\r\n      });\r\n\r\n      this.invoiceProducts = invoiceProducts.map((p, idx) => {\r\n        return {\r\n          ...p,\r\n          uid: idx\r\n        };\r\n      });\r\n      this.invoiceProducts.sort((a, b) => b.rma_comment.localeCompare(a.rma_comment));\r\n      this.isLoadingInvoiceProducts = false;\r\n    });\r\n  }\r\n\r\n  onlyUnique(array, keyToBeUnique) {\r\n    return array.filter((x, xi) => !array.slice(xi + 1)\r\n      .some(y => y[keyToBeUnique] === x[keyToBeUnique]));\r\n  }\r\n\r\n  checkIfHasAllocatedProduct(invoiceProduct: InvoiceProduct) {\r\n    if (invoiceProduct.totalQuantityAllocated > 0) {\r\n      this.hasAllocatedProducts = true;\r\n    }\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.form.get('supplier').patchValue(id);\r\n  }\r\n\r\n  changeCurrency(value: any) {\r\n    this.form.get('currency').patchValue(value?.code ?? null);\r\n\r\n    this.invoice.currency.symbol = value?.symbol ?? 'None';\r\n\r\n    if (this.form.get('currency').value === 'EUR') {\r\n      this.form.get('exchange_rate').setValue(1);\r\n      this.form.get('pure_total_price').setValue(this.form.get('pure_total_price').value.toFixed(2));\r\n    }\r\n  }\r\n\r\n  calculatePureTotalPrice() {\r\n    let sum = 0;\r\n\r\n    this.invoiceProducts.forEach(product => {\r\n      const price: number = parseFloat(product.supplier_unit_price);\r\n      let newPrice = price - (price * parseFloat(product.discount) / 100);\r\n      // newPrice = newPrice + (newPrice / 100 * product.ddv);\r\n      newPrice = newPrice * product.quantity;\r\n      sum += newPrice;\r\n    });\r\n\r\n    this.invoiceServices.forEach(service => {\r\n      const price = parseFloat(service.pure_price);\r\n      const newPrice = price - (price * parseFloat(service.discount) / 100);\r\n      // newPrice = newPrice + (newPrice / 100 * service.ddv);\r\n      sum += newPrice;\r\n    });\r\n\r\n    sum = parseFloat(sum.toFixed(3));\r\n    return sum;\r\n  }\r\n\r\n  changeRate() {\r\n    // this.form.get('pure_total_price').setValue((this.invoice.pure_total_price * this.form.get('exchange_rate').value).toFixed(2));\r\n  }\r\n\r\n  updateCharacteristic(value: any) {\r\n    this.form.get('set_physical_characteristics').setValue(value);\r\n    if (this.form.get('set_physical_characteristics').value) {\r\n      this.form.get('weight').setValidators([Validators.required]);\r\n      this.form.get('set_physical_characteristics').updateValueAndValidity();\r\n    } else {\r\n      this.form.get('weight').setValidators([]);\r\n      this.form.get('set_physical_characteristics').updateValueAndValidity();\r\n    }\r\n  }\r\n\r\n  showProductionLists(rootProductionPlans: any[]) {\r\n\r\n  }\r\n\r\n  getRootLists(products: InvoiceProduct[]): { list: any, count?: number }[] {\r\n    const lists: { list: any, count?: number }[] = [];\r\n    products.forEach(product => {\r\n      if (product.root_production_plans) {\r\n        product.root_production_plans.forEach((res: any) => {\r\n          if (res) {\r\n            const found = lists.find(el => el.list.root_nomenclature?.id === res.root_nomenclature?.id);\r\n            if (found) {\r\n              found.count++;\r\n            } else {\r\n              lists.push({list: res, count: 1});\r\n            }\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    return lists;\r\n  }\r\n\r\n  getFileName(name) {\r\n    const nameArr = name.split('/');\r\n    return nameArr[nameArr.length - 1];\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.deletion.add(id);\r\n\r\n        this.invoiceService.removeFile(id).pipe(\r\n          finalize(() => this.deletion.delete(id))\r\n        ).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id);\r\n          this.files.splice(index, 1);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onDownloadFile(file: any) {\r\n    this.addition.add(file.id);\r\n    this.invoiceService.downloadFile(file.id).pipe(\r\n      finalize(() => this.addition.delete(file.id))\r\n    ).subscribe(response => {\r\n      const filename = this.getFileName(file.file);\r\n      this.adapterService.downloadFile(filename, response);\r\n    });\r\n  }\r\n\r\n  openInvoiceFilesModal() {\r\n    this.invoiceService.openInvoiceFilesModal(+this.invoiceId).subscribe(confirm => {\r\n      this.getFiles();\r\n    });\r\n  }\r\n\r\n  createInvoiceService() {\r\n    this.servicesService.createEditServiceModal('create', +this.invoiceId, 'invoice').subscribe(service => {\r\n      if (service) {\r\n        this.getServices();\r\n        this.getInvoice();\r\n      }\r\n    });\r\n  }\r\n\r\n  editInvoiceService() {\r\n    this.servicesService.createEditServiceModal('edit', +this.invoiceId, 'invoice', this.selectedService).subscribe(service => {\r\n      if (service) {\r\n        this.getServices();\r\n        this.getInvoice();\r\n      }\r\n    });\r\n  }\r\n\r\n  private removeInvoiceService() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.servicesService.delete(this.selectedService.id).subscribe(() => {\r\n          this.getServices();\r\n          this.getInvoice();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  saveInvoice() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n      let sendData = {...this.form.value};\r\n      sendData.system_creation_date = this.adapterService.dateAdapter(this.form.value.system_creation_date);\r\n      sendData.due_date = this.adapterService.dateAdapter(this.form.value.due_date);\r\n      sendData.invoice_reception_date = this.adapterService.dateAdapter(this.form.value.invoice_reception_date);\r\n      sendData.invoice_date = this.adapterService.dateAdapter(this.form.get('invoice_date').value);\r\n      delete sendData.pure_total_price;\r\n\r\n      if (this.isPureTotalChanged && this.invoice.pure_total_price !== this.form.get('pure_total_price').value) {\r\n        sendData.manual_pure_total_price = this.form.get('pure_total_price').value;\r\n      }\r\n\r\n      this.haveSaved = true;\r\n      this.invoiceService.updatePartly(sendData).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      ).subscribe(() => {\r\n        this.getInvoice();\r\n      });\r\n    }\r\n  }\r\n\r\n  cancellation() {\r\n    this.modalService.confirm('success').pipe(\r\n      filter(Boolean),\r\n    ).subscribe(() => {\r\n      this.isCompletingOrCancellation = true;\r\n      this.invoiceService.cancellation(this.invoice.id).pipe(\r\n        finalize(() => this.isCompletingOrCancellation = false),\r\n        debounceTime(500),\r\n        tap(() => this.getInvoice()),\r\n        tap(() => this.getInvoiceProducts()),\r\n      ).subscribe();\r\n    });\r\n  }\r\n\r\n  complete() {\r\n    this.modalService.confirm('success').pipe(\r\n      filter(Boolean),\r\n    ).subscribe(() => {\r\n      this.isCompletingOrCancellation = true;\r\n      const send = {id: this.invoice.id, completed: true};\r\n      this.invoiceService.updatePartly(send as Invoice).pipe(\r\n        finalize(() => this.isCompletingOrCancellation = false),\r\n        debounceTime(500),\r\n        tap(() => this.getInvoice()),\r\n        tap(() => this.getInvoiceProducts()),\r\n      ).subscribe();\r\n    });\r\n  }\r\n\r\n  distributePrice() {\r\n    this.invoiceService.distributeModal(+this.invoiceId).pipe(\r\n      filter(Boolean),\r\n      tap(() => this.getInvoice()),\r\n      tap(() => this.getInvoiceProducts()),\r\n      tap(() => this.getServices()),\r\n    ).subscribe();\r\n  }\r\n\r\n  addInvoiceItem() {\r\n    this.invoiceService.addInvoiceProductModal(+this.invoiceId).pipe(\r\n      filter(Boolean),\r\n      tap(() => this.getInvoice()),\r\n      tap(() => this.getInvoiceProducts()),\r\n    ).subscribe();\r\n  }\r\n\r\n  deleteInvoiceProduct() {\r\n    const ids = this.selectedInvoiceProducts[0]\r\n      .equalInvoiceProducts.map(invoiceProduct => invoiceProduct.id);\r\n    const call = ids.map(invoiceProductId => this.invoiceProductService.delete(invoiceProductId));\r\n    this.modalService.confirm('danger').pipe(\r\n      filter(Boolean),\r\n      switchMap(() => forkJoin([...call])),\r\n      tap(() => this.getInvoice()),\r\n      tap(() => this.getInvoiceProducts()),\r\n    ).subscribe();\r\n  }\r\n\r\n  editInvoiceProduct() {\r\n    this.invoiceProductService.createEditInvoiceProductModal('edit', +this.invoiceId, this.selectedInvoiceProducts[0]).pipe(\r\n      filter(Boolean),\r\n      tap(() => this.getInvoice()),\r\n      tap(() => this.getInvoiceProducts()),\r\n    ).subscribe();\r\n  }\r\n\r\n  rma() {\r\n    this.invoiceProductService.rma(this.selectedInvoiceProducts).subscribe(response => {\r\n      if (response === 'refund' || response === 'return' || response === 'leave') {\r\n        this.getInvoice();\r\n        this.getInvoiceProducts();\r\n      }\r\n    });\r\n  }\r\n\r\n\r\n\r\n  disabled() {\r\n    return this.selectedInvoiceProducts?.length === 0 || !this.selectedInvoiceProducts?.every(s => s.rma_comment) || this.selectedInvoiceProducts.every(s => s.rma_status);\r\n  }\r\n\r\n  disabledRmaFiles() {\r\n    return this.selectedInvoiceProducts?.length === 0 || this.selectedInvoiceProducts?.length > 1 && this.selectedInvoiceProducts[0]?.rma_files?.length === 0 ||\r\n      !this.selectedInvoiceProducts?.every(s => s.rma_comment);\r\n  }\r\n\r\n  private deliveryDate() {\r\n    this.invoiceProductService.deliveryDate(this.selectedInvoiceProducts[0]).pipe(\r\n      finalize(Boolean)\r\n    ).subscribe(res => {\r\n      if (res) {\r\n        this.getInvoice();\r\n        this.getInvoiceProducts();\r\n      }\r\n    });\r\n  }\r\n\r\n  private confirmDelivery() {\r\n    this.modalService.confirm('success').subscribe(res => {\r\n      if (res) {\r\n        const send = [];\r\n        this.selectedInvoiceProducts[0].products.forEach(p => send.push({\r\n          id: p.id,\r\n          rma_status: 1,\r\n        }));\r\n\r\n        this.invoiceProductService.updateSeveralPartly(send).subscribe(() => {\r\n          this.getInvoice();\r\n          this.getInvoiceProducts();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  productsSelectionChange() {\r\n    this.invoiceProductsMenuItems[0].items[1].disabled = Boolean(!this.selectedInvoiceProducts[0]?.rma_comment || !(this.selectedInvoiceProducts[0]?.passed !== 'notPassed' || !!this.selectedInvoiceProducts[0]?.passed) || this.selectedInvoiceProducts[0]?.rma_status !== 'Reordered');\r\n    this.invoiceProductsMenuItems[0].items[2].disabled = Boolean(!this.selectedInvoiceProducts[0]?.rma_comment || !(this.selectedInvoiceProducts[0]?.passed !== 'notPassed' || !!this.selectedInvoiceProducts[0]?.passed) || this.selectedInvoiceProducts[0]?.rma_status !== 'Reordered');\r\n  }\r\n\r\n  openRmaFiles() {\r\n    const product: InvoiceProduct = this.selectedInvoiceProducts[0];\r\n    this.invoiceProductRmaFilesService.invoiceProductsRmaFiles(product.rma_files).subscribe();\r\n  }\r\n\r\n  getName(name) {\r\n    const nameArr = name.split('/');\r\n    return nameArr[nameArr.length - 1];\r\n  }\r\n\r\n  shownPassedStat(product: any) {\r\n    return product.quality_control || product.equalInvoiceProducts.some(prod => prod.quality_control)\r\n  }\r\n\r\n  pureTotalChange() {\r\n    this.isPureTotalChanged = true;\r\n  }\r\n\r\n  allocateToToolRequest() {\r\n    this.isAllocatingMode = !this.isAllocatingMode;\r\n    this.selectedInvoiceProducts = [];\r\n    this.selectedInvoiceProducts = [...this.selectedInvoiceProducts];\r\n  }\r\n\r\n  allocateProducts() {\r\n    this.invoiceService.allocateToToolRequestModal(this.selectedInvoiceProducts).pipe(\r\n      filter(Boolean),\r\n      debounceTime(500)\r\n    ).subscribe(res => {\r\n      this.isAllocatingMode = false;\r\n      this.getInvoiceProducts();\r\n    });\r\n  }\r\n\r\n  cancelAllocatedProducts() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.invoiceService.cancel_allocation_for_area_locator(this.invoiceId).pipe(debounceTime(500)).subscribe(res => {\r\n          this.getInvoiceProducts();\r\n        });\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>\r\n        <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n        Invoice Edit\r\n        <ng-container\r\n          *ngIf=\"invoice?.qc_completed\">(QC Processed)\r\n        </ng-container>\r\n      </h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <ng-container [ngSwitch]=\"invoice?.order?.accounting_type\">\r\n        <a *ngSwitchCase=\"3\" [routerLink]=\"'/manufacturing/orders/order/' + invoice?.order?.id\"\r\n           target=\"_blank\"\r\n        >\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-angle-double-right\"\r\n            label=\"Go To Order\"\r\n          ></button>\r\n        </a>\r\n        <a *ngSwitchCase=\"2\" [href]=\"'/outsourcing/chains/order/' + invoice?.order?.id\"\r\n           target=\"_blank\">\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-angle-double-right\"\r\n            label=\"Go To Order\"\r\n          ></button>\r\n        </a>\r\n        <a *ngSwitchCase=\"1\" [href]=\"'procurement/chains/order/' + invoice?.order?.id\"\r\n           target=\"_blank\">\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-angle-double-right\"\r\n            label=\"Go To Order\"\r\n          ></button>\r\n        </a>\r\n      </ng-container>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n\r\n  <div class=\"reports-invoice-page\">\r\n\r\n    <h2 class=\"mb-4\">\r\n      <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n      Invoice Info\r\n    </h2>\r\n\r\n    <div class=\"reports-invoice-page__card reports-invoice-page__info mb-4\">\r\n      <form [formGroup]=\"form\" *ngIf=\"!isLoading; else infoLoading\">\r\n        <div class=\"row\">\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>\r\n                Supplier\r\n                <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n                <ng-container *ngIf=\"!invoice?.is_proforma\">Invoice</ng-container>\r\n                Number\r\n              </label>\r\n              <input type=\"text\" pInputText formControlName=\"supplier_serial_number\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>\r\n                Internal\r\n                <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n                <ng-container *ngIf=\"!invoice?.is_proforma\">Invoice</ng-container>\r\n                Number\r\n              </label>\r\n              <input pInputText type=\"text\" *ngIf=\"!invoice?.is_proforma\"\r\n                     value=\"{{invoice?.self_serial_number}}\" disabled>\r\n              <input pInputText type=\"text\" *ngIf=\"invoice?.is_proforma\"\r\n                     value=\"{{invoice?.self_proforma_serial_number}}\" disabled>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>Supplier* </label>\r\n              <pek-company-picker\r\n                [currentCompanyId]=\"form.get('supplier').value\"\r\n                (selectCompany)=\"onSelectCompany($event)\"\r\n              ></pek-company-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\" *ngIf=\"!invoice?.is_proforma\">\r\n            <div class=\"form-group\">\r\n              <label> Relation With Proforma Invoice</label>\r\n              <p-multiSelect\r\n                [disabled]=\"!!(!related.length)\"\r\n                formControlName=\"proformas\"\r\n                [options]=\"related\"\r\n                optionLabel=\"self_proforma_serial_number\"\r\n                optionValue=\"id\"\r\n                placeholder=\"Select Relation\"\r\n                *ngIf=\"!isLoadingRelated else spinner\"\r\n              >\r\n              </p-multiSelect>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label> Total Price*\r\n                <ng-container *ngIf=\"invoice?.currency\">\r\n                  ({{invoice?.currency?.symbol}})\r\n                </ng-container>\r\n              </label>\r\n              <input pInputText formControlName=\"total_price\" type=\"number\" step=\"0.01\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>Pure Total Price\r\n                <ng-container *ngIf=\"invoice?.currency\">\r\n                  ({{invoice?.currency?.symbol}})\r\n                </ng-container>\r\n              </label>\r\n              <input pInputText type=\"number\" step=\"0.01\" formControlName=\"pure_total_price\"\r\n                     (input)=\"pureTotalChange()\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>Currency</label>\r\n              <pek-currency-picker\r\n                [currency]=\"form.get('currency').value\"\r\n                (valueChange)=\"changeCurrency($event)\"\r\n              ></pek-currency-picker>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\" *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n            <div class=\"form-group\">\r\n              <label> Exchange Rate</label>\r\n              <input pInputText formControlName=\"exchange_rate\" type=\"number\" step=\"0.0001\"\r\n                     (ngModelChange)=\"changeRate()\">\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\" *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n            <div class=\"form-group\">\r\n              <label>Total Price In EUR</label>\r\n              <input\r\n                pInputText\r\n                disabled\r\n                readonly class=\"form-control\" type=\"text\"\r\n                value=\"{{form.get('total_price').value * form.get('exchange_rate').value | moneyFormat}}\"\r\n                step=\"0.01\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <h2 class=\"mt-4\">Dates On Document</h2>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Date</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Due Date</label>\r\n              <p-calendar\r\n                formControlName=\"due_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Reception Date</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_reception_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <h2 class=\"mt-4\">System Date</h2>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Date*</label>\r\n              <p-calendar\r\n                [showClear]=\"true\"\r\n                formControlName=\"system_creation_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Items Reception Date</label>\r\n              <p-calendar\r\n                formControlName=\"items_reception_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Set Physical Characteristics</label>\r\n              <div>\r\n                <p-checkbox\r\n                  id=\"other\"\r\n                  [ngModel]=\"form.get('set_physical_characteristics').value\"\r\n                  (ngModelChange)=\"updateCharacteristic($event)\"\r\n                  [binary]=\"true\"\r\n                  [ngModelOptions]=\"{standalone: true}\"\r\n                ></p-checkbox>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <ng-container *ngIf=\"form.get('set_physical_characteristics').value\">\r\n            <div class=\"col-3\">\r\n              <div class=\"form-group\">\r\n                <label>Weight*</label>\r\n                <input\r\n                  pInputText\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"Enter width in kilograms\"\r\n                  formControlName=\"weight\"\r\n                >\r\n              </div>\r\n            </div>\r\n            <div class=\"col-3\">\r\n              <div class=\"form-group\">\r\n                <label>Width</label>\r\n                <input\r\n                  pInputText\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"Enter width in centimeters\"\r\n                  formControlName=\"width\"\r\n                >\r\n              </div>\r\n            </div>\r\n            <div class=\"col-3\">\r\n              <div class=\"form-group\">\r\n                <label>Height</label>\r\n                <input\r\n                  pInputText\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"Enter height in centimeters\"\r\n                  formControlName=\"height\"\r\n                >\r\n              </div>\r\n            </div>\r\n            <div class=\"col-3\">\r\n              <div class=\"form-group\">\r\n                <label>Length</label>\r\n                <input\r\n                  pInputText\r\n                  type=\"number\"\r\n                  step=\"0.01\"\r\n                  placeholder=\"Enter length in centimeters\"\r\n                  formControlName=\"length\"\r\n                >\r\n              </div>\r\n            </div>\r\n          </ng-container>\r\n        </div>\r\n\r\n        <div class=\"d-flex mt-2\">\r\n          <button\r\n            [disabled]=\"form.invalid\"\r\n            (click)=\"saveInvoice()\"\r\n            class=\"ml-auto\"\r\n            pButton\r\n            type=\"button\"\r\n            label=\"Save\"\r\n            [loading]=\"isSaving\"\r\n          ></button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"block-header mb-4\">\r\n      <h2>\r\n        <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n        Invoice Items\r\n      </h2>\r\n\r\n      <div class=\"d-flex\" *ngIf=\"!isLoading\">\r\n        <button\r\n          pButton\r\n          class=\"mr-2\"\r\n          type=\"button\"\r\n          icon=\"pi pi-cog\"\r\n          label=\"RMA Files\"\r\n          *ngIf=\"!invoice?.is_proforma\"\r\n          [disabled]=\"disabledRmaFiles()\"\r\n          (click)=\"openRmaFiles()\"\r\n        ></button>\r\n\r\n        <button\r\n          *ngIf=\"!invoice?.completed\"\r\n          pButton\r\n          class=\"mr-2\"\r\n          type=\"button\"\r\n          icon=\"pi pi-sort-alt\"\r\n          label=\"Allocate To Tool Area\"\r\n          (click)=\"allocateToToolRequest()\"\r\n        ></button>\r\n        <button\r\n          *ngIf=\"isAllocatingMode\"\r\n          pButton\r\n          class=\"mr-2\"\r\n          type=\"button\"\r\n          icon=\"pi pi-reply\"\r\n          label=\"Allocate\"\r\n          [disabled]=\"selectedInvoiceProducts.length === 0\"\r\n          (click)=\"allocateProducts()\"\r\n        ></button>\r\n        <button\r\n          *ngIf=\"hasAllocatedProducts && !invoice?.completed\"\r\n          pButton\r\n          class=\"mr-2\"\r\n          type=\"button\"\r\n          icon=\"pi pi-sort-alt-slash\"\r\n          label=\"Cancel Tool Allocation\"\r\n          (click)=\"cancelAllocatedProducts()\"\r\n        ></button>\r\n\r\n        <button\r\n          pButton\r\n          class=\"mr-2\"\r\n          type=\"button\"\r\n          icon=\"pi pi-cog\"\r\n          label=\"RMA\"\r\n          *ngIf=\"!invoice?.is_proforma\"\r\n          [disabled]=\"disabled()\"\r\n          (click)=\"rma()\"\r\n        ></button>\r\n\r\n        <button\r\n          pButton\r\n          class=\"mr-2\"\r\n          type=\"button\"\r\n          icon=\"pi pi-plus\"\r\n          label=\"New Item\"\r\n          [disabled]=\"invoice?.qc_completed\"\r\n          (click)=\"addInvoiceItem()\"\r\n        ></button>\r\n        <button\r\n          *ngIf=\"!invoice?.qc_completed && !invoice?.completed\"\r\n          pButton\r\n          class=\"mr-2 p-button-success p-button-icon\"\r\n          type=\"button\"\r\n          icon=\"pi pi-check\"\r\n          label=\"Complete\"\r\n          [disabled]=\"invoice?.qc_completed && invoice?.completed\"\r\n          (click)=\"complete()\"\r\n          [loading]=\"isCompletingOrCancellation\"\r\n        ></button>\r\n\r\n        <button\r\n          *ngIf=\"invoice?.completed\"\r\n          pButton\r\n          class=\"mr-2 p-button-danger p-button-icon\"\r\n          type=\"button\"\r\n          icon=\"pi pi-times\"\r\n          label=\"Cancellation\"\r\n          (click)=\"cancellation()\"\r\n          [loading]=\"isCompletingOrCancellation\"\r\n        ></button>\r\n\r\n        <button\r\n          pButton\r\n          class=\"p-button-icon\"\r\n          type=\"button\"\r\n          icon=\"pi pi-sliders-v\"\r\n          label=\"Price Distribution\"\r\n          (click)=\"distributePrice()\"\r\n        ></button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #it\r\n          selectionMode=\"multiple\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"invoiceProducts.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedInvoiceProducts\"\r\n          [value]=\"invoiceProducts\"\r\n          dataKey=\"uid\"\r\n          (selectionChange)=\"productsSelectionChange()\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-auto\"\r\n                label=\"Add File\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 3%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 15%\">Code</th>\r\n              <th style=\"width: 15%\">Name</th>\r\n              <th style=\"width: 15%\">Root Lists</th>\r\n              <th style=\"width: 10%\">RMA Comment</th>\r\n              <th style=\"width: 5%\" class=\"text-center\">Quantity</th>\r\n              <th style=\"width: 13%\" class=\"text-center\">Allocated Quantity</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Price</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Other Currency</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">DDV</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Discount</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Passed</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedInvoiceProducts.length\">Choose the Invoice Item to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto invoice-product-menubar\"\r\n                [model]=\"invoiceProductsMenuItems\"\r\n                [class.disabled]=\"!selectedInvoiceProducts.length || selectedInvoiceProducts.length > 1\"></p-menubar>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"!isViewingMode ? product : null\">\r\n              <td style=\"width: 3%\" class=\"text-center\">\r\n                <div class=\"selection-td\">\r\n                  <p-tableCheckbox class=\"mr-2\" *ngIf=\"isAllocatingMode\" [value]=\"product\"></p-tableCheckbox>\r\n                  <span>\r\n                    {{i + 1}}\r\n                  </span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 15%\">{{product.nomenclature.code}} <b *ngIf=\"product.rma_comment\">(RMA)</b>\r\n                <b *ngIf=\"(product?.passed === 'notPassed' || !product?.passed)  && product?.rma_status === 'Reordered'\"> (Reordered)</b>\r\n                <b *ngIf=\"(product?.passed === 'notPassed' || !product?.passed) && product?.rma_status === 'Received'\"> (Received)</b>\r\n              </td>\r\n              <td style=\"width: 15%\">{{product.nomenclature.name}}</td>\r\n              <td style=\"width: 15%\">\r\n                <div class=\"root-count-wrapper\">\r\n                  <div class=\"root-count-wrapper\">\r\n                    <span class=\"d-block\"\r\n                          *ngFor=\"let item of getRootLists(product.equalInvoiceProducts); let idx = index\">\r\n                      <ng-template [ngIf]=\"item.count === 1\">\r\n                          <a *ngIf=\"item.list.serial_numbers.length < 1\" target=\"_blank\" rel=\"noopener noreferrer\"\r\n                             [routerLink]=\"['/manufacturing/plans/plan', item.list.id]\">\r\n                             {{item.list.list_product.nomenclature.code}}~{{item.list.list_product.nomenclature.name}}\r\n                            ({{item.count}})\r\n                          </a>\r\n\r\n                          <ng-template *ngIf=\"item.list.serial_numbers.length >= 1\">\r\n                            <a *ngFor=\"let serial of item.list.serial_numbers\" target=\"_blank\" rel=\"noopener noreferrer\"\r\n                               [routerLink]=\"['/manufacturing/plans/plan', serial.id]\">\r\n                             {{item.list.list_product.nomenclature.code}}~{{item.list.list_product.nomenclature.name}}\r\n                              ({{item.count}})\r\n                            </a>\r\n                          </ng-template>\r\n                      </ng-template>\r\n\r\n                      <ng-template [ngIf]=\"item.count > 1\">\r\n                          <a href=\"javascript:void(0)\" (click)=\"showProductionLists(product.root_production_plans)\">\r\n                             {{item.list.list_product.nomenclature.code}}~{{item.list.list_product.nomenclature.name}}\r\n                            ({{item.count}})\r\n                          </a>\r\n                          <ng-template *ngIf=\"item.list.serial_numbers.length >= 1\">\r\n                          <a href=\"javascript:void(0)\" (click)=\"showProductionLists(product.root_production_plans)\">\r\n                           {{item.list.list_product.nomenclature.code}}~{{item.list.list_product.nomenclature.name}}\r\n                            ({{item.count}})\r\n                          </a>\r\n                          </ng-template>\r\n                      </ng-template>\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 15%\" class=\"hovered-info\">\r\n                <a href=\"javascript:void(0)\" class=\"rma-files\">\r\n                  <i *ngIf=\"product.rma_files?.length > 0 && product.rma_comment\" class=\"pi pi-paperclip mr-2\"></i>\r\n                  {{product.rma_comment}}\r\n                </a>\r\n                <pek-hover-detailed-info-component\r\n                  *ngIf=\"product?.rma_files?.length > 0 && product?.rma_comment\"\r\n                >\r\n                  <span *ngFor=\"let file of product?.rma_files\">\r\n                     <a [href]=\"link + '/media/' + file.file\">\r\n                       {{ getName(file.file) }}\r\n                     </a>\r\n                     <br>\r\n                  </span>\r\n                </pek-hover-detailed-info-component>\r\n              </td>\r\n              <td style=\"width: 5%\"\r\n                  class=\"text-center\">{{product.totalQuantity}} {{product.nomenclature.category?.unit_of_measure?.symbol}}</td>\r\n              <td style=\"width: 13%\"\r\n                  class=\"text-center\">\r\n                <span *ngIf=\"product.totalQuantityAllocated\">\r\n                  {{product.totalQuantityAllocated}} {{product.nomenclature.category ? product.nomenclature.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n                </span>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n                  {{product.supplier_unit_price * form.get('exchange_rate').value | moneyFormat}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"form.get('currency').value === 'EUR'\">\r\n                  {{product.supplier_unit_price | moneyFormat}}\r\n                </ng-container>\r\n                \r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container\r\n                  *ngIf=\"form.get('currency').value !== 'EUR'\">{{product.supplier_unit_price | moneyFormat}} {{invoice?.currency?.symbol}}</ng-container>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">{{product.ddv}}%</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">{{product.discount | number: '1.0'}}\r\n                <ng-container *ngIf=\"product.fixed_discount\">\r\n                  {{invoice.currency?.symbol}}</ng-container>\r\n                <ng-container *ngIf=\"!product.fixed_discount\">%</ng-container>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container *ngIf=\"product.passed && !product.rma_comment\">\r\n                  <div *ngIf=\"shownPassedStat(product) else notPassed\">\r\n                    <div class=\"text-success\" *ngIf=\"product.passed === 'passed'\">Passed</div>\r\n                    <div class=\"text-danger\" *ngIf=\"product.passed === 'notPassed'\">Not Passed</div>\r\n                  </div>\r\n\r\n                  <ng-template #notPassed>\r\n                    -\r\n                  </ng-template>\r\n                </ng-container>\r\n                <ng-container *ngIf=\"product.rma_comment\">\r\n                  <div *ngIf=\"product.rma_status === 'Reordered' || product.rma_status === 'Received' &&\r\n                   product.quality_control else notPassed\">\r\n                    <div class=\"text-success\" *ngIf=\"product.passed === 'passed'\">Passed</div>\r\n                    <div class=\"text-danger\" *ngIf=\"product.passed === 'notPassed'\">Not Passed</div>\r\n                  </div>\r\n                  <ng-template #notPassed>\r\n                    -\r\n                  </ng-template>\r\n                </ng-container>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"14\">\r\n                <i *ngIf=\"isLoadingInvoiceProducts\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingInvoiceProducts\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"it.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!it.paginator && !isLoadingInvoiceProducts && invoiceProducts.length > 0\"\r\n           class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"it.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"block-header mb-4\">\r\n      <h2>\r\n        <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n        Invoice Services\r\n      </h2>\r\n\r\n      <button\r\n        [disabled]=\"isLoadingServices\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"New Service\"\r\n        (click)=\"createInvoiceService()\"\r\n      ></button>\r\n    </div>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #st\r\n          [rows]=\"10\"\r\n          [paginator]=\"invoiceServices.length > 0\"\r\n          [value]=\"invoiceServices\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedService\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedService\">Choose the Invoice Service to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto\"\r\n                [model]=\"invoiceServiceMenuItems\"\r\n                [class.disabled]=\"!selectedService\"></p-menubar>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 45%\">Name</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Price</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Other currency</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">DDV</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Discount</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Total Price</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"!isViewingMode ? product : null\">\r\n              <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n              <td style=\"width: 45%\">{{product.base_service.name}}</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n                  {{product.pure_price * form.get('exchange_rate').value | moneyFormat}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"form.get('currency').value === 'EUR'\">\r\n                  {{product.pure_price | moneyFormat}}\r\n                </ng-container>\r\n                \r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container\r\n                  *ngIf=\"form.get('currency').value !== 'EUR'\">{{product.pure_price | moneyFormat}} {{invoice?.currency?.symbol}}</ng-container>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">{{product.ddv}}%</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">{{product.discount | number: '1.0'}}%</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n                  {{product.ddv_discount_price * form.get('exchange_rate').value | moneyFormat}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"form.get('currency').value === 'EUR'\">\r\n                  {{product.ddv_discount_price | moneyFormat}}\r\n                </ng-container>\r\n                \r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n                <i *ngIf=\"isLoadingServices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingServices\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"st.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!st.paginator && !isLoadingServices && invoiceServices.length > 0\"\r\n           class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"st.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Files</h2>\r\n\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #fs\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"files.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedFile\"\r\n          [value]=\"files\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-auto\"\r\n                label=\"Add File\"\r\n                [disabled]=\"isLoadingFiles\"\r\n                (click)=\"openInvoiceFilesModal()\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n              <th style=\"width: 85%\">Name</th>\r\n              <th style=\"width: 10%;\" class=\"text-center\">Actions</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-file let-rowIndex=\"rowIndex\">\r\n            <tr>\r\n              <td class=\"text-center\">{{rowIndex + 1}}</td>\r\n              <td>\r\n                {{getFileName(file.file)}}\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                  <button\r\n                    pButton\r\n                    (click)=\"onDownloadFile(file)\"\r\n                    [loading]=\"addition.has(file.id)\"\r\n                    type=\"button\"\r\n                    class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                    icon=\"pi pi-download\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    (click)=\"onRemoveFile(file.id)\"\r\n                    [loading]=\"deletion.has(file.id)\"\r\n                    type=\"button\"\r\n                    class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                    icon=\"pi pi-trash\"\r\n                  ></button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoadingFiles\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingFiles\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"fs.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!fs.paginator && !isLoadingFiles && files.length > 0\" class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"fs.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<ng-template #infoLoading>\r\n  <div class=\"info-loading\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {Invoice} from \"../../../procurement/models/invoice\";\r\nimport {forkJoin, Observable, of, Subject, switchMap} from \"rxjs\";\r\nimport {ColumnFilterService} from \"@shared/services/column-filter.service\";\r\nimport {debounceTime, finalize, tap} from \"rxjs/operators\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {Table} from \"primeng/table\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {InvoiceService} from \"../../../procurement/services/invoice.service\";\r\nimport {ServiceInvoiceService} from \"@shared/services/service-invoice.service\";\r\nimport {MenuItem} from \"primeng/api\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\n\r\nexport class AccountingNumber {\r\n  title: string;\r\n  accounting_number: number;\r\n}\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-invoices',\r\n  templateUrl: './reports-invoices.component.html',\r\n  styleUrls: ['./reports-invoices.component.scss'],\r\n})\r\nexport class ReportsInvoicesComponent implements OnInit {\r\n  @ViewChild('dt') dt: Table;\r\n  @ViewChild('st') st: Table;\r\n\r\n  isGenerating = false;\r\n  isGeneratingProforma = false;\r\n\r\n  reportItems = [\r\n    {\r\n      label: 'XML',\r\n      icon: 'pi pi-file-edit',\r\n      command: () => this.generateXmlForAll()\r\n    },\r\n    // {\r\n    //   label: 'XML no ddv',\r\n    //   icon: 'pi pi-file-edit',\r\n    //   command: () => this.generateXmlNoDdvForAll(),\r\n    // },\r\n    {\r\n      label: 'Intrastat',\r\n      icon: 'pi pi-file-export',\r\n      command: () => this.generateIntrastatForAll(),\r\n    },\r\n    {\r\n      label: 'Excel',\r\n      icon: 'pi pi-file-excel',\r\n      command: () => this.generateExel()\r\n    }\r\n  ]\r\n\r\n\r\n  tabIndex = 0;\r\n\r\n  menuItems: MenuItem[] = [{\r\n    label: 'Selected Invoice',\r\n    items: [\r\n      {\r\n        label: 'Go To Order',\r\n        icon: 'pi pi-angle-double-right',\r\n        command: () => this.onGoToOrder()\r\n      },\r\n      {\r\n        label: 'Files',\r\n        icon: 'pi pi-file',\r\n        command: () => this.onOpenFiles()\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditInvoice()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveInvoice()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  menuItemsProforma: MenuItem[] = [{\r\n    label: 'Selected Proforma Invoice',\r\n    items: [\r\n      {\r\n        label: 'Go To Order',\r\n        icon: 'pi pi-angle-double-right',\r\n        command: () => this.onGoToOrder()\r\n      },\r\n      {\r\n        label: 'Files',\r\n        icon: 'pi pi-file',\r\n        command: () => this.onOpenFiles()\r\n      },\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.onEditInvoice()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.onRemoveInvoice()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  invoicesTypes = [\r\n    {value: false, name: 'Invoices'},\r\n    {value: true, name: 'Auxiliary Invoices'},\r\n  ];\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    supplier: [null],\r\n    supplier_category: [null],\r\n    system_creation_date_after: [null],\r\n    system_creation_date_before: [null],\r\n    invoice_reception_date_after: [null],\r\n    invoice_reception_date_before: [null],\r\n    items_reception_date_after: [null],\r\n    items_reception_date_before: [null],\r\n    invoice_date_after: [null],\r\n    invoice_date_before: [null],\r\n    has_related: [null],\r\n    is_paid: [null],\r\n    completed: [null],\r\n    purchase_categories: [null],\r\n    accounting_type: [null],\r\n    material_or_service: [null],\r\n    supplier__accounting_number: [null],\r\n    service_accounting_number: [null],\r\n    supplier_serial_number: [null],\r\n    type: [null] // 0 - invoices 1 - services,\r\n  });\r\n\r\n  searchFormProforma = this.fb.group({\r\n    supplier: [null],\r\n    supplier_category: [null],\r\n    system_creation_date_after: [null],\r\n    system_creation_date_before: [null],\r\n    invoice_reception_date_after: [null],\r\n    invoice_reception_date_before: [null],\r\n    items_reception_date_after: [null],\r\n    items_reception_date_before: [null],\r\n    invoice_date_after: [null],\r\n    invoice_date_before: [null],\r\n    has_related: [null],\r\n    is_paid: [null],\r\n    completed: [null],\r\n    purchase_categories: [null],\r\n    accounting_type: [null],\r\n    material_or_service: [null],\r\n    supplier__accounting_number: [null],\r\n    service_accounting_number: [null],\r\n    supplier_serial_number: [null],\r\n    type: [null] // 0 - invoices 1 - services\r\n  });\r\n\r\n\r\n  totals = {invoices: 0, proformasInvoices: 0};\r\n  pureTotals = {invoices: 0, proformasInvoices: 0};\r\n\r\n  accountingNumbers: AccountingNumber[] = [];\r\n\r\n  search$: Subject<void> = new Subject<void>();\r\n  searchProforma$: Subject<void> = new Subject<void>();\r\n\r\n  allInvoices: Invoice[] = [];\r\n  allProformasInvoices: Invoice[] = [];\r\n\r\n  selectedInvoice: Invoice;\r\n  selectedProformaInvoice: Invoice;\r\n\r\n  isLoadingInvoices = false;\r\n  isLoadingProformaInvoices = false;\r\n\r\n  isLoadingAccountingNumbers = true;\r\n\r\n  query: QuerySearch[] = [];\r\n  queryProforma: QuerySearch[] = [];\r\n\r\n  allInvoices$: Observable<any> = this.search$.pipe(\r\n    debounceTime(150),\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => {\r\n      if (this.query.length > 1) {\r\n        if (this.searchForm.get('type').value === false) {\r\n          return this.invoiceService.get(this.query).pipe(\r\n            tap(invoices => {\r\n              this.allInvoices = invoices;\r\n              this.allInvoices = this.getFields(this.allInvoices);\r\n              this.allInvoices.sort((a, b) => new Date(b.system_creation_date).getTime() - new Date(a.system_creation_date).getTime());\r\n              this.countTotals(this.allInvoices, 'invoices')\r\n              this.isLoadingInvoices = false;\r\n            }),\r\n            untilDestroyed(this)\r\n          )\r\n        } else if (this.searchForm.get('type').value === true) {\r\n          return this.serviceInvoiceService.get(this.query).pipe(\r\n            tap(invoices => {\r\n              this.allInvoices = invoices;\r\n              this.allInvoices = this.getFields(this.allInvoices);\r\n              this.allInvoices.forEach(inv => inv.isAux = true);\r\n              this.allInvoices.sort((a, b) => new Date(b.system_creation_date).getTime() - new Date(a.system_creation_date).getTime());\r\n              this.countTotals(this.allInvoices, 'invoices')\r\n              this.isLoadingInvoices = false;\r\n            }),\r\n            untilDestroyed(this)\r\n          )\r\n        } else {\r\n          return forkJoin({\r\n            invoices: this.invoiceService.get(this.query),\r\n            serviceInvoices: this.serviceInvoiceService.get(this.query)\r\n          }).pipe(\r\n            tap(({invoices, serviceInvoices}) => {\r\n              serviceInvoices = serviceInvoices.map(serviceInvoice => {\r\n                serviceInvoice.isAux = true;\r\n                return serviceInvoice;\r\n              });\r\n\r\n              invoices = invoices.map(invoice => {\r\n                invoice.isAux = false;\r\n                return invoice;\r\n              });\r\n\r\n              this.allInvoices = [...invoices, ...serviceInvoices];\r\n              this.allInvoices = this.getFields(this.allInvoices);\r\n              this.allInvoices.sort((a, b) => new Date(b.system_creation_date).getTime() - new Date(a.system_creation_date).getTime());\r\n              this.countTotals(this.allInvoices, 'invoices')\r\n              this.isLoadingInvoices = false;\r\n            }),\r\n            untilDestroyed(this)\r\n          )\r\n        }\r\n      } else {\r\n        return of([]).pipe(\r\n          tap(() => this.countTotals([], 'invoices')),\r\n          tap(() => this.isLoadingInvoices = false)\r\n        )\r\n      }\r\n    }),\r\n    untilDestroyed(this)\r\n  )\r\n\r\n  allInvoicesProforma$: Observable<any> = this.searchProforma$.pipe(\r\n    debounceTime(150),\r\n    tap(() => this.prepareForSearchProforma()),\r\n    switchMap(() => {\r\n      if (this.queryProforma.length > 1) {\r\n        if (this.searchFormProforma.get('type').value === false) {\r\n          return this.invoiceService.get(this.queryProforma).pipe(\r\n            tap(invoices => {\r\n              this.allProformasInvoices = invoices;\r\n              this.allProformasInvoices = this.getFields(this.allProformasInvoices);\r\n              this.allProformasInvoices.sort((a, b) => new Date(b.system_creation_date).getTime() - new Date(a.system_creation_date).getTime());\r\n              this.countTotals(this.allProformasInvoices, 'proformasInvoices');\r\n              this.isLoadingProformaInvoices = false;\r\n            }),\r\n            untilDestroyed(this)\r\n          )\r\n        } else if (this.searchFormProforma.get('type').value === true) {\r\n          return this.serviceInvoiceService.get(this.queryProforma).pipe(\r\n            tap(invoices => {\r\n              this.allProformasInvoices = invoices;\r\n              this.allProformasInvoices.forEach(inv => inv.isAux = true);\r\n              this.allProformasInvoices = this.getFields(this.allProformasInvoices);\r\n              this.allProformasInvoices.sort((a, b) => new Date(b.system_creation_date).getTime() - new Date(a.system_creation_date).getTime());\r\n              this.countTotals(this.allProformasInvoices, 'proformasInvoices');\r\n              this.isLoadingProformaInvoices = false;\r\n            }),\r\n            untilDestroyed(this)\r\n          )\r\n        } else {\r\n          return forkJoin({\r\n            invoices: this.invoiceService.get(this.queryProforma),\r\n            serviceInvoices: this.serviceInvoiceService.get(this.queryProforma)\r\n          }).pipe(\r\n            tap(({invoices, serviceInvoices}) => {\r\n              serviceInvoices = serviceInvoices.map(serviceInvoice => {\r\n                serviceInvoice.isAux = true;\r\n                return serviceInvoice;\r\n              });\r\n\r\n              invoices = invoices.map(invoice => {\r\n                invoice.isAux = false;\r\n                return invoice;\r\n              });\r\n\r\n              this.allProformasInvoices = [...invoices, ...serviceInvoices];\r\n              this.allProformasInvoices = this.getFields(this.allProformasInvoices);\r\n              this.allProformasInvoices.sort((a, b) => new Date(b.system_creation_date).getTime() - new Date(a.system_creation_date).getTime());\r\n              this.countTotals(this.allProformasInvoices, 'proformasInvoices');\r\n              this.isLoadingProformaInvoices = false;\r\n            }),\r\n            untilDestroyed(this)\r\n          )\r\n        }\r\n      } else {\r\n        return of([]).pipe(\r\n          tap(() => this.countTotals([], 'proformasInvoices')),\r\n          tap(() => this.isLoadingProformaInvoices = false)\r\n        )\r\n      }\r\n    }),\r\n    untilDestroyed(this)\r\n  )\r\n\r\n  countTotals(invoices, key: 'invoices' | 'proformasInvoices') {\r\n    this.totals[key] = 0;\r\n    invoices.forEach(el => {\r\n      this.totals[key] += el.total_price_converted;\r\n    });\r\n\r\n    this.pureTotals[key] = 0;\r\n    invoices.forEach(el => {\r\n      this.pureTotals[key] += el.pure_total_price_converted;\r\n    });\r\n\r\n    // @ts-ignore\r\n    this.totals[key] = this.adapterService.convertToMoneyFormat(this.totals[key]);\r\n    // @ts-ignore\r\n    this.pureTotals[key] = this.adapterService.convertToMoneyFormat(this.pureTotals[key]);\r\n  }\r\n\r\n  get invoicesHeader() {\r\n    let type = '';\r\n\r\n    if (this.searchForm.get('type').value === null) {\r\n      type = 'All'\r\n    } else if (this.searchForm.get('type').value) {\r\n      type = 'Auxiliary'\r\n    }\r\n\r\n    return `${type} Invoices`\r\n  }\r\n\r\n  get invoicesProformaHeader() {\r\n    let type = '';\r\n\r\n    if (this.searchFormProforma.get('type').value === null) {\r\n      type = 'All'\r\n    } else if (this.searchFormProforma.get('type').value) {\r\n      type = 'Auxiliary'\r\n    }\r\n\r\n    return `${type} Proforma Invoices`\r\n  }\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    public columnFilterService: ColumnFilterService,\r\n    private readonly adapterService: AdapterService,\r\n    private invoiceService: InvoiceService,\r\n    private serviceInvoiceService: ServiceInvoiceService,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.allInvoices$.pipe(\r\n      untilDestroyed(this)\r\n    ).subscribe()\r\n\r\n    this.allInvoicesProforma$.pipe(\r\n      untilDestroyed(this)\r\n    ).subscribe()\r\n  }\r\n\r\n  getFields(invoices) {\r\n    invoices.map(invoice => {\r\n      invoice.otherCurrency = invoice.currency.code !== 'EUR' ? invoice.total_price : null;\r\n      if (!invoice.is_proforma) {\r\n        invoice.relatedStatus = invoice.proformas.length !== 0;\r\n        if (invoice.proformas) {\r\n          invoice.proformas.forEach(proforma => {\r\n            if (invoice.invoiceId < proforma || !invoice.invoiceId) {\r\n              invoice.relatedId = proforma.id;\r\n            }\r\n          });\r\n        }\r\n      } else {\r\n        invoice.relatedStatus = invoice.general_invoices.length !== 0;\r\n\r\n        if (invoice.general_invoices) {\r\n          invoice.general_invoices.forEach(generalInvoice => {\r\n            if (invoice.relatedId < generalInvoice || !invoice.relatedId) {\r\n              invoice.relatedId = generalInvoice;\r\n            }\r\n          });\r\n        }\r\n      }\r\n      invoice.paid_interest = parseFloat(invoice.paid_interest);\r\n      return invoice;\r\n    });\r\n\r\n    return invoices;\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.searchForm.get('supplier').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategory(id: number) {\r\n    this.searchForm.get('supplier_category').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  getPaidStatus(value) {\r\n    this.searchForm.get('is_paid').patchValue(value);\r\n    this.search$.next();\r\n  }\r\n\r\n  getRelatedStatus(value) {\r\n    this.searchForm.get('has_related').patchValue(value);\r\n    this.search$.next();\r\n  }\r\n\r\n  getCompletedStatus(value) {\r\n    this.searchForm.get('completed').patchValue(value);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectPurchasedCategories(values: any[]) {\r\n    this.searchForm.get('accounting_type').patchValue(null);\r\n    this.searchForm.get('material_or_service').patchValue(null);\r\n\r\n    values.forEach(v => {\r\n      if (v === 'mp') {\r\n        this.searchForm.get('accounting_type').patchValue(1);\r\n      } else if (v === 'ou') {\r\n        this.searchForm.get('material_or_service').patchValue('material');\r\n      } else if (v === 'os') {\r\n        this.searchForm.get('material_or_service').patchValue('service');\r\n      }\r\n    });\r\n\r\n    if (values.find(v => v === 'ou') && values.find(v => v === 'os')) {\r\n      this.searchForm.get('material_or_service').patchValue('both');\r\n    }\r\n\r\n    values = values.filter(v => typeof (v) === 'number');\r\n    this.searchForm.get('purchase_categories').patchValue(values.join(','));\r\n\r\n    this.search$.next();\r\n  }\r\n\r\n  getServiceAccountingNumber(evt, isProforma) {\r\n    const value = evt.target.value.replace(/\\s/g, '');\r\n\r\n    if (isProforma) {\r\n      if (value) {\r\n        this.searchFormProforma.get('service_accounting_number').patchValue(value);\r\n      } else {\r\n        this.searchFormProforma.get('service_accounting_number').patchValue(null);\r\n      }\r\n\r\n      this.searchProforma$.next();\r\n    } else {\r\n      if (value) {\r\n        this.searchForm.get('service_accounting_number').patchValue(value);\r\n      } else {\r\n        this.searchForm.get('service_accounting_number').patchValue(null);\r\n      }\r\n\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  getSupplierSerialNumber(event) {\r\n    const value = event.target.value;\r\n    this.searchForm.get('supplier_serial_number').patchValue(value);\r\n    this.search$.next();\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.dt._first = 0;\r\n\r\n    this.allInvoices = [];\r\n    this.isLoadingInvoices = true;\r\n\r\n    this.query = [];\r\n\r\n    this.query.push({name: 'is_proforma', value: false})\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null && this.searchForm.controls[key].value !== '') {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  prepareForSearchProforma() {\r\n    this.st._first = 0;\r\n\r\n    this.allProformasInvoices = [];\r\n    this.isLoadingProformaInvoices = true;\r\n\r\n    this.queryProforma = [];\r\n\r\n    this.queryProforma.push({name: 'is_proforma', value: true})\r\n\r\n    for (const key in this.searchFormProforma.controls) {\r\n      if (this.searchFormProforma.controls[key].value !== null && this.searchFormProforma.controls[key].value !== '') {\r\n\r\n        if (this.searchFormProforma.controls[key].value instanceof Date) {\r\n          this.queryProforma.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchFormProforma.controls[key].value)\r\n          });\r\n        } else {\r\n          this.queryProforma.push({\r\n            name: key,\r\n            value: this.searchFormProforma.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  onApplyFilter() {\r\n    this.invoiceService.openFilterModal().subscribe(filter => {\r\n      if (filter) {\r\n\r\n        if (this.tabIndex === 0) {\r\n          this.searchForm.patchValue(filter)\r\n        } else {\r\n          this.searchFormProforma.patchValue(filter)\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  clearFilters() {\r\n    if (this.tabIndex === 0) {\r\n      this.searchForm.reset()\r\n    } else {\r\n      this.searchFormProforma.reset()\r\n    }\r\n  }\r\n\r\n  onCreateAuxiliaryInvoice() {\r\n    if (this.tabIndex === 0) {\r\n      this.serviceInvoiceService.openCreateModal(false).subscribe();\r\n    } else {\r\n      this.serviceInvoiceService.openCreateModal(true).subscribe();\r\n    }\r\n  }\r\n\r\n  private onEditInvoice() {\r\n    if (this.tabIndex === 0) {\r\n      window.open(`reports/invoices/${this.selectedInvoice.isAux ? ('service-invoice/' + this.selectedInvoice.id) : ('invoice/' + this.selectedInvoice.id)}`, '_blank')\r\n    } else {\r\n      window.open(`reports/invoices/${this.selectedProformaInvoice.isAux ? ('service-invoice/' + this.selectedProformaInvoice.id) : ('invoice/' + this.selectedProformaInvoice.id)}`, '_blank')\r\n    }\r\n  }\r\n\r\n  private onRemoveInvoice() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (this.tabIndex === 0) {\r\n        if (this.selectedInvoice.isAux) {\r\n          this.serviceInvoiceService.delete(this.selectedInvoice.id).subscribe(() => {\r\n            this.allInvoices = this.allInvoices.filter(x => x.id !== this.selectedInvoice.id);\r\n            this.selectedInvoice = null;\r\n          });\r\n        } else {\r\n          this.invoiceService.delete(this.selectedInvoice.id).subscribe(() => {\r\n            this.allInvoices = this.allInvoices.filter(x => x.id !== this.selectedInvoice.id);\r\n            this.selectedInvoice = null;\r\n          });\r\n        }\r\n      } else {\r\n        if (this.selectedProformaInvoice.isAux) {\r\n          this.serviceInvoiceService.delete(this.selectedProformaInvoice.id).subscribe(() => {\r\n            this.allProformasInvoices = this.allProformasInvoices.filter(x => x.id !== this.selectedProformaInvoice.id);\r\n            this.selectedProformaInvoice = null;\r\n          });\r\n        } else {\r\n          this.invoiceService.delete(this.selectedProformaInvoice.id).subscribe(() => {\r\n            this.allProformasInvoices = this.allProformasInvoices.filter(x => x.id !== this.selectedProformaInvoice.id);\r\n            this.selectedProformaInvoice = null;\r\n          });\r\n        }\r\n      }\r\n    })\r\n  }\r\n\r\n  private onGoToOrder() {\r\n    if (this.tabIndex === 0) {\r\n      if (this.selectedInvoice.order) {\r\n        if (this.selectedInvoice.order.accounting_type === 1) {\r\n          window.open(`/procurement/chains/order/${this.selectedInvoice.order.id}`, '_blank')\r\n        } else if (this.selectedInvoice.order.accounting_type === 2) {\r\n          window.open(`/outsourcing/chains/order/${this.selectedInvoice.order.id}`, '_blank')\r\n        }\r\n      }\r\n    } else {\r\n      if (this.selectedProformaInvoice.order) {\r\n        if (this.selectedProformaInvoice.order.accounting_type === 1) {\r\n          window.open(`/procurement/chains/order/${this.selectedProformaInvoice.order.id}`, '_blank')\r\n        } else if (this.selectedProformaInvoice.order.accounting_type === 2) {\r\n          window.open(`/outsourcing/chains/order/${this.selectedProformaInvoice.order.id}`, '_blank')\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private onOpenFiles() {\r\n    if (this.tabIndex === 0) {\r\n      if (this.selectedInvoice.isAux) {\r\n        this.serviceInvoiceService.serviceInvoiceFiles(this.selectedInvoice).subscribe(res => {\r\n          if (res) {\r\n            this.selectedInvoice.related_files = !!res.invoiceLength;\r\n          }\r\n        });\r\n      } else {\r\n        this.invoiceService.invoiceFiles(this.selectedInvoice).subscribe(res => {\r\n          if (res) {\r\n            this.selectedInvoice.related_files = !!res.invoiceLength;\r\n          }\r\n        });\r\n      }\r\n    } else {\r\n      if (this.selectedProformaInvoice.isAux) {\r\n        this.serviceInvoiceService.serviceInvoiceFiles(this.selectedProformaInvoice).subscribe(res => {\r\n          if (res) {\r\n            this.selectedProformaInvoice.related_files = !!res.invoiceLength;\r\n          }\r\n        });\r\n      } else {\r\n        this.invoiceService.invoiceFiles(this.selectedProformaInvoice).subscribe(res => {\r\n          if (res) {\r\n            this.selectedProformaInvoice.related_files = !!res.invoiceLength;\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  onSelectCompanyProforma(id: number) {\r\n    this.searchFormProforma.get('supplier').patchValue(id);\r\n    this.searchProforma$.next();\r\n  }\r\n\r\n  onSelectCategoryProforma(id: number) {\r\n    this.searchFormProforma.get('supplier_category').patchValue(id);\r\n    this.searchProforma$.next();\r\n  }\r\n\r\n  getPaidStatusProforma(value) {\r\n    this.searchFormProforma.get('is_paid').patchValue(value);\r\n    this.searchProforma$.next();\r\n  }\r\n\r\n  getRelatedStatusProforma(value) {\r\n    this.searchFormProforma.get('has_related').patchValue(value);\r\n    this.searchProforma$.next();\r\n  }\r\n\r\n  getCompletedStatusProforma(value) {\r\n    this.searchFormProforma.get('completed').patchValue(value);\r\n    this.searchProforma$.next();\r\n  }\r\n\r\n  onSelectPurchasedCategoriesProforma(values: any[]) {\r\n    this.searchFormProforma.get('accounting_type').patchValue(null);\r\n    this.searchFormProforma.get('material_or_service').patchValue(null);\r\n\r\n    values.forEach(v => {\r\n      if (v === 'mp') {\r\n        this.searchFormProforma.get('accounting_type').patchValue(1);\r\n      } else if (v === 'ou') {\r\n        this.searchFormProforma.get('material_or_service').patchValue('material');\r\n      } else if (v === 'os') {\r\n        this.searchFormProforma.get('material_or_service').patchValue('service');\r\n      }\r\n    });\r\n\r\n    if (values.find(v => v === 'ou') && values.find(v => v === 'os')) {\r\n      this.searchFormProforma.get('material_or_service').patchValue('both');\r\n    }\r\n\r\n    values = values.filter(v => typeof (v) === 'number');\r\n    this.searchFormProforma.get('purchase_categories').patchValue(values.join(','));\r\n\r\n    this.searchProforma$.next();\r\n  }\r\n\r\n  generateExel() {\r\n    if (this.tabIndex === 0) {\r\n      this.invoiceService.generateExel(this.allInvoices);\r\n    } else {\r\n      this.invoiceService.generateExel(this.allProformasInvoices);\r\n    }\r\n  }\r\n\r\n  generateXmlForAll() {\r\n    if (this.tabIndex === 0) {\r\n      this.isGenerating = true;\r\n      this.generateXML(this.allInvoices, this.dt._value);\r\n    } else {\r\n      this.isGeneratingProforma = true;\r\n      this.generateXML(this.allProformasInvoices, this.st._value)\r\n    }\r\n  }\r\n\r\n  generateXmlNoDdvForAll() {\r\n    if (this.tabIndex === 0) {\r\n      this.isGenerating = true;\r\n      this.generateNoDdvXML(this.allInvoices, this.dt._value);\r\n    } else {\r\n      this.isGeneratingProforma = true;\r\n      this.generateNoDdvXML(this.allProformasInvoices, this.st._value)\r\n    }\r\n  }\r\n\r\n  generateIntrastatForAll() {\r\n    if (this.tabIndex === 0) {\r\n      this.isGenerating = true;\r\n      this.generateIntrastatXML(this.allInvoices, this.dt._value);\r\n    } else {\r\n      this.isGeneratingProforma = true;\r\n      this.generateIntrastatXML(this.allProformasInvoices, this.st._value)\r\n    }\r\n  }\r\n\r\n\r\n  generateIntrastatXML(inv, invoices: Invoice[]) {\r\n    invoices = JSON.parse(JSON.stringify(invoices));\r\n    inv = JSON.parse(JSON.stringify(inv));\r\n\r\n    invoices.sort((a, b) => new Date(a.invoice_date).getTime() - new Date(b.invoice_date).getTime());\r\n    if (inv) {\r\n      inv.sort((a, b) => new Date(a.invoice_date).getTime() - new Date(b.invoice_date).getTime());\r\n    }\r\n\r\n    let filteredInvoices: Invoice[] = [];\r\n\r\n    if (inv) {\r\n      filteredInvoices = inv;\r\n    } else {\r\n      filteredInvoices = invoices;\r\n    }\r\n\r\n    const xlmInvoices = [];\r\n    filteredInvoices.forEach(invoice => {\r\n      if (!invoice.isAux) {\r\n        xlmInvoices.push({invoice_id: invoice.id});\r\n      }\r\n    });\r\n\r\n    this.invoiceService.renderIntrastatXML(xlmInvoices).pipe(\r\n      finalize(() => {\r\n        this.isGenerating = false;\r\n        this.isGeneratingProforma = false;\r\n      })\r\n    ).subscribe();\r\n  }\r\n\r\n  generateNoDdvXML(inv, invoices: Invoice[]) {\r\n    invoices = JSON.parse(JSON.stringify(invoices));\r\n    inv = JSON.parse(JSON.stringify(inv));\r\n\r\n    invoices.sort((a, b) => new Date(a.invoice_date).getTime() - new Date(b.invoice_date).getTime());\r\n\r\n    if (inv) {\r\n      inv.sort((a, b) => new Date(a.invoice_date).getTime() - new Date(b.invoice_date).getTime());\r\n    }\r\n\r\n    let filteredInvoices: Invoice[] = [];\r\n\r\n    if (inv) {\r\n      filteredInvoices = inv;\r\n    } else {\r\n      filteredInvoices = invoices;\r\n    }\r\n\r\n    const xlmInvoices = [];\r\n\r\n    filteredInvoices.forEach(invoice => {\r\n      if (invoice.isAux) {\r\n        xlmInvoices.push({\r\n          service_invoice_id: invoice.id,\r\n        });\r\n      } else {\r\n        xlmInvoices.push({\r\n          invoice_id: invoice.id,\r\n        });\r\n      }\r\n    });\r\n\r\n    this.invoiceService.generateNoDdvXML(xlmInvoices).pipe(\r\n      finalize(() => {\r\n        this.isGenerating = false;\r\n        this.isGeneratingProforma = false;\r\n      })\r\n    ).subscribe(data => {\r\n      this.invoiceService.downloadXmlFile(data, 'no-ddv');\r\n    });\r\n  }\r\n\r\n  generateXML(inv: any, invoices: Invoice[]) {\r\n    invoices = JSON.parse(JSON.stringify(invoices));\r\n    inv = JSON.parse(JSON.stringify(inv));\r\n\r\n    invoices.sort((a, b) => new Date(a.invoice_date).getTime() - new Date(b.invoice_date).getTime());\r\n    if (inv) {\r\n      inv.sort((a, b) => new Date(a.invoice_date).getTime() - new Date(b.invoice_date).getTime());\r\n    }\r\n\r\n    this.invoiceService.renderXML().subscribe(startNumber => {\r\n      if (startNumber) {\r\n        let filteredInvoices: Invoice[] = [];\r\n\r\n        if (inv) {\r\n          filteredInvoices = inv;\r\n        } else {\r\n          filteredInvoices = invoices;\r\n        }\r\n\r\n        const xlmInvoices = [];\r\n\r\n        filteredInvoices.forEach(invoice => {\r\n          if (invoice.isAux) {\r\n            xlmInvoices.push({\r\n              service_invoice_id: invoice.id,\r\n            });\r\n          } else {\r\n            xlmInvoices.push({\r\n              invoice_id: invoice.id,\r\n            });\r\n          }\r\n        });\r\n\r\n        const send = {\r\n          start_number: parseInt(startNumber, 10),\r\n          ids: xlmInvoices,\r\n        };\r\n\r\n        this.invoiceService.generateXML(send).subscribe(\r\n          data => {\r\n            this.invoiceService.downloadXmlFile(data);\r\n            this.isGenerating = false;\r\n            this.isGeneratingProforma = false;\r\n          },\r\n          error => {\r\n            this.invoiceService.editInvoiceToGenerateXml(error).subscribe(res => {\r\n              if (res) {\r\n                this.repeatGenerateXML(inv, invoices, startNumber);\r\n              } else {\r\n                this.isGenerating = false;\r\n                this.isGeneratingProforma = false;\r\n              }\r\n            });\r\n          }\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  repeatGenerateXML(inv, invoices: Invoice[], startNumber: string) {\r\n    let filteredInvoices: Invoice[] = [];\r\n\r\n    if (inv) {\r\n      filteredInvoices = inv;\r\n    } else {\r\n      filteredInvoices = invoices;\r\n    }\r\n\r\n    const xlmInvoices = [];\r\n\r\n    filteredInvoices.forEach(invoice => {\r\n      if (invoice.isAux) {\r\n        xlmInvoices.push({\r\n          service_invoice_id: invoice.id,\r\n        });\r\n      } else {\r\n        xlmInvoices.push({\r\n          invoice_id: invoice.id,\r\n        });\r\n      }\r\n    });\r\n\r\n    const send = {\r\n      start_number: parseInt(startNumber, 10),\r\n      ids: xlmInvoices,\r\n    };\r\n\r\n    this.invoiceService.generateXML(send).subscribe(\r\n      data => {\r\n        this.invoiceService.downloadXmlFile(data);\r\n        this.isGenerating = false;\r\n        this.isGeneratingProforma = false;\r\n      },\r\n      error => {\r\n        this.invoiceService.editInvoiceToGenerateXml(error).subscribe(res => {\r\n          if (res) {\r\n            this.repeatGenerateXML(inv, invoices, startNumber);\r\n          } else {\r\n            this.isGenerating = false;\r\n            this.isGeneratingProforma = false;\r\n          }\r\n        });\r\n      }\r\n    );\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <ng-container *ngIf=\"tabIndex === 0\">\r\n        <h1>{{invoicesHeader}} (Total: {{totals.invoices}}  / Pure Total: {{pureTotals.invoices}} )</h1>\r\n      </ng-container>\r\n      <ng-container *ngIf=\"tabIndex === 1\">\r\n        <h1>{{invoicesProformaHeader}} (Total: {{totals.proformasInvoices}}  / Pure\r\n          Total: {{pureTotals.proformasInvoices}} )</h1>\r\n      </ng-container>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"ml-auto p-button-icon mr-2\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"New Auxiliary Invoice\"\r\n        (click)=\"onCreateAuxiliaryInvoice()\"\r\n      ></button>\r\n\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"mr-2\"\r\n        icon=\"pi pi-angle-double-right\"\r\n        label=\"Apply Filter\"\r\n        (click)=\"onApplyFilter()\"\r\n      ></button>\r\n\r\n      <button\r\n        class=\"p-button-danger mr-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-times\"\r\n        label=\"Clear Filter\"\r\n        (click)=\"clearFilters()\"\r\n      ></button>\r\n\r\n      <ng-container *ngIf=\"tabIndex === 0\">\r\n        <button\r\n          [disabled]=\"isLoadingInvoices || (allInvoices && allInvoices.length === 0) || !allInvoices\"\r\n          type=\"button\"\r\n          pButton\r\n          class=\"p-button-icon\"\r\n          icon=\"pi pi-file\"\r\n          label=\"Generate Report\"\r\n          (click)=\"menu.toggle($event)\"\r\n          [loading]=\"isGenerating\"\r\n        >\r\n        </button>\r\n      </ng-container>\r\n\r\n      <ng-container *ngIf=\"tabIndex === 1\">\r\n        <button\r\n          [disabled]=\"isLoadingProformaInvoices|| (allProformasInvoices && allProformasInvoices.length === 0) || !allProformasInvoices\"\r\n          type=\"button\"\r\n          class=\"p-button-icon\"\r\n          pButton\r\n          icon=\"pi pi-file\"\r\n          label=\"Generate Report\"\r\n          (click)=\"menu.toggle($event)\"\r\n          [loading]=\"isGeneratingProforma\"\r\n        >\r\n        </button>\r\n      </ng-container>\r\n      <p-tieredMenu #menu [model]=\"reportItems\" [popup]=\"true\"></p-tieredMenu>\r\n\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n\r\n  <p-tabView class=\"custom-tabs\" [(activeIndex)]=\"tabIndex\">\r\n    <p-tabPanel\r\n      [header]=\"invoicesHeader\"\r\n      [selected]=\"true\"\r\n    >\r\n      <form\r\n        [formGroup]=\"searchForm\"\r\n        class=\"form mb-2\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Company</label>\r\n              <pek-company-picker\r\n                [currentCompanyId]=\"searchForm.get('supplier').value\"\r\n                (selectCompany)=\"onSelectCompany($event)\"\r\n              ></pek-company-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Company Category</label>\r\n              <pek-company-category-picker\r\n                [selectedCategoryId]=\"searchForm.get('supplier_category').value\"\r\n                (selectCompanyCategory)=\"onSelectCategory($event)\"></pek-company-category-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Creation From</label>\r\n              <p-calendar\r\n                formControlName=\"system_creation_date_after\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Creation To</label>\r\n              <p-calendar\r\n                formControlName=\"system_creation_date_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Type</label>\r\n              <p-dropdown\r\n                [options]=\"invoicesTypes\"\r\n                placeholder=\"Choice Type\"\r\n                [showClear]=\"true\"\r\n                optionValue=\"value\"\r\n                optionLabel=\"name\"\r\n                formControlName=\"type\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              ></p-dropdown>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"checkboxes\">\r\n              <div class=\"checkbox\">\r\n                <div class=\"form-group\">\r\n                  <label>Related</label>\r\n                  <pek-input-three-values\r\n                    [filterValue]=\"columnFilterService.getFilterValue(searchForm.get('has_related').value)\"\r\n                    (changeValue)=\"getRelatedStatus($event)\">\r\n                  </pek-input-three-values>\r\n                </div>\r\n              </div>\r\n              <div class=\"checkbox\">\r\n                <div class=\"form-group\">\r\n                  <label>Payment</label>\r\n                  <pek-input-three-values\r\n                    [filterValue]=\"columnFilterService.getFilterValue(searchForm.get('is_paid').value)\"\r\n                    (changeValue)=\"getPaidStatus($event)\">\r\n                  </pek-input-three-values>\r\n                </div>\r\n              </div>\r\n              <div class=\"checkbox\">\r\n                <div class=\"form-group\">\r\n                  <label>Completed</label>\r\n                  <pek-input-three-values\r\n                    [filterValue]=\"columnFilterService.getFilterValue(searchForm.get('completed').value)\"\r\n                    (changeValue)=\"getCompletedStatus($event)\">\r\n                  </pek-input-three-values>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Recieved From</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_reception_date_after\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Recieved To</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_reception_date_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Items Recieved From</label>\r\n              <p-calendar\r\n                formControlName=\"items_reception_date_after\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Items Recieved To</label>\r\n              <p-calendar\r\n                formControlName=\"items_reception_date_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Purchase Category</label>\r\n              <pek-multi-purchase-category-picker\r\n                [withReportFilters]=\"true\"\r\n                (choiceCategories)=\"onSelectPurchasedCategories($event)\"\r\n              ></pek-multi-purchase-category-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Accounting Number</label>\r\n              <pek-accounting-number-picker\r\n                formControlName=\"supplier__accounting_number\"\r\n                (ngModelChange)=\"this.search$.next()\"\r\n              ></pek-accounting-number-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Date From</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_date_after\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Date To</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_date_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Service Accounting Number</label>\r\n              <input pInputText (input)=\"getServiceAccountingNumber($event, false)\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Supplier Serial Number</label>\r\n              <input pInputText (input)=\"getSupplierSerialNumber($event)\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-4 menu-bar\">\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedInvoice\"></p-menubar>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"allInvoices.length > 0\"\r\n        scrollHeight=\"calc(100vh - 19rem)\"\r\n        [value]=\"allInvoices\"\r\n        [(selection)]=\"selectedInvoice\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"table-header\">\r\n\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 6%\" pSortableColumn=\"system_creation_date\">\r\n              <div class=\"td-col\">\r\n                Creation Date\r\n                <p-sortIcon field=\"system_creation_date\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" pSortableColumn=\"invoice_date\" class=\"text-center\">\r\n              <div class=\"td-col\">\r\n                Invoice Date\r\n                <p-sortIcon field=\"invoice_date\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"invoice_reception_date\">\r\n              <div class=\"td-col\">\r\n                Invoice Reception\r\n                <p-sortIcon\r\n                  field=\"invoice_reception_date\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"items_reception_date\">\r\n              <div class=\"td-col\">\r\n                Items Reception\r\n                <p-sortIcon field=\"items_reception_date\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"self_serial_number\">\r\n              <div class=\"td-col\">\r\n                Invoice Number\r\n                <p-sortIcon field=\"self_serial_number\"></p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 8%\" pSortableColumn=\"supplier.name\">\r\n              <div class=\"td-col\">\r\n                Company\r\n                <p-sortIcon field=\"supplier.name\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" pSortableColumn=\"supplier_serial_number\" class=\"text-center\">\r\n              <div class=\"td-col\">\r\n                Supplier Serial Num\r\n                <p-sortIcon field=\"supplier_serial_number\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"purchase_category\">\r\n              <div class=\"td-col\">\r\n                Purchase Category\r\n                <p-sortIcon field=\"purchase_category\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"total_price_converted\">\r\n              <div class=\"td-col\">\r\n                Total Price\r\n                <p-sortIcon field=\"total_price_converted\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"pure_total_price_converted\">\r\n              <div class=\"td-col\">\r\n                Pure Total Price\r\n                <p-sortIcon field=\"pure_total_price_converted\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"otherCurrency\">\r\n              <div class=\"td-col\">\r\n                Other Currency\r\n                <p-sortIcon field=\"otherCurrency\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 5%\" class=\"text-center\" pSortableColumn=\"order.id\">\r\n              <div class=\"td-col\">\r\n                Order ID\r\n                <p-sortIcon field=\"order.id\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 8%\" class=\"text-center\" pSortableColumn=\"relatedId\">\r\n              <div class=\"td-col\">\r\n                Related\r\n                <p-sortIcon field=\"relatedId\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 5%\" class=\"text-center\" pSortableColumn=\"payment_status\">\r\n              <div class=\"td-col\">\r\n                Payment\r\n                <p-sortIcon field=\"payment_status\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"paid_interest\">\r\n              <div class=\"td-col\">\r\n                Payment Amount\r\n                <p-sortIcon field=\"paid_interest\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 5%\" pSortableColumn=\"completed\" class=\"text-center\">\r\n              <div class=\"td-col\">\r\n                Completed\r\n                <p-sortIcon field=\"completed\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"invoice\" class=\"invoice-table-tr\">\r\n            <td style=\"width: 3%\" class=\"text-center\">{{i + 1}}</td>\r\n            <td style=\"width: 6%\">{{invoice.system_creation_date|date:'dd/MM/yyyy'}} <i\r\n              *ngIf=\"invoice.related_files\"\r\n              class=\"pi pi-paperclip\">\r\n\r\n            </i>\r\n            </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">{{invoice.invoice_date |date:'dd/MM/yyyy'}}</td>\r\n            <td style=\"width: 6%\" class=\"text-center\">{{invoice.invoice_reception_date|date:'dd/MM/yyyy'}}</td>\r\n            <td style=\"width: 6%\" class=\"text-center\">{{invoice.items_reception_date|date:'dd/MM/yyyy'}} </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">{{invoice.self_serial_number}}</td>\r\n            <td style=\"width: 8%\">{{invoice.supplier ? invoice.supplier.name : ''}} </td>\r\n            <td style=\"width: 6%\"\r\n                class=\"text-center\">{{invoice.supplier_serial_number ? invoice.supplier_serial_number : 'None'}}</td>\r\n            <td style=\"width: 6%\"\r\n                class=\"text-center\">{{invoice.purchase_category ? invoice.purchase_category.name : 'None'}} </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">\r\n              {{invoice.total_price_converted | moneyFormat}} \r\n            </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">\r\n              {{invoice.pure_total_price_converted | moneyFormat}} \r\n            </td>\r\n            <td style=\"width: 6%\" class=\"text-center\">\r\n              <ng-container *ngIf=\"invoice.currency.code !== 'EUR'\">\r\n                {{invoice.otherCurrency | moneyFormat}} {{invoice.currency?.symbol}}\r\n              </ng-container>\r\n            </td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{invoice.order ? invoice.order.id : 'Manual Invoice'}}</td>\r\n            <td style=\"width: 8%\" class=\"text-center\">\r\n              <ng-container *ngIf=\"invoice.proformas.length>0\">\r\n                   <span *ngFor=\"let num of invoice.proformas; let idx = index\">\r\n                  {{num.self_serial_number}}<i *ngIf=\"idx !== invoice.proformas.length - 1\">,</i>\r\n                    </span>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"invoice.proformas.length === 0\"> Not Related</ng-container>\r\n            </td>\r\n            <td style=\"width: 5%\" class=\"text-center\">{{invoice.payment_status|titlecase }}</td>\r\n            <td class=\"text-center\"\r\n                style=\"width: 6%\">{{(invoice.paid_interest ? invoice.paid_interest : '0') | number: '1.2-2'}}%\r\n            </td>\r\n            <td style=\"width: 5%\" class=\"text-center\">\r\n              <i class=\"pi pi-check text-success\" *ngIf=\"invoice.completed\"></i>\r\n              <i class=\"pi pi-times-circle text-danger\" *ngIf=\"!invoice.completed\"></i>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n              <i *ngIf=\"isLoadingInvoices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoadingInvoices\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n      <div *ngIf=\"!dt.paginator && !isLoadingInvoices && allInvoices.length > 0\" class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"dt.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </p-tabPanel>\r\n\r\n    <p-tabPanel\r\n      [header]=\"invoicesProformaHeader\"\r\n    >\r\n      <form\r\n        [formGroup]=\"searchFormProforma\"\r\n        class=\"form mb-2\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Company</label>\r\n              <pek-company-picker\r\n                [currentCompanyId]=\"searchFormProforma.get('supplier').value\"\r\n                (selectCompany)=\"onSelectCompanyProforma($event)\"\r\n              ></pek-company-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Company Category</label>\r\n              <pek-company-category-picker\r\n                [selectedCategoryId]=\"searchFormProforma.get('supplier_category').value\"\r\n                (selectCompanyCategory)=\"onSelectCategoryProforma($event)\"></pek-company-category-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Creation From</label>\r\n              <p-calendar\r\n                formControlName=\"system_creation_date_after\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Creation To</label>\r\n              <p-calendar\r\n                formControlName=\"system_creation_date_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Type</label>\r\n              <p-dropdown\r\n                [options]=\"invoicesTypes\"\r\n                placeholder=\"Choice Type\"\r\n                [showClear]=\"true\"\r\n                optionValue=\"value\"\r\n                optionLabel=\"name\"\r\n                formControlName=\"type\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              ></p-dropdown>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"checkboxes\">\r\n              <div class=\"checkbox\">\r\n                <div class=\"form-group\">\r\n                  <label>Related</label>\r\n                  <pek-input-three-values\r\n                    [filterValue]=\"columnFilterService.getFilterValue(searchFormProforma.get('has_related').value)\"\r\n                    (changeValue)=\"getRelatedStatusProforma($event)\">\r\n                  </pek-input-three-values>\r\n                </div>\r\n              </div>\r\n              <div class=\"checkbox\">\r\n                <div class=\"form-group\">\r\n                  <label>Payment</label>\r\n                  <pek-input-three-values\r\n                    [filterValue]=\"columnFilterService.getFilterValue(searchFormProforma.get('is_paid').value)\"\r\n                    (changeValue)=\"getPaidStatusProforma($event)\">\r\n                  </pek-input-three-values>\r\n                </div>\r\n              </div>\r\n              <div class=\"checkbox\">\r\n                <div class=\"form-group\">\r\n                  <label>Completed</label>\r\n                  <pek-input-three-values\r\n                    [filterValue]=\"columnFilterService.getFilterValue(searchFormProforma.get('completed').value)\"\r\n                    (changeValue)=\"getCompletedStatusProforma($event)\">\r\n                  </pek-input-three-values>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Recieved From</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_reception_date_after\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Recieved To</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_reception_date_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Items Recieved From</label>\r\n              <p-calendar\r\n                formControlName=\"items_reception_date_after\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Items Recieved To</label>\r\n              <p-calendar\r\n                formControlName=\"items_reception_date_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Purchase Category</label>\r\n              <pek-multi-purchase-category-picker\r\n                [withReportFilters]=\"true\"\r\n                (choiceCategories)=\"onSelectPurchasedCategoriesProforma($event)\"\r\n              ></pek-multi-purchase-category-picker>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\" *ngIf=\"tabIndex\">\r\n              <label>Accounting Number</label>\r\n              <pek-accounting-number-picker\r\n                formControlName=\"supplier__accounting_number\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              ></pek-accounting-number-picker>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Date From</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_date_after\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Date To</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_date_before\"\r\n                [showButtonBar]=\"true\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n                (ngModelChange)=\"searchProforma$.next()\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-2\">\r\n            <div class=\"form-group\">\r\n              <label>Service Accounting Number</label>\r\n              <input pInputText (input)=\"getServiceAccountingNumber($event, true)\">\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-6 menu-bar\">\r\n            <p-menubar class=\"ml-auto\" [model]=\"menuItemsProforma\"\r\n                       [class.disabled]=\"!selectedProformaInvoice\"></p-menubar>\r\n          </div>\r\n        </div>\r\n      </form>\r\n\r\n      <p-table\r\n        #st\r\n        selectionMode=\"single\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"allProformasInvoices.length > 0\"\r\n        scrollHeight=\"calc(100vh - 19rem)\"\r\n        [value]=\"allProformasInvoices\"\r\n        [(selection)]=\"selectedProformaInvoice\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"table-header\">\r\n\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 3%\" class=\"index-header text-center\">#</th>\r\n            <th style=\"width: 6%\" pSortableColumn=\"system_creation_date\">\r\n              <div class=\"td-col\">\r\n                Creation Date\r\n                <p-sortIcon field=\"system_creation_date\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" pSortableColumn=\"invoice_date\" class=\"text-center\">\r\n              <div class=\"td-col\">\r\n                Invoice Date\r\n                <p-sortIcon field=\"invoice_date\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"invoice_reception_date\">\r\n              <div class=\"td-col\">\r\n                Invoice Reception\r\n                <p-sortIcon\r\n                  field=\"invoice_reception_date\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"items_reception_date\">\r\n              <div class=\"td-col\">\r\n                Items Reception\r\n                <p-sortIcon field=\"items_reception_date\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"self_serial_number\">\r\n              <div class=\"td-col\">\r\n                Invoice Number\r\n                <p-sortIcon field=\"self_serial_number\"></p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 8%\" pSortableColumn=\"supplier.name\">\r\n              <div class=\"td-col\">\r\n                Company\r\n                <p-sortIcon field=\"supplier.name\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" pSortableColumn=\"supplier_serial_number\" class=\"text-center\">\r\n              <div class=\"td-col\">\r\n                Supplier Serial Num\r\n                <p-sortIcon field=\"supplier_serial_number\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"purchase_category\">\r\n              <div class=\"td-col\">\r\n                Purchase Category\r\n                <p-sortIcon field=\"purchase_category\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"total_price_converted\">\r\n              <div class=\"td-col\">\r\n                Total Price\r\n                <p-sortIcon field=\"total_price_converted\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"pure_total_price_converted\">\r\n              <div class=\"td-col\">\r\n                Pure Total Price\r\n                <p-sortIcon field=\"pure_total_price_converted\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"otherCurrency\">\r\n              <div class=\"td-col\">\r\n                Other Currency\r\n                <p-sortIcon field=\"otherCurrency\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 5%\" class=\"text-center\" pSortableColumn=\"order.id\">\r\n              <div class=\"td-col\">\r\n                Order ID\r\n                <p-sortIcon field=\"order.id\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 8%\" class=\"text-center\" pSortableColumn=\"relatedId\">\r\n              <div class=\"td-col\">\r\n                Related\r\n                <p-sortIcon field=\"relatedId\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 5%\" class=\"text-center\" pSortableColumn=\"payment_status\">\r\n              <div class=\"td-col\">\r\n                Payment\r\n                <p-sortIcon field=\"payment_status\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 6%\" class=\"text-center\" pSortableColumn=\"paid_interest\">\r\n              <div class=\"td-col\">\r\n                Payment Amount\r\n                <p-sortIcon field=\"paid_interest\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n            <th style=\"width: 5%\" pSortableColumn=\"completed\" class=\"text-center\">\r\n              <div class=\"td-col\">\r\n                Completed\r\n                <p-sortIcon field=\"completed\">\r\n                </p-sortIcon>\r\n              </div>\r\n            </th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"invoice\" class=\"invoice-table-tr\">\r\n            <td class=\"text-center\" style=\"width: 3%\">{{i + 1}}</td>\r\n            <td style=\"width: 6%\">{{invoice.system_creation_date|date:'dd/MM/yyyy'}} <i\r\n              *ngIf=\"invoice.related_files\"\r\n              class=\"pi pi-paperclip\"></i>\r\n            </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{invoice.invoice_date | date: 'dd/MM/yyyy'}}</td>\r\n            <td class=\"text-center\" style=\"width: 6%\">{{invoice.invoice_reception_date|date:'dd/MM/yyyy'}} </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">{{invoice.items_reception_date|date:'dd/MM/yyyy'}} </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">{{invoice.self_proforma_serial_number}}</td>\r\n            <td style=\"width: 8%\">{{invoice.supplier ? invoice.supplier.name : ''}} </td>\r\n            <td style=\"width: 6%\"\r\n                class=\"text-center\">{{invoice.supplier_serial_number ? invoice.supplier_serial_number : 'None'}}</td>\r\n            <td style=\"width: 6%\"\r\n                class=\"text-center\">{{invoice.purchase_category ? invoice.purchase_category.name : 'None'}} </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">\r\n              {{invoice.total_price_converted | moneyFormat}} \r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">\r\n              <!--                {{invoice.total_price_not_ddv|number:'1.3-3'}} -->\r\n              {{(invoice.pure_total_price_converted ? invoice.pure_total_price_converted : 0) | moneyFormat}} \r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">\r\n              <ng-container *ngIf=\"invoice.currency.code !== 'EUR'\">\r\n                {{invoice.otherCurrency | moneyFormat}} {{invoice.currency?.symbol}}\r\n              </ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{invoice.order ? invoice.order.id : 'Manual Invoice'}}</td>\r\n            <td class=\"text-center\" style=\"width: 8%\">\r\n              <ng-container *ngIf=\"invoice.general_invoices.length>0\">\r\n                <div *ngFor=\"let num of invoice.general_invoices; let idx = index\">\r\n                  {{num}}<i *ngIf=\"idx !== invoice.general_invoices.length - 1\">,</i>\r\n                </div>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"invoice.general_invoices.length === 0\"> Not Related</ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%\">{{invoice.payment_status|titlecase }}</td>\r\n            <td class=\"text-center\"\r\n                style=\"width: 6%\">{{(invoice.paid_interest ? invoice.paid_interest : '0') | number: '1.2-2'}}%\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%\">\r\n              <i class=\"pi pi-check text-success\" *ngIf=\"invoice.completed\"></i>\r\n              <i class=\"pi pi-times-circle text-danger\" *ngIf=\"!invoice.completed\"></i>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n              <i *ngIf=\"isLoadingProformaInvoices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoadingProformaInvoices\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"st.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >\r\n            All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n      <div *ngIf=\"!st.paginator && !isLoadingProformaInvoices&& allProformasInvoices.length > 0\"\r\n           class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"st.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </p-tabPanel>\r\n  </p-tabView>\r\n</div>\r\n\r\n<ng-template #loadingAccountingNumber>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {FormBuilder} from \"@angular/forms\";\r\nimport {BehaviorSubject, Observable, startWith, Subject, switchMap} from \"rxjs\";\r\nimport {debounceTime, distinctUntilChanged, filter, map, tap} from \"rxjs/operators\";\r\nimport {WarehouseProductService} from \"../../../warehouse/services/warehouse-product.service\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {FilterService} from \"primeng/api\";\r\nimport {WarehouseProduct} from \"../../../warehouse/models/warehouse-product\";\r\nimport {AccountingProductsService} from \"../../services/accounting-products.service\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-item-card',\r\n  templateUrl: './reports-item-card.component.html',\r\n  styleUrls: ['./reports-item-card.component.scss']\r\n})\r\nexport class ReportsItemCardComponent implements OnInit {\r\n  isLoading = false;\r\n  isStarted = false;\r\n\r\n  selectedProduct: WarehouseProduct;\r\n\r\n  search$: BehaviorSubject<string> = new BehaviorSubject<string>('');\r\n  isLoadingNomenclatures = false;\r\n\r\n  products$: Observable<WarehouseProduct[]> = this.search$.pipe(\r\n    distinctUntilChanged(),\r\n    debounceTime(150),\r\n    tap(() => this.isLoadingNomenclatures = true),\r\n    switchMap(name => this.warehouseProductService.getPagination([\r\n      {name: 'type', value: '0'},\r\n      {name: 'paginated', value: true},\r\n      {name: 'page', value: 1},\r\n      {name: 'name', value: name}\r\n    ]).pipe(\r\n      map(response => response.results.map(p => ({\r\n        ...p,\r\n        fullName: `(${p.nomenclature.code}) ${p.nomenclature.name}`\r\n      }))),\r\n      tap(() => this.isLoadingNomenclatures = false),\r\n      startWith([]),\r\n      untilDestroyed(this)\r\n    )),\r\n    untilDestroyed(this)\r\n  )\r\n\r\n  itemsCount = 0;\r\n\r\n  loadHistory$: Subject<void> = new Subject<void>();\r\n\r\n  items$: Observable<any> = this.loadHistory$.pipe(\r\n    filter(() => !!this.selectedProduct),\r\n    tap(() => this.isLoading = true),\r\n    tap(() => this.isStarted = true),\r\n    tap(() => this.itemsCount = 0),\r\n    switchMap(() => this.accountingProductService.history(this.selectedProduct.nomenclature.id).pipe(\r\n        map(history => {\r\n          let historyArr = [];\r\n\r\n          if (history.accepted.accepted_quantity !== null) {\r\n            let qnt = history.accepted.accepted_quantity;\r\n\r\n            history.out.forEach(product => {\r\n              qnt -= product.quantity;\r\n              product.remains = qnt;\r\n              product.invoice = history.accepted.invoice;\r\n              product.nomenclature = history.accepted.nomenclature;\r\n              product.order = history.accepted.order;\r\n              product.current_technology = history.accepted.current_technology;\r\n              product.supplier = history.accepted.supplier;\r\n              product.supplier_unit_price = history.accepted.supplier_unit_price;\r\n              product.supplier_total_price = history.accepted.supplier_total_price;\r\n              product.supplier_unit_cost = history.accepted.supplier_unit_cost;\r\n              product.supplier_total_cost = history.accepted.supplier_total_cost;\r\n              historyArr.push(product);\r\n            });\r\n\r\n            history.accepted.type = 'in';\r\n            historyArr.unshift(history.accepted);\r\n          } else {\r\n            historyArr = [];\r\n          }\r\n\r\n          this.itemsCount = historyArr.length;\r\n\r\n          console.log(historyArr)\r\n          return historyArr\r\n        }),\r\n        tap(() => this.isLoading = false),\r\n        startWith([]),\r\n      )\r\n    ),\r\n    untilDestroyed(this)\r\n  )\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private warehouseProductService: WarehouseProductService,\r\n    private accountingProductService: AccountingProductsService,\r\n    private filterService: FilterService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.filterService.register('empty', (value, filter): boolean => {\r\n      return value\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Item Card</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n\r\n    <div\r\n      class=\"form mb-2\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Nomenclature</label>\r\n\r\n            <p-dropdown\r\n              [options]=\"products$ | async\"\r\n              optionLabel=\"fullName\"\r\n              (onFilter)=\"this.search$.next($event.filter ?? '')\"\r\n              [showClear]=\"true\"\r\n              [emptyMessage]=\"isLoadingNomenclatures ? 'Loading...' : 'No Records Found'\"\r\n              [emptyFilterMessage]=\"isLoadingNomenclatures ? 'Loading...' : 'No Records Found'\"\r\n              [resetFilterOnHide]=\"false\"\r\n              filterMatchMode=\"empty\"\r\n              placeholder=\"Enter a Nomenclature Name\"\r\n              [filter]=\"true\"\r\n              (onChange)=\"this.loadHistory$.next()\"\r\n              [(ngModel)]=\"selectedProduct\"\r\n            >\r\n            </p-dropdown>\r\n\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n        </div>\r\n        <div class=\"col-3\">\r\n        </div>\r\n        <div class=\"col-3\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page__table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [value]=\"items$ | async\"\r\n        [paginator]=\"itemsCount > 0\"\r\n        [rows]=\"10\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n          <div class=\"d-flex\">\r\n            <!--            <p class=\"subtitle\" *ngIf=\"!selectedCurrency\">Choose the Currency to edit</p>-->\r\n            <!--            <p-menubar class=\"ml-auto\" [model]=\"menuItems\" [class.disabled]=\"!selectedCurrency\"></p-menubar>-->\r\n          </div>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 3%\">#</th>\r\n            <th style=\"width: 10%\">Code</th>\r\n            <th style=\"width: 11%\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 4%\">UOM</th>\r\n            <th class=\"text-center\" style=\"width: 4%\">Order</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Invoice</th>\r\n            <th class=\"text-center\" style=\"width: 7%\">Technology</th>\r\n            <th style=\"width: 14%\">Supplier</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Date</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Type</th>\r\n            <th class=\"text-center\" style=\"width: 5%\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Unit Price</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Price</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Unit Cost</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Cost</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 3%\">{{i + 1}}</td>\r\n            <td style=\"width: 10%\">{{product.nomenclature?.code}}</td>\r\n            <td style=\"width: 11%\">{{product.nomenclature?.name}}</td>\r\n            <td class=\"text-center\" style=\"width: 4%\">\r\n              {{product.nomenclature?.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs' }}\r\n              {{product.nomenclature?.root_category ? product.nomenclature.root_category.unit_of_measure.symbol : 'Pcs' }}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 4%\">\r\n              <a target=\"_blank\" *ngIf=\"product.nomenclature?.type=='0'\"\r\n                 [routerLink]=\"['/dash/procurement/orders/products/', product.order]\">{{product.order}}</a>\r\n              <a target=\"_blank\" *ngIf=\"product.nomenclature?.type!='0'\"\r\n                 [routerLink]=\"['/dash/outsource/outsource-chain/products/', product.order]\">{{product.order}}</a>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">\r\n              <a rel=\"noopener noreferrer\" *ngIf=\"product.invoice\" target=\"_blank\"\r\n                 [routerLink]=\"['/dash/accounting/invoices/products/',product.invoice.id]\">{{product.invoice.self_serial_number}}</a>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 7%\">{{product.current_technology}}</td>\r\n            <td style=\"width: 14%\">{{product.supplier}}</td>\r\n            <td class=\"text-center\" style=\"width: 6%\">\r\n              <ng-container *ngIf=\"product.document_creation_date\">\r\n                {{product.document_creation_date | date: 'dd/MM/yyyy'}}\r\n              </ng-container>\r\n              <ng-container *ngIf=\"product.created\">\r\n                {{product.created | date: 'dd/MM/yyyy'}}\r\n              </ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">\r\n              <ng-container *ngIf=\"product.type !== 'in'\">\r\n                <div>out</div>\r\n                <div>wh balance</div>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"product.type === 'in'\">in</ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%\">\r\n              <ng-container *ngIf=\"product.quantity\">\r\n                <div>{{product.quantity}}</div>\r\n                <div>{{product.remains}}</div>\r\n              </ng-container>\r\n              <ng-container *ngIf=\"product.accepted_quantity\">{{product.accepted_quantity}}</ng-container>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">{{product.supplier_unit_price | moneyFormat}} </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">{{product.supplier_total_price | moneyFormat}} </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">{{product.supplier_unit_cost | moneyFormat}} </td>\r\n            <td class=\"text-center\" style=\"width: 6%\">{{product.supplier_total_cost | moneyFormat}} </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <ng-container *ngIf=\"!isLoading\">\r\n                <ng-container *ngIf=\"isStarted\">No Records Found</ng-container>\r\n                <ng-container *ngIf=\"!isStarted\">Select an Nomenclature</ng-container>\r\n              </ng-container>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && itemsCount > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {NavigationLink} from \"../../../layout/navigation-route\";\r\n\r\n@Component({\r\n  selector: 'pek-reports-layout',\r\n  templateUrl: './reports-layout.component.html',\r\n  styleUrls: ['./reports-layout.component.scss']\r\n})\r\nexport class ReportsLayoutComponent implements OnInit {\r\n\r\n  routes: NavigationLink[] = [\r\n    {label: 'Invoices', commands: ['invoices']},\r\n    {label: 'Cost Reports', commands: ['cost-reports']},\r\n    {label: 'Warehouse Balance', commands: ['wh-balance']},\r\n    {label: 'Out', commands: ['out']},\r\n    {label: 'In', commands: ['in']},\r\n    {label: 'Item Card', commands: ['item-card']},\r\n    {\r\n      label: 'Accounting Config',\r\n      commands: ['configs'],\r\n      children: [\r\n        {label: 'Company Accounting Number', commands: ['configs/company-number']},\r\n        {label: 'Nomenclature Accounting Number', commands: ['configs/nomenclature-number']},\r\n        {label: 'Technologies Accounting Number', commands: ['configs/technologies-number']},\r\n        {label: 'Purchase Categories Accounting Number', commands: ['configs/purchase-categories-number']},\r\n        {label: 'Auxiliary Invoices Accounting Number', commands: ['configs/auxiliary-invoices-number']},\r\n        {label: 'Accounting Categories', commands: ['configs/accounting-categories']},\r\n        {label: 'Correlation of Accounting Categories', commands: ['configs/correlation']},\r\n      ]\r\n    },\r\n    {label: 'Payments Checker', commands: ['payments-checker']},\r\n  ];\r\n\r\n  settingRoutes: NavigationLink[] = [\r\n    {label: 'Currencies', commands: ['currencies']},\r\n    {label: 'Additional Expenses', commands: ['additional-expenses']},\r\n    {label: 'Filters', commands: ['filters']},\r\n  ];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n}\r\n","<pek-header\r\n  [module]=\"'Reports'\"\r\n  [routes]=\"routes\"\r\n  [settingsRoutes]=\"settingRoutes\"\r\n></pek-header>\r\n\r\n<router-outlet></router-outlet>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {TreeNode} from \"primeng/api\";\r\nimport {AccountingProductsService} from \"../../services/accounting-products.service\";\r\nimport {CostReportsService} from \"../../services/cost-reports.service\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {ActivatedRoute} from \"@angular/router\";\r\nimport * as cloneDeep from 'lodash/cloneDeep';\r\n\r\n@Component({\r\n  selector: 'pek-reports-new-cost-report',\r\n  templateUrl: './reports-new-cost-report.component.html',\r\n  styleUrls: ['./reports-new-cost-report.component.scss']\r\n})\r\nexport class ReportsNewCostReportComponent implements OnInit {\r\n\r\n  selectedNode;\r\n  productId = this.route.snapshot.paramMap.get('id');\r\n  treeProducts: TreeNode[];\r\n  additionalExpenses = [];\r\n  loading = true;\r\n\r\n  parentIds = new Set<number>();\r\n\r\n  res: any = [];\r\n\r\n  hide = true;\r\n\r\n  counts = 0;\r\n\r\n  rootId: number = null;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private accountingProductsService: AccountingProductsService,\r\n    private adapterService: AdapterService,\r\n    private costReportsService: CostReportsService\r\n  ) {\r\n  }\r\n\r\n  getAll() {\r\n    this.additionalExpenses = [];\r\n    this.selectedNode = null;\r\n\r\n    this.costReportsService.getCostReport(this.productId).subscribe(reports => {\r\n      // res.forEach(el => {\r\n      //   el.from_products.sort((a, b) => new Date(a.invoice_creation_date).getTime() - new Date(b.invoice_creation_date).getTime());\r\n      // });\r\n      // const ss = {'0': 3, '1': 1, '2': 2};\r\n      // res.sort((a, b) => ss[a.list_product.nomenclature.type] - ss[b.list_product.nomenclature.type]);\r\n      //\r\n      //\r\n      // res.forEach(element => {\r\n      //   if (element.accounting_services.length > 0) {\r\n      //     element.accounting_services.forEach(service => {\r\n      //       this.additionalExpenses.push(service);\r\n      //     });\r\n      //   }\r\n      // });\r\n      //\r\n      // res.forEach(item => {\r\n      //   this.parentIds.add(item.list_product.parent);\r\n      // });\r\n      //\r\n      // let parentId = null;\r\n      //\r\n      // this.parentIds.forEach(id => {\r\n      //   const findEl = res.find(el => el.list_product.id === id);\r\n      //\r\n      //   if (!findEl) {\r\n      //     parentId = res.find(el => el.list_product?.parent)?.list_product?.id;\r\n      //     this.rootId = parentId;\r\n      //   }\r\n      // });\r\n      //\r\n      // res.forEach(item => {\r\n      //   item.sumCost = 0;\r\n      //   item.sumTotal = 0;\r\n      //   item.visible = true;\r\n      //   if (item.list_product.parent === null) {\r\n      //     parentId = item.list_product.parent;\r\n      //     this.rootId = parentId;\r\n      //   }\r\n      // });\r\n      //\r\n      // const findProduct = res.find(p => p.id === parseInt(this.productId, 10));\r\n      //\r\n      // if (findProduct) {\r\n      //   parentId = findProduct.list_product.id;\r\n      // }\r\n      //\r\n      // this.res = [...res];\r\n      //\r\n      // this.treeProducts = this.treeAdapter(res, parentId);\r\n      // this.countSum();\r\n      // this.hideElements();\r\n\r\n      // @ts-ignore\r\n      if (reports.accounting_services?.length > 0) {\r\n        // @ts-ignore\r\n        reports.accounting_services.forEach(service => {\r\n          this.additionalExpenses.push(service);\r\n        });\r\n      }\r\n\r\n      this.treeProducts = this.tree(reports);\r\n\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  hideElements() {\r\n\r\n    const hideElement = (node) => {\r\n      if (node.children) {\r\n        node.children.forEach(child => {\r\n          if (child.children) {\r\n            child.children.forEach(c => {\r\n              if (!c.data.sumCost && !c.data.sumCost) {\r\n                c.data.visible = false;\r\n              }\r\n            });\r\n          } else {\r\n            if (!child.data.sumCost && !child.data.sumCost) {\r\n              child.data.visible = false;\r\n            }\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n\r\n    this.treeProducts.forEach(node => hideElement(node));\r\n  }\r\n\r\n  countSum() {\r\n    const countCost = (node) => {\r\n      if (node.children) {\r\n        node.children.forEach(child => {\r\n          if (child.children) {\r\n            child.data.hasChildren = true;\r\n\r\n            child.data?.assembly_info?.forEach(as => {\r\n              child.data.sumCost += parseFloat(as.supplier_total_cost);\r\n            });\r\n\r\n            child.data?.written_off_warehouse_products?.forEach(p => {\r\n              child.data.sumCost += parseFloat(p.total_cost);\r\n            });\r\n\r\n            node.data.sumCost += countCost(child);\r\n          } else {\r\n            child.data?.assembly_info?.forEach(as => {\r\n              child.data.sumCost += parseFloat(as.supplier_total_cost);\r\n              node.data.sumCost += parseFloat(as.supplier_total_cost);\r\n            });\r\n\r\n            child.data?.written_off_warehouse_products?.forEach(p => {\r\n              child.data.sumCost += parseFloat(p.total_cost);\r\n              node.data.sumCost += parseFloat(p.total_cost);\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      return node.data.sumCost;\r\n    };\r\n\r\n    const countTotal = (node) => {\r\n      if (node.children) {\r\n        node.children.forEach(child => {\r\n          if (child.children) {\r\n            child.data.hasChildren = true;\r\n\r\n            child.data?.assembly_info?.forEach(as => {\r\n              child.data.sumTotal += parseFloat(as.supplier_total_price);\r\n            });\r\n\r\n            child.data?.written_off_warehouse_products?.forEach(p => {\r\n              child.data.sumTotal += parseFloat(p.total_price);\r\n            });\r\n\r\n            node.data.sumTotal += countTotal(child);\r\n          } else {\r\n            child.data?.assembly_info?.forEach(as => {\r\n              child.data.sumTotal += parseFloat(as.supplier_total_price);\r\n              node.data.sumTotal += parseFloat(as.supplier_total_price);\r\n            });\r\n\r\n            child.data?.written_off_warehouse_products?.forEach(p => {\r\n              child.data.sumTotal += parseFloat(p.total_price);\r\n              node.data.sumTotal += parseFloat(p.total_price);\r\n            });\r\n          }\r\n        });\r\n      }\r\n\r\n      return node.data.sumTotal;\r\n    };\r\n\r\n    this.treeProducts.forEach(node => {\r\n      node.data?.assembly_info?.forEach(as => {\r\n        node.data.sumCost += parseFloat(as.supplier_total_cost);\r\n        node.data.sumTotal += parseFloat(as.supplier_total_price);\r\n      });\r\n\r\n      node.data?.written_off_warehouse_products?.forEach(p => {\r\n        node.data.sumCost += parseFloat(p.total_cost);\r\n        node.data.sumTotal += parseFloat(p.total_price);\r\n      });\r\n\r\n      node.data.hasChildren = true;\r\n\r\n      node.data.sumCost = countCost(node);\r\n      node.data.sumTotal = countTotal(node);\r\n    });\r\n  }\r\n\r\n  treeAdapter(data, parentId, expanded = true) {\r\n    const dd = [];\r\n    data.forEach(element => {\r\n      if (element.list_product.id === parentId) {\r\n        element.list_product.parent = null;\r\n      }\r\n      const ins = {data: element};\r\n      dd.push(ins);\r\n    });\r\n\r\n    const root = [];\r\n    const idMapping = dd.reduce((acc, el, i) => {\r\n      acc[el.data.list_product.id] = i;\r\n      return acc;\r\n    }, {});\r\n    dd.forEach(el => {\r\n      if (el.data.list_product.parent === null) {\r\n        el.expanded = expanded;\r\n        root.push(el);\r\n        return;\r\n      }\r\n      const parentEl = dd[idMapping[el.data.list_product.parent]];\r\n\r\n      parentEl.children = [...(parentEl.children || []), el];\r\n      if (parentEl.children.length === 0) {\r\n        delete parentEl.children;\r\n      }\r\n    });\r\n    return root;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getAll()\r\n  }\r\n\r\n  tree(report) {\r\n    const root = [];\r\n\r\n    const build = (children, parent) => {\r\n      if (children) {\r\n        children.forEach(c => {\r\n\r\n          let id = null;\r\n\r\n          if (parent.data) {\r\n            id = parent.data.nomenclature.id;\r\n          } else {\r\n            id = parent.nomenclature.id;\r\n          }\r\n\r\n          if (id === c.data.nomenclature.id) {\r\n            parent.children = children[0].children;\r\n\r\n            if (parent.data?.assemblies.length > 0) {\r\n              parent.data.builders = [parent.data, parent.data.assemblies[0]];\r\n            }\r\n          }\r\n\r\n          c.data?.assemblies?.forEach(as => {\r\n            c.children.push({\r\n              data: as,\r\n              children: [],\r\n              expanded: false,\r\n              parent\r\n            });\r\n          });\r\n\r\n          build(c.children, c);\r\n\r\n          const newDataManufactured = [];\r\n\r\n          c?.data?.manufactured?.forEach(p => {\r\n            if (!newDataManufactured.find(d => d.nomenclature.id === p.nomenclature.id)) {\r\n              const items = c.data.manufactured;\r\n              // p.quantity = items.filter(item => item.nomenclature.id === p.nomenclature.id).reduce((sum, elem) => sum += elem.quantity, 0);\r\n              // p.serial_numbers = items.filter(item => item.nomenclature.id === p.nomenclature.id).map(elem => elem.serial_number);\r\n              p.products = items.filter(item => item.nomenclature.id === p.nomenclature.id);\r\n              newDataManufactured.push(p);\r\n            }\r\n          });\r\n\r\n          if (newDataManufactured.length > 0) {\r\n            newDataManufactured.forEach(p => {\r\n              c.children.push({\r\n                data: p,\r\n                expanded: false,\r\n                children: null\r\n              });\r\n            });\r\n          }\r\n\r\n          const newDataPurchased = [];\r\n\r\n          c?.data?.purchased?.forEach(p => {\r\n            if (!newDataPurchased.find(d => d.nomenclature.id === p.nomenclature.id)) {\r\n              const items = c.data.purchased;\r\n              // p.quantity = items.filter(item => item.nomenclature.id === p.nomenclature.id).reduce((sum, elem) => sum += elem.quantity, 0);\r\n              // p.serial_numbers = items.filter(item => item.nomenclature.id === p.nomenclature.id).map(elem => elem.serial_number);\r\n\r\n              p.products = items.filter(item => item.nomenclature.id === p.nomenclature.id);\r\n              newDataPurchased.push(p);\r\n            }\r\n          });\r\n\r\n          if (newDataPurchased.length > 0) {\r\n            newDataPurchased.forEach(p => {\r\n              c.children.push({\r\n                data: p,\r\n                expanded: false,\r\n                children: null\r\n              });\r\n            });\r\n          }\r\n        });\r\n      }\r\n    };\r\n\r\n    const el = {\r\n      data: report,\r\n      expanded: true,\r\n      children: [],\r\n      parent: null,\r\n    };\r\n\r\n    report.assemblies.forEach(as => {\r\n      el.children.push({\r\n        data: as,\r\n        children: [],\r\n        expanded: false,\r\n      });\r\n    });\r\n\r\n    const rootManufacturedMap = new Map();\r\n\r\n    report.manufactured.forEach(m => {\r\n      if (rootManufacturedMap.get(m.nomenclature.id)) {\r\n        rootManufacturedMap.set(m.nomenclature.id, rootManufacturedMap.get(m.nomenclature.id) + 1);\r\n\r\n        const id = m.nomenclature.id;\r\n        const els = report.purchased.filter(el => el.nomenclature.id === id);\r\n\r\n        report.purchased = report.purchased.filter(el => el.nomenclature.id !== id);\r\n\r\n        if (els.length > 0) {\r\n          const product = els[0];\r\n          product.items = els;\r\n          report.purchased.push(product);\r\n        }\r\n\r\n      } else {\r\n        rootManufacturedMap.set(m.nomenclature.id, 1);\r\n      }\r\n    });\r\n\r\n    report.manufactured.forEach(m => {\r\n      el.children.push({\r\n        data: m,\r\n        expanded: false,\r\n        children: null\r\n      });\r\n    });\r\n\r\n    const rootPurchasedMap = new Map();\r\n\r\n    report.purchased.forEach(p => {\r\n      if (rootPurchasedMap.get(p.nomenclature.id)) {\r\n        rootPurchasedMap.set(p.nomenclature.id, rootPurchasedMap.get(p.nomenclature.id) + 1);\r\n\r\n        const id = p.nomenclature.id;\r\n        const els = report.purchased.filter(el => el.nomenclature.id === id);\r\n\r\n        report.purchased = report.purchased.filter(el => el.nomenclature.id !== id);\r\n\r\n        if (els.length > 0) {\r\n          const product = els[0];\r\n          product.items = els;\r\n          report.purchased.push(product);\r\n        }\r\n\r\n      } else {\r\n        rootPurchasedMap.set(p.nomenclature.id, 1);\r\n      }\r\n    });\r\n\r\n    report.purchased.forEach(p => {\r\n      el.children.push({\r\n        data: p,\r\n        expanded: false,\r\n        children: null,\r\n        parent: report,\r\n      });\r\n    });\r\n\r\n    build(el.children, report);\r\n\r\n    root.push(el);\r\n\r\n\r\n    console.log(root);\r\n    return root;\r\n  }\r\n\r\n  hideToggle(node) {\r\n    if (node?.children) {\r\n      return node.children.some(c => c.data.visible);\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  services() {\r\n    this.costReportsService.additionalExpensesModal('new', this.treeProducts[0].data.id, this.additionalExpenses).subscribe()\r\n  }\r\n\r\n  isHidden(product) {\r\n    if (product.nomenclature.type === '1') {\r\n      return false;\r\n    }\r\n    if (product.items) {\r\n      return product.items.every(p => !parseFloat(p.total_cost) && !parseFloat(p.unit_cost) && !parseFloat(p.total_price) && !parseFloat(p.unit_price));\r\n    } else {\r\n      return (!parseFloat(product.total_cost) && !parseFloat(product.unit_cost) && !parseFloat(product.total_price) && !parseFloat(product.unit_price));\r\n    }\r\n  }\r\n\r\n  showInvoice(invoice) {\r\n    return typeof invoice === 'number';\r\n  }\r\n\r\n  // showProtocol(product: Product, warehouseQcProtocol: any) {\r\n  //   this.modalService.taskProtocolInfo(\r\n  //     warehouseQcProtocol.protocol,\r\n  //     warehouseQcProtocol.paragraphs,\r\n  //     !product.serial_number ? null : product.serial_number.type_with_number ? product.serial_number.type_with_number : product.serial_number.id + ''\r\n  //   ).subscribe();\r\n  // }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  expandCollapse(isToExpand = true): void {\r\n    const temp = cloneDeep(this.treeProducts);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.treeProducts = temp;\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Cost Report</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <h2 class=\"mb-4\">Additional Expenses</h2>\r\n\r\n  <div class=\"page__card mb-4\">\r\n    <div class=\"row pt-3\">\r\n      <div *ngIf=\"loading\" class=\"d-flex justify-content-center\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n\r\n      <div class=\"col-6\" *ngFor=\"let item of additionalExpenses\">\r\n        <span>{{item.accountingservice}} : {{item.value | moneyFormat}}  </span>\r\n      </div>\r\n\r\n      <div class=\"additional-none pl-3\" *ngIf=\"additionalExpenses.length === 0 && !loading\">\r\n        <span>Additional Expenses None</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"cost-page-header mb-4\">\r\n    <h2>Cost Report</h2>\r\n\r\n    <div class=\"d-flex\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-down\"\r\n        label=\"Expand All\"\r\n        class=\"mr-2\"\r\n        (click)=\"expandCollapse()\"\r\n        [disabled]=\"loading\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"mr-2\"\r\n        icon=\"pi pi-angle-up\"\r\n        label=\"Collapse All\"\r\n        (click)=\"expandCollapse(false)\"\r\n        [disabled]=\"loading\"\r\n      ></button>\r\n<!--      <button-->\r\n<!--        pButton-->\r\n<!--        type=\"button\"-->\r\n<!--        [icon]=\"hide ? 'pi pi-eye' : 'pi pi-eye-slash'\"-->\r\n<!--        [label]=\"hide ? 'Show All' : 'Hide Zeros'\"-->\r\n<!--        (click)=\"onToggleHide()\"-->\r\n<!--        [disabled]=\"loading\"-->\r\n<!--      ></button>-->\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__card cost-report-table\">\r\n    <p-treeTable #tt [value]=\"treeProducts\" selectionMode=\"single\" [(selection)]=\"selectedNode\"\r\n                 [resizableColumns]=\"true\">\r\n      <ng-template pTemplate=\"caption\">\r\n\r\n        <div class=\"d-flex\">\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-plus\"\r\n            label=\"Additional Expenses\"\r\n            class=\"ml-auto\"\r\n            (click)=\"services()\"\r\n            [disabled]=\"!selectedNode || selectedNode?.parent\"\r\n          ></button>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"header\" let-columns>\r\n        <tr>\r\n          <th style=\"width: 16%\" class=\"th-code\">Code</th>\r\n          <th style=\"width: 11%\">Name</th>\r\n          <th style=\"width: 3%\" class=\"text-center\">UOM</th>\r\n          <th style=\"width: 10%\" class=\"text-center\">Serial Numbers</th>\r\n          <th style=\"width: 6%\" class=\"text-center\">Protocol</th>\r\n          <th style=\"width: 6%\" class=\"text-center\">Quantity</th>\r\n          <th style=\"width: 3%\" class=\"text-center\">Order</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Invoice</th>\r\n          <th style=\"width: 9%\">Supplier</th>\r\n          <th style=\"width: 7%\" class=\"text-center\">Technology</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Date</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Unit Price</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Total Price</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Unit Cost</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Total Cost</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Price SUM</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Cost SUM</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-i=\"rowIndex\" let-rowNode let-rowData=\"rowData\" let-columns=\"columns\">\r\n        <tr [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\" [class.hide]=\"isHidden(rowData) && hide\"\r\n            [class.close]=\"rowData.close\">\r\n          <td [ngStyle]=\"{'padding-left': rowNode.level*10+'px'}\">\r\n            <div class=\"toggle-row\">\r\n              <p-treeTableToggler [rowNode]=\"rowNode\"\r\n                                  [class.hide-toggle]=\"hide && !hideToggle(rowNode.node)\"></p-treeTableToggler>\r\n              <span class=\"drag-cursor\">\r\n            {{rowData.nomenclature.code}}\r\n          </span>\r\n            </div>\r\n          </td>\r\n          <td>\r\n            {{rowData.nomenclature.name}} <b *ngIf=\"rowData.nomenclature.bulk_or_serial === '1'\">(S)</b>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            {{rowData.nomenclature?.category ? rowData.nomenclature?.category?.unit_of_measure?.symbol : 'Pcs'}}\r\n          </td>\r\n          <td class=\"text-center word-break serials\">\r\n            <!--          <div *ngIf=\"rowData.serial_numbers\">-->\r\n            <!--            <div *ngFor=\"let serial of rowData.serial_numbers\">-->\r\n            <!--              {{serial.type_with_number ? serial.type_with_number : serial.id}}-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"rowData.serial_number\">-->\r\n            <!--          <ul>-->\r\n            <!--            <li *ngIf=\"rowData.serial_numbers.length > 1\">-->\r\n            <!--              <div>-->\r\n            <!--                {{1}}. {{rowData.serial_numbers[0].type_with_number ?rowData.serial_numbers[0].type_with_number : rowData.serial_numbers[0].id}}-->\r\n            <!--              </div>-->\r\n            <!--              <div>...</div>-->\r\n            <!--            </li>-->\r\n            <!--            <li *ngIf=\"rowData.serial_numbers.length === 1\">-->\r\n            <!--              {{1}}.{{rowData.serial_numbers[0].type_with_number ? rowData.serial_numbers[0].type_with_number : rowData.serial_numbers[0].id}}-->\r\n            <!--            </li>-->\r\n            <!--          </ul>-->\r\n\r\n            <!--          <ul class=\"hidden-ul\" *ngIf=\"rowData.serial_numbers.length > 1\">-->\r\n            <!--            <li *ngFor=\"let serial of rowData.serial_numbers; let idx = index\">-->\r\n            <!--              {{idx + 1}}. {{serial.type_with_number ? serial.type_with_number : serial.id}}-->\r\n            <!--            </li>-->\r\n            <!--          </ul>-->\r\n\r\n            <!--          </div>-->\r\n\r\n            <div *ngFor=\"let product of rowData.products\">\r\n              <div>\r\n              <span *ngIf=\"product.serial_number\">\r\n                  {{product.serial_number.type_with_number ? product.serial_number.type_with_number : product.serial_number.id}}\r\n              </span>\r\n              </div>\r\n            </div>\r\n          </td>\r\n          <td class=\"text-center word-break\">\r\n            <!--          <a (click)=\"showProtocol(rowData, rowData.warehouse_product_qc_protocol)\"-->\r\n            <!--             *ngIf=\"rowData.warehouse_product_qc_protocol\">{{rowData.warehouse_product_qc_protocol.protocol.name}}</a>-->\r\n\r\n            <!--          <div *ngFor=\"let product of rowData.products\">-->\r\n            <!--            <div *ngIf=\"product.warehouse_product_qc_protocol\">-->\r\n            <!--              <a (click)=\"showProtocol(product, product.warehouse_product_qc_protocol)\">-->\r\n            <!--                {{product.warehouse_product_qc_protocol.protocol.name}}-->\r\n            <!--              </a>-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n              <span *ngIf=\"product.warehouse_product_qc_protocol\">\r\n<!--                <a class=\"link-hov\" (click)=\"showProtocol(product, product.warehouse_product_qc_protocol)\">-->\r\n                  {{product.warehouse_product_qc_protocol.protocol.name}}\r\n<!--                </a>-->\r\n              </span>\r\n              </div>\r\n            </div>\r\n            <div *ngIf=\"!rowData.products\">\r\n            <span *ngIf=\"rowData.warehouse_product_qc_protocol\">\r\n<!--              <a class=\"link-hov\" (click)=\"showProtocol(rowData, rowData.warehouse_product_qc_protocol)\">-->\r\n                  {{rowData.warehouse_product_qc_protocol.protocol.name}}\r\n<!--                </a>-->\r\n            </span>\r\n            </div>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                {{product.quantity}}\r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"!rowData.products\">\r\n              {{rowData.quantity}}\r\n            </div>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <!--          <ng-container *ngIf=\"!rowData?.builders\">-->\r\n            <!--            <div *ngIf=\"rowData?.items\">-->\r\n            <!--              <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--                <ng-container [ngSwitch]=\"item?.order?.accounting_type\">-->\r\n            <!--                  <a *ngSwitchCase=\"3\" [routerLink]=\"'/dash/production/orders/order/' + item?.order?.id\"-->\r\n            <!--                     target=\"_blank\">{{item?.order?.id}}</a>-->\r\n            <!--                  <a *ngSwitchCase=\"2\" [routerLink]=\"'/dash/outsource/outsource-chain/products/' + item?.order?.id\"-->\r\n            <!--                     target=\"_blank\">{{item?.order?.id}}</a>-->\r\n            <!--                  <a *ngSwitchCase=\"1\" [routerLink]=\"'/dash/procurement/orders/products/' + item?.order?.id\"-->\r\n            <!--                     target=\"_blank\">{{item?.order?.id}}</a>-->\r\n            <!--                </ng-container>-->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--            <div *ngIf=\"!rowData?.items\">-->\r\n            <!--              <ng-container [ngSwitch]=\"rowData?.order?.accounting_type\">-->\r\n            <!--                <a *ngSwitchCase=\"3\" [routerLink]=\"'/dash/production/orders/order/' + rowData?.order?.id\"-->\r\n            <!--                   target=\"_blank\">{{rowData?.order?.id}}</a>-->\r\n            <!--                <a *ngSwitchCase=\"2\" [routerLink]=\"'/dash/outsource/outsource-chain/products/' + rowData?.order?.id\"-->\r\n            <!--                   target=\"_blank\">{{rowData?.order?.id}}</a>-->\r\n            <!--                <a *ngSwitchCase=\"1\" [routerLink]=\"'/dash/procurement/orders/products/' + rowData?.order?.id\"-->\r\n            <!--                   target=\"_blank\">{{rowData?.order?.id}}</a>-->\r\n            <!--              </ng-container>-->\r\n            <!--            </div>-->\r\n            <!--          </ng-container>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                <ng-container [ngSwitch]=\"product?.order?.accounting_type\">\r\n                  <a *ngSwitchCase=\"3\" [routerLink]=\"'/manufacturing/orders/order/' + product?.order?.id\"\r\n                     target=\"_blank\">{{product?.order?.id}}</a>\r\n                  <a *ngSwitchCase=\"2\" [routerLink]=\"'/outsourcing/chains/order/' + product?.order?.id\"\r\n                     target=\"_blank\">{{product?.order?.id}}</a>\r\n                  <a *ngSwitchCase=\"1\" [routerLink]=\"'/procurement/chains/order/' + product?.order?.id\"\r\n                     target=\"_blank\">{{product?.order?.id}}</a>\r\n                </ng-container>\r\n              </div>\r\n            </div>\r\n            <div *ngIf=\"!rowData.products\">\r\n              <ng-container [ngSwitch]=\"rowData?.order?.accounting_type\">\r\n                <a *ngSwitchCase=\"3\" [routerLink]=\"'/manufacturing/orders/order/' + rowData?.order?.id\"\r\n                   target=\"_blank\">{{rowData?.order?.id}}</a>\r\n                <a *ngSwitchCase=\"2\" [routerLink]=\"'/outsourcing/chains/order/' + rowData?.order?.id\"\r\n                   target=\"_blank\">{{rowData?.order?.id}}</a>\r\n                <a *ngSwitchCase=\"1\" [routerLink]=\"'/procurement/chains/order/' + rowData?.order?.id\"\r\n                   target=\"_blank\">{{rowData?.order?.id}}</a>\r\n              </ng-container>\r\n            </div>\r\n\r\n            <!--          <div *ngIf=\"rowData?.builders\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.builders\">-->\r\n            <!--              <ng-container [ngSwitch]=\"item?.order?.accounting_type\">-->\r\n            <!--                <a *ngSwitchCase=\"3\" [routerLink]=\"'/dash/production/orders/order/' + item?.order?.id\"-->\r\n            <!--                   target=\"_blank\">{{item?.order?.id}}</a>-->\r\n            <!--                <a *ngSwitchCase=\"2\" [routerLink]=\"'/dash/outsource/outsource-chain/products/' + item?.order?.id\"-->\r\n            <!--                   target=\"_blank\">{{item?.order?.id}}</a>-->\r\n            <!--                <a *ngSwitchCase=\"1\" [routerLink]=\"'/dash/procurement/orders/products/' + item?.order?.id\"-->\r\n            <!--                   target=\"_blank\">{{item?.order?.id}}</a>-->\r\n            <!--              </ng-container>-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <!--          <ng-container *ngIf=\"!rowData?.builders\">-->\r\n            <!--            <div *ngIf=\"rowData?.items\">-->\r\n            <!--              <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--                <a [routerLink]=\"['/dash/accounting/invoices/products/', item?.invoice?.id]\" target=\"_blank\">-->\r\n            <!--                  {{item?.invoice?.self_serial_number}}-->\r\n            <!--                </a>-->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--            <div *ngIf=\"!rowData?.items\">-->\r\n            <!--              <a [routerLink]=\"['/dash/accounting/invoices/products/', rowData?.invoice?.id]\" target=\"_blank\">-->\r\n            <!--                {{rowData?.invoice?.self_serial_number}}-->\r\n            <!--              </a>-->\r\n            <!--            </div>-->\r\n            <!--          </ng-container>-->\r\n\r\n            <!--          <div *ngIf=\"showInvoice(rowData.invoice)\">-->\r\n            <!--            <a [routerLink]=\"['/dash/accounting/invoices/products/', rowData?.invoice]\" target=\"_blank\">-->\r\n            <!--              {{rowData?.invoice}}-->\r\n            <!--            </a>-->\r\n            <!--          </div>-->\r\n\r\n            <!--          <div *ngIf=\"rowData?.builders\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.builders\">-->\r\n            <!--              {{item?.invoice?.self_serial_number}}-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                <a [routerLink]=\"'/reports/invoices/invoice/' + product.invoice?.id\">{{product.invoice?.self_serial_number}}</a>\r\n              </div>\r\n            </div>\r\n            <div *ngIf=\"!rowData.products\">\r\n              <a [routerLink]=\"'/reports/invoices/invoice/' + rowData.invoice?.id\">{{rowData.invoice?.self_serial_number}}</a>\r\n            </div>\r\n          </td>\r\n          <td>\r\n            <!--          <ng-container *ngIf=\"!rowData?.builders\">-->\r\n            <!--            <div *ngIf=\"rowData?.items\">-->\r\n            <!--              <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--                {{item?.supplier}}-->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--            <div *ngIf=\"!rowData?.items\">-->\r\n            <!--              {{rowData?.supplier}}-->\r\n            <!--            </div>-->\r\n            <!--          </ng-container>-->\r\n\r\n            <!--          <div *ngIf=\"rowData?.builders\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.builders\">-->\r\n            <!--              {{item?.supplier}}-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                {{product.supplier ? product.supplier : 'None'}}\r\n              </div>\r\n            </div>\r\n            <div *ngIf=\"!rowData.products\">\r\n              {{rowData.supplier ? rowData.supplier : 'None'}}\r\n            </div>\r\n          </td>\r\n\r\n          <td class=\"text-center\">\r\n            <!--          <ng-container *ngIf=\"!rowData?.builders\">-->\r\n            <!--            <div *ngIf=\"rowData?.items\">-->\r\n            <!--              <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--                {{item?.technology}}-->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--            <div *ngIf=\"!rowData?.items\">-->\r\n            <!--              {{rowData?.technology}}-->\r\n            <!--            </div>-->\r\n            <!--          </ng-container>-->\r\n\r\n            <!--          <div *ngIf=\"rowData?.builders\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.builders\">-->\r\n            <!--              {{item?.technology}}-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                {{product.technology ? product.technology : 'None'}}\r\n              </div>\r\n            </div>\r\n            <div *ngIf=\"!rowData.products\">\r\n              {{rowData.technology ? rowData.technology : 'None'}}\r\n            </div>\r\n          </td>\r\n\r\n          <td class=\"text-center\">\r\n            <!--          <ng-container *ngIf=\"!rowData?.builders\">-->\r\n            <!--            <div *ngIf=\"rowData?.items\">-->\r\n            <!--              <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--                {{item?.document_creation_date | date:'dd/MM/yyyy'}}-->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--            <div *ngIf=\"!rowData?.items\">-->\r\n            <!--              {{rowData?.document_creation_date | date:'dd/MM/yyyy'}}-->\r\n            <!--            </div>-->\r\n            <!--          </ng-container>-->\r\n            <!--          <div *ngIf=\"rowData?.builders\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.builders\">-->\r\n            <!--              {{item?.document_creation_date | date:'dd/MM/yyyy'}}-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                {{product?.document_creation_date | date:'dd/MM/yyyy'}}\r\n              </div>\r\n            </div>\r\n            <div *ngIf=\"!rowData.products\">\r\n              {{rowData?.document_creation_date | date:'dd/MM/yyyy'}}\r\n            </div>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <!--          <div *ngIf=\"rowData.assembly_info\">-->\r\n            <!--            <ul class=\"info-list\">-->\r\n            <!--              <li *ngFor=\"let product of rowData.assembly_info\">-->\r\n            <!--                {{product.supplier_unit_price | moneyFormat}} -->\r\n            <!--              </li>-->\r\n            <!--            </ul>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"rowData.written_off_warehouse_products\">-->\r\n            <!--            <ul class=\"info-list\">-->\r\n            <!--              <li *ngFor=\"let product of rowData.written_off_warehouse_products\">-->\r\n            <!--                {{product.unit_price | moneyFormat}} -->\r\n            <!--              </li>-->\r\n            <!--            </ul>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"rowData?.items\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--              <div *ngIf=\"rowData?.unit_price\">-->\r\n            <!--                {{item.unit_price | moneyFormat}} -->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"!rowData?.items\">-->\r\n            <!--            <div *ngIf=\"rowData?.unit_price\">-->\r\n            <!--              {{rowData.unit_price | moneyFormat}} -->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n            <!--          <div *ngIf=\"rowData.products\">-->\r\n            <!--            {{rowData.unit_price}}-->\r\n            <!--          </div>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                {{product?.unit_price | moneyFormat}} \r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"!rowData.products && rowData?.unit_price\">\r\n              {{rowData.unit_price | moneyFormat}} \r\n            </div>\r\n\r\n            <div *ngIf=\"rowData.nomenclature.type === '1' && rowData?.final_supplier_unit_price\">\r\n              {{rowData?.final_supplier_unit_price | moneyFormat}} \r\n            </div>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <!--          <div *ngIf=\"rowData.assembly_info\">-->\r\n            <!--            <ul class=\"info-list\">-->\r\n            <!--              <li *ngFor=\"let product of rowData.assembly_info\">-->\r\n            <!--                {{product.supplier_total_price | moneyFormat}} -->\r\n            <!--              </li>-->\r\n            <!--            </ul>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"rowData.written_off_warehouse_products\">-->\r\n            <!--            <ul class=\"info-list\">-->\r\n            <!--              <li *ngFor=\"let product of rowData.written_off_warehouse_products\">-->\r\n            <!--                {{product.total_price | moneyFormat}} -->\r\n            <!--              </li>-->\r\n            <!--            </ul>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"rowData?.items\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--              <div *ngIf=\"rowData?.total_price\">-->\r\n            <!--                {{item.total_price | moneyFormat}} -->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"!rowData?.items\">-->\r\n            <!--            <div *ngIf=\"rowData?.total_price\">-->\r\n            <!--              {{rowData.total_price | moneyFormat}} -->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n            <!--          <div *ngIf=\"rowData.nomenclature.type === '1' && rowData?.final_supplier_total_price\">-->\r\n            <!--            {{rowData?.final_supplier_total_price | moneyFormat}} -->\r\n            <!--          </div>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                {{product?.total_price | moneyFormat}} \r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"!rowData.products && rowData?.total_price\">\r\n              {{rowData.total_price | moneyFormat}} \r\n            </div>\r\n\r\n            <div *ngIf=\"rowData.nomenclature.type === '1' && rowData?.final_supplier_total_price\">\r\n              {{rowData?.final_supplier_total_price | moneyFormat}} \r\n            </div>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <!--          <div *ngIf=\"rowData.assembly_info\">-->\r\n            <!--            <ul class=\"info-list\">-->\r\n            <!--              <li *ngFor=\"let product of rowData.assembly_info\">-->\r\n            <!--                {{product.supplier_unit_cost | moneyFormat}} -->\r\n            <!--              </li>-->\r\n            <!--            </ul>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"rowData.written_off_warehouse_products\">-->\r\n            <!--            <ul class=\"info-list\">-->\r\n            <!--              <li *ngFor=\"let product of rowData.written_off_warehouse_products\">-->\r\n            <!--                {{product.unit_cost | moneyFormat}} -->\r\n            <!--              </li>-->\r\n            <!--            </ul>-->\r\n            <!--          </div>-->\r\n\r\n            <!--          <div *ngIf=\"rowData?.items\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--              <div *ngIf=\"rowData?.unit_cost\">-->\r\n            <!--                {{item.unit_cost | moneyFormat}} -->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"!rowData?.items\">-->\r\n            <!--            <div *ngIf=\"rowData?.unit_cost\">-->\r\n            <!--              {{rowData.unit_cost | moneyFormat}} -->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                {{product?.unit_cost | moneyFormat}} \r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"!rowData.products && rowData?.unit_cost\">\r\n              {{rowData.unit_cost | moneyFormat}} \r\n            </div>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <!--          <div *ngIf=\"rowData.assembly_info\">-->\r\n            <!--            <ul class=\"info-list\">-->\r\n            <!--              <li *ngFor=\"let product of rowData.assembly_info\">-->\r\n            <!--                {{product.supplier_total_cost | moneyFormat}} -->\r\n            <!--              </li>-->\r\n            <!--            </ul>-->\r\n            <!--          </div>-->\r\n\r\n            <!--          <div *ngIf=\"rowData.written_off_warehouse_products\">-->\r\n            <!--            <ul class=\"info-list\">-->\r\n            <!--              <li *ngFor=\"let product of rowData.written_off_warehouse_products\">-->\r\n            <!--                {{product.total_cost | moneyFormat}} -->\r\n            <!--              </li>-->\r\n            <!--            </ul>-->\r\n            <!--          </div>-->\r\n            <!--                  <div *ngIf=\"rowData.written_off_warehouse_products.length > 0\">-->\r\n            <!--                    <ul class=\"info-list\">-->\r\n            <!--                      <li *ngFor=\"let product of rowData.written_off_warehouse_products\">-->\r\n            <!--                        {{product.total_cost | moneyFormat}} -->\r\n            <!--                      </li>-->\r\n            <!--                    </ul>-->\r\n            <!--                  </div>-->\r\n            <!--          <div *ngIf=\"rowData?.items\">-->\r\n            <!--            <div *ngFor=\"let item of rowData.items\">-->\r\n            <!--              <div *ngIf=\"rowData?.total_cost\">-->\r\n            <!--                {{item.total_cost | moneyFormat}} -->\r\n            <!--              </div>-->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n            <!--          <div *ngIf=\"!rowData?.items\">-->\r\n            <!--            <div *ngIf=\"rowData?.total_cost\">-->\r\n            <!--              {{rowData.total_cost | moneyFormat}} -->\r\n            <!--            </div>-->\r\n            <!--          </div>-->\r\n\r\n            <div *ngIf=\"rowData.products\">\r\n              <div *ngFor=\"let product of rowData.products\">\r\n                {{product?.total_cost | moneyFormat}} \r\n              </div>\r\n            </div>\r\n\r\n            <div *ngIf=\"!rowData.products && rowData?.total_cost\">\r\n              {{rowData.total_cost | moneyFormat}} \r\n            </div>\r\n          </td>\r\n\r\n          <td class=\"text-center\">\r\n            <!--                  <span *ngIf=\"rowData.hasChildren\">-->\r\n            <!--                    {{rowData.sumTotal | moneyFormat}} -->\r\n            <!--                  </span>-->\r\n\r\n            <!--          <ng-container *ngIf=\"rowData.order_product_total_price\">-->\r\n            <!--            {{rowData.order_product_total_price | moneyFormat}} -->\r\n            <!--          </ng-container>-->\r\n\r\n            <!--          <ng-container *ngIf=\"rowData.order_product_price\">-->\r\n            <!--            {{rowData.order_product_price | moneyFormat}} -->\r\n            <!--          </ng-container>-->\r\n            <ng-container *ngIf=\"rowData.total_price_calculated >= 0\">\r\n              {{rowData.total_price_calculated | moneyFormat}} \r\n            </ng-container>\r\n\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <ng-container *ngIf=\"rowData.order_product_total_price\">\r\n            <span *ngIf=\"rowData.order_product_total_price \">\r\n               {{rowData.order_product_total_price | moneyFormat}} \r\n            </span>\r\n            </ng-container>\r\n            <ng-container *ngIf=\"rowData?.total_cost_calculated >= 0 && !rowData.order_product_total_price\">\r\n              <!--            <span-->\r\n              <!--              *ngIf=\"rowData.order_product_price\">{{rowData.total_cost_calculated + rowData?.final_supplier_total_price  | moneyFormat}}-->\r\n              <!--              </span>-->\r\n\r\n              <span\r\n                *ngIf=\"rowData.total_cost_calculated\">{{rowData.total_cost_calculated  | moneyFormat}}\r\n                </span>\r\n            </ng-container>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n            <i *ngIf=\"loading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!loading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-treeTable>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder, FormGroup} from '@angular/forms';\r\nimport {NomenclatureService} from '@shared/services/nomenclature.service';\r\nimport {Nomenclature} from '@shared/models/nomenclature';\r\nimport {QuerySearch} from '@shared/models/other';\r\nimport {AdapterService} from '@shared/services/adapter.service';\r\nimport {BehaviorSubject, Observable, Subject, switchMap, tap} from 'rxjs';\r\nimport {UntilDestroy, untilDestroyed} from '@ngneat/until-destroy';\r\nimport {debounceTime, distinctUntilChanged, filter, map} from 'rxjs/operators';\r\nimport {Paginator} from 'primeng/paginator';\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-nomenclature-accounting-number',\r\n  templateUrl: './reports-nomenclature-accounting-number.component.html',\r\n  styleUrls: ['./reports-nomenclature-accounting-number.component.scss']\r\n})\r\nexport class ReportsNomenclatureAccountingNumberComponent implements OnInit {\r\n\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [''],\r\n    code: [''],\r\n    categories: [''],\r\n    order_by_accounting_number: [null],\r\n    order_by_is_fixed_asset: [null],\r\n    order_by_is_non_ressivable: [null],\r\n    type: [0],\r\n    accounting_number: [null],\r\n    tariff_code: [''],\r\n    tariff_code_checked: [''],\r\n    weight: [''],\r\n  });\r\n\r\n  currentPage = 1;\r\n  isStartFirstPage = false;\r\n  isLoading = true;\r\n\r\n  nomenclaturesCount = 0;\r\n\r\n  selectedNomenclature: Nomenclature = null;\r\n\r\n  queryKey: string = this.adapterService.generateQueryKey(this.searchForm);\r\n  query: QuerySearch[] = [];\r\n\r\n\r\n  name$: Subject<void> = new Subject<void>();\r\n  code$: Subject<void> = new Subject<void>();\r\n  accountingNumber$: Subject<void> = new Subject<void>();\r\n  tariffCode$: Subject<void> = new Subject<void>();\r\n\r\n  search$: BehaviorSubject<void> = new BehaviorSubject<void>(null);\r\n  nomenclatures$: Observable<Nomenclature[]> = this.search$.pipe(\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() =>\r\n      this.nomenclatureService.getForPagination(this.query).pipe(\r\n        tap(nomenclatures => this.nomenclaturesCount = nomenclatures.count),\r\n        map(response => response.results)\r\n      )),\r\n    tap(() => this.paginateToFistPage()),\r\n    tap(() => this.isLoading = false),\r\n    untilDestroyed(this)\r\n  );\r\n\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private nomenclatureService: NomenclatureService,\r\n    private adapterService: AdapterService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.accountingNumber$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.tariffCode$.pipe(\r\n      debounceTime(150),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n  }\r\n\r\n  onSelectCategories(ids: string) {\r\n    this.searchForm.get('categories').patchValue(ids);\r\n    this.search$.next();\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.isLoading = true;\r\n    this.selectedNomenclature = null;\r\n    const newQueryKey = this.adapterService.generateQueryKey(this.searchForm);\r\n\r\n    if (newQueryKey !== this.queryKey) {\r\n      this.currentPage = 1;\r\n      this.queryKey = newQueryKey;\r\n      this.isStartFirstPage = true;\r\n    }\r\n\r\n    this.query = [\r\n      {name: 'page', value: this.currentPage},\r\n      {name: 'is_purchased_only', value: true},\r\n      {name: 'paginated', value: true},\r\n    ];\r\n\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null) {\r\n        this.query.push({\r\n          name: key,\r\n          value: this.searchForm.controls[key].value\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private paginateToFistPage() {\r\n    if (this.isStartFirstPage) {\r\n      this.paginator?.changePage(0);\r\n    }\r\n    this.isStartFirstPage = false;\r\n  }\r\n\r\n  paginate(event: any) {\r\n    if (!this.isStartFirstPage) {\r\n      this.currentPage = event.page + 1;\r\n      this.search$.next();\r\n    }\r\n  }\r\n\r\n  onAddAccountingNumber() {\r\n    this.nomenclatureService.addAccountingNumberDialog().pipe(\r\n      filter(nomenclature => !!nomenclature)\r\n    ).subscribe(() => this.search$.next());\r\n  }\r\n\r\n  editNomenclatureAccountingNumber() {\r\n    this.nomenclatureService.editNomenclatureAccountingNumber(this.selectedNomenclature)\r\n      .pipe(\r\n        filter(nomenclature => !!nomenclature)\r\n      )\r\n      .subscribe(() => this.search$.next());\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Nomenclature Accounting Number</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-plus\"\r\n        label=\"Add Accounting Number to Category\"\r\n        (click)=\"onAddAccountingNumber()\"\r\n      >\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form class=\"form mb-3\" [formGroup]=\"searchForm\">\r\n      <div class=\"row\">\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Code</label>\r\n            <input\r\n              id=\"name\"\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"code\"\r\n              (ngModelChange)=\"code$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Name</label>\r\n            <input\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"name\"\r\n              (ngModelChange)=\"name$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Categories</label>\r\n            <pek-multi-categories-picker (choiceCategories)=\"onSelectCategories($event)\"></pek-multi-categories-picker>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Accounting Number</label>\r\n            <input\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"accounting_number\"\r\n              (ngModelChange)=\"accountingNumber$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label for=\"name\">Tariff Code</label>\r\n            <input\r\n              class=\"form-control\"\r\n              type=\"text\"\r\n              pInputText\r\n              formControlName=\"tariff_code\"\r\n              (ngModelChange)=\"tariffCode$.next()\"\r\n            >\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4 edit-button\">\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-pencil\"\r\n            label=\"Edit Accounting Number\"\r\n            [disabled]=\"!selectedNomenclature\"\r\n            (click)=\"editNomenclatureAccountingNumber()\"\r\n          >\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"table-pagination-preloader\">\r\n      <p-table\r\n        scrollHeight=\"calc(100vh - 30rem)\"\r\n        [rows]=\"10\"\r\n        [scrollable]=\"true\"\r\n        selectionMode=\"single\"\r\n        [value]=\"nomenclatures$| async\"\r\n        [(selection)]=\"selectedNomenclature\"\r\n      >\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n            <th style=\"width: 10%\">Code</th>\r\n            <th style=\"width: 25%\">Name</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Category</th>\r\n            <th style=\"width: 10%\" class=\"text-center sort-label\">Accounting Number</th>\r\n            <th style=\"width: 10%\" class=\"text-center sort-label\">Is Fixed Asset</th>\r\n            <th style=\"width: 10%\" class=\"text-center sort-label\">Is Non Ressivable</th>\r\n            <th style=\"width: 10%\" class=\"text-center sort-label\">Country of origin</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Tariff Code / checked</th>\r\n            <th style=\"width: 10%\" class=\"text-center\">Weight</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-nomenclature let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"nomenclature\">\r\n            <td style=\"width: 5%\" class=\"text-center\">{{(currentPage - 1) * 10 + i + 1}}</td>\r\n            <td style=\"width: 10%\">{{nomenclature.code}}</td>\r\n            <td style=\"width: 25%\">{{nomenclature.name}}</td>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{nomenclature.category?.name}}</td>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{nomenclature.accounting_number}}</td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              <i\r\n                class=\"pi pi-check check-icon\"\r\n                *ngIf=\"nomenclature.is_fixed_asset\"\r\n              ></i>\r\n              <i\r\n                class=\"pi pi-times times-icon\"\r\n                *ngIf=\"!nomenclature.is_fixed_asset\"\r\n              ></i>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              <i\r\n                class=\"pi pi-check check-icon\"\r\n                *ngIf=\"nomenclature.is_non_ressivable\"\r\n              ></i>\r\n              <i\r\n                class=\"pi pi-times times-icon\"\r\n                *ngIf=\"!nomenclature.is_non_ressivable\"\r\n              ></i>\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{nomenclature.country_of_origin_default?.alpha2_code}}</td>\r\n            <td style=\"width: 10%\" class=\"text-center\">\r\n              {{nomenclature.tariff_code}}<br>\r\n              {{nomenclature.tariff_code_checked}}\r\n            </td>\r\n            <td style=\"width: 10%\" class=\"text-center\">{{nomenclature.weight}} kg</td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"10\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n\r\n      <div class=\"pagination-preloader pagination-preloader_bord\" *ngIf=\"isLoading\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n      <div\r\n        class=\"paginator-wrapper\"\r\n        [class.paginator-wrapper_hide]=\"nomenclaturesCount === 0\"\r\n      >\r\n        <p-paginator\r\n          #paginator\r\n          [rows]=\"10\"\r\n          [totalRecords]=\"nomenclaturesCount\"\r\n          (onPageChange)=\"paginate($event)\"\r\n        >\r\n        </p-paginator>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {TreeNode} from \"primeng/api\";\r\nimport {AccountingProductsService} from \"../../services/accounting-products.service\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {ActivatedRoute} from \"@angular/router\";\r\n\r\nimport * as cloneDeep from 'lodash/cloneDeep';\r\nimport {CostReportsService} from \"../../services/cost-reports.service\";\r\n\r\n@Component({\r\n  selector: 'pek-reports-old-cost-report',\r\n  templateUrl: './reports-old-cost-report.component.html',\r\n  styleUrls: ['./reports-old-cost-report.component.scss']\r\n})\r\nexport class ReportsOldCostReportComponent implements OnInit {\r\n\r\n  selectedNode;\r\n  productId = this.route.snapshot.paramMap.get('id');\r\n  treeProducts: TreeNode[];\r\n  additionalExpenses = [];\r\n  loading = true;\r\n  parentIds = new Set<number>();\r\n\r\n  res: any = [];\r\n  rootId: number = null;\r\n  hide = true;\r\n\r\n  constructor(\r\n    private route: ActivatedRoute,\r\n    private accountingProductsService: AccountingProductsService,\r\n    private adapterService: AdapterService,\r\n    private costReportsService: CostReportsService\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getAll();\r\n  }\r\n\r\n  getAll() {\r\n    this.additionalExpenses = [];\r\n    this.selectedNode = null;\r\n    this.accountingProductsService.tree(this.productId).subscribe(res => {\r\n      res.forEach(el => {\r\n        el.from_products.sort((a, b) => new Date(a.invoice_creation_date).getTime() - new Date(b.invoice_creation_date).getTime());\r\n      });\r\n      let ss = {'0': 3, '1': 1, '2': 2};\r\n      res.sort((a, b) => ss[a.nomenclature.type] - ss[b.nomenclature.type]);\r\n      res = res.map(product => {\r\n        product.sumTotal = 0;\r\n        product.sumCost = 0;\r\n        return product;\r\n      });\r\n\r\n      res.forEach(element => {\r\n        if (element.accounting_services.length > 0) {\r\n          element.accounting_services.forEach(service => {\r\n            this.additionalExpenses.push(service);\r\n          });\r\n        }\r\n      });\r\n\r\n\r\n      res.forEach(item => {\r\n        this.parentIds.add(item.parent);\r\n      });\r\n\r\n      let parentId = null;\r\n\r\n      this.parentIds.forEach(id => {\r\n        const findEl = res.find(el => el.id === id);\r\n\r\n        if (!findEl) {\r\n          parentId = res.find(el => el.parent)?.id;\r\n          this.rootId = parentId;\r\n        }\r\n      });\r\n\r\n      res.forEach(item => {\r\n        if (item.parent === null) {\r\n          parentId = item.parent;\r\n          this.rootId = parentId;\r\n        }\r\n      });\r\n\r\n      this.res = res;\r\n      this.countSum2();\r\n      this.treeProducts = this.adapterService.treeAdapter(res, this.productId);\r\n      // this.countSum();\r\n\r\n      console.log(this.additionalExpenses);\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  isShowSum(rowData) {\r\n    let result = false;\r\n    // if (this.rootId) {\r\n    //   if (rowData.parent !== this.rootId) {\r\n    //     result = true;\r\n    //   }\r\n    // } else {\r\n    //   if (rowData.parent === this.rootId) {\r\n    //     result = true;\r\n    //   }\r\n    // }\r\n\r\n    if (this.parentIds.has(rowData.id)) {\r\n      result = true;\r\n    }\r\n\r\n    // if (rowData.from_products.length > 1) result = true\r\n\r\n    return result;\r\n  }\r\n\r\n  async countSum2() {\r\n    let rootItem;\r\n\r\n    if (this.rootId !== null) {\r\n      rootItem = this.res.find(el => this.rootId === el.id);\r\n    } else {\r\n      rootItem = this.res.find(el => el.parent === null);\r\n    }\r\n\r\n    const countTotal = (root) => {\r\n      let sumTotal = 0;\r\n      const children = this.res.filter(el => el.parent === root.id);\r\n\r\n      children.forEach(c => {\r\n        c.from_products.forEach(el => {\r\n          sumTotal += parseFloat(el.total_price);\r\n        });\r\n        c.sumTotal = countTotal(c);\r\n      });\r\n\r\n      return sumTotal;\r\n    };\r\n\r\n    const countTotal2 = (root) => {\r\n      let sumTotal = root.sumTotal;\r\n\r\n      const children = this.res.filter(el => el.parent === root.id);\r\n\r\n      children.forEach(c => {\r\n        c.sumTotal = countTotal2(c);\r\n        sumTotal += c.sumTotal;\r\n      });\r\n\r\n      return sumTotal;\r\n    };\r\n\r\n    const countCost = (root) => {\r\n      let sumCost = 0;\r\n      const children = this.res.filter(el => el.parent === root.id);\r\n\r\n      children.forEach(c => {\r\n        c.from_products.forEach(el => {\r\n          sumCost += parseFloat(el.total_cost);\r\n        });\r\n        c.sumCost = countCost(c);\r\n      });\r\n\r\n      return sumCost;\r\n    };\r\n\r\n    const countCost2 = (root) => {\r\n      let sumCost = root.sumCost;\r\n\r\n      const children = this.res.filter(el => el.parent === root.id);\r\n\r\n      children.forEach(c => {\r\n        c.sumCost = countCost2(c);\r\n        sumCost += c.sumCost;\r\n      });\r\n\r\n      return sumCost;\r\n    };\r\n\r\n    rootItem.sumTotal = countTotal(rootItem);\r\n    rootItem.sumTotal = countTotal2(rootItem);\r\n\r\n    rootItem.sumCost = countCost(rootItem);\r\n    rootItem.sumCost = countCost2(rootItem);\r\n\r\n    if (rootItem.assembly_info) {\r\n      rootItem.sumTotal += parseFloat(rootItem.assembly_info.supplier_total_price);\r\n      rootItem.sumCost += parseFloat(rootItem.assembly_info.supplier_total_cost);\r\n    }\r\n\r\n    this.res.forEach(el => {\r\n      const length = el.from_products.filter(p => {\r\n        if ((p.total_cost > 0 || p.total_price > 0 || p.unit_cost > 0 || p.unit_price > 0) || (el.sumTotal > 0 || el.sumCost > 0)) {\r\n          return p;\r\n        }\r\n      }).length;\r\n\r\n      el.visible = Boolean(length > 0);\r\n    });\r\n\r\n    rootItem.visible = true;\r\n\r\n\r\n    //  const tt = this.res;\r\n    //\r\n    //  let sum = 0;\r\n    //  tt.forEach(el => {\r\n    //    el.from_products.forEach(p => {\r\n    //      sum += p.total_cost;\r\n    //    });\r\n    //  });\r\n    //\r\n    // console.log(sum);\r\n  }\r\n\r\n  countSum() {\r\n    let id = 0;\r\n    const parents = new Set<number>();\r\n    this.res.forEach(item => {\r\n      if (item.parent) {\r\n        parents.add(item.parent);\r\n      } else {\r\n        id = item.id;\r\n      }\r\n    });\r\n\r\n    parents.forEach(item => {\r\n      let sumTotal = 0;\r\n      let sumCost = 0;\r\n      this.res.filter(p => p.parent === item).forEach(product => {\r\n        if (product.from_products.length > 0) {\r\n          product.from_products.forEach(p => {\r\n            sumTotal += p.total_price;\r\n            sumCost += p.total_cost;\r\n          });\r\n        } else {\r\n          sumTotal += 0;\r\n          sumCost += 0;\r\n        }\r\n      });\r\n\r\n      const el = this.res.find(p => p.id === item);\r\n\r\n      // this.res.find(p => p.id === item).sum = 100;\r\n      el.sumTotal = sumTotal;\r\n      el.sumCost = sumCost;\r\n      el.from_products.forEach(p => {\r\n        el.sumTotal += p.total_price;\r\n        el.sumCost += p.total_cost;\r\n      });\r\n    });\r\n\r\n    let parentSumTotal = 0;\r\n    let parentSumCost = 0;\r\n\r\n    parents.forEach(item => {\r\n      parentSumTotal += this.res.find(p => p.id === item).sumTotal;\r\n      parentSumCost += this.res.find(p => p.id === item).sumCost;\r\n    });\r\n\r\n    const parentEl = this.res.find(p => p.id === id);\r\n    parentEl.sumTotal = parentSumTotal;\r\n    parentEl.sumCost = parentSumCost;\r\n    parentEl.from_products?.forEach(p => {\r\n      parentEl.sumTotal += p.total_price;\r\n      parentEl.sumCost += p.total_cost;\r\n    });\r\n  }\r\n\r\n  onToggleHide() {\r\n    this.hide = !this.hide;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  expandCollapse(isToExpand = true): void {\r\n    const temp = cloneDeep(this.treeProducts);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, isToExpand);\r\n    });\r\n    this.treeProducts = temp;\r\n  }\r\n\r\n  services() {\r\n    this.costReportsService.additionalExpensesModal('old', this.treeProducts[0].data.id, this.additionalExpenses).subscribe()\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Cost Report</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <h2 class=\"mb-4\">Additional Expenses</h2>\r\n\r\n  <div class=\"page__card mb-4\">\r\n    <div class=\"row pt-3\">\r\n      <div *ngIf=\"loading\" class=\"d-flex justify-content-center\">\r\n        <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n      </div>\r\n\r\n      <div class=\"col-6\" *ngFor=\"let item of additionalExpenses\">\r\n        <span>{{item.accountingservice}} : {{item.value | moneyFormat}}  </span>\r\n      </div>\r\n\r\n      <div class=\"additional-none pl-3\" *ngIf=\"additionalExpenses.length === 0 && !loading\">\r\n        <span>Additional Expenses None</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"cost-page-header mb-4\">\r\n    <h2>Cost Report</h2>\r\n\r\n    <div class=\"d-flex\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-down\"\r\n        label=\"Expand All\"\r\n        class=\"mr-2\"\r\n        (click)=\"expandCollapse()\"\r\n        [disabled]=\"loading\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        class=\"mr-2\"\r\n        icon=\"pi pi-angle-up\"\r\n        label=\"Collapse All\"\r\n        (click)=\"expandCollapse(false)\"\r\n        [disabled]=\"loading\"\r\n      ></button>\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        [icon]=\"hide ? 'pi pi-eye' : 'pi pi-eye-slash'\"\r\n        [label]=\"hide ? 'Show All' : 'Hide zeros'\"\r\n        (click)=\"onToggleHide()\"\r\n        [disabled]=\"loading\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__card cost-report-table\">\r\n    <p-treeTable\r\n      #tt [value]=\"treeProducts\" selectionMode=\"single\" [(selection)]=\"selectedNode\"\r\n      [resizableColumns]=\"true\">\r\n      <ng-template pTemplate=\"caption\">\r\n\r\n        <div class=\"d-flex\">\r\n          <button\r\n            pButton\r\n            type=\"button\"\r\n            icon=\"pi pi-plus\"\r\n            label=\"Additional Expenses\"\r\n            class=\"ml-auto\"\r\n            (click)=\"services()\"\r\n            [disabled]=\"!selectedNode || selectedNode?.parent\"\r\n          ></button>\r\n        </div>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"header\" let-columns>\r\n        <tr>\r\n          <th style=\"width: 23%\" class=\"th-code\">Code</th>\r\n          <th style=\"width: 11%\">Name</th>\r\n          <th style=\"width: 6%\" class=\"text-center\">Required Qty</th>\r\n          <th style=\"width: 3%\" class=\"text-center\">UOM</th>\r\n          <th style=\"width: 3%\" class=\"text-center\">Order</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Invoice</th>\r\n          <th style=\"width: 9%\">Supplier</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Date</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Quantity</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Unit Price</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Total Price</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Unit Cost</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Total Cost</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Price SUM</th>\r\n          <th style=\"width: 5%\" class=\"text-center\">Cost SUM</th>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\" let-columns=\"columns\" let-index=\"rowIndex\">\r\n        <tr [ttRow]=\"rowNode\" [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\" [class.hide]=\"!rowData.visible && hide\">\r\n          <td [ngStyle]=\"{'padding-left': rowNode.level*10+'px'}\">\r\n            <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n            <span class=\"drag-cursor\">\r\n                        {{rowData.nomenclature.code}}\r\n                    </span>\r\n          </td>\r\n          <td>\r\n            {{rowData.nomenclature.name}}\r\n          </td>\r\n          <td class=\"text-center\">\r\n            {{rowData.required_quantity}}\r\n          </td>\r\n          <td class=\"text-center\">\r\n            {{rowData.nomenclature.category ? rowData.nomenclature.category.unit_of_measure.symbol : 'Pcs'}}\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.order?.id}}\r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li routerLinkActive=\"router-link-active\" *ngFor=\"let item of rowData.from_products\">\r\n                <a [routerLink]=\"['/procurement/chains/order/',item.order?.id]\"\r\n                   rel=\"noopener noreferrer\">{{item?.order?.id}}</a>\r\n              </li>\r\n            </ul>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.invoice?.self_serial_number}}\r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li *ngFor=\"let item of rowData.from_products\">\r\n                <a [routerLink]=\"['/reports/invoices/invoice/',item.invoice?.id]\"\r\n                   rel=\"noopener noreferrer\">{{item.invoice?.self_serial_number}}</a>\r\n              </li>\r\n            </ul>\r\n          </td>\r\n          <td>\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.supplier}}\r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li *ngFor=\"let item of rowData.from_products\">{{item.supplier}}</li>\r\n            </ul>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.document_creation_date | date:'dd/MM/yyyy'}}\r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li *ngFor=\"let item of rowData.from_products\">{{item.document_creation_date | date:'dd/MM/yyyy'}}\r\n              </li>\r\n            </ul>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.accepted_quantity}}\r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li *ngFor=\"let item of rowData.from_products\">{{item.quantity}}</li>\r\n            </ul>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.supplier_unit_price | moneyFormat}} \r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li *ngFor=\"let item of rowData.from_products\">{{item.unit_price | moneyFormat}} </li>\r\n            </ul>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.supplier_total_price | moneyFormat}} \r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li *ngFor=\"let item of rowData.from_products\">{{item.total_price | moneyFormat}} </li>\r\n            </ul>\r\n            <!--          <div>{{rowData.sumTotal | moneyFormat}} </div>-->\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.supplier_unit_cost| moneyFormat}} \r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li *ngFor=\"let item of rowData.from_products\">{{item.unit_cost | moneyFormat}} </li>\r\n            </ul>\r\n          </td>\r\n          <td class=\"text-center\">\r\n            <div *ngIf=\"rowData.assembly_info\">\r\n              {{rowData.assembly_info.supplier_total_cost| moneyFormat}} \r\n            </div>\r\n            <ul class=\"p-0\" *ngIf=\"rowData.from_products\" [class.m-0]=\"rowData.from_products\">\r\n              <li *ngFor=\"let item of rowData.from_products\">{{item.total_cost | moneyFormat}} </li>\r\n            </ul>\r\n            <!--          {{rowData.visible}}-->\r\n          </td>\r\n\r\n          <td class=\"text-center\">\r\n                  <span *ngIf=\"isShowSum(rowData)\">\r\n                    {{rowData.sumTotal | moneyFormat}} \r\n                  </span>\r\n          </td>\r\n          <td class=\"text-center\">\r\n                  <span *ngIf=\"isShowSum(rowData)\">\r\n                         {{rowData.sumCost | moneyFormat}} \r\n                  </span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"15\">\r\n            <i *ngIf=\"loading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!loading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n    </p-treeTable>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {\r\n  MultiProductCategoriesPickerComponent\r\n} from \"@shared/pickers/multi-product-categories-picker/multi-product-categories-picker.component\";\r\nimport {Table} from \"primeng/table\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {Observable, of, startWith, Subject, switchMap} from \"rxjs\";\r\nimport {BalanceProduct} from \"../../models/accounting-product\";\r\nimport {debounceTime, distinctUntilChanged, filter, tap} from \"rxjs/operators\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {ColumnFilterService} from \"@shared/services/column-filter.service\";\r\nimport {AccountingProductsService} from \"../../services/accounting-products.service\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {List} from \"../../../warehouse/models/list\";\r\nimport {ListService} from \"../../../warehouse/services/list.service\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-out',\r\n  templateUrl: './reports-out.component.html',\r\n  styleUrls: ['./reports-out.component.scss']\r\n})\r\nexport class ReportsOutComponent implements OnInit {\r\n  @ViewChild(MultiProductCategoriesPickerComponent) picker: MultiProductCategoriesPickerComponent;\r\n\r\n  @ViewChild('dt') dt: Table;\r\n\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [''],\r\n    code: [''],\r\n    written_off_for_lists: [null],\r\n    supplier: [null],\r\n    supplier_category: [null],\r\n    categories: [null],\r\n    root_categories: [null],\r\n    system_creation_date_after: [null],\r\n    system_creation_date_before: [null],\r\n    invoice_reception_date_after: [null],\r\n    invoice_reception_date_before: [null],\r\n    items_reception_date_after: [null],\r\n    items_reception_date_before: [null],\r\n    created_after: [null],\r\n    created_before: [null],\r\n    for_completed_lists: [null],\r\n    is_paid: [null],\r\n    purchase_categories: [null],\r\n    invoice_date_after: [null],\r\n    invoice_date_before: [null],\r\n    nomenclature_accounting_numbers: [null],\r\n    accounting_type: [null],\r\n    material_or_service: [null],\r\n    for_lists_in_progress: [null],\r\n  });\r\n\r\n  isLoadingLists = true;\r\n  lists: Partial<List>[];\r\n\r\n  isLoading = false;\r\n  balanceProducts = [];\r\n\r\n  query: QuerySearch[] = [];\r\n  count = 0;\r\n\r\n  supplierTotalCost = 0;\r\n  supplierTotalPrice = 0;\r\n\r\n  isGenerate = false;\r\n\r\n  search$: Subject<void> = new Subject<void>();\r\n\r\n  name$: Subject<string> = new Subject<string>();\r\n  code$: Subject<string> = new Subject<string>();\r\n\r\n  balanceProducts$: Observable<BalanceProduct[]> = this.search$.pipe(\r\n    debounceTime(150),\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.query.length ? this.accountingProductService.out(this.query).pipe(\r\n        tap(products => this.countTotals(products)),\r\n        startWith([]),\r\n        untilDestroyed(this)\r\n      ) :\r\n      of([]).pipe(\r\n        tap(() => this.countTotals([]))\r\n      )),\r\n    untilDestroyed(this)\r\n  )\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    public columnFilterService: ColumnFilterService,\r\n    private accountingProductService: AccountingProductsService,\r\n    private readonly adapterService: AdapterService,\r\n    private listsService: ListService,\r\n  ) {\r\n  }\r\n\r\n  getLists() {\r\n    this.listsService.getForFilter().subscribe(lists => {\r\n      this.lists = lists;\r\n      this.lists.forEach(list => list.fullName = `(${list.id}) ${list.nomenclature.code} ${list.nomenclature.name}`);\r\n      this.lists.unshift(...[\r\n        {\r\n          id: -1,\r\n          fullName: 'Sold Products'\r\n        },\r\n        {\r\n          id: 0,\r\n          fullName: 'Physical Inventory'\r\n        }\r\n      ]);\r\n\r\n      this.isLoadingLists = false;\r\n    });\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(250),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(250),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.getLists();\r\n  }\r\n\r\n  clearFilters() {\r\n    this.searchForm.reset();\r\n    this.picker.fillSelected([])\r\n  }\r\n\r\n  countTotals(products: BalanceProduct[]) {\r\n    this.supplierTotalCost = 0;\r\n    this.supplierTotalPrice = 0;\r\n    products.forEach(el => {\r\n      this.supplierTotalCost += el.supplier_total_cost;\r\n      // @ts-ignore\r\n      this.supplierTotalPrice += parseFloat(el.supplier_total_price);\r\n\r\n    });\r\n\r\n    this.count = products.length\r\n    this.balanceProducts = [...products];\r\n    this.isLoading = false;\r\n  }\r\n\r\n  prepareForSearch() {\r\n    this.dt._first = 0;\r\n\r\n    this.isLoading = true;\r\n    this.count = 0;\r\n\r\n    this.query = [];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null && this.searchForm.controls[key].value !== '') {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  exportToExcel() {\r\n    this.isGenerate = true;\r\n    this.accountingProductService.exportToExcel(this.balanceProducts, 'out').then(() => {\r\n      this.isGenerate = false;\r\n    });\r\n  }\r\n\r\n  onApplyFilter() {\r\n    this.accountingProductService.openFilterModal().pipe(\r\n      filter(filter => !!filter)\r\n    ).subscribe(filter => {\r\n      const newFilter: any = {...filter};\r\n\r\n      if (newFilter.invoice_reception_date_after) {\r\n        newFilter.invoice_reception_date_after = new Date(newFilter.invoice_reception_date_after);\r\n      }\r\n\r\n      if (newFilter.invoice_reception_date_before) {\r\n        newFilter.invoice_reception_date_before = new Date(newFilter.invoice_reception_date_before);\r\n      }\r\n\r\n      if (newFilter.items_reception_date_after) {\r\n        newFilter.items_reception_date_after = new Date(newFilter.items_reception_date_after);\r\n      }\r\n\r\n      if (newFilter.items_reception_date_before) {\r\n        newFilter.items_reception_date_before = new Date(newFilter.items_reception_date_before);\r\n      }\r\n\r\n      if (newFilter.system_creation_date_after) {\r\n        newFilter.system_creation_date_after = new Date(newFilter.system_creation_date_after);\r\n      }\r\n\r\n      if (newFilter.system_creation_date_before) {\r\n        newFilter.system_creation_date_before = new Date(newFilter.system_creation_date_before);\r\n      }\r\n\r\n      newFilter.supplier = newFilter.supplier ? newFilter.supplier.id : null;\r\n      newFilter.supplier_category = newFilter.supplier_category ? +newFilter.supplier_category.id : null;\r\n      newFilter.categories = newFilter.nomenclature_categories.split(',').map(id => +id);\r\n\r\n      newFilter.code = newFilter.nomenclature_code;\r\n      newFilter.name = newFilter.nomenclature_name;\r\n\r\n      this.searchForm.patchValue(newFilter);\r\n\r\n      this.picker.fillSelected(newFilter.categories)\r\n    })\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.searchForm.get('supplier').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategory(id: number) {\r\n    this.searchForm.get('supplier_category').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategories(ids: number[]) {\r\n    this.searchForm.get('categories').patchValue(ids?.join(',') ?? null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectPurchasedCategories(values: any[]) {\r\n    this.searchForm.get('accounting_type').patchValue(null);\r\n    this.searchForm.get('material_or_service').patchValue(null);\r\n\r\n    values.forEach(v => {\r\n      if (v === 'mp') {\r\n        this.searchForm.get('accounting_type').patchValue(1);\r\n      } else if (v === 'ou') {\r\n        this.searchForm.get('material_or_service').patchValue('material');\r\n      } else if (v === 'os') {\r\n        this.searchForm.get('material_or_service').patchValue('service');\r\n      }\r\n    });\r\n\r\n    if (values.find(v => v === 'ou') && values.find(v => v === 'os')) {\r\n      this.searchForm.get('material_or_service').patchValue('both');\r\n    }\r\n\r\n    values = values.filter(v => typeof (v) === 'number');\r\n    this.searchForm.get('purchase_categories').patchValue(values.join(','));\r\n    this.search$.next();\r\n  }\r\n\r\n  getPaidFinishedProducts(value: any) {\r\n    this.searchForm.get('for_completed_lists').patchValue(value);\r\n    this.search$.next();\r\n  }\r\n\r\n  getProgressValue(value: any) {\r\n    this.searchForm.get('for_lists_in_progress').patchValue(value);\r\n    this.search$.next();\r\n  }\r\n\r\n  changeAccountingNumber(evt) {\r\n    const value = evt.target.value.replace(/\\s/g, '');\r\n\r\n    if (value) {\r\n      this.searchForm.get('nomenclature_accounting_numbers').patchValue(value);\r\n    } else {\r\n      this.searchForm.get('nomenclature_accounting_numbers').patchValue(null);\r\n    }\r\n\r\n    this.search$.next()\r\n  }\r\n\r\n  onSelectProductStructureCategories(ids: string) {\r\n    this.searchForm.get('root_categories').patchValue(ids ?? null);\r\n    this.search$.next();\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>\r\n        Out (Total Cost: <span *ngIf=\"!isLoading; else totalsLoading\">{{supplierTotalCost | moneyFormat}}</span> ,\r\n        Total Price: <span *ngIf=\"!isLoading; else totalsLoading\">{{supplierTotalPrice | moneyFormat}}</span> )\r\n      </h1>\r\n\r\n      <ng-template #totalsLoading>...</ng-template>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-double-right\"\r\n        label=\"Apply Filter\"\r\n        (click)=\"onApplyFilter()\"\r\n      ></button>\r\n\r\n      <button\r\n        class=\"p-button-danger ml-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-times\"\r\n        label=\"Clear Filter\"\r\n        (click)=\"clearFilters()\"\r\n      ></button>\r\n\r\n      <button\r\n        class=\"p-button-icon ml-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-file-excel\"\r\n        [loading]=\"isGenerate\"\r\n        label=\"Generate Report\"\r\n        [disabled]=\"!count\"\r\n        (click)=\"exportToExcel()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form\r\n      [formGroup]=\"searchForm\"\r\n      class=\"form mb-3\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input type=\"text\" pInputText formControlName=\"name\" (ngModelChange)=\"name$.next($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Code</label>\r\n            <input type=\"text\" pInputText formControlName=\"code\" (ngModelChange)=\"code$.next($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Company</label>\r\n            <pek-company-picker\r\n              [currentCompanyId]=\"searchForm.get('supplier').value\"\r\n              (selectCompany)=\"onSelectCompany($event)\"\r\n            ></pek-company-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Company Category</label>\r\n            <pek-company-category-picker\r\n              [selectedCategoryId]=\"searchForm.get('supplier_category').value\"\r\n              (selectCompanyCategory)=\"onSelectCategory($event)\"></pek-company-category-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Warehouse Category</label>\r\n            <pek-multi-product-categories-picker\r\n              [currentCategoryIds]=\"searchForm.get('root_categories').value\"\r\n              (choiceCategoryFolAllIds)=\"onSelectCategories($event)\"\r\n            ></pek-multi-product-categories-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"row\">\r\n            <div class=\"col-6\">\r\n              <div class=\"form-group\">\r\n                <label>Finished Products</label>\r\n                <pek-input-three-values\r\n                  [filterValue]=\"columnFilterService.getFilterValue(searchForm.get('for_completed_lists').value)\"\r\n                  (changeValue)=\"getPaidFinishedProducts($event)\">\r\n                </pek-input-three-values>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-6\">\r\n              <div class=\"form-group\">\r\n                <label>In Progress</label>\r\n                <pek-input-three-values\r\n                  [filterValue]=\"columnFilterService.getFilterValue(searchForm.get('for_lists_in_progress').value)\"\r\n                  (changeValue)=\"getProgressValue($event)\">\r\n                </pek-input-three-values>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"form-group\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Creation From</label>\r\n            <p-calendar\r\n              formControlName=\"system_creation_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Creation To</label>\r\n            <p-calendar\r\n              formControlName=\"system_creation_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Recieved From</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_reception_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Recieved To</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_reception_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Items Recieved From</label>\r\n            <p-calendar\r\n              formControlName=\"items_reception_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Items Recieved To</label>\r\n            <p-calendar\r\n              formControlName=\"items_reception_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Written Lists</label>\r\n            <ng-container *ngIf=\"!isLoadingLists; else listLoading\">\r\n              <p-multiSelect\r\n                formControlName=\"written_off_for_lists\"\r\n                [filter]=\"true\"\r\n                [options]=\"lists\"\r\n                placeholder=\"Choose Written List\" optionLabel=\"fullName\"\r\n                optionValue=\"id\"\r\n                (ngModelChange)=\"search$.next()\"\r\n              >\r\n              </p-multiSelect>\r\n            </ng-container>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Purchase Category</label>\r\n            <pek-multi-purchase-category-picker\r\n              [withReportFilters]=\"true\"\r\n              (choiceCategories)=\"onSelectPurchasedCategories($event)\"\r\n            ></pek-multi-purchase-category-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Write-off Date From</label>\r\n            <p-calendar\r\n              formControlName=\"created_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Write-off Date To</label>\r\n            <p-calendar\r\n              formControlName=\"created_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Product Structure Category</label>\r\n            <pek-multi-product-structure-categories-picker\r\n              (choiceCategories)=\"onSelectProductStructureCategories($event)\"\r\n            >\r\n            </pek-multi-product-structure-categories-picker>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"col-4\">\r\n          <div class=\"form-group\">\r\n            <label>Nomenclature Accounting Number</label>\r\n            <input pInputText (input)=\"changeAccountingNumber($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Date From</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Date To</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"page__table report-table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"count > 0\"\r\n        [rows]=\"10\"\r\n        [value]=\"balanceProducts$ | async\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 3%\">#</th>\r\n            <th style=\"width: 8%\">Code</th>\r\n            <th style=\"width: 10%\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 5%;\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 4%;\">UOM</th>\r\n            <th class=\"text-center\" style=\"width: 4%;\">Order</th>\r\n            <th class=\"text-center\" style=\"width: 4%;\">Out Order</th>\r\n            <th class=\"text-center\" style=\"width: 6%;\">Invoice</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Technology</th>\r\n            <th style=\"width: 7%\">Supplier</th>\r\n            <th style=\"width: 7%\" class=\"text-center\">Purchase Category</th>\r\n            <th style=\"width: 8%\">Written For List</th>\r\n            <th class=\"text-center\" style=\"width: 6%;\">Date</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Write-off Date</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Unit Price</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Price</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Unit Cost</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Cost</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 3%\">{{i + 1}}</td>\r\n            <td style=\"width: 8%\">{{product.nomenclature.code}}</td>\r\n            <td style=\"width: 10%\">{{product.nomenclature.name}}</td>\r\n            <td style=\"width: 5%;\" class=\"text-center\">{{product.quantity}}</td>\r\n            <td style=\"width: 4%;\"\r\n                class=\"text-center\">{{product.nomenclature.category ? product.nomenclature.category.unit_of_measure.symbol : 'Pcs'}}</td>\r\n            <td style=\"width: 4%;\" class=\"text-center\">\r\n              <a rel=\"noopener noreferrer\" target=\"_blank\"\r\n                 *ngIf=\"product.nomenclature.type === '0' && !product.physical_inventory\"\r\n                 [routerLink]=\"['/procurement/chains/order/',product.order]\">{{product.order}}</a>\r\n              <a rel=\"noopener noreferrer\" target=\"_blank\"\r\n                 *ngIf=\"product.nomenclature.type !== '0' && !product.physical_inventory\"\r\n                 [routerLink]=\"['/outsourcing/chains/order/',product.order]\">{{product.order}}</a>\r\n              <a rel=\"noopener noreferrer\" target=\"_blank\" *ngIf=\"product.physical_inventory\"\r\n                 [routerLink]=\"['/warehouse/physical-inventory/',product.order]\">{{product.physical_inventory.id}}</a>\r\n            </td>\r\n            <td style=\"width: 4%;\" class=\"text-center\">\r\n              <a rel=\"noopener noreferrer\" target=\"_blank\"\r\n                 *ngIf=\"product.nomenclature.type === '0' && !product.physical_inventory\"\r\n                 [routerLink]=\"['/procurement/chains/order/',product.out_order_id]\">{{product.out_order_id}}</a>\r\n              <a rel=\"noopener noreferrer\" target=\"_blank\"\r\n                 *ngIf=\"product.nomenclature.type !== '0' && !product.physical_inventory\"\r\n                 [routerLink]=\"['/outsourcing/chains/order/',product.out_order_id]\">{{product.out_order_id}}</a>\r\n            </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">\r\n              <a rel=\"noopener noreferrer\" *ngIf=\"product.invoice && !product.physical_inventory\" target=\"_blank\"\r\n                 [routerLink]=\"['/reports/invoices/invoice/',product.invoice.id]\">{{product.invoice.self_serial_number}}</a>\r\n              <span *ngIf=\"product.physical_inventory\">None</span>\r\n            </td>\r\n            <td style=\"width: 6%;\"\r\n                class=\"text-center\">{{product.current_technology ? product.current_technology : 'None'}}</td>\r\n            <td style=\"width: 7%\">{{product.supplier}}</td>\r\n            <td style=\"width: 7%;\" class=\"text-center\">\r\n              {{product.purchase_category ? product.purchase_category?.name : 'None'}}\r\n            </td>\r\n            <td style=\"width: 8%\">{{product.written_off_for_list}}</td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{product.document_creation_date|date:'dd/MM/yyyy'}}</td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{product.created | date:'dd/MM/yyyy'}}</td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{product.supplier_unit_price | moneyFormat}} </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{product.supplier_total_price| moneyFormat}} </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{product.supplier_unit_cost | moneyFormat}} </td>\r\n            <td style=\"width: 6%;\" class=\"text-center\">{{product.supplier_total_cost | moneyFormat}} </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && count > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n\r\n<ng-template #listLoading>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, ElementRef, OnInit, ViewChild} from '@angular/core';\r\nimport {FormBuilder} from \"@angular/forms\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {\r\n  ExactEntriesInvoice,\r\n  ExcludePayment,\r\n  ExtraInvoice,\r\n  ExtraPayment,\r\n  PaymentChecker\r\n} from \"../../services/payment-checker\";\r\nimport {PaymentCheckerService} from \"../../services/payment-checker.service\";\r\n\r\n@Component({\r\n  selector: 'pek-reports-payments-checker',\r\n  templateUrl: './reports-payments-checker.component.html',\r\n  styleUrls: ['./reports-payments-checker.component.scss']\r\n})\r\nexport class ReportsPaymentsCheckerComponent implements OnInit {\r\n  @ViewChild('addFileInput') inputFiles: ElementRef;\r\n\r\n  @ViewChild('dtp') dateTablePayments: any;\r\n  @ViewChild('trPayment') trPayment: ElementRef;\r\n\r\n  @ViewChild('dts') dateTableInvoices: any;\r\n  @ViewChild('trInvoices') trInvoices: ElementRef;\r\n\r\n  files = [];\r\n  isLoadForm = false;\r\n\r\n  isFilesLoading = false;\r\n\r\n  data: PaymentChecker;\r\n\r\n  payments: ExtraPayment[] = [];\r\n  invoices: ExtraInvoice[] = [];\r\n\r\n  occurrences: ExactEntriesInvoice[] = [];\r\n  selectedOccurrence: ExactEntriesInvoice;\r\n\r\n  selectedPayment: ExtraPayment;\r\n  selectedInvoice: ExtraInvoice;\r\n\r\n  excludePayments: ExcludePayment[] = [];\r\n  selectedExcludePayment: ExcludePayment;\r\n\r\n  searchForm = this.fb.group({\r\n    invoice_date_after: [null],\r\n    invoice_date_before: [null],\r\n  });\r\n\r\n  paymentsCompanyDoubles: {company: string, count: number}[] = [];\r\n  paymentsCompanies: string[] = [];\r\n\r\n  invoicesCompanyDoubles: {company: string, count: number}[] = [];\r\n  invoicesCompanies: string[] = [];\r\n\r\n  isGroupedPayments = false;\r\n  isGroupedInvoices = false;\r\n\r\n  groupedPayments: ExtraPayment[] = [];\r\n  groupedInvoices: ExtraInvoice[] = [];\r\n\r\n  constructor(\r\n    private accountingService: PaymentCheckerService,\r\n    private fb: FormBuilder,\r\n    private adapterService: AdapterService,\r\n    private modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getFiles();\r\n    this.getExcludePayments();\r\n  }\r\n\r\n  getMaxId() {\r\n    let id = 0;\r\n    this.occurrences.forEach(item => {\r\n      if (id < item.id) {\r\n        id = item.id;\r\n      }\r\n    });\r\n    return id + 1;\r\n  }\r\n\r\n  generateTables() {\r\n    this.selectedOccurrence = null;\r\n    this.selectedPayment = null;\r\n    this.selectedInvoice = null;\r\n\r\n    this.payments = [];\r\n    this.invoices = [];\r\n    this.occurrences = [];\r\n\r\n    this.data.exact_entries.invoices.forEach(entry => this.occurrences.push(entry));\r\n\r\n    if (this.data.exact_entries.service_invoices) {\r\n      this.data.exact_entries.service_invoices.forEach(entry => this.occurrences.push(entry));\r\n    }\r\n\r\n    this.data.similar_entries.invoices.forEach(entry => this.occurrences.push(entry));\r\n\r\n    if (this.data.similar_entries.service_invoices) {\r\n      this.data.similar_entries.service_invoices.forEach(entry => this.occurrences.push(entry));\r\n    }\r\n\r\n    if (this.data.extra_entries.xml_payments) {\r\n      this.data.extra_entries.xml_payments.forEach(entry => {\r\n        this.payments.push({\r\n          ...entry,\r\n          amount: parseFloat(entry.amount),\r\n        });\r\n      });\r\n    }\r\n\r\n    this.data.extra_entries.invoices.forEach(entry => {\r\n      this.invoices.push({\r\n        ...entry,\r\n        rounded_converted_total_price: parseFloat(entry.rounded_converted_total_price),\r\n      });\r\n    });\r\n\r\n    if (this.data.extra_entries.service_invoices) {\r\n      this.data.extra_entries.service_invoices.forEach(entry => {\r\n        this.invoices.push({\r\n          ...entry,\r\n          rounded_converted_total_price: parseFloat(entry.rounded_converted_total_price),\r\n        });\r\n      });\r\n    }\r\n\r\n    this.invoices.forEach(invoice => {\r\n      if (!invoice.supplier) invoice.supplier = '';\r\n    });\r\n\r\n    this.payments.forEach(payment => {\r\n      if (!payment.company_name) payment.company_name = '';\r\n    });\r\n\r\n    this.invoices.sort((x, y) => {\r\n      if (x.supplier < y.supplier) return -1;\r\n      if (x.supplier > y.supplier) return 1;\r\n      return 0;\r\n    });\r\n\r\n    this.payments.sort((x, y) => {\r\n      if (x.company_name < y.company_name) return -1;\r\n      if (x.company_name > y.company_name) return 1;\r\n      return 0;\r\n    });\r\n\r\n    this.getPaymentsCompanies();\r\n    this.getInvoicesCompanies();\r\n  }\r\n\r\n  getPaymentsCompanies() {\r\n    this.paymentsCompanies = [];\r\n    this.paymentsCompanyDoubles = [];\r\n\r\n    this.payments.forEach(payment => this.paymentsCompanies.push(payment.company_name));\r\n\r\n    this.paymentsCompanies.forEach(company => {\r\n      let count = 0;\r\n      while (this.paymentsCompanies.includes(company)) {\r\n        const index = this.paymentsCompanies.findIndex(c => c === company);\r\n        this.paymentsCompanies.splice(index, 1);\r\n        count++;\r\n      }\r\n\r\n      this.paymentsCompanyDoubles.push({company, count});\r\n    });\r\n\r\n    this.paymentsCompanyDoubles = this.paymentsCompanyDoubles.filter(c => c.count > 1);\r\n  }\r\n\r\n  getInvoicesCompanies() {\r\n    this.invoicesCompanies = [];\r\n    this.invoicesCompanyDoubles = [];\r\n\r\n    this.invoices.forEach(invoice => this.invoicesCompanies.push(invoice.supplier));\r\n\r\n    this.invoicesCompanies.forEach(company => {\r\n      let count = 0;\r\n      while (this.invoicesCompanies.includes(company)) {\r\n        const index = this.invoicesCompanies.findIndex(c => c === company);\r\n        this.invoicesCompanies.splice(index, 1);\r\n        count++;\r\n      }\r\n\r\n      this.invoicesCompanyDoubles.push({company, count});\r\n    });\r\n\r\n    this.invoicesCompanyDoubles = this.invoicesCompanyDoubles.filter(c => c.count > 1);\r\n  }\r\n\r\n  getFiles() {\r\n    if (localStorage.getItem('checker')) {\r\n      this.data = JSON.parse(localStorage.getItem('checker'));\r\n      this.isFilesLoading = true;\r\n      this.generateTables();\r\n    }\r\n  }\r\n\r\n  uploadAgain() {\r\n    localStorage.removeItem('checker');\r\n    this.data = null;\r\n    this.isFilesLoading = false;\r\n    this.files = [];\r\n\r\n    this.paymentsCompanyDoubles = [];\r\n    this.paymentsCompanies = [];\r\n\r\n    this.invoicesCompanyDoubles = [];\r\n    this.invoicesCompanies = [];\r\n\r\n    this.isGroupedPayments = false;\r\n    this.isGroupedInvoices = false;\r\n\r\n    this.groupedPayments = [];\r\n    this.groupedInvoices = [];\r\n\r\n    this.searchForm.reset();\r\n  }\r\n\r\n  onDragOver(event: DragEvent) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  onDrop(event: DragEvent) {\r\n\r\n    event.preventDefault();\r\n\r\n    const filesArr = Array.from(event.dataTransfer.files);\r\n\r\n    filesArr.forEach(file => {\r\n      if (file.type === 'text/xml') {\r\n        this.files.push(file);\r\n      }\r\n    });\r\n  }\r\n\r\n  setFiles(files: FileList) {\r\n    const filesArr = Array.from(files);\r\n    filesArr.forEach(file => this.files.push(file));\r\n  }\r\n\r\n  setFile(file: File) {\r\n    this.files.push(file);\r\n  }\r\n\r\n  removeFile(file: File) {\r\n    const index = this.files.findIndex(f => f === file);\r\n    this.files.splice(index, 1);\r\n    this.removeFileFromFileList(index);\r\n  }\r\n\r\n  removeFileFromFileList(index) {\r\n    const dt = new DataTransfer();\r\n\r\n    const files = this.inputFiles.nativeElement.files;\r\n\r\n    for (let i = 0; i < files.length; i++) {\r\n      const file = files[i];\r\n      if (index !== i) {\r\n        dt.items.add(file);\r\n      }\r\n    }\r\n\r\n    this.inputFiles.nativeElement.files = dt.files;\r\n  }\r\n\r\n\r\n  generate() {\r\n    this.isLoadForm = true;\r\n    const formData = new FormData();\r\n    this.files.forEach((file, idx) => {\r\n      formData.append(`${idx + 1}.xml`, file, file.name);\r\n    });\r\n\r\n    const query: QuerySearch[] = [];\r\n\r\n    if (this.searchForm.get('invoice_date_after').value) {\r\n      query.push({name: 'invoice_date_after', value: this.adapterService.dateAdapter(this.searchForm.get('invoice_date_after').value)});\r\n    }\r\n\r\n    if (this.searchForm.get('invoice_date_before').value) {\r\n      query.push({name: 'invoice_date_before', value: this.adapterService.dateAdapter(this.searchForm.get('invoice_date_before').value)});\r\n    }\r\n\r\n    this.accountingService.attachFiles(formData, query).subscribe(res => {\r\n      res.exact_entries.invoices = res.exact_entries.invoices.map(entry => {\r\n        return {\r\n          full_entry: true,\r\n          type: 'invoice',\r\n          completed: false,\r\n          ...entry\r\n        };\r\n      });\r\n\r\n      res.exact_entries.service_invoices = res.exact_entries.service_invoices.map(entry => {\r\n        return {\r\n          full_entry: true,\r\n          type: 'service-invoice',\r\n          completed: false,\r\n          ...entry\r\n        };\r\n      });\r\n\r\n      res.similar_entries.invoices = res.similar_entries.invoices.map(entry => {\r\n        return {\r\n          full_entry: false,\r\n          type: 'invoice',\r\n          completed: false,\r\n          ...entry\r\n        };\r\n      });\r\n\r\n      res.similar_entries.service_invoices = res.similar_entries.service_invoices.map(entry => {\r\n        return {\r\n          full_entry: false,\r\n          type: 'service-invoice',\r\n          completed: false,\r\n          ...entry\r\n        };\r\n      });\r\n\r\n      localStorage.setItem('checker', JSON.stringify(res));\r\n      this.data = {...res};\r\n      this.generateTables();\r\n      this.isLoadForm = false;\r\n      this.isFilesLoading = true;\r\n    });\r\n  }\r\n\r\n  splitIntoParts() {\r\n    const payment: ExtraPayment = {\r\n      id: this.selectedOccurrence.payment_id,\r\n      company_name: this.selectedOccurrence.xml_company_name,\r\n      date: this.selectedOccurrence.payment_date,\r\n      amount: this.selectedOccurrence.payment_amount,\r\n    };\r\n\r\n    const invoice: ExtraInvoice = {\r\n      id: this.selectedOccurrence.invoice_id,\r\n      invoice_date: this.selectedOccurrence.invoice_invoice_date,\r\n      supplier: this.selectedOccurrence.invoice_supplier_name,\r\n      order_id: this.selectedOccurrence.order_id,\r\n      rounded_converted_total_price: this.selectedOccurrence.invoice_total_price\r\n    };\r\n\r\n    this.payments.unshift(payment);\r\n    this.invoices.unshift(invoice);\r\n\r\n    this.getPaymentsCompanies();\r\n    this.getInvoicesCompanies();\r\n\r\n    if (this.isGroupedPayments) {\r\n      this.groupingPayments();\r\n    }\r\n\r\n    if (this.isGroupedInvoices) {\r\n      this.groupingInvoices();\r\n    }\r\n\r\n    this.occurrences = this.occurrences.filter(item => item.id !== this.selectedOccurrence.id);\r\n    this.selectedOccurrence = null;\r\n\r\n    this.update();\r\n  }\r\n\r\n  join() {\r\n    this.occurrences.unshift({\r\n      id: this.getMaxId(),\r\n      type: 'invoice',\r\n      completed: false,\r\n      full_entry: true,\r\n      payment_id: this.selectedPayment.id,\r\n      order_id: this.selectedInvoice.order_id,\r\n      invoice_id: this.selectedInvoice.id,\r\n      invoice_invoice_date: this.selectedInvoice.invoice_date,\r\n      invoice_total_price: this.selectedInvoice.rounded_converted_total_price,\r\n      payment_amount: this.selectedPayment.amount,\r\n      payment_date: this.selectedPayment.date,\r\n      invoice_supplier_name: this.selectedInvoice.supplier,\r\n      xml_company_name: this.selectedPayment.company_name,\r\n    });\r\n\r\n    this.payments = this.payments.filter(p => p.id !== this.selectedPayment.id);\r\n    this.invoices = this.invoices.filter(inv => inv.id !== this.selectedInvoice.id);\r\n\r\n    this.getPaymentsCompanies();\r\n    this.getInvoicesCompanies();\r\n\r\n    if (this.isGroupedPayments) {\r\n      this.groupingPayments();\r\n    }\r\n\r\n    if (this.isGroupedInvoices) {\r\n      this.groupingInvoices();\r\n    }\r\n\r\n    this.selectedPayment = null;\r\n    this.selectedInvoice = null;\r\n\r\n    this.update();\r\n  }\r\n\r\n  update() {\r\n    const exactEntries = [];\r\n    const similarEntries = [];\r\n    const extraPayments = [];\r\n    const extraInvoices = [];\r\n\r\n    this.occurrences.forEach(occurrence => {\r\n      if (occurrence.full_entry) {\r\n        exactEntries.push(occurrence);\r\n      } else {\r\n        similarEntries.push(occurrence);\r\n      }\r\n    });\r\n\r\n    this.payments.forEach(payment => {\r\n      extraPayments.push(payment);\r\n    });\r\n\r\n    this.invoices.forEach(invoice => {\r\n      extraInvoices.push(invoice);\r\n    });\r\n\r\n    const data = {\r\n      exact_entries: {\r\n        invoices: exactEntries\r\n      },\r\n      extra_entries: {\r\n        invoices: extraInvoices,\r\n        xml_payments: extraPayments,\r\n      },\r\n      similar_entries: {\r\n        invoices: similarEntries\r\n      },\r\n    };\r\n\r\n    localStorage.removeItem('checker');\r\n    localStorage.setItem('checker', JSON.stringify(data));\r\n  }\r\n\r\n  excludePayment() {\r\n    this.modalService.confirm('success').subscribe(res => {\r\n      if (res) {\r\n        const send = {name: this.selectedPayment.company_name};\r\n        this.accountingService.excludePayment(send).subscribe(excludePayment => {\r\n          this.payments = this.payments.filter(p => p.company_name !== excludePayment.name);\r\n          this.excludePayments.push(excludePayment);\r\n          this.selectedPayment = null;\r\n          this.update();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  restorePayment() {\r\n    this.modalService.confirm('success').subscribe(res => {\r\n      if (res) {\r\n        const send = {id: this.selectedExcludePayment.id};\r\n        this.accountingService.restoreExcludePayment(send).subscribe(() => {\r\n          const index = this.excludePayments.findIndex(p => p.id === this.selectedExcludePayment.id);\r\n          this.excludePayments.splice(index, 1);\r\n          this.selectedExcludePayment = null;\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  getExcludePayments() {\r\n    this.accountingService.getExcludePayments().subscribe(excludePayments => {\r\n      this.excludePayments = excludePayments;\r\n    });\r\n  }\r\n\r\n  unGroupingPayments() {\r\n    this.isGroupedPayments = false;\r\n    this.dateTablePayments._sortField = null;\r\n    this.trPayment.nativeElement.querySelectorAll('th').forEach(s => s.classList.remove('p-highlight'));\r\n  }\r\n\r\n  unGroupingInvoices() {\r\n    this.isGroupedInvoices = false;\r\n    this.dateTablePayments._sortField = null;\r\n    this.trInvoices.nativeElement.querySelectorAll('th').forEach(s => s.classList.remove('p-highlight'));\r\n  }\r\n\r\n  groupingPayments() {\r\n    this.dateTablePayments._sortField = 'company_name';\r\n    this.groupedPayments = [];\r\n    if (!this.isGroupedPayments) this.isGroupedPayments = true;\r\n\r\n    this.groupedPayments = JSON.parse(JSON.stringify(this.payments));\r\n\r\n    let k = 1;\r\n    let amount = 0;\r\n\r\n    this.groupedPayments.forEach(payment => {\r\n      if (this.paymentsCompanyDoubles.find(p => p.company === payment.company_name)) {\r\n        if (k === 1) {\r\n          payment.isFirst = true;\r\n        }\r\n\r\n        amount += payment.amount;\r\n        payment.isGrouped = true;\r\n\r\n        if (k === this.paymentsCompanyDoubles.find(p => p.company === payment.company_name).count) {\r\n          payment.isLast = true;\r\n          payment.totalAmount = amount;\r\n          k = 1;\r\n          amount = 0;\r\n        } else {\r\n          k++;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  groupingInvoices() {\r\n    this.dateTableInvoices._sortField = 'supplier';\r\n    this.groupedInvoices = [];\r\n    if (!this.isGroupedInvoices) this.isGroupedInvoices = true;\r\n\r\n    this.groupedInvoices = JSON.parse(JSON.stringify(this.invoices));\r\n\r\n    let k = 1;\r\n    let amount = 0;\r\n\r\n    this.groupedInvoices.forEach(invoice => {\r\n      if (this.invoicesCompanyDoubles.find(p => p.company === invoice.supplier)) {\r\n        if (k === 1) {\r\n          invoice.isFirst = true;\r\n        }\r\n\r\n        amount += invoice.rounded_converted_total_price;\r\n        invoice.isGrouped = true;\r\n\r\n        if (k === this.invoicesCompanyDoubles.find(p => p.company === invoice.supplier).count) {\r\n          invoice.isLast = true;\r\n          invoice.totalAmount = amount;\r\n          k = 1;\r\n          amount = 0;\r\n        } else {\r\n          k++;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Payments Checker</h1>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-replay\"\r\n        label=\"Upload Again\"\r\n        (click)=\"uploadAgain()\"\r\n        *ngIf=\"isFilesLoading\"\r\n      >\r\n      </button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\" *ngIf=\"!isFilesLoading\">\r\n    <div class=\"form-upload\">\r\n      <div class=\"card\">\r\n        <div class=\"card-body\">\r\n          <form [formGroup]=\"searchForm\">\r\n            <div class=\"row\">\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Creation From</label>\r\n                  <p-calendar\r\n                    formControlName=\"invoice_date_after\"\r\n                    [showButtonBar]=\"true\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-3\">\r\n                <div class=\"form-group\">\r\n                  <label>Creation To</label>\r\n                  <p-calendar\r\n                    formControlName=\"invoice_date_before\"\r\n                    [showButtonBar]=\"true\"\r\n                    dateFormat=\"dd/mm/yy\"\r\n                    [readonlyInput]=\"true\"\r\n                  >\r\n                  </p-calendar>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </form>\r\n\r\n\r\n          <label class=\"drop-area\" (dragover)=\"onDragOver($event)\" (drop)=\"onDrop($event)\">\r\n            <div class=\"drop-area-placeholder\"><span>Select files</span> or drag and drop it here</div>\r\n            <input\r\n              accept=\"text/xml\"\r\n              #addFileInput\r\n              type=\"file\"\r\n              multiple=\"multiple\"\r\n              hidden\r\n              (change)=\"setFiles(addFileInput.files)\"\r\n            >\r\n          </label>\r\n\r\n          <div *ngIf=\"!isLoadForm\">\r\n            <div class=\"upload-header\" *ngIf=\"files.length > 0\">\r\n              <h4>Added Files:</h4>\r\n              <button pButton type=\"button\" icon=\"pi pi-angle-double-right\" label=\"Generate\"\r\n                      (click)=\"generate()\"></button>\r\n            </div>\r\n            <div class=\"files-list\">\r\n              <div class=\"file\" *ngFor=\"let file of files; let idx = index\">\r\n                {{idx + 1}}. {{file.name}}\r\n\r\n                <button\r\n                  pButton\r\n                  class=\"p-button-danger\"\r\n                  placement=\"bottom\"\r\n                  ngbTooltip=\"delete\"\r\n                  (click)=\"removeFile(file)\"\r\n                >\r\n                  <i class=\"pi pi-times\"></i>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"loading\" *ngIf=\"isLoadForm\">\r\n            <h5>In The Process of Forming</h5>\r\n            <i class=\"pi pi-spin pi-spinner\"></i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"table\" *ngIf=\"isFilesLoading\">\r\n    <div class=\"table-head\">\r\n      <h3>Entries ({{occurrences.length}})</h3>\r\n      <!--      <button class=\"btn btn-primary\" *ngIf=\"selectedOccurrence\" (click)=\"splitIntoParts()\">Disband</button>-->\r\n\r\n      <button pButton type=\"button\" icon=\"pi pi-tags\" label=\"Disband\" [disabled]=\"!selectedOccurrence\"\r\n              (click)=\"splitIntoParts()\"></button>\r\n    </div>\r\n\r\n    <div class=\"page__card\">\r\n      <p-table #dt [value]=\"occurrences\" scrollHeight=\"calc(100vh - 335px)\" class=\"table\"\r\n               selectionMode=\"single\" [scrollable]=\"occurrences.length > 0\" [(selection)]=\"selectedOccurrence\">\r\n\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 5%\">#</th>\r\n            <th class=\"text-center\" style=\"width: 12%\" pSortableColumn=\"payment_date\">\r\n              Payment Date\r\n              <p-sortIcon field=\"payment_date\">\r\n              </p-sortIcon>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 15%\" pSortableColumn=\"payment_amount\">\r\n              Payment Amount\r\n              <p-sortIcon field=\"payment_amount\">\r\n              </p-sortIcon>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 15%\" pSortableColumn=\"xml_company_name\">\r\n              Payment Supplier\r\n              <p-sortIcon field=\"xml_company_name\">\r\n              </p-sortIcon>\r\n            </th>\r\n            <th class=\"text-center bord\" style=\"width: 10%\" pSortableColumn=\"order_id\">\r\n              Order ID\r\n              <p-sortIcon field=\"order_id\">\r\n              </p-sortIcon>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 10%\" pSortableColumn=\"invoice_id\">\r\n              Invoice ID\r\n              <p-sortIcon field=\"invoice_id\">\r\n              </p-sortIcon>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 10%\" pSortableColumn=\"invoice_invoice_date\">\r\n              Invoice Date\r\n              <p-sortIcon field=\"invoice_invoice_date\">\r\n              </p-sortIcon>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 15%\" pSortableColumn=\"invoice_total_price\">\r\n              Invoice Total Price\r\n              <p-sortIcon field=\"invoice_total_price\">\r\n              </p-sortIcon>\r\n            </th>\r\n            <th class=\"text-center bord\" style=\"width: 15%\" pSortableColumn=\"invoice_supplier_name\">\r\n              Invoice Supplier\r\n              <p-sortIcon field=\"invoice_supplier_name\">\r\n              </p-sortIcon>\r\n            </th>\r\n            <th class=\"text-center\" style=\"width: 8%\">Is it correct</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-occurrence let-i=\"rowIndex\">\r\n          <tr [pSelectableRow]=\"occurrence\" [class.full]=\"occurrence.full_entry || occurrence.completed\"\r\n              [class.no-full]=\"!occurrence.full_entry\">\r\n            <td class=\"text-center\" style=\"width: 5%\">{{i + 1}}</td>\r\n            <td class=\"text-center\" style=\"width: 12%\">{{occurrence.payment_date | date:'dd/MM/yyyy'}}</td>\r\n            <td class=\"text-center\" style=\"width: 15%\">{{occurrence.payment_amount | moneyFormat}} </td>\r\n            <td class=\"text-center\" style=\"width: 15%\">{{occurrence.xml_company_name}}</td>\r\n            <td class=\"text-center bord\" style=\"width: 10%\">{{occurrence.order_id}}</td>\r\n            <td class=\"text-center\" style=\"width: 10%\">{{occurrence.invoice_id}}</td>\r\n            <td class=\"text-center\" style=\"width: 10%\">{{occurrence.invoice_invoice_date | date:'dd/MM/yyyy'}}</td>\r\n            <td class=\"text-center\" style=\"width: 15%\">{{occurrence.invoice_total_price | moneyFormat}} </td>\r\n            <td class=\"text-center bord\" style=\"width: 15%\">{{occurrence.invoice_supplier_name}}</td>\r\n            <td class=\"text-center\" style=\"width: 8%\">\r\n              <input class=\"correct\" type=\"checkbox\" [(ngModel)]=\"occurrence.completed\" (ngModelChange)=\"update()\">\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\" let-columns>\r\n          <tr *ngIf=\"occurrences.length === 0\">\r\n            <td class=\"text-center p-3\" [attr.colspan]=\"10\">\r\n              <span>No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n\r\n    <div class=\"tables mt-5\">\r\n      <div class=\"tables__inner\">\r\n        <div class=\"table-no\">\r\n          <div class=\"table-header\">\r\n            <h3>Payments with no matches found ({{payments.length}})</h3>\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-window-maximize\"\r\n                label=\"Grouping\"\r\n                *ngIf=\"!isGroupedPayments\"\r\n                (click)=\"groupingPayments()\"\r\n              ></button>\r\n\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-window-minimize\"\r\n                label=\"Ungrouping\"\r\n                *ngIf=\"isGroupedPayments\"\r\n                (click)=\"unGroupingPayments()\"\r\n              ></button>\r\n\r\n              <button\r\n                pButton\r\n                class=\"ml-2 p-button-danger\"\r\n                type=\"button\"\r\n                icon=\"pi pi-times\"\r\n                label=\"Exclude\"\r\n                [disabled]=\"!selectedPayment\"\r\n                (click)=\"excludePayment()\"\r\n              ></button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"page__card\">\r\n            <p-table #dtp dataKey=\"id\" [value]=\"isGroupedPayments ? groupedPayments : payments\"\r\n                     scrollHeight=\"calc(100vh - 335px)\" class=\"table\"\r\n                     selectionMode=\"single\" [scrollable]=\"payments.length > 0\" [(selection)]=\"selectedPayment\">\r\n\r\n              <ng-template pTemplate=\"header\">\r\n                <tr [class.disabled]=\"isGroupedPayments\" #trPayment>\r\n                  <th class=\"text-center\" style=\"width: 9%\">#</th>\r\n                  <th class=\"text-center\"\r\n                      style=\"width: 16%\"\r\n                      pSortableColumn=\"id\"\r\n                  >\r\n                    Payment ID\r\n                    <p-sortIcon field=\"id\" *ngIf=\"!isGroupedPayments\">\r\n                    </p-sortIcon>\r\n                  </th>\r\n                  <th class=\"text-center\" style=\"width: 25%\" pSortableColumn=\"date\">\r\n                    Payment Date\r\n                    <p-sortIcon field=\"date\" *ngIf=\"!isGroupedPayments\">\r\n                    </p-sortIcon>\r\n                  </th>\r\n                  <th class=\"text-center\" style=\"width: 25%\" pSortableColumn=\"amount\">\r\n                    Payment Amount\r\n                    <p-sortIcon field=\"amount\" *ngIf=\"!isGroupedPayments\">\r\n                    </p-sortIcon>\r\n                  </th>\r\n                  <th class=\"text-center\" style=\"width: 25%\" pSortableColumn=\"company_name\">\r\n                    Payment Supplier\r\n                    <p-sortIcon field=\"company_name\" *ngIf=\"!isGroupedPayments\">\r\n                    </p-sortIcon>\r\n                  </th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-payment let-i=\"rowIndex\">\r\n                <tr [pSelectableRow]=\"payment\"\r\n                    [class.is-first]=\"payment.isFirst\"\r\n                    [class.is-grouped]=\"payment.isGrouped\"\r\n                >\r\n                  <td class=\"text-center\" style=\"width: 9%\">{{i + 1}}</td>\r\n                  <td class=\"text-center\" style=\"width: 16%\">{{payment.id}}</td>\r\n                  <td class=\"text-center\" style=\"width: 25%\">{{payment.date | date:'dd/MM/yyyy'}}</td>\r\n                  <td class=\"text-center\" style=\"width: 25%\">{{payment.amount | moneyFormat}} </td>\r\n                  <td class=\"text-center\" style=\"width: 25%\">{{payment.company_name}}</td>\r\n                </tr>\r\n                <tr class=\"weight\" *ngIf=\"payment.isLast\" [class.is-grouped]=\"payment.isGrouped\"\r\n                    [class.is-last]=\"payment.isLast\">\r\n                  <td style=\"width: 9%\"></td>\r\n                  <td style=\"width: 16%\"></td>\r\n                  <td style=\"width: 25%\" class=\"text-center\">Total amount:</td>\r\n                  <td style=\"width: 25%\" class=\"text-center\">{{payment.totalAmount | moneyFormat}} </td>\r\n                  <td style=\"width: 25%\"></td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\" let-columns>\r\n                <tr *ngIf=\"payments.length === 0\">\r\n                  <td class=\"text-center p-3\" [attr.colspan]=\"5\">\r\n                    <span>No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n        </div>\r\n        <button class=\"btn btn-primary confirm\" *ngIf=\"selectedInvoice && selectedPayment\" (click)=\"join()\">Confirm\r\n        </button>\r\n        <div class=\"table-no\">\r\n          <div class=\"table-header\">\r\n            <h3>Invoices with no matches found ({{invoices.length}})</h3>\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-window-maximize\"\r\n                label=\"Grouping\"\r\n                *ngIf=\"!isGroupedInvoices\"\r\n                (click)=\"groupingInvoices()\"\r\n              ></button>\r\n\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-window-minimize\"\r\n                label=\"Ungrouping\"\r\n                *ngIf=\"isGroupedInvoices\"\r\n                (click)=\"unGroupingInvoices()\"\r\n              ></button>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"page__card\">\r\n            <p-table dataKey=\"id\" #dts [value]=\"isGroupedInvoices ? groupedInvoices : invoices\"\r\n                     scrollHeight=\"calc(100vh - 335px)\" class=\"table\"\r\n                     selectionMode=\"single\" [scrollable]=\"invoices.length > 0\" [(selection)]=\"selectedInvoice\">\r\n\r\n              <ng-template pTemplate=\"header\">\r\n                <tr #trInvoices [class.disabled]=\"isGroupedInvoices\">\r\n                  <th class=\"text-center\" style=\"width: 9%\">#</th>\r\n                  <th class=\"text-center\" style=\"width: 16%\" pSortableColumn=\"id\">\r\n                    Invoice ID\r\n                    <p-sortIcon field=\"id\" *ngIf=\"!isGroupedInvoices\">\r\n                    </p-sortIcon>\r\n                  </th>\r\n                  <th class=\"text-center\" style=\"width: 25%\" pSortableColumn=\"invoice_date\">\r\n                    Invoice Date\r\n                    <p-sortIcon field=\"invoice_date\" *ngIf=\"!isGroupedInvoices\">\r\n                    </p-sortIcon>\r\n                  </th>\r\n                  <th class=\"text-center\" style=\"width: 25%\" pSortableColumn=\"rounded_converted_total_price\">\r\n                    Invoice Total Price\r\n                    <p-sortIcon field=\"total_price\" *ngIf=\"!isGroupedInvoices\">\r\n                    </p-sortIcon>\r\n                  </th>\r\n                  <th class=\"text-center\" style=\"width: 25%\" pSortableColumn=\"supplier\">\r\n                    Invoice Supplier\r\n                    <p-sortIcon field=\"supplier\" *ngIf=\"!isGroupedInvoices\">\r\n                    </p-sortIcon>\r\n                  </th>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n                <tr\r\n                  [pSelectableRow]=\"invoice\"\r\n                  [class.is-first]=\"invoice.isFirst\"\r\n                  [class.is-grouped]=\"invoice.isGrouped\"\r\n                >\r\n                  <td class=\"text-center\" style=\"width: 9%\">{{i + 1}}</td>\r\n                  <td class=\"text-center\" style=\"width: 16%\">{{invoice.id}}</td>\r\n                  <td class=\"text-center\" style=\"width: 25%\">{{invoice.invoice_date | date:'dd/MM/yyyy'}}</td>\r\n                  <td class=\"text-center\" style=\"width: 25%\">{{invoice.rounded_converted_total_price | moneyFormat}}\r\n                    \r\n                  </td>\r\n                  <td class=\"text-center\" style=\"width: 25%\">{{invoice.supplier}}</td>\r\n                </tr>\r\n                <tr class=\"weight\" *ngIf=\"invoice.isLast\" [class.is-grouped]=\"invoice.isGrouped\"\r\n                    [class.is-last]=\"invoice.isLast\">\r\n                  <td style=\"width: 9%\"></td>\r\n                  <td style=\"width: 16%\"></td>\r\n                  <td style=\"width: 25%\" class=\"text-center\">Total amount:</td>\r\n                  <td style=\"width: 25%\" class=\"text-center\">{{invoice.totalAmount | moneyFormat}} </td>\r\n                  <td style=\"width: 25%\"></td>\r\n                </tr>\r\n              </ng-template>\r\n              <ng-template pTemplate=\"emptymessage\" let-columns>\r\n                <tr *ngIf=\"invoices.length === 0\">\r\n                  <td class=\"text-center p-3\" [attr.colspan]=\"5\">\r\n                    <span>No Records Found</span>\r\n                  </td>\r\n                </tr>\r\n              </ng-template>\r\n            </p-table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"exclude-payments mt-5\">\r\n      <div class=\"table-header\">\r\n        <h3>Excluded Payments</h3>\r\n\r\n        <button\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-reply\"\r\n          label=\"Restore\"\r\n          [disabled]=\"!selectedExcludePayment\"\r\n          (click)=\"restorePayment()\"\r\n        ></button>\r\n      </div>\r\n\r\n      <div class=\"page__card\">\r\n        <p-table dataKey=\"id\" #dt [value]=\"excludePayments\" scrollHeight=\"calc(100vh - 335px)\" class=\"table\"\r\n                 selectionMode=\"single\" [scrollable]=\"excludePayments.length > 0\"\r\n                 [(selection)]=\"selectedExcludePayment\">\r\n\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th class=\"text-center\" style=\"width: 9%\">#</th>\r\n              <th style=\"width: 91%\" pSortableColumn=\"name\">\r\n                Name\r\n                <p-sortIcon field=\"name\">\r\n                </p-sortIcon>\r\n              </th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-excludePayment let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"excludePayment\">\r\n              <td class=\"text-center\" style=\"width: 9%\">{{i + 1}}</td>\r\n              <td style=\"width: 91%\">{{excludePayment.name}}</td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\" let-columns>\r\n            <tr *ngIf=\"excludePayments.length === 0\">\r\n              <td class=\"text-center p-3\" [attr.colspan]=\"2\">\r\n                <span>No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {PurchasingCategoryService} from \"../../../purchasing/services/purchasing-category.service\";\r\nimport {TreeService} from \"@shared/services/tree.service\";\r\nimport {PurchaseCategory} from \"../../../purchasing/models/purchase-category\";\r\nimport {TreeNode} from \"primeng/api\";\r\nimport {cloneDeep} from 'lodash-es';\r\n\r\n@Component({\r\n  selector: 'pek-reports-purchase-categories-accounting-number',\r\n  templateUrl: './reports-purchase-categories-accounting-number.component.html',\r\n  styleUrls: ['./reports-purchase-categories-accounting-number.component.scss']\r\n})\r\nexport class ReportsPurchaseCategoriesAccountingNumberComponent implements OnInit {\r\n\r\n  isLoading = true;\r\n  purchasingCategories: PurchaseCategory[] = [];\r\n  selectedNode: TreeNode<PurchaseCategory>;\r\n  categoriesTree: TreeNode<PurchaseCategory>[] = [];\r\n\r\n  expanseMap = {};\r\n\r\n  isSavingCategory = false;\r\n\r\n  constructor(\r\n    private purchasingCategoryService: PurchasingCategoryService,\r\n    private readonly treeService: TreeService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getPurchasingCategory();\r\n  }\r\n\r\n  getPurchasingCategory() {\r\n    this.purchasingCategoryService.getAll().subscribe(categories => {\r\n      this.purchasingCategories = categories;\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.categoriesTree) {\r\n      this.treeService.mapExpansion(this.categoriesTree, this.expanseMap);\r\n    }\r\n\r\n    this.categoriesTree = this.treeService.createTree(this.purchasingCategories, this.expanseMap);\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  onEditAccountingNumber() {\r\n    this.purchasingCategoryService.editAccountingNumberCategory(this.selectedNode.data).subscribe(category => {\r\n      if (category) {\r\n        const index = this.purchasingCategories.findIndex(s => s.id === category.id);\r\n        this.purchasingCategories[index] = category;\r\n        this.selectedNode = null;\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Purchase Categories Accounting Number</h1>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          #dt\r\n          [value]=\"categoriesTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedNode\"\r\n          [scrollable]=\"true\"\r\n          scrollHeight=\"calc(100vh - 19.2rem)\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-down\"\r\n                label=\"Expand All\"\r\n                class=\"ml-auto mr-2\"\r\n                (click)=\"onExpandAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-up\"\r\n                label=\"Collapse All\"\r\n                (click)=\"onCollapseAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"ml-2\"\r\n                icon=\"pi pi-pencil\"\r\n                label=\"Edit Accounting Number\"\r\n                (click)=\"onEditAccountingNumber()\"\r\n                [disabled]=\"!selectedNode\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 30%; padding-left: 48px\">Name</th>\r\n              <th style=\"width: 30%\">Description</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Material</th>\r\n              <th style=\"width: 20%\" class=\"text-center\">Accounting Number</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr\r\n              [ttRow]=\"rowNode\"\r\n              [ttSelectableRow]=\"rowNode\"\r\n            >\r\n              <td style=\"width: 30%\">\r\n                <div class=\"table-toggle\">\r\n                  <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                  <span>{{rowData.name}}</span>\r\n                </div>\r\n              </td>\r\n              <td style=\"width: 30%\">\r\n                {{rowData.description}}\r\n              </td>\r\n              <td style=\"width: 20%\" class=\"text-center\">\r\n                {{rowData.is_material ? 'Tangible' : 'Intangible'}}\r\n              </td>\r\n              <td style=\"width: 20%\" class=\"text-center\">\r\n                {{rowData.accounting_number}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {Invoice} from \"../../../procurement/models/invoice\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\nimport {ActivatedRoute, Router} from \"@angular/router\";\r\nimport {ServicesService} from \"../../services/services.service\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\r\nimport {ServiceInvoiceService} from \"@shared/services/service-invoice.service\";\r\nimport {ServiceInvoiceProduct} from \"../../models/service\";\r\nimport {filter, finalize, tap} from \"rxjs/operators\";\r\nimport {MenuItem} from \"primeng/api\";\r\n\r\n@Component({\r\n  selector: 'pek-reports-service-invoice-page',\r\n  templateUrl: './reports-service-invoice-page.component.html',\r\n  styleUrls: ['./reports-service-invoice-page.component.scss']\r\n})\r\nexport class ReportsServiceInvoicePageComponent implements OnInit {\r\n  isCompletingOrCancellation = false;\r\n\r\n  isDeleteBinding = false;\r\n  isBinding = false;\r\n\r\n  selectedBindInvoice: Invoice;\r\n  isLoadingBindedInvoices = false;\r\n\r\n  isPureTotalChanged = false;\r\n\r\n  invoiceServiceMenuItems: MenuItem[] = [{\r\n    label: 'Selected Invoice Service',\r\n    items: [\r\n      {\r\n        label: 'Edit',\r\n        icon: 'pi pi-pencil',\r\n        command: () => this.editInvoiceService()\r\n      },\r\n      {\r\n        label: 'Remove',\r\n        icon: 'pi pi-trash',\r\n        command: () => this.removeInvoiceService()\r\n      }\r\n    ]\r\n  }];\r\n\r\n  readonly deletion = new Set<number>();\r\n  readonly addition = new Set<number>();\r\n\r\n  isLoading = true;\r\n  isViewingMode = false;\r\n\r\n  files: any[] = [];\r\n  selectedFile: any;\r\n  isLoadingFiles = true;\r\n\r\n  invoiceServices: ServiceInvoiceProduct[];\r\n\r\n  invoiceId = this.route.snapshot.paramMap.get('id');\r\n  isLoadingRelated = true;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    supplier_serial_number: [''],\r\n    supplier: [{value: null}, Validators.required],\r\n    supplier_total_price: [{value: 0, disabled: false}, Validators.required],\r\n    total_price: [{value: 0, disabled: this.isViewingMode}],\r\n    pure_total_price: [{value: 0, disabled: false}],\r\n    id: [this.invoiceId, Validators.required],\r\n    currency: [null, Validators.required],\r\n    system_creation_date: [null],\r\n    invoice_date: [null],\r\n    items_reception_date: [null],\r\n    due_date: [null],\r\n    invoice_reception_date: [null],\r\n    proformas: [[]],\r\n    exchange_rate: [1.0],\r\n  });\r\n\r\n  invoice: Invoice;\r\n  related: Invoice[] = [];\r\n\r\n  isSaving = false;\r\n  isLoadingServices = false;\r\n  selectedService: any;\r\n\r\n  constructor(\r\n    private modalService: ModalService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private servicesService: ServicesService,\r\n    private adapterService: AdapterService,\r\n    private invoiceService: ServiceInvoiceService,\r\n    private readonly fb: FormBuilder\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getInvoice();\r\n    this.getFiles();\r\n    this.getServices();\r\n  }\r\n\r\n  getInvoice() {\r\n    this.isPureTotalChanged = false;\r\n    this.isLoading = true;\r\n    this.isLoadingBindedInvoices = true;\r\n    this.selectedBindInvoice = null;\r\n\r\n    if (this.invoice) {\r\n      this.invoice.to_invoices = [];\r\n    }\r\n\r\n    this.invoiceService.getById(+this.invoiceId).subscribe(res => {\r\n      this.invoice = res;\r\n\r\n      if (res.supplier) {\r\n        this.invoiceService.get([{name: 'supplier', value: res.supplier.id}, {\r\n          name: 'is_proforma',\r\n          value: !res.is_proforma\r\n        }]).subscribe(related => {\r\n          this.related = related;\r\n          this.isLoadingRelated = false;\r\n        });\r\n      } else {\r\n        this.isLoadingRelated = false;\r\n      }\r\n\r\n      this.invoice.total_price = Math.round(this.invoice.total_price * 100) / 100;\r\n      if (!this.invoice.order) {\r\n        this.form.get('supplier').enable();\r\n      }\r\n\r\n      if (this.invoice.invoice_date != null) {\r\n        this.invoice.invoice_date = new Date(this.invoice.invoice_date);\r\n      }\r\n      if (this.invoice.system_creation_date != null) {\r\n        this.invoice.system_creation_date = new Date(this.invoice.system_creation_date);\r\n      }\r\n      if (this.invoice.due_date != null) {\r\n        this.invoice.due_date = new Date(this.invoice.due_date);\r\n      }\r\n      if (this.invoice.invoice_reception_date != null) {\r\n        this.invoice.invoice_reception_date = new Date(this.invoice.invoice_reception_date);\r\n      }\r\n      if (this.invoice.items_reception_date != null) {\r\n        this.invoice.items_reception_date = new Date(this.invoice.items_reception_date);\r\n      }\r\n\r\n\r\n      this.form.patchValue(this.invoice);\r\n\r\n      if (this.invoice.supplier) {\r\n        this.form.get('supplier').patchValue(this.invoice.supplier.id);\r\n      }\r\n      if (this.invoice.currency) {\r\n        this.form.get('currency').patchValue(this.invoice.currency.code);\r\n      }\r\n\r\n      if (this.invoice.proformas) {\r\n        this.form.get('proformas').patchValue(this.invoice.proformas.map(x => x.id));\r\n      }\r\n\r\n      this.isLoading = false;\r\n      this.isLoadingBindedInvoices = false;\r\n    });\r\n  }\r\n\r\n  getServices() {\r\n    this.selectedService = null;\r\n    this.isLoadingServices = true;\r\n    this.invoiceServices = [];\r\n    this.servicesService.get([{name: 'service_invoice', value: this.invoiceId}]).subscribe(services => {\r\n      // @ts-ignore\r\n      this.invoiceServices = services;\r\n      if (this.invoice?.pure_total_price) {\r\n        this.form.get('pure_total_price').setValue((this.invoice.pure_total_price).toFixed(2));\r\n      }\r\n      this.isLoadingServices = false;\r\n    });\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.form.get('supplier').patchValue(id)\r\n  }\r\n\r\n  changeCurrency(value: any) {\r\n    this.form.get('currency').patchValue(value?.code ?? null);\r\n\r\n    this.invoice.currency.symbol = value?.symbol ?? 'None'\r\n\r\n    if (this.form.get('currency').value === 'EUR') {\r\n      this.form.get('exchange_rate').setValue(1);\r\n      this.form.get('pure_total_price').setValue(this.form.get('pure_total_price').value.toFixed(2))\r\n    }\r\n  }\r\n\r\n  calculatePureTotalPrice() {\r\n    let sum = 0;\r\n\r\n    this.invoiceServices.forEach(service => {\r\n      const price = parseFloat(service.pure_price);\r\n      const newPrice = price - (price * parseFloat(service.discount) / 100);\r\n      // newPrice = newPrice + (newPrice / 100 * service.ddv);\r\n      sum += newPrice;\r\n    });\r\n\r\n    sum = parseFloat(sum.toFixed(3));\r\n    return sum;\r\n  }\r\n\r\n  saveInvoice() {\r\n    if (this.form.valid) {\r\n      this.isSaving = true;\r\n      const sendData = this.form.value;\r\n      sendData.system_creation_date = this.adapterService.dateAdapter(this.form.value.system_creation_date);\r\n      sendData.due_date = this.adapterService.dateAdapter(this.form.value.due_date);\r\n      sendData.invoice_reception_date = this.adapterService.dateAdapter(this.form.value.invoice_reception_date);\r\n      sendData.invoice_date = this.adapterService.dateAdapter(this.form.value.invoice_date);\r\n\r\n      if (this.isPureTotalChanged && this.invoice.pure_total_price !== this.form.get('pure_total_price').value) {\r\n        sendData.manual_pure_total_price = this.form.get('pure_total_price').value;\r\n      }\r\n\r\n      this.invoiceService.updatePartly(sendData).pipe(\r\n        finalize(() => this.isSaving = false)\r\n      )\r\n        .subscribe(() => {\r\n          this.getInvoice();\r\n        });\r\n    }\r\n  }\r\n\r\n  changeRate() {\r\n    // this.form.get('pure_total_price').setValue((this.invoice.pure_total_price * this.form.get('exchange_rate').value).toFixed(2));\r\n  }\r\n\r\n  getFileName(name) {\r\n    const nameArr = name.split('/');\r\n    return nameArr[nameArr.length - 1];\r\n  }\r\n\r\n  onRemoveFile(id: number) {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.deletion.add(id);\r\n\r\n        this.invoiceService.removeFile(id).pipe(\r\n          finalize(() => this.deletion.delete(id))\r\n        ).subscribe(() => {\r\n          const index = this.files.findIndex(f => f.id === id);\r\n          this.files.splice(index, 1);\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  onDownloadFile(file: any) {\r\n    this.addition.add(file.id);\r\n    this.invoiceService.downloadFile(file.id).pipe(\r\n      finalize(() => this.addition.delete(file.id))\r\n    ).subscribe(response => {\r\n      const filename = this.getFileName(file.file);\r\n      this.adapterService.downloadFile(filename, response);\r\n    });\r\n  }\r\n\r\n  openInvoiceFilesModal() {\r\n    this.invoiceService.openInvoiceFilesModal(+this.invoiceId).subscribe(confirm => {\r\n      this.getFiles();\r\n    });\r\n  }\r\n\r\n  getFiles() {\r\n    this.files = [];\r\n    this.isLoadingFiles = true;\r\n\r\n    this.invoiceService.getFiles(+this.invoiceId).subscribe(files => {\r\n      this.files = files;\r\n      this.isLoadingFiles = false;\r\n    });\r\n  }\r\n\r\n  createInvoiceService() {\r\n    this.servicesService.createEditServiceModal('create', +this.invoiceId, 'service').subscribe(service => {\r\n      if (service) {\r\n        this.getServices();\r\n        this.getInvoice();\r\n      }\r\n    })\r\n  }\r\n\r\n  editInvoiceService() {\r\n    this.servicesService.createEditServiceModal('edit', +this.invoiceId, 'service', this.selectedService).subscribe(service => {\r\n      if (service) {\r\n        this.getServices();\r\n        this.getInvoice();\r\n      }\r\n    })\r\n  }\r\n\r\n  private removeInvoiceService() {\r\n    this.modalService.confirm('danger').subscribe(confirm => {\r\n      if (confirm) {\r\n        this.servicesService.delete(this.selectedService.id).subscribe(() => {\r\n          this.getServices();\r\n          this.getInvoice();\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  cancellation() {\r\n    this.modalService.confirm('success').pipe(\r\n      filter(Boolean),\r\n    ).subscribe(() => {\r\n      this.isCompletingOrCancellation = true;\r\n      const send = {\r\n        id: this.invoice.id,\r\n        completed: false,\r\n      };\r\n\r\n      this.invoiceService.cancellation(send).pipe(\r\n        finalize(() => this.isCompletingOrCancellation = false),\r\n        tap(() => this.invoice.completed = false),\r\n        // tap(() => this.getInvoiceProducts()),\r\n        // tap(() => this.getServices()),\r\n      ).subscribe();\r\n    })\r\n  }\r\n\r\n  complete() {\r\n    this.modalService.confirm('success').pipe(\r\n      filter(Boolean),\r\n    ).subscribe(() => {\r\n      this.isCompletingOrCancellation = true;\r\n      const send = {id: this.invoice.id, completed: true};\r\n      this.invoiceService.updatePartly(send as Invoice).pipe(\r\n        finalize(() => this.isCompletingOrCancellation = false),\r\n        // tap(() => this.getInvoice()),\r\n        tap(() => this.invoice.completed = true),\r\n        // tap(() => this.getInvoiceProducts()),\r\n        // tap(() => this.getServices()),\r\n      ).subscribe();\r\n    })\r\n  }\r\n\r\n  bindInvoice() {\r\n    this.invoiceService.bindInvoiceModal(this.invoice.is_proforma).subscribe(invoice => {\r\n      if (invoice) {\r\n        this.isBinding = true;\r\n        const invoicesId = [];\r\n        this.invoice.to_invoices.forEach(invoice => {\r\n          invoicesId.push(invoice.id);\r\n        });\r\n\r\n        invoicesId.push(invoice.id);\r\n\r\n        // this.invoice.to_invoices.push(invoiceId);\r\n\r\n        const data = {\r\n          to_invoices: invoicesId,\r\n        };\r\n\r\n        this.invoiceService.bindInvoice(this.invoice.id, data).pipe(\r\n          finalize(() => this.isBinding = false)\r\n        ).subscribe(() => {\r\n          this.getInvoice();\r\n        });\r\n      }\r\n    })\r\n  }\r\n\r\n  deleteBindInvoice() {\r\n    this.modalService.confirm('danger').subscribe(res => {\r\n      if (res) {\r\n        this.isDeleteBinding = true;\r\n        let invoicesId = [];\r\n        this.invoice.to_invoices.forEach(invoice => {\r\n          invoicesId.push(invoice.id);\r\n        });\r\n\r\n        invoicesId = invoicesId.filter(id => id !== this.selectedBindInvoice.id);\r\n\r\n        const data = {\r\n          to_invoices: invoicesId,\r\n        };\r\n\r\n        this.invoiceService.bindInvoice(this.invoice.id, data).pipe(\r\n          finalize(() => this.isDeleteBinding = false)\r\n        ).subscribe(() => {\r\n          this.getInvoice();\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  pureTotalChange() {\r\n    this.isPureTotalChanged = true;\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>\r\n        <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n        Invoice Edit\r\n        <ng-container\r\n          *ngIf=\"invoice?.qc_completed\">(QC Processed)\r\n        </ng-container>\r\n      </h1>\r\n    </div>\r\n    <!--    <div class=\"page__tools\">-->\r\n    <!--      <ng-container [ngSwitch]=\"invoice?.order?.accounting_type\">-->\r\n    <!--        <a *ngSwitchCase=\"3\" [routerLink]=\"'/manufacturing/orders/order/' + invoice?.order?.id\"-->\r\n    <!--           target=\"_blank\"-->\r\n    <!--        >-->\r\n    <!--          <button-->\r\n    <!--            pButton-->\r\n    <!--            type=\"button\"-->\r\n    <!--            icon=\"pi pi-angle-double-right\"-->\r\n    <!--            label=\"Go To Order\"-->\r\n    <!--          ></button>-->\r\n    <!--        </a>-->\r\n    <!--        <a *ngSwitchCase=\"2\" [href]=\"'/outsourcing/chains/order/' + invoice?.order?.id\"-->\r\n    <!--           target=\"_blank\">-->\r\n    <!--          <button-->\r\n    <!--            pButton-->\r\n    <!--            type=\"button\"-->\r\n    <!--            icon=\"pi pi-angle-double-right\"-->\r\n    <!--            label=\"Go To Order\"-->\r\n    <!--          ></button>-->\r\n    <!--        </a>-->\r\n    <!--        <a *ngSwitchCase=\"1\" [href]=\"'procurement/chains/order/' + invoice?.order?.id\"-->\r\n    <!--           target=\"_blank\">-->\r\n    <!--          <button-->\r\n    <!--            pButton-->\r\n    <!--            type=\"button\"-->\r\n    <!--            icon=\"pi pi-angle-double-right\"-->\r\n    <!--            label=\"Go To Order\"-->\r\n    <!--          ></button>-->\r\n    <!--        </a>-->\r\n    <!--      </ng-container>-->\r\n    <!--    </div>-->\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n\r\n  <div class=\"reports-invoice-page\">\r\n\r\n    <h2 class=\"mb-4\">\r\n      <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n      Invoice Info\r\n    </h2>\r\n\r\n    <div class=\"reports-invoice-page__card reports-invoice-page__info mb-4\">\r\n      <form [formGroup]=\"form\" *ngIf=\"!isLoading; else infoLoading\">\r\n        <div class=\"row\">\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>\r\n                Supplier\r\n                <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n                <ng-container *ngIf=\"!invoice?.is_proforma\">Invoice</ng-container>\r\n                Number\r\n              </label>\r\n              <input type=\"text\" pInputText formControlName=\"supplier_serial_number\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>\r\n                Internal\r\n                <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n                <ng-container *ngIf=\"!invoice?.is_proforma\">Invoice</ng-container>\r\n                Number\r\n              </label>\r\n              <input pInputText type=\"text\" *ngIf=\"!invoice?.is_proforma\"\r\n                     value=\"{{invoice?.self_serial_number}}\" disabled>\r\n              <input pInputText type=\"text\" *ngIf=\"invoice?.is_proforma\"\r\n                     value=\"{{invoice?.self_proforma_serial_number}}\" disabled>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>Supplier* </label>\r\n              <pek-company-picker\r\n                [currentCompanyId]=\"form.get('supplier').value\"\r\n                (selectCompany)=\"onSelectCompany($event)\"\r\n              ></pek-company-picker>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\" *ngIf=\"!invoice?.is_proforma\">\r\n            <div class=\"form-group\">\r\n              <label> Relation With Proforma Invoice</label>\r\n              <p-multiSelect\r\n                [disabled]=\"!!(!related.length)\"\r\n                formControlName=\"proformas\"\r\n                [options]=\"related\"\r\n                optionLabel=\"self_proforma_serial_number\"\r\n                optionValue=\"id\"\r\n                placeholder=\"Select Relation\"\r\n                *ngIf=\"!isLoadingRelated else spinner\"\r\n              >\r\n              </p-multiSelect>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label> Total Price*\r\n                <ng-container *ngIf=\"invoice?.currency\">\r\n                  ({{invoice?.currency?.symbol}})\r\n                </ng-container>\r\n              </label>\r\n              <input pInputText formControlName=\"total_price\" type=\"number\" step=\"0.01\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>Pure Total Price\r\n                <ng-container *ngIf=\"invoice?.currency\">\r\n                  ({{invoice?.currency?.symbol}})\r\n                </ng-container>\r\n              </label>\r\n              <input pInputText type=\"number\" step=\"0.01\" formControlName=\"pure_total_price\" (input)=\"pureTotalChange()\">\r\n            </div>\r\n          </div>\r\n          <div class=\"col-6\">\r\n            <div class=\"form-group\">\r\n              <label>Currency</label>\r\n              <pek-currency-picker\r\n                [currency]=\"form.get('currency').value\"\r\n                (valueChange)=\"changeCurrency($event)\"\r\n              ></pek-currency-picker>\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\" *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n            <div class=\"form-group\">\r\n              <label> Exchange Rate</label>\r\n              <input pInputText formControlName=\"exchange_rate\" type=\"number\" step=\"0.0001\"\r\n                     (ngModelChange)=\"changeRate()\">\r\n            </div>\r\n          </div>\r\n\r\n          <div class=\"col-3\" *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n            <div class=\"form-group\">\r\n              <label>Total Price In EUR</label>\r\n              <input\r\n                pInputText\r\n                disabled\r\n                readonly class=\"form-control\" type=\"text\"\r\n                value=\"{{form.get('total_price').value * form.get('exchange_rate').value | moneyFormat}}\"\r\n                step=\"0.01\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <h2 class=\"mt-4\">Dates On Document</h2>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Date</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Due Date</label>\r\n              <p-calendar\r\n                formControlName=\"due_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Invoice Reception Date</label>\r\n              <p-calendar\r\n                formControlName=\"invoice_reception_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n              >\r\n              </p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <h2 class=\"mt-4\">System Date</h2>\r\n\r\n        <div class=\"row\">\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Date*</label>\r\n              <p-calendar\r\n                [showClear]=\"true\"\r\n                formControlName=\"system_creation_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n          <div class=\"col-3\">\r\n            <div class=\"form-group\">\r\n              <label>Items Reception Date</label>\r\n              <p-calendar\r\n                formControlName=\"items_reception_date\"\r\n                dataType=\"date\"\r\n                dateFormat=\"dd/mm/yy\"\r\n                [readonlyInput]=\"true\"\r\n                [showClear]=\"true\"\r\n              ></p-calendar>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"d-flex mt-2\">\r\n          <button\r\n            [disabled]=\"form.invalid\"\r\n            (click)=\"saveInvoice()\"\r\n            class=\"ml-auto\"\r\n            pButton\r\n            type=\"button\"\r\n            label=\"Save\"\r\n            [loading]=\"isSaving\"\r\n          ></button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div class=\"block-header mb-4\">\r\n      <h2>\r\n        <ng-container *ngIf=\"invoice?.is_proforma\">Proforma</ng-container>\r\n        Invoice Services\r\n      </h2>\r\n\r\n      <div class=\"d-flex\">\r\n        <button\r\n          [disabled]=\"isLoadingServices\"\r\n          pButton\r\n          type=\"button\"\r\n          icon=\"pi pi-plus\"\r\n          label=\"New Service\"\r\n          (click)=\"createInvoiceService()\"\r\n          *ngIf=\"!invoice?.completed\"\r\n        ></button>\r\n\r\n        <button\r\n          *ngIf=\"!invoice?.qc_completed && !invoice?.completed\"\r\n          pButton\r\n          class=\"ml-2 mr-2 p-button-success p-button-icon\"\r\n          type=\"button\"\r\n          icon=\"pi pi-check\"\r\n          label=\"Complete\"\r\n          [disabled]=\"invoice?.qc_completed && invoice?.completed\"\r\n          (click)=\"complete()\"\r\n          [loading]=\"isCompletingOrCancellation\"\r\n        ></button>\r\n\r\n        <button\r\n          *ngIf=\"invoice?.completed\"\r\n          pButton\r\n          class=\"mr-2 p-button-danger p-button-icon\"\r\n          type=\"button\"\r\n          icon=\"pi pi-times\"\r\n          label=\"Cancellation\"\r\n          (click)=\"cancellation()\"\r\n          [loading]=\"isCompletingOrCancellation\"\r\n        ></button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page__card mb-4\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #st\r\n          [rows]=\"10\"\r\n          [paginator]=\"invoiceServices.length > 0\"\r\n          [value]=\"invoiceServices\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedService\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <p class=\"subtitle\" *ngIf=\"!selectedService\">Choose the Invoice Service to edit</p>\r\n              <p-menubar\r\n                class=\"ml-auto\"\r\n                [model]=\"invoiceServiceMenuItems\"\r\n                [class.disabled]=\"!selectedService\"></p-menubar>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 45%\">Name</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Price</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Other currency</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">DDV</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Discount</th>\r\n              <th style=\"width: 10%\" class=\"text-center\">Total Price</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"!isViewingMode ? product : null\">\r\n              <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n              <td style=\"width: 45%\">{{product.base_service.name}}</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n                  {{product.pure_price * form.get('exchange_rate').value | moneyFormat}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"form.get('currency').value === 'EUR'\">\r\n                  {{product.pure_price | moneyFormat}}\r\n                </ng-container>\r\n                \r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container\r\n                  *ngIf=\"form.get('currency').value !== 'EUR'\">{{product.pure_price | moneyFormat}} {{invoice?.currency?.symbol}}</ng-container>\r\n              </td>\r\n              <td style=\"width: 10%\" class=\"text-center\">{{product.ddv}}%</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">{{product.discount | number: '1.0'}}%</td>\r\n              <td style=\"width: 10%\" class=\"text-center\">\r\n                <ng-container *ngIf=\"form.get('currency').value !== 'EUR'\">\r\n                  {{product.ddv_discount_price * form.get('exchange_rate').value | moneyFormat}}\r\n                </ng-container>\r\n                <ng-container *ngIf=\"form.get('currency').value === 'EUR'\">\r\n                  {{product.ddv_discount_price | moneyFormat}}\r\n                </ng-container>\r\n                \r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"12\">\r\n                <i *ngIf=\"isLoadingServices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingServices\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"st.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!st.paginator && !isLoadingServices && invoiceServices.length > 0\"\r\n           class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"st.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"block-header mb-4\" *ngIf=\"!invoice?.is_proforma\">\r\n      <h2>Binded Invoices</h2>\r\n\r\n      <div class=\"d-flex\">\r\n        <button\r\n          *ngIf=\"!invoice?.completed\"\r\n          pButton type=\"button\"\r\n          icon=\"pi pi-plus\"\r\n          class=\"ml-auto p-button-icon\"\r\n          label=\"Bind Invoice\"\r\n          [disabled]=\"isLoadingBindedInvoices\"\r\n          (click)=\"bindInvoice()\"\r\n          [loading]=\"isBinding\"\r\n        >\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"page__card mb-4\" *ngIf=\"!invoice?.is_proforma\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #bs\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"invoice?.to_invoices?.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedBindInvoice\"\r\n          [value]=\"invoice?.to_invoices ?? []\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-times\"\r\n                class=\"ml-auto p-button-danger p-button-icon\"\r\n                label=\"Delete Bind Invoice\"\r\n                [disabled]=\"!selectedBindInvoice || invoice?.completed\"\r\n                [loading]=\"isDeleteBinding\"\r\n                (click)=\"deleteBindInvoice()\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n              <th style=\"width: 45%\" class=\"text-center\">ID</th>\r\n              <th style=\"width: 50%\" class=\"text-center\">Self Serial Number</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-invoice let-i=\"rowIndex\">\r\n            <tr [pSelectableRow]=\"!isViewingMode ? invoice : null\">\r\n              <td style=\"width: 5%\" class=\"text-center\">{{i + 1}}</td>\r\n              <td style=\"width: 45%\" class=\"text-center\">{{invoice.id}}</td>\r\n              <td style=\"width: 55%\" class=\"text-center\">{{invoice.self_serial_number}}</td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"10\">\r\n                <i *ngIf=\"isLoadingBindedInvoices\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingBindedInvoices\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"bs.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!bs.paginator && !isLoadingBindedInvoices && invoice?.to_invoices.length > 0\"\r\n           class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"bs.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n\r\n    <h2 class=\"mb-4\">Files</h2>\r\n\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-table\r\n          #fs\r\n          selectionMode=\"single\"\r\n          scrollHeight=\"calc(100vh - 18.8rem)\"\r\n          [scrollable]=\"true\"\r\n          [paginator]=\"files.length > 0\"\r\n          [rows]=\"10\"\r\n          [(selection)]=\"selectedFile\"\r\n          [value]=\"files\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton type=\"button\"\r\n                icon=\"pi pi-plus\"\r\n                class=\"ml-auto\"\r\n                label=\"Add File\"\r\n                [disabled]=\"isLoadingFiles\"\r\n                (click)=\"openInvoiceFilesModal()\"\r\n              >\r\n              </button>\r\n            </div>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"width: 5%\" class=\"text-center\">#</th>\r\n              <th style=\"width: 85%\">Name</th>\r\n              <th style=\"width: 10%;\" class=\"text-center\">Actions</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-file let-rowIndex=\"rowIndex\">\r\n            <tr>\r\n              <td class=\"text-center\">{{rowIndex + 1}}</td>\r\n              <td>\r\n                {{getFileName(file.file)}}\r\n              </td>\r\n              <td class=\"text-center\">\r\n                <div class=\"d-flex justify-content-center\">\r\n                  <button\r\n                    pButton\r\n                    (click)=\"onDownloadFile(file)\"\r\n                    [loading]=\"addition.has(file.id)\"\r\n                    type=\"button\"\r\n                    class=\"p-button-primary p-button-rounded p-button-outlined p-button-rounded_small mr-2\"\r\n                    icon=\"pi pi-download\"\r\n                  ></button>\r\n                  <button\r\n                    pButton\r\n                    (click)=\"onRemoveFile(file.id)\"\r\n                    [loading]=\"deletion.has(file.id)\"\r\n                    type=\"button\"\r\n                    class=\"p-button-danger p-button-rounded p-button-outlined p-button-rounded_small\"\r\n                    icon=\"pi pi-trash\"\r\n                  ></button>\r\n                </div>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"5\">\r\n                <i *ngIf=\"isLoadingFiles\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoadingFiles\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"paginatorright\">\r\n            <p-button\r\n              type=\"button\"\r\n              (click)=\"fs.paginator=false\"\r\n              styleClass=\"p-button-text\"\r\n            >All\r\n            </p-button>\r\n          </ng-template>\r\n        </p-table>\r\n      </div>\r\n      <div *ngIf=\"!fs.paginator && !isLoadingFiles && files.length > 0\" class=\"paginator-return-pagination\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"fs.paginator=true\"\r\n          styleClass=\"p-button-text\"\r\n        >\r\n          Return pagination\r\n        </p-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<ng-template #infoLoading>\r\n  <div class=\"info-loading\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n\r\n<ng-template #spinner>\r\n  <div class=\"spinner-input\">\r\n    <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n  </div>\r\n</ng-template>\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {UntilDestroy} from '@ngneat/until-destroy';\r\nimport {Paginator} from 'primeng/paginator';\r\nimport {filter} from 'rxjs/operators';\r\nimport {Technology} from \"../../../product-structure/models/technology\";\r\nimport {TechnologyService} from \"../../../product-structure/services/technology.service\";\r\n\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-technologies-accounting-number',\r\n  templateUrl: './reports-technologies-accounting-number.component.html',\r\n  styleUrls: ['./reports-technologies-accounting-number.component.scss']\r\n})\r\nexport class ReportsTechnologiesAccountingNumberComponent implements OnInit {\r\n\r\n  @ViewChild('paginator') paginator: Paginator;\r\n\r\n  technologiesCount = 0;\r\n  isStartFirstPage = false;\r\n\r\n  selectedTechnology: Technology;\r\n\r\n  isLoading = true;\r\n  technologies: Technology[] = [];\r\n\r\n\r\n  constructor(\r\n    private technologiesService: TechnologyService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getTechnologies();\r\n  }\r\n\r\n  getTechnologies() {\r\n    this.technologiesService.get().subscribe(technologies => {\r\n      this.technologies = technologies;\r\n      this.isLoading = false;\r\n    })\r\n  }\r\n\r\n  onEditTechnologyAccountingNumber() {\r\n    this.technologiesService.editTechnologyAccountingNumber(this.selectedTechnology).pipe(\r\n      filter(technology => !!technology)\r\n    ).subscribe(technology => {\r\n      const index = this.technologies.findIndex(t => t.id === technology.id);\r\n      this.technologies[index].accounting_number = technology.accounting_number;\r\n    });\r\n  }\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Technologies Accounting Number</h1>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <div class=\"edit-button\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-pencil\"\r\n        label=\"Edit Accounting Number\"\r\n        (click)=\"onEditTechnologyAccountingNumber()\"\r\n        [disabled]=\"!selectedTechnology\"\r\n      >\r\n      </button>\r\n    </div>\r\n    <p-table\r\n      #dt\r\n      selectionMode=\"single\"\r\n      [rows]=\"10\"\r\n      [scrollable]=\"true\"\r\n      [paginator]=\"technologies.length > 0\"\r\n      scrollHeight=\"calc(100vh - 19rem)\"\r\n      [value]=\"technologies\"\r\n      [(selection)]=\"selectedTechnology\"\r\n    >\r\n      <ng-template pTemplate=\"header\">\r\n        <tr>\r\n          <th style=\"width: 5%\" class=\"index-header text-center\">#</th>\r\n          <th style=\"width: 40%\">Name</th>\r\n          <th style=\"width: 40%\">Description</th>\r\n          <th style=\"width: 15%\" class=\"text-center\">Accounting Number</th>\r\n        </tr>\r\n      </ng-template>\r\n\r\n      <ng-template pTemplate=\"body\" let-technology let-i=\"rowIndex\">\r\n        <tr [pSelectableRow]=\"technology\">\r\n          <td class=\"text-center\" style=\"width: 5%\">{{ i + 1}}</td>\r\n          <td style=\"width: 40%\">{{technology.name}}</td>\r\n          <td style=\"width: 40%\">{{technology.description}}</td>\r\n          <td style=\"width: 15%\" class=\"text-center\">{{technology.accounting_number}}</td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"emptymessage\">\r\n        <tr>\r\n          <td class=\"text-center p-4\" [attr.colspan]=\"4\">\r\n            <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n            <span *ngIf=\"!isLoading\">No Records Found</span>\r\n          </td>\r\n        </tr>\r\n      </ng-template>\r\n      <ng-template pTemplate=\"paginatorright\">\r\n        <p-button\r\n          type=\"button\"\r\n          (click)=\"dt.paginator=false\"\r\n          styleClass=\"p-button-text\"\r\n        >All\r\n        </p-button>\r\n      </ng-template>\r\n    </p-table>\r\n  </div>\r\n  <div *ngIf=\"!dt.paginator && !isLoading && technologies.length > 0\" class=\"paginator-return-pagination\">\r\n    <p-button\r\n      type=\"button\"\r\n      (click)=\"dt.paginator=true\"\r\n      styleClass=\"p-button-text\"\r\n    >\r\n      Return pagination\r\n    </p-button>\r\n  </div>\r\n</div>\r\n\r\n","import {Component, OnInit, ViewChild} from '@angular/core';\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {FormBuilder, FormGroup} from \"@angular/forms\";\r\nimport {Observable, of, startWith, Subject, switchMap} from \"rxjs\";\r\nimport {BalanceProduct} from \"../../models/accounting-product\";\r\nimport {debounceTime, distinctUntilChanged, filter, tap} from \"rxjs/operators\";\r\nimport {UntilDestroy, untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {ColumnFilterService} from \"@shared/services/column-filter.service\";\r\nimport {AccountingProductsService} from \"../../services/accounting-products.service\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {Table} from \"primeng/table\";\r\nimport {\r\n  MultiProductCategoriesPickerComponent\r\n} from \"@shared/pickers/multi-product-categories-picker/multi-product-categories-picker.component\";\r\n\r\n@UntilDestroy()\r\n@Component({\r\n  selector: 'pek-reports-warehouse-balance',\r\n  templateUrl: './reports-warehouse-balance.component.html',\r\n  styleUrls: ['./reports-warehouse-balance.component.scss']\r\n})\r\nexport class ReportsWarehouseBalanceComponent implements OnInit {\r\n  @ViewChild(MultiProductCategoriesPickerComponent) picker: MultiProductCategoriesPickerComponent;\r\n  @ViewChild('dt') dt: Table;\r\n\r\n  isLoading = false;\r\n  balanceProducts = [];\r\n\r\n  query: QuerySearch[] = [];\r\n  count = 0;\r\n\r\n  supplierTotalCost = 0;\r\n  supplierTotalPrice = 0;\r\n\r\n  isGenerate = false;\r\n  searchForm: FormGroup = this.fb.group({\r\n    name: [null],\r\n    code: [null],\r\n    supplier: [null],\r\n    supplier_category: [null],\r\n    categories: [null],\r\n    system_creation_date_after: [null],\r\n    system_creation_date_before: [null],\r\n    invoice_reception_date_after: [null],\r\n    invoice_reception_date_before: [null],\r\n    items_reception_date_after: [null],\r\n    items_reception_date_before: [null],\r\n    is_paid: [null],\r\n    purchase_categories: [null],\r\n    invoice_date_after: [null],\r\n    invoice_date_before: [null],\r\n    nomenclature_accounting_numbers: [null],\r\n    accounting_type: [null],\r\n    material_or_service: [null],\r\n  });\r\n\r\n  search$: Subject<void> = new Subject<void>();\r\n\r\n\r\n  name$: Subject<string> = new Subject<string>();\r\n  code$: Subject<string> = new Subject<string>();\r\n\r\n  balanceProducts$: Observable<BalanceProduct[]> = this.search$.pipe(\r\n    debounceTime(150),\r\n    tap(() => this.prepareForSearch()),\r\n    switchMap(() => this.query.length ?\r\n      this.accountingProductService.balance(this.query).pipe(\r\n        tap(products => this.countTotals(products)),\r\n        startWith([]),\r\n        untilDestroyed(this),\r\n      ) :\r\n      of([]).pipe(\r\n        tap(() => this.countTotals([]))\r\n      )),\r\n    untilDestroyed(this),\r\n  )\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    public columnFilterService: ColumnFilterService,\r\n    private accountingProductService: AccountingProductsService,\r\n    private readonly adapterService: AdapterService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.name$.pipe(\r\n      debounceTime(250),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.code$.pipe(\r\n      debounceTime(250),\r\n      tap(() => this.search$.next()),\r\n      distinctUntilChanged(),\r\n      untilDestroyed(this)\r\n    ).subscribe();\r\n\r\n    this.balanceProducts$.pipe(\r\n      untilDestroyed(this)\r\n    ).subscribe()\r\n  }\r\n\r\n  clearFilters() {\r\n    this.searchForm.reset();\r\n    this.picker.fillSelected([])\r\n  }\r\n\r\n  countTotals(products: BalanceProduct[]) {\r\n    this.supplierTotalCost = 0;\r\n    this.supplierTotalPrice = 0;\r\n    products.forEach(el => {\r\n      if (el.accepted_by_invoices) {\r\n        el.date = new Date(el?.accepted_by_invoices[0]?.document_creation_date);\r\n        el?.accepted_by_invoices.sort((a, b) => new Date(a.document_creation_date).getTime() - new Date(b.document_creation_date).getTime());\r\n        el?.accepted_by_invoices.forEach(element => {\r\n          this.supplierTotalCost += element.supplier_total_cost;\r\n          // @ts-ignore\r\n          this.supplierTotalPrice += parseFloat(element.supplier_total_price);\r\n        });\r\n      }\r\n    });\r\n\r\n    const newProducts = [];\r\n\r\n    let uid = 0;\r\n\r\n    products.forEach(product => {\r\n      uid++;\r\n\r\n      console.log(product)\r\n\r\n      product.extra_info.forEach(item => {\r\n        newProducts.push({\r\n          id: uid,\r\n          name: product.nomenclature.name,\r\n          code: product.nomenclature.code,\r\n          total_quantity: product.total_quantity,\r\n          category: product.nomenclature.category ? product.nomenclature.category?.unit_of_measure?.symbol : 'Pcs',\r\n          order: item.physical_inventory ? item.physical_inventory : item.order,\r\n          invoice: item.physical_inventory ? '' : item.invoice,\r\n          current_technology: item.current_technology ? item.current_technology : 'None',\r\n          supplier: item.physical_inventory ? 'Physical Inventory' : item?.supplier,\r\n          purchase_category: product.purchase_category?.name ? product.purchase_category?.name : 'None',\r\n          document_creation_date: item.document_creation_date,\r\n          quantity: item.quantity,\r\n          supplier_unit_price: item.supplier_unit_price,\r\n          supplier_total_price: item.supplier_total_price,\r\n          supplier_unit_cost: item.supplier_unit_cost,\r\n          supplier_total_cost: item.supplier_total_cost,\r\n          type: item.physical_inventory ? 'physical-inventory' : product.nomenclature.type,\r\n        })\r\n      })\r\n    })\r\n\r\n    this.count = products.length\r\n\r\n    newProducts.sort(function (a, b) {\r\n      return new Date(b.document_creation_date).getTime() - new Date(a.document_creation_date).getTime() || a.code.localeCompare(b.code);\r\n    });\r\n    this.balanceProducts = newProducts.map(p => p);\r\n    // this.balanceProducts = [...products];\r\n    this.isLoading = false;\r\n  }\r\n\r\n  prepareForSearch() {\r\n\r\n    this.dt._first = 0;\r\n\r\n    this.isLoading = true;\r\n    this.count = 0;\r\n\r\n    this.query = [];\r\n\r\n    for (const key in this.searchForm.controls) {\r\n      if (this.searchForm.controls[key].value !== null && this.searchForm.controls[key].value !== '') {\r\n\r\n        if (this.searchForm.controls[key].value instanceof Date) {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.adapterService.dateAdapter(this.searchForm.controls[key].value)\r\n          });\r\n        } else {\r\n          this.query.push({\r\n            name: key,\r\n            value: this.searchForm.controls[key].value\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  changeAccountingNumber(evt) {\r\n    const value = evt.target.value.replace(/\\s/g, '');\r\n\r\n    if (value) {\r\n      this.searchForm.get('nomenclature_accounting_numbers').patchValue(value);\r\n    } else {\r\n      this.searchForm.get('nomenclature_accounting_numbers').patchValue(null);\r\n    }\r\n\r\n    this.search$.next();\r\n  }\r\n\r\n  getPaidStatus(value) {\r\n    this.searchForm.get('is_paid').patchValue(value);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.searchForm.get('supplier').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategory(id: number) {\r\n    this.searchForm.get('supplier_category').patchValue(id);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectCategories(ids: number[]) {\r\n    this.searchForm.get('categories').patchValue(ids?.join(',') ?? null);\r\n    this.search$.next();\r\n  }\r\n\r\n  onSelectPurchasedCategories(values: any[]) {\r\n    this.searchForm.get('accounting_type').patchValue(null);\r\n    this.searchForm.get('material_or_service').patchValue(null);\r\n\r\n    values.forEach(v => {\r\n      if (v === 'mp') {\r\n        this.searchForm.get('accounting_type').patchValue(1);\r\n      } else if (v === 'ou') {\r\n        this.searchForm.get('material_or_service').patchValue('material');\r\n      } else if (v === 'os') {\r\n        this.searchForm.get('material_or_service').patchValue('service');\r\n      }\r\n    });\r\n\r\n    if (values.find(v => v === 'ou') && values.find(v => v === 'os')) {\r\n      this.searchForm.get('material_or_service').patchValue('both');\r\n    }\r\n\r\n    values = values.filter(v => typeof (v) === 'number');\r\n    this.searchForm.get('purchase_categories').patchValue(values.join(','));\r\n  }\r\n\r\n  exportToExcel() {\r\n    this.isGenerate = true;\r\n    this.accountingProductService.exportToExcel(this.balanceProducts, 'wh-balance').then(() => {\r\n      this.isGenerate = false;\r\n    });\r\n  }\r\n\r\n  onApplyFilter() {\r\n    this.accountingProductService.openFilterModal().pipe(\r\n      filter(filter => !!filter)\r\n    ).subscribe(filter => {\r\n      const newFilter: any = {...filter};\r\n\r\n      if (newFilter.invoice_reception_date_after) {\r\n        newFilter.invoice_reception_date_after = new Date(newFilter.invoice_reception_date_after);\r\n      }\r\n\r\n      if (newFilter.invoice_reception_date_before) {\r\n        newFilter.invoice_reception_date_before = new Date(newFilter.invoice_reception_date_before);\r\n      }\r\n\r\n      if (newFilter.items_reception_date_after) {\r\n        newFilter.items_reception_date_after = new Date(newFilter.items_reception_date_after);\r\n      }\r\n\r\n      if (newFilter.items_reception_date_before) {\r\n        newFilter.items_reception_date_before = new Date(newFilter.items_reception_date_before);\r\n      }\r\n\r\n      if (newFilter.system_creation_date_after) {\r\n        newFilter.system_creation_date_after = new Date(newFilter.system_creation_date_after);\r\n      }\r\n\r\n      if (newFilter.system_creation_date_before) {\r\n        newFilter.system_creation_date_before = new Date(newFilter.system_creation_date_before);\r\n      }\r\n\r\n      newFilter.supplier = newFilter.supplier ? newFilter.supplier.id : null;\r\n      newFilter.supplier_category = newFilter.supplier_category ? +newFilter.supplier_category.id : null;\r\n      newFilter.categories = newFilter.nomenclature_categories.split(',').map(id => +id);\r\n\r\n      newFilter.code = newFilter.nomenclature_code;\r\n      newFilter.name = newFilter.nomenclature_name;\r\n\r\n      this.searchForm.patchValue(newFilter);\r\n\r\n      this.picker.fillSelected(newFilter.categories)\r\n    })\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>\r\n        Warehouse Balance (Total Cost: <span\r\n        *ngIf=\"!isLoading; else totalsLoading\">{{supplierTotalCost | moneyFormat}}</span> ,\r\n        Total Price: <span *ngIf=\"!isLoading; else totalsLoading\">{{supplierTotalPrice | moneyFormat}}</span> )\r\n      </h1>\r\n\r\n      <ng-template #totalsLoading>...</ng-template>\r\n    </div>\r\n    <div class=\"page__tools\">\r\n      <button\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-angle-double-right\"\r\n        label=\"Apply Filter\"\r\n        (click)=\"onApplyFilter()\"\r\n      ></button>\r\n\r\n      <button\r\n        class=\"p-button-danger ml-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-times\"\r\n        label=\"Clear Filter\"\r\n        (click)=\"clearFilters()\"\r\n      ></button>\r\n\r\n      <button\r\n        class=\"p-button-icon ml-2\"\r\n        pButton\r\n        type=\"button\"\r\n        icon=\"pi pi-file-excel\"\r\n        [loading]=\"isGenerate\"\r\n        label=\"Generate Report\"\r\n        [disabled]=\"!count\"\r\n        (click)=\"exportToExcel()\"\r\n      ></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"page__content\">\r\n  <div class=\"page__card\">\r\n    <form\r\n      [formGroup]=\"searchForm\"\r\n      class=\"form mb-3\"\r\n    >\r\n      <div class=\"row\">\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Name</label>\r\n            <input type=\"text\" pInputText formControlName=\"name\" (ngModelChange)=\"name$.next($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Code</label>\r\n            <input type=\"text\" pInputText formControlName=\"code\" (ngModelChange)=\"code$.next($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Company</label>\r\n            <pek-company-picker [currentCompanyId]=\"searchForm.get('supplier').value\"\r\n                                (selectCompany)=\"onSelectCompany($event)\"></pek-company-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Company Category</label>\r\n            <pek-company-category-picker\r\n              [selectedCategoryId]=\"searchForm.get('supplier_category').value\"\r\n              (selectCompanyCategory)=\"onSelectCategory($event)\"></pek-company-category-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Warehouse Category</label>\r\n            <pek-multi-product-categories-picker\r\n              [currentCategoryIds]=\"searchForm.get('categories').value\"\r\n              (choiceCategoryFolAllIds)=\"onSelectCategories($event)\"\r\n            ></pek-multi-product-categories-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Paid</label>\r\n            <pek-input-three-values\r\n              [filterValue]=\"columnFilterService.getFilterValue(searchForm.get('is_paid').value)\"\r\n              (changeValue)=\"getPaidStatus($event)\">\r\n            </pek-input-three-values>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Creation From</label>\r\n            <p-calendar\r\n              formControlName=\"system_creation_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Creation To</label>\r\n            <p-calendar\r\n              formControlName=\"system_creation_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Recieved From</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_reception_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Recieved To</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_reception_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Items Recieved From</label>\r\n            <p-calendar\r\n              formControlName=\"items_reception_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-2\">\r\n          <div class=\"form-group\">\r\n            <label>Items Recieved To</label>\r\n            <p-calendar\r\n              formControlName=\"items_reception_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              [showClear]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Purchase Category</label>\r\n            <pek-multi-purchase-category-picker\r\n              [withReportFilters]=\"true\"\r\n              (choiceCategories)=\"onSelectPurchasedCategories($event)\"\r\n            ></pek-multi-purchase-category-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Nomenclature Accounting Number</label>\r\n            <input pInputText (input)=\"changeAccountingNumber($event)\">\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Date From</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_date_after\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n        <div class=\"col-3\">\r\n          <div class=\"form-group\">\r\n            <label>Invoice Date To</label>\r\n            <p-calendar\r\n              formControlName=\"invoice_date_before\"\r\n              [showButtonBar]=\"true\"\r\n              dateFormat=\"dd/mm/yy\"\r\n              [readonlyInput]=\"true\"\r\n              (ngModelChange)=\"search$.next()\"\r\n            >\r\n            </p-calendar>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </form>\r\n\r\n    <div class=\"page__table report-table\">\r\n      <p-table\r\n        #dt\r\n        selectionMode=\"single\"\r\n        scrollHeight=\"calc(100vh - 18.8rem)\"\r\n        [scrollable]=\"true\"\r\n        [paginator]=\"count > 0\"\r\n        [rows]=\"10\"\r\n        [value]=\"balanceProducts\"\r\n      >\r\n        <ng-template pTemplate=\"caption\">\r\n        </ng-template>\r\n        <ng-template pTemplate=\"header\">\r\n          <tr>\r\n            <th class=\"text-center\" style=\"width: 3%\">#</th>\r\n            <th style=\"width: 10%\">Code</th>\r\n            <th style=\"width: 10%\">Name</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 4%\">UOM</th>\r\n            <th class=\"text-center\" style=\"width: 4%\">Order</th>\r\n            <th class=\"text-center\" style=\"width: 5%\">Invoice</th>\r\n            <th class=\"text-center\" style=\"width: 7%\">Technology</th>\r\n            <th style=\"width: 9%\">Supplier</th>\r\n            <th style=\"width: 8%\" class=\"text-center\">Purchase Category</th>\r\n            <th class=\"text-center\" style=\"width: 5%\">Date</th>\r\n            <th class=\"text-center\" style=\"width: 5%\">Quantity</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Unit Price</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Price</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Unit Cost</th>\r\n            <th class=\"text-center\" style=\"width: 6%\">Total Cost</th>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n          <tr>\r\n            <td class=\"text-center\" style=\"width: 3%;\">{{ i + 1}}</td>\r\n            <td style=\"width: 10%;\">{{product.code}}</td>\r\n            <td style=\"width: 10%;\">{{product.name}}</td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">{{product.total_quantity}}</td>\r\n            <td class=\"text-center\"\r\n                style=\"width: 4%;\">{{product.category}}</td>\r\n            <td class=\"text-center\" style=\"width: 4%;\">\r\n              <a target=\"_blank\"\r\n                 *ngIf=\"product.type === '0'\"\r\n                 [routerLink]=\"['/procurement/chains/order/',product.order]\"\r\n              >\r\n                {{product.order}}\r\n              </a>\r\n              <a\r\n                target=\"_blank\"\r\n                *ngIf=\"product.type === '2'\"\r\n                [routerLink]=\"['/outsourcing/chains/order/',product.order]\"\r\n              >\r\n                {{product.order}}\r\n              </a>\r\n              <a\r\n                target=\"_blank\" *ngIf=\"product.type === 'physical-inventory'\"\r\n                [routerLink]=\"['/warehouse/physical-inventory/',product.order.id]\"\r\n              >\r\n                {{product.order.id}}\r\n              </a>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%;\">\r\n              <a\r\n                *ngIf=\"product.invoice\"\r\n                target=\"_blank\"\r\n                [routerLink]=\"['/reports/invoices/invoice/',product.invoice.id]\"\r\n              >\r\n                {{product.invoice.self_serial_number}}\r\n              </a>\r\n\r\n              <span *ngIf=\"!product.invoice\">None</span>\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 7%;\">\r\n              {{product.current_technology}}\r\n            </td>\r\n            <td style=\"width: 9%;\">\r\n              {{product.supplier}}\r\n            </td>\r\n            <td style=\"width: 8%;\" class=\"text-center\">\r\n              {{product.purchase_category}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%;\">\r\n              {{product.document_creation_date | date:'dd/MM/yyyy'}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 5%;\">\r\n              {{product.quantity}}\r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              {{product.supplier_unit_price | moneyFormat}} \r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              {{product.supplier_total_price | moneyFormat}} \r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              {{product.supplier_unit_cost | moneyFormat}} \r\n            </td>\r\n            <td class=\"text-center\" style=\"width: 6%;\">\r\n              {{product.supplier_total_cost | moneyFormat}} \r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"emptymessage\">\r\n          <tr>\r\n            <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n              <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n              <span *ngIf=\"!isLoading\">No Records Found</span>\r\n            </td>\r\n          </tr>\r\n        </ng-template>\r\n        <ng-template pTemplate=\"paginatorright\">\r\n          <p-button\r\n            type=\"button\"\r\n            (click)=\"dt.paginator=false\"\r\n            styleClass=\"p-button-text\"\r\n          >All\r\n          </p-button>\r\n        </ng-template>\r\n      </p-table>\r\n    </div>\r\n    <div *ngIf=\"!dt.paginator && !isLoading && count > 0\" class=\"paginator-return-pagination\">\r\n      <p-button\r\n        type=\"button\"\r\n        (click)=\"dt.paginator=true\"\r\n        styleClass=\"p-button-text\"\r\n      >\r\n        Return pagination\r\n      </p-button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport {PurchaseCategory} from \"../../../purchasing/models/purchase-category\";\r\nimport {TreeNode} from \"primeng/api\";\r\nimport {PurchasingCategoryService} from \"../../../purchasing/services/purchasing-category.service\";\r\nimport {TreeService} from \"@shared/services/tree.service\";\r\nimport {cloneDeep} from 'lodash-es';\r\nimport {BaseServicesService} from \"../../../procurement/services/base-services.service\";\r\nimport {BaseService} from \"../../../procurement/models/base-service\";\r\n\r\n@Component({\r\n  selector: 'pek-reports-auxiliary-invoices-accounting-number',\r\n  templateUrl: './reports-auxiliary-invoices-accounting-number.component.html',\r\n  styleUrls: ['./reports-auxiliary-invoices-accounting-number.component.scss']\r\n})\r\nexport class ReportsAuxiliaryInvoicesAccountingNumberComponent implements OnInit {\r\n\r\n  isLoading = true;\r\n  baseServices: BaseService[] = [];\r\n  selectedNode: TreeNode<BaseService>;\r\n  categoriesTree: TreeNode<BaseService>[] = [];\r\n\r\n  expanseMap = {};\r\n\r\n  constructor(\r\n    private readonly baseServicesService: BaseServicesService,\r\n    private readonly treeService: TreeService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.getPurchasingCategory();\r\n  }\r\n\r\n  getPurchasingCategory() {\r\n    this.baseServicesService.get().subscribe(categories => {\r\n      this.baseServices = categories;\r\n      this.createTree();\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  createTree() {\r\n    if (this.categoriesTree) {\r\n      this.treeService.mapExpansion(this.categoriesTree, this.expanseMap);\r\n    }\r\n\r\n    this.categoriesTree = this.treeService.createTree(this.baseServices, this.expanseMap);\r\n  }\r\n\r\n  onExpandAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, true);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  onCollapseAll(): void {\r\n    const temp = cloneDeep(this.categoriesTree);\r\n    temp.forEach(node => {\r\n      this.expandCollapseRecursive(node, false);\r\n    });\r\n    this.categoriesTree = temp;\r\n  }\r\n\r\n  expandCollapseRecursive(node: TreeNode, isExpand: boolean): void {\r\n    node.expanded = isExpand;\r\n    if (node.children) {\r\n      node.children.forEach(childNode => {\r\n        this.expandCollapseRecursive(childNode, isExpand);\r\n      });\r\n    }\r\n  }\r\n\r\n  onEditAccountingNumber() {\r\n    this.baseServicesService.editAccountingNumberCategory(this.selectedNode.data).subscribe(category => {\r\n      if (category) {\r\n        const index = this.baseServices.findIndex(s => s.id === category.id);\r\n        this.baseServices[index] = category;\r\n        this.selectedNode = null;\r\n        this.createTree();\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"page\">\r\n  <div class=\"page__header\">\r\n    <div class=\"page__title\">\r\n      <pek-module-icon [module]=\"'reports'\" [isActive]=\"true\"></pek-module-icon>\r\n      <h1>Auxiliary Invoices Accounting Number</h1>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"page__content\">\r\n    <div class=\"page__card\">\r\n      <div class=\"page__table\">\r\n        <p-treeTable\r\n          #dt\r\n          [value]=\"categoriesTree\"\r\n          selectionMode=\"single\"\r\n          [(selection)]=\"selectedNode\"\r\n          [scrollable]=\"true\"\r\n          scrollHeight=\"calc(100vh - 19.2rem)\"\r\n        >\r\n          <ng-template pTemplate=\"caption\">\r\n            <div class=\"d-flex\">\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-down\"\r\n                label=\"Expand All\"\r\n                class=\"ml-auto mr-2\"\r\n                (click)=\"onExpandAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                icon=\"pi pi-angle-up\"\r\n                label=\"Collapse All\"\r\n                (click)=\"onCollapseAll()\"\r\n              ></button>\r\n              <button\r\n                pButton\r\n                type=\"button\"\r\n                class=\"ml-2\"\r\n                icon=\"pi pi-pencil\"\r\n                label=\"Edit Accounting Number\"\r\n                (click)=\"onEditAccountingNumber()\"\r\n                [disabled]=\"!selectedNode\"\r\n              ></button>\r\n            </div>\r\n          </ng-template>\r\n\r\n          <ng-template pTemplate=\"header\">\r\n            <tr>\r\n              <th style=\"padding-left: 48px; width: 35%\">Name</th>\r\n              <th class=\"priority-2\" style=\"width: 35%\">Comment</th>\r\n              <th class=\"priority-2 text-center\" style=\"width: 30%\">Accounting Number</th>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"body\" let-rowNode let-rowData=\"rowData\">\r\n            <tr [ttRow]=\"rowNode\" [ttSelectableRow]=\"rowNode\">\r\n              <td style=\"width: 35%\">\r\n                <p-treeTableToggler [rowNode]=\"rowNode\"></p-treeTableToggler>\r\n                {{rowData.name}}\r\n              </td>\r\n              <td style=\"width: 35%\">\r\n                {{rowData.comment}}\r\n              </td>\r\n              <td style=\"width: 30%\" class=\"text-center\">\r\n                {{rowData.accounting_number}}\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n          <ng-template pTemplate=\"emptymessage\">\r\n            <tr>\r\n              <td class=\"text-center p-4\" [attr.colspan]=\"3\">\r\n                <i *ngIf=\"isLoading\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n                <span *ngIf=\"!isLoading\">No Records Found</span>\r\n              </td>\r\n            </tr>\r\n          </ng-template>\r\n        </p-treeTable>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {AccountingCategory} from \"../../models/accounting-category\";\r\nimport {AccountingCategoriesService} from \"../../services/accounting-categories.service\";\r\nimport {untilDestroyed} from \"@ngneat/until-destroy\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {Currency} from \"@shared/models/currency\";\r\n\r\n@Component({\r\n  selector: 'pek-accounting-category-picker',\r\n  templateUrl: './accounting-category-picker.component.html',\r\n  styleUrls: ['./accounting-category-picker.component.scss']\r\n})\r\nexport class AccountingCategoryPickerComponent implements OnInit {\r\n  isLoading = true;\r\n  categories: AccountingCategory[] = [];\r\n  selectedCategoryId: number;\r\n  selectedCategory: AccountingCategory;\r\n\r\n  constructor(\r\n    private accountingCategoriesService: AccountingCategoriesService,\r\n    private dialogRef: MatDialogRef<AccountingCategoryPickerComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: {category: AccountingCategory }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getCategories()\r\n  }\r\n\r\n  getCategories() {\r\n    this.accountingCategoriesService.get().pipe(\r\n    ).subscribe(currencies => {\r\n      this.categories = currencies;\r\n\r\n      if (this.data.category) {\r\n        this.selectedCategory = this.data.category\r\n      }\r\n\r\n      this.isLoading = false;\r\n    });\r\n  }\r\n\r\n  onSelect() {\r\n    this.dialogRef.close(this.selectedCategory)\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Choice Accounting Category\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <div class=\"region-picker\">\r\n    <p-dropdown\r\n      *ngIf=\"!isLoading; else spinner\"\r\n      [options]=\"categories\"\r\n      placeholder=\"Select Accounting Category\"\r\n      [(ngModel)]=\"selectedCategory\"\r\n      optionLabel=\"name\"\r\n      [showClear]=\"true\"\r\n      [filter]=\"true\"\r\n    >\r\n    </p-dropdown>\r\n  </div>\r\n\r\n  <ng-template #spinner>\r\n    <div class=\"spinner-input\">\r\n      <i class=\"pi pi-spin pi-spinner\" style=\"font-size: 1.25rem\"></i>\r\n    </div>\r\n  </ng-template>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Choice Category'\"\r\n    (click)=\"onSelect()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {FormBuilder, FormGroup, Validators} from \"@angular/forms\";\r\nimport {AdditionalExpenseService} from \"../../services/additional-expense.service\";\r\nimport {filter, finalize, tap} from \"rxjs/operators\";\r\nimport {ModalService} from \"@shared/services/modal.service\";\r\n\r\n@Component({\r\n  selector: 'pek-additional-expenses-modal',\r\n  templateUrl: './additional-expenses-modal.component.html',\r\n  styleUrls: ['./additional-expenses-modal.component.scss']\r\n})\r\nexport class AdditionalExpensesModalComponent implements OnInit {\r\n  isPending: any;\r\n\r\n  form: FormGroup = this.fb.group({\r\n    value: [null, [Validators.required]],\r\n    accountingservice: [null, [Validators.required, Validators.min(0)]],\r\n  })\r\n\r\n  servicesType = [\r\n    {label: 'Production cost', value: 'Production cost'},\r\n    {label: 'Small material', value: 'Small material'},\r\n  ];\r\n\r\n  services: any[] = [];\r\n  selectedProformaInvoice: any;\r\n\r\n  deletion: Set<number> = new Set<number>();\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: 'old' | 'new', id: number, services: any[] },\r\n    private readonly dialogRef: MatDialogRef<AdditionalExpensesModalComponent>,\r\n    private readonly additionalExpenseService: AdditionalExpenseService,\r\n    private readonly fb: FormBuilder,\r\n    private readonly modalService: ModalService,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.services = JSON.parse(JSON.stringify(this.data.services));\r\n    this.services = this.services.map(s => s);\r\n  }\r\n\r\n  add() {\r\n\r\n    const send = {...this.form.value}\r\n\r\n    if (this.data.type === 'old') {\r\n      send.listproduct = this.data.id\r\n    } else {\r\n      send.task = this.data.id\r\n    }\r\n\r\n    this.isPending = true;\r\n\r\n    if (this.data.type === 'old') {\r\n      this.additionalExpenseService.createExpanse(send).pipe(\r\n        finalize(() => this.isPending = false),\r\n        tap(() => {\r\n          this.form.reset();\r\n        })\r\n      ).subscribe(val => {\r\n        this.data.services.push(val);\r\n        this.services.push(val)\r\n        this.services = this.services.map(p => p)\r\n      })\r\n    } else {\r\n      this.additionalExpenseService.createExpanseTask(send).pipe(\r\n        finalize(() => this.isPending = false),\r\n        tap(() => {\r\n          this.form.reset();\r\n        })\r\n      ).subscribe(val => {\r\n        this.data.services.push(val);\r\n        this.services.push(val)\r\n        this.services = this.services.map(p => p)\r\n      })\r\n    }\r\n  }\r\n\r\n  remove(id: number) {\r\n    this.modalService.confirm('danger').pipe(\r\n      filter(Boolean)\r\n    ).subscribe(() => {\r\n      this.deletion.add(id)\r\n\r\n      if (this.data.type === 'old') {\r\n        this.additionalExpenseService.removeExpanse(id).subscribe(res => {\r\n          const index = this.data.services.findIndex(s => s.id === id);\r\n          this.data.services.splice(index, 1);\r\n          this.services.splice(index, 1);\r\n          this.deletion.delete(id);\r\n          this.services = this.services.map(p => p)\r\n        })\r\n      } else {\r\n        this.additionalExpenseService.removeExpanseTask(id).subscribe(res => {\r\n          const index = this.data.services.findIndex(s => s.id === id);\r\n          this.data.services.splice(index, 1);\r\n          this.services.splice(index, 1);\r\n          this.deletion.delete(id);\r\n          this.services = this.services.map(p => p)\r\n        })\r\n      }\r\n    })\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Additional Expenses\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form class=\"form-row\" [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label>Service*</label>\r\n      <p-dropdown\r\n        formControlName=\"accountingservice\"\r\n        [showClear]=\"true\"\r\n        placeholder=\"Service\"\r\n        optionValue=\"value\"\r\n        optionLabel=\"label\"\r\n        [options]=\"servicesType\"\r\n      >\r\n\r\n      </p-dropdown>\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label>Cost*</label>\r\n      <input pInputText type=\"number\" formControlName=\"value\">\r\n    </div>\r\n    <button\r\n      pButton\r\n      type=\"button\"\r\n      class=\"p-button-icon\"\r\n      icon=\"pi pi-plus\"\r\n      label=\"Add\"\r\n      [loading]=\"isPending\"\r\n      [disabled]=\"form.invalid\"\r\n      (click)=\"add()\"\r\n    ></button>\r\n  </form>\r\n\r\n  <p-table\r\n  #st\r\n  selectionMode=\"single\"\r\n  [rows]=\"10\"\r\n  [scrollable]=\"true\"\r\n  [paginator]=\"services.length > 0\"\r\n  scrollHeight=\"calc(100vh - 19rem)\"\r\n  [value]=\"services\"\r\n  [(selection)]=\"selectedProformaInvoice\"\r\n>\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th class=\"index-header text-center\" style=\"width: 10%\">#</th>\r\n        <th style=\"width: 45%\" class=\"text-center\">Service</th>\r\n        <th style=\"width: 30%\" class=\"text-center\">Price</th>\r\n        <th style=\"width: 15%\"></th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-product let-i=\"rowIndex\">\r\n      <tr>\r\n        <td style=\"width: 10%\" class=\"text-center\">{{i + 1}}</td>\r\n        <td style=\"width: 45%\" class=\"text-center\">{{product?.accountingservice}}</td>\r\n        <td style=\"width: 30%\" class=\"text-center\">{{product?.value | moneyFormat}} </td>\r\n        <td style=\"width: 15%\">\r\n<!--          <div class=\"remove-btn\">-->\r\n<!--            <i class=\"pi pi-times\" (click)=\"remove(product.id)\"></i>-->\r\n<!--          </div>-->\r\n\r\n          <button\r\n            [loading]=\"deletion.has(product.id)\"\r\n            (click)=\"remove(product.id)\"\r\n            pButton\r\n            icon=\"pi pi-times\"\r\n            type=\"button\"\r\n            class=\"p-button-danger p-button-icon\"\r\n          >\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n      <tr>\r\n        <td class=\"text-center p-4\" [attr.colspan]=\"10\">\r\n          <span>No Records Found</span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </p-table>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n<!--  <button-->\r\n<!--    pButton-->\r\n<!--    type=\"button\"-->\r\n<!--    class=\"p-button-success\"-->\r\n<!--    label=\"Upload\"-->\r\n<!--    [loading]=\"isPending\"-->\r\n<!--    [disabled]=\"uploadFiles.length === 0\"-->\r\n<!--    (click)=\"onUploadFiles()\"-->\r\n<!--  ></button>-->\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from \"@angular/forms\";\r\nimport {CurrenciesService} from \"../../services/currencies.service\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {Currency} from \"@shared/models/currency\";\r\nimport {AccountingCategory} from \"../../models/accounting-category\";\r\nimport {AccountingCategoriesService} from \"../../services/accounting-categories.service\";\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-accounting-category',\r\n  templateUrl: './create-edit-accounting-category.component.html',\r\n  styleUrls: ['./create-edit-accounting-category.component.scss']\r\n})\r\nexport class CreateEditAccountingCategoryComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n    accounting_number: [null],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private accountingCategoriesService: AccountingCategoriesService,\r\n    private dialogRef: MatDialogRef<CreateEditAccountingCategoryComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, category: AccountingCategory }\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.category.id));\r\n      this.form.patchValue(<any>this.data.category);\r\n    }\r\n  }\r\n\r\n  changeNumber() {\r\n    const value = JSON.parse(JSON.stringify(this.form.get('accounting_number').value + ''));\r\n    if (value.length > 8) {\r\n      this.form.get('accounting_number').patchValue(value.slice(0, -1));\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createCategory();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editCategory();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createCategory() {\r\n    const send = <any>this.form.value;\r\n    this.accountingCategoriesService.createAccountingCategory(send).subscribe({\r\n      next: currency => this.dialogRef.close(currency),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editCategory() {\r\n    const send = <any>this.form.value;\r\n    this.accountingCategoriesService.editAccountingCategory(send).subscribe({\r\n      next: currency => this.dialogRef.close(currency),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Accounting Category\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n    <div class=\"form-group\">\r\n      <label for=\"accounting-number\">Accounting Number</label>\r\n      <input\r\n        (input)=\"changeNumber()\"\r\n        id=\"accounting-number\"\r\n        pInputText\r\n        formControlName=\"accounting_number\"\r\n      >\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, FormControl, Validators} from \"@angular/forms\";\r\nimport {CurrenciesService} from \"../../services/currencies.service\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {Currency} from \"@shared/models/currency\";\r\nimport {AdditionalExpenseService} from \"../../services/additional-expense.service\";\r\nimport {AdditionalExpense} from \"../../models/additional-expense\";\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-additional-expenses',\r\n  templateUrl: './create-edit-additional-expenses.component.html',\r\n  styleUrls: ['./create-edit-additional-expenses.component.scss']\r\n})\r\nexport class CreateEditAdditionalExpensesComponent implements OnInit {\r\n\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: ['', [Validators.required]],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly additionalExpenseService: AdditionalExpenseService,\r\n    private dialogRef: MatDialogRef<CreateEditAdditionalExpensesComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, additionalExpense: AdditionalExpense }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, new FormControl(this.data.additionalExpense.id));\r\n      this.form.patchValue(<any>this.data.additionalExpense);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createAdditionalExpense();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editAdditionalExpense();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createAdditionalExpense() {\r\n    const send = <any>this.form.value;\r\n    this.additionalExpenseService.create(send).subscribe({\r\n      next: additionalExpense => this.dialogRef.close(additionalExpense),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editAdditionalExpense() {\r\n    const send = <any>this.form.value;\r\n    this.additionalExpenseService.updatePartly(send).subscribe({\r\n      next: additionalExpense => this.dialogRef.close(additionalExpense),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Additional Expense\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"form-group\">\r\n      <label for=\"name\">Name*</label>\r\n      <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {FormBuilder, Validators} from \"@angular/forms\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {ServiceInvoiceProduct} from \"../../models/service-invoice\";\r\nimport {ServicesService} from \"../../services/services.service\";\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-invoice-service',\r\n  templateUrl: './create-edit-invoice-service.component.html',\r\n  styleUrls: ['./create-edit-invoice-service.component.scss']\r\n})\r\nexport class CreateEditInvoiceServiceComponent implements OnInit {\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    base_service: [null, [Validators.required]],\r\n    ddv: [22, [Validators.required, Validators.min(0)]],\r\n    discount: [0, [Validators.required, Validators.min(0)]],\r\n    fixed_discount: [false],\r\n    invoice: [this.data.invoiceId],\r\n    pure_price: [0, [Validators.required, Validators.min(0)]],\r\n  });\r\n\r\n  constructor(\r\n    private readonly fb: FormBuilder,\r\n    private readonly servicesService: ServicesService,\r\n    private dialogRef: MatDialogRef<CreateEditInvoiceServiceComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: {\r\n      type: ModalActionType,\r\n      invoiceId: number,\r\n      invoiceType: 'service' | 'invoice',\r\n      service: ServiceInvoiceProduct\r\n    }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data.type === 'edit') {\r\n      this.form.addControl('id' as any, this.fb.control(this.data.service.id));\r\n      // @ts-ignore\r\n      this.data.service.discount = <any>Math.round(<any>this.data.service.discount * 100) / 100;\r\n      this.form.patchValue(<any>this.data.service);\r\n      // @ts-ignore\r\n      this.form.get('base_service').patchValue(<any>this.data.service.base_service.id);\r\n    }\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createInvoiceService();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editInvoiceService();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createInvoiceService() {\r\n    const send = <any>this.form.value;\r\n\r\n    if (this.data.invoiceType === 'service') {\r\n      delete send.invoice;\r\n      send.service_invoice = this.data.invoiceId\r\n    }\r\n\r\n    this.servicesService.create(send).subscribe({\r\n      next: currency => this.dialogRef.close(currency),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  editInvoiceService() {\r\n    const send = <any>this.form.value;\r\n    this.servicesService.updatePartly(send).subscribe({\r\n      next: currency => this.dialogRef.close(currency),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectService(id: number) {\r\n    this.form.get('base_service').patchValue(<any>id);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Invoice Service\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <div class=\"form-group\">\r\n          <label for=\"name\">Service*</label>\r\n\r\n          <pek-base-service-picker\r\n            (choiceService)=\"onSelectService($event)\"\r\n            [currentServiceId]=\"+form.get('base_service').value\"\r\n          >\r\n          </pek-base-service-picker>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12\">\r\n        <div class=\"form-group\">\r\n          <label for=\"total_price\"> Price* </label>\r\n          <input pInputText formControlName=\"pure_price\" step=\"0.1\" type=\"number\" id=\"total_price\"\r\n                 required=\"required\">\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label for=\"discount\"> Discount* </label>\r\n          <input  pInputText formControlName=\"discount\" type=\"number\" step=\"0.1\" id=\"discount\"\r\n                 required=\"required\">\r\n        </div>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <div class=\"form-group\">\r\n          <label class=\"d-block\"> Fixed Discount </label>\r\n          <p-checkbox formControlName=\"fixed_discount\" [binary]=\"true\" inputId=\"binary\"></p-checkbox>\r\n        </div>\r\n      </div>\r\n      <div class=\"col-12\">\r\n        <div class=\"form-group\">\r\n          <label for=\"ddv\"> DDV* </label>\r\n          <input  pInputText formControlName=\"ddv\" type=\"number\" step=\"0.1\" id=\"ddv\">\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, Inject, OnInit} from '@angular/core';\r\nimport {ReportFilter} from \"../../models/report-filter\";\r\nimport {FormBuilder, Validators} from \"@angular/forms\";\r\nimport {MAT_DIALOG_DATA, MatDialogRef} from \"@angular/material/dialog\";\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {ReportFilterService} from \"../../services/report-filter.service\";\r\nimport {ColumnFilterService} from \"@shared/services/column-filter.service\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\n\r\n@Component({\r\n  selector: 'pek-create-edit-report-filter',\r\n  templateUrl: './create-edit-report-filter.component.html',\r\n  styleUrls: ['./create-edit-report-filter.component.scss']\r\n})\r\nexport class CreateEditReportFilterComponent implements OnInit {\r\n\r\n  filter: ReportFilter;\r\n  isSaving = false;\r\n\r\n  form = this.fb.group({\r\n    name: [null, Validators.required],\r\n    nomenclature_name: [''],\r\n    nomenclature_code: [''],\r\n    nomenclature_categories: [null],\r\n    supplier: [null],\r\n    supplier_category: [null],\r\n    system_creation_date_after: [null],\r\n    system_creation_date_before: [null],\r\n    invoice_reception_date_after: [null],\r\n    invoice_reception_date_before: [null],\r\n    items_reception_date_after: [null],\r\n    items_reception_date_before: [null],\r\n    is_paid: [null],\r\n  });\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private dialogRef: MatDialogRef<CreateEditReportFilterComponent>,\r\n    private adapterService: AdapterService,\r\n    private reportFilterService: ReportFilterService,\r\n    public readonly columnFilterService: ColumnFilterService,\r\n    @Inject(MAT_DIALOG_DATA) public data: { type: ModalActionType, filter: ReportFilter }\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    if (this.data?.type === 'edit') {\r\n      this.getFilterValues();\r\n    }\r\n  }\r\n\r\n  getFilterValues() {\r\n    this.filter = {...this.data.filter};\r\n\r\n    // if (this.filter.nomenclature_categories) {\r\n    //   this.categoriesService.selectNomenclatureCategories$.next(this.filter.nomenclature_categories);\r\n    // }\r\n\r\n    if (this.filter.invoice_reception_date_after) {\r\n      this.filter.invoice_reception_date_after = new Date(this.data.filter.invoice_reception_date_after);\r\n    }\r\n\r\n    if (this.filter.invoice_reception_date_before) {\r\n      this.filter.invoice_reception_date_before = new Date(this.data.filter.invoice_reception_date_before);\r\n    }\r\n\r\n    if (this.filter.items_reception_date_after) {\r\n      this.filter.items_reception_date_after = new Date(this.data.filter.items_reception_date_after);\r\n    }\r\n\r\n    if (this.filter.items_reception_date_before) {\r\n      this.filter.items_reception_date_before = new Date(this.data.filter.items_reception_date_before);\r\n    }\r\n\r\n    if (this.filter.system_creation_date_after) {\r\n      this.filter.system_creation_date_after = new Date(this.filter.system_creation_date_after);\r\n    }\r\n\r\n    if (this.filter.system_creation_date_before) {\r\n      this.filter.system_creation_date_before = new Date(this.filter.system_creation_date_before);\r\n    }\r\n\r\n    if (!this.filter.supplier_category) {\r\n      this.filter.supplier_category = null;\r\n    }\r\n\r\n    this.filter.supplier = this.filter.supplier ? this.filter.supplier.id : null;\r\n    this.filter.supplier_category = this.filter.supplier_category ? this.filter.supplier_category.id : null;\r\n    this.filter.nomenclature_categories = this.filter.nomenclature_categories.split(',').map(id => +id);\r\n    console.log(this.filter.nomenclature_categories)\r\n    this.form.patchValue(<any>this.filter);\r\n  }\r\n\r\n  togglePaidStatus(value) {\r\n    this.form.get('is_paid').patchValue(value);\r\n  }\r\n\r\n  onSave() {\r\n    this.isSaving = true;\r\n\r\n    switch (this.data.type) {\r\n      case 'create': {\r\n        this.createInvoiceFilter();\r\n        break;\r\n      }\r\n      case 'edit': {\r\n        this.editInvoiceFilter();\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  createInvoiceFilter() {\r\n    const filter: any = {...this.form.value};\r\n\r\n    filter.system_creation_date_after = this.adapterService.dateAdapter(filter.system_creation_date_after);\r\n    filter.system_creation_date_before = this.adapterService.dateAdapter(filter.system_creation_date_before);\r\n\r\n    filter.invoice_reception_date_after = this.adapterService.dateAdapter(filter.invoice_reception_date_after);\r\n    filter.invoice_reception_date_before = this.adapterService.dateAdapter(filter.invoice_reception_date_before);\r\n\r\n    filter.items_reception_date_after = this.adapterService.dateAdapter(filter.items_reception_date_after);\r\n    filter.items_reception_date_before = this.adapterService.dateAdapter(filter.items_reception_date_before);\r\n\r\n    if (filter.nomenclature_categories && filter.nomenclature_categories.length > 0) {\r\n      if (typeof filter.nomenclature_categories !== 'string') {\r\n        filter.nomenclature_categories = filter.nomenclature_categories.join(',');\r\n      }\r\n    } else {\r\n      filter.nomenclature_categories = '';\r\n    }\r\n\r\n    if (!filter.supplier_category) {\r\n      delete filter.supplier_category;\r\n    }\r\n\r\n    this.reportFilterService.createFilter(filter).subscribe({\r\n      next: invoiceFilter => this.dialogRef.close(invoiceFilter),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  onSelectCompany(id: number) {\r\n    this.form.get('supplier').patchValue(id)\r\n  }\r\n\r\n  onSelectCompanyCategory(id: number) {\r\n    this.form.get('supplier_category').patchValue(id)\r\n  }\r\n\r\n  editInvoiceFilter() {\r\n    const filter: any = {...this.form.value};\r\n\r\n    filter.system_creation_date_after = this.adapterService.dateAdapter(filter.system_creation_date_after);\r\n    filter.system_creation_date_before = this.adapterService.dateAdapter(filter.system_creation_date_before);\r\n\r\n    filter.invoice_reception_date_after = this.adapterService.dateAdapter(filter.invoice_reception_date_after);\r\n    filter.invoice_reception_date_before = this.adapterService.dateAdapter(filter.invoice_reception_date_before);\r\n\r\n    filter.items_reception_date_after = this.adapterService.dateAdapter(filter.items_reception_date_after);\r\n    filter.items_reception_date_before = this.adapterService.dateAdapter(filter.items_reception_date_before);\r\n\r\n    if (filter.nomenclature_categories && filter.nomenclature_categories.length > 0) {\r\n      if (typeof filter.nomenclature_categories !== 'string') {\r\n        filter.nomenclature_categories = filter.nomenclature_categories.join(',');\r\n      }\r\n    } else {\r\n      filter.nomenclature_categories = '';\r\n    }\r\n\r\n    if (!filter.supplier_category) {\r\n      delete filter.supplier_category;\r\n    }\r\n\r\n    filter.id = this.data.filter.id;\r\n\r\n    this.reportFilterService.updateFilter(filter).subscribe({\r\n      next: reportFilter => this.dialogRef.close(reportFilter),\r\n      error: () => this.isSaving = false,\r\n    });\r\n  }\r\n\r\n  getCategories(ids: number[]) {\r\n    this.form.get('nomenclature_categories').patchValue(ids?.join(',') ?? null)\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    {{data.type}} Report Filter\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <form [formGroup]=\"form\">\r\n    <div class=\"row\">\r\n      <div class=\"col-12\">\r\n        <label for=\"name\">Filter Name*</label>\r\n        <input type=\"text\" id=\"name\" pInputText formControlName=\"name\">\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label for=\"nomenclature_name\">Nomenclature Name</label>\r\n        <input type=\"text\" id=\"nomenclature_name\" pInputText formControlName=\"nomenclature_name\">\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label for=\"nomenclature_code\">Nomenclature Code</label>\r\n        <input type=\"text\" id=\"nomenclature_code\" pInputText formControlName=\"nomenclature_code\">\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Company</label>\r\n        <pek-company-picker\r\n          [currentCompanyId]=\"form.get('supplier').value\"\r\n          (selectCompany)=\"onSelectCompany($event)\"\r\n        ></pek-company-picker>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Company Category</label>\r\n        <pek-company-category-picker\r\n          [selectedCategoryId]=\"this.form.get('supplier_category').value\"\r\n          (selectCompanyCategory)=\"onSelectCompanyCategory($event)\"\r\n        ></pek-company-category-picker>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Warehouse Category</label>\r\n        <pek-multi-product-categories-picker\r\n          (choiceCategoryFolAllIds)=\"getCategories($event)\"\r\n          [currentCategoryIds]=\"this.form.get('nomenclature_categories').value\"\r\n        ></pek-multi-product-categories-picker>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Payment</label>\r\n        <pek-input-three-values\r\n          [filterValue]=\"columnFilterService.getFilterValue(form.get('is_paid').value)\"\r\n          (changeValue)=\"togglePaidStatus($event)\"\r\n        ></pek-input-three-values>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Creation From</label>\r\n        <p-calendar\r\n          formControlName=\"system_creation_date_after\"\r\n          [showButtonBar]=\"true\"\r\n          dataType=\"date\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n        ></p-calendar>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Creation To</label>\r\n        <p-calendar\r\n          formControlName=\"system_creation_date_before\"\r\n          [showButtonBar]=\"true\"\r\n          dataType=\"date\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n        ></p-calendar>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Invoice Recieved From</label>\r\n        <p-calendar\r\n          formControlName=\"invoice_reception_date_after\"\r\n          [showButtonBar]=\"true\"\r\n          dataType=\"date\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n        ></p-calendar>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Invoice Recieved To</label>\r\n        <p-calendar\r\n          formControlName=\"invoice_reception_date_before\"\r\n          [showButtonBar]=\"true\"\r\n          dataType=\"date\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n        ></p-calendar>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Items Recieved From</label>\r\n        <p-calendar\r\n          formControlName=\"items_reception_date_after\"\r\n          [showButtonBar]=\"true\"\r\n          dataType=\"date\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n        ></p-calendar>\r\n      </div>\r\n      <div class=\"col-6\">\r\n        <label>Items Recieved To</label>\r\n        <p-calendar\r\n          formControlName=\"items_reception_date_before\"\r\n          [showButtonBar]=\"true\"\r\n          dataType=\"date\"\r\n          dateFormat=\"dd/mm/yy\"\r\n          [readonlyInput]=\"true\"\r\n        ></p-calendar>\r\n      </div>\r\n    </div>\r\n  </form>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"data.type\"\r\n    [loading]=\"isSaving\"\r\n    [disabled]=\"form.invalid\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {Component, OnInit} from '@angular/core';\r\nimport {ReportFilter} from \"../../models/report-filter\";\r\nimport {ReportFilterService} from \"../../services/report-filter.service\";\r\nimport {MatDialogRef} from \"@angular/material/dialog\";\r\n\r\n@Component({\r\n  selector: 'pek-reports-filters-modal',\r\n  templateUrl: './reports-filters-modal.component.html',\r\n  styleUrls: ['./reports-filters-modal.component.scss']\r\n})\r\nexport class ReportsFiltersModalComponent implements OnInit {\r\n\r\n  reportFilters: ReportFilter[] = [];\r\n  selectedReportsFilter: ReportFilter;\r\n  isLoadingReportFilters = true;\r\n\r\n  constructor(\r\n    private reportFilterService: ReportFilterService,\r\n    private readonly dialogRef: MatDialogRef<ReportsFiltersModalComponent>\r\n  ) {\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.reportFilterService.getFilters().subscribe(filters => {\r\n      this.reportFilters = filters.map(f => {\r\n        return {\r\n          ...f,\r\n          opened: false,\r\n        }\r\n      });\r\n      this.isLoadingReportFilters = false;\r\n    });\r\n  }\r\n\r\n  onSave() {\r\n    this.dialogRef.close(this.selectedReportsFilter)\r\n  }\r\n\r\n  openFilter(filter: ReportFilter) {\r\n    const opened = JSON.parse(JSON.stringify(filter.opened));\r\n\r\n    this.reportFilters.forEach(f => f.opened = false);\r\n\r\n    if (!opened) {\r\n      filter.opened = true;\r\n    }\r\n  }\r\n\r\n  getCategories(ids: string) {\r\n    return ids.split(',').map(id => +id);\r\n  }\r\n}\r\n","<div class=\"modal-header\">\r\n  <h2 class=\"modal-header__title\">\r\n    Choice Report Filter\r\n  </h2>\r\n</div>\r\n\r\n<mat-dialog-content>\r\n  <p-table\r\n    #rt\r\n    selectionMode=\"single\"\r\n    scrollHeight=\"calc(100vh - 18.8rem)\"\r\n    [scrollable]=\"true\"\r\n    [paginator]=\"reportFilters.length > 0\"\r\n    [rows]=\"10\"\r\n    [(selection)]=\"selectedReportsFilter\"\r\n    [value]=\"reportFilters\"\r\n  >\r\n    <ng-template pTemplate=\"header\">\r\n      <tr>\r\n        <th style=\"width: 3%\" class=\"text-center\">#</th>\r\n        <th style=\"width: 9%\">Filter Name</th>\r\n        <th style=\"width: 11%\">Nomenclature Name</th>\r\n        <th style=\"width: 11%\">Nomenclature Code</th>\r\n        <th style=\"width: 10%\">Company</th>\r\n        <th style=\"width: 6%\" class=\"text-center\">Company Category</th>\r\n        <th style=\"width: 8%\" class=\"text-center\">Warehouse category</th>\r\n        <th style=\"width: 6%\" class=\"text-center\">Creation From</th>\r\n        <th style=\"width: 6%\" class=\"text-center\">Creation <br>To</th>\r\n        <th style=\"width: 8%\" class=\"text-center\">Invoice <br>Recieved From</th>\r\n        <th style=\"width: 6%\" class=\"text-center\">Invoice <br>Recieved To</th>\r\n        <th style=\"width: 8%\" class=\"text-center\">Items <br>Recieved From</th>\r\n        <th style=\"width: 7%\" class=\"text-center\">Items <br>Recieved To</th>\r\n        <th style=\"width: 5%\" class=\"text-center\">Payment</th>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"body\" let-filter let-i=\"rowIndex\">\r\n      <tr [pSelectableRow]=\"filter\">\r\n        <td style=\"width: 3%\" class=\"text-center\">{{i + 1}}</td>\r\n        <td style=\"width: 9%\">{{filter.name}}</td>\r\n        <td style=\"width: 11%\">\r\n          {{filter.nomenclature_name}}\r\n          <span *ngIf=\"!filter.nomenclature_name\"></span>\r\n        </td>\r\n        <td style=\"width: 11%\">\r\n          {{filter.nomenclature_code}}\r\n          <span *ngIf=\"!filter.nomenclature_code\"></span>\r\n        </td>\r\n        <td style=\"width: 10%\">{{filter.supplier ? filter.supplier.name : 'All companies'}}</td>\r\n        <td class=\"text-center\" style=\"width: 6%\">\r\n          <span *ngIf=\"filter.supplier_category\">{{filter.supplier_category?.name}}</span>\r\n          <span *ngIf=\"!filter.supplier_category\"></span>\r\n        </td>\r\n        <td style=\"width: 8%\">\r\n          <div class=\"d-flex justify-content-center filter-wh-category\">\r\n            <span *ngIf=\"!filter.nomenclature_categories\"></span>\r\n            <span *ngIf=\"filter.nomenclature_categories\">\r\n                      <button\r\n                        class=\"cat-eye\"\r\n                        (click)=\"openFilter(filter)\"\r\n                        pButton\r\n                        [icon]=\"!filter.opened ? 'pi pi-eye' : 'pi pi-eye-slash'\"\r\n                      ></button>\r\n\r\n                      <div class=\"category-opened\" *ngIf=\"filter.opened\">\r\n                        <pek-multi-product-categories-picker\r\n                          [isDisabled]=\"true\"\r\n                          [currentCategoryIds]=\"getCategories(filter.nomenclature_categories)\"\r\n                        ></pek-multi-product-categories-picker>\r\n                      </div>\r\n                    </span>\r\n          </div>\r\n        </td>\r\n        <td class=\"text-center\" style=\"width: 6%\">\r\n          {{filter.system_creation_date_after | date: 'dd/MM/y'}}\r\n          <span *ngIf=\"!filter.system_creation_date_after\"></span>\r\n        </td>\r\n        <td class=\"text-center\" style=\"width: 6%\">\r\n          {{filter.system_creation_date_before | date: 'dd/MM/y'}}\r\n          <span *ngIf=\"!filter.system_creation_date_before\"></span>\r\n        </td>\r\n        <td class=\"text-center\" style=\"width: 8%\">\r\n          {{filter.invoice_reception_date_after | date: 'dd/MM/y'}}\r\n          <span *ngIf=\"!filter.invoice_reception_date_after\"></span>\r\n        </td>\r\n        <td class=\"text-center\" style=\"width: 6%\">\r\n          {{filter.invoice_reception_date_before | date: 'dd/MM/y'}}\r\n          <span *ngIf=\"!filter.invoice_reception_date_before\"></span>\r\n        </td>\r\n        <td class=\"text-center\" style=\"width: 8%\">\r\n          {{filter.items_reception_date_after | date: 'dd/MM/y'}}\r\n          <span *ngIf=\"!filter.items_reception_date_after\"></span>\r\n        </td>\r\n        <td class=\"text-center\" style=\"width: 7%\">\r\n          {{filter.items_reception_date_before | date: 'dd/MM/y'}}\r\n          <span *ngIf=\"!filter.items_reception_date_before\"></span>\r\n        </td>\r\n        <td class=\"text-center\" style=\"width: 5%\">\r\n          <i class=\"pi pi-check text-success\" *ngIf=\"filter.is_paid === true\"></i>\r\n          <i class=\"pi pi-times text-danger\" *ngIf=\"filter.is_paid === false\"></i>\r\n          <span *ngIf=\"filter.is_paid === null\"></span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n    <ng-template pTemplate=\"emptymessage\">\r\n      <tr>\r\n        <td class=\"text-center p-4\" [attr.colspan]=\"18\">\r\n          <i *ngIf=\"isLoadingReportFilters\" class=\"pi pi-spin pi-spinner\" style=\"font-size: 2.25rem\"></i>\r\n          <span *ngIf=\"!isLoadingReportFilters\">No Records Found</span>\r\n        </td>\r\n      </tr>\r\n    </ng-template>\r\n  </p-table>\r\n</mat-dialog-content>\r\n\r\n<mat-dialog-actions class=\"justify-content-between\">\r\n  <button pButton type=\"button\" label=\"Cancel\" [mat-dialog-close]=\"false\" class=\"p-button-danger\"></button>\r\n  <button\r\n    pButton\r\n    type=\"button\"\r\n    class=\"p-button-success\"\r\n    [label]=\"'Apply Filter'\"\r\n    [disabled]=\"!selectedReportsFilter\"\r\n    (click)=\"onSave()\"\r\n  ></button>\r\n</mat-dialog-actions>\r\n","import {NgModule} from '@angular/core';\r\nimport {CommonModule} from '@angular/common';\r\n\r\nimport {ReportsRouting} from './reports.routing';\r\nimport {ReportsLayoutComponent} from './components/reports-layout/reports-layout.component';\r\nimport {LayoutModule} from \"../layout/layout.module\";\r\nimport {ReportsCurrenciesComponent} from './components/reports-currencies/reports-currencies.component';\r\nimport {ButtonModule} from \"primeng/button\";\r\nimport {MenubarModule} from \"primeng/menubar\";\r\nimport {SharedModule} from \"@shared/shared.module\";\r\nimport {TableModule} from \"primeng/table\";\r\nimport {CreateEditCurrencyComponent} from './modals/create-edit-currency/create-edit-currency.component';\r\nimport { ReportsAdditionalExpensesComponent } from './components/reports-additional-expenses/reports-additional-expenses.component';\r\nimport { CreateEditAdditionalExpensesComponent } from './modals/create-edit-additional-expenses/create-edit-additional-expenses.component';\r\nimport { CreateEditInvoiceFilterComponent } from './modals/create-edit-invoice-filter/create-edit-invoice-filter.component';\r\nimport { CreateEditReportFilterComponent } from './modals/create-edit-report-filter/create-edit-report-filter.component';\r\nimport { ReportsFiltersComponent } from './components/reports-filters/reports-filters.component';\r\nimport { ReportsPaymentsCheckerComponent } from './components/reports-payments-checker/reports-payments-checker.component';\r\nimport { ReportsItemCardComponent } from './components/reports-item-card/reports-item-card.component';\r\nimport { ReportsInComponent } from './components/reports-in/reports-in.component';\r\nimport { ReportsWarehouseBalanceComponent } from './components/reports-warehouse-balance/reports-warehouse-balance.component';\r\nimport { ReportsFiltersModalComponent } from './modals/reports-filters-modal/reports-filters-modal.component';\r\nimport { ReportsOutComponent } from './components/reports-out/reports-out.component';\r\nimport {\r\n  ReportsCompanyAccountingNumberComponent\r\n} from \"./components/reports-company-accounting-number/reports-company-accounting-number.component\";\r\nimport {\r\n  ReportsNomenclatureAccountingNumberComponent\r\n} from \"./components/reports-nomenclature-accounting-number/reports-nomenclature-accounting-number.component\";\r\nimport {\r\n  ReportsTechnologiesAccountingNumberComponent\r\n} from \"./components/reports-technologies-accounting-number/reports-technologies-accounting-number.component\";\r\nimport { ReportsPurchaseCategoriesAccountingNumberComponent } from './components/reports-purchase-categories-accounting-number/reports-purchase-categories-accounting-number.component';\r\nimport {\r\n  ReportsAuxiliaryInvoicesAccountingNumberComponent\r\n} from \"./components/reposts-auxiliary-invoices-accounting-number/reports-auxiliary-invoices-accounting-number.component\";\r\nimport { ReportsAccountingCategoriesComponent } from './components/reports-accounting-categories/reports-accounting-categories.component';\r\nimport { CreateEditAccountingCategoryComponent } from './modals/create-edit-accounting-category/create-edit-accounting-category.component';\r\nimport { ReportsCorrelationComponent } from './components/reports-correlation/reports-correlation.component';\r\nimport { AccountingCategoryPickerComponent } from './modals/accounting-category-picker/accounting-category-picker.component';\r\nimport { ReportsInvoicesComponent } from './components/reports-invoices/reports-invoices.component';\r\nimport { InvoiceFiltersModalComponent } from './modals/invoice-filters-modal/invoice-filters-modal.component';\r\nimport { CreateAuxiliaryInvoiceModalComponent } from './modals/create-auxiliary-invoice-modal/create-auxiliary-invoice-modal.component';\r\nimport { ReportsInvoicePageComponent } from './components/reports-invoice-page/reports-invoice-page.component';\r\nimport { ReportsServiceInvoicePageComponent } from './components/reports-service-invoice-page/reports-service-invoice-page.component';\r\nimport { InvoiceFilesModalComponent } from './modals/invoice-files-modal/invoice-files-modal.component';\r\nimport { AuxiliaryInvoiceFilesModalComponent } from './modals/auxiliary-invoice-files-modal/auxiliary-invoice-files-modal.component';\r\nimport { ReportGenerateXmlComponent } from './modals/report-generate-xml/report-generate-xml.component';\r\nimport { EditInvoiceGenerateXmlComponent } from './modals/edit-invoice-generate-xml/edit-invoice-generate-xml.component';\r\nimport { GenerateIntrastatXmlComponent } from './modals/generate-intrastat-xml/generate-intrastat-xml.component';\r\nimport { CreateEditInvoiceServiceComponent } from './modals/create-edit-invoice-service/create-edit-invoice-service.component';\r\nimport { DistributeInvoicePriceModalComponent } from './modals/distribute-invoice-price-modal/distribute-invoice-price-modal.component';\r\nimport { NewInvoiceProductModalComponent } from './modals/new-invoice-product-modal/new-invoice-product-modal.component';\r\nimport { CreateEditInvoiceProductComponent } from './modals/create-edit-invoice-product/create-edit-invoice-product.component';\r\nimport { RmaInvoiceModalComponent } from './modals/rma-invoice-modal/rma-invoice-modal.component';\r\nimport { InvoiceRedeliveryRmaModalComponent } from './modals/invoice-redelivery-rma-modal/invoice-redelivery-rma-modal.component';\r\nimport { InvoiceProductDeliveryDateComponent } from './modals/invoice-product-delivery-date/invoice-product-delivery-date.component';\r\nimport { SelectBindInvoiceModalComponent } from './modals/select-bind-invoice-modal/select-bind-invoice-modal.component';\r\nimport { ReportsCostReportsComponent } from './components/reports-cost-reports/reports-cost-reports.component';\r\nimport { ReportsOldCostReportComponent } from './components/reports-old-cost-report/reports-old-cost-report.component';\r\nimport { ReportsNewCostReportComponent } from './components/reports-new-cost-report/reports-new-cost-report.component';\r\nimport { AdditionalExpensesModalComponent } from './modals/additional-expenses-modal/additional-expenses-modal.component';\r\nimport { AllocateToToolRequestModalComponent } from './modals/allocate-to-tool-request-modal/allocate-to-tool-request-modal.component';\r\n\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ReportsLayoutComponent,\r\n    ReportsCurrenciesComponent,\r\n    CreateEditCurrencyComponent,\r\n    ReportsAdditionalExpensesComponent,\r\n    CreateEditAdditionalExpensesComponent,\r\n    CreateEditInvoiceFilterComponent,\r\n    CreateEditReportFilterComponent,\r\n    ReportsFiltersComponent,\r\n    ReportsPaymentsCheckerComponent,\r\n    ReportsItemCardComponent,\r\n    ReportsInComponent,\r\n    ReportsWarehouseBalanceComponent,\r\n    ReportsFiltersModalComponent,\r\n    ReportsOutComponent,\r\n    ReportsCompanyAccountingNumberComponent,\r\n    ReportsNomenclatureAccountingNumberComponent,\r\n    ReportsTechnologiesAccountingNumberComponent,\r\n    ReportsPurchaseCategoriesAccountingNumberComponent,\r\n    ReportsAuxiliaryInvoicesAccountingNumberComponent,\r\n    ReportsAccountingCategoriesComponent,\r\n    CreateEditAccountingCategoryComponent,\r\n    ReportsCorrelationComponent,\r\n    AccountingCategoryPickerComponent,\r\n    ReportsInvoicesComponent,\r\n    InvoiceFiltersModalComponent,\r\n    CreateAuxiliaryInvoiceModalComponent,\r\n    ReportsInvoicePageComponent,\r\n    ReportsServiceInvoicePageComponent,\r\n    InvoiceFilesModalComponent,\r\n    AuxiliaryInvoiceFilesModalComponent,\r\n    ReportGenerateXmlComponent,\r\n    EditInvoiceGenerateXmlComponent,\r\n    GenerateIntrastatXmlComponent,\r\n    CreateEditInvoiceServiceComponent,\r\n    DistributeInvoicePriceModalComponent,\r\n    NewInvoiceProductModalComponent,\r\n    CreateEditInvoiceProductComponent,\r\n    RmaInvoiceModalComponent,\r\n    InvoiceRedeliveryRmaModalComponent,\r\n    InvoiceProductDeliveryDateComponent,\r\n    SelectBindInvoiceModalComponent,\r\n    ReportsCostReportsComponent,\r\n    ReportsOldCostReportComponent,\r\n    ReportsNewCostReportComponent,\r\n    AdditionalExpensesModalComponent,\r\n    AllocateToToolRequestModalComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReportsRouting,\r\n    LayoutModule,\r\n    ButtonModule,\r\n    MenubarModule,\r\n    TableModule,\r\n    SharedModule\r\n  ]\r\n})\r\nexport class ReportsModule {\r\n}\r\n","import {NgModule} from '@angular/core';\r\nimport {RouterModule, Routes} from '@angular/router';\r\nimport {ReportsLayoutComponent} from \"./components/reports-layout/reports-layout.component\";\r\nimport {ReportsCurrenciesComponent} from \"./components/reports-currencies/reports-currencies.component\";\r\nimport {\r\n  ReportsAdditionalExpensesComponent\r\n} from \"./components/reports-additional-expenses/reports-additional-expenses.component\";\r\nimport {ReportsFiltersComponent} from \"./components/reports-filters/reports-filters.component\";\r\nimport {\r\n  ReportsPaymentsCheckerComponent\r\n} from \"./components/reports-payments-checker/reports-payments-checker.component\";\r\nimport {ReportsItemCardComponent} from \"./components/reports-item-card/reports-item-card.component\";\r\nimport {ReportsInComponent} from \"./components/reports-in/reports-in.component\";\r\nimport {\r\n  ReportsWarehouseBalanceComponent\r\n} from \"./components/reports-warehouse-balance/reports-warehouse-balance.component\";\r\nimport {ReportsOutComponent} from \"./components/reports-out/reports-out.component\";\r\nimport {\r\n  ReportsCompanyAccountingNumberComponent\r\n} from \"./components/reports-company-accounting-number/reports-company-accounting-number.component\";\r\nimport {\r\n  ReportsNomenclatureAccountingNumberComponent\r\n} from \"./components/reports-nomenclature-accounting-number/reports-nomenclature-accounting-number.component\";\r\nimport {\r\n  ReportsTechnologiesAccountingNumberComponent\r\n} from \"./components/reports-technologies-accounting-number/reports-technologies-accounting-number.component\";\r\nimport {\r\n  ReportsPurchaseCategoriesAccountingNumberComponent\r\n} from \"./components/reports-purchase-categories-accounting-number/reports-purchase-categories-accounting-number.component\";\r\nimport {\r\n  ReportsAuxiliaryInvoicesAccountingNumberComponent\r\n} from \"./components/reposts-auxiliary-invoices-accounting-number/reports-auxiliary-invoices-accounting-number.component\";\r\nimport {\r\n  ReportsAccountingCategoriesComponent\r\n} from \"./components/reports-accounting-categories/reports-accounting-categories.component\";\r\nimport {ReportsCorrelationComponent} from \"./components/reports-correlation/reports-correlation.component\";\r\nimport {ReportsInvoicesComponent} from \"./components/reports-invoices/reports-invoices.component\";\r\nimport {ReportsInvoicePageComponent} from \"./components/reports-invoice-page/reports-invoice-page.component\";\r\nimport {\r\n  ReportsServiceInvoicePageComponent\r\n} from \"./components/reports-service-invoice-page/reports-service-invoice-page.component\";\r\nimport {ReportsCostReportsComponent} from \"./components/reports-cost-reports/reports-cost-reports.component\";\r\nimport {ReportsNewCostReportComponent} from \"./components/reports-new-cost-report/reports-new-cost-report.component\";\r\nimport {ReportsOldCostReportComponent} from \"./components/reports-old-cost-report/reports-old-cost-report.component\";\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: ReportsLayoutComponent,\r\n    children: [\r\n      {\r\n        path: 'invoices',\r\n        title: 'Invoices',\r\n        component: ReportsInvoicesComponent,\r\n      },\r\n      {path: 'invoices/invoice/:id', component: ReportsInvoicePageComponent},\r\n      {path: 'invoices/service-invoice/:id', component: ReportsServiceInvoicePageComponent},\r\n\r\n      {path: 'cost-reports', title: 'Cost Reports', component: ReportsCostReportsComponent},\r\n      {path: 'cost-reports/new/:id', title: 'Cost Report', component: ReportsNewCostReportComponent},\r\n      {path: 'cost-reports/old/:id', title: 'Cost Report', component: ReportsOldCostReportComponent},\r\n\r\n      {path: 'currencies', title: 'Currencies', component: ReportsCurrenciesComponent},\r\n      {path: 'additional-expenses', title: 'Additional Expenses', component: ReportsAdditionalExpensesComponent},\r\n      {path: 'filters', title: 'Filters', component: ReportsFiltersComponent},\r\n      {path: 'payments-checker', title: 'Payments Checker', component: ReportsPaymentsCheckerComponent},\r\n      {path: 'item-card', title: 'Item Card', component: ReportsItemCardComponent},\r\n      {path: 'in', title: 'In', component: ReportsInComponent},\r\n      {path: 'wh-balance', title: 'Warehouse Balance', component: ReportsWarehouseBalanceComponent},\r\n      {path: 'out', title: 'Out', component: ReportsOutComponent},\r\n      {path: '', redirectTo: 'invoices', pathMatch: 'full'},\r\n\r\n      {\r\n        path: 'configs',\r\n        children: [\r\n          {path: '', redirectTo: 'company-number', pathMatch: 'full'},\r\n          {path: 'company-number', title: 'Company Accounting Number', component: ReportsCompanyAccountingNumberComponent},\r\n          {path: 'nomenclature-number', title: 'Nomenclature Accounting Number', component: ReportsNomenclatureAccountingNumberComponent},\r\n          {path: 'technologies-number', title: 'Technologies Accounting Number', component: ReportsTechnologiesAccountingNumberComponent},\r\n          {path: 'purchase-categories-number', title: 'Purchase Categories Accounting Number', component: ReportsPurchaseCategoriesAccountingNumberComponent},\r\n          {path: 'auxiliary-invoices-number', title: 'Auxiliary Invoices Accounting Number', component: ReportsAuxiliaryInvoicesAccountingNumberComponent},\r\n          {path: 'accounting-categories', title: 'Accounting Categories', component: ReportsAccountingCategoriesComponent},\r\n          {path: 'correlation', title: 'Correlation of Accounting Categories', component: ReportsCorrelationComponent},\r\n        ]\r\n      }\r\n    ]\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ReportsRouting {\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {map} from 'rxjs/operators';\r\nimport {Observable} from 'rxjs';\r\nimport {AccountingCategories, AccountingCategory} from \"../models/accounting-category\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {Currency} from \"@shared/models/currency\";\r\nimport {CreateEditCurrencyComponent} from \"../modals/create-edit-currency/create-edit-currency.component\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {\r\n  CreateEditAccountingCategoryComponent\r\n} from \"../modals/create-edit-accounting-category/create-edit-accounting-category.component\";\r\nimport {\r\n  AccountingCategoryPickerComponent\r\n} from \"../modals/accounting-category-picker/accounting-category-picker.component\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class AccountingCategoriesService {\r\n\r\n  API_URL = environment.base_url + environment.accounting_url;\r\n  readonly url = 'accounting_categories/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  getForPagination(query: QuerySearch[] = []): Observable<AccountingCategories> {\r\n    query.push({name: 'paginated', value: true});\r\n    let queryString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryString += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{data: AccountingCategories}>(this.API_URL + this.url + queryString).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  get(query: QuerySearch[] = []): Observable<AccountingCategory[]> {\r\n    let queryString = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryString += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryString += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{data: AccountingCategory[]}>(this.API_URL + this.url + queryString).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  createAccountingCategory(accountingCategory: AccountingCategory): Observable<AccountingCategory> {\r\n    return this.httpClient.post<{ data: AccountingCategory }>(this.API_URL + this.url, accountingCategory).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  editAccountingCategory(accountingCategory: AccountingCategory): Observable<AccountingCategory> {\r\n    return this.httpClient.patch<{ data: AccountingCategory }>(this.API_URL + this.url + accountingCategory.id + '/', accountingCategory)\r\n      .pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  delete(accountingCategory: AccountingCategory) {\r\n    return this.httpClient.delete<{ data: AccountingCategory }>(this.API_URL + this.url + accountingCategory.id + '/');\r\n  }\r\n\r\n  createEditCurrencyModal(type: ModalActionType, category?: AccountingCategory): Observable<AccountingCategory> {\r\n    return this.dialog\r\n      .open<CreateEditAccountingCategoryComponent>(CreateEditAccountingCategoryComponent, {\r\n        width: '30rem',\r\n        height: 'auto',\r\n        data: {type, category},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n  openAccountingCategoryPicker(category: AccountingCategory): Observable<any> {\r\n    return this.dialog\r\n      .open<AccountingCategoryPickerComponent>(AccountingCategoryPickerComponent, {\r\n        width: '30rem',\r\n        height: 'auto',\r\n        data: {category},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms',\r\n        panelClass: 'modal-overflow-visible',\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n}\r\n","import {HttpClient} from '@angular/common/http';\r\nimport {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport * as Excel from 'exceljs/dist/exceljs.min.js';\r\nimport {AdapterService} from \"@shared/services/adapter.service\";\r\nimport {AccountingProduct, BalanceProduct} from \"../models/accounting-product\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {ReportsFiltersModalComponent} from \"../modals/reports-filters-modal/reports-filters-modal.component\";\r\nimport {ReportFilter} from \"../models/report-filter\";\r\n\r\nexport type AccountingType = 'in' | 'out' | 'wh-balance';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\n\r\nexport class AccountingProductsService {\r\n\r\n  API_URL = environment.base_url + environment.accounting_url;\r\n  readonly url = 'accounting_products/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private adapterService: AdapterService,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: { name: string, value: any }[]): Observable<AccountingProduct[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{\r\n      data: AccountingProduct[]\r\n    }>(this.API_URL + this.url + 'all/' + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  roots(query?: { name: string, value: any }[]): Observable<AccountingProduct[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{\r\n      data: AccountingProduct[]\r\n    }>(this.API_URL + 'accounting_products_roots/' + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  balance(query?: { name: string, value: any }[]): Observable<BalanceProduct[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: BalanceProduct[] }>(this.API_URL + 'stock_balances/' + q_string).pipe(\r\n      map(response => {\r\n        return response.data;\r\n      }));\r\n  }\r\n\r\n  out(query?: { name: string, value: any }[]): Observable<BalanceProduct[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: BalanceProduct[] }>(this.API_URL + 'out/' + q_string).pipe(map(response => {\r\n\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  in(query?: { name: string, value: any }[]): Observable<BalanceProduct[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{ data: BalanceProduct[] }>(this.API_URL + 'in/' + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  history(id): Observable<any> {\r\n    return this.httpClient.get<{\r\n      data: any\r\n    }>(this.API_URL + 'warehouse_products/' + id + '/history/').pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  getById(id): Observable<AccountingProduct> {\r\n    return this.httpClient.get<{ data: AccountingProduct }>(this.API_URL + this.url + id + '/').pipe(map(response => {\r\n\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  tree(id): Observable<AccountingProduct[]> {\r\n    return this.httpClient.get<{ data: AccountingProduct[] }>(this.API_URL + 'tree/' + id + '/').pipe(map(response => {\r\n\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  async exportToExcel(products: BalanceProduct[], type: AccountingType) {\r\n    let reportType = '';\r\n    //   Excel\r\n    const workbook = new Excel.Workbook();\r\n\r\n    let worksheet: any;\r\n\r\n    //   Excel\r\n    switch (type) {\r\n      case 'in':\r\n        worksheet = workbook.addWorksheet('Report In');\r\n        reportType = 'In';\r\n        break;\r\n      case 'wh-balance':\r\n        worksheet = workbook.addWorksheet('Report Warehouse Balance');\r\n        reportType = 'Warehouse Balance';\r\n        break;\r\n      case 'out':\r\n        worksheet = workbook.addWorksheet('Report Out');\r\n        reportType = 'Out';\r\n        break;\r\n    }\r\n\r\n    const allProducts = [];\r\n\r\n    if (type === 'out') {\r\n      worksheet.columns = [\r\n        {header: '#', key: 'index', width: 10},\r\n        {header: 'Code', key: 'code', width: 40},\r\n        {header: 'Name', key: 'name', width: 40},\r\n        {header: 'Quantity', key: 'quantity', width: 20},\r\n        {header: 'UOM', key: 'uom', width: 15},\r\n        {header: 'Order', key: 'order', width: 15},\r\n        {header: 'Invoice', key: 'invoice', width: 15},\r\n        {header: 'Technology', key: 'technology', width: 20},\r\n        {header: 'Supplier', key: 'supplier', width: 36},\r\n        {header: 'Purchase Category', key: 'purchaseCategory', width: 28},\r\n        {header: 'Written For List', key: 'writtenForList', width: 36},\r\n        {header: 'Date', key: 'date', width: 18},\r\n        {header: 'Unit Price', key: 'unitPrice', width: 15},\r\n        {header: 'Total Price', key: 'totalPrice', width: 15},\r\n        {header: 'Unit Cost', key: 'unitCost', width: 15},\r\n        {header: 'Total Cost', key: 'totalCost', width: 15},\r\n      ];\r\n    } else {\r\n      worksheet.columns = [\r\n        {header: '#', key: 'index', width: 10},\r\n        {header: 'Code', key: 'code', width: 40},\r\n        {header: 'Name', key: 'name', width: 40},\r\n        {header: 'Total Quantity', key: 'quantity', width: 20},\r\n        {header: 'UOM', key: 'uom', width: 15},\r\n        {header: 'Order', key: 'order', width: 15},\r\n        {header: 'Invoice', key: 'invoice', width: 15},\r\n        {header: 'Technology', key: 'technology', width: 20},\r\n        {header: 'Supplier', key: 'supplier', width: 36},\r\n        {header: 'Purchase Category', key: 'purchaseCategory', width: 28},\r\n        {header: 'Date', key: 'date', width: 18},\r\n        {header: 'Quantity', key: 'acceptedQuantity', width: 15},\r\n        {header: 'Unit Price', key: 'unitPrice', width: 15},\r\n        {header: 'Total Price', key: 'totalPrice', width: 15},\r\n        {header: 'Unit Cost', key: 'unitCost', width: 15},\r\n        {header: 'Total Cost', key: 'totalCost', width: 15},\r\n      ];\r\n    }\r\n\r\n    if (type === 'wh-balance') {\r\n      products.forEach(product => {\r\n        const newProduct = {\r\n          code: product.code,\r\n          name: product.name,\r\n          quantity: product.total_quantity,\r\n          category: product.category,\r\n          // @ts-ignore\r\n          order: product.type === 'physical-inventory' ? product.order.id : product.order,\r\n          // @ts-ignore\r\n          invoice: product.invoice ? product.invoice.self_serial_number : 'None',\r\n          technology: product.current_technology,\r\n          supplier: product.supplier,\r\n          purchaseCategory: product.purchase_category,\r\n          date: new Date(product.document_creation_date),\r\n          acceptedQuantity: product.quantity,\r\n          supplierTotalCost: product.supplier_total_cost,\r\n          supplierTotalPrice: product.supplier_total_price,\r\n          supplierUnitCost: product.supplier_unit_cost,\r\n          supplierUnitPrice: product.supplier_unit_price\r\n        };\r\n\r\n        allProducts.push(newProduct);\r\n      });\r\n    } else if (type === 'in') {\r\n\r\n      products.forEach(product => {\r\n        const newProduct = {\r\n          code: product.code,\r\n          name: product.name,\r\n          // @ts-ignore\r\n          quantity: product.totalQuantity,\r\n          category: product.category,\r\n          order: product.order,\r\n          invoice: product?.invoice ? product.invoice : 'None',\r\n          technology: product.current_technology,\r\n          supplier: product.supplier,\r\n          purchaseCategory: product.purchase_category,\r\n          date: new Date(product.document_creation_date),\r\n          acceptedQuantity: product.quantity,\r\n          supplierTotalCost: product.supplier_total_cost,\r\n          supplierTotalPrice: product.supplier_total_price,\r\n          supplierUnitCost: product.supplier_unit_cost,\r\n          supplierUnitPrice: product.supplier_unit_price\r\n        };\r\n\r\n        allProducts.push(newProduct);\r\n      })\r\n\r\n      // products.forEach(product => {\r\n      //   // if (product.accepted_by_invoices) {\r\n      //   product.accepted_by_invoices.forEach(acceptedProduct => {\r\n      //     const newProduct = {\r\n      //       code: product.code,\r\n      //       name: product.name,\r\n      //       quantity: product.quantity,\r\n      //       category: product.category,\r\n      //       order: acceptedProduct.order,\r\n      //       invoice: acceptedProduct.invoice,\r\n      //       technology: acceptedProduct.current_technology,\r\n      //       supplier: acceptedProduct.supplier,\r\n      //       purchaseCategory: product.purchase_category,\r\n      //       date: new Date(acceptedProduct.document_creation_date),\r\n      //       acceptedQuantity: acceptedProduct.accepted_quantity,\r\n      //       supplierTotalCost: acceptedProduct.supplier_total_cost,\r\n      //       supplierTotalPrice: acceptedProduct.supplier_total_price,\r\n      //       supplierUnitCost: acceptedProduct.supplier_unit_cost,\r\n      //       supplierUnitPrice: acceptedProduct.supplier_unit_price\r\n      //     };\r\n      //\r\n      //     allProducts.push(newProduct);\r\n      //   });\r\n      // // }\r\n      // });\r\n    } else if (type === 'out') {\r\n      products.forEach(product => {\r\n        const newProduct = {\r\n          code: product.nomenclature.code,\r\n          name: product.nomenclature.name,\r\n          quantity: product.quantity,\r\n          category: product.nomenclature.category,\r\n          order: product.order,\r\n          invoice: product.invoice,\r\n          technology: product.current_technology,\r\n          supplier: product.supplier,\r\n          purchaseCategory: product.purchase_category,\r\n          writtenForList: product.written_off_for_list,\r\n          date: new Date(product.document_creation_date),\r\n          supplierTotalCost: product.supplier_total_cost,\r\n          supplierTotalPrice: product.supplier_total_price,\r\n          supplierUnitCost: product.supplier_unit_cost,\r\n          supplierUnitPrice: product.supplier_unit_price\r\n        };\r\n        allProducts.push(newProduct);\r\n      });\r\n    }\r\n\r\n    let cols = 16;\r\n    if (type === 'out') {\r\n      cols = 16;\r\n    }\r\n\r\n    //  \r\n    let idx = 1;\r\n    while (idx <= cols) {\r\n      worksheet.getColumn(idx).alignment = {vertical: 'middle', horizontal: 'center'};\r\n      worksheet.getColumn(idx).font = {\r\n        name: 'Calibri',\r\n        size: 12,\r\n      };\r\n      idx++;\r\n    }\r\n\r\n    worksheet.getRow(1).font = {\r\n      name: 'Calibri',\r\n      size: 13,\r\n      bold: true\r\n    };\r\n\r\n    if (type === 'out') {\r\n      allProducts.forEach((product, index) => {\r\n        worksheet.addRow({\r\n          index: index + 1,\r\n          name: product.name,\r\n          code: product.code,\r\n          quantity: product.quantity,\r\n          uom: product.category ? product.category.unit_of_measure?.symbol : 'Pcs',\r\n          order: product.order,\r\n          invoice: product.invoice ? product.invoice.self_serial_number : 'None',\r\n          technology: product.technology ? product.technology : 'None',\r\n          supplier: product.supplier,\r\n          purchaseCategory: product.purchaseCategory && product.purchaseCategory?.name ? product.purchaseCategory.name : 'None',\r\n          writtenForList: product.writtenForList,\r\n          date: this.adapterService.dateToExcelStringDate(product.date),\r\n          unitPrice: product.supplierUnitPrice,\r\n          totalPrice: product.supplierTotalPrice,\r\n          unitCost: product.supplierUnitCost,\r\n          totalCost: product.supplierTotalCost,\r\n        });\r\n      });\r\n\r\n      worksheet.getColumn(2).alignment = {vertical: 'middle', horizontal: 'left'};\r\n      worksheet.getColumn(3).alignment = {vertical: 'middle', horizontal: 'left'};\r\n      worksheet.getColumn(9).alignment = {vertical: 'middle', horizontal: 'left'};\r\n      worksheet.getColumn(11).alignment = {vertical: 'middle', horizontal: 'left'};\r\n      worksheet.getColumn(13).numFmt = '#,##0.00\" \";[Red]\\-#,##0.00\" \"';\r\n      worksheet.getColumn(14).numFmt = '#,##0.00\" \";[Red]\\-#,##0.00\" \"';\r\n      worksheet.getColumn(15).numFmt = '#,##0.00\" \";[Red]\\-#,##0.00\" \"';\r\n      worksheet.getColumn(16).numFmt = '#,##0.00\" \";[Red]\\-#,##0.00\" \"';\r\n    } else {\r\n\r\n      if (type === 'in') {\r\n        allProducts.forEach((product, index) => {\r\n          worksheet.addRow({\r\n            index: index + 1,\r\n            name: product.name,\r\n            code: product.code,\r\n            quantity: product.quantity,\r\n            uom: product.category,\r\n            order: product.order,\r\n            invoice: product?.invoice,\r\n            technology: product.technology ? product.technology : 'None',\r\n            supplier: product.supplier,\r\n            purchaseCategory: product.purchaseCategory,\r\n            date: this.adapterService.dateToExcelStringDate(product.date),\r\n            acceptedQuantity: product.acceptedQuantity,\r\n            unitPrice: product.supplierUnitPrice,\r\n            totalPrice: product.supplierTotalPrice,\r\n            unitCost: product.supplierUnitCost,\r\n            totalCost: product.supplierTotalCost,\r\n          });\r\n        });\r\n      } else {\r\n        allProducts.forEach((product, index) => {\r\n          worksheet.addRow({\r\n            index: index + 1,\r\n            name: product.name,\r\n            code: product.code,\r\n            quantity: product.quantity,\r\n            uom: product.category,\r\n            order: product.order,\r\n            invoice: product.invoice,\r\n            technology: product.technology ? product.technology : 'None',\r\n            supplier: product.supplier,\r\n            purchaseCategory: product.purchaseCategory && product.purchaseCategory?.name ? product.purchaseCategory.name : 'None',\r\n            date: this.adapterService.dateToExcelStringDate(product.date),\r\n            acceptedQuantity: product.acceptedQuantity,\r\n            unitPrice: product.supplierUnitPrice,\r\n            totalPrice: product.supplierTotalPrice,\r\n            unitCost: product.supplierUnitCost,\r\n            totalCost: product.supplierTotalCost,\r\n          });\r\n        });\r\n      }\r\n\r\n      worksheet.getColumn(2).alignment = {vertical: 'middle', horizontal: 'left'};\r\n      worksheet.getColumn(3).alignment = {vertical: 'middle', horizontal: 'left'};\r\n      worksheet.getColumn(9).alignment = {vertical: 'middle', horizontal: 'left'};\r\n      worksheet.getColumn(13).numFmt = '#,##0.00\" \";[Red]\\-#,##0.00\" \"';\r\n      worksheet.getColumn(14).numFmt = '#,##0.00\" \";[Red]\\-#,##0.00\" \"';\r\n      worksheet.getColumn(15).numFmt = '#,##0.00\" \";[Red]\\-#,##0.00\" \"';\r\n      worksheet.getColumn(16).numFmt = '#,##0.00\" \";[Red]\\-#,##0.00\" \"';\r\n    }\r\n\r\n    //    \r\n    workbook.xlsx.writeBuffer().then((data: any) => {\r\n      const blob = new Blob([data], {\r\n        type:\r\n          'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet'\r\n      });\r\n      const url = window.URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      document.body.appendChild(a);\r\n      a.setAttribute('style', 'display: none');\r\n      a.href = url;\r\n      a.download = `Report ${reportType}.xlsx`;\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n      a.remove();\r\n    });\r\n  }\r\n\r\n  openFilterModal(): Observable<ReportFilter> {\r\n    return this.dialog\r\n      .open<ReportsFiltersModalComponent>(ReportsFiltersModalComponent, {\r\n        width: '95vw',\r\n        height: 'auto',\r\n        data: {},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from \"@env/environment\";\r\nimport {HttpClient} from \"@angular/common/http\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {Observable} from \"rxjs\";\r\nimport {map} from \"rxjs/operators\";\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {AdditionalExpense} from \"../models/additional-expense\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {\r\n  CreateEditAdditionalExpensesComponent\r\n} from \"../modals/create-edit-additional-expenses/create-edit-additional-expenses.component\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class AdditionalExpenseService {\r\n\r\n  API_URL = environment.base_url + environment.accounting_url;\r\n  readonly url = 'accounting_services/';\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: QuerySearch[]): Observable<AdditionalExpense[]> {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value\r\n        }\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{ data: AdditionalExpense[] }>(this.API_URL + this.url + queryParams).pipe(\r\n      map(response => response.data)\r\n    )\r\n  }\r\n\r\n  create(entity: AdditionalExpense): Observable<AdditionalExpense> {\r\n    return this.httpClient.post<{ data: AdditionalExpense }>(this.API_URL + this.url, entity).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  updatePartly(entity: AdditionalExpense): Observable<AdditionalExpense> {\r\n    console.log(entity)\r\n    return this.httpClient.patch<{ data: AdditionalExpense }>(this.API_URL + this.url + entity.id + '/', entity).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createExpanse(send: any) {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + 'accounting_services_to_list_products/', send).pipe(\r\n      map(res => res.data)\r\n    )\r\n  }\r\n\r\n  createExpanseTask(send: any) {\r\n    return this.httpClient.post<{ data: any }>(this.API_URL + 'accounting_services_to_tasks/', send).pipe(\r\n      map(res => res.data)\r\n    )\r\n  }\r\n\r\n  removeExpanse(id: number) {\r\n    return this.httpClient.delete(this.API_URL + `accounting_services_to_list_products/${id}/`)\r\n  }\r\n\r\n  removeExpanseTask(id: number) {\r\n    return this.httpClient.delete(this.API_URL + `accounting_services_to_tasks/${id}/`)\r\n  }\r\n\r\n  delete(id: string) {\r\n    return this.httpClient.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  createEditCurrencyModal(type: ModalActionType, additionalExpense?: AdditionalExpense): Observable<AdditionalExpense> {\r\n    return this.dialog\r\n      .open<CreateEditAdditionalExpensesComponent>(CreateEditAdditionalExpensesComponent, {\r\n        width: '35rem',\r\n        height: 'auto',\r\n        data: {type, additionalExpense},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {environment} from '@env/environment';\r\nimport {AccountingProduct, AccountingProducts} from \"../models/accounting-product\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {ReportsFiltersModalComponent} from \"../modals/reports-filters-modal/reports-filters-modal.component\";\r\nimport {\r\n  AdditionalExpensesModalComponent\r\n} from \"../modals/additional-expenses-modal/additional-expenses-modal.component\";\r\nimport {AdditionalExpenseService} from \"./additional-expense.service\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class CostReportsService {\r\n\r\n  API_URL = environment.base_url + environment.production_url;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  costReportsPagination(query?: { name: string, value: any }[]): Observable<AccountingProducts> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{\r\n      data: AccountingProducts\r\n    }>(this.API_URL + 'tasks/cost_reports_list/' + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  costReports(query?: { name: string, value: any }[]): Observable<AccountingProduct[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.httpClient.get<{\r\n      data: AccountingProduct[]\r\n    }>(this.API_URL + 'tasks/cost_reports_list/' + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  getCostReport(id): Observable<AccountingProduct[]> {\r\n    return this.httpClient.get<{\r\n      data: AccountingProduct[]\r\n    }>(this.API_URL + 'tasks/' + id + '/cost_report/').pipe(map(response => {\r\n\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  additionalExpensesModal(type: 'old' | 'new', id: number, services: any[]) {\r\n    return this.dialog\r\n      .open<AdditionalExpensesModalComponent>(AdditionalExpensesModalComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        data: {type, id, services},\r\n        autoFocus: false,\r\n        panelClass: 'modal-overflow-visible',\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {map} from 'rxjs/operators';\r\nimport {QuerySearch} from \"@shared/models/other\";\r\nimport {ExcludePayment} from \"./payment-checker\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class PaymentCheckerService {\r\n\r\n  API_URL = environment.base_url + environment.accounting_url;\r\n  readonly url = 'accounting_services/';\r\n\r\n  constructor(private httpClient: HttpClient) {\r\n\r\n  }\r\n\r\n  attachFiles(data, query: QuerySearch[]) {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    return this.httpClient.post<{\r\n      data: any\r\n    }>(environment.base_url + 'procurement/invoices/compare_db_with_xml/' + queryParams, data)\r\n      .pipe(\r\n        map(response => response.data)\r\n      );\r\n  }\r\n\r\n  getExcludePayments(query?: QuerySearch[]) {\r\n    let queryParams = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          queryParams += '&' + element.name + '=' + element.value;\r\n        } else {\r\n          queryParams += '?' + element.name + '=' + element.value;\r\n        }\r\n\r\n      });\r\n    }\r\n\r\n    return this.httpClient.get<{\r\n      data: ExcludePayment[]\r\n    }>(environment.base_url + 'procurement/payment_checker_exclude_companies/' + queryParams)\r\n      .pipe(\r\n        map(response => response.data)\r\n      );\r\n  }\r\n\r\n  excludePayment(send: { name: string }) {\r\n    return this.httpClient.post<{\r\n      data: ExcludePayment\r\n    }>(environment.base_url + 'procurement/payment_checker_exclude_companies/', send)\r\n      .pipe(\r\n        map(response => response.data)\r\n      );\r\n  }\r\n\r\n  restoreExcludePayment(send: { id: number }) {\r\n    return this.httpClient.delete<{\r\n      data: ExcludePayment\r\n    }>(environment.base_url + `procurement/payment_checker_exclude_companies/${send.id}/`)\r\n      .pipe(\r\n        map(response => response)\r\n      );\r\n  }\r\n}\r\n","import {Injectable} from '@angular/core';\r\nimport {environment} from '@env/environment';\r\nimport {HttpClient} from '@angular/common/http';\r\nimport {Observable} from 'rxjs';\r\nimport {map} from 'rxjs/operators';\r\nimport {ReportFilter} from \"../models/report-filter\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {CreateEditReportFilterComponent} from \"../modals/create-edit-report-filter/create-edit-report-filter.component\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ReportFilterService {\r\n  API_URL = environment.base_url + environment.accounting_url;\r\n  private url = 'warehouse_balance_filters/'\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  getFilters(): Observable<ReportFilter[]> {\r\n    return this.httpClient.get<{ data: ReportFilter[] }>(this.API_URL + this.url).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createFilter(filter: ReportFilter): Observable<ReportFilter> {\r\n    return this.httpClient.post<{ data: ReportFilter }>(this.API_URL + this.url, filter).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  deleteFilter(filter: ReportFilter) {\r\n    return this.httpClient.delete(this.API_URL + this.url + `${filter.id}/`);\r\n  }\r\n\r\n  updateFilter(filter: ReportFilter): Observable<ReportFilter> {\r\n    return this.httpClient.patch<{\r\n      data: ReportFilter\r\n    }>(this.API_URL + this.url + `${filter.id}/`, filter).pipe(\r\n      map(response => response.data)\r\n    );\r\n  }\r\n\r\n  createEditReportFilter(type: ModalActionType, filter?: ReportFilter): Observable<ReportFilter> {\r\n    return this.dialog\r\n      .open<CreateEditReportFilterComponent>(CreateEditReportFilterComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, filter},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from '@env/environment';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport {ServiceInvoiceProduct} from \"../models/service\";\r\nimport {ModalActionType} from \"@shared/models/modal-action\";\r\nimport {Currency} from \"@shared/models/currency\";\r\nimport {CreateEditCurrencyComponent} from \"../modals/create-edit-currency/create-edit-currency.component\";\r\nimport {MatDialog} from \"@angular/material/dialog\";\r\nimport {\r\n  CreateEditInvoiceServiceComponent\r\n} from \"../modals/create-edit-invoice-service/create-edit-invoice-service.component\";\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ServicesService {\r\n\r\n  API_URL = environment.base_url + environment.procurement_url;\r\n  readonly url = 'services/';\r\n  constructor(\r\n    private http: HttpClient,\r\n    private readonly dialog: MatDialog,\r\n  ) {\r\n  }\r\n\r\n  get(query?: { name: string, value: any }[]): Observable<ServiceInvoiceProduct[]> {\r\n    let q_string = '';\r\n    if (query) {\r\n      query.forEach((element, index) => {\r\n        if (index > 0) {\r\n          q_string += '&' + element.name + '=' + element.value\r\n        } else {\r\n          q_string += '?' + element.name + '=' + element.value\r\n        }\r\n\r\n      });\r\n    }\r\n    return this.http.get<{data:ServiceInvoiceProduct[]}>(this.API_URL + this.url + q_string).pipe(map(response => {\r\n      return response.data;\r\n    }))\r\n  }\r\n\r\n  get_files(paymentId: number) {\r\n    return this.http.get<{data:any}>(this.API_URL + 'payment_files/' + paymentId + '/').pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  attach(file: FormData, paymentId: number) {\r\n    return this.http.post<{data:any}>(this.API_URL + 'payment_files/' + paymentId + '/', file).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  create(entity) {\r\n    return this.http.post<{data:ServiceInvoiceProduct}>(this.API_URL + this.url, entity).pipe(map(response => {\r\n      return response.data;\r\n    }));\r\n  }\r\n\r\n  update(entity: ServiceInvoiceProduct) {\r\n    return this.http.put(this.API_URL + this.url + entity.id + '/', entity);\r\n  }\r\n\r\n  updatePartly(entity: ServiceInvoiceProduct) {\r\n    return this.http.patch(this.API_URL + this.url + entity.id + '/', entity);\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.http.delete(this.API_URL + this.url + id + '/');\r\n  }\r\n\r\n  createEditServiceModal(type: ModalActionType, invoiceId: number, invoiceType: 'service' | 'invoice', service?: ServiceInvoiceProduct): Observable<ServiceInvoiceProduct> {\r\n    return this.dialog\r\n      .open<CreateEditInvoiceServiceComponent>(CreateEditInvoiceServiceComponent, {\r\n        width: '50rem',\r\n        height: 'auto',\r\n        panelClass: 'modal-overflow-visible',\r\n        data: {type, invoiceId, invoiceType, service},\r\n        autoFocus: false,\r\n        enterAnimationDuration: '250ms'\r\n      })\r\n      .afterClosed();\r\n  }\r\n}\r\n"],"names":["BehaviorSubject","iif","switchMap","tap","filter","map","UntilDestroy","untilDestroyed","i0","ctx_r4","ReportsCompanyAccountingNumberComponent","constructor","fb","companyService","adapterService","group","name","category_id","generateQueryKey","searchForm","search$","pipe","prepareForSearch","isShowAll","getForPagination","query","response","companiesCount","count","results","get","companies","length","paginateToFistPage","isLoading","ngOnInit","selectedCompany","newQueryKey","queryKey","currentPage","isStartFirstPage","value","push","key","controls","onSelectCompany","company","patchValue","next","paginator","changePage","paginate","event","page","onShowAll","onSelectCompanyCategory","id","onEditCompanyAccountingNumber","editCompanyAccountingNumberDialog","subscribe","selectors","viewQuery","ctx","Subject","debounceTime","distinctUntilChanged","ctx_r5","ReportsCostReportsComponent","costReportsService","router","route","list_product__nomenclature__name","list_product__nomenclature__code","code","warehouse","locator","costReportsPagination","reportsCount","costReports","name$","code$","selectedReport","onSelectWarehouse","onSelectLocator","startWith","ReportsItemCardComponent","warehouseProductService","accountingProductService","filterService","isLoadingNomenclatures","getPagination","p","fullName","nomenclature","loadHistory$","selectedProduct","isStarted","itemsCount","history","historyArr","accepted","accepted_quantity","qnt","out","forEach","product","quantity","remains","invoice","order","current_technology","supplier","supplier_unit_price","supplier_total_price","supplier_unit_cost","supplier_total_cost","type","unshift","console","log","register","decls","vars","consts","template","ReportsNomenclatureAccountingNumberComponent","nomenclatureService","categories","order_by_accounting_number","order_by_is_fixed_asset","order_by_is_non_ressivable","accounting_number","tariff_code","tariff_code_checked","weight","nomenclatures","nomenclaturesCount","accountingNumber$","tariffCode$","onSelectCategories","ids","selectedNomenclature","onAddAccountingNumber","addAccountingNumberDialog","editNomenclatureAccountingNumber","cloneDeep","rowNode_r12","ReportsOldCostReportComponent","accountingProductsService","snapshot","paramMap","Set","getAll","additionalExpenses","selectedNode","tree","productId","res","el","from_products","sort","a","b","Date","invoice_creation_date","getTime","ss","sumTotal","sumCost","element","accounting_services","service","item","parentIds","add","parent","parentId","findEl","find","rootId","countSum2","treeProducts","treeAdapter","loading","isShowSum","rowData","result","has","rootItem","countTotal","root","children","c","parseFloat","total_price","countTotal2","countCost","total_cost","countCost2","assembly_info","unit_cost","unit_price","visible","Boolean","countSum","parents","parentSumTotal","parentSumCost","parentEl","onToggleHide","hide","expandCollapseRecursive","node","isExpand","expanded","childNode","expandCollapse","isToExpand","temp","services","additionalExpensesModal","data","MultiProductCategoriesPickerComponent","of","ReportsOutComponent","columnFilterService","listsService","written_off_for_lists","supplier_category","root_categories","system_creation_date_after","system_creation_date_before","invoice_reception_date_after","invoice_reception_date_before","items_reception_date_after","items_reception_date_before","created_after","created_before","for_completed_lists","is_paid","purchase_categories","invoice_date_after","invoice_date_before","nomenclature_accounting_numbers","accounting_type","material_or_service","for_lists_in_progress","products","countTotals","getLists","getForFilter","lists","list","isLoadingLists","clearFilters","reset","picker","fillSelected","supplierTotalCost","supplierTotalPrice","balanceProducts","dt","_first","dateAdapter","exportToExcel","isGenerate","then","onApplyFilter","openFilterModal","newFilter","nomenclature_categories","split","nomenclature_code","nomenclature_name","onSelectCategory","join","onSelectPurchasedCategories","values","v","getPaidFinishedProducts","getProgressValue","changeAccountingNumber","evt","target","replace","onSelectProductStructureCategories","_r2","_r12","environment","Excel","ReportsFiltersModalComponent","AccountingProductsService","httpClient","dialog","base_url","accounting_url","q_string","index","API_URL","url","roots","balance","in","getById","reportType","workbook","Workbook","worksheet","addWorksheet","allProducts","columns","header","width","newProduct","total_quantity","category","self_serial_number","technology","purchaseCategory","purchase_category","date","document_creation_date","acceptedQuantity","supplierUnitCost","supplierUnitPrice","totalQuantity","writtenForList","written_off_for_list","cols","idx","getColumn","alignment","vertical","horizontal","font","size","getRow","bold","addRow","uom","unit_of_measure","symbol","dateToExcelStringDate","unitPrice","totalPrice","unitCost","totalCost","numFmt","xlsx","writeBuffer","blob","Blob","window","URL","createObjectURL","document","createElement","body","appendChild","setAttribute","href","download","click","revokeObjectURL","remove","open","height","autoFocus","enterAnimationDuration","afterClosed","factory","providedIn"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}